const r={Promise:"undefined"!=typeof window?window.Promise:void 0};var e="4.22",n="next";function t(r){if(r.toLowerCase()===n)return n;var e=r&&r.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function o(r){return void 0===r&&(r=e),"https://js.arcgis.com/"+r+"/"}function i(r){return!r||t(r)?function(r){void 0===r&&(r=e);var i=o(r),a=t(r);return a!==n&&3===a.major?i+(a.minor<=10?"js/":"")+"esri/css/esri.css":i+"esri/themes/light/main.css"}(r):r}function a(r,e){var n=i(r),t=function(r){return document.querySelector('link[href*="'+r+'"]')}(n);return t||function(r,e){if(e){var n=document.querySelector(e);n.parentNode.insertBefore(r,n)}else document.head.appendChild(r)}(t=function(r){var e=document.createElement("link");return e.rel="stylesheet",e.href=r,e}(n),e),t}var u={};function c(r,e,n){var t;n&&(t=function(r,e){var n=function(t){e(t.error||new Error("There was an error attempting to load "+r.src)),r.removeEventListener("error",n,!1)};return r.addEventListener("error",n,!1),n}(r,n));var o=function(){e(r),r.removeEventListener("load",o,!1),t&&r.removeEventListener("error",t,!1)};r.addEventListener("load",o,!1)}function s(){return document.querySelector("script[data-esri-loader]")}function d(){var r=window.require;return r&&r.on}function f(e){void 0===e&&(e={});var n={};[u,e].forEach((function(r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}));var t=n.version,i=n.url||o(t);return new r.Promise((function(r,e){var o=s();if(o){var u=o.getAttribute("src");u!==i?e(new Error("The ArcGIS API for JavaScript is already loaded ("+u+").")):d()?r(o):c(o,r,e)}else if(d())e(new Error("The ArcGIS API for JavaScript is already loaded."));else{var f=n.css;if(f)a(!0===f?t:f,n.insertCssBefore);o=function(r){var e=document.createElement("script");return e.type="text/javascript",e.src=r,e.setAttribute("data-esri-loader","loading"),e}(i),c(o,(function(){o.setAttribute("data-esri-loader","loaded"),r(o)}),e),document.body.appendChild(o)}}))}function v(e){return new r.Promise((function(r,n){var t=window.require.on("error",n);window.require(e,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.remove(),r(e)}))}))}function l(r,e){if(void 0===e&&(e={}),d())return v(r);var n=s(),t=n&&n.getAttribute("src");return!e.url&&t&&(e.url=t),f(e).then((function(){return v(r)}))}export{l};
