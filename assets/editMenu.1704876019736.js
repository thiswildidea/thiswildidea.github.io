import{I as e}from"./index.170487601973683.js";import{t as l,u as a,a as u}from"./menu.1704876019736.js";import{_ as o,u as t,D as r,k as m,p as s,r as d,Q as n,a as i,h as p,w as c,ay as f,H as F,o as _,v as y,i as V,t as b,b as g,F as x,e as h,f as k,y as O,g as I}from"./index.1704876019736.js";import"./getStyleSheets.1704876019736.js";const T={name:"editMenu",components:{IconSelector:e},props:{title:{type:String,default:()=>""}},setup(){t();const{proxy:e}=I(),o=r(null),d=m({isShowDialog:!1,ruleForm:{menuId:0,menuName:"",menuType:"",parentId:0,component:"",path:"",sort:1,status:"",title:"",icon:"",ishide:"",iskeepalive:"",isaffix:"",islink:"",isiFrame:"",permission:"",remark:""},isHideOptions:[],statusOptions:[],menuTypeOptions:[],yesOrNoOptions:[],menuOptions:[],ruleRules:{menuName:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],parentId:[{required:!0,message:"父菜单不能为空",trigger:"blur"}],menuType:[{required:!0,message:"菜单类型不能为空",trigger:"blur"}],status:[{required:!0,message:"菜单状态不能为空",trigger:"blur"}],sort:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}]}}),n=l=>{i(),e.mittBus.emit("onEditMenuModule",l),d.isShowDialog=!1},i=()=>{d.ruleForm.menuId=0,d.ruleForm.menuName="",d.ruleForm.menuType="",d.ruleForm.parentId=0,d.ruleForm.component="",d.ruleForm.path="",d.ruleForm.sort=1,d.ruleForm.status="",d.ruleForm.title="",d.ruleForm.icon="",d.ruleForm.isHide="",d.ruleForm.isKeepAlive="",d.ruleForm.isAffix="",d.ruleForm.isLink="",d.ruleForm.isIframe="",d.ruleForm.permission="",d.ruleForm.remark=""};return{ruleFormRef:o,openDialog:a=>{a.menuId&&null!=a.menuId&&0!=a.menuId?d.ruleForm=a:(i(),d.ruleForm.parentId=a.parentId),d.isShowDialog=!0,e.getDicts("sys_show_hide").then((e=>{d.isHideOptions=e.data})),e.getDicts("sys_normal_disable").then((e=>{d.statusOptions=e.data})),e.getDicts("sys_menu_type").then((e=>{d.menuTypeOptions=e.data})),e.getDicts("sys_num_yes_no").then((e=>{d.yesOrNoOptions=e.data})),l().then((e=>{d.menuOptions=[];const l={id:0,label:"主类目",children:[]};l.children=e.menus,d.menuOptions.push(l)}))},closeDialog:n,onCancel:()=>{n(),i()},onSubmit:()=>{const e=f(o);e&&e.validate((e=>{e&&(""==d.ruleForm.component&&("F"==d.ruleForm.menuType?d.ruleForm.component="":d.ruleForm.component="Layout"),d.ruleForm.parentId||(d.ruleForm.parentId=0),null!=d.ruleForm.menuId&&0!=d.ruleForm.menuId?a(d.ruleForm).then((e=>{F.success("修改成功"),n()})):u(d.ruleForm).then((e=>{F.success("新增成功"),n()})))}))},...s(d)}}},U={class:"system-menu-container"},w={style:{"font-size":"large"}},S=g("i",{class:"fa fa-exclamation-circle ml10 mt10"},null,-1),v=g("i",{class:"fa fa-exclamation-circle ml10 mt10"},null,-1),D=g("i",{class:"fa fa-exclamation-circle ml10 mt10"},null,-1),N=g("i",{class:"fa fa-exclamation-circle ml10 mt10"},null,-1),L={class:"dialog-footer"},C=V("取 消"),q=V("编 辑");const H=o(T,[["render",function(e,l,a,u,o,t){const r=d("el-cascader"),m=d("el-form-item"),s=d("el-col"),f=d("el-radio"),F=d("el-radio-group"),I=d("el-input"),T=d("el-input-number"),H=d("IconSelector"),j=d("el-tooltip"),z=d("el-row"),M=d("el-form"),R=d("el-button"),A=d("el-dialog"),B=n("drag");return _(),i("div",U,[p(A,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[15]||(l[15]=l=>e.isShowDialog=l),width:"769px"},{title:c((()=>[y((_(),i("div",w,[V(b(a.title),1)])),[[B,[".system-menu-container .el-dialog",".system-menu-container .el-dialog__header"]]])])),footer:c((()=>[g("span",L,[p(R,{onClick:u.onCancel,size:"small"},{default:c((()=>[C])),_:1},8,["onClick"]),p(R,{type:"primary",onClick:u.onSubmit,size:"small"},{default:c((()=>[q])),_:1},8,["onClick"])])])),default:c((()=>[p(M,{model:e.ruleForm,rules:e.ruleRules,ref:"ruleFormRef","label-width":"80px"},{default:c((()=>[p(z,{gutter:35},{default:c((()=>[p(s,{span:24},{default:c((()=>[p(m,{label:"上级菜单",prop:"parentId"},{default:c((()=>[p(r,{modelValue:e.ruleForm.parentId,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.parentId=l),options:e.menuOptions,size:"small",class:"w100",props:{label:"label",value:"id",checkStrictly:!0,emitPath:!1},clearable:"",filterable:"",placeholder:"选择上级菜单","show-all-levels":!1},null,8,["modelValue","options"])])),_:1})])),_:1}),p(s,{span:24},{default:c((()=>[p(m,{label:"菜单类型",prop:"menuType"},{default:c((()=>[p(F,{modelValue:e.ruleForm.menuType,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.menuType=l)},{default:c((()=>[(_(!0),i(x,null,h(e.menuTypeOptions,(e=>(_(),k(f,{key:e.dictValue,label:e.dictValue},{default:c((()=>[V(b(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(m,{label:"菜单名称",prop:"menuName"},{default:c((()=>[p(I,{modelValue:e.ruleForm.menuName,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.menuName=l),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(m,{label:"菜单排序",prop:"sort"},{default:c((()=>[p(T,{modelValue:e.ruleForm.sort,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.sort=l),placeholder:"菜单排序",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),"F"!=e.ruleForm.menuType?(_(),k(s,{key:0,xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(m,{label:"菜单图标",prop:"icon"},{default:c((()=>[p(H,{placeholder:"请输入菜单图标",modelValue:e.ruleForm.icon,"onUpdate:modelValue":l[4]||(l[4]=l=>e.ruleForm.icon=l),type:"all"},null,8,["modelValue"])])),_:1})])),_:1})):O("",!0),p(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(z,{gutter:8},{default:c((()=>[p(s,{span:22},{default:c((()=>[p(m,{label:"权限标识",prop:"permission"},{default:c((()=>[p(I,{modelValue:e.ruleForm.permission,"onUpdate:modelValue":l[5]||(l[5]=l=>e.ruleForm.permission=l),placeholder:"路由权限标识",clearable:"",disabled:"M"==e.ruleForm.menuType},null,8,["modelValue","disabled"])])),_:1})])),_:1}),p(s,{span:2},{default:c((()=>[p(j,{content:"路由权限标识（多个请用逗号隔开）",placement:"top"},{default:c((()=>[S])),_:1})])),_:1})])),_:1})])),_:1}),"F"!=e.ruleForm.menuType?(_(),k(s,{key:1,xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(z,{gutter:8},{default:c((()=>[p(s,{span:22},{default:c((()=>[p(m,{label:"组件地址"},{default:c((()=>[p(I,{modelValue:e.ruleForm.component,"onUpdate:modelValue":l[6]||(l[6]=l=>e.ruleForm.component=l),placeholder:"组件地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(s,{span:2},{default:c((()=>[p(j,{content:"菜单对应的具体vue页面文件路径views的下级路径/system/user/index,外链请填写/layout/routerView/link，内链请填写/layout/routerView/iframes",placement:"top"},{default:c((()=>[v])),_:1})])),_:1})])),_:1})])),_:1})):O("",!0),"F"!=e.ruleForm.menuType?(_(),k(s,{key:2,xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(z,{gutter:8},{default:c((()=>[p(s,{span:22},{default:c((()=>[p(m,{label:"路由地址"},{default:c((()=>[p(I,{modelValue:e.ruleForm.path,"onUpdate:modelValue":l[7]||(l[7]=l=>e.ruleForm.path=l),placeholder:"请输入路由地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(s,{span:2},{default:c((()=>[p(j,{content:"要和页面name保持一致:例如 /system/role",placement:"top"},{default:c((()=>[D])),_:1})])),_:1})])),_:1})])),_:1})):O("",!0),p(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(m,{label:"菜单状态",prop:"status"},{default:c((()=>[p(F,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[8]||(l[8]=l=>e.ruleForm.status=l)},{default:c((()=>[(_(!0),i(x,null,h(e.statusOptions,(e=>(_(),k(f,{key:e.dictValue,label:e.dictValue},{default:c((()=>[V(b(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),"F"!=e.ruleForm.menuType?(_(),k(s,{key:3,xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(m,{label:"是否隐藏"},{default:c((()=>[p(F,{modelValue:e.ruleForm.ishide,"onUpdate:modelValue":l[9]||(l[9]=l=>e.ruleForm.ishide=l)},{default:c((()=>[(_(!0),i(x,null,h(e.isHideOptions,(e=>(_(),k(f,{key:e.dictValue,label:e.dictValue},{default:c((()=>[V(b(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):O("",!0),"F"!=e.ruleForm.menuType?(_(),k(s,{key:4,xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(m,{label:"是否缓存"},{default:c((()=>[p(F,{modelValue:e.ruleForm.iskeepalive,"onUpdate:modelValue":l[10]||(l[10]=l=>e.ruleForm.iskeepalive=l)},{default:c((()=>[(_(!0),i(x,null,h(e.yesOrNoOptions,(e=>(_(),k(f,{key:e.dictValue,label:e.dictValue},{default:c((()=>[V(b(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):O("",!0),"F"!=e.ruleForm.menuType?(_(),k(s,{key:5,xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(z,{gutter:8},{default:c((()=>[p(s,{span:22},{default:c((()=>[p(m,{label:"是否固定"},{default:c((()=>[p(F,{modelValue:e.ruleForm.isaffix,"onUpdate:modelValue":l[11]||(l[11]=l=>e.ruleForm.isaffix=l)},{default:c((()=>[(_(!0),i(x,null,h(e.yesOrNoOptions,(e=>(_(),k(f,{key:e.dictValue,label:e.dictValue},{default:c((()=>[V(b(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(s,{span:2},{default:c((()=>["F"!=e.ruleForm.menuType?(_(),k(j,{key:0,content:"是否要固定到tag头部",placement:"top"},{default:c((()=>[N])),_:1})):O("",!0)])),_:1})])),_:1})])),_:1})):O("",!0),"F"!=e.ruleForm.menuType?(_(),k(s,{key:6,xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(m,{label:"是否内嵌"},{default:c((()=>[p(F,{modelValue:e.ruleForm.isiFrame,"onUpdate:modelValue":l[12]||(l[12]=l=>e.ruleForm.isiFrame=l)},{default:c((()=>[(_(!0),i(x,null,h(e.yesOrNoOptions,(e=>(_(),k(f,{key:e.dictValue,label:e.dictValue},{default:c((()=>[V(b(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):O("",!0),"F"!=e.ruleForm.menuType?(_(),k(s,{key:7,xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[p(m,{label:"链接地址"},{default:c((()=>[p(I,{modelValue:e.ruleForm.islink,"onUpdate:modelValue":l[13]||(l[13]=l=>e.ruleForm.islink=l),placeholder:"外链/内嵌时链接地址（http:xxx.com）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})):O("",!0),p(s,{xs:24,sm:24,md:24,lg:24,xl:24},{default:c((()=>[p(m,{label:"备注"},{default:c((()=>[p(I,{modelValue:e.ruleForm.remark,"onUpdate:modelValue":l[14]||(l[14]=l=>e.ruleForm.remark=l),placeholder:"请输入备注内容",clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}]]);export{H as default};
