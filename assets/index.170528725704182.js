import{at as e,_ as a,D as l,k as t,m as n,p as o,r,Q as s,a as i,h as u,w as d,g as p,I as m,H as c,o as g,au as h,v as y,f,i as b,t as C,b as w,x as _}from"./index.1705287257041.js";const z={name:"Logininfo",setup(){const{proxy:a}=p(),r=l(null),s=t({loading:!0,total:0,tableData:[],ids:[],single:!0,multiple:!0,title:"",statusOptions:[],queryParams:{pageNum:1,pageSize:10,loginLocation:void 0,userName:void 0}}),i=()=>{var a;s.loading=!0,(a=s.queryParams,e({url:"/log/login/list",method:"get",params:a})).then((e=>{s.tableData=e.rows,s.total=e.total,s.loading=!1}))};return n((()=>{i(),a.getDicts("sys_common_status").then((e=>{s.statusOptions=e.data}))})),{ruleFormRef:r,statusFormat:(e,l)=>a.selectDictLabel(s.statusOptions,e.status),handleSelectionChange:e=>{s.ids=e.map((e=>e.infoId)),s.single=1!=e.length,s.multiple=!e.length},handleSizeChange:e=>{s.queryParams.pageSize=e,i()},handleCurrentChange:e=>{s.queryParams.pageNum=e,i()},resetQuery:()=>{s.queryParams.loginLocation=void 0,s.queryParams.userName=void 0,i()},handleQuery:i,handleClean:()=>{m({message:"是否确认清空所有登录日志数据项?",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e({url:"/log/login/clean",method:"delete"})})).then((()=>{i(),c.success("清空成功")}))},onTabelRowDel:a=>{const l=a.infoId||s.ids;m({message:'是否确认删除访问编号为"'+l+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return(a=l,e({url:"/log/login/"+a,method:"delete"})).then((()=>{i(),c.success("删除成功")}));var a}))},...o(s)}}},q={class:"system-user-container app-container"},v=b(" 搜索"),S=b(" 重置 "),P=b("删除"),x=b("清空");const k=a(z,[["render",function(e,a,l,t,n,o){const p=r("el-input"),m=r("el-form-item"),c=r("SvgIcon"),z=r("el-button"),k=r("el-form"),D=r("el-col"),L=r("el-row"),N=r("el-table-column"),Q=r("el-tag"),T=r("el-table"),B=r("el-divider"),V=r("el-pagination"),F=r("el-card"),I=s("loading");return g(),i("div",q,[u(F,{shadow:"always"},{default:d((()=>[u(k,{model:e.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:d((()=>[u(m,{label:"登录地点",prop:"loginLocation"},{default:d((()=>[u(p,{placeholder:"请输入登录地点模糊查询",clearable:"",size:"small",onKeyup:h(t.handleQuery,["enter"]),style:{width:"240px"},modelValue:e.queryParams.loginLocation,"onUpdate:modelValue":a[0]||(a[0]=a=>e.queryParams.loginLocation=a)},null,8,["onKeyup","modelValue"])])),_:1}),u(m,{label:"用户名称",prop:"userName"},{default:d((()=>[u(p,{placeholder:"请输入用户名称模糊查询",clearable:"",size:"small",onKeyup:h(t.handleQuery,["enter"]),style:{width:"240px"},modelValue:e.queryParams.username,"onUpdate:modelValue":a[1]||(a[1]=a=>e.queryParams.username=a)},null,8,["onKeyup","modelValue"])])),_:1}),u(m,null,{default:d((()=>[u(z,{type:"primary",size:"mini",onClick:t.handleQuery},{default:d((()=>[u(c,{name:"elementSearch"}),v])),_:1},8,["onClick"]),u(z,{size:"mini",onClick:t.resetQuery},{default:d((()=>[u(c,{name:"elementRefresh"}),S])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),u(L,{gutter:10,class:"mb8"},{default:d((()=>[u(D,{span:1.5},{default:d((()=>[u(z,{type:"danger",plain:"",size:"mini",disabled:e.multiple,onClick:t.onTabelRowDel},{default:d((()=>[u(c,{name:"elementDelete"}),P])),_:1},8,["disabled","onClick"])])),_:1},8,["span"]),u(D,{span:1.5},{default:d((()=>[u(z,{type:"danger",plain:"",size:"mini",onClick:t.handleClean},{default:d((()=>[u(c,{name:"elementDelete"}),x])),_:1},8,["onClick"])])),_:1},8,["span"])])),_:1}),y((g(),f(T,{data:e.tableData,onSelectionChange:t.handleSelectionChange},{default:d((()=>[u(N,{type:"selection",width:"55",align:"center"}),u(N,{label:"访问编号",align:"center",prop:"infoId"}),u(N,{label:"用户名称",align:"center",prop:"userName"}),u(N,{label:"登录地址",align:"center",prop:"ipaddr",width:"130","show-overflow-tooltip":!0}),u(N,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),u(N,{label:"浏览器",align:"center",prop:"browser"}),u(N,{label:"操作系统",align:"center",prop:"os"}),u(N,{label:"登录状态",align:"center",prop:"status"},{default:d((e=>[u(Q,{type:"1"===e.row.status?"danger":"success","disable-transitions":""},{default:d((()=>[b(C(t.statusFormat(e.row)),1)])),_:2},1032,["type"])])),_:1}),u(N,{label:"操作信息",align:"center",prop:"msg"}),u(N,{label:"登录日期",align:"center"},{default:d((a=>[w("span",null,C(e.dateStrFormat(a.row.createTime)),1)])),_:1})])),_:1},8,["data","onSelectionChange"])),[[I,e.loading]]),y(w("div",null,[u(B),u(V,{background:"",total:e.total,"current-page":e.queryParams.pageNum,"page-sizes":[10,20,30,40],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.handleSizeChange,onCurrentChange:t.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[_,e.total>0]])])),_:1})])}]]);export{k as default};
