import{_ as e,D as a,k as l,m as t,Q as n,p as o,r as i,H as r,a as s,h as d,w as u,g as p,N as c,J as m,o as g,av as y,F as f,e as h,f as w,v as b,i as C,t as _,b as v,y as x,x as z}from"./index.1763356783981.js";import{E as P,l as k,d as q,e as T}from"./editModule.17633567839813.js";const D={name:"index",components:{EditModule:P},setup(){const{proxy:e}=p(),i=a(),r=l({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,typeOptions:[],queryParams:{pageNum:1,pageSize:10,configName:void 0,configKey:void 0,configType:void 0}}),s=()=>{r.loading=!0,k(r.queryParams).then((e=>{r.tableData=e.rows,r.total=e.total,r.loading=!1}))};return t((()=>{s(),e.getDicts("sys_yes_no").then((e=>{r.typeOptions=e.data})),e.mittBus.on("onEditPostModule",(e=>{s()}))})),n((()=>{e.mittBus.off("onEditPostModule")})),{editModuleRef:i,handleSelectionChange:e=>{r.ids=e.map((e=>e.configId)),r.single=1!=e.length,r.multiple=!e.length},handleSizeChange:e=>{r.queryParams.pageSize=e,s()},handleCurrentChange:e=>{r.queryParams.pageNum=e,s()},handleQuery:s,resetQuery:()=>{r.queryParams.configName=void 0,r.queryParams.configKey=void 0,r.queryParams.configType=void 0,s()},handleExport:()=>{const a=r.queryParams;c({message:"是否确认导出所有参数数据项?",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return T(a)})).then((a=>{e.download(a.data)}))},onOpenAddModule:e=>{e=[],r.title="添加配置参数",i.value.openDialog(e)},onOpenEditModule:e=>{r.title="修改配置参数",i.value.openDialog(e)},typeFormat:(a,l)=>e.selectDictLabel(r.typeOptions,a.configType),onTabelRowDel:e=>{const a=e.dictId||r.ids;c({message:'是否确认删除配置参数编号为"'+a+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return q(a).then((()=>{s(),m.success("删除成功")}))}))},...o(r)}}},S={class:"app-container"},V=C(" 搜索"),M=C(" 重置 "),E=C("新增"),K=C("删除"),N=C("导出"),B=C("修改"),O=C("删除");const Q=e(D,[["render",function(e,a,l,t,n,o){const p=i("el-input"),c=i("el-form-item"),m=i("el-option"),P=i("el-select"),k=i("SvgIcon"),q=i("el-button"),T=i("el-form"),D=i("el-col"),Q=i("el-row"),R=i("el-table-column"),F=i("el-tag"),I=i("el-table"),j=i("el-divider"),U=i("el-pagination"),A=i("el-card"),L=i("EditModule"),H=r("auth"),J=r("loading");return g(),s("div",S,[d(A,{shadow:"always"},{default:u((()=>[d(T,{model:e.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:u((()=>[d(c,{label:"参数名称",prop:"configName"},{default:u((()=>[d(p,{placeholder:"参数名称模糊查询",clearable:"",size:"small",onKeyup:y(t.handleQuery,["enter"]),style:{width:"240px"},modelValue:e.queryParams.configName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.queryParams.configName=a)},null,8,["onKeyup","modelValue"])])),_:1}),d(c,{label:"参数键名",prop:"configKey"},{default:u((()=>[d(p,{placeholder:"参数键名模糊查询",clearable:"",size:"small",onKeyup:y(t.handleQuery,["enter"]),style:{width:"240px"},modelValue:e.queryParams.configKey,"onUpdate:modelValue":a[1]||(a[1]=a=>e.queryParams.configKey=a)},null,8,["onKeyup","modelValue"])])),_:1}),d(c,{label:"系统内置",prop:"configType"},{default:u((()=>[d(P,{modelValue:e.queryParams.configType,"onUpdate:modelValue":a[2]||(a[2]=a=>e.queryParams.configType=a),placeholder:"系统内置",clearable:"",size:"small",style:{width:"240px"}},{default:u((()=>[(g(!0),s(f,null,h(e.typeOptions,(e=>(g(),w(m,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(c,null,{default:u((()=>[d(q,{type:"primary",size:"mini",onClick:t.handleQuery},{default:u((()=>[d(k,{name:"elementSearch"}),V])),_:1},8,["onClick"]),d(q,{size:"mini",onClick:t.resetQuery},{default:u((()=>[d(k,{name:"elementRefresh"}),M])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),d(Q,{gutter:10,class:"mb8"},{default:u((()=>[d(D,{span:1.5},{default:u((()=>[b((g(),w(q,{type:"primary",plain:"",size:"mini",onClick:t.onOpenAddModule},{default:u((()=>[d(k,{name:"elementPlus"}),E])),_:1},8,["onClick"])),[[H,"system:config:add"]])])),_:1},8,["span"]),d(D,{span:1.5},{default:u((()=>[b((g(),w(q,{type:"danger",plain:"",size:"mini",disabled:e.multiple,onClick:t.onTabelRowDel},{default:u((()=>[d(k,{name:"elementDelete"}),K])),_:1},8,["disabled","onClick"])),[[H,"system:config:delete"]])])),_:1},8,["span"]),d(D,{span:1.5},{default:u((()=>[b((g(),w(q,{type:"warning",plain:"",size:"mini",onClick:t.handleExport},{default:u((()=>[d(k,{name:"elementDownload"}),N])),_:1},8,["onClick"])),[[H,"system:config:export"]])])),_:1},8,["span"])])),_:1}),b((g(),w(I,{data:e.tableData,onSelectionChange:t.handleSelectionChange},{default:u((()=>[d(R,{type:"selection",width:"55",align:"center"}),d(R,{label:"参数主键",align:"center",prop:"configId"}),d(R,{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}),d(R,{label:"参数键名",align:"center",prop:"configKey","show-overflow-tooltip":!0}),d(R,{label:"参数键值",align:"center",prop:"configValue"}),d(R,{label:"系统内置",align:"center",prop:"configType"},{default:u((e=>[d(F,{type:"1"===e.row.configType?"danger":"success","disable-transitions":""},{default:u((()=>[C(_(t.typeFormat(e.row)),1)])),_:2},1032,["type"])])),_:1}),d(R,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),d(R,{label:"创建时间",align:"center",prop:"create_time",width:"180"},{default:u((a=>[v("span",null,_(e.dateStrFormat(a.row.createTime)),1)])),_:1}),d(R,{label:"操作",align:"center",width:"200","class-name":"medium-padding fixed-width"},{default:u((e=>[b((g(),w(q,{size:"mini",type:"text",onClick:a=>t.onOpenEditModule(e.row)},{default:u((()=>[d(k,{name:"elementEdit"}),B])),_:2},1032,["onClick"])),[[H,"system:config:edit"]]),0!=e.row.parentId?b((g(),w(q,{key:0,size:"mini",type:"text",onClick:a=>t.onTabelRowDel(e.row)},{default:u((()=>[d(k,{name:"elementDelete"}),O])),_:2},1032,["onClick"])),[[H,"system:config:delete"]]):x("",!0)])),_:1})])),_:1},8,["data","onSelectionChange"])),[[J,e.loading]]),b(v("div",null,[d(j),d(U,{background:"",total:e.total,"current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.handleSizeChange,onCurrentChange:t.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[z,e.total>0]])])),_:1}),d(L,{ref:"editModuleRef",title:e.title},null,8,["title"])])}]]);export{Q as default};
