import{d as e,D as t,k as a,p as l,m as i,M as n,r as o,Q as s,a as d,h as r,w as u,ay as p,g as m,o as c,au as y,F as f,e as g,f as b,v as w,b as h,t as _,i as v,y as k,x,I as z,H as C}from"./index.1705454117159.js";import{l as T,d as V,e as D}from"./type.1705454117159.js";import P from"./editModule.17054541171595.js";import q from"./dictList.1705454117159.js";import"./editDictItem.1705454117159.js";const I={class:"app-container"},N=v(" 搜索"),B=v(" 重置 "),S=v("新增"),j=v("删除"),M=v("导出"),L=v("字典配置"),K=v("修改"),E=v("删除"),F=e({setup(e){const{proxy:F}=m(),O=t(),R=t(),U=a({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,statusOptions:[{dictValue:"0",dictLabel:"正常"},{dictValue:"1",dictLabel:"禁用"}],queryParams:{pageNum:1,pageSize:10,dictName:void 0,dictType:void 0,status:void 0},dictItemForm:[]}),{loading:H,multiple:Q,title:A,tableData:G,total:J,statusOptions:W,queryParams:X}=l(U),Y=()=>{U.loading=!0,T(U.queryParams).then((e=>{U.tableData=e.rows,U.total=e.total,U.loading=!1}))},Z=()=>{U.queryParams.dictName=void 0,U.queryParams.dictType=void 0,U.queryParams.status=void 0,Y()},$=e=>{e=[],U.title="添加字典",O.value.openDialog(e)},ee=e=>{const t=e.dictId||U.ids;z({message:'是否确认删除字典编号为"'+t+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return V(t).then((()=>{Y(),C.success("删除成功")}))}))},te=e=>{U.ids=e.map((e=>e.dictId)),U.single=1!=e.length,U.multiple=!e.length},ae=e=>{U.queryParams.pageSize=e,Y()},le=e=>{U.queryParams.pageNum=e,Y()},ie=()=>{const e=U.queryParams;z({message:"是否确认导出所有类型数据项?",title:"警告",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return D(e)}))};return i((()=>{Y(),F.mittBus.on("onEditPostModule",(e=>{Y()}))})),n((()=>{F.mittBus.off("onEditPostModule")})),(e,t)=>{const a=o("el-input"),l=o("el-form-item"),i=o("el-option"),n=o("el-select"),m=o("SvgIcon"),z=o("el-button"),C=o("el-form"),T=o("el-col"),V=o("el-row"),D=o("el-table-column"),ne=o("router-link"),oe=o("el-tag"),se=o("el-table"),de=o("el-divider"),re=o("el-pagination"),ue=o("el-card"),pe=s("auth"),me=s("loading");return c(),d("div",I,[r(ue,{shadow:"always"},{default:u((()=>[r(C,{model:p(X),ref:"queryForm",inline:!0,"label-width":"68px"},{default:u((()=>[r(l,{label:"字典名称",prop:"dictName"},{default:u((()=>[r(a,{placeholder:"请输入字典名称模糊查询",clearable:"",size:"small",onKeyup:y(Y,["enter"]),style:{width:"240px"},modelValue:p(X).dictName,"onUpdate:modelValue":t[0]||(t[0]=e=>p(X).dictName=e)},null,8,["onKeyup","modelValue"])])),_:1}),r(l,{label:"字典类型",prop:"dictType"},{default:u((()=>[r(a,{modelValue:p(X).dictType,"onUpdate:modelValue":t[1]||(t[1]=e=>p(X).dictType=e),placeholder:"请输入字典类型模糊查询",clearable:"",size:"small",style:{width:"240px"},onKeyup:y(Y,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),r(l,{label:"状态",prop:"status"},{default:u((()=>[r(n,{modelValue:p(X).status,"onUpdate:modelValue":t[2]||(t[2]=e=>p(X).status=e),placeholder:"字典状态",clearable:"",size:"small",style:{width:"240px"}},{default:u((()=>[(c(!0),d(f,null,g(p(W),(e=>(c(),b(i,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(l,null,{default:u((()=>[r(z,{type:"primary",size:"mini",onClick:Y},{default:u((()=>[r(m,{name:"elementSearch"}),N])),_:1}),r(z,{size:"mini",onClick:Z},{default:u((()=>[r(m,{name:"elementRefresh"}),B])),_:1})])),_:1})])),_:1},8,["model"]),r(V,{gutter:10,class:"mb8"},{default:u((()=>[r(T,{span:1.5},{default:u((()=>[w((c(),b(z,{type:"primary",plain:"",size:"mini",onClick:$},{default:u((()=>[r(m,{name:"elementPlus"}),S])),_:1})),[[pe,"system:dictT:add"]])])),_:1},8,["span"]),r(T,{span:1.5},{default:u((()=>[w((c(),b(z,{type:"danger",plain:"",size:"mini",disabled:p(Q),onClick:ee},{default:u((()=>[r(m,{name:"elementDelete"}),j])),_:1},8,["disabled"])),[[pe,"system:dictT:delete"]])])),_:1},8,["span"]),r(T,{span:1.5},{default:u((()=>[w((c(),b(z,{type:"warning",plain:"",size:"mini",onClick:ie},{default:u((()=>[r(m,{name:"elementDownload"}),M])),_:1})),[[pe,"system:dictT:export"]])])),_:1},8,["span"])])),_:1}),w((c(),b(se,{border:"",data:p(G),onSelectionChange:te},{default:u((()=>[r(D,{type:"selection",align:"center"}),r(D,{label:"字典编号",align:"center",prop:"dictId"}),r(D,{label:"字典名称",align:"center",prop:"dictName","show-overflow-tooltip":!0}),r(D,{label:"字典类型",align:"center","show-overflow-tooltip":!0},{default:u((e=>[r(ne,{to:"/dict/type/data/"+e.row.dictId,class:"link-type"},{default:u((()=>[h("span",null,_(e.row.dictType),1)])),_:2},1032,["to"])])),_:1}),r(D,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),r(D,{label:"状态",align:"center",prop:"status"},{default:u((e=>[r(oe,{type:"1"===e.row.status?"danger":"success","disable-transitions":""},{default:u((()=>{return[v(_((t=e.row,F.selectDictLabel(U.statusOptions,t.status))),1)];var t})),_:2},1032,["type"])])),_:1}),r(D,{label:"操作",align:"center",width:"250","class-name":"medium-padding fixed-width"},{default:u((e=>[r(z,{size:"mini",type:"text",icon:"el-icon-s-tools",onClick:t=>{return a=e.row,void R.value.openDrawer(a);var a}},{default:u((()=>[r(m,{name:"elementTools"}),L])),_:2},1032,["onClick"]),w((c(),b(z,{size:"mini",type:"text",onClick:t=>{return a=e.row,U.title="修改字典",void O.value.openDialog(a);var a}},{default:u((()=>[r(m,{name:"elementEdit"}),K])),_:2},1032,["onClick"])),[[pe,"system:dictT:edit"]]),0!=e.row.parentId?w((c(),b(z,{key:0,size:"mini",type:"text",onClick:t=>ee(e.row)},{default:u((()=>[r(m,{name:"elementDelete"}),E])),_:2},1032,["onClick"])),[[pe,"system:dictT:delete"]]):k("",!0)])),_:1})])),_:1},8,["data"])),[[me,p(H)]]),w(h("div",null,[r(de),r(re,{background:"",total:p(J),"current-page":p(X).pageNum,"page-size":p(X).pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ae,onCurrentChange:le},null,8,["total","current-page","page-size"])],512),[[x,p(J)>0]])])),_:1}),r(P,{ref_key:"editModuleRef",ref:O,title:p(A)},null,8,["title"]),r(q,{ref_key:"dictItemModuleRef",ref:R},null,512)])}}});export{F as default};
