import{_ as e,D as l,k as o,p as r,r as a,Q as u,a as t,h as s,w as i,ay as n,o as m,v as d,i as p,t as c,b,F as g,e as f,f as F,g as j}from"./index.1705379616303.js";const V={name:"editMenu",props:{title:{type:String,default:()=>""}},setup(){const{proxy:e}=j(),a=l(null),u=o({isShowDialog:!1,loading:!1,ruleForm:{jobId:0,jobName:"",jobGroup:"",jobType:"1",invokeTarget:"",args:"",cronExpression:"",concurrent:"",misfirePolicy:"1",status:"",remark:""},jobGroupOptions:[],statusOptions:[],ruleRules:{jobName:[{required:!0,message:"任务名称不能为空",trigger:"blur"}],invokeTarget:[{required:!0,message:"调用目标不能为空",trigger:"blur"}],cronExpression:[{required:!0,message:"cron执行表达式不能为空",trigger:"blur"}]}}),t=l=>{e.mittBus.emit("onEditJobModule",l),u.isShowDialog=!1},s=()=>{u.ruleForm.jobId=0,u.ruleForm.jobName="",u.ruleForm.jobGroup="",u.ruleForm.invokeTarget="",u.ruleForm.jobType="1",u.ruleForm.args="",u.ruleForm.cronExpression="",u.ruleForm.concurrent="",u.ruleForm.misfirePolicy="1",u.ruleForm.status="",u.ruleForm.remark=""};return{ruleFormRef:a,openDialog:l=>{console.log("打开弹窗",l),l.jobId&&null!=l.jobId&&""!=l.jobId?(u.ruleForm=l,u.ruleForm.jobId=l.jobId,u.ruleForm.jobName=l.jobName,u.ruleForm.jobGroup=l.jobGroup,u.ruleForm.jobType=l.jobType,u.ruleForm.args=l.args,u.ruleForm.invokeTarget=l.invokeTarget,u.ruleForm.cronExpression=l.cronExpression,u.ruleForm.concurrent=l.concurrent,u.ruleForm.misfirePolicy=l.misfirePolicy,u.ruleForm.status=l.status,u.ruleForm.remark=l.remark):s(),u.isShowDialog=!0,u.loading=!1,e.getDicts("sys_normal_disable").then((e=>{u.statusOptions=e.data})),e.getDicts("sys_job_group").then((e=>{u.jobGroupOptions=e.data}))},closeDialog:t,onCancel:()=>{t()},initForm:s,onSubmit:()=>{const e=n(a);e&&e.validate((e=>{e&&(u.loading=!0,null!=u.ruleForm.jobId&&u.ruleForm.jobId)}))},...r(u)}}},_={class:"system-job-container"},y={style:{"font-size":"large"}},k=p(" 调用方法 "),h=p(" 使用示例：cronHandle 方法后端实现逻辑, 接口类型直接填写接口 "),x=b("i",{class:"fa fa-exclamation-circle"},null,-1),T=p(" 调用参数 "),v=p(" 使用示例：类型string "),D=b("i",{class:"fa fa-exclamation-circle"},null,-1),G=p("接口"),E=p("函数"),I=p("立即执行"),U=p("执行一次"),w=p("放弃执行"),N={class:"dialog-footer"},S=p("取 消"),P=p("编 辑");const C=e(V,[["render",function(e,l,o,r,n,j){const V=a("el-input"),C=a("el-form-item"),O=a("el-option"),z=a("el-select"),R=a("el-tooltip"),q=a("el-radio-button"),L=a("el-radio-group"),M=a("el-radio"),B=a("el-form"),H=a("el-button"),J=a("el-dialog"),Q=u("drag");return m(),t("div",_,[s(J,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[8]||(l[8]=l=>e.isShowDialog=l),width:"769px"},{title:i((()=>[d((m(),t("div",y,[p(c(o.title),1)])),[[Q,[".system-job-container .el-dialog",".system-job-container .el-dialog__header"]]])])),footer:i((()=>[b("span",N,[s(H,{onClick:r.onCancel,size:"small"},{default:i((()=>[S])),_:1},8,["onClick"]),s(H,{type:"primary",onClick:r.onSubmit,loading:e.loading,size:"small"},{default:i((()=>[P])),_:1},8,["onClick","loading"])])])),default:i((()=>[s(B,{model:e.ruleForm,rules:e.ruleRules,ref:"ruleFormRef","label-width":"100px"},{default:i((()=>[s(C,{label:"任务名称",prop:"jobName"},{default:i((()=>[s(V,{modelValue:e.ruleForm.jobName,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.jobName=l),placeholder:"请输入任务名称"},null,8,["modelValue"])])),_:1}),s(C,{label:"任务分组",prop:"jobGroup"},{default:i((()=>[s(z,{modelValue:e.ruleForm.jobGroup,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.jobGroup=l),placeholder:"请选择"},{default:i((()=>[(m(!0),t(g,null,f(e.jobGroupOptions,(e=>(m(),F(O,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(C,{prop:"invokeTarget"},{label:i((()=>[b("span",null,[k,s(R,{placement:"top"},{content:i((()=>[h])),default:i((()=>[x])),_:1})])])),default:i((()=>[s(V,{modelValue:e.ruleForm.invokeTarget,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.invokeTarget=l),placeholder:"请输入调用目标"},null,8,["modelValue"])])),_:1}),s(C,{prop:"args"},{label:i((()=>[b("span",null,[T,s(R,{placement:"top"},{content:i((()=>[v])),default:i((()=>[D])),_:1})])])),default:i((()=>[s(V,{modelValue:e.ruleForm.args,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.args=l),placeholder:"调用参数"},null,8,["modelValue"])])),_:1}),s(C,{label:"cron表达式",prop:"cronExpression"},{default:i((()=>[s(V,{modelValue:e.ruleForm.cronExpression,"onUpdate:modelValue":l[4]||(l[4]=l=>e.ruleForm.cronExpression=l),placeholder:"请输入cron执行表达式"},null,8,["modelValue"])])),_:1}),s(C,{label:"任务类型",prop:"jobType"},{default:i((()=>[s(L,{modelValue:e.ruleForm.jobType,"onUpdate:modelValue":l[5]||(l[5]=l=>e.ruleForm.jobType=l),size:"small"},{default:i((()=>[s(q,{label:"1"},{default:i((()=>[G])),_:1}),s(q,{label:"2"},{default:i((()=>[E])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(C,{label:"错误策略",prop:"misfirePolicy"},{default:i((()=>[s(L,{modelValue:e.ruleForm.misfirePolicy,"onUpdate:modelValue":l[6]||(l[6]=l=>e.ruleForm.misfirePolicy=l),size:"small"},{default:i((()=>[s(q,{label:"1"},{default:i((()=>[I])),_:1}),s(q,{label:"2"},{default:i((()=>[U])),_:1}),s(q,{label:"3"},{default:i((()=>[w])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(C,{label:"状态"},{default:i((()=>[s(L,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[7]||(l[7]=l=>e.ruleForm.status=l)},{default:i((()=>[(m(!0),t(g,null,f(e.statusOptions,(e=>(m(),F(M,{key:e.dictValue,label:e.dictValue},{default:i((()=>[p(c(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}]]);export{C as default};
