import{_ as e,D as a,k as t,m as l,M as n,p as o,r as s,Q as i,a as d,h as u,w as r,g as p,I as m,H as c,o as g,au as y,F as h,e as f,f as C,v as b,i as _,t as w,y as z,x as P,b as k}from"./index.1704982031072.js";import{E as q,l as v,d as x}from"./editModule.17049820310727.js";const D={name:"index",components:{EditModule:q},setup(){const{proxy:e}=p(),s=a(),i=t({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,statusOptions:[],queryParams:{pageNum:1,pageSize:10,postCode:void 0,postName:void 0,status:void 0}}),d=()=>{i.loading=!0,v(i.queryParams).then((e=>{i.tableData=e.rows,i.total=e.total,i.loading=!1}))};return l((()=>{d(),e.getDicts("sys_normal_disable").then((e=>{i.statusOptions=e.data})),e.mittBus.on("onEditPostModule",(e=>{d()}))})),n((()=>{e.mittBus.off("onEditPostModule")})),{editModuleRef:s,handleSelectionChange:e=>{i.ids=e.map((e=>e.postId)),i.single=1!=e.length,i.multiple=!e.length},handleQuery:d,handleCurrentChange:e=>{i.queryParams.pageNum=e,d()},handleSizeChange:e=>{i.queryParams.pageSize=e,d()},resetQuery:()=>{i.queryParams.postName=void 0,i.queryParams.postCode=void 0,i.queryParams.status=void 0,d()},statusFormat:a=>e.selectDictLabel(i.statusOptions,a.status),onOpenAddModule:e=>{e=[],i.title="添加岗位",s.value.openDialog(e)},onOpenEditModule:e=>{i.title="修改岗位",s.value.openDialog(e)},onTabelRowDel:e=>{const a=e.postId||i.ids;m({message:'是否确认删除岗位编号为"'+a+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return x(a).then((()=>{d(),c.success("删除成功")}))}))},...o(i)}}},S={class:"app-container"},M=_(" 搜索"),V=_(" 重置 "),N=_("新增"),E=_("删除"),O=_("导出"),Q=_("修改"),R=_("删除");const I=e(D,[["render",function(e,a,t,l,n,o){const p=s("el-input"),m=s("el-form-item"),c=s("el-option"),q=s("el-select"),v=s("SvgIcon"),x=s("el-button"),D=s("el-form"),I=s("el-col"),T=s("el-row"),B=s("el-table-column"),F=s("el-tag"),K=s("el-table"),j=s("el-divider"),U=s("el-pagination"),A=s("el-card"),L=s("EditModule"),H=i("auth"),G=i("loading");return g(),d("div",S,[u(A,{shadow:"always"},{default:r((()=>[u(D,{model:e.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:r((()=>[u(m,{label:"岗位编码",prop:"postCode"},{default:r((()=>[u(p,{placeholder:"请输入岗位编码模糊查询",clearable:"",size:"small",onKeyup:y(l.handleQuery,["enter"]),style:{width:"240px"},modelValue:e.queryParams.postCode,"onUpdate:modelValue":a[0]||(a[0]=a=>e.queryParams.postCode=a)},null,8,["onKeyup","modelValue"])])),_:1}),u(m,{label:"岗位名称",prop:"postName"},{default:r((()=>[u(p,{placeholder:"请输入岗位名称模糊查询",clearable:"",size:"small",onKeyup:y(l.handleQuery,["enter"]),style:{width:"240px"},modelValue:e.queryParams.postName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.queryParams.postName=a)},null,8,["onKeyup","modelValue"])])),_:1}),u(m,{label:"状态",prop:"status"},{default:r((()=>[u(q,{modelValue:e.queryParams.status,"onUpdate:modelValue":a[2]||(a[2]=a=>e.queryParams.status=a),placeholder:"岗位状态",clearable:"",size:"small",style:{width:"240px"}},{default:r((()=>[(g(!0),d(h,null,f(e.statusOptions,(e=>(g(),C(c,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(m,null,{default:r((()=>[u(x,{type:"primary",size:"mini",onClick:l.handleQuery},{default:r((()=>[u(v,{name:"elementSearch"}),M])),_:1},8,["onClick"]),u(x,{size:"mini",onClick:l.resetQuery},{default:r((()=>[u(v,{name:"elementRefresh"}),V])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),u(T,{gutter:10,class:"mb8"},{default:r((()=>[u(I,{span:1.5},{default:r((()=>[b((g(),C(x,{type:"primary",plain:"",size:"mini",onClick:l.onOpenAddModule},{default:r((()=>[u(v,{name:"elementPlus"}),N])),_:1},8,["onClick"])),[[H,"system:post:add"]])])),_:1},8,["span"]),u(I,{span:1.5},{default:r((()=>[b((g(),C(x,{type:"danger",plain:"",size:"mini",disabled:e.multiple,onClick:l.onTabelRowDel},{default:r((()=>[u(v,{name:"elementDelete"}),E])),_:1},8,["disabled","onClick"])),[[H,"system:post:delete"]])])),_:1},8,["span"]),u(I,{span:1.5},{default:r((()=>[b((g(),C(x,{type:"warning",plain:"",size:"mini",onClick:l.onTabelRowDel},{default:r((()=>[u(v,{name:"elementDownload"}),O])),_:1},8,["onClick"])),[[H,"system:post:export"]])])),_:1},8,["span"])])),_:1}),b((g(),C(K,{data:e.tableData,onSelectionChange:l.handleSelectionChange},{default:r((()=>[u(B,{type:"selection",width:"55",align:"center"}),u(B,{label:"岗位编号",align:"center",prop:"postId"}),u(B,{label:"岗位编码",align:"center",prop:"postCode"}),u(B,{label:"岗位名称",align:"center",prop:"postName"}),u(B,{label:"岗位排序",align:"center",prop:"postSort"}),u(B,{label:"状态",align:"center",prop:"status"},{default:r((e=>[u(F,{type:"1"===e.row.status?"danger":"success","disable-transitions":""},{default:r((()=>[_(w(l.statusFormat(e.row)),1)])),_:2},1032,["type"])])),_:1}),u(B,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:r((e=>[b((g(),C(x,{size:"mini",type:"text",onClick:a=>l.onOpenEditModule(e.row)},{default:r((()=>[u(v,{name:"elementEdit"}),Q])),_:2},1032,["onClick"])),[[H,"system:post:edit"]]),0!=e.row.parentId?b((g(),C(x,{key:0,size:"mini",type:"text",onClick:a=>l.onTabelRowDel(e.row)},{default:r((()=>[u(v,{name:"elementDelete"}),R])),_:2},1032,["onClick"])),[[H,"system:post:delete"]]):z("",!0)])),_:1})])),_:1},8,["data","onSelectionChange"])),[[G,e.loading]]),b(k("div",null,[u(j),u(U,{background:"",total:e.total,"current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[P,e.total>0]])])),_:1}),u(L,{ref:"editModuleRef",title:e.title},null,8,["title"])])}]]);export{I as default};
