import{_ as e,u as t,c as a,o as s,a as n,b as i,t as l,g as o,d as r,r as u,e as c,F as m,f as d,w as h,h as g,i as p,j as f,k as y,l as C,m as w,n as v,p as b,q as L,s as k,v as x,x as S,y as V,z as T,A as _,T as R,B as I,C as A,D as $,E as M,G as F,H,I as B,J as D,K as q,L as z,M as E,N as P,S as O,O as W,P as Q,Q as j,R as N,U,V as X}from"./index.1763363051054.js";import{S as Y}from"./sortable.esm.1763363051054.js";import G from"./parent.1763363051054.js";const J=""+new URL("esrilogo.1763363051054.png",import.meta.url).href,K=["src"],Z=["src"];const ee=e({name:"layoutLogo",setup(){const{proxy:e}=o(),s=t(),n=a((()=>s.state.themeConfig.themeConfig)),i=a((()=>{let{isCollapse:e,layout:t}=s.state.themeConfig.themeConfig;return!e||"classic"===t||document.body.clientWidth<1e3}));return{logo:J,setShowLogo:i,getThemeConfig:n,onThemeConfigChange:()=>{if("transverse"===s.state.themeConfig.themeConfig.layout)return!1;e.mittBus.emit("onMenuClick"),s.state.themeConfig.themeConfig.isCollapse=!s.state.themeConfig.themeConfig.isCollapse}}}},[["render",function(e,t,a,o,r,u){return o.setShowLogo?(s(),n("div",{key:0,class:"layout-logo",onClick:t[0]||(t[0]=(...e)=>o.onThemeConfigChange&&o.onThemeConfigChange(...e))},[i("img",{src:o.logo,class:"layout-logo-medium-img"},null,8,K),i("span",null,l(o.getThemeConfig.globalTitle),1)])):(s(),n("div",{key:1,class:"layout-logo-size",onClick:t[1]||(t[1]=(...e)=>o.onThemeConfigChange&&o.onThemeConfigChange(...e))},[i("img",{src:o.logo,class:"layout-logo-size-img"},null,8,Z)]))}],["__scopeId","data-v-82c23d9a"]]),te=r({name:"navMenuSubItem",props:{chil:{type:Array,default:()=>[]}},setup:e=>({chils:a((()=>e.chil))})}),ae=["href"];const se=e(te,[["render",function(e,t,a,o,r,f){const y=u("SvgIcon"),C=u("sub-item",!0),w=u("el-sub-menu"),v=u("el-menu-item");return s(!0),n(m,null,c(e.chils,(t=>(s(),n(m,null,[t.children&&t.children.length>0?(s(),d(w,{index:t.path,key:t.path},{title:h((()=>[g(y,{name:t.meta.icon},null,8,["name"]),i("span",null,l(e.$t(t.meta.title)),1)])),default:h((()=>[g(C,{chil:t.children},null,8,["chil"])])),_:2},1032,["index"])):(s(),d(v,{index:t.path,key:t.path},{default:h((()=>[!t.meta.isLink||t.meta.isLink&&t.meta.isIframe?(s(),n(m,{key:0},[g(y,{name:t.meta.icon},null,8,["name"]),i("span",null,l(e.$t(t.meta.title)),1)],64)):(s(),n("a",{key:1,href:t.meta.isLink,target:"_blank",rel:"opener"},[g(y,{name:t.meta.icon},null,8,["name"]),p(" "+l(e.$t(t.meta.title)),1)],8,ae))])),_:2},1032,["index"]))],64)))),256)}]]),ne=r({name:"navMenuVertical",components:{SubItem:se},props:{menuList:{type:Array,default:()=>[]}},setup(e){const{proxy:s}=o(),n=t(),i=f(),l=y({defaultActive:i.meta.isDynamic?i.meta.isDynamicPath:i.path,isCollapse:!1}),r=a((()=>e.menuList)),u=a((()=>n.state.themeConfig.themeConfig)),c=e=>{const{path:t,meta:a}=e,s=a.isDynamic?a.isDynamicPath.split("/"):t.split("/");return s.length>=4&&a.isHide?s.splice(0,3).join("/"):t};return C(n.state.themeConfig.themeConfig,(()=>{document.body.clientWidth<=1e3?l.isCollapse=!1:l.isCollapse=u.value.isCollapse}),{immediate:!0}),w((()=>{l.defaultActive=c(i)})),v((e=>{l.defaultActive=c(e),s.mittBus.emit("onMenuClick");document.body.clientWidth<1e3&&(u.value.isCollapse=!1)})),{menuLists:r,getThemeConfig:u,...b(l)}}});const ie={class:"h100"};const le=e({name:"layoutAside",components:{Logo:ee,Vertical:e(ne,[["render",function(e,t,a,o,r,p){const f=u("SvgIcon"),y=u("SubItem"),C=u("el-sub-menu"),w=u("el-menu-item"),v=u("el-menu");return s(),d(v,{router:"","default-active":e.defaultActive,"background-color":"transparent",collapse:e.isCollapse,"unique-opened":e.getThemeConfig.isUniqueOpened,"collapse-transition":!1},{default:h((()=>[(s(!0),n(m,null,c(e.menuLists,(t=>(s(),n(m,null,[t.children&&t.children.length>0?(s(),d(C,{index:t.path,key:t.path},{title:h((()=>[g(f,{name:t.meta.icon},null,8,["name"]),i("span",null,l(e.$t(t.meta.title)),1)])),default:h((()=>[g(y,{chil:t.children},null,8,["chil"])])),_:2},1032,["index"])):(s(),d(w,{index:t.path,key:t.path},L({default:h((()=>[g(f,{name:t.meta.icon},null,8,["name"])])),_:2},[!t.meta.isLink||t.meta.isLink&&t.meta.isIframe?{name:"title",fn:h((()=>[i("span",null,l(e.$t(t.meta.title)),1)]))}:{name:"title",fn:h((()=>[i("a",{href:t.meta.isLink,target:"_blank",rel:"opener"},l(e.$t(t.meta.title)),9,["href"])]))}]),1032,["index"]))],64)))),256))])),_:1},8,["default-active","collapse","unique-opened"])}]])},setup(){const{proxy:e}=o(),s=t(),n=y({menuList:[],clientWidth:""}),i=a((()=>s.state.themeConfig.themeConfig)),l=a((()=>s.state.tagsViewRoutes.isTagsViewCurrenFull)),r=a((()=>{const{layout:e,isCollapse:t,menuBar:a}=s.state.themeConfig.themeConfig,i="#FFFFFF"===a||"#FFF"===a||"#fff"===a||"#ffffff"===a?"layout-el-aside-br-color":"";if(n.clientWidth<=1e3){if(t){document.body.setAttribute("class","el-popup-parent--hidden");const e=document.querySelector(".layout-container"),t=document.createElement("div");return t.setAttribute("class","layout-aside-mobile-mode"),e.appendChild(t),t.addEventListener("click",u),[i,"layout-aside-mobile","layout-aside-mobile-open"]}return u(),[i,"layout-aside-mobile","layout-aside-mobile-close"]}return"columns"===e?t?[i,"layout-aside-pc-1"]:[i,"layout-aside-pc-220"]:t?[i,"layout-aside-pc-64"]:[i,"layout-aside-pc-220"]})),u=()=>{var e;const t=document.querySelector(".layout-aside-mobile-mode");t&&(null==(e=t.parentNode)||e.removeChild(t));document.body.clientWidth<1e3&&(s.state.themeConfig.themeConfig.isCollapse=!1),document.body.setAttribute("class","")},c=a((()=>{let{layout:e,isShowLogo:t}=s.state.themeConfig.themeConfig;return t&&"defaults"===e||t&&"columns"===e})),m=()=>{if("columns"===s.state.themeConfig.themeConfig.layout)return!1;n.menuList=d(s.state.routesList.routesList)},d=e=>e.filter((e=>!e.meta.isHide)).map((e=>((e=Object.assign({},e)).children&&(e.children=d(e.children)),e))),h=e=>{n.clientWidth=e};return C(s.state.themeConfig.themeConfig,(t=>{if(t.isShowLogoChange!==t.isShowLogo){if(!e.$refs.layoutAsideScrollbarRef)return!1;e.$refs.layoutAsideScrollbarRef.update()}})),C(s.state,(e=>{let{layout:t,isClassicSplitMenu:a}=e.themeConfig.themeConfig;if("classic"===t&&a)return!1;m()})),k((()=>{h(document.body.clientWidth),m(),e.mittBus.on("setSendColumnsChildren",(e=>{n.menuList=e.children})),e.mittBus.on("setSendClassicChildren",(e=>{let{layout:t,isClassicSplitMenu:a}=s.state.themeConfig.themeConfig;"classic"===t&&a&&(n.menuList=[],n.menuList=e.children)})),e.mittBus.on("getBreadcrumbIndexSetFilterRoutes",(()=>{m()})),e.mittBus.on("layoutMobileResize",(e=>{h(e.clientWidth),u()}))})),{setCollapseStyle:r,setShowLogo:c,getThemeConfig:i,isTagsViewCurrenFull:l,onAsideEnterLeave:t=>{let{layout:a}=s.state.themeConfig.themeConfig;if("columns"!==a)return!1;t||e.mittBus.emit("restoreDefault"),s.dispatch("routesList/setColumnsMenuHover",t)},...b(n)}}},[["render",function(e,t,a,i,l,o){const r=u("Logo"),c=u("Vertical"),m=u("el-scrollbar"),p=u("el-aside");return x((s(),n("div",ie,[g(p,{class:T(["layout-aside",i.setCollapseStyle])},{default:h((()=>[i.setShowLogo?(s(),d(r,{key:0})):V("",!0),g(m,{class:"flex-auto",ref:"layoutAsideScrollbarRef",onMouseenter:t[0]||(t[0]=e=>i.onAsideEnterLeave(!0)),onMouseleave:t[1]||(t[1]=e=>i.onAsideEnterLeave(!1))},{default:h((()=>[g(c,{menuList:e.menuList},null,8,["menuList"])])),_:1},512)])),_:1},8,["class"])],512)),[[S,!i.isTagsViewCurrenFull]])}]]),oe={key:0,class:"layout-navbars-breadcrumb-span"},re=["onClick"];const ue=e({name:"layoutBreadcrumb",setup(){const{proxy:e}=o(),s=t(),n=f(),i=_(),l=y({breadcrumbList:[],routeSplit:[],routeSplitFirst:"",routeSplitIndex:1}),r=a((()=>s.state.themeConfig.themeConfig)),u=a((()=>{m(n.path);const{layout:e,isBreadcrumb:t}=s.state.themeConfig.themeConfig;return"classic"===e||"transverse"===e?"none":t?"":"none"})),c=e=>{e.map((e=>{l.routeSplit.map(((t,a,s)=>{l.routeSplitFirst===e.path&&(l.routeSplitFirst+=`/${s[l.routeSplitIndex]}`,l.breadcrumbList.push(e),l.routeSplitIndex++,e.children&&c(e.children))}))}))},m=e=>{if(!s.state.themeConfig.themeConfig.isBreadcrumb)return!1;l.breadcrumbList=[s.state.routesList.routesList[0]],l.routeSplit=e.split("/"),l.routeSplit.shift(),l.routeSplitFirst=`/${l.routeSplit[0]}`,l.routeSplitIndex=1,c(s.state.routesList.routesList)};return w((()=>{m(n.path)})),v((e=>{m(e.path)})),{onThemeConfigChange:()=>{e.mittBus.emit("onMenuClick"),s.state.themeConfig.themeConfig.isCollapse=!s.state.themeConfig.themeConfig.isCollapse},isShowBreadcrumb:u,getThemeConfig:r,onBreadcrumbClick:e=>{const{redirect:t,path:a}=e;t?i.push(t):i.push(a)},...b(l)}}},[["render",function(e,t,a,o,r,f){const y=u("SvgIcon"),C=u("el-breadcrumb-item"),w=u("el-breadcrumb");return s(),n("div",{class:"layout-navbars-breadcrumb",style:A({display:o.isShowBreadcrumb})},[i("i",{class:T(["layout-navbars-breadcrumb-icon",o.getThemeConfig.isCollapse?"el-icon-s-unfold":"el-icon-s-fold"]),onClick:t[0]||(t[0]=(...e)=>o.onThemeConfigChange&&o.onThemeConfigChange(...e))},null,2),g(y,{class:"layout-navbars-breadcrumb-icon",name:o.getThemeConfig.isCollapse?"elementExpand":"elementFold",onClick:o.onThemeConfigChange},null,8,["name","onClick"]),g(w,{class:"layout-navbars-breadcrumb-hide"},{default:h((()=>[g(R,{name:"breadcrumb",mode:"out-in"},{default:h((()=>[(s(!0),n(m,null,c(e.breadcrumbList,((t,a)=>(s(),d(C,{key:t.meta.title},{default:h((()=>[a===e.breadcrumbList.length-1?(s(),n("span",oe,[o.getThemeConfig.isBreadcrumbIcon?(s(),d(y,{key:0,name:t.meta.icon,class:"layout-navbars-breadcrumb-iconfont"},null,8,["name"])):V("",!0),p(l(e.$t(t.meta.title)),1)])):(s(),n("a",{key:1,onClick:I((e=>o.onBreadcrumbClick(t)),["prevent"])},[o.getThemeConfig.isBreadcrumbIcon?(s(),d(y,{key:0,name:t.meta.icon,class:"layout-navbars-breadcrumb-iconfont"},null,8,["name"])):V("",!0),p(l(e.$t(t.meta.title)),1)],8,re))])),_:2},1024)))),128))])),_:1})])),_:1})],4)}],["__scopeId","data-v-c326a3d0"]]),ce=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],me=(()=>{const e=ce[0],t={};for(const a of ce){if((null==a?void 0:a[1])in document){for(const[s,n]of a.entries())t[e[s]]=n;return t}}return!1})(),de={change:me.fullscreenchange,error:me.fullscreenerror};let he={request:(e=document.documentElement,t)=>new Promise(((a,s)=>{const n=()=>{he.off("change",n),a()};he.on("change",n);const i=e[me.requestFullscreen](t);i instanceof Promise&&i.then(n).catch(s)})),exit:()=>new Promise(((e,t)=>{if(!he.isFullscreen)return void e();const a=()=>{he.off("change",a),e()};he.on("change",a);const s=document[me.exitFullscreen]();s instanceof Promise&&s.then(a).catch(t)})),toggle:(e,t)=>he.isFullscreen?he.exit():he.request(e,t),onchange(e){he.on("change",e)},onerror(e){he.on("error",e)},on(e,t){const a=de[e];a&&document.addEventListener(a,t,!1)},off(e,t){const a=de[e];a&&document.removeEventListener(a,t,!1)},raw:me};Object.defineProperties(he,{isFullscreen:{get:()=>Boolean(document[me.fullscreenElement])},element:{enumerable:!0,get:()=>document[me.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[me.fullscreenEnabled])}}),me||(he={isEnabled:!1});const ge=he,pe=r({name:"layoutBreadcrumbSearch",setup(){const e=$(),{t:a}=M(),s=t(),n=_(),i=y({isShowSearch:!1,menuQuery:"",tagsViewList:[]}),l=()=>{i.isShowSearch=!1},o=e=>t=>t.path.toLowerCase().indexOf(e.toLowerCase())>-1||t.meta.title.toLowerCase().indexOf(e.toLowerCase())>-1||a(t.meta.title).indexOf(e.toLowerCase())>-1,r=()=>{if(i.tagsViewList.length>0)return!1;s.state.tagsViewRoutes.tagsViewRoutes.map((e=>{e.meta.isHide||i.tagsViewList.push({...e})}))};return{layoutMenuAutocompleteRef:e,openSearch:()=>{i.menuQuery="",i.isShowSearch=!0,r(),F((()=>{e.value.focus()}))},closeSearch:l,menuSearch:(e,t)=>{t(e?i.tagsViewList.filter(o(e)):i.tagsViewList)},onHandleSelect:e=>{let{path:t,redirect:a}=e;e.meta.isLink&&!e.meta.isIframe?window.open(e.meta.isLink):a?n.push(a):n.push(t),l()},onSearchBlur:()=>{l()},...b(i)}}}),fe={class:"layout-search-dialog"};const ye=e(pe,[["render",function(e,t,a,o,r,c){const m=u("elementSearch"),d=u("el-icon"),f=u("SvgIcon"),y=u("el-autocomplete"),C=u("el-dialog");return s(),n("div",fe,[g(C,{modelValue:e.isShowSearch,"onUpdate:modelValue":t[1]||(t[1]=t=>e.isShowSearch=t),width:"300px","destroy-on-close":"",modal:!1,fullscreen:"","show-close":!1},{default:h((()=>[g(y,{modelValue:e.menuQuery,"onUpdate:modelValue":t[0]||(t[0]=t=>e.menuQuery=t),"fetch-suggestions":e.menuSearch,placeholder:e.$t("message.user.searchPlaceholder"),"prefix-icon":"el-icon-search",ref:"layoutMenuAutocompleteRef",onSelect:e.onHandleSelect,onBlur:e.onSearchBlur},{prefix:h((()=>[g(d,{class:"el-input__icon"},{default:h((()=>[g(m)])),_:1})])),default:h((({item:t})=>[i("div",null,[g(f,{name:t.meta.icon,class:"mr5"},null,8,["name"]),p(" "+l(e.$t(t.meta.title)),1)])])),_:1},8,["modelValue","fetch-suggestions","placeholder","onSelect","onBlur"])])),_:1},8,["modelValue"])])}],["__scopeId","data-v-3703af19"]]),Ce={name:"DonateComponent",setup(){const e=$(!1),t=$(!1),s=$(!1),n=$("paypal"),i=$("./icons/alipay-qrcode.png"),l=$("./icons/wechat-qrcode.png"),o=$("./icons/paypal-qrcode.png"),r=a((()=>"alipay"===n.value?i.value:"wechat"===n.value?l.value:"paypal"===n.value?o.value:i.value));return{dialogVisible:e,previewVisible:t,imageLoading:s,paymentMethod:n,currentQRCode:r,paypalQRCode:o,resolveIcon:e=>`./icons/${e}`,switchPaymentMethod:e=>{if("alipay"===e||"wechat"===e||"paypal"===e){n.value=e,s.value=!0;const t=(new Date).getTime();"alipay"===e?i.value=`./icons/alipay-qrcode.png?t=${t}`:"wechat"===e?l.value=`./icons/wechat-qrcode.png?t=${t}`:"paypal"===e&&(o.value=`./icons/paypal-qrcode.png?t=${t}`)}},showDonateDialog:()=>{e.value=!0,s.value=!0;const t=(new Date).getTime();"alipay"===n.value?i.value=`./icons/alipay-qrcode.png?t=${t}`:"wechat"===n.value?l.value=`./icons/wechat-qrcode.png?t=${t}`:"paypal"===n.value&&(o.value=`./icons/paypal-qrcode.png?t=${t}`)},showQrCodePreview:()=>{t.value=!0;let e="";switch(n.value){case"alipay":e=B.global.t("message.donation.alipaymessage");break;case"wechat":e=B.global.t("message.donation.wechatmessage");break;case"paypal":e=B.global.t("message.donation.paypalmessage");break;default:e=B.global.t("message.donation.paymessage")}D.info(e)},handleImageError:()=>{s.value=!1,D.error(B.global.t("message.donation.QRImageError"))},handleImageLoad:()=>{s.value=!1},handleDialogClosed:()=>{s.value=!1},getQRCodeAltText:()=>{switch(n.value){case"alipay":return B.global.t("message.donation.alipay_QR_Code");case"wechat":return B.global.t("message.donation.wechat_QR_Code");case"paypal":return B.global.t("message.donation.paypal_QR_Code");default:return B.global.t("message.donation.payment_QR_Code")}},getPaymentTipText:()=>{switch(n.value){case"alipay":return B.global.t("message.donation.alipay_Tip");case"wechat":return B.global.t("message.donation.wechat_Tip");case"paypal":return B.global.t("message.donation.paypal_Tip");default:return B.global.t("message.donation.payment_Tip")}},getPreviewTitle:()=>{switch(n.value){case"alipay":return B.global.t("message.donation.alipay_QR_Code");case"wechat":return B.global.t("message.donation.wechat_QR_Code");case"paypal":return B.global.t("message.donation.paypal_QR_Code");default:return B.global.t("message.donation.payment_QR_Code")}}}}},we={class:"donate-content"},ve={class:"donate-text"},be={class:"payment-switcher"},Le={class:"payment-icon"},ke=["src"],xe={class:"payment-name"},Se={class:"payment-icon"},Ve=["alt","src"],Te={class:"payment-name"},_e={class:"payment-icon"},Re=["src"],Ie={class:"payment-name"},Ae={class:"qrcode-container"},$e={class:"image-slot"},Me=(e=>(q("data-v-fe79604a"),e=e(),z(),e))((()=>i("i",{class:"el-icon-picture-outline"},null,-1))),Fe={class:"qrcode-hint"},He={class:"payment-tip"},Be={class:"donate-thank"},De={class:"preview-container"},qe=["src","alt"];const ze={name:"layoutBreadcrumbUser",components:{Search:ye,Donation:e(Ce,[["render",function(e,t,a,o,r,c){const m=u("el-image"),p=u("el-dialog"),f=H("loading");return s(),n("div",null,[g(p,{modelValue:o.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>o.dialogVisible=e),title:e.$t("message.donation.Supportdevelopment"),width:"350px",center:"",onClosed:o.handleDialogClosed},{default:h((()=>[i("div",we,[i("p",ve,l(e.$t("message.donation.Donation_text")),1),i("div",be,[i("div",{class:T(["payment-option",{active:"paypal"===o.paymentMethod}]),onClick:t[0]||(t[0]=e=>o.switchPaymentMethod("paypal"))},[i("span",Le,[i("img",{alt:"",style:{width:"20px",height:"20px"},src:o.resolveIcon("webchatpay.svg")},null,8,ke)]),i("span",xe,l(e.$t("message.donation.PayPal")),1)],2),i("div",{class:T(["payment-option",{active:"alipay"===o.paymentMethod}]),onClick:t[1]||(t[1]=e=>o.switchPaymentMethod("alipay"))},[i("span",Se,[i("img",{alt:e.$t("message.donation.Alipay"),style:{width:"20px",height:"20px"},src:o.resolveIcon("alipay.svg")},null,8,Ve)]),i("span",Te,l(e.$t("message.donation.Alipay")),1)],2),i("div",{class:T(["payment-option",{active:"wechat"===o.paymentMethod}]),onClick:t[2]||(t[2]=e=>o.switchPaymentMethod("wechat"))},[i("span",_e,[i("img",{alt:"",style:{width:"20px",height:"20px"},src:o.resolveIcon("webchatpay.svg")},null,8,Re)]),i("span",Ie,l(e.$t("message.donation.WeChatPay")),1)],2)]),i("div",Ae,[x((s(),d(m,{src:o.currentQRCode,alt:o.getQRCodeAltText(),class:"qrcode-image",fit:"contain",onClick:o.showQrCodePreview,onError:o.handleImageError,onLoad:o.handleImageLoad,"loading-text":"Loading..."},{error:h((()=>[i("div",$e,[Me,i("p",null,l(e.$t("message.donation.QRld")),1)])])),_:1},8,["src","alt","onClick","onError","onLoad"])),[[f,o.imageLoading]]),i("p",Fe,l(e.$t("message.donation.qrcode_hint")),1),i("p",He,l(o.getPaymentTipText()),1)]),i("p",Be,l(e.$t("message.donation.donate_thank")),1)])])),_:1},8,["modelValue","title","onClosed"]),g(p,{modelValue:o.previewVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>o.previewVisible=e),title:o.getPreviewTitle(),width:"350px",center:""},{default:h((()=>[i("div",De,[i("img",{src:o.currentQRCode,alt:o.getQRCodeAltText(),class:"preview-qrcode"},null,8,qe)])])),_:1},8,["modelValue","title"])])}],["__scopeId","data-v-fe79604a"]])},setup(){const{t:e}=M(),{proxy:s}=o(),n=_(),i=t(),l=$(),r=$(),u=y({isScreenfull:!1,disabledI18n:"zh-cn",disabledSize:""}),c=a((()=>i.state.themeConfig.themeConfig)),m=a((()=>{let{layout:e,isClassicSplitMenu:t}=c.value,a="";return a="defaults"===e||"classic"===e&&!t||"columns"===e?1:null,a})),d=e=>{s.mittBus.emit("getI18nConfig",s.$i18n.messages[e])},h=()=>{switch(E.get("themeConfig").globalI18n){case"zh-cn":u.disabledI18n="zh-cn",d("zh-cn");break;case"en":u.disabledI18n="en",d("en");break;case"zh-tw":u.disabledI18n="zh-tw",d("zh-tw")}},g=()=>{switch(E.get("themeConfig").globalComponentSize){case"":u.disabledSize="";break;case"medium":u.disabledSize="medium";break;case"small":u.disabledSize="small";break;case"mini":u.disabledSize="mini"}};return w((()=>{E.get("themeConfig")&&(h(),g())})),{onLayoutSetingClick:()=>{s.mittBus.emit("openSetingsDrawer")},onHandleCommandClick:t=>{"logOut"===t?P({closeOnClickModal:!1,closeOnPressEscape:!1,title:e("message.user.logOutTitle"),message:e("message.user.logOutMessage"),showCancelButton:!0,confirmButtonText:e("message.user.logOutConfirm"),cancelButtonText:e("message.user.logOutCancel"),beforeClose:(t,a,s)=>{"confirm"===t?(a.confirmButtonLoading=!0,a.confirmButtonText=e("message.user.logOutExit"),setTimeout((()=>{s(),setTimeout((()=>{a.confirmButtonLoading=!1}),300)}),700)):s()}}).then((()=>{O.clear(),W(),n.push("/login"),setTimeout((()=>{D.success(e("message.user.logOutSuccess"))}),300)})).catch((()=>{})):"wareHouse"===t?window.open("https://gitee.com/PandaAdmin/PandaX"):n.push(t)},onScreenfullClick:()=>{if(!ge.isEnabled)return D.warning("暂不不支持全屏"),!1;ge.toggle(),ge.on("change",(()=>{ge.isFullscreen?u.isScreenfull=!0:u.isScreenfull=!1}))},onSearchClick:()=>{l.value.openSearch()},onDonationClick:()=>{r.value.showDonateDialog()},onLockClick:()=>{E.remove("themeConfig"),c.value.isLockScreen=!0,c.value.lockScreenTime=0,E.set("themeConfig",c.value)},onComponentSizeChange:e=>{E.remove("themeConfig"),c.value.globalComponentSize=e,E.set("themeConfig",c.value),s.$ELEMENT.size=e,g(),window.location.reload()},onLanguageChange:e=>{E.remove("themeConfig"),c.value.globalI18n=e,E.set("themeConfig",c.value),s.$i18n.locale=e,h(),Q.useTitle()},searchRef:l,donationRef:r,layoutUserFlexNum:m,...b(u)}}},Ee={class:"layout-navbars-breadcrumb-user-icon"},Pe=["title"],Oe={class:"layout-navbars-breadcrumb-user-icon"},We=["title"],Qe=p("简体中文"),je=p("English"),Ne=["title"],Ue=["title"],Xe=["title"];const Ye=e(ze,[["render",function(e,t,a,o,r,c){const m=u("el-dropdown-item"),d=u("el-dropdown-menu"),f=u("el-dropdown"),y=u("elementSearch"),C=u("el-icon"),w=u("elementMonitor"),v=u("Search"),b=u("Donation");return s(),n("div",{class:"layout-navbars-breadcrumb-user",style:A({flex:o.layoutUserFlexNum})},[g(f,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:o.onComponentSizeChange},{dropdown:h((()=>[g(d,null,{default:h((()=>[g(m,{command:"",disabled:""===e.disabledSize},{default:h((()=>[p(l(e.$t("message.user.dropdownDefault")),1)])),_:1},8,["disabled"]),g(m,{command:"medium",disabled:"medium"===e.disabledSize},{default:h((()=>[p(l(e.$t("message.user.dropdownMedium")),1)])),_:1},8,["disabled"]),g(m,{command:"small",disabled:"small"===e.disabledSize},{default:h((()=>[p(l(e.$t("message.user.dropdownSmall")),1)])),_:1},8,["disabled"]),g(m,{command:"mini",disabled:"mini"===e.disabledSize},{default:h((()=>[p(l(e.$t("message.user.dropdownMini")),1)])),_:1},8,["disabled"])])),_:1})])),default:h((()=>[i("div",Ee,[i("i",{class:"iconfont icon-ziti",style:{"font-size":"18px"},title:e.$t("message.user.title0")},null,8,Pe)])])),_:1},8,["onCommand"]),g(f,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:o.onLanguageChange},{dropdown:h((()=>[g(d,null,{default:h((()=>[g(m,{command:"zh-cn",disabled:"zh-cn"===e.disabledI18n},{default:h((()=>[Qe])),_:1},8,["disabled"]),g(m,{command:"en",disabled:"en"===e.disabledI18n},{default:h((()=>[je])),_:1},8,["disabled"])])),_:1})])),default:h((()=>[i("div",Oe,[i("i",{class:T(["iconfont","en"===e.disabledI18n?"icon-fuhao-yingwen":"icon-fuhao-zhongwen"]),style:{"font-size":"18px"},title:e.$t("message.user.title1")},null,10,We)])])),_:1},8,["onCommand"]),i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:t[0]||(t[0]=(...e)=>o.onSearchClick&&o.onSearchClick(...e))},[g(C,{title:e.$t("message.user.title2")},{default:h((()=>[g(y)])),_:1},8,["title"])]),i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:t[1]||(t[1]=(...e)=>o.onLockClick&&o.onLockClick(...e))},[g(C,{title:"锁屏"},{default:h((()=>[g(w)])),_:1})]),i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:t[2]||(t[2]=(...e)=>o.onLayoutSetingClick&&o.onLayoutSetingClick(...e))},[i("i",{class:"icon-skin iconfont",title:e.$t("message.user.title3")},null,8,Ne)]),i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:t[3]||(t[3]=(...e)=>o.onDonationClick&&o.onDonationClick(...e))},[i("i",{class:"esri-icon-donate",title:e.$t("message.user.donation")},null,8,Ue)]),i("div",{class:"layout-navbars-breadcrumb-user-icon mr10",onClick:t[4]||(t[4]=(...e)=>o.onScreenfullClick&&o.onScreenfullClick(...e))},[i("i",{class:T(["iconfont",e.isScreenfull?"icon-tuichuquanping":"icon-fullscreen"]),title:e.isScreenfull?e.$t("message.user.title6"):e.$t("message.user.title5")},null,10,Xe)]),g(v,{ref:"searchRef"},null,512),g(b,{ref:"donationRef"},null,512)],4)}],["__scopeId","data-v-70001add"]]),Ge=r({name:"navMenuHorizontal",components:{SubItem:se},props:{menuList:{type:Array,default:()=>[]}},setup(e){const{proxy:s}=o(),n=f(),i=t(),l=y({defaultActive:null}),r=a((()=>e.menuList)),u=e=>e.filter((e=>!e.meta.isHide)).map((e=>((e=Object.assign({},e)).children&&(e.children=u(e.children)),e))),c=e=>{const{path:t,meta:a}=e;if("classic"===i.state.themeConfig.themeConfig.layout)l.defaultActive=`/${t.split("/")[1]}`;else{const e=a.isDynamic?a.isDynamicPath.split("/"):t.split("/");e.length>=4&&a.isHide?l.defaultActive=e.splice(0,3).join("/"):l.defaultActive=t}};return k((()=>{c(n)})),w((()=>{F((()=>{let e=document.querySelector(".el-menu.el-menu--horizontal li.is-active");if(!e)return!1;s.$refs.elMenuHorizontalScrollRef.$refs.wrap.scrollLeft=e.offsetLeft}))})),v((e=>{c(e),s.mittBus.emit("onMenuClick");let{layout:t,isClassicSplitMenu:a}=i.state.themeConfig.themeConfig;"classic"===t&&a&&s.mittBus.emit("setSendClassicChildren",(e=>{const t=e.split("/");let a={};return u(i.state.routesList.routesList).map(((e,s)=>{e.path===`/${t[1]}`&&(e.k=s,a.item=[{...e}],a.children=[{...e}],e.children&&(a.children=e.children))})),a})(e.path))})),{menuLists:r,onElMenuHorizontalScroll:e=>{const t=e.wheelDelta||40*-e.deltaY;s.$refs.elMenuHorizontalScrollRef.$refs.wrap.scrollLeft=s.$refs.elMenuHorizontalScrollRef.$refs.wrap.scrollLeft+t/4},...b(l)}}}),Je={class:"el-menu-horizontal-warp"};const Ke={class:"layout-navbars-breadcrumb-index"};const Ze=e({name:"layoutBreadcrumbIndex",components:{Breadcrumb:ue,User:Ye,Logo:ee,Horizontal:e(Ge,[["render",function(e,t,a,o,r,f){const y=u("SvgIcon"),C=u("SubItem"),w=u("el-sub-menu"),v=u("el-menu-item"),b=u("el-menu"),k=u("el-scrollbar");return s(),n("div",Je,[g(k,{onWheel:I(e.onElMenuHorizontalScroll,["prevent"]),ref:"elMenuHorizontalScrollRef"},{default:h((()=>[g(b,{router:"","default-active":e.defaultActive,"background-color":"transparent",mode:"horizontal"},{default:h((()=>[(s(!0),n(m,null,c(e.menuLists,(t=>(s(),n(m,null,[t.children&&t.children.length>0?(s(),d(w,{index:t.path,key:t.path},{title:h((()=>[g(y,{name:t.meta.icon},null,8,["name"]),i("span",null,l(e.$t(t.meta.title)),1)])),default:h((()=>[g(C,{chil:t.children},null,8,["chil"])])),_:2},1032,["index"])):(s(),d(v,{index:t.path,key:t.path},L({_:2},[!t.meta.isLink||t.meta.isLink&&t.meta.isIframe?{name:"title",fn:h((()=>[g(y,{name:t.meta.icon},null,8,["name"]),p(" "+l(e.$t(t.meta.title)),1)]))}:{name:"title",fn:h((()=>[i("a",{href:t.meta.isLink,target:"_blank",rel:"opener"},[g(y,{name:t.meta.icon},null,8,["name"]),p(" "+l(e.$t(t.meta.title)),1)],8,["href"])]))}]),1032,["index"]))],64)))),256))])),_:1},8,["default-active"])])),_:1},8,["onWheel"])])}],["__scopeId","data-v-28d6da83"]])},setup(){const{proxy:e}=o(),s=t(),n=f(),i=y({menuList:[]}),l=a((()=>s.state.themeConfig.themeConfig)),r=a((()=>{let{isShowLogo:e,layout:t}=s.state.themeConfig.themeConfig;return e&&"classic"===t||e&&"transverse"===t})),u=a((()=>{let{layout:e,isClassicSplitMenu:t}=s.state.themeConfig.themeConfig;return"transverse"===e||t&&"classic"===e})),c=()=>{let{layout:t,isClassicSplitMenu:a}=s.state.themeConfig.themeConfig;if("classic"===t&&a){i.menuList=m(d(s.state.routesList.routesList));const t=h(n.path);e.mittBus.emit("setSendClassicChildren",t)}else i.menuList=d(s.state.routesList.routesList)},m=e=>(e.map((e=>{e.children&&delete e.children})),e),d=e=>e.filter((e=>!e.meta.isHide)).map((e=>((e=Object.assign({},e)).children&&(e.children=d(e.children)),e))),h=e=>{const t=e.split("/");let a={};return d(s.state.routesList.routesList).map(((e,s)=>{e.path===`/${t[1]}`&&(e.k=s,a.item=[{...e}],a.children=[{...e}],e.children&&(a.children=e.children))})),a};return w((()=>{c(),e.mittBus.on("getBreadcrumbIndexSetFilterRoutes",(()=>{c()}))})),j((()=>{e.mittBus.off("getBreadcrumbIndexSetFilterRoutes")})),{getThemeConfig:l,setIsShowLogo:r,isLayoutTransverse:u,...b(i)}}},[["render",function(e,t,a,i,l,o){const r=u("Logo"),c=u("Breadcrumb"),m=u("Horizontal"),h=u("User");return s(),n("div",Ke,[i.setIsShowLogo?(s(),d(r,{key:0})):V("",!0),g(c),i.isLayoutTransverse?(s(),d(m,{key:1,menuList:e.menuList},null,8,["menuList"])):V("",!0),g(h)])}],["__scopeId","data-v-d3fd2fd6"]]),et=r({name:"layoutTagsViewContextmenu",props:{dropdown:{type:Object}},setup(e,{emit:t}){const s=y({isShow:!1,dropdownList:[{contextMenuClickId:0,txt:"message.tagsView.refresh",affix:!1,icon:"elementRefreshRight"},{contextMenuClickId:1,txt:"message.tagsView.close",affix:!1,icon:"elementClose"},{contextMenuClickId:2,txt:"message.tagsView.closeOther",affix:!1,icon:"elementCircleClose"},{contextMenuClickId:3,txt:"message.tagsView.closeAll",affix:!1,icon:"elementFolderDelete"},{contextMenuClickId:4,txt:"message.tagsView.fullscreen",affix:!1,icon:"iconfont icon-fullscreen"}],item:{},arrowLeft:10}),n=a((()=>e.dropdown.x+117>document.documentElement.clientWidth?{x:document.documentElement.clientWidth-117-5,y:e.dropdown.y}:e.dropdown)),i=()=>{s.isShow=!1};return C((()=>e.dropdown),(({x:e})=>{e+117>document.documentElement.clientWidth?s.arrowLeft=117-(document.documentElement.clientWidth-e):s.arrowLeft=10}),{deep:!0}),w((()=>{document.body.addEventListener("click",i)})),j((()=>{document.body.removeEventListener("click",i)})),{dropdowns:n,openContextmenu:e=>{s.item=e,e.meta.isAffix?s.dropdownList[1].affix=!0:s.dropdownList[1].affix=!1,i(),setTimeout((()=>{s.isShow=!0}),10)},closeContextmenu:i,onCurrentContextmenuClick:e=>{t("currentContextmenuClick",Object.assign({},{contextMenuClickId:e},s.item))},...b(s)}}}),tt={class:"el-dropdown-menu"},at=["onClick"];const st=["data-url","onContextmenu","onClick"],nt={key:0,class:"iconfont icon-webicon318 layout-navbars-tagsview-ul-li-iconfont font14"};const it=e({name:"layoutTagsView",components:{Contextmenu:e(et,[["render",function(e,t,a,o,r,p){const f=u("SvgIcon");return s(),d(N,{name:"el-zoom-in-center"},{default:h((()=>[x((s(),n("div",{"aria-hidden":"true",class:"el-dropdown__popper el-popper is-light is-pure custom-contextmenu",role:"tooltip","data-popper-placement":"bottom",style:A(`top: ${e.dropdowns.y+5}px;left: ${e.dropdowns.x}px;`),key:Math.random()},[i("ul",tt,[(s(!0),n(m,null,c(e.dropdownList,((t,a)=>(s(),n(m,null,[t.affix?V("",!0):(s(),n("li",{class:"el-dropdown-menu__item","aria-disabled":"false",tabindex:"-1",key:a,onClick:a=>e.onCurrentContextmenuClick(t.contextMenuClickId)},[g(f,{name:t.icon},null,8,["name"]),i("span",null,l(e.$t(t.txt)),1)],8,at))],64)))),256))]),i("div",{class:"el-popper__arrow",style:A({left:`${e.arrowLeft}px`})},null,4)],4)),[[S,e.isShow]])])),_:1})}],["__scopeId","data-v-0e56609e"]])},setup(){const{proxy:e}=o(),s=$([]),n=$(),i=$(),l=$(),r=t(),u=f(),c=_(),m=y({routeActive:"",routePath:u.path,dropdown:{x:"",y:""},tagsRefsIndex:0,tagsViewList:[],sortable:"",tagsViewRoutesList:[]}),d=a((()=>r.state.themeConfig.themeConfig.tagsStyle)),h=a((()=>r.state.themeConfig.themeConfig)),g=e=>{O.set("tagsViewList",e)},p=async()=>{m.routeActive=await M(u),m.routePath=await u.meta.isDynamic?u.meta.isDynamicPath:u.path,m.tagsViewList=[],m.tagsViewRoutesList=r.state.tagsViewRoutes.tagsViewRoutes,L()},L=async()=>{O.get("tagsViewList")&&h.value.isCacheTagsView?m.tagsViewList=await O.get("tagsViewList"):(await m.tagsViewRoutesList.map((e=>{e.meta.isAffix&&!e.meta.isHide&&(e.url=M(e),m.tagsViewList.push({...e}))})),await V(u.path,u)),B(h.value.isShareTagsView?m.routePath:m.routeActive)},x=async(e,t)=>{let a=t.meta.isDynamic?t.meta.isDynamicPath:e;if(m.tagsViewList.filter((e=>e.path===a&&X(t.meta.isDynamic?e.params?e.params:null:e.query?e.query:null,t.meta.isDynamic?(null==t?void 0:t.params)?null==t?void 0:t.params:null:(null==t?void 0:t.query)?null==t?void 0:t.query:null))).length<=0){let e=m.tagsViewRoutesList.find((e=>e.path===a));if(e.meta.isAffix)return!1;if(e.meta.isLink&&!e.meta.isIframe)return!1;t.meta.isDynamic?e.params=t.params:e.query=t.query,e.url=M(e),m.tagsViewList.push({...e}),g(m.tagsViewList)}},S=(e,t)=>{let a=t.meta.isDynamic?t.meta.isDynamicPath:e;m.tagsViewList.forEach((e=>{e.path!==a||X(t.meta.isDynamic?e.params?e.params:null:e.query?e.query:null,t.meta.isDynamic?(null==t?void 0:t.params)?null==t?void 0:t.params:null:(null==t?void 0:t.query)?null==t?void 0:t.query:null)||(t.meta.isDynamic?e.params=t.params:e.query=t.query,e.url=M(e),g(m.tagsViewList))}))},V=(e,t)=>{F((async()=>{let a="";if(t&&t.meta.isDynamic){if(h.value.isShareTagsView?await S(e,t):await x(e,t),m.tagsViewList.some((e=>e.path===t.meta.isDynamicPath)))return!1;a=m.tagsViewRoutesList.find((e=>e.path===t.meta.isDynamicPath))}else{if(h.value.isShareTagsView?await S(e,t):await x(e,t),m.tagsViewList.some((t=>t.path===e)))return!1;a=m.tagsViewRoutesList.find((t=>t.path===e))}if(a.meta.isLink&&!a.meta.isIframe)return!1;t&&t.meta.isDynamic?a.params=(null==t?void 0:t.params)?null==t?void 0:t.params:u.params:a.query=(null==t?void 0:t.query)?null==t?void 0:t.query:u.query,a.url=M(a),await m.tagsViewList.push({...a}),await g(m.tagsViewList)}))},T=t=>{e.mittBus.emit("onTagsViewRefreshRouterView",t)},R=e=>{m.tagsViewList.map(((t,a,s)=>{t.meta.isAffix||(h.value.isShareTagsView?t.path===e:t.url===e)&&(m.tagsViewList.splice(a,1),setTimeout((()=>{(m.tagsViewList.length===a&&h.value.isShareTagsView?m.routePath===e:m.routeActive===e)?s[s.length-1].meta.isDynamic?a!==s.length?c.push({name:s[a].name,params:s[a].params}):c.push({name:s[s.length-1].name,params:s[s.length-1].params}):a!==s.length?c.push({path:s[a].path,query:s[a].query}):c.push({path:s[s.length-1].path,query:s[s.length-1].query}):(m.tagsViewList.length!==a&&h.value.isShareTagsView?m.routePath===e:m.routeActive===e)&&(s[a].meta.isDynamic?c.push({name:s[a].name,params:s[a].params}):c.push({path:s[a].path,query:s[a].query}))}),0))})),g(m.tagsViewList)},I=(e,t)=>(O.get("tagsViewList")?O.get("tagsViewList"):m.tagsViewList).find((a=>a.path===e&&X(a.meta.isDynamic?a.params?a.params:null:a.query?a.query:null,t&&Object.keys(t||{}).length>0?t:null)||a.path===e&&Object.keys(t||{}).length<=0?a:void 0)),A=async e=>{const t=e.meta.isDynamic?e.params:e.query;if(!I(e.path,t))return D({type:"warning",message:"请正确输入路径及完整参数（query、params）"});const{path:a,name:s,params:n,query:i,meta:l,url:o}=I(e.path,t);switch(e.contextMenuClickId){case 0:l.isDynamic?await c.push({name:s,params:n}):await c.push({path:a,query:i}),T(u.fullPath);break;case 1:R(h.value.isShareTagsView?a:o);break;case 2:l.isDynamic?await c.push({name:s,params:n}):await c.push({path:a,query:i}),(e=>{m.tagsViewList=[],m.tagsViewRoutesList.map((e=>{e.meta.isAffix&&!e.meta.isHide&&m.tagsViewList.push({...e})})),V(e,u)})(a);break;case 3:m.tagsViewList=[],m.tagsViewRoutesList.map((e=>{e.meta.isAffix&&!e.meta.isHide&&(m.tagsViewList.push({...e}),c.push({path:m.tagsViewList[m.tagsViewList.length-1].path}))})),g(m.tagsViewList);break;case 4:(async e=>{const t=m.tagsViewList.find((t=>h.value.isShareTagsView?t.path===e:t.url===e));t.meta.isDynamic?await c.push({name:t.name,params:t.params}):await c.push({name:t.name,query:t.query}),r.dispatch("tagsViewRoutes/setCurrenFullscreen",!0)})(h.value.isShareTagsView?a:o)}},M=e=>{let t=e.query&&Object.keys(e.query).length>0?e.query:e.params;if(!t||Object.keys(t).length<=0)return e.path;let a="";for(let s in t)a+=t[s];return`${e.meta.isDynamic?e.meta.isDynamicPath:e.path}-${a}`},H=()=>{F((()=>{if(s.value.length<=0)return!1;let t=s.value[m.tagsRefsIndex],a=m.tagsRefsIndex,n=s.value.length,i=s.value[0],l=s.value[s.value.length-1],o=e.$refs.scrollbarRef.$refs.wrap$,r=o.scrollWidth,u=o.offsetWidth,c=o.scrollLeft,d=s.value[m.tagsRefsIndex-1],h=s.value[m.tagsRefsIndex+1],g="",p="";t===i?o.scrollLeft=0:t===l?o.scrollLeft=r-u:(g=0===a?i.offsetLeft-5:(null==d?void 0:d.offsetLeft)-5,p=a===n?l.offsetLeft+l.offsetWidth+5:h.offsetLeft+h.offsetWidth+5,p>c+u?o.scrollLeft=p-u:g<c&&(o.scrollLeft=g)),e.$refs.scrollbarRef.update()}))},B=e=>{F((async()=>{let t=await m.tagsViewList;m.tagsRefsIndex=t.findIndex((t=>h.value.isShareTagsView?t.path===e:t.url===e)),H()}))},q=async()=>{const e=document.querySelector(".layout-navbars-tagsview-ul");if(!e)return!1;m.sortable.el&&m.sortable.destroy(),m.sortable=Y.create(e,{animation:300,dataIdAttr:"data-url",disabled:!h.value.isSortableTagsView,onEnd:()=>{const e=[];m.sortable.toArray().map((t=>{m.tagsViewList.map((a=>{a.url===t&&e.push({...a})}))})),g(e)}})},z=async()=>{await q(),Q.isMobile()&&m.sortable.el&&m.sortable.destroy()};return k((()=>{z(),window.addEventListener("resize",z),e.mittBus.on("onCurrentContextmenuClick",(e=>{A(e)})),e.mittBus.on("openOrCloseSortable",(()=>{q()})),e.mittBus.on("openShareTagsView",(()=>{h.value.isShareTagsView&&(c.push("/home"),m.tagsViewList=[],m.tagsViewRoutesList.map((e=>{e.meta.isAffix&&!e.meta.isHide&&(e.url=M(e),m.tagsViewList.push({...e}))})))}))})),j((()=>{e.mittBus.off("onCurrentContextmenuClick"),e.mittBus.off("openOrCloseSortable"),e.mittBus.off("openShareTagsView"),window.removeEventListener("resize",z)})),U((()=>{s.value=[]})),w((()=>{p(),q()})),v((async e=>{m.routeActive=M(e),m.routePath=e.meta.isDynamic?e.meta.isDynamicPath:e.path,await V(e.path,e),B(h.value.isShareTagsView?m.routePath:m.routeActive)})),C(r.state,(e=>{if(e.tagsViewRoutes.tagsViewRoutes.length===m.tagsViewRoutesList.length)return!1;p()})),{isActive:e=>h.value.isShareTagsView?e.path===m.routePath:e.url?e.url===m.routeActive:e.path===m.routeActive,onContextmenu:(e,t)=>{const{clientX:a,clientY:s}=t;m.dropdown.x=a,m.dropdown.y=s,i.value.openContextmenu(e)},getTagsViewRoutes:p,onTagsClick:(e,t)=>{m.tagsRefsIndex=t,c.push(e)},tagsRefs:s,contextmenuRef:i,scrollbarRef:n,tagsUlRef:l,onHandleScroll:t=>{e.$refs.scrollbarRef.$refs.wrap$.scrollLeft+=t.wheelDelta/4},getThemeConfig:h,setTagsStyle:d,refreshCurrentTagsView:T,closeCurrentTagsView:R,onCurrentContextmenuClick:A,...b(m)}}},[["render",function(e,t,a,o,r,p){const f=u("SvgIcon"),y=u("el-scrollbar"),C=u("Contextmenu");return s(),n("div",{class:T(["layout-navbars-tagsview",{"layout-navbars-tagsview-shadow":"classic"===o.getThemeConfig.layout}])},[g(y,{ref:"scrollbarRef",onWheel:I(o.onHandleScroll,["prevent"])},{default:h((()=>[i("ul",{class:T(["layout-navbars-tagsview-ul",o.setTagsStyle]),ref:"tagsUlRef"},[(s(!0),n(m,null,c(e.tagsViewList,((a,r)=>(s(),n("li",{key:r,class:T(["layout-navbars-tagsview-ul-li",{"is-active":o.isActive(a)}]),"data-url":a.url,onContextmenu:I((e=>o.onContextmenu(a,e)),["prevent"]),onClick:e=>o.onTagsClick(a,r),ref_for:!0,ref:e=>{e&&(o.tagsRefs[r]=e)}},[o.isActive(a)?(s(),n("i",nt)):V("",!0),!o.isActive(a)&&o.getThemeConfig.isTagsviewIcon?(s(),d(f,{key:1,name:a.meta.icon,class:"layout-navbars-tagsview-ul-li-iconfont"},null,8,["name"])):V("",!0),i("span",null,l(e.$t(a.meta.title)),1),o.isActive(a)?(s(),n(m,{key:2},[g(f,{name:"elementRefreshRight",class:"ml5 layout-navbars-tagsview-ul-li-refresh",onClick:t[0]||(t[0]=I((t=>o.refreshCurrentTagsView(e.$route.fullPath)),["stop"]))}),a.meta.isAffix?V("",!0):(s(),d(f,{key:0,name:"elementClose",class:"layout-navbars-tagsview-ul-li-icon layout-icon-active",onClick:I((e=>o.closeCurrentTagsView(o.getThemeConfig.isShareTagsView?a.path:a.url)),["stop"])},null,8,["onClick"]))],64)):V("",!0),a.meta.isAffix?V("",!0):(s(),d(f,{key:3,name:"elementClose",class:"layout-navbars-tagsview-ul-li-icon layout-icon-three",onClick:I((e=>o.closeCurrentTagsView(o.getThemeConfig.isShareTagsView?a.path:a.url)),["stop"])},null,8,["onClick"]))],42,st)))),128))],2)])),_:1},8,["onWheel"]),g(C,{dropdown:e.dropdown,ref:"contextmenuRef",onCurrentContextmenuClick:o.onCurrentContextmenuClick},null,8,["dropdown","onCurrentContextmenuClick"])],2)}],["__scopeId","data-v-0f69e066"]]),lt={class:"layout-navbars-container"};const ot=e({name:"layoutHeader",components:{NavBarsIndex:e({name:"layoutNavBars",components:{BreadcrumbIndex:Ze,TagsView:it},setup(){const e=t();return{setShowTagsView:a((()=>{let{layout:t,isTagsview:a}=e.state.themeConfig.themeConfig;return"classic"!==t&&a}))}}},[["render",function(e,t,a,i,l,o){const r=u("BreadcrumbIndex"),c=u("TagsView");return s(),n("div",lt,[g(r),i.setShowTagsView?(s(),d(c,{key:0})):V("",!0)])}],["__scopeId","data-v-6da8bc81"]])},setup(){const e=t();return{setHeaderHeight:a((()=>{let{isTagsview:t,layout:a}=e.state.themeConfig.themeConfig;return t&&"classic"!==a?"84px":"50px"})),isTagsViewCurrenFull:a((()=>e.state.tagsViewRoutes.isTagsViewCurrenFull))}}},[["render",function(e,t,a,n,i,l){const o=u("NavBarsIndex"),r=u("el-header");return x((s(),d(r,{class:"layout-header",height:n.setHeaderHeight},{default:h((()=>[g(o)])),_:1},8,["height"])),[[S,!n.isTagsViewCurrenFull]])}]]),rt={class:"layout-footer mt15"},ut={class:"layout-footer-warp"},ct={class:"mt5"};const mt=e(r({name:"layoutMain",components:{LayoutParentView:G,Footer:e({name:"layoutFooter",setup(){const e=y({isDelayFooter:!0});return v((()=>{e.isDelayFooter=!1,setTimeout((()=>{e.isDelayFooter=!0}),800)})),{...b(e)}}},[["render",function(e,t,a,o,r,u){return x((s(),n("div",rt,[i("div",ut,[i("div",null,l(e.$t("message.footer.title")),1),i("div",ct,l(e.$t("message.copyright.one5")),1)])],512)),[[S,e.isDelayFooter]])}],["__scopeId","data-v-4aa91816"]])},setup(){const{proxy:e}=o(),s=f(),n=t(),i=y({headerHeight:"",currentRouteMeta:{}}),l=a((()=>n.state.themeConfig.themeConfig));return k((()=>{(()=>{let{isTagsview:e}=n.state.themeConfig.themeConfig;i.headerHeight=e?"84px":"50px"})(),i.currentRouteMeta=s.meta})),C(n.state.themeConfig.themeConfig,(t=>{if(i.headerHeight=t.isTagsview?"84px":"50px",t.isFixedHeaderChange!==t.isFixedHeader){if(!e.$refs.layoutScrollbarRef)return!1;e.$refs.layoutScrollbarRef.update()}})),C((()=>s.path),(()=>{i.currentRouteMeta=s.meta})),{getThemeConfig:l,...b(i)}}}),[["render",function(e,t,a,n,i,l){const o=u("LayoutParentView"),r=u("Footer"),c=u("el-scrollbar"),m=u("el-main");return s(),d(m,{class:"layout-main"},{default:h((()=>[g(c,{class:"layout-scrollbar",ref:"layoutScrollbarRef",style:A({minHeight:`calc(100vh - ${e.headerHeight})`,padding:e.currentRouteMeta.isLink&&e.currentRouteMeta.isIframe?0:"",transition:"padding 0.3s ease-in-out"})},{default:h((()=>[g(o),e.getThemeConfig.isFooter?(s(),d(r,{key:0})):V("",!0)])),_:1},8,["style"])])),_:1})}]]);const dt={class:"flex-center layout-backtop"};const ht={class:"layout-columns-aside"},gt=["onClick","onMouseenter","title"],pt={class:"columns-vertical-title font12"},ft=["href"],yt={class:"columns-vertical-title font12"};const Ct={class:"layout-columns-warp"};const wt=e({name:"layout",components:{Defaults:e({name:"layoutDefaults",components:{Aside:le,Header:ot,Main:mt},setup(){const{proxy:e}=o(),s=t(),n=f(),i=a((()=>s.state.themeConfig.themeConfig.isFixedHeader));return C((()=>n.path),(()=>{e.$refs.layoutDefaultsScrollbarRef.wrap$.scrollTop=0})),{isFixedHeader:i}}},[["render",function(e,t,a,n,i,l){const o=u("Aside"),r=u("Header"),c=u("Main"),m=u("el-scrollbar"),p=u("el-container"),f=u("el-backtop");return s(),d(p,{class:"layout-container"},{default:h((()=>[g(o),g(p,{class:T(["flex-center",{"layout-backtop":!n.isFixedHeader}])},{default:h((()=>[n.isFixedHeader?(s(),d(r,{key:0})):V("",!0),g(m,{ref:"layoutDefaultsScrollbarRef",class:T({"layout-backtop":n.isFixedHeader})},{default:h((()=>[n.isFixedHeader?V("",!0):(s(),d(r,{key:0})),g(c)])),_:1},8,["class"])])),_:1},8,["class"]),g(f,{target:".layout-backtop .el-scrollbar__wrap"})])),_:1})}]]),Classic:e({name:"layoutClassic",components:{Aside:le,Header:ot,Main:mt,TagsView:it},setup(){const e=t();return{getThemeConfig:a((()=>e.state.themeConfig.themeConfig))}}},[["render",function(e,t,a,n,l,o){const r=u("Header"),c=u("Aside"),m=u("TagsView"),p=u("Main"),f=u("el-container"),y=u("el-backtop");return s(),d(f,{class:"layout-container flex-center"},{default:h((()=>[g(r),g(f,{class:"layout-mian-height-50"},{default:h((()=>[g(c),i("div",dt,[n.getThemeConfig.isTagsview?(s(),d(m,{key:0})):V("",!0),g(p)])])),_:1}),g(y,{target:".layout-backtop .el-main .el-scrollbar__wrap"})])),_:1})}]]),Transverse:e({name:"layoutTransverse",components:{Header:ot,Main:mt}},[["render",function(e,t,a,n,i,l){const o=u("Header"),r=u("Main"),c=u("el-backtop"),m=u("el-container");return s(),d(m,{class:"layout-container flex-center layout-backtop"},{default:h((()=>[g(o),g(r),g(c,{target:".layout-backtop .el-main .el-scrollbar__wrap"})])),_:1})}]]),Columns:e({name:"layoutColumns",components:{Aside:le,Header:ot,Main:mt,ColumnsAside:e({name:"layoutColumnsAside",setup(){const e=$([]),s=$(),{proxy:n}=o(),i=t(),l=f(),r=_(),u=y({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[],isNavHover:!1}),c=a((()=>i.state.themeConfig.themeConfig.columnsAsideStyle)),m=a((()=>i.state.themeConfig.themeConfig.columnsAsideLayout)),d=t=>{u.liIndex=t,s.value.style.top=`${e.value[t].offsetTop+u.difference}px`},h=e=>{F((()=>{d(e)}))},g=e=>{const t=e.split("/");let a={};return u.columnsAsideList.map(((e,s)=>{e.path===`/${t[1]}`&&(e.k=s,a.item=[{...e}],a.children=[{...e}],e.children&&(a.children=e.children))})),a},p=e=>e.filter((e=>!e.meta.isHide)).map((e=>((e=Object.assign({},e)).children&&(e.children=p(e.children)),e)));return C(i.state,(e=>{if("columnsRound"===e.themeConfig.themeConfig.columnsAsideStyle?u.difference=3:u.difference=0,e.routesList.isColumnsMenuHover||e.routesList.isColumnsNavHover){if(u.liHoverIndex=u.liOldIndex,!u.liOldPath)return!1;n.mittBus.emit("setSendColumnsChildren",g(u.liOldPath))}else u.liHoverIndex=null,n.mittBus.emit("setSendColumnsChildren",g(l.path))})),w((()=>{(()=>{u.columnsAsideList=p(i.state.routesList.routesList);const e=g(l.path);if(Object.keys(e).length<=0)return!1;h(e.item[0].k),n.mittBus.emit("setSendColumnsChildren",e)})(),n.mittBus.on("restoreDefault",(()=>{u.liOldIndex=null,u.liOldPath=null}))})),j((()=>{n.mittBus.off("restoreDefault",(()=>{}))})),v((e=>{(e=>{u.routeSplit=e.split("/"),u.routeSplit.shift();const t=`/${u.routeSplit[0]}`,a=u.columnsAsideList.find((e=>e.path===t));if(!a)return!1;setTimeout((()=>{h(a.k)}),0)})(e.path),n.mittBus.emit("setSendColumnsChildren",g(e.path))})),{columnsAsideOffsetTopRefs:e,columnsAsideActiveRef:s,onColumnsAsideDown:h,setColumnsAsideStyle:c,setColumnsAsidelayout:m,onColumnsAsideMenuClick:(e,t)=>{d(t);let{path:a,redirect:s}=e;s?r.push(s):r.push(a)},onColumnsAsideMenuMouseenter:(e,t)=>{let{path:a}=e;u.liOldPath=a,u.liOldIndex=t,u.liHoverIndex=t,n.mittBus.emit("setSendColumnsChildren",g(a)),i.dispatch("routesList/setColumnsMenuHover",!1),i.dispatch("routesList/setColumnsNavHover",!0),u.isNavHover=!0},onColumnsAsideMenuMouseleave:async()=>{await i.dispatch("routesList/setColumnsNavHover",!1),setTimeout((()=>{const{isColumnsMenuHover:e,isColumnsNavHover:t}=i.state.routesList;e||t||n.mittBus.emit("restoreDefault")}),100)},...b(u)}}},[["render",function(e,t,a,o,r,d){const p=u("SvgIcon"),f=u("el-scrollbar");return s(),n("div",ht,[g(f,null,{default:h((()=>[i("ul",{onMouseleave:t[0]||(t[0]=e=>o.onColumnsAsideMenuMouseleave())},[(s(!0),n(m,null,c(e.columnsAsideList,((t,a)=>(s(),n("li",{key:a,onClick:e=>o.onColumnsAsideMenuClick(t,a),onMouseenter:e=>o.onColumnsAsideMenuMouseenter(t,a),ref_for:!0,ref:e=>{e&&(o.columnsAsideOffsetTopRefs[a]=e)},class:T({"layout-columns-active":e.liIndex===a,"layout-columns-hover":e.liHoverIndex===a}),title:e.$t(t.meta.title)},[!t.meta.isLink||t.meta.isLink&&t.meta.isIframe?(s(),n("div",{key:0,class:T(o.setColumnsAsidelayout)},[g(p,{name:t.meta.icon},null,8,["name"]),i("div",pt,l(e.$t(t.meta.title)&&e.$t(t.meta.title).length>=4?e.$t(t.meta.title).substr(0,"columns-vertical"===o.setColumnsAsidelayout?4:3):e.$t(t.meta.title)),1)],2)):(s(),n("div",{key:1,class:T(o.setColumnsAsidelayout)},[i("a",{href:t.meta.isLink,target:"_blank"},[g(p,{name:t.meta.icon},null,8,["name"]),i("div",yt,l(e.$t(t.meta.title)&&e.$t(t.meta.title).length>=4?e.$t(t.meta.title).substr(0,"columns-vertical"===o.setColumnsAsidelayout?4:3):e.$t(t.meta.title)),1)],8,ft)],2))],42,gt)))),128)),i("div",{ref:"columnsAsideActiveRef",class:T(o.setColumnsAsideStyle)},null,2)],32)])),_:1})])}],["__scopeId","data-v-2d0b32b1"]])},setup(){const e=t();return{isFixedHeader:a((()=>e.state.themeConfig.themeConfig.isFixedHeader))}}},[["render",function(e,t,a,n,l,o){const r=u("ColumnsAside"),c=u("Aside"),m=u("Header"),p=u("Main"),f=u("el-scrollbar"),y=u("el-container"),C=u("el-backtop");return s(),d(y,{class:"layout-container"},{default:h((()=>[g(r),i("div",Ct,[g(c),g(y,{class:T(["flex-center layout-backtop",{"layout-backtop":!n.isFixedHeader}])},{default:h((()=>[n.isFixedHeader?(s(),d(m,{key:0})):V("",!0),g(f,{class:T({"layout-backtop":n.isFixedHeader})},{default:h((()=>[n.isFixedHeader?V("",!0):(s(),d(m,{key:0})),g(p)])),_:1},8,["class"])])),_:1},8,["class"])]),g(C,{target:".layout-backtop .el-scrollbar__wrap"})])),_:1})}]])},setup(){const{proxy:e}=o(),s=t(),n=a((()=>s.state.themeConfig.themeConfig)),i=()=>{E.get("oldLayout")||E.set("oldLayout",n.value.layout);const t=document.body.clientWidth;t<1e3?(n.value.isCollapse=!1,e.mittBus.emit("layoutMobileResize",{layout:"defaults",clientWidth:t})):e.mittBus.emit("layoutMobileResize",{layout:E.get("oldLayout")?E.get("oldLayout"):n.value.layout,clientWidth:t})};return k((()=>{i(),window.addEventListener("resize",i)})),j((()=>{window.removeEventListener("resize",i)})),{getThemeConfig:n}}},[["render",function(e,t,a,n,i,l){const o=u("Defaults"),r=u("Classic"),c=u("Transverse"),m=u("Columns");return"defaults"===n.getThemeConfig.layout?(s(),d(o,{key:0})):"classic"===n.getThemeConfig.layout?(s(),d(r,{key:1})):"transverse"===n.getThemeConfig.layout?(s(),d(c,{key:2})):"columns"===n.getThemeConfig.layout?(s(),d(m,{key:3})):V("",!0)}]]);export{wt as default};
