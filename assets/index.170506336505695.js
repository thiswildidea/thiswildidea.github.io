import{d as e,D as t,k as a,p as l,m as n,M as s,r as i,Q as o,a as u,h as r,w as d,ay as p,g as m,o as c,au as y,F as f,e as h,f as w,v as b,i as _,t as g,I as v,H as O}from"./index.1705063365056.js";import{l as k,d as x}from"./menu.1705063365056.js";import C from"./editMenu.1705063365056.js";import"./index.1705063365056102.js";import"./getStyleSheets.1705063365056.js";const T={class:"app-container"},D=_(" 搜索"),z=_(" 重置 "),P=_(" 新增 "),V=_("修改"),q=_("新增"),L=_("删除"),M=e({setup(e){const{proxy:M}=m(),N=t(),I=a({loading:!0,menuList:[],menuOptions:[],title:"",open:!1,isHideOptions:[],statusOptions:[],menuTypeOptions:[],queryParams:{menuName:void 0,status:void 0}}),{loading:j,menuList:B,menuOptions:H,title:F,open:S,isHideOptions:E,statusOptions:K,menuTypeOptions:R,queryParams:U}=l(I),Q=()=>{I.loading=!0,k(I.queryParams).then((e=>{I.menuList=e.data,I.loading=!1}))},A=()=>{Q()},G=()=>{I.queryParams.menuName="",I.queryParams.status="",I.queryParams.menuType="",A()},J=e=>{I.title="添加菜单";let t=e.menuId;(e=[]).parentId=t,N.value.openDialog(e)};return n((()=>{Q(),M.getDicts("sys_show_hide").then((e=>{I.isHideOptions=e.data})),M.getDicts("sys_menu_type").then((e=>{I.menuTypeOptions=e.data})),M.getDicts("sys_normal_disable").then((e=>{I.statusOptions=e.data})),M.mittBus.on("onEditMenuModule",(e=>{A()}))})),s((()=>{M.mittBus.off("onEditDeptModule")})),(e,t)=>{const a=i("el-input"),l=i("el-form-item"),n=i("el-option"),s=i("el-select"),m=i("SvgIcon"),k=i("el-button"),H=i("el-form"),S=i("el-table-column"),E=i("el-tag"),R=i("el-table"),W=i("el-card"),X=o("auth"),Y=o("loading");return c(),u("div",T,[r(W,{shadow:"always"},{default:d((()=>[r(H,{model:p(U),ref:"queryForm",inline:!0,"label-width":"68px"},{default:d((()=>[r(l,{label:"菜单名称",prop:"menuName"},{default:d((()=>[r(a,{placeholder:"菜单名称模糊查询",clearable:"",size:"small",onKeyup:y(A,["enter"]),style:{width:"240px"},modelValue:p(U).menuName,"onUpdate:modelValue":t[0]||(t[0]=e=>p(U).menuName=e)},null,8,["onKeyup","modelValue"])])),_:1}),r(l,{label:"状态",prop:"status"},{default:d((()=>[r(s,{modelValue:p(U).status,"onUpdate:modelValue":t[1]||(t[1]=e=>p(U).status=e),placeholder:"菜单状态",clearable:"",size:"small",style:{width:"240px"}},{default:d((()=>[(c(!0),u(f,null,h(p(K),(e=>(c(),w(n,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(l,null,{default:d((()=>[r(k,{type:"primary",size:"mini",onClick:A},{default:d((()=>[r(m,{name:"elementSearch"}),D])),_:1}),r(k,{size:"mini",onClick:G},{default:d((()=>[r(m,{name:"elementRefresh"}),z])),_:1}),b((c(),w(k,{type:"primary",plain:"",size:"mini",onClick:J},{default:d((()=>[r(m,{name:"elementPlus"}),P])),_:1})),[[X,"system:dept:add"]])])),_:1})])),_:1},8,["model"]),b((c(),w(R,{data:p(B),"row-key":"menuId",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:d((()=>[r(S,{prop:"menuName",label:"菜单名称","show-overflow-tooltip":!0,width:"150"}),r(S,{prop:"icon",label:"图标",align:"center",width:"100"},{default:d((e=>[r(m,{name:e.row.icon},null,8,["name"])])),_:1}),r(S,{prop:"sort",label:"排序",width:"60"}),r(S,{prop:"icon",label:"分类",align:"center",width:"100"},{default:d((e=>[r(E,{type:"M"===e.row.menuType?"danger":"C"===e.row.menuType?"success":"warning","disable-transitions":""},{default:d((()=>{return[_(g((t=e.row,M.selectDictLabel(I.menuTypeOptions,t.menuType)||"-- --")),1)];var t})),_:2},1032,["type"])])),_:1}),r(S,{prop:"permission",label:"权限标识","show-overflow-tooltip":!0}),r(S,{prop:"component",label:"组件路径","show-overflow-tooltip":!0}),r(S,{prop:"status",label:"状态",width:"80"},{default:d((e=>[r(E,{type:"1"===e.row.status?"danger":"success","disable-transitions":""},{default:d((()=>{return[_(g((t=e.row,("F"==t.menuType?"":M.selectDictLabel(I.statusOptions,t.status))||"-- --")),1)];var t})),_:2},1032,["type"])])),_:1}),r(S,{prop:"status",label:"显示隐藏",width:"80"},{default:d((e=>[r(E,{type:"1"===e.row.status?"danger":"success","disable-transitions":""},{default:d((()=>{return[_(g((t=e.row,("F"==t.menuType?"":M.selectDictLabel(I.isHideOptions,t.ishide))||"-- --")),1)];var t})),_:2},1032,["type"])])),_:1}),r(S,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:d((e=>[r(k,{size:"mini",type:"text",icon:"el-icon-edit",onClick:t=>{return a=e.row,I.title="修改菜单",void N.value.openDialog(a);var a}},{default:d((()=>[r(m,{name:"elementEdit"}),V])),_:2},1032,["onClick"]),r(k,{size:"mini",type:"text",icon:"el-icon-plus",onClick:t=>J(e.row)},{default:d((()=>[r(m,{name:"elementPlus"}),q])),_:2},1032,["onClick"]),r(k,{size:"mini",type:"text",icon:"el-icon-delete",onClick:t=>{return a=e.row,void v({message:'是否确认删除名称为"'+a.menuName+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return x(a.menuId).then((()=>{Q(),O.success("删除成功")}))}));var a}},{default:d((()=>[r(m,{name:"elementDelete"}),L])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[Y,p(j)]])])),_:1}),r(C,{ref_key:"editMenuRef",ref:N,title:p(F)},null,8,["title"])])}}});export{M as default};
