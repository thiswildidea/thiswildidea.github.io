import{at as f,_ as C,D as y,k as v,p as B,r as s,U as S,a as h,h as r,w as a,ax as k,H as A,o as F,v as G,i as c,t as E,b as I,F as P,e as M,f as U,g as O}from"./index.1704798071520.js";function J(e){return f({url:"/system/api/list",method:"get",params:e})}function R(e){return f({url:"/system/api",method:"post",data:e})}function z(e){return f({url:"/system/api",method:"put",data:e})}function K(e){return f({url:"/system/api/"+e,method:"delete"})}const q={name:"editMenu",props:{title:{type:String,default:()=>""}},setup(){const{proxy:e}=O(),t=y(null),o=v({isShowDialog:!1,ruleForm:{id:0,path:"",description:"",apiGroup:"",method:""},methodOptions:[],ruleRules:{path:[{required:!0,message:"API\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],apiGroup:[{required:!0,message:"API\u5206\u7EC4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],method:[{required:!0,message:"API\u65B9\u6CD5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),p=l=>{l.id&&l.id!=null&&l.id!=0?(o.ruleForm=l,o.ruleForm.id=l.id,o.ruleForm.path=l.path,o.ruleForm.description=l.description,o.ruleForm.apiGroup=l.apiGroup,o.ruleForm.method=l.method):i(),o.isShowDialog=!0,e.getDicts("sys_method_api").then(m=>{o.methodOptions=m.data})},n=l=>{e.mittBus.emit("onEditApiModule",l),o.isShowDialog=!1},g=()=>{n()},d=()=>{const l=k(t);!l||l.validate(m=>{m&&(o.ruleForm.id!=null&&o.ruleForm.id!=0?z(o.ruleForm).then(_=>{A.success("\u4FEE\u6539\u6210\u529F"),n(o.ruleForm)}):R(o.ruleForm).then(_=>{A.success("\u65B0\u589E\u6210\u529F"),n(o.ruleForm)}))})},i=()=>{o.ruleForm.id=0,o.ruleForm.path="",o.ruleForm.description="",o.ruleForm.method="",o.ruleForm.apiGroup=""};return{ruleFormRef:t,openDialog:p,closeDialog:n,onCancel:g,initForm:i,onSubmit:d,...B(o)}}},N={class:"system-menu-container"},j={style:{"font-size":"large"}},w={class:"dialog-footer"},L=c("\u53D6 \u6D88"),T=c("\u7F16 \u8F91");function H(e,t,o,p,n,g){const d=s("el-input"),i=s("el-form-item"),l=s("el-radio"),m=s("el-radio-group"),_=s("el-form"),D=s("el-button"),V=s("el-dialog"),b=S("drag");return F(),h("div",N,[r(V,{modelValue:e.isShowDialog,"onUpdate:modelValue":t[4]||(t[4]=u=>e.isShowDialog=u),width:"769px"},{title:a(()=>[G((F(),h("div",j,[c(E(o.title),1)])),[[b,[".app-container .el-dialog",".app-container .el-dialog__header"]]])]),footer:a(()=>[I("span",w,[r(D,{onClick:p.onCancel,size:"small"},{default:a(()=>[L]),_:1},8,["onClick"]),r(D,{type:"primary",onClick:p.onSubmit,size:"small"},{default:a(()=>[T]),_:1},8,["onClick"])])]),default:a(()=>[r(_,{model:e.ruleForm,rules:e.ruleRules,ref:"ruleFormRef","label-width":"80px"},{default:a(()=>[r(i,{label:"\u8DEF\u5F84",prop:"path"},{default:a(()=>[r(d,{modelValue:e.ruleForm.path,"onUpdate:modelValue":t[0]||(t[0]=u=>e.ruleForm.path=u),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u5F84"},null,8,["modelValue"])]),_:1}),r(i,{label:"API\u63CF\u8FF0",prop:"description"},{default:a(()=>[r(d,{modelValue:e.ruleForm.description,"onUpdate:modelValue":t[1]||(t[1]=u=>e.ruleForm.description=u),placeholder:"\u8BF7\u8F93\u5165API\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),r(i,{label:"API\u5206\u7EC4",prop:"apiGroup"},{default:a(()=>[r(d,{modelValue:e.ruleForm.apiGroup,"onUpdate:modelValue":t[2]||(t[2]=u=>e.ruleForm.apiGroup=u),placeholder:"\u8BF7\u8F93\u5165API\u5206\u7EC4"},null,8,["modelValue"])]),_:1}),r(i,{label:"\u65B9\u6CD5\u540D",prop:"method"},{default:a(()=>[r(m,{modelValue:e.ruleForm.method,"onUpdate:modelValue":t[3]||(t[3]=u=>e.ruleForm.method=u)},{default:a(()=>[(F(!0),h(P,null,M(e.methodOptions,u=>(F(),U(l,{key:u.dictValue,label:u.dictValue},{default:a(()=>[c(E(u.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}const W=C(q,[["render",H]]),Q=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as E,K as d,Q as e,J as l};
