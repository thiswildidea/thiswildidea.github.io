import{t as e,u as l,a}from"./dept.1705299224378.js";import{_ as r,D as o,k as t,p as u,r as d,Q as s,a as m,h as n,w as i,ay as p,H as c,o as g,v as F,i as f,t as h,b,F as V,e as _,f as x,g as I}from"./index.1705299224378.js";const y={name:"editMenu",props:{title:{type:String,default:()=>""}},setup(){const{proxy:r}=I(),d=o(null),s=t({isShowDialog:!1,ruleForm:{deptId:0,deptName:"",parentId:0,orderNum:0,status:"",leader:"",phone:"",email:""},statusOptions:[],deptOptions:[],ruleRules:{deptName:[{required:!0,message:"部门名称不能为空",trigger:"blur"}],parentId:[{required:!0,message:"父部门不能为空",trigger:"blur"}],status:[{required:!0,message:"部门状态不能为空",trigger:"blur"}],sort:[{required:!0,message:"部门顺序不能为空",trigger:"blur"}],email:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}),m=e=>{r.mittBus.emit("onEditDeptModule",e),s.isShowDialog=!1},n=()=>{s.ruleForm.deptId=0,s.ruleForm.deptName="",s.ruleForm.parentId=0,s.ruleForm.orderNum=0,s.ruleForm.status=s.ruleForm.status?s.ruleForm.status:"0",s.ruleForm.leader="",s.ruleForm.phone="",s.ruleForm.email=""};return{ruleFormRef:d,openDialog:l=>{l.deptId&&null!=l.deptId&&""!=l.deptId?s.ruleForm=l:(n(),s.ruleForm.parentId=l.parentId),s.isShowDialog=!0,r.getDicts("sys_normal_disable").then((e=>{s.statusOptions=e.data})),e().then((e=>{s.deptOptions=[];const l={id:0,label:"主类目",children:[]};l.children=e.data,s.deptOptions.push(l)}))},closeDialog:m,onCancel:()=>{m(),n()},onSubmit:()=>{const e=p(d);e&&e.validate((e=>{e&&(null!=s.ruleForm.deptId&&0!=s.ruleForm.deptId?l(s.ruleForm).then((e=>{c.success("修改成功"),m(s.ruleForm)})):a(s.ruleForm).then((e=>{c.success("新增成功"),m(s.ruleForm)})))}))},...u(s)}}},w={class:"system-menu-container"},N={style:{"font-size":"large"}},D={class:"dialog-footer"},S=f("取 消"),U=f("编 辑");const k=r(y,[["render",function(e,l,a,r,o,t){const u=d("el-cascader"),p=d("el-form-item"),c=d("el-col"),I=d("el-input"),y=d("el-radio"),k=d("el-radio-group"),O=d("el-input-number"),v=d("el-row"),C=d("el-form"),q=d("el-button"),z=d("el-dialog"),R=s("drag");return g(),m("div",w,[n(z,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[7]||(l[7]=l=>e.isShowDialog=l),width:"769px"},{title:i((()=>[F((g(),m("div",N,[f(h(a.title),1)])),[[R,[".system-menu-container .el-dialog",".system-menu-container .el-dialog__header"]]])])),footer:i((()=>[b("span",D,[n(q,{onClick:r.onCancel,size:"small"},{default:i((()=>[S])),_:1},8,["onClick"]),n(q,{type:"primary",onClick:r.onSubmit,size:"small"},{default:i((()=>[U])),_:1},8,["onClick"])])])),default:i((()=>[n(C,{model:e.ruleForm,rules:e.ruleRules,ref:"ruleFormRef","label-width":"80px"},{default:i((()=>[n(v,{gutter:30},{default:i((()=>[n(c,{span:24},{default:i((()=>[n(p,{label:"上级部门",prop:"parentId"},{default:i((()=>[n(u,{modelValue:e.ruleForm.parentId,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.parentId=l),options:e.deptOptions,size:"small",class:"w100",props:{value:"id",label:"label",checkStrictly:!0,emitPath:!1},clearable:"",placeholder:"选择上级部门","show-all-levels":!1},null,8,["modelValue","options"])])),_:1})])),_:1}),n(c,{xs:24,sm:12,md:12,lg:12,xl:12},{default:i((()=>[n(p,{label:"部门名称",prop:"deptName"},{default:i((()=>[n(I,{modelValue:e.ruleForm.deptName,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.deptName=l),placeholder:"请输入部门名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),n(c,{xs:24,sm:12,md:12,lg:12,xl:12},{default:i((()=>[n(p,{label:"负责人"},{default:i((()=>[n(I,{modelValue:e.ruleForm.leader,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.leader=l),placeholder:"请输入负责人",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),n(c,{xs:24,sm:12,md:12,lg:12,xl:12},{default:i((()=>[n(p,{label:"联系电话",prop:"phone"},{default:i((()=>[n(I,{modelValue:e.ruleForm.phone,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.phone=l),placeholder:"请输入联系电话",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),n(c,{xs:24,sm:12,md:12,lg:12,xl:12},{default:i((()=>[n(p,{label:"联系邮箱",prop:"email"},{default:i((()=>[n(I,{modelValue:e.ruleForm.email,"onUpdate:modelValue":l[4]||(l[4]=l=>e.ruleForm.email=l),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),n(c,{xs:24,sm:12,md:12,lg:12,xl:12},{default:i((()=>[n(p,{label:"部门状态",prop:"status"},{default:i((()=>[n(k,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[5]||(l[5]=l=>e.ruleForm.status=l)},{default:i((()=>[(g(!0),m(V,null,_(e.statusOptions,(e=>(g(),x(y,{key:e.dictValue,label:e.dictValue},{default:i((()=>[f(h(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),n(c,{xs:24,sm:12,md:12,lg:12,xl:12},{default:i((()=>[n(p,{label:"部门排序",prop:"orderNum"},{default:i((()=>[n(O,{modelValue:e.ruleForm.orderNum,"onUpdate:modelValue":l[6]||(l[6]=l=>e.ruleForm.orderNum=l),placeholder:"部门排序",clearable:"","controls-position":"right",min:0},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}]]);export{k as default};
