import{_ as e,D as t,k as a,m as l,M as i,p as d,r as o,Q as n,f as s,w as r,g as u,aC as c,I as m,aD as p,H as y,o as f,b,h as w,au as h,a as g,e as D,F as _,v as x,i as v,t as V}from"./index.1704982031072.js";import k from"./editDictItem.1704982031072.js";const C={name:"dictList",components:{editDictItem:k},setup(){const{proxy:e}=u(),o=t(),n=a({loading:!0,title:"",tableData:[],isShowDrawer:!1,direction:"rtl",screenWidth:800,statusOptions:[{dictValue:"0",dictLabel:"正常"},{dictValue:"1",dictLabel:"禁用"}],queryParams:{dictType:void 0,dictLabel:void 0,status:void 0}}),s=()=>{n.loading=!0,c(n.queryParams).then((e=>{n.tableData=e.rows,n.loading=!1}))},r=()=>{let e=document.body.clientWidth;n.screenWidth=e<600?e:600};return l((()=>{e.mittBus.on("onEditDictItemModule",(e=>{s()}))})),i((()=>{e.mittBus.off("onEditDictItemModule")})),{dictItemModuleRef:o,resetScreenSize:r,onOpenAddModule:e=>{e.dictType=n.queryParams.dictType,n.title="添加字典数据",o.value.openDialog(e)},onOpenEditModule:e=>{n.title="修改字典数据",o.value.openDialog(e)},onTabelRowDel:e=>{const t=e.dictCode;m({message:'是否确认删除字典编号为"'+t+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return p(t).then((()=>{s(),y.success("删除成功")}))}))},resetQuery:()=>{n.queryParams.dictLabel=void 0,n.queryParams.status=void 0,s()},openDrawer:t=>{r(),n.queryParams.dictType=t.dictType,e.getDicts(t.dictType).then((e=>{n.tableData=e.data,n.loading=!1})),n.isShowDrawer=!0},handleQuery:s,...d(n)}}},q={style:{padding:"10px",border:"1px solid #e9e9e9",background:"#fff"}},P=v("搜索"),z=v("重置"),T=v("新增"),I=v("修改"),L=v("删除");const M=e(C,[["render",function(e,t,a,l,i,d){const u=o("el-input"),c=o("el-form-item"),m=o("el-col"),p=o("el-option"),y=o("el-select"),k=o("SvgIcon"),C=o("el-button"),M=o("el-row"),S=o("el-form"),O=o("el-table-column"),Q=o("el-tag"),B=o("el-table"),E=o("editDictItem"),R=o("el-drawer"),W=n("auth"),U=n("loading");return f(),s(R,{title:"字典列表",direction:e.direction,size:e.screenWidth,modelValue:e.isShowDrawer,"onUpdate:modelValue":t[2]||(t[2]=t=>e.isShowDrawer=t)},{default:r((()=>[b("div",q,[w(S,{model:e.queryParams,ref:"queryForm",inline:!0,size:"mini"},{default:r((()=>[w(M,{gutter:12},{default:r((()=>[w(m,{md:8,sm:8,xs:24},{default:r((()=>[w(c,{label:"标签",prop:"dictName"},{default:r((()=>[w(u,{placeholder:"标签查询",clearable:"",size:"small",onKeyup:h(l.handleQuery,["enter"]),style:{width:"120px"},modelValue:e.queryParams.dictLabel,"onUpdate:modelValue":t[0]||(t[0]=t=>e.queryParams.dictLabel=t)},null,8,["onKeyup","modelValue"])])),_:1})])),_:1}),w(m,{md:8,sm:8,xs:24},{default:r((()=>[w(c,{label:"状态",prop:"status"},{default:r((()=>[w(y,{modelValue:e.queryParams.status,"onUpdate:modelValue":t[1]||(t[1]=t=>e.queryParams.status=t),placeholder:"状态",clearable:"",size:"mini",style:{width:"100px"}},{default:r((()=>[(f(!0),g(_,null,D(e.statusOptions,(e=>(f(),s(p,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),w(m,{md:8,sm:8,xs:24},{default:r((()=>[w(c,null,{default:r((()=>[w(C,{type:"primary",onClick:l.handleQuery,size:"mini"},{default:r((()=>[w(k,{name:"elementSearch"}),P])),_:1},8,["onClick"]),w(C,{size:"mini",onClick:l.resetQuery},{default:r((()=>[w(k,{name:"elementRefresh"}),z])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),w(M,null,{default:r((()=>[w(m,{md:2,sm:2,xs:8},{default:r((()=>[x((f(),s(C,{style:{"margin-bottom":"10px","margin-top":"10px"},size:"mini",type:"primary",onClick:l.onOpenAddModule},{default:r((()=>[w(k,{name:"elementPlus"}),T])),_:1},8,["onClick"])),[[W,"system:dictD:add"]])])),_:1})])),_:1})])),_:1},8,["model"])]),b("div",null,[x((f(),s(B,{data:e.tableData},{default:r((()=>[w(O,{label:"键值",align:"center",prop:"dictValue","show-overflow-tooltip":!0}),w(O,{label:"标签",align:"center",prop:"dictLabel","show-overflow-tooltip":!0}),w(O,{label:"类型",align:"center",prop:"dictType","show-overflow-tooltip":!0}),w(O,{label:"状态",align:"center",prop:"status"},{default:r((e=>[w(Q,{type:"1"===e.row.status?"danger":"success","disable-transitions":""},{default:r((()=>[v(V("1"===e.row.status?"停用":"正常"),1)])),_:2},1032,["type"])])),_:1}),w(O,{label:"排序",align:"center",width:"50",prop:"dictSort"}),w(O,{label:"操作",align:"center",width:"150","class-name":"medium-padding fixed-width"},{default:r((e=>[x((f(),s(C,{size:"mini",type:"text",icon:"el-icon-edit",onClick:t=>l.onOpenEditModule(e.row)},{default:r((()=>[w(k,{name:"elementEdit"}),I])),_:2},1032,["onClick"])),[[W,"system:dictD:edit"]]),x((f(),s(C,{size:"mini",type:"text",onClick:t=>l.onTabelRowDel(e.row)},{default:r((()=>[w(k,{name:"elementDelete"}),L])),_:2},1032,["onClick"])),[[W,"system:dictD:delete"]])])),_:1})])),_:1},8,["data"])),[[U,e.loading]])]),w(E,{ref:"dictItemModuleRef",title:e.title},null,8,["title"])])),_:1},8,["direction","size","modelValue"])}]]);export{M as default};
