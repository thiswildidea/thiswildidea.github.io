import{at as v,_ as N,k,m as E,p as S,r as i,U as y,a as A,h as o,w as n,v as m,f as F,x as L,b as c,I as V,H as Q,o as g,au as C,t as w,i as h}from"./index.1704797758166.js";function T(e){return v({url:"/monitor/online/list",method:"get",params:e})}function K(e){return v({url:"/monitor/online/"+e,method:"delete"})}const I={name:"onlineuser",setup(){const e=k({total:0,loading:!0,onlineList:[],queryParams:{pageNum:1,pageSize:10,ipaddr:void 0,userName:void 0}}),u=()=>{e.loading=!0,T(e.queryParams).then(a=>{e.onlineList=a.rows,e.total=a.total,e.loading=!1})},s=()=>{u()},l=()=>{e.queryParams.pageNum=1,e.queryParams.pageSize=10,e.queryParams.ipaddr="",e.queryParams.userName="",s()},f=a=>{e.queryParams.pageSize=a,s()},_=a=>{e.queryParams.pageNum=a,s()},d=a=>{V({message:'\u662F\u5426\u786E\u8BA4\u5F3A\u9000\u540D\u79F0\u4E3A"'+a.userName+'"\u7684\u7528\u6237?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(function(){return K(a.tokenId)}).then(()=>{u(),Q.success("\u5F3A\u9000\u6210\u529F")})};return E(()=>{u()}),{handleCurrentChange:_,handleSizeChange:f,handleForceLogout:d,handleQuery:s,resetQuery:l,getList:u,...S(e)}}},M={class:"app-container"},R=h("\u641C\u7D22"),U=h("\u91CD\u7F6E"),x=h("\u5F3A\u9000");function j(e,u,s,l,f,_){const d=i("el-input"),a=i("el-form-item"),p=i("el-button"),b=i("el-form"),t=i("el-table-column"),B=i("el-table"),q=i("el-divider"),D=i("el-pagination"),P=y("auth"),z=y("loading");return g(),A("div",M,[o(b,{model:e.queryParams,ref:"queryRef",inline:!0,"label-width":"68px"},{default:n(()=>[o(a,{label:"\u767B\u5F55\u5730\u5740",prop:"ipaddr"},{default:n(()=>[o(d,{modelValue:e.queryParams.ipaddr,"onUpdate:modelValue":u[0]||(u[0]=r=>e.queryParams.ipaddr=r),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5730\u5740",clearable:"",size:"small",onKeyup:C(l.handleQuery,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(a,{label:"\u7528\u6237\u540D\u79F0",prop:"userName"},{default:n(()=>[o(d,{modelValue:e.queryParams.userName,"onUpdate:modelValue":u[1]||(u[1]=r=>e.queryParams.userName=r),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:"",onKeyup:C(l.handleQuery,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(a,null,{default:n(()=>[o(p,{type:"primary",icon:"Search",size:"mini",onClick:l.handleQuery},{default:n(()=>[R]),_:1},8,["onClick"]),o(p,{icon:"Refresh",size:"mini",onClick:l.resetQuery},{default:n(()=>[U]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),m((g(),F(B,{data:e.onlineList,style:{width:"100%"}},{default:n(()=>[o(t,{label:"\u5E8F\u53F7",type:"index",align:"center"},{default:n(r=>[c("span",null,w((e.queryParams.pageNum-1)*e.queryParams.pageSize+r.$index+1),1)]),_:1}),o(t,{label:"\u4F1A\u8BDD\u7F16\u53F7",align:"center",prop:"tokenId","show-overflow-tooltip":!0}),o(t,{label:"\u767B\u5F55\u540D\u79F0",align:"center",prop:"userName","show-overflow-tooltip":!0}),o(t,{label:"\u6240\u5C5E\u90E8\u95E8",align:"center",prop:"deptName","show-overflow-tooltip":!0}),o(t,{label:"\u4E3B\u673A",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),o(t,{label:"\u767B\u5F55\u5730\u70B9",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),o(t,{label:"\u64CD\u4F5C\u7CFB\u7EDF",align:"center",prop:"os","show-overflow-tooltip":!0}),o(t,{label:"\u6D4F\u89C8\u5668",align:"center",prop:"browser","show-overflow-tooltip":!0}),o(t,{label:"\u767B\u5F55\u65F6\u95F4",align:"center",prop:"loginTime",width:"180"},{default:n(r=>[c("span",null,w(e.parseTime(r.row.loginTime)),1)]),_:1}),o(t,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:n(r=>[m((g(),F(p,{size:"mini",type:"text",icon:"Delete",onClick:H=>l.handleForceLogout(r.row)},{default:n(()=>[x]),_:2},1032,["onClick"])),[[P,"monitor:online:forceLogout"]])]),_:1})]),_:1},8,["data"])),[[z,e.loading]]),m(c("div",null,[o(q),o(D,{background:"",total:e.total,"current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[L,e.total>0]])])}const J=N(I,[["render",j]]);export{J as default};
