import{_ as N,D as O,k as Q,m as R,M as G,p as T,r as i,U as F,a as B,h as e,w as l,g as U,I,H as x,o as d,au as b,F as L,e as j,f as h,v as g,i as c,t as H,y as J,x as W,b as X}from"./index.1704797758166.js";import{E as Y,l as Z,d as $}from"./editModule.17047977581662.js";const ee={name:"index",components:{EditModule:Y},setup(){const{proxy:a}=U(),r=O(),o=Q({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,methodOptions:[],queryParams:{pageNum:1,pageSize:10,path:void 0,description:void 0,method:void 0,apiGroup:void 0}}),n=()=>{o.loading=!0,Z(o.queryParams).then(t=>{o.tableData=t.data.data,o.total=t.data.total,o.loading=!1})},v=()=>{o.queryParams.path=void 0,o.queryParams.description=void 0,o.queryParams.method=void 0,o.queryParams.apiGroup=void 0,n()},w=t=>{t=[],o.title="\u6DFB\u52A0Api\u53C2\u6570",r.value.openDialog(t)},y=t=>{o.title="\u4FEE\u6539Api\u53C2\u6570",r.value.openDialog(t)},p=t=>{const _=t.id||o.ids;I({message:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u914D\u7F6E\u53C2\u6570\u7F16\u53F7\u4E3A"'+_+'"\u7684\u6570\u636E\u9879?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return $(_).then(()=>{n(),x.success("\u5220\u9664\u6210\u529F")})})},f=t=>{o.ids=t.map(_=>_.id),o.single=t.length!=1,o.multiple=!t.length},E=t=>{o.queryParams.pageSize=t,n()},s=t=>{o.queryParams.pageNum=t,n()};return R(()=>{n(),a.getDicts("sys_method_api").then(t=>{o.methodOptions=t.data}),a.mittBus.on("onEditApiModule",t=>{n()})}),G(()=>{a.mittBus.off("onEditApiModule")}),{editModuleRef:r,handleSelectionChange:f,handleSizeChange:E,handleCurrentChange:s,handleQuery:n,resetQuery:v,onOpenAddModule:w,onOpenEditModule:y,onTabelRowDel:p,...T(o)}}},te={class:"app-container"},ae=c(" \u641C\u7D22"),le=c(" \u91CD\u7F6E "),oe=c("\u65B0\u589E"),ne=c("\u5220\u9664"),ue=c("\u4FEE\u6539"),ie=c("\u5220\u9664");function re(a,r,o,n,v,w){const y=i("el-input"),p=i("el-form-item"),f=i("el-option"),E=i("el-select"),s=i("SvgIcon"),t=i("el-button"),_=i("el-form"),D=i("el-col"),q=i("el-row"),m=i("el-table-column"),z=i("el-tag"),P=i("el-table"),k=i("el-divider"),A=i("el-pagination"),V=i("el-card"),S=i("EditModule"),C=F("auth"),M=F("loading");return d(),B("div",te,[e(V,{shadow:"always"},{default:l(()=>[e(_,{model:a.queryParams,ref:"queryForm",inline:!0},{default:l(()=>[e(p,{label:"\u8DEF\u5F84",prop:"path"},{default:l(()=>[e(y,{placeholder:"Api\u8DEF\u5F84\u6A21\u7CCA\u67E5\u8BE2",clearable:"",size:"small",onKeyup:b(n.handleQuery,["enter"]),style:{width:"240px"},modelValue:a.queryParams.path,"onUpdate:modelValue":r[0]||(r[0]=u=>a.queryParams.path=u)},null,8,["onKeyup","modelValue"])]),_:1}),e(p,{label:"\u63CF\u8FF0",prop:"description"},{default:l(()=>[e(y,{placeholder:"\u63CF\u8FF0\u6A21\u7CCA\u67E5\u8BE2",clearable:"",size:"small",onKeyup:b(n.handleQuery,["enter"]),style:{width:"240px"},modelValue:a.queryParams.description,"onUpdate:modelValue":r[1]||(r[1]=u=>a.queryParams.description=u)},null,8,["onKeyup","modelValue"])]),_:1}),e(p,{label:"\u5206\u7EC4",prop:"apiGroup"},{default:l(()=>[e(y,{placeholder:"\u5206\u7EC4\u67E5\u8BE2",clearable:"",size:"small",onKeyup:b(n.handleQuery,["enter"]),style:{width:"240px"},modelValue:a.queryParams.apiGroup,"onUpdate:modelValue":r[2]||(r[2]=u=>a.queryParams.apiGroup=u)},null,8,["onKeyup","modelValue"])]),_:1}),e(p,{label:"\u65B9\u6CD5",prop:"method"},{default:l(()=>[e(E,{modelValue:a.queryParams.method,"onUpdate:modelValue":r[3]||(r[3]=u=>a.queryParams.method=u),placeholder:"\u65B9\u6CD5",clearable:"",size:"small",style:{width:"240px"}},{default:l(()=>[(d(!0),B(L,null,j(a.methodOptions,u=>(d(),h(f,{key:u.dictValue,label:u.dictLabel,value:u.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:l(()=>[e(t,{type:"primary",size:"mini",onClick:n.handleQuery},{default:l(()=>[e(s,{name:"elementSearch"}),ae]),_:1},8,["onClick"]),e(t,{size:"mini",onClick:n.resetQuery},{default:l(()=>[e(s,{name:"elementRefresh"}),le]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),e(q,{gutter:10,class:"mb8"},{default:l(()=>[e(D,{span:1.5},{default:l(()=>[g((d(),h(t,{type:"primary",plain:"",size:"mini",onClick:n.onOpenAddModule},{default:l(()=>[e(s,{name:"elementPlus"}),oe]),_:1},8,["onClick"])),[[C,"system:api:add"]])]),_:1},8,["span"]),e(D,{span:1.5},{default:l(()=>[g((d(),h(t,{type:"danger",plain:"",size:"mini",disabled:a.multiple,onClick:n.onTabelRowDel},{default:l(()=>[e(s,{name:"elementDelete"}),ne]),_:1},8,["disabled","onClick"])),[[C,"system:api:delete"]])]),_:1},8,["span"])]),_:1}),g((d(),h(P,{data:a.tableData,onSelectionChange:n.handleSelectionChange},{default:l(()=>[e(m,{type:"selection",width:"55",align:"center"}),e(m,{label:"id",align:"center",prop:"id"}),e(m,{label:"\u8DEF\u5F84",align:"center",prop:"path","show-overflow-tooltip":!0}),e(m,{label:"\u5206\u7EC4",align:"center",prop:"apiGroup"}),e(m,{label:"\u7B80\u4ECB",align:"center",prop:"description"}),e(m,{label:"\u8BF7\u6C42",align:"center",prop:"method","show-overflow-tooltip":!0},{default:l(u=>[e(z,{type:"success"},{default:l(()=>[c(H(u.row.method),1)]),_:2},1024)]),_:1}),e(m,{label:"\u64CD\u4F5C",align:"center",width:"200","class-name":"medium-padding fixed-width"},{default:l(u=>[g((d(),h(t,{size:"mini",type:"text",onClick:K=>n.onOpenEditModule(u.row)},{default:l(()=>[e(s,{name:"elementEdit"}),ue]),_:2},1032,["onClick"])),[[C,"system:api:edit"]]),u.row.parentId!=0?g((d(),h(t,{key:0,size:"mini",type:"text",onClick:K=>n.onTabelRowDel(u.row)},{default:l(()=>[e(s,{name:"elementDelete"}),ie]),_:2},1032,["onClick"])),[[C,"system:api:delete"]]):J("",!0)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[M,a.loading]]),g(X("div",null,[e(k),e(A,{background:"",total:a.total,"current-page":a.queryParams.pageNum,"page-size":a.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[W,a.total>0]])]),_:1}),e(S,{ref:"editModuleRef",title:a.title},null,8,["title"])])}const pe=N(ee,[["render",re]]);export{pe as default};
