import{at as _,_ as I,D as A,k as B,p as S,r as i,U as k,a as g,h as l,w as n,ax as O,H as h,o as f,v as N,i as y,t as w,b as M,F as U,e as z,f as R,g as j}from"./index.1704798071520.js";import{t as q}from"./dept.1704798071520.js";import{E as L}from"./index.170479807152022.js";function te(t){return _({url:"/system/notice/list",method:"get",params:t})}function P(t){return _({url:"/system/notice",method:"post",data:t})}function W(t){return _({url:"/system/notice",method:"put",data:t})}function oe(t){return _({url:"/system/notice/"+t,method:"delete"})}const H={name:"editMenu",components:{Editor:L},props:{title:{type:String,default:()=>""}},setup(){const{proxy:t}=j(),u=A(null),e=B({isShowDialog:!1,ruleForm:{noticeId:0,noticeTitle:"",noticeType:"",deptId:0,noticeContent:""},noticeTypeOptions:[],deptOptions:[],ruleRules:{title:[{required:!0,message:"\u516C\u544A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],noticeType:[{required:!0,message:"\u516C\u544A\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),p=o=>{o.noticeId&&o.noticeId!=null&&o.noticeId!=""?(e.ruleForm=o,e.ruleForm.noticeId=o.noticeId,e.ruleForm.noticeTitle=o.noticeTitle,e.ruleForm.noticeType=o.noticeType,e.ruleForm.deptId=o.deptId,e.ruleForm.noticeContent=o.noticeContent):(s(),e.ruleForm.noticeContent=""),e.isShowDialog=!0,t.getDicts("sys_notice_type").then(a=>{e.noticeTypeOptions=a.data}),q().then(a=>{e.deptOptions=[];const c={id:0,label:"\u5168\u90E8\u90E8\u95E8",children:[]};c.children=a.data,e.deptOptions.push(c)})},E=o=>{e.ruleForm.content=o},m=o=>{t.mittBus.emit("onEditNoticeModule",o),e.isShowDialog=!1},F=()=>{m()},d=()=>{const o=O(u);!o||o.validate(a=>{a&&(e.ruleForm.noticeId!=null&&e.ruleForm.noticeId!=0?W(e.ruleForm).then(c=>{h.success("\u4FEE\u6539\u6210\u529F"),m(e.ruleForm)}):P(e.ruleForm).then(c=>{h.success("\u65B0\u589E\u6210\u529F"),m(e.ruleForm)}))})},s=()=>{e.ruleForm.noticeId=0,e.ruleForm.noticeTitle="",e.ruleForm.noticeType="",e.ruleForm.deptId=0,e.ruleForm.noticeContent=""};return{ruleFormRef:u,openDialog:p,closeDialog:m,onCancel:F,initForm:s,onSubmit:d,getWangEditorValue:E,...S(e)}}},$={class:"system-notice-container"},G={style:{"font-size":"large"}},J={class:"dialog-footer"},K=y("\u53D6 \u6D88"),Q=y("\u786E \u5B9A");function X(t,u,e,p,E,m){const F=i("el-input"),d=i("el-form-item"),s=i("el-col"),o=i("el-row"),a=i("el-option"),c=i("el-select"),C=i("el-cascader"),V=i("Editor"),T=i("el-form"),b=i("el-button"),D=i("el-dialog"),v=k("drag");return f(),g("div",$,[l(D,{modelValue:t.isShowDialog,"onUpdate:modelValue":u[4]||(u[4]=r=>t.isShowDialog=r),width:"769px"},{title:n(()=>[N((f(),g("div",G,[y(w(e.title),1)])),[[v,[".system-notice-container .el-dialog",".system-notice-container .el-dialog__header"]]])]),footer:n(()=>[M("span",J,[l(b,{onClick:p.onCancel,size:"small"},{default:n(()=>[K]),_:1},8,["onClick"]),l(b,{type:"primary",onClick:p.onSubmit,size:"small"},{default:n(()=>[Q]),_:1},8,["onClick"])])]),default:n(()=>[l(T,{model:t.ruleForm,rules:t.ruleRules,ref:"ruleFormRef","label-width":"100px"},{default:n(()=>[l(o,{class:"mb20"},{default:n(()=>[l(s,{span:24},{default:n(()=>[l(d,{label:"\u516C\u544A\u6807\u9898",prop:"noticeTitle"},{default:n(()=>[l(F,{modelValue:t.ruleForm.noticeTitle,"onUpdate:modelValue":u[0]||(u[0]=r=>t.ruleForm.noticeTitle=r),placeholder:"\u8BF7\u8F93\u5165\u516C\u544A\u6807\u9898"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(o,{class:"mb20"},{default:n(()=>[l(s,{span:12},{default:n(()=>[l(d,{label:"\u516C\u544A\u7C7B\u578B",prop:"noticeType"},{default:n(()=>[l(c,{modelValue:t.ruleForm.noticeType,"onUpdate:modelValue":u[1]||(u[1]=r=>t.ruleForm.noticeType=r),placeholder:"\u8BF7\u9009\u62E9"},{default:n(()=>[(f(!0),g(U,null,z(t.noticeTypeOptions,r=>(f(),R(a,{key:r.dictValue,label:r.dictLabel,value:r.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:n(()=>[l(d,{label:"\u901A\u77E5\u90E8\u95E8",prop:"deptId"},{default:n(()=>[l(C,{modelValue:t.ruleForm.deptId,"onUpdate:modelValue":u[2]||(u[2]=r=>t.ruleForm.deptId=r),options:t.deptOptions,size:"small",class:"w100",props:{value:"id",label:"label",checkStrictly:!0,emitPath:!1},clearable:"",placeholder:"\u9009\u62E9\u901A\u77E5\u90E8\u95E8","show-all-levels":!1},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1}),l(s,{span:24},{default:n(()=>[l(d,{label:"\u901A\u77E5\u5185\u5BB9",prop:"noticeContent"},{default:n(()=>[l(V,{modelValue:t.ruleForm.noticeContent,"onUpdate:modelValue":u[3]||(u[3]=r=>t.ruleForm.noticeContent=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}const Y=I(H,[["render",X]]),le=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{Y as E,oe as d,le as e,te as l};
