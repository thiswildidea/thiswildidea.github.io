import{au as e,_ as l,D as t,k as o,p as n,r as a,H as r,a as i,h as s,w as u,az as d,J as c,o as m,v as p,i as f,t as F,b as y,F as g,e as h,f as _,g as b}from"./index.1763363051054.js";import{t as T}from"./dept.1763363051054.js";import{E as V}from"./index.1763363051054111.js";function I(l){return e({url:"/system/notice/list",method:"get",params:l})}function C(l){return e({url:"/system/notice/"+l,method:"delete"})}const w={name:"editMenu",components:{Editor:V},props:{title:{type:String,default:()=>""}},setup(){const{proxy:l}=b(),a=t(null),r=o({isShowDialog:!1,ruleForm:{noticeId:0,noticeTitle:"",noticeType:"",deptId:0,noticeContent:""},noticeTypeOptions:[],deptOptions:[],ruleRules:{title:[{required:!0,message:"公告名称不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"blur"}]}}),i=e=>{l.mittBus.emit("onEditNoticeModule",e),r.isShowDialog=!1},s=()=>{r.ruleForm.noticeId=0,r.ruleForm.noticeTitle="",r.ruleForm.noticeType="",r.ruleForm.deptId=0,r.ruleForm.noticeContent=""};return{ruleFormRef:a,openDialog:e=>{e.noticeId&&null!=e.noticeId&&""!=e.noticeId?(r.ruleForm=e,r.ruleForm.noticeId=e.noticeId,r.ruleForm.noticeTitle=e.noticeTitle,r.ruleForm.noticeType=e.noticeType,r.ruleForm.deptId=e.deptId,r.ruleForm.noticeContent=e.noticeContent):(s(),r.ruleForm.noticeContent=""),r.isShowDialog=!0,l.getDicts("sys_notice_type").then((e=>{r.noticeTypeOptions=e.data})),T().then((e=>{r.deptOptions=[];const l={id:0,label:"全部部门",children:[]};l.children=e.data,r.deptOptions.push(l)}))},closeDialog:i,onCancel:()=>{i()},initForm:s,onSubmit:()=>{const l=d(a);l&&l.validate((l=>{var t;l&&(null!=r.ruleForm.noticeId&&0!=r.ruleForm.noticeId?(t=r.ruleForm,e({url:"/system/notice",method:"put",data:t})).then((e=>{c.success("修改成功"),i(r.ruleForm)})):function(l){return e({url:"/system/notice",method:"post",data:l})}(r.ruleForm).then((e=>{c.success("新增成功"),i(r.ruleForm)})))}))},getWangEditorValue:e=>{r.ruleForm.content=e},...n(r)}}},S={class:"system-notice-container"},v={style:{"font-size":"large"}},D={class:"dialog-footer"},O=f("取 消"),k=f("确 定");const x=l(w,[["render",function(e,l,t,o,n,d){const c=a("el-input"),b=a("el-form-item"),T=a("el-col"),V=a("el-row"),I=a("el-option"),C=a("el-select"),w=a("el-cascader"),x=a("Editor"),z=a("el-form"),E=a("el-button"),j=a("el-dialog"),U=r("drag");return m(),i("div",S,[s(j,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[4]||(l[4]=l=>e.isShowDialog=l),width:"769px"},{title:u((()=>[p((m(),i("div",v,[f(F(t.title),1)])),[[U,[".system-notice-container .el-dialog",".system-notice-container .el-dialog__header"]]])])),footer:u((()=>[y("span",D,[s(E,{onClick:o.onCancel,size:"small"},{default:u((()=>[O])),_:1},8,["onClick"]),s(E,{type:"primary",onClick:o.onSubmit,size:"small"},{default:u((()=>[k])),_:1},8,["onClick"])])])),default:u((()=>[s(z,{model:e.ruleForm,rules:e.ruleRules,ref:"ruleFormRef","label-width":"100px"},{default:u((()=>[s(V,{class:"mb20"},{default:u((()=>[s(T,{span:24},{default:u((()=>[s(b,{label:"公告标题",prop:"noticeTitle"},{default:u((()=>[s(c,{modelValue:e.ruleForm.noticeTitle,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.noticeTitle=l),placeholder:"请输入公告标题"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(V,{class:"mb20"},{default:u((()=>[s(T,{span:12},{default:u((()=>[s(b,{label:"公告类型",prop:"noticeType"},{default:u((()=>[s(C,{modelValue:e.ruleForm.noticeType,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.noticeType=l),placeholder:"请选择"},{default:u((()=>[(m(!0),i(g,null,h(e.noticeTypeOptions,(e=>(m(),_(I,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),s(T,{span:12},{default:u((()=>[s(b,{label:"通知部门",prop:"deptId"},{default:u((()=>[s(w,{modelValue:e.ruleForm.deptId,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.deptId=l),options:e.deptOptions,size:"small",class:"w100",props:{value:"id",label:"label",checkStrictly:!0,emitPath:!1},clearable:"",placeholder:"选择通知部门","show-all-levels":!1},null,8,["modelValue","options"])])),_:1})])),_:1})])),_:1}),s(T,{span:24},{default:u((()=>[s(b,{label:"通知内容",prop:"noticeContent"},{default:u((()=>[s(x,{modelValue:e.ruleForm.noticeContent,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.noticeContent=l)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}]]),z=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}));export{x as E,C as d,z as e,I as l};
