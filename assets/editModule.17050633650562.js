import{at as e,_ as l,D as o,k as r,p as a,r as t,Q as u,a as i,h as d,w as s,ay as m,H as p,o as n,v as c,i as h,t as F,b as g,F as f,e as _,f as b,g as V}from"./index.1705063365056.js";function y(l){return e({url:"/system/api/list",method:"get",params:l})}function S(l){return e({url:"/system/api/"+l,method:"delete"})}const D={name:"editMenu",props:{title:{type:String,default:()=>""}},setup(){const{proxy:l}=V(),t=o(null),u=r({isShowDialog:!1,ruleForm:{id:0,path:"",description:"",apiGroup:"",method:""},methodOptions:[],ruleRules:{path:[{required:!0,message:"API路径不能为空",trigger:"blur"}],apiGroup:[{required:!0,message:"API分组不能为空",trigger:"blur"}],method:[{required:!0,message:"API方法不能为空",trigger:"blur"}]}}),i=e=>{l.mittBus.emit("onEditApiModule",e),u.isShowDialog=!1},d=()=>{u.ruleForm.id=0,u.ruleForm.path="",u.ruleForm.description="",u.ruleForm.method="",u.ruleForm.apiGroup=""};return{ruleFormRef:t,openDialog:e=>{e.id&&null!=e.id&&0!=e.id?(u.ruleForm=e,u.ruleForm.id=e.id,u.ruleForm.path=e.path,u.ruleForm.description=e.description,u.ruleForm.apiGroup=e.apiGroup,u.ruleForm.method=e.method):d(),u.isShowDialog=!0,l.getDicts("sys_method_api").then((e=>{u.methodOptions=e.data}))},closeDialog:i,onCancel:()=>{i()},initForm:d,onSubmit:()=>{const l=m(t);l&&l.validate((l=>{var o;l&&(null!=u.ruleForm.id&&0!=u.ruleForm.id?(o=u.ruleForm,e({url:"/system/api",method:"put",data:o})).then((e=>{p.success("修改成功"),i(u.ruleForm)})):function(l){return e({url:"/system/api",method:"post",data:l})}(u.ruleForm).then((e=>{p.success("新增成功"),i(u.ruleForm)})))}))},...a(u)}}},w={class:"system-menu-container"},A={style:{"font-size":"large"}},G={class:"dialog-footer"},P=h("取 消"),I=h("编 辑");const k=l(D,[["render",function(e,l,o,r,a,m){const p=t("el-input"),V=t("el-form-item"),y=t("el-radio"),S=t("el-radio-group"),D=t("el-form"),k=t("el-button"),v=t("el-dialog"),C=u("drag");return n(),i("div",w,[d(v,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[4]||(l[4]=l=>e.isShowDialog=l),width:"769px"},{title:s((()=>[c((n(),i("div",A,[h(F(o.title),1)])),[[C,[".app-container .el-dialog",".app-container .el-dialog__header"]]])])),footer:s((()=>[g("span",G,[d(k,{onClick:r.onCancel,size:"small"},{default:s((()=>[P])),_:1},8,["onClick"]),d(k,{type:"primary",onClick:r.onSubmit,size:"small"},{default:s((()=>[I])),_:1},8,["onClick"])])])),default:s((()=>[d(D,{model:e.ruleForm,rules:e.ruleRules,ref:"ruleFormRef","label-width":"80px"},{default:s((()=>[d(V,{label:"路径",prop:"path"},{default:s((()=>[d(p,{modelValue:e.ruleForm.path,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.path=l),placeholder:"请输入路径"},null,8,["modelValue"])])),_:1}),d(V,{label:"API描述",prop:"description"},{default:s((()=>[d(p,{modelValue:e.ruleForm.description,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.description=l),placeholder:"请输入API描述"},null,8,["modelValue"])])),_:1}),d(V,{label:"API分组",prop:"apiGroup"},{default:s((()=>[d(p,{modelValue:e.ruleForm.apiGroup,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.apiGroup=l),placeholder:"请输入API分组"},null,8,["modelValue"])])),_:1}),d(V,{label:"方法名",prop:"method"},{default:s((()=>[d(S,{modelValue:e.ruleForm.method,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.method=l)},{default:s((()=>[(n(!0),i(f,null,_(e.methodOptions,(e=>(n(),b(y,{key:e.dictValue,label:e.dictValue},{default:s((()=>[h(F(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}]]),v=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{k as E,S as d,v as e,y as l};
