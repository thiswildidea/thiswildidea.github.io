import{at as D,_ as T,D as J,k as N,m as R,M as U,p as Q,r as n,U as M,a as b,h as e,w as o,g as K,I as A,H as V,o as _,au as H,F as k,e as z,f as B,v as j,i,t as F,b as w,x as W,y as X}from"./index.1704797758166.js";function Y(t){return D({url:"/log/logJob/list",method:"get",params:t})}function Z(t){return D({url:"/log/logJob/"+t,method:"delete"})}function $(){return D({url:"/log/logJob/all",method:"delete"})}const x={name:"JobLog",setup(){const{proxy:t}=K(),d=J(null),u=N({total:0,tableData:[],loading:!0,ids:[],single:!0,multiple:!0,title:"",open:!1,modelForm:{},jobGroupOptions:[],JobOptions:[],statusOptions:[],queryParams:{pageNum:1,pageSize:10,name:void 0,jobGroup:void 0,status:void 0}}),r=()=>{u.queryParams.name=void 0,u.queryParams.jobGroup=void 0,u.queryParams.status=void 0,c()},c=()=>{u.loading=!0,Y(u.queryParams).then(l=>{u.tableData=l.data.data,u.total=l.data.total,u.loading=!1})},v=l=>{const m=l.logId||u.ids;A({message:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u5B9A\u65F6\u4EFB\u52A1\u7F16\u53F7\u4E3A"'+m+'"\u7684\u6570\u636E\u9879?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return Z(m).then(()=>{c(),V.success("\u5220\u9664\u6210\u529F")})})},y=()=>{A({message:"\u662F\u5426\u786E\u8BA4\u6E05\u7A7A\u6240\u6709\u8C03\u5EA6\u65E5\u5FD7\u6570\u636E\u9879?",title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return $()}).then(()=>{c(),V.success("\u6E05\u7A7A\u6210\u529F")})},s=l=>{u.ids=l.map(m=>m.logId),u.single=l.length!=1,u.multiple=!l.length},h=l=>{u.queryParams.pageSize=l,c()},C=l=>{u.queryParams.pageNum=l,c()},f=(l,m)=>t.selectDictLabel(u.statusOptions,l.status),g=(l,m)=>t.selectDictLabel(u.jobGroupOptions,l.jobGroup),E=l=>{u.open=!0,u.modelForm=l};return R(()=>{c(),t.getDicts("sys_normal_disable").then(l=>{u.statusOptions=l.data}),t.getDicts("sys_job_group").then(l=>{u.jobGroupOptions=l.data})}),U(()=>{}),{ruleFormRef:d,resetQuery:r,handleQuery:c,handleClean:y,statusFormat:f,jobGroupFormat:g,handleView:E,handleSelectionChange:s,handleCurrentChange:C,handleSizeChange:h,onTabelRowDel:v,...Q(u)}}},ee={class:"app-container"},oe=i(" \u641C\u7D22"),te=i(" \u91CD\u7F6E "),le=i("\u5220\u9664"),ae=i("\u6E05\u7A7A"),ue=i("\u8BE6\u7EC6"),ne={key:0},re={key:1},se={class:"dialog-footer"},ie=i("\u5173 \u95ED");function de(t,d,u,r,c,v){const y=n("el-input"),s=n("el-form-item"),h=n("el-option"),C=n("el-select"),f=n("SvgIcon"),g=n("el-button"),E=n("el-form"),l=n("el-col"),m=n("el-row"),p=n("el-table-column"),q=n("el-tag"),S=n("el-table"),P=n("el-divider"),G=n("el-pagination"),I=n("el-card"),L=n("el-dialog"),O=M("loading");return _(),b("div",ee,[e(I,{shadow:"always"},{default:o(()=>[e(E,{model:t.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:o(()=>[e(s,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"jobName"},{default:o(()=>[e(y,{placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0\u6A21\u7CCA\u67E5\u8BE2",clearable:"",size:"small",onKeyup:H(r.handleQuery,["enter"]),style:{width:"240px"},modelValue:t.queryParams.name,"onUpdate:modelValue":d[0]||(d[0]=a=>t.queryParams.name=a)},null,8,["onKeyup","modelValue"])]),_:1}),e(s,{label:"\u4EFB\u52A1\u7EC4\u540D",prop:"jobGroup"},{default:o(()=>[e(C,{modelValue:t.queryParams.jobGroup,"onUpdate:modelValue":d[1]||(d[1]=a=>t.queryParams.jobGroup=a),placeholder:"\u8BF7\u9009\u62E9\u4EFB\u52A1\u7EC4\u540D",clearable:"",size:"small"},{default:o(()=>[(_(!0),b(k,null,z(t.jobGroupOptions,a=>(_(),B(h,{key:a.dictValue,label:a.dictLabel,value:a.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"\u4EFB\u52A1\u72B6\u6001",prop:"status"},{default:o(()=>[e(C,{modelValue:t.queryParams.status,"onUpdate:modelValue":d[2]||(d[2]=a=>t.queryParams.status=a),placeholder:"\u8BF7\u9009\u62E9\u4EFB\u52A1\u72B6\u6001",clearable:"",size:"small"},{default:o(()=>[(_(!0),b(k,null,z(t.statusOptions,a=>(_(),B(h,{key:a.dictValue,label:a.dictLabel,value:a.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(g,{type:"primary",size:"mini",onClick:r.handleQuery},{default:o(()=>[e(f,{name:"elementSearch"}),oe]),_:1},8,["onClick"]),e(g,{size:"mini",onClick:r.resetQuery},{default:o(()=>[e(f,{name:"elementRefresh"}),te]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),e(m,{gutter:10,class:"mb8"},{default:o(()=>[e(l,{span:1.5},{default:o(()=>[e(g,{type:"danger",plain:"",size:"mini",disabled:t.multiple,onClick:r.onTabelRowDel},{default:o(()=>[e(f,{name:"elementDelete"}),le]),_:1},8,["disabled","onClick"])]),_:1},8,["span"]),e(l,{span:1.5},{default:o(()=>[e(g,{type:"danger",plain:"",size:"mini",onClick:r.handleClean},{default:o(()=>[e(f,{name:"elementDelete"}),ae]),_:1},8,["onClick"])]),_:1},8,["span"])]),_:1}),j((_(),B(S,{data:t.tableData,onSelectionChange:r.handleSelectionChange},{default:o(()=>[e(p,{type:"selection",width:"55",align:"center"}),e(p,{label:"\u65E5\u5FD7\u7F16\u53F7",width:"80",align:"center",prop:"logId"}),e(p,{label:"\u4EFB\u52A1\u540D\u79F0",align:"center",prop:"name","show-overflow-tooltip":!0}),e(p,{label:"\u4EFB\u52A1\u7EC4\u540D",align:"center",prop:"jobGroup",formatter:r.jobGroupFormat,"show-overflow-tooltip":!0},null,8,["formatter"]),e(p,{label:"\u8C03\u7528\u76EE\u6807",align:"center",prop:"invokeTarget","show-overflow-tooltip":!0}),e(p,{label:"\u65E5\u5FD7\u4FE1\u606F",align:"center",prop:"logInfo","show-overflow-tooltip":!0}),e(p,{label:"\u6267\u884C\u72B6\u6001",align:"center",prop:"status"},{default:o(a=>[e(q,{type:a.row.status==="0"?"success":"warning","disable-transitions":""},{default:o(()=>[i(F(r.statusFormat(a.row)||"-- --"),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"\u6267\u884C\u65F6\u95F4",align:"center",prop:"create_time",width:"180"},{default:o(a=>[w("span",null,F(t.dateStrFormat(a.row.create_time)),1)]),_:1}),e(p,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:o(a=>[e(g,{size:"mini",type:"text",onClick:me=>r.handleView(a.row)},{default:o(()=>[e(f,{name:"elementView"}),ue]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[O,t.loading]]),j(w("div",null,[e(P),e(G,{background:"",total:t.total,"current-page":t.queryParams.pageNum,"page-size":t.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:r.handleSizeChange,onCurrentChange:r.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[W,t.total>0]])]),_:1}),e(L,{title:"\u8C03\u5EA6\u65E5\u5FD7\u8BE6\u7EC6",modelValue:t.open,"onUpdate:modelValue":d[4]||(d[4]=a=>t.open=a),width:"700px","append-to-body":""},{footer:o(()=>[w("div",se,[e(g,{onClick:d[3]||(d[3]=a=>t.open=!1)},{default:o(()=>[ie]),_:1})])]),default:o(()=>[e(E,{ref:"ruleFormRef",model:t.modelForm,"label-width":"100px",size:"mini"},{default:o(()=>[e(m,null,{default:o(()=>[e(l,{span:12},{default:o(()=>[e(s,{label:"\u65E5\u5FD7\u5E8F\u53F7\uFF1A"},{default:o(()=>[i(F(t.modelForm.logId),1)]),_:1})]),_:1}),e(l,{span:12},{default:o(()=>[e(s,{label:"\u4EFB\u52A1\u5206\u7EC4\uFF1A"},{default:o(()=>[i(F(t.modelForm.jobGroup),1)]),_:1})]),_:1}),e(l,{span:12},{default:o(()=>[e(s,{label:"\u4EFB\u52A1\u540D\u79F0\uFF1A"},{default:o(()=>[i(F(t.modelForm.name),1)]),_:1})]),_:1}),e(l,{span:12},{default:o(()=>[e(s,{label:"\u6267\u884C\u65F6\u95F4\uFF1A"},{default:o(()=>[i(F(t.modelForm.create_time),1)]),_:1})]),_:1}),e(l,{span:12},{default:o(()=>[e(s,{label:"\u8C03\u7528\u65B9\u6CD5\uFF1A"},{default:o(()=>[i(F(t.modelForm.invokeTarget),1)]),_:1})]),_:1}),e(l,{span:12},{default:o(()=>[e(s,{label:"\u65E5\u5FD7\u4FE1\u606F\uFF1A"},{default:o(()=>[i(F(t.modelForm.logInfo),1)]),_:1})]),_:1}),e(l,{span:24},{default:o(()=>[e(s,{label:"\u6267\u884C\u72B6\u6001\uFF1A"},{default:o(()=>[t.modelForm.status==0?(_(),b("div",ne,"\u6B63\u5E38")):t.modelForm.status==1?(_(),b("div",re,"\u5931\u8D25")):X("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const ce=T(x,[["render",de]]);export{ce as default};
