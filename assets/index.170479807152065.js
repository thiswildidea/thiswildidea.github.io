import{_ as N,D as w,k as V,m as R,M as I,p as O,r as a,U as Q,a as B,h as e,w as l,g as U,I as x,H as K,o as g,au as L,F as j,e as H,f as F,v as D,b as T,t as G,x as J,i as m}from"./index.1704798071520.js";import{E as W,l as X,d as Y}from"./editModule.17047980715206.js";import"./dept.1704798071520.js";import"./index.170479807152022.js";const Z={name:"Notice",components:{EditModule:W},setup(){const{proxy:o}=U(),r=w(),b=w(null),t=V({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,open:!1,modelForm:{},noticeTypeOptions:[],queryParams:{pageNum:1,pageSize:10,title:void 0,noticeType:void 0}}),c=()=>{t.loading=!0,X(t.queryParams).then(n=>{t.tableData=n.rows,t.total=n.total,t.loading=!1})},E=()=>{t.queryParams.title=void 0,t.queryParams.noticeType=void 0,c()},y=(n,d)=>o.selectDictLabel(t.noticeTypeOptions,n.noticeType),_=n=>{n=[],t.title="\u6DFB\u52A0\u516C\u544A",r.value.openDialog(n)},h=n=>{t.title="\u4FEE\u6539\u516C\u544A",r.value.openDialog(n)},f=n=>{const d=n.noticeId||t.ids;x({message:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u516C\u544A\u7F16\u53F7\u4E3A"'+d+'"\u7684\u6570\u636E\u9879?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return Y(d).then(()=>{c(),K.success("\u5220\u9664\u6210\u529F")})})},i=n=>{t.ids=n.map(d=>d.noticeId),t.single=n.length!=1,t.multiple=!n.length},s=n=>{t.queryParams.pageSize=n,c()},C=n=>{t.queryParams.pageNum=n,c()};return R(()=>{c(),o.getDicts("sys_notice_type").then(n=>{t.noticeTypeOptions=n.data}),o.mittBus.on("onEditNoticeModule",n=>{c()})}),I(()=>{o.mittBus.off("onEditNoticeModule")}),{editModuleRef:r,ruleFormRef:b,handleSelectionChange:i,handleSizeChange:s,handleCurrentChange:C,handleQuery:c,resetQuery:E,onOpenAddModule:_,onOpenEditModule:h,noticeTypeFormat:y,onTabelRowDel:f,...O(t)}}},$={class:"app-container"},ee=m(" \u641C\u7D22"),te=m(" \u91CD\u7F6E "),ne=m("\u65B0\u589E"),oe=m("\u5220\u9664"),le=m("\u67E5\u770B"),ae=m("\u7F16\u8F91"),ue=m("\u5220\u9664");function ie(o,r,b,t,c,E){const y=a("el-input"),_=a("el-form-item"),h=a("el-option"),f=a("el-select"),i=a("SvgIcon"),s=a("el-button"),C=a("el-form"),n=a("el-col"),d=a("el-row"),p=a("el-table-column"),k=a("el-tabl-column"),A=a("el-table"),z=a("el-divider"),S=a("el-pagination"),M=a("el-card"),q=a("EditModule"),P=Q("loading");return g(),B("div",$,[e(M,{shadow:"always"},{default:l(()=>[e(C,{model:o.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:l(()=>[e(_,{label:"\u516C\u544A\u6807\u9898",prop:"title"},{default:l(()=>[e(y,{placeholder:"\u8BF7\u8F93\u5165\u516C\u544A\u6807\u9898\u6A21\u7CCA\u67E5\u8BE2",clearable:"",size:"small",onKeyup:L(t.handleQuery,["enter"]),style:{width:"240px"},modelValue:o.queryParams.title,"onUpdate:modelValue":r[0]||(r[0]=u=>o.queryParams.title=u)},null,8,["onKeyup","modelValue"])]),_:1}),e(_,{label:"\u901A\u77E5\u7C7B\u578B",prop:"noticeType"},{default:l(()=>[e(f,{modelValue:o.queryParams.noticeType,"onUpdate:modelValue":r[1]||(r[1]=u=>o.queryParams.noticeType=u),placeholder:"\u8BF7\u9009\u62E9\u901A\u77E5\u7C7B\u578B",clearable:"",size:"small",style:{width:"240px"}},{default:l(()=>[(g(!0),B(j,null,H(o.noticeTypeOptions,u=>(g(),F(h,{key:u.dictValue,label:u.dictLabel,value:u.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(s,{type:"primary",size:"mini",onClick:t.handleQuery},{default:l(()=>[e(i,{name:"elementSearch"}),ee]),_:1},8,["onClick"]),e(s,{size:"mini",onClick:t.resetQuery},{default:l(()=>[e(i,{name:"elementRefresh"}),te]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),e(d,{gutter:10,class:"mb8"},{default:l(()=>[e(n,{span:1.5},{default:l(()=>[e(s,{type:"primary",plain:"",size:"mini",onClick:t.onOpenAddModule},{default:l(()=>[e(i,{name:"elementPlus"}),ne]),_:1},8,["onClick"])]),_:1},8,["span"]),e(n,{span:1.5},{default:l(()=>[e(s,{type:"danger",plain:"",size:"mini",disabled:o.multiple,onClick:t.onTabelRowDel},{default:l(()=>[e(i,{name:"elementDelete"}),oe]),_:1},8,["disabled","onClick"])]),_:1},8,["span"])]),_:1}),D((g(),F(A,{data:o.tableData,onSelectionChange:t.handleSelectionChange},{default:l(()=>[e(p,{type:"selection",width:"55",align:"center"}),e(p,{label:"\u901A\u77E5\u7F16\u53F7",align:"center",prop:"noticeId"}),e(p,{label:"\u901A\u77E5\u6807\u9898",align:"center",prop:"noticeTitle","show-overflow-tooltip":!0}),e(p,{label:"\u901A\u77E5\u7C7B\u578B",align:"center",prop:"noticeType",formatter:t.noticeTypeFormat},null,8,["formatter"]),e(k,{label:"\u53D1\u5E03\u4EBA",align:"center",prop:"userName"}),e(p,{label:"\u53D1\u5E03\u65F6\u95F4",align:"center",prop:"createTime",width:"180"},{default:l(u=>[T("span",null,G(o.dateStrFormat(u.row.createTime)),1)]),_:1}),e(p,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:l(u=>[e(s,{size:"mini",type:"text",onClick:v=>o.handleRun(u.row)},{default:l(()=>[e(i,{name:"elementView"}),le]),_:2},1032,["onClick"]),e(s,{size:"mini",type:"text",onClick:v=>t.onOpenEditModule(u.row)},{default:l(()=>[e(i,{name:"elementEdit"}),ae]),_:2},1032,["onClick"]),e(s,{size:"mini",type:"text",onClick:v=>t.onTabelRowDel(u.row)},{default:l(()=>[e(i,{name:"elementDelete"}),ue]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[P,o.loading]]),D(T("div",null,[e(z),e(S,{background:"",total:o.total,"current-page":o.queryParams.pageNum,"page-size":o.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.handleSizeChange,onCurrentChange:t.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[J,o.total>0]])]),_:1}),e(q,{ref:"editModuleRef",title:o.title},null,8,["title"])])}const me=N(Z,[["render",ie]]);export{me as default};
