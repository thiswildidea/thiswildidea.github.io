import{d as O,D as T,k as S,m as R,M as U,r as u,U as v,a as B,h as e,w as n,ax as o,g as K,o as s,au as L,F as $,e as Q,f as _,v as f,b as H,t as C,i as d,y as j,I as G,H as J}from"./index.1704798071520.js";import{l as W,d as X}from"./dept.1704798071520.js";import Y from"./editModule.17047980715204.js";const Z={class:"app-container"},ee=d(" \u641C\u7D22"),te=d(" \u91CD\u7F6E "),ae=d(" \u65B0\u589E "),le=d("\u4FEE\u6539"),ne=d("\u65B0\u589E"),ue=d("\u5220\u9664"),re=O({setup(oe){const{proxy:y}=K(),h=T(),t=S({loading:!0,title:"",tableData:[],statusOptions:[],queryParams:{deptName:void 0,status:void 0}}),i=()=>{t.loading=!0,W(t.queryParams).then(a=>{t.tableData=a.data,t.loading=!1})},F=()=>{t.queryParams.deptName=void 0,t.queryParams.status=void 0,i()},w=a=>y.selectDictLabel(t.statusOptions,a.status),D=a=>{let r=a.deptId;a=[],a.parentId=r,t.title="\u6DFB\u52A0\u90E8\u95E8",h.value.openDialog(a)},k=a=>{t.title="\u4FEE\u6539\u90E8\u95E8",h.value.openDialog(a)},x=a=>{G({message:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u540D\u79F0\u4E3A"'+a.deptName+'"\u7684\u6570\u636E\u9879?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return X(a.deptId).then(()=>{i(),J.success("\u5220\u9664\u6210\u529F")})})};return R(()=>{i(),y.getDicts("sys_normal_disable").then(a=>{t.statusOptions=a.data}),y.mittBus.on("onEditDeptModule",a=>{i()})}),U(()=>{y.mittBus.off("onEditDeptModule")}),(a,r)=>{const N=u("el-input"),b=u("el-form-item"),V=u("el-option"),M=u("el-select"),m=u("SvgIcon"),c=u("el-button"),P=u("el-form"),p=u("el-table-column"),q=u("el-tag"),A=u("el-table"),I=u("el-card"),E=v("auth"),z=v("loading");return s(),B("div",Z,[e(I,{shadow:"always"},{default:n(()=>[e(P,{model:o(t).queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:n(()=>[e(b,{label:"\u90E8\u95E8\u540D\u79F0",prop:"deptName"},{default:n(()=>[e(N,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0\u6A21\u7CCA\u67E5\u8BE2",clearable:"",size:"small",onKeyup:L(i,["enter","native"]),modelValue:o(t).queryParams.deptName,"onUpdate:modelValue":r[0]||(r[0]=l=>o(t).queryParams.deptName=l)},null,8,["onKeyup","modelValue"])]),_:1}),e(b,{label:"\u72B6\u6001",prop:"status"},{default:n(()=>[e(M,{modelValue:o(t).queryParams.status,"onUpdate:modelValue":r[1]||(r[1]=l=>o(t).queryParams.status=l),placeholder:"\u90E8\u95E8\u72B6\u6001",clearable:"",size:"small"},{default:n(()=>[(s(!0),B($,null,Q(o(t).statusOptions,l=>(s(),_(V,{key:l.dictValue,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:n(()=>[e(c,{type:"primary",size:"mini",onClick:i},{default:n(()=>[e(m,{name:"elementSearch"}),ee]),_:1}),e(c,{size:"mini",onClick:F},{default:n(()=>[e(m,{name:"elementRefresh"}),te]),_:1}),f((s(),_(c,{type:"primary",plain:"",size:"mini",onClick:D},{default:n(()=>[e(m,{name:"elementPlus"}),ae]),_:1})),[[E,"system:dept:add"]])]),_:1})]),_:1},8,["model"]),f((s(),_(A,{data:o(t).tableData,"row-key":"deptId",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:n(()=>[e(p,{prop:"deptName",label:"\u90E8\u95E8\u540D\u79F0",width:"260"}),e(p,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",width:"300"},{default:n(l=>[H("span",null,C(a.dateStrFormat(l.row.createTime)),1)]),_:1}),e(p,{prop:"orderNum",label:"\u6392\u5E8F",width:"200"}),e(p,{prop:"status",label:"\u72B6\u6001",width:"100"},{default:n(l=>[e(q,{type:l.row.status==="1"?"danger":"success","disable-transitions":""},{default:n(()=>[d(C(w(l.row)),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"\u8D1F\u8D23\u4EBA",align:"center",prop:"leader",width:"200"}),e(p,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:n(l=>[f((s(),_(c,{size:"mini",type:"text",onClick:g=>k(l.row)},{default:n(()=>[e(m,{name:"elementEdit"}),le]),_:2},1032,["onClick"])),[[E,"system:dept:edit"]]),f((s(),_(c,{size:"mini",type:"text",onClick:g=>D(l.row)},{default:n(()=>[e(m,{name:"elementPlus"}),ne]),_:2},1032,["onClick"])),[[E,"system:dept:add"]]),l.row.parentId!=0?f((s(),_(c,{key:0,size:"mini",type:"text",onClick:g=>x(l.row)},{default:n(()=>[e(m,{name:"elementDelete"}),ue]),_:2},1032,["onClick"])),[[E,"system:dept:delete"]]):j("",!0)]),_:1})]),_:1},8,["data"])),[[z,o(t).loading]])]),_:1}),e(Y,{ref_key:"editModuleRef",ref:h,title:o(t).title},null,8,["title"])])}}});export{re as default};
