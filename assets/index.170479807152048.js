import{at as f,_ as I,D as L,k as N,m as V,p as T,r as l,U as Q,a as K,h as e,w as u,g as R,I as F,H as B,o as b,au as w,v as D,f as x,i as g,t as E,b as v,x as M}from"./index.1704798071520.js";function O(n){return f({url:"/log/login/list",method:"get",params:n})}function U(n){return f({url:"/log/login/"+n,method:"delete"})}function j(){return f({url:"/log/login/clean",method:"delete"})}const H={name:"Logininfo",setup(){const{proxy:n}=R(),c=L(null),o=N({loading:!0,total:0,tableData:[],ids:[],single:!0,multiple:!0,title:"",statusOptions:[],queryParams:{pageNum:1,pageSize:10,loginLocation:void 0,userName:void 0}}),a=()=>{o.loading=!0,O(o.queryParams).then(t=>{o.tableData=t.rows,o.total=t.total,o.loading=!1})},C=()=>{o.queryParams.loginLocation=void 0,o.queryParams.userName=void 0,a()},y=()=>{F({message:"\u662F\u5426\u786E\u8BA4\u6E05\u7A7A\u6240\u6709\u767B\u5F55\u65E5\u5FD7\u6570\u636E\u9879?",title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return j()}).then(()=>{a(),B.success("\u6E05\u7A7A\u6210\u529F")})},_=t=>{const i=t.infoId||o.ids;F({message:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u8BBF\u95EE\u7F16\u53F7\u4E3A"'+i+'"\u7684\u6570\u636E\u9879?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return U(i).then(()=>{a(),B.success("\u5220\u9664\u6210\u529F")})})},p=t=>{o.queryParams.pageSize=t,a()},d=t=>{o.queryParams.pageNum=t,a()},m=(t,i)=>n.selectDictLabel(o.statusOptions,t.status),h=t=>{o.ids=t.map(i=>i.infoId),o.single=t.length!=1,o.multiple=!t.length};return V(()=>{a(),n.getDicts("sys_common_status").then(t=>{o.statusOptions=t.data})}),{ruleFormRef:c,statusFormat:m,handleSelectionChange:h,handleSizeChange:p,handleCurrentChange:d,resetQuery:C,handleQuery:a,handleClean:y,onTabelRowDel:_,...T(o)}}},G={class:"system-user-container app-container"},J=g(" \u641C\u7D22"),W=g(" \u91CD\u7F6E "),X=g("\u5220\u9664"),Y=g("\u6E05\u7A7A");function Z(n,c,o,a,C,y){const _=l("el-input"),p=l("el-form-item"),d=l("SvgIcon"),m=l("el-button"),h=l("el-form"),t=l("el-col"),i=l("el-row"),r=l("el-table-column"),z=l("el-tag"),A=l("el-table"),S=l("el-divider"),q=l("el-pagination"),k=l("el-card"),P=Q("loading");return b(),K("div",G,[e(k,{shadow:"always"},{default:u(()=>[e(h,{model:n.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:u(()=>[e(p,{label:"\u767B\u5F55\u5730\u70B9",prop:"loginLocation"},{default:u(()=>[e(_,{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5730\u70B9\u6A21\u7CCA\u67E5\u8BE2",clearable:"",size:"small",onKeyup:w(a.handleQuery,["enter"]),style:{width:"240px"},modelValue:n.queryParams.loginLocation,"onUpdate:modelValue":c[0]||(c[0]=s=>n.queryParams.loginLocation=s)},null,8,["onKeyup","modelValue"])]),_:1}),e(p,{label:"\u7528\u6237\u540D\u79F0",prop:"userName"},{default:u(()=>[e(_,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0\u6A21\u7CCA\u67E5\u8BE2",clearable:"",size:"small",onKeyup:w(a.handleQuery,["enter"]),style:{width:"240px"},modelValue:n.queryParams.username,"onUpdate:modelValue":c[1]||(c[1]=s=>n.queryParams.username=s)},null,8,["onKeyup","modelValue"])]),_:1}),e(p,null,{default:u(()=>[e(m,{type:"primary",size:"mini",onClick:a.handleQuery},{default:u(()=>[e(d,{name:"elementSearch"}),J]),_:1},8,["onClick"]),e(m,{size:"mini",onClick:a.resetQuery},{default:u(()=>[e(d,{name:"elementRefresh"}),W]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),e(i,{gutter:10,class:"mb8"},{default:u(()=>[e(t,{span:1.5},{default:u(()=>[e(m,{type:"danger",plain:"",size:"mini",disabled:n.multiple,onClick:a.onTabelRowDel},{default:u(()=>[e(d,{name:"elementDelete"}),X]),_:1},8,["disabled","onClick"])]),_:1},8,["span"]),e(t,{span:1.5},{default:u(()=>[e(m,{type:"danger",plain:"",size:"mini",onClick:a.handleClean},{default:u(()=>[e(d,{name:"elementDelete"}),Y]),_:1},8,["onClick"])]),_:1},8,["span"])]),_:1}),D((b(),x(A,{data:n.tableData,onSelectionChange:a.handleSelectionChange},{default:u(()=>[e(r,{type:"selection",width:"55",align:"center"}),e(r,{label:"\u8BBF\u95EE\u7F16\u53F7",align:"center",prop:"infoId"}),e(r,{label:"\u7528\u6237\u540D\u79F0",align:"center",prop:"userName"}),e(r,{label:"\u767B\u5F55\u5730\u5740",align:"center",prop:"ipaddr",width:"130","show-overflow-tooltip":!0}),e(r,{label:"\u767B\u5F55\u5730\u70B9",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),e(r,{label:"\u6D4F\u89C8\u5668",align:"center",prop:"browser"}),e(r,{label:"\u64CD\u4F5C\u7CFB\u7EDF",align:"center",prop:"os"}),e(r,{label:"\u767B\u5F55\u72B6\u6001",align:"center",prop:"status"},{default:u(s=>[e(z,{type:s.row.status==="1"?"danger":"success","disable-transitions":""},{default:u(()=>[g(E(a.statusFormat(s.row)),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"\u64CD\u4F5C\u4FE1\u606F",align:"center",prop:"msg"}),e(r,{label:"\u767B\u5F55\u65E5\u671F",align:"center"},{default:u(s=>[v("span",null,E(n.dateStrFormat(s.row.createTime)),1)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[P,n.loading]]),D(v("div",null,[e(S),e(q,{background:"",total:n.total,"current-page":n.queryParams.pageNum,"page-sizes":[10,20,30,40],"page-size":n.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:a.handleSizeChange,onCurrentChange:a.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[M,n.total>0]])]),_:1})])}const ee=I(H,[["render",Z]]);export{ee as default};
