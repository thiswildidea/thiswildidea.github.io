// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./focalStatUtils ./StatisticsFunctionArguments".split(" "),function(e,f,c,r,t,h,k,l,m,n){const p=new Set("min max mean median majority minority".split(" "));c=class extends l{constructor(){super(...arguments);this.functionName="Statistics";
this.rasterArgumentNames=["raster"]}_bindSourceRasters(){const {type:b}=this.functionArguments.toJSON();if(1>b||7<b)return{success:!1,supportsGPU:!1,error:`statistics-function: the given statistics type is not supported ${b}`};var a=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType(a.pixelType);a=a.clone();a.pixelType=this.outputPixelType;const {statisticsType:d}=this.functionArguments;p.has(d)||(a.statistics=null,a.histograms=null,a.colormap=null,a.attributeTable=null);this.rasterInfo=
a;return{success:!0,supportsGPU:3>=a.bandCount&&5>b}}_processPixels(b){b=b.pixelBlocks?.[0];if(null==b)return b;const {statisticsType:a,rows:d,cols:g,fillNoDataOnly:q}=this.functionArguments;return m.computeFocalStatistics(b,{kernelRows:d,kernelCols:g,fillNoDataOnly:q,outputPixelType:this.outputPixelType,statisticsType:a,mirrorEdges:!0})}_getWebGLParameters(){const {rows:b,cols:a,statisticsType:d,fillNoDataOnly:g}=this.functionArguments;return{fillNoDataOnly:g,kernelRows:b,kernelCols:a,statisticsType:d,
clampRange:k.getPixelValueRange(this.outputPixelType)}}};e.__decorate([f.property({json:{write:!0,name:"rasterFunction"}})],c.prototype,"functionName",void 0);e.__decorate([f.property({type:n,json:{write:!0,name:"rasterFunctionArguments"}})],c.prototype,"functionArguments",void 0);e.__decorate([f.property()],c.prototype,"rasterArgumentNames",void 0);return c=e.__decorate([h.subclass("esri.layers.support.rasterFunctions.StatisticsFunction")],c)});