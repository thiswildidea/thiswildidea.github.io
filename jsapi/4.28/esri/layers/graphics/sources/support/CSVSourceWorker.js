// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/date":function(){define(["exports"],function(c){function e(g){const w=new Date(g);if(Number.isNaN(w.getTime()))g=!1;else{var f=!0;if(p&&/\d+\W*$/.test(g)&&(g=g.match(/[a-zA-Z]{2,}/))){f=!1;let r=0;for(;!f&&r<=g.length;)f=!M.test(g[r]),r++;f=!f}g=f}return g?Number.isNaN(w.getTime())?null:w.getTime()-6E4*w.getTimezoneOffset():null}function A(g){g=y.exec(g);if(!g?.groups)return null;g=g.groups;const w=+g.year,f=+g.month-1,r=+g.day,q=+(g.hours??0),F=+(g.minutes??0),E=+(g.seconds??
0);if(23<q||59<F||59<E)return null;var t=g.ms??"0";t=t?+t.padEnd(3,"0").substring(0,3):0;g=g.isUTC||!g.offsetSign?Date.UTC(w,f,r,q,F,E,t):6E4*("+"===g.offsetSign?-1:1)*(60*+g.offsetHours+ +g.offsetMinutes)+Date.UTC(w,f,r,q,F,E,t);return Number.isNaN(g)?null:g}const y=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,M=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
p=!Number.isNaN((new Date("technology 10")).getTime());c.isDateString=function(g){return null!=A(g)||null!=e(g)};c.isISO8601Date=function(g){return y.test(g)};c.parseDate=function(g){return A(g)??e(g)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(c){class e{constructor(g,w,f){this.x=g;this.y=w;this.spatialReference=f;this.m=this.z=void 0}}class A{constructor(g,w,f,r){this.rings=g;this.spatialReference=
w;this.hasM=this.hasZ=void 0;f&&(this.hasZ=f);r&&(this.hasM=r)}}class y{constructor(g,w,f,r){this.paths=g;this.spatialReference=w;this.hasM=this.hasZ=void 0;f&&(this.hasZ=f);r&&(this.hasM=r)}}class M{constructor(g,w,f,r){this.points=g;this.spatialReference=w;this.hasM=this.hasZ=void 0;f&&(this.hasZ=f);r&&(this.hasM=r)}}class p{constructor(g,w,f,r,q){this.xmin=g;this.ymin=w;this.xmax=f;this.ymax=r;this.spatialReference=q;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}c.jsonAdapter={convertToGEGeometry:function(g,
w){return null==w?null:g.convertJSONToGeometry(w)},exportPoint:function(g,w,f){f=new e(g.getPointX(w),g.getPointY(w),f);const r=g.hasZ(w),q=g.hasM(w);r&&(f.z=g.getPointZ(w));q&&(f.m=g.getPointM(w));return f},exportPolygon:function(g,w,f){return new A(g.exportPaths(w),f,g.hasZ(w),g.hasM(w))},exportPolyline:function(g,w,f){return new y(g.exportPaths(w),f,g.hasZ(w),g.hasM(w))},exportMultipoint:function(g,w,f){return new M(g.exportPoints(w),f,g.hasZ(w),g.hasM(w))},exportExtent:function(g,w,f){var r=g.hasZ(w);
const q=g.hasM(w);f=new p(g.getXMin(w),g.getYMin(w),g.getXMax(w),g.getYMax(w),f);r&&(r=g.getZExtent(w),f.zmin=r.vmin,f.zmax=r.vmax);q&&(g=g.getMExtent(w),f.mmin=g.vmin,f.mmax=g.vmax);return f}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports"],function(c){class e{constructor(y=null,M={},p,g){this.geometry=y;this.attributes=M;this.centroid=p;this.objectId=g;this.geohashY=this.geohashX=this.displayId=0}weakClone(){const y=
new e(this.geometry,this.attributes,this.centroid,this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y}}class A extends e{}c.OptimizedFeature=e;c.OptimizedFeatureWithGeometry=A;c.hasGeometry=function(y){return!!y.geometry?.coords?.length};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class c{constructor(e=[],A=[],y=!1){this.lengths=e??[];this.coords=A??[];this.hasIndeterminateRingOrder=
y}static fromRect(e){const [A,y,M,p]=e;e=M-A;const g=p-y;return new c([5],[A,y,e,0,0,g,-e,0,0,-g])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,A)=>e+A)}forEachVertex(e){let A=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let y=0;y<this.lengths.length;y++){const M=this.lengths[y];for(let p=0;p<M;p++)e(this.coords[2*(p+A)],this.coords[2*(p+A)+1]);A+=M}}clone(e){return e?(e.set(this.coords),new c(this.lengths.slice(),
e,this.hasIndeterminateRingOrder)):new c(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}return c})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),function(c,e,A,y,M,p,g,w,f,r){const q=M.create();
class F{constructor(E){this.geometryInfo=E;this._boundsStore=new w.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new A;this.featureAdapter=r.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let E=0;this._featuresById.forEach(t=>
{null!=t.geometry&&t.geometry.coords&&(E+=t.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:E/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(E){if(null==this.fullBounds)return null;const [t,n,a,v]=this.fullBounds;return{xmin:t,ymin:n,xmax:a,ymax:v,spatialReference:f.cleanFromGeometryEngine(E)}}add(E){this._add(E);this._emitChanged()}addMany(E){for(const t of E)this._add(t);this._emitChanged()}upsertMany(E){E=E.map(t=>this._upsert(t));this._emitChanged();return E.filter(c.isSome)}clear(){this._featuresById.clear();
this._boundsStore.clear();this._emitChanged()}removeById(E){E=this._featuresById.get(E);if(!E)return null;this._remove(E);this._emitChanged();return E}removeManyById(E){this._boundsStore.invalidateIndex();for(const t of E)(E=this._featuresById.get(t))&&this._remove(E);this._emitChanged()}forEachBounds(E,t){for(const n of E)(E=this._boundsStore.get(n.objectId))&&t(M.fromRect(q,E))}getFeature(E){return this._featuresById.get(E)}has(E){return this._featuresById.has(E)}forEach(E){this._featuresById.forEach(t=>
E(t))}forEachInBounds(E,t){this._boundsStore.forEachInBounds(E,n=>{t(this._featuresById.get(n))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex();this._markedIds.clear()}sweep(){let E=!1;this._featuresById.forEach((t,n)=>{this._markedIds.has(n)||(E=!0,this._remove(t))});this._markedIds.clear();E&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(E){if(E){var t=E.objectId;if(null==t)y.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature",
"feature id is missing",{feature:E}));else{var n=this._featuresById.get(t);this._markedIds.add(t);if(n){E.displayId=n.displayId;var a=this._boundsStore.get(t);this._boundsStore.delete(t)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(E);E.geometry?.coords?.length?(a=g.getBoundsOptimizedGeometry(null!=a?a:p.create(),E.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=a&&this._boundsStore.set(t,a)):this._boundsStore.set(t,null);this._featuresById.set(t,E)}}}_upsert(E){const t=E?.objectId;
if(null==t)return y.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature","feature id is missing",{feature:E})),null;const n=this._featuresById.get(t);if(!n)return this._add(E),E;this._markedIds.add(t);const {geometry:a,attributes:v}=E;for(const x in v)n.attributes[x]=v[x];a&&(n.geometry=a,this._boundsStore.set(t,g.getBoundsOptimizedGeometry(p.create(),a,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return n}_remove(E){if(null!=this.onFeatureRemove)this.onFeatureRemove(E);
const t=E.objectId;this._markedIds.delete(t);this._boundsStore.delete(t);this._featuresById.delete(t);return E}}return F})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],function(c,e,A){function y(n=E){return[n[0],n[1],n[2],n[3],n[4],n[5]]}function M(n,a,v,x,D,N,d=y()){d[0]=n;d[1]=a;d[2]=v;d[3]=x;d[4]=D;d[5]=N;return d}function p(n){return n[0]>=n[3]?0:n[3]-n[0]}function g(n){return n[1]>=n[4]?0:n[4]-n[1]}function w(n){return n[2]>=n[5]?0:n[5]-
n[2]}function f(n,a){return Math.max(a[0],n[0])<=Math.min(a[3],n[3])&&Math.max(a[1],n[1])<=Math.min(a[4],n[4])&&Math.max(a[2],n[2])<=Math.min(a[5],n[5])}function r(n,a){n[0]=a[0];n[1]=a[1];n[2]=a[2];n[3]=a[3];n[4]=a[4];n[5]=a[5];return n}function q(n){return 6===n.length}const F=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],E=[0,0,0,0,0,0],t=y();c.allFinite=function(n){for(let a=0;6>a;a++)if(!isFinite(n[a]))return!1;return!0};c.center=function(n,a=[0,0,0]){a[0]=n[0]+p(n)/2;a[1]=n[1]+
g(n)/2;a[2]=n[2]+w(n)/2;return a};c.contains=function(n,a){return a[0]>=n[0]&&a[1]>=n[1]&&a[2]>=n[2]&&a[3]<=n[3]&&a[4]<=n[4]&&a[5]<=n[5]};c.containsPoint=function(n,a){return a[0]>=n[0]&&a[1]>=n[1]&&a[2]>=n[2]&&a[0]<=n[3]&&a[1]<=n[4]&&a[2]<=n[5]};c.containsPointWithMargin=function(n,a,v){return a[0]>=n[0]-v&&a[1]>=n[1]-v&&a[2]>=n[2]-v&&a[0]<=n[3]+v&&a[1]<=n[4]+v&&a[2]<=n[5]+v};c.create=y;c.depth=g;c.diameter=function(n){const a=p(n),v=w(n);n=g(n);return Math.sqrt(a*a+v*v+n*n)};c.empty=function(n){return n?
r(n,F):y(F)};c.equals=function(n,a,v){if(null==n||null==a)return n===a;if(!q(n)||!q(a))return!1;if(v)for(let x=0;x<n.length;x++){if(!v(n[x],a[x]))return!1}else for(v=0;v<n.length;v++)if(n[v]!==a[v])return!1;return!0};c.expandWithAABB=function(n,a){n[0]=Math.min(n[0],a[0]);n[1]=Math.min(n[1],a[1]);n[2]=Math.min(n[2],a[2]);n[3]=Math.max(n[3],a[3]);n[4]=Math.max(n[4],a[4]);n[5]=Math.max(n[5],a[5])};c.expandWithBuffer=function(n,a,v=0,x=a.length/3){let D=n[0],N=n[1],d=n[2],H=n[3],S=n[4],J=n[5];for(let R=
0;R<x;R++)D=Math.min(D,a[v+3*R]),N=Math.min(N,a[v+3*R+1]),d=Math.min(d,a[v+3*R+2]),H=Math.max(H,a[v+3*R]),S=Math.max(S,a[v+3*R+1]),J=Math.max(J,a[v+3*R+2]);n[0]=D;n[1]=N;n[2]=d;n[3]=H;n[4]=S;n[5]=J};c.expandWithNestedArray=function(n,a,v){const x=a.length;let D=n[0],N=n[1],d=n[2],H=n[3],S=n[4],J=n[5];if(v)for(v=0;v<x;v++){var R=a[v];D=Math.min(D,R[0]);N=Math.min(N,R[1]);d=Math.min(d,R[2]);H=Math.max(H,R[0]);S=Math.max(S,R[1]);J=Math.max(J,R[2])}else for(v=0;v<x;v++)R=a[v],D=Math.min(D,R[0]),N=Math.min(N,
R[1]),H=Math.max(H,R[0]),S=Math.max(S,R[1]);n[0]=D;n[1]=N;n[2]=d;n[3]=H;n[4]=S;n[5]=J};c.expandWithOffset=function(n,a,v,x){n[0]=Math.min(n[0],n[0]+a);n[3]=Math.max(n[3],n[3]+a);n[1]=Math.min(n[1],n[1]+v);n[4]=Math.max(n[4],n[4]+v);n[2]=Math.min(n[2],n[2]+x);n[5]=Math.max(n[5],n[5]+x)};c.expandWithRect=function(n,a){n[0]=Math.min(n[0],a[0]);n[1]=Math.min(n[1],a[1]);n[3]=Math.max(n[3],a[2]);n[4]=Math.max(n[4],a[3])};c.expandWithVec3=function(n,a){n[0]=Math.min(n[0],a[0]);n[1]=Math.min(n[1],a[1]);n[2]=
Math.min(n[2],a[2]);n[3]=Math.max(n[3],a[0]);n[4]=Math.max(n[4],a[1]);n[5]=Math.max(n[5],a[2])};c.fromExtent=function(n,a=y()){a[0]=n.xmin;a[1]=n.ymin;a[2]=n.hasZ?n.zmin:-Infinity;a[3]=n.xmax;a[4]=n.ymax;a[5]=n.hasZ?n.zmax:Infinity;return a};c.fromMinMax=function(n,a,v=y()){v[0]=n[0];v[1]=n[1];v[2]=n[2];v[3]=a[0];v[4]=a[1];v[5]=a[2];return v};c.fromRect=function(n,a){n[0]=a[0];n[1]=a[1];n[2]=Number.NEGATIVE_INFINITY;n[3]=a[2];n[4]=a[3];n[5]=Number.POSITIVE_INFINITY;return n};c.fromRectValues=function(n,
a,v,x,D){n[0]=a;n[1]=v;n[2]=Number.NEGATIVE_INFINITY;n[3]=x;n[4]=D;n[5]=Number.POSITIVE_INFINITY;return n};c.fromValues=M;c.getMax=function(n,a){a[0]=n[3];a[1]=n[4];a[2]=n[5];return a};c.getMin=function(n,a){a[0]=n[0];a[1]=n[1];a[2]=n[2];return a};c.height=w;c.intersects=f;c.intersectsClippingArea=function(n,a){return null==a?!0:f(n,a)};c.is=q;c.isPoint=function(n){return 0===p(n)&&0===g(n)&&0===w(n)};c.maximumDimension=function(n){return Math.max(p(n),w(n),g(n))};c.negativeInfinity=F;c.offset=function(n,
a,v,x,D=n){D[0]=n[0]+a;D[1]=n[1]+v;D[2]=n[2]+x;D[3]=n[3]+a;D[4]=n[4]+v;D[5]=n[5]+x;return D};c.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];c.scale=function(n,a,v=n){const x=n[0]+p(n)/2,D=n[1]+g(n)/2,N=n[2]+w(n)/2;v[0]=x+(n[0]-x)*a;v[1]=D+(n[1]-D)*a;v[2]=N+(n[2]-N)*a;v[3]=x+(n[3]-x)*a;v[4]=D+(n[4]-D)*a;v[5]=N+(n[5]-N)*a;return v};c.set=r;c.setMax=function(n,a,v=n){v[3]=a[0];v[4]=a[1];v[5]=a[2];v!==n&&(v[0]=n[0],v[1]=n[1],v[2]=n[2]);return n};c.setMin=function(n,a,v=
n){v[0]=a[0];v[1]=a[1];v[2]=a[2];v!==n&&(v[3]=n[3],v[4]=n[4],v[5]=n[5]);return v};c.size=function(n,a=[0,0,0]){a[0]=p(n);a[1]=g(n);a[2]=w(n);return a};c.toExtent=function(n,a){return isFinite(n[2])||isFinite(n[5])?new e({xmin:n[0],xmax:n[3],ymin:n[1],ymax:n[4],zmin:n[2],zmax:n[5],spatialReference:a}):new e({xmin:n[0],xmax:n[3],ymin:n[1],ymax:n[4],spatialReference:a})};c.toRect=function(n,a){a||(a=A.create());a[0]=n[0];a[1]=n[1];a[2]=n[3];a[3]=n[4];return a};c.width=p;c.wrap=function(n,a,v,x,D,N){return M(n,
a,v,x,D,N,t)};c.zero=E;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(c,e,A,y,M,p,g,w,f,r){function q(z,G){return z?G?4:3:G?3:2}function F(z,G,L,W){if(z){if(L)return G&&
W?C:Va;if(G&&W)return h}else if(G&&W)return Va;return Sa}function E({scale:z,translate:G},L){return Math.round((L-G[0])/z[0])}function t({scale:z,translate:G},L){return Math.round((G[1]-L)/z[1])}function n({scale:z,translate:G},L,W){return L*z[W]+G[W]}function a(z){z=z.coords;return{x:z[0],y:z[1]}}function v(z,G){z.coords[0]=G.x;z.coords[1]=G.y;return z}function x(z){z=z.coords;return{x:z[0],y:z[1],z:z[2]}}function D(z,G){z.coords[0]=G.x;z.coords[1]=G.y;z.coords[2]=G.z;return z}function N(z){z=z.coords;
return{x:z[0],y:z[1],m:z[2]}}function d(z,G){z.coords[0]=G.x;z.coords[1]=G.y;z.coords[2]=G.m;return z}function H(z){z=z.coords;return{x:z[0],y:z[1],z:z[2],m:z[3]}}function S(z,G){z.coords[0]=G.x;z.coords[1]=G.y;z.coords[2]=G.z;z.coords[3]=G.m;return z}function J(z,G){return z&&G?S:z?D:G?d:v}function R(z,G,L,W,Z){L=J(L,W);for(const {geometry:ba,attributes:da}of G)G=null!=ba?L(new r,ba):null,z.push(new w.OptimizedFeature(G,da,null,Z?da[Z]:void 0));return z}function O(z,G,L,W){for(const {geometry:Z,
attributes:ba}of G)z.push({attributes:ba,geometry:null!=Z?V(Z,L,W):null});return z}function V(z,G,L){if(null==z)return null;const W=q(G,L),Z=[];for(let ba=0;ba<z.coords.length;ba+=W){const da=[];for(let ia=0;ia<W;ia++)da.push(z.coords[ba+ia]);Z.push(da)}return G?L?{points:Z,hasZ:G,hasM:L}:{points:Z,hasZ:G}:L?{points:Z,hasM:L}:{points:Z}}function m(z,G,L,W,Z){L=q(L,W);for(const {geometry:ba,attributes:da}of G)G=null!=ba?Q(new r,ba,L):null,z.push(new w.OptimizedFeature(G,da,null,Z?da[Z]:void 0));return z}
function Q(z,G,L=q(G.hasZ,G.hasM)){z.lengths[0]=G.points.length;const W=z.coords;let Z=0;for(const ba of G.points)for(G=0;G<L;G++)W[Z++]=ba[G];return z}function k(z,G,L){if(!z)return null;const W=q(G,L),{coords:Z,lengths:ba}=z;z=[];let da=0;for(const ia of ba){const ka=[];for(let sa=0;sa<ia;sa++){const oa=[];for(let ra=0;ra<W;ra++)oa.push(Z[da++]);ka.push(oa)}z.push(ka)}return G?L?{paths:z,hasZ:G,hasM:L}:{paths:z,hasZ:G}:L?{paths:z,hasM:L}:{paths:z}}function u(z,G,L,W,Z){L=q(L,W);for(const {geometry:ba,
attributes:da}of G)G=null!=ba?K(new r,ba,L):null,z.push(new w.OptimizedFeature(G,da,null,Z?da[Z]:void 0));return z}function K(z,G,L=q(G.hasZ,G.hasM)){const {lengths:W,coords:Z}=z;let ba=0;for(const da of G.paths){for(const ia of da)for(G=0;G<L;G++)Z[ba++]=ia[G];W.push(da.length)}return z}function I(z,G,L){if(!z)return null;const W=q(G,L),{coords:Z,lengths:ba}=z;z=[];let da=0;for(const ia of ba){const ka=[];for(let sa=0;sa<ia;sa++){const oa=[];for(let ra=0;ra<W;ra++)oa.push(Z[da++]);ka.push(oa)}z.push(ka)}return G?
L?{rings:z,hasZ:G,hasM:L}:{rings:z,hasZ:G}:L?{rings:z,hasM:L}:{rings:z}}function T(z,G,L,W,Z){for(const {geometry:ba,centroid:da,attributes:ia}of G){G=null!=ba?Y(new r,ba,L,W):null;const ka=Z?ia[Z]:void 0;null!=da?z.push(new w.OptimizedFeature(G,ia,v(new r,da),ka)):z.push(new w.OptimizedFeature(G,ia,null,ka))}return z}function Y(z,G,L=G.hasZ,W=G.hasM){return ea(z,G.rings,L,W)}function ea(z,G,L,W){L=q(L,W);const {lengths:Z,coords:ba}=z;W=0;Da(z);for(const da of G){for(const ia of da)for(G=0;G<L;G++)ba[W++]=
ia[G];Z.push(da.length)}return z}function la(z,G,L,W,Z,ba){Ia(z);if(!L){for(const da of G)z.push(new w.OptimizedFeature(null,da.attributes,null,ba?da.attributes[ba]:void 0));return z}switch(L){case "esriGeometryPoint":return R(z,G,W,Z,ba);case "esriGeometryMultipoint":return m(z,G,W,Z,ba);case "esriGeometryPolyline":return u(z,G,W,Z,ba);case "esriGeometryPolygon":return T(z,G,W,Z,ba);default:Pa.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${L}'`)),Ia(z)}return z}
function na(z,G,L,W){z=z&&("coords"in z?z:z.geometry);if(null==z)return null;switch(G){case "esriGeometryPoint":return G=a,L&&W?G=H:L?G=x:W&&(G=N),G(z);case "esriGeometryMultipoint":return V(z,L,W);case "esriGeometryPolyline":return k(z,L,W);case "esriGeometryPolygon":return I(z,L,W);default:return Pa.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${G}'`)),null}}function ua(z,G,L,W,Z){Ia(z);if(null==L){for(const da of G)z.push({attributes:da.attributes});
return z}switch(L){case "esriGeometryPoint":L=a;W&&Z?L=H:W?L=x:Z&&(L=N);for(var ba of G){const {geometry:da,attributes:ia}=ba;W=null!=da?L(da):null;z.push({attributes:ia,geometry:W})}break;case "esriGeometryMultipoint":return O(z,G,W,Z);case "esriGeometryPolyline":for(const {geometry:da,attributes:ia}of G)z.push({attributes:ia,geometry:null!=da?k(da,W,Z):null});break;case "esriGeometryPolygon":for(const {geometry:da,attributes:ia,centroid:ka}of G)ba=null!=da?I(da,W,Z):null,null!=ka?(G=a(ka),z.push({attributes:ia,
centroid:G,geometry:ba})):z.push({attributes:ia,geometry:ba});break;default:Pa.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${L}'`))}return z}function ta(z,G,L,W,Z,ba,da=L,ia=W){Da(z);if(!G?.coords.length)return null;Z=Na[Z];const {coords:ka,lengths:sa}=G;G=q(L,W);const oa=q(L&&da,W&&ia);L=F(L,W,da,ia);if(!sa.length)return L(z.coords,ka,0,0,E(ba,ka[0]),t(ba,ka[1])),Da(z,G,0),z;let ra,Ca=0,xa,Ba=0;for(const Aa of sa){if(Aa<Z)continue;let ya=0;xa=Ba;ia=
W=E(ba,ka[Ca]);ra=da=t(ba,ka[Ca+1]);L(z.coords,ka,xa,Ca,ia,ra);ya++;Ca+=G;xa+=oa;for(let Ha=1;Ha<Aa;Ha++,Ca+=G)if(ia=E(ba,ka[Ca]),ra=t(ba,ka[Ca+1]),ia!==W||ra!==da)L(z.coords,ka,xa,Ca,ia-W,ra-da),xa+=oa,ya++,W=ia,da=ra;ya>=Z&&(z.lengths.push(ya),Ba=xa)}Ia(z.coords,Ba);return z.coords.length?z:null}function pa(z,G,L,W,Z,ba,da){let ia=W,ka=0;for(let oa=ba+L;oa<da;oa+=L){var sa=G[oa];const ra=G[oa+1],Ca=G[da],xa=G[da+1];let Ba=G[ba],Aa=G[ba+1],ya=Ca-Ba,Ha=xa-Aa;if(0!==ya||0!==Ha){const Qa=((sa-Ba)*ya+
(ra-Aa)*Ha)/(ya*ya+Ha*Ha);1<Qa?(Ba=Ca,Aa=xa):0<Qa&&(Ba+=ya*Qa,Aa+=Ha*Qa)}ya=sa-Ba;Ha=ra-Aa;sa=ya*ya+Ha*Ha;sa>ia&&(ka=oa,ia=sa)}ia>W&&(ka-ba>L&&pa(z,G,L,W,Z,ba,ka),Z(z,G,z.length,ka,G[ka],G[ka+1]),da-ka>L&&pa(z,G,L,W,Z,ka,da))}function va(z,G,L,W,Z){const {coords:ba,lengths:da}=G;L=q(L,W);if(!ba.length)return z!==G&&Da(z),z;y.assertIsSome(Z);const {originPosition:ia,scale:ka,translate:sa}=Z;Z=ha;Z.originPosition=ia;W=Z.scale;W[0]=ka[0]??1;W[1]=-(ka[1]??1);W[2]=ka[2]??1;W[3]=ka[3]??1;var oa=Z.translate;
oa[0]=sa[0]??0;oa[1]=sa[1]??0;oa[2]=sa[2]??0;oa[3]=sa[3]??0;if(!da.length){for(W=0;W<L;++W)z.coords[W]=n(Z,ba[W],W);z!==G&&Da(z,L,0);return z}oa=0;for(let Ca=0;Ca<da.length;Ca++){const xa=da[Ca];z.lengths[Ca]=xa;for(var ra=0;ra<L;++ra)z.coords[oa+ra]=n(Z,ba[oa+ra],ra);ra=z.coords[oa];let Ba=z.coords[oa+1];oa+=L;for(let Aa=1;Aa<xa;Aa++,oa+=L){ra+=ba[oa]*W[0];Ba+=ba[oa+1]*W[1];z.coords[oa]=ra;z.coords[oa+1]=Ba;for(let ya=2;ya<L;++ya)z.coords[oa+ya]=n(Z,ba[oa+ya],ya)}}z!==G&&Da(z,ba.length,da.length);
return z}function wa(z,G,L,W){let Z=0,ba=z[W*G],da=z[W*(G+1)];for(let ia=1;ia<L;ia++){const ka=ba+z[W*(G+ia)],sa=da+z[W*(G+ia)+1],oa=(ka-ba)*(sa+da);ba=ka;da=sa;Z+=oa}return.5*Z}function Da(z,G=0,L=0){Ia(z.lengths,L);Ia(z.coords,G)}function Ia(z,G=0){z.length!==G&&(z.length=G)}const Pa=A.getLogger("esri.layers.graphics.featureConversionUtils"),Na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},Sa=(z,G,L,W,Z,ba)=>{z[L]=Z;z[L+1]=ba},
Va=(z,G,L,W,Z,ba)=>{z[L]=Z;z[L+1]=ba;z[L+2]=G[W+2]},h=(z,G,L,W,Z,ba)=>{z[L]=Z;z[L+1]=ba;z[L+2]=G[W+3]},C=(z,G,L,W,Z,ba)=>{z[L]=Z;z[L+1]=ba;z[L+2]=G[W+2];z[L+3]=G[W+3]},X=[],aa=[],ha={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};c.convertFromFeature=function(z,G,L,W,Z){X[0]=z;[z]=la(aa,X,G,L,W,Z);Ia(X);Ia(aa);return z};c.convertFromFeatureSet=function(z,G){const L=new f,{hasM:W,hasZ:Z,features:ba,objectIdFieldName:da,spatialReference:ia,geometryType:ka,exceededTransferLimit:sa,transform:oa,
fields:ra}=z;ra&&(L.fields=ra);L.geometryType=ka??null;L.objectIdFieldName=da??G??null;L.spatialReference=ia??null;if(!L.objectIdFieldName)return Pa.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),L;ba&&la(L.features,ba,ka,Z,W,L.objectIdFieldName);sa&&(L.exceededTransferLimit=sa);W&&(L.hasM=W);Z&&(L.hasZ=Z);oa&&(L.transform=oa);return L};c.convertFromFeatures=la;c.convertFromGeometry=function(z,G,L){if(null==z)return null;const W=new r;"hasZ"in z&&null==
G&&(G=z.hasZ);"hasM"in z&&null==L&&(L=z.hasM);if(g.isPoint(z))return J(null!=G?G:null!=z.z,null!=L?L:null!=z.m)(W,z);if(g.isPolygon(z))return Y(W,z,G,L);if(g.isPolyline(z))return K(W,z,q(G,L));if(g.isMultipoint(z))return Q(W,z,q(G,L));Pa.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${z}'`))};c.convertFromGraphics=function(z,G,L,W,Z,ba){const da=z.length;switch(L){case "esriGeometryPoint":R(z,G,W,Z,ba);break;case "esriGeometryMultipoint":m(z,G,W,Z,ba);
break;case "esriGeometryPolyline":u(z,G,W,Z,ba);break;case "esriGeometryPolygon":T(z,G,W,Z,ba);break;default:Pa.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${L}'`))}for(W=0;W<G.length;W++)z[W+da].geometryType=L,z[W+da].insertAfter=G[W].insertAfter,z[W+da].groupId=G[W].groupId;return z};c.convertFromMultipoint=Q;c.convertFromMultipointFeatures=m;c.convertFromNestedArray=ea;c.convertFromPoint=function(z,G,L=J(null!=G.z,null!=G.m)){return L(z,G)};c.convertFromPointFeatures=
R;c.convertFromPolygon=Y;c.convertFromPolyline=K;c.convertFromPolylineFeatures=u;c.convertToFeature=function(z,G,L,W){aa[0]=z;ua(X,aa,G,L,W);z=X[0];Ia(X);Ia(aa);return z};c.convertToFeatureSet=function(z){const {objectIdFieldName:G,spatialReference:L,transform:W,fields:Z,hasM:ba,hasZ:da,features:ia,geometryType:ka,exceededTransferLimit:sa,uniqueIdField:oa,queryGeometry:ra,queryGeometryType:Ca}=z;z=ua([],ia,ka,da,ba);const xa=na(ra,Ca,!1,!1);z={features:z,fields:Z,geometryType:ka,objectIdFieldName:G,
spatialReference:L,uniqueIdField:oa,queryGeometry:xa};W&&(z.transform=W);sa&&(z.exceededTransferLimit=sa);ba&&(z.hasM=ba);da&&(z.hasZ=da);return z};c.convertToFeatures=ua;c.convertToGeometry=na;c.convertToMultipoint=V;c.convertToMultipointFeatures=O;c.convertToPoint=function(z,G,L){return z?G?L?H(z):x(z):L?N(z):a(z):null};c.convertToPolygon=I;c.convertToPolyline=k;c.deltaDecodeGeometry=function(z,G){if(null==z)return null;const L=z.clone(),W=z.coords;z=z.lengths;let Z=0;for(let ia=0;ia<z.length;ia++){const ka=
z[ia];var ba=W[G*Z],da=W[G*Z+1];for(let sa=1;sa<ka;sa++)ba+=W[G*(Z+sa)],da+=W[G*(Z+sa)+1],L.coords[G*(Z+sa)]=ba,L.coords[G*(Z+sa)+1]=da;Z+=ka}return L};c.deltaEncodeGeometry=function(z,G){const L=z.clone(),W=z.coords;z=z.lengths;let Z=0;for(let da=0;da<z.length;da++){const ia=z[da];let ka=W[G*Z];var ba=W[G*Z+1];for(let sa=1;sa<ia;sa++){const oa=W[G*(Z+sa)],ra=W[G*(Z+sa)+1];ba=ra-ba;L.coords[G*(Z+sa)]=oa-ka;L.coords[G*(Z+sa)+1]=ba;ka=oa;ba=ra}Z+=ia}return L};c.generalizeOptimizedGeometry=function(z,
G,L,W,Z,ba,da=L,ia=W){Da(z);if(!G?.coords.length)return null;Z=Na[Z];const {coords:ka,lengths:sa}=G;G=q(L,W);const oa=q(L&&da,W&&ia);L=F(L,W,da,ia);if(!sa.length)return L(z.coords,ka,0,0,ka[0],ka[1]),Da(z,G,0),z;W=0;ba*=ba;for(const ra of sa){if(ra<Z){W+=ra*G;continue}da=z.coords.length/oa;ia=W;const Ca=W+(ra-1)*G;L(z.coords,ka,z.coords.length,ia,ka[ia],ka[ia+1]);pa(z.coords,ka,G,ba,L,ia,Ca);L(z.coords,ka,z.coords.length,Ca,ka[Ca],ka[Ca+1]);ia=z.coords.length/oa-da;ia>=Z?z.lengths.push(ia):Ia(z.coords,
da*oa);W+=ra*G}return z.coords.length?z:null};c.getBoundsOptimizedGeometry=function(z,G,L,W){if(!G?.coords?.length)return null;L=q(L,W);let Z=W=Number.POSITIVE_INFINITY,ba=Number.NEGATIVE_INFINITY,da=Number.NEGATIVE_INFINITY;if(G&&G.coords){G=G.coords;for(let ia=0;ia<G.length;ia+=L){const ka=G[ia],sa=G[ia+1];W=Math.min(W,ka);ba=Math.max(ba,ka);Z=Math.min(Z,sa);da=Math.max(da,sa)}}M.is(z)?M.fromRectValues(z,W,Z,ba,da):p.fromValues(W,Z,ba,da,z);return z};c.getQuantizedArea=function(z,G){const {coords:L,
lengths:W}=z;let Z=z=0;for(let ba=0;ba<W.length;ba++){const da=W[ba];Z+=wa(L,z,da,G);z+=da}return Math.abs(Z)};c.getQuantizedBoundsOptimizedGeometry=function(z,G,L,W){L=q(L,W);const {lengths:Z,coords:ba}=G;W=G=Number.POSITIVE_INFINITY;let da=Number.NEGATIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,ka=0;for(const sa of Z){let oa=ba[ka],ra=ba[ka+1];G=Math.min(oa,G);W=Math.min(ra,W);da=Math.max(oa,da);ia=Math.max(ra,ia);ka+=L;for(let Ca=1;Ca<sa;Ca++,ka+=L){const xa=ba[ka],Ba=ba[ka+1];oa+=xa;ra+=Ba;0>xa&&
(G=Math.min(G,oa));0<xa&&(da=Math.max(da,oa));0>Ba?W=Math.min(W,ra):0<Ba&&(ia=Math.max(ia,ra))}}z[0]=G;z[1]=W;z[2]=da;z[3]=ia;return z};c.getSignedQuantizedRingArea=wa;c.quantizeOptimizedFeatureSet=function(z,G){const {geometryType:L,features:W,hasM:Z,hasZ:ba}=G;if(!z)return G;for(let da=0;da<W.length;da++){const ia=W[da],ka=ia.weakClone();ka.geometry=new r;ta(ka.geometry,ia.geometry,Z,ba,L,z);ia.centroid&&(ka.centroid=new r,ta(ka.centroid,ia.centroid,Z,ba,"esriGeometryPoint",z));W[da]=ka}G.transform=
z;return G};c.quantizeOptimizedGeometry=ta;c.quantizeX=E;c.quantizeY=t;c.removeCollinearVectices=function(z,G,L,W,Z){if(!G?.coords?.length)return null;L=Na[L];const {coords:ba,lengths:da}=G;G=F(W,Z,W,Z);W=q(W,Z);let ia=Z=0,ka=0,sa=0;for(const Ca of da){ia=sa;G(z.coords,ba,ia,Z,ba[Z],ba[Z+1]);Z+=W;var oa=ba[Z];let xa=ba[Z+1],Ba=oa,Aa=xa;var ra=xa/oa;ia+=W;G(z.coords,ba,ia,Z,Ba,Aa);Z+=W;for(let ya=2;ya<Ca;ya++){oa=ba[Z];xa=ba[Z+1];const Ha=xa/oa,Qa=ra===Ha||!isFinite(ra)&&!isFinite(Ha);ra=Qa&&isFinite(Ha)?
0<=ra&&0<=Ha||0>=ra&&0>=Ha:0<=Aa&&0<=xa||0>=Aa&&0>=xa;Qa&&ra?(Ba+=oa,Aa+=xa):(Ba=oa,Aa=xa,ia+=W);G(z.coords,ba,ia,Z,Ba,Aa);Z+=W;ra=Ha}ia+=W;oa=(ia-sa)/W;oa>=L&&(z.lengths[ka]=oa,sa=ia,ka++)}z.coords.length>sa&&(z.coords.length=sa);z.lengths.length>ka&&(z.lengths.length=ka);return z.coords.length&&z.lengths.length?z:null};c.removeZMValues=function(z,G,L,W,Z,ba){Da(z);z.lengths.push(...G.lengths);if(L===Z&&W===ba)for(var da=0;da<G.coords.length;da++)z.coords.push(G.coords[da]);else for(da=q(L,W),L=
F(L,W,Z,ba),G=G.coords,W=0;W<G.length;W+=da)L(z.coords,G,z.coords.length,W,G[W],G[W+1]);return z};c.unquantizeOptimizedFeatureSet=function(z){const {transform:G,features:L,hasM:W,hasZ:Z}=z;if(!G)return z;for(const ba of L)null!=ba.geometry&&va(ba.geometry,ba.geometry,W,Z,G),null!=ba.centroid&&va(ba.centroid,ba.centroid,W,Z,G);z.transform=null;return z};c.unquantizeOptimizedGeometry=va;c.unquantizeValue=n;c.unquantizeX=function(z,G){return n(z,G,0)};c.unquantizeY=function(z,G){return n(z,-G,1)};Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class c{constructor(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const e=new c;e.objectIdFieldName=this.objectIdFieldName;
e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e}}return c})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(c,e,A,y){function M(w,f,r){p.minX=f[0];p.minY=f[1];p.maxX=f[2];p.maxY=f[3];w.search(p,r)}const p={minX:0,minY:0,maxX:0,maxY:0};class g{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new A.PooledRBush(9,e("esri-csp-restrictions")?w=>({minX:w[0],minY:w[1],maxX:w[2],maxY:w[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=
()=>{if(this._indexInvalid){const w=Array(this._idByBounds.size);let f=0;this._idByBounds.forEach((r,q)=>{w[f++]=q});this._indexInvalid=!1;this._index.clear();this._index.load(w)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(w=>this._idByBounds.has(w))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const w=y.empty();for(const f of this._boundsById.values())f&&(w[0]=Math.min(f[0],w[0]),w[1]=Math.min(f[1],w[1]),
w[2]=Math.max(f[2],w[2]),w[3]=Math.max(f[3],w[3]));return w}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(w){const f=this._boundsById.get(w);this._boundsById.delete(w);f&&(this._idByBounds.delete(f),this._indexInvalid||this._index.remove(f))}forEachInBounds(w,f){this._loadIndex();M(this._index,w,r=>f(this._idByBounds.get(r)))}get(w){return this._boundsById.get(w)}has(w){return this._boundsById.has(w)}invalidateIndex(){this._indexInvalid||
(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(w,f){if(!this._indexInvalid){const r=this._boundsById.get(w);r&&(this._index.remove(r),this._idByBounds.delete(r))}this._boundsById.set(w,f);f&&(this._idByBounds.set(f,w),this._indexInvalid||(this._boundsToLoad.push(f),5E4<this._boundsToLoad.length&&this._loadIndex()))}}c.BoundsStore=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../PooledArray",
"../../../chunks/quickselect"],function(c,e,A,y){function M(J,R){p(J,0,J.children.length,R,J)}function p(J,R,O,V,m){m||(m=new H([]));m.minX=Infinity;m.minY=Infinity;m.maxX=-Infinity;m.maxY=-Infinity;for(let Q=R,k;Q<O;Q++)k=J.children[Q],g(m,J.leaf?V(k):k);return m}function g(J,R){J.minX=Math.min(J.minX,R.minX);J.minY=Math.min(J.minY,R.minY);J.maxX=Math.max(J.maxX,R.maxX);J.maxY=Math.max(J.maxY,R.maxY)}function w(J,R){return J.minX-R.minX}function f(J,R){return J.minY-R.minY}function r(J){return(J.maxX-
J.minX)*(J.maxY-J.minY)}function q(J){return J.maxX-J.minX+(J.maxY-J.minY)}function F(J,R){return J.minX<=R.minX&&J.minY<=R.minY&&R.maxX<=J.maxX&&R.maxY<=J.maxY}function E(J,R){return R.minX<=J.maxX&&R.minY<=J.maxY&&R.maxX>=J.minX&&R.maxY>=J.minY}function t(J,R,O,V,m){for(R=[R,O];R.length;){O=R.pop();const Q=R.pop();if(O-Q<=V)continue;const k=Q+Math.ceil((O-Q)/V/2)*V;y.quickselect(J,k,Q,O,m);R.push(Q,k,k,O)}}class n{constructor(J=9,R){this._compareMinX=w;this._compareMinY=f;this._toBBox=O=>O;this._maxEntries=
Math.max(4,J||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));R&&("function"===typeof R?this._toBBox=R:this._initFormat(R));this.clear()}destroy(){this.clear();a.prune();v.prune();x.prune();D.prune()}all(J){this._all(this._data,J)}search(J,R){let O=this._data;const V=this._toBBox;if(E(J,O))for(a.clear();O;){for(let m=0,Q=O.children.length;m<Q;m++){const k=O.children[m],u=O.leaf?V(k):k;E(J,u)&&(O.leaf?R(k):F(J,u)?this._all(k,R):a.push(k))}O=a.pop()}}collides(J){let R=this._data;const O=
this._toBBox;if(!E(J,R))return!1;for(a.clear();R;){for(let V=0,m=R.children.length;V<m;V++){const Q=R.children[V],k=R.leaf?O(Q):Q;if(E(J,k)){if(R.leaf||F(J,k))return!0;a.push(Q)}}R=a.pop()}return!1}load(J){if(!J.length)return this;if(J.length<this._minEntries){for(let R=0,O=J.length;R<O;R++)this.insert(J[R]);return this}J=this._build(J.slice(0,J.length),0,J.length-1,0);if(this._data.children.length)if(this._data.height===J.height)this._splitRoot(this._data,J);else{if(this._data.height<J.height){const R=
this._data;this._data=J;J=R}this._insert(J,this._data.height-J.height-1,!0)}else this._data=J;return this}insert(J){J&&this._insert(J,this._data.height-1);return this}clear(){this._data=new H([]);return this}remove(J){if(!J)return this;let R=this._data,O=null,V=0,m=!1,Q;const k=this._toBBox(J);x.clear();for(D.clear();R||0<x.length;){R||(R=x.pop(),O=x.data[x.length-1],V=D.pop()??0,m=!0);if(R.leaf&&(Q=e.indexOf(R.children,J,R.children.length,R.indexHint),-1!==Q)){R.children.splice(Q,1);x.push(R);this._condense(x);
break}m||R.leaf||!F(R,k)?O?(V++,R=O.children[V],m=!1):R=null:(x.push(R),D.push(V),V=0,O=R,R=R.children[0])}return this}toJSON(){return this._data}fromJSON(J){this._data=J;return this}_all(J,R){for(v.clear();J;){if(!0===J.leaf)for(const O of J.children)R(O);else v.pushArray(J.children);J=v.pop()??null}}_build(J,R,O,V){var m=O-R+1,Q=this._maxEntries;if(m<=Q)return J=new H(J.slice(R,O+1)),M(J,this._toBBox),J;V||(V=Math.ceil(Math.log(m)/Math.log(Q)),Q=Math.ceil(m/Q**(V-1)));const k=new S([]);k.height=
V;m=Math.ceil(m/Q);Q=m*Math.ceil(Math.sqrt(Q));for(t(J,R,O,Q,this._compareMinX);R<=O;R+=Q){const u=Math.min(R+Q-1,O);t(J,R,u,m,this._compareMinY);for(let K=R;K<=u;K+=m)k.children.push(this._build(J,K,Math.min(K+m-1,u),V-1))}M(k,this._toBBox);return k}_chooseSubtree(J,R,O,V){for(;;){V.push(R);if(!0===R.leaf||V.length-1===O)break;let m=Infinity,Q=Infinity,k=void 0;for(let u=0,K=R.children.length;u<K;u++){const I=R.children[u],T=r(I),Y=(Math.max(I.maxX,J.maxX)-Math.min(I.minX,J.minX))*(Math.max(I.maxY,
J.maxY)-Math.min(I.minY,J.minY))-T;Y<Q?(Q=Y,m=T<m?T:m,k=I):Y===Q&&T<m&&(m=T,k=I)}R=k||R.children[0]}return R}_insert(J,R,O){var V=this._toBBox;O=O?J:V(J);x.clear();V=this._chooseSubtree(O,this._data,R,x);V.children.push(J);for(g(V,O);0<=R;)if(x.data[R].children.length>this._maxEntries)this._split(x,R),R--;else break;this._adjustParentBBoxes(O,x,R)}_split(J,R){const O=J.data[R];var V=O.children.length;const m=this._minEntries;this._chooseSplitAxis(O,m,V);(V=this._chooseSplitIndex(O,m,V))?(V=O.children.splice(V,
O.children.length-V),V=O.leaf?new H(V):new S(V),V.height=O.height,M(O,this._toBBox),M(V,this._toBBox),R?J.data[R-1].children.push(V):this._splitRoot(O,V)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}_splitRoot(J,R){this._data=new S([J,R]);this._data.height=J.height+1;M(this._data,this._toBBox)}_chooseSplitIndex(J,R,O){let V,m,Q=void 0;V=m=Infinity;for(let u=R;u<=O-R;u++){var k=p(J,0,u,this._toBBox);const K=p(J,u,O,this._toBBox),I=Math.max(0,Math.min(k.maxX,
K.maxX)-Math.max(k.minX,K.minX))*Math.max(0,Math.min(k.maxY,K.maxY)-Math.max(k.minY,K.minY));k=r(k)+r(K);I<V?(V=I,Q=u,m=k<m?k:m):I===V&&k<m&&(m=k,Q=u)}return Q}_chooseSplitAxis(J,R,O){const V=J.leaf?this._compareMinX:w,m=J.leaf?this._compareMinY:f,Q=this._allDistMargin(J,R,O,V);R=this._allDistMargin(J,R,O,m);Q<R&&J.children.sort(V)}_allDistMargin(J,R,O,V){J.children.sort(V);V=this._toBBox;var m=p(J,0,R,V);const Q=p(J,O-R,O,V);let k=q(m)+q(Q);for(let u=R;u<O-R;u++){const K=J.children[u];g(m,J.leaf?
V(K):K);k+=q(m)}for(O=O-R-1;O>=R;O--)m=J.children[O],g(Q,J.leaf?V(m):m),k+=q(Q);return k}_adjustParentBBoxes(J,R,O){for(;0<=O;O--)g(R.data[O],J)}_condense(J){for(let R=J.length-1;0<=R;R--){const O=J.data[R];if(0===O.children.length)if(0<R){const V=J.data[R-1],m=V.children;m.splice(e.indexOf(m,O,m.length,V.indexHint),1)}else this.clear();else M(O,this._toBBox)}}_initFormat(J){const R=["return a"," - b",";"];this._compareMinX=new Function("a","b",R.join(J[0]));this._compareMinY=new Function("a","b",
R.join(J[1]));this._toBBox=new Function("a","return {minX: a"+J[0]+", minY: a"+J[1]+", maxX: a"+J[2]+", maxY: a"+J[3]+"};")}}const a=new A,v=new A,x=new A,D=new A({deallocator:void 0});class N{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class d extends N{constructor(){super(...arguments);this.height=1;this.indexHint=new e.PositionHint}}class H extends d{constructor(J){super();this.children=J;this.leaf=!0}}class S extends d{constructor(J){super();this.children=J;this.leaf=
!1}}c.BBox=N;c.PooledRBush=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(c,e){var A={exports:{}};A.exports;(function(y){(function(M){M=M();void 0!==M&&(y.exports=M)})(function(){function M(w,f,r,q,F){for(;q>r;){if(600<q-r){var E=q-r+1,t=f-r+1,n=Math.log(E),a=.5*Math.exp(2*n/3);n=.5*Math.sqrt(n*a*(E-a)/E)*(0>t-E/2?-1:1);M(w,f,Math.max(r,Math.floor(f-t*a/E+n)),Math.min(q,Math.floor(f+(E-t)*a/E+
n)),F)}E=w[f];t=r;a=q;p(w,r,f);for(0<F(w[q],E)&&p(w,r,q);t<a;){p(w,t,a);t++;for(a--;0>F(w[t],E);)t++;for(;0<F(w[a],E);)a--}0===F(w[r],E)?p(w,r,a):(a++,p(w,a,q));a<=f&&(r=a+1);f<=a&&(q=a-1)}}function p(w,f,r){var q=w[f];w[f]=w[r];w[r]=q}function g(w,f){return w<f?-1:w>f?1:0}return function(w,f,r,q,F){M(w,f,r||0,q||w.length-1,F||g)}})})(A);e=e.getDefaultExportFromCjs(A.exports);c.quickselect=e})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils","../OptimizedGeometry"],
function(c,e,A){const y=new A,M=new A,p=new A,g={esriGeometryPoint:e.convertToPoint,esriGeometryPolyline:e.convertToPolyline,esriGeometryPolygon:e.convertToPolygon,esriGeometryMultipoint:e.convertToMultipoint},w=(f,r)=>"_geVersion"!==f?r:void 0;c.cleanFromGeometryEngine=function(f){return f&&"_geVersion"in f?JSON.parse(JSON.stringify(f,w)):f};c.getGeometry=function(f,r,q,F,E,t,n=r,a=q){const v=r&&n,x=q&&a;F=null!=F?"coords"in F?F:F.geometry:null;if(null==F)return null;if(E)return r=e.generalizeOptimizedGeometry(M,
F,r,q,f,E,n,a),t&&(r=e.quantizeOptimizedGeometry(p,r,v,x,f,t)),g[f]?.(r,v,x)??null;if(t)return t=e.quantizeOptimizedGeometry(p,F,r,q,f,t,n,a),g[f]?.(t,v,x)??null;e.removeZMValues(y,F,r,q,n,a);return g[f]?.(y,v,x)??null};c.transformCentroid=function(f,r,q,F=f.hasZ,E=f.hasM){if(null==r)return null;const t=f.hasZ&&F,n=f.hasM&&E;return q?(f=e.quantizeOptimizedGeometry(p,r,f.hasZ,f.hasM,"esriGeometryPoint",q,F,E),e.convertToPoint(f,t,n)):e.convertToPoint(r,t,n)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(c,e,A,y){c.optimizedFeatureQueryEngineAdapter={getObjectId(M){return M.objectId},getAttributes(M){return M.attributes},getAttribute(M,p){return M.attributes[p]},cloneWithGeometry(M,p){return new A.OptimizedFeature(p,M.attributes,null,M.objectId)},getGeometry(M){return M.geometry},getCentroid(M,p){null==M.centroid&&(M.centroid=
e.getCentroidOptimizedGeometry(new y,M.geometry,p.hasZ,p.hasM));return M.centroid}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(c){function e(y,M,p,g,w,f,r=1){f=w?f?4:3:f?3:2;let q=p,F=p+f,E=0,t=0,n=p=0,a=0;for(let v=0,x=g-1;v<x;v++,q+=f,F+=f){g=M[q];const D=M[q+1],N=M[q+2],d=M[F],H=M[F+1],S=M[F+2];let J=g*H-d*D;n+=J;E+=(g+d)*J;t+=(D+H)*J;w&&(J=g*S-d*N,p+=(N+S)*J,a+=J);g<y[0]&&(y[0]=g);g>y[1]&&(y[1]=g);D<y[2]&&
(y[2]=D);D>y[3]&&(y[3]=D);w&&(N<y[4]&&(y[4]=N),N>y[5]&&(y[5]=N))}0<n*r&&(n*=-1);0<a*r&&(a*=-1);if(!n)return null;y=[E,t,.5*n];w&&(y[3]=p,y[4]=.5*a);return y}function A(y,M,p,g,w){w=g?w?4:3:w?3:2;let f=M,r=M+w,q=0,F=0,E=0,t=0;for(let x=0,D=p-1;x<D;x++,f+=w,r+=w){var n=y[f];const N=y[f+1],d=y[f+2],H=y[r],S=y[r+1],J=y[r+2];if(g){var a=H-n;var v=S-N;const R=J-d;a=Math.sqrt(a*a+v*v+R*R)}else a=H-n,v=S-N,a=Math.sqrt(a*a+v*v);a&&(q+=a,g?(n=[n+.5*(H-n),N+.5*(S-N),d+.5*(J-d)],F+=a*n[0],E+=a*n[1],t+=a*n[2]):
(n=[n+.5*(H-n),N+.5*(S-N)],F+=a*n[0],E+=a*n[1]))}return 0<q?g?[F/q,E/q,t/q]:[F/q,E/q]:0<p?g?[y[M],y[M+1],y[M+2]]:[y[M],y[M+1]]:null}c.getCentroidOptimizedGeometry=function(y,M,p,g,w){if(!M?.lengths.length)return null;const f="upperLeft"===w?.originPosition?-1:1;y.lengths.length&&(y.lengths.length=0);y.coords.length&&(y.coords.length=0);w=y.coords;const r=[],q=p?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:
[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:F,coords:E}=M,t=p?g?4:3:g?3:2;let n=0;for(var a of F){const v=e(q,E,n,a,p,g,f);v&&r.push(v);n+=a*t}r.sort((v,x)=>{let D=f*v[2]-f*x[2];0===D&&p&&(D=v[4]-x[4]);return D});r.length&&(a=6*r[0][2],w[0]=r[0][0]/a,w[1]=r[0][1]/a,p&&(a=6*r[0][4],w[2]=0!==a?r[0][3]/a:0),w[0]<q[0]||w[0]>q[1]||w[1]<q[2]||w[1]>q[3]||p&&(w[2]<q[4]||w[2]>q[5]))&&(w.length=0);if(!w.length)if(M=M.lengths[0]?A(E,0,F[0],p,
g):null)w[0]=M[0],w[1]=M[1],p&&2<M.length&&(w[2]=M[2]);else return null;return y};c.lineCentroid=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(c,e,A,y,M,p,g){function w(a,v){if(!v)return null;
if("x"in v){var x={x:0,y:0};[x.x,x.y]=a(v.x,v.y,q);null!=v.z&&(x.z=v.z);null!=v.m&&(x.m=v.m);return x}return"xmin"in v?(x={xmin:0,ymin:0,xmax:0,ymax:0},[x.xmin,x.ymin]=a(v.xmin,v.ymin,q),[x.xmax,x.ymax]=a(v.xmax,v.ymax,q),v.hasZ&&(x.zmin=v.zmin,x.zmax=v.zmax,x.hasZ=!0),v.hasM&&(x.mmin=v.mmin,x.mmax=v.mmax,x.hasM=!0),x):"rings"in v?{rings:f(v.rings,a),hasM:v.hasM,hasZ:v.hasZ}:"paths"in v?{paths:f(v.paths,a),hasM:v.hasM,hasZ:v.hasZ}:"points"in v?{points:r(v.points,a),hasM:v.hasM,hasZ:v.hasZ}:null}function f(a,
v){const x=[];for(const D of a)x.push(r(D,v));return x}function r(a,v){const x=[];for(const D of a)a=v(D[0],D[1],[0,0]),x.push(a),2<D.length&&a.push(D[2]),3<D.length&&a.push(D[3]);return x}const q=[0,0],F=w.bind(null,g.lngLatToXY),E=w.bind(null,g.xyToLngLat);class t{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(a,v,x,D){if(!a?.length||!v||!x||p.equals(v,x))return a;a={geometries:a,inSpatialReference:v,outSpatialReference:x,geographicTransformation:D,
resolve:A.createResolver()};this._jobs.push(a);this._timer??(this._timer=setTimeout(this._process,10));return a.resolve.promise}_process(){this._timer=null;const a=this._jobs.shift();if(a){var {geometries:v,inSpatialReference:x,outSpatialReference:D,resolve:N,geographicTransformation:d}=a;g.canProject(x,D)?p.isWebMercator(D)?N(v.map(F)):N(v.map(E)):N(y.projectMany(M.jsonAdapter,v,x,D,d,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}}}const n=new t;c.checkProjectionSupport=
async function(a,v){a&&v&&(a=Array.isArray(a)?a.map(x=>null!=x.geometry?x.geometry.spatialReference:null).filter(e.isSome):[a],await y.initializeProjection(a.map(x=>({source:x,dest:v}))))};c.project=function(a,v,x,D){if(!a)return a;x||(x=v,v=a.spatialReference);return p.isValid(v)&&p.isValid(x)&&!p.equals(v,x)?g.canProject(v,x)?(a=p.isWebMercator(x)?F(a):E(a),a.spatialReference=x,a):y.projectMany(M.jsonAdapter,[a],v,x,null,D)[0]:a};c.projectMany=function(a,v,x,D){return n.push(a,v,x,D)};Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q,F,E,t,n,a,v,x,D,N,d,H,S,J,R,O,V,m){class Q{constructor(I,T=null,Y,ea,la){this.attributes=I;this.geometry=Y;this.centroid=ea;this.filterFlags=la;this.groupId=-1;this.displayId=T}}const k=new g.MemCacheStorage(2E6);let u=0;class K{constructor(I){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:d.queryCapabilities};this.geometryType=I.geometryType;this.hasM=!!I.hasM;this.hasZ=!!I.hasZ;this.objectIdField=I.objectIdField;this.spatialReference=I.spatialReference;
this.definitionExpression=I.definitionExpression;this.featureStore=I.featureStore;this.aggregateAdapter=I.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=I.timeInfo;I.cacheSpatialQueries&&(this._geometryQueryCache=new g.MemCache(u++ +"$$",k));this.fieldsIndex=y.isSerializable(I.fieldsIndex)?I.fieldsIndex:V.fromJSON(I.fieldsIndex);this.availableFields=null==I.availableFields?new Set(this.fieldsIndex.fields.map(T=>T.name)):new Set(I.availableFields.map(T=>
this.fieldsIndex.get(T)?.name).filter(T=>null!=T));I.scheduler&&I.priority&&(this._frameTask=I.scheduler.registerTask(I.priority))}destroy(){this._frameTask=p.removeMaybe(this._frameTask);this.clearCache();p.destroyMaybe(this._geometryQueryCache);this._changeHandle=p.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(I,
T){try{return(await this._executeQuery(I,{},T)).createQueryResponse()}catch(Y){if(Y!==S.queryEngineEmptyResult)throw Y;return(new H.QueryEngineResult([],I,this)).createQueryResponse()}}async executeQueryForCount(I={},T){try{return(await this._executeQuery(I,{returnGeometry:!1,returnCentroid:!1,outSR:null},T)).createQueryResponseForCount()}catch(Y){if(Y!==S.queryEngineEmptyResult)throw Y;return 0}}async executeQueryForExtent(I,T){const Y=I.outSR;try{const ea=await this._executeQuery(I,{returnGeometry:!0,
returnCentroid:!1,outSR:null},T),la=ea.size;if(!la)return{count:0,extent:null};const na=await this._getBounds(ea.items,ea.spatialReference,Y||this.spatialReference);return{count:la,extent:na}}catch(ea){if(ea===S.queryEngineEmptyResult)return{count:0,extent:null};throw ea;}}async executeQueryForIds(I,T){return this.executeQueryForIdSet(I,T).then(Y=>Array.from(Y))}async executeQueryForIdSet(I,T){try{const Y=await this._executeQuery(I,{returnGeometry:!0,returnCentroid:!1,outSR:null},T),ea=Y.items,la=
new Set;await this._reschedule(()=>{for(const na of ea)la.add(Y.featureAdapter.getObjectId(na))},T);return la}catch(Y){if(Y===S.queryEngineEmptyResult)return new Set;throw Y;}}async executeQueryForSnapping(I,T){const {point:Y,distance:ea,returnEdge:la,vertexMode:na}=I;if(!la&&"none"===na)return{candidates:[]};let ua=M.clone(I.query);ua=await this._schedule(()=>S.normalizeQueryLike(ua,this.definitionExpression,this.spatialReference),T);ua=await this._reschedule(()=>J.validateQuery(ua,{availableFields:this.availableFields,
fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),T);const ta=!a.equals(Y.spatialReference,this.spatialReference);ta&&await N.checkProjectionSupport(Y.spatialReference,this.spatialReference);var pa="number"===typeof ea?ea:ea.x,va="number"===typeof ea?ea:ea.y;pa={xmin:Y.x-pa,xmax:Y.x+pa,ymin:Y.y-va,ymax:Y.y+va,spatialReference:Y.spatialReference};pa=ta?N.project(pa,this.spatialReference):pa;if(!pa)return{candidates:[]};va=(await n.normalizeCentralMeridian(t.fromJSON(Y),
null,{signal:T}))[0];const wa=(await n.normalizeCentralMeridian(t.fromJSON(pa),null,{signal:T}))[0];if(null==va||null==wa)return{candidates:[]};const Da=new H.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(wa.toJSON())),T),ua,this);await this._reschedule(()=>this._executeObjectIdsQuery(Da),T);await this._reschedule(()=>this._executeTimeQuery(Da),T);await this._reschedule(()=>this._executeAttributesQuery(Da),T);await this._reschedule(()=>this._executeGeometryQueryForSnapping(Da,
T),T);va=va.toJSON();va=ta?N.project(va,this.spatialReference):va;return Da.createSnappingResponse({...I,point:va,distance:ta?Math.max(pa.xmax-pa.xmin,pa.ymax-pa.ymin)/2:ea},Y.spatialReference)}async executeQueryForLatestObservations(I,T){if(!this.timeInfo?.trackIdField)throw new A("unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:I,timeInfo:this.timeInfo});try{const Y=await this._executeQuery(I,{},T);await this._reschedule(()=>this._filterLatest(Y),T);return Y.createQueryResponse()}catch(Y){if(Y!==
S.queryEngineEmptyResult)throw Y;return(new H.QueryEngineResult([],I,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(I={},T,Y){const {field:ea,normalizationField:la,valueExpression:na}=T;return(await this._executeQueryForStatistics(I,{field:ea,normalizationField:la,valueExpression:na},Y)).createSummaryStatisticsResponse(T)}async executeQueryForUniqueValues(I={},T,Y){const {field:ea,field2:la,field3:na,valueExpression:ua}=T;return(await this._executeQueryForStatistics(I,{field:ea,
field2:la,field3:na,valueExpression:ua},Y)).createUniqueValuesResponse(T)}async executeQueryForClassBreaks(I={},T,Y){const {field:ea,normalizationField:la,valueExpression:na}=T;return(await this._executeQueryForStatistics(I,{field:ea,normalizationField:la,valueExpression:na},Y)).createClassBreaksResponse(T)}async executeQueryForHistogram(I={},T,Y){const {field:ea,normalizationField:la,valueExpression:na}=T;return(await this._executeQueryForStatistics(I,{field:ea,normalizationField:la,valueExpression:na},
Y)).createHistogramResponse(T)}async fetchRecomputedExtents(I){this._timeExtentPromise||(this._timeExtentPromise=O.getTimeExtent(this.timeInfo,this.featureStore));const [T,Y]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);w.throwIfAborted(I);return{fullExtent:T,timeExtent:Y}}async _getBounds(I,T,Y){const ea=q.set(q.create(),q.negativeInfinity);await this.featureStore.forEachBounds(I,la=>q.expandWithAABB(ea,la));I={xmin:ea[0],ymin:ea[1],xmax:ea[3],ymax:ea[4],spatialReference:D.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(ea[2])&&isFinite(ea[5])&&(I.zmin=ea[2],I.zmax=ea[5]);T=N.project(I,T,Y);T.spatialReference=D.cleanFromGeometryEngine(Y);0===T.xmax-T.xmin&&(Y=f.getMetersPerUnitForSR(T.spatialReference),T.xmin-=Y,T.xmax+=Y);0===T.ymax-T.ymin&&(Y=f.getMetersPerUnitForSR(T.spatialReference),T.ymin-=Y,T.ymax+=Y);this.hasZ&&null!=T.zmin&&null!=T.zmax&&0===T.zmax-T.zmin&&(Y=f.getMetersPerUnitForSR(T.spatialReference),T.zmin-=Y,T.zmax+=Y);return T}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise=
"getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getAllFeatures().then(I=>this._getBounds(I,this.spatialReference,this.spatialReference)));return this._fullExtentPromise}async _schedule(I,T){return null!=this._frameTask?this._frameTask.schedule(I,T):I(m.noBudget)}async _reschedule(I,T){return null!=this._frameTask?this._frameTask.reschedule(I,T):I(m.noBudget)}async _getAllFeaturesQueryEngineResult(I){return new H.QueryEngineResult(await this._getAllFeatures(),
I,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const Y=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(ea=>Y.push(ea))})().then(()=>Y)}const I=this._allFeaturesPromise,T=await I;return I===this._allFeaturesPromise?T.slice():this._getAllFeatures()}async _executeQuery(I,T,Y){I=M.clone(I);I=await this._schedule(()=>S.normalizeQuery(I,this.definitionExpression,this.spatialReference),Y);I=await this._reschedule(()=>J.validateQuery(I,{availableFields:this.availableFields,
fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);I={...I,...T};const ea=await this._reschedule(()=>this._executeSceneFilterQuery(I,Y),Y),la=await this._reschedule(()=>this._executeGeometryQuery(I,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),
Y);return la}async _executeSceneFilterQuery(I,T){if(null==I.sceneFilter)return null;const {outSR:Y,returnGeometry:ea,returnCentroid:la}=I;var na=this.featureStore.featureSpatialReference,ua=I.sceneFilter.geometry;const ta=null==na||a.equals(na,ua.spatialReference)?ua:N.project(ua,na);if(!ta)return null;na=ea||la;na=a.isValid(Y)&&!a.equals(this.spatialReference,Y)&&na?async Da=>this._project(Da,Y):Da=>Da;const pa=this.featureAdapter;ua=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ta)),
T);if("disjoint"===I.sceneFilter.spatialRelationship){if(!ua.length)return null;const Da=new Set;for(var va of ua)Da.add(pa.getObjectId(va));const Ia=await this._reschedule(()=>this._getAllFeatures(),T);va=await this._reschedule(async()=>{const Pa=await R.getSpatialQueryOperator("esriSpatialRelDisjoint",ta,this.geometryType,this.hasZ,this.hasM),Na=await this._runSpatialFilter(Ia,Sa=>!Da.has(pa.getObjectId(Sa))||Pa(pa.getGeometry(Sa)),T);return new H.QueryEngineResult(Na,I,this)},T);return na(va)}if(!ua.length)return new H.QueryEngineResult([],
I,this);if(this._canExecuteSinglePass(ta,I))return na(new H.QueryEngineResult(ua,I,this));const wa=await R.getSpatialQueryOperator("esriSpatialRelContains",ta,this.geometryType,this.hasZ,this.hasM);va=await this._runSpatialFilter(ua,Da=>wa(pa.getGeometry(Da)),T);return na(new H.QueryEngineResult(va,I,this))}async _executeGeometryQuery(I,T,Y){if(null!=T&&0===T.items.length)return T;I=null!=T?T.query:I;const {geometry:ea,outSR:la,spatialRel:na,returnGeometry:ua,returnCentroid:ta}=I;var pa=this.featureStore.featureSpatialReference;
const va=!ea||null==pa||a.equals(pa,ea.spatialReference)?ea:N.project(ea,pa),wa=ua||ta,Da=a.isValid(la)&&!a.equals(this.spatialReference,la),Ia=this._geometryQueryCache&&null==T?Da&&wa?JSON.stringify({originalFilterGeometry:ea,spatialRelationship:na,outSpatialReference:la}):JSON.stringify({originalFilterGeometry:ea,spatialRelationship:na}):null;pa=Ia?this._geometryQueryCache.get(Ia):null;if(null!=pa)return new H.QueryEngineResult(pa,I,this);pa=async h=>{Da&&wa&&await this._project(h,la);Ia&&this._geometryQueryCache.put(Ia,
h.items,h.items.length+1);return h};if(!va)return pa(null!=T?T:await this._getAllFeaturesQueryEngineResult(I));const Pa=this.featureAdapter;let Na=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ea)),Y);if("esriSpatialRelDisjoint"===na){if(!Na.length)return pa(null!=T?T:await this._getAllFeaturesQueryEngineResult(I));const h=new Set;for(var Sa of Na)h.add(Pa.getObjectId(Sa));const C=null!=T?T.items:await this._reschedule(()=>this._getAllFeatures(),Y);Sa=await this._reschedule(async()=>
{const X=await R.getSpatialQueryOperator(na,va,this.geometryType,this.hasZ,this.hasM),aa=await this._runSpatialFilter(C,ha=>!h.has(Pa.getObjectId(ha))||X(Pa.getGeometry(ha)),Y);return new H.QueryEngineResult(aa,I,this)},Y);return pa(Sa)}if(null!=T){const h=new e.PositionHint;Na=Na.filter(C=>0<=e.indexOf(T.items,C,T.items.length,h))}if(!Na.length)return pa=new H.QueryEngineResult([],I,this),Ia&&this._geometryQueryCache.put(Ia,pa.items,1),pa;if(this._canExecuteSinglePass(va,I))return pa(new H.QueryEngineResult(Na,
I,this));const Va=await R.getSpatialQueryOperator(na,va,this.geometryType,this.hasZ,this.hasM);Sa=await this._runSpatialFilter(Na,h=>Va(Pa.getGeometry(h)),Y);return pa(new H.QueryEngineResult(Sa,I,this))}async _executeGeometryQueryForSnapping(I,T){const {query:Y}=I,{spatialRel:ea}=Y;if(I?.items?.length&&Y.geometry&&ea){var la=await R.getSpatialQueryOperator(ea,Y.geometry,this.geometryType,this.hasZ,this.hasM);T=await this._runSpatialFilter(I.items,na=>la(na.geometry),T);I.items=T}}_executeAggregateIdsQuery(I){if(0!==
I.items.length&&I.query.aggregateIds?.length&&null!=this.aggregateAdapter){var T=new Set;for(const ea of I.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ea).forEach(la=>T.add(la));var Y=this.featureAdapter.getObjectId;I.items=I.items.filter(ea=>T.has(Y(ea)))}}_executeObjectIdsQuery(I){if(0!==I.items.length&&I.query.objectIds?.length){var T=new Set(I.query.objectIds),Y=this.featureAdapter.getObjectId;I.items=I.items.filter(ea=>T.has(Y(ea)))}}_executeTimeQuery(I){if(0!==I.items.length){var T=
O.getTimeOperator(this.timeInfo,I.query.timeExtent,this.featureAdapter);null!=T&&(I.items=I.items.filter(T))}}_executeAttributesQuery(I){if(0!==I.items.length){var T=x.getWhereClause(I.query.where,this.fieldsIndex);if(T){if(!T.isStandardized)throw new TypeError("Where clause is not standardized");I.items=I.items.filter(Y=>T.testFeature(Y,this.featureAdapter))}}}async _runSpatialFilter(I,T,Y){if(!T)return I;if(null==this._frameTask)return I.filter(ua=>T(ua));let ea=0;const la=[],na=async ua=>{for(;ea<
I.length;){const ta=I[ea++];T(ta)&&(la.push(ta),ua.madeProgress());ua.done&&await this._reschedule(pa=>na(pa),Y)}};return this._reschedule(ua=>na(ua),Y).then(()=>la)}_filterLatest(I){const {trackIdField:T,startTimeField:Y,endTimeField:ea}=this.timeInfo,la=ea||Y,na=new Map,ua=this.featureAdapter.getAttribute;for(const ta of I.items){const pa=ua(ta,T),va=ua(ta,la),wa=na.get(pa);(!wa||va>ua(wa,la))&&na.set(pa,ta)}I.items=Array.from(na.values())}_canExecuteSinglePass(I,T){({spatialRel:T}=T);return R.canQueryWithRBush(I)&&
("esriSpatialRelEnvelopeIntersects"===T||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===T||"esriSpatialRelContains"===T))}async _project(I,T){if(!T||a.equals(this.spatialReference,T))return I;const Y=this.featureAdapter;let ea=void 0;try{const la=await this._getFullExtent();ea=r.getTransformation(this.spatialReference,T,la)}catch{}T=await N.projectMany(I.items.map(la=>D.getGeometry(this.geometryType,this.hasZ,this.hasM,Y.getGeometry(la))),this.spatialReference,T,ea);I.items=
T.map((la,na)=>Y.cloneWithGeometry(I.items[na],v.convertFromGeometry(la,this.hasZ,this.hasM)));return I}_getQueryBBoxes(I){if(R.canQueryWithRBush(I)){if(t.isExtent(I))return[F.fromValues(Math.min(I.xmin,I.xmax),Math.min(I.ymin,I.ymax),Math.max(I.xmin,I.xmax),Math.max(I.ymin,I.ymax))];if(t.isPolygon(I))return I.rings.map(T=>F.fromValues(Math.min(T[0][0],T[2][0]),Math.min(T[0][1],T[2][1]),Math.max(T[0][0],T[2][0]),Math.max(T[0][1],T[2][1])))}return[E.getBoundsXY(F.create(),I)]}async _searchFeatures(I){const T=
new Set;await Promise.all(I.map(Y=>this.featureStore.forEachInBounds(Y,ea=>T.add(ea))));I=Array.from(T.values());T.clear();return I}async _executeQueryForStatistics(I,T,Y){I=M.clone(I);try{I=await this._schedule(()=>S.normalizeQuery(I,this.definitionExpression,this.spatialReference),Y);I=await this._reschedule(()=>J.validateStatisticsQuery(I,T,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);const ea=await this._reschedule(()=>
this._executeSceneFilterQuery(I,Y),Y),la=await this._reschedule(()=>this._executeGeometryQuery(I,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),Y);return la}catch(ea){if(ea!==S.queryEngineEmptyResult)throw ea;return new H.QueryEngineResult([],I,this)}}}c.Feature=Q;c.QueryEngine=K;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","./PooledArray"],function(c,e){c.RemoveMode=void 0;(function(p){p[p.ALL=0]="ALL";p[p.SOME=1]="SOME"})(c.RemoveMode||(c.RemoveMode={}));class A{constructor(p,g,w){this.name=p;this._storage=g;this.id=`${M++}:`;this.maxSize=this.size=0;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);w&&(this._storage.registerRemoveFunc(this.id,w),this._removeFunc=!0)}destroy(){this._storage.clear(this);this._removeFunc&&
this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(p,g,w,f=0){this._storage.put(this,p,g,w,f)}get(p){p=this._storage.get(this,p);void 0===p?++this._miss:++this._hit;return p}peek(p){return this._storage.peek(this,p)}pop(p){p=this._storage.pop(this,p);void 0===p?++this._miss:++this._hit;return p}updateSize(p,g,w){this._storage.updateSize(this,
p,g,w)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class y{get size(){return this._size}constructor(p=10485760){this._maxSize=p;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new e;this._users=new e}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(p){this._users.push(p)}deregister(p){this._users.removeUnordered(p)}registerRemoveFunc(p,
g){this._removeFuncs.push([p,g])}deregisterRemoveFunc(p){this._removeFuncs.filterInPlace(g=>g[0]!==p)}get maxSize(){return this._maxSize}set maxSize(p){this._maxSize=Math.max(p,0);this._checkSizeLimits()}put(p,g,w,f,r){g=p.id+g;const q=this._db.get(g);q&&(this._size-=q.size,p.size-=q.size,this._db.delete(g),q.entry!==w&&this._notifyRemove(g,q.entry,c.RemoveMode.ALL));f>this._maxSize?this._notifyRemove(g,w,c.RemoveMode.ALL):void 0===w?console.warn("Refusing to cache undefined entry "):!f||0>f?(console.warn(`Refusing to cache entry with size ${f} for key ${g}`),
this._notifyRemove(g,w,c.RemoveMode.ALL)):(r=1+Math.max(r,-3)- -3,this._db.set(g,{entry:w,size:f,lifetime:r,lives:r}),this._size+=f,p.size+=f,this._checkSizeLimits())}updateSize(p,g,w,f){g=p.id+g;const r=this._db.get(g);if(r&&r.entry===w){this._size-=r.size;for(p.size-=r.size;f>this._maxSize;)if(f=this._notifyRemove(g,w,c.RemoveMode.SOME),!(null!=f&&0<f)){this._db.delete(g);return}r.size=f;this._size+=f;p.size+=f;this._checkSizeLimits()}}pop(p,g){g=p.id+g;const w=this._db.get(g);if(w)return this._size-=
w.size,p.size-=w.size,this._db.delete(g),++this._hit,w.entry;++this._miss}get(p,g){g=p.id+g;p=this._db.get(g);if(void 0===p)++this._miss;else return this._db.delete(g),p.lives=p.lifetime,this._db.set(g,p),++this._hit,p.entry}peek(p,g){(p=this._db.get(p.id+g))?++this._hit:++this._miss;return p?.entry}get performanceInfo(){const p={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},g={},w=
[];this._db.forEach((q,F)=>{const E=q.lifetime;w[E]=(w[E]||0)+q.size;this._users.forAll(t=>{const {id:n,name:a}=t;F.startsWith(n)&&(g[a]=(g[a]||0)+q.size)})});const f={};this._users.forAll(q=>{const F=q.name;"hitRate"in q&&"number"===typeof q.hitRate&&!isNaN(q.hitRate)&&0<q.hitRate?(g[F]=g[F]||0,f[F]=Math.round(100*q.hitRate)+"%"):f[F]="0%"});var r=Object.keys(g);r.sort((q,F)=>g[F]-g[q]);r.forEach(q=>p[q]=Math.round(g[q]/2**20)+"MB / "+f[q]);for(r=w.length-1;0<=r;--r){const q=w[r];q&&(p["Priority "+
(r+-3-1)]=Math.round(q/this._size*100)+"%")}return p}resetStats(){this._hit=this._miss=0;this._users.forAll(p=>p.resetHitRate())}clear(p){const g=p.id;this._db.forEach((w,f)=>{f.startsWith(g)&&(this._size-=w.size,this._db.delete(f),this._notifyRemove(f,w.entry,c.RemoveMode.ALL))});p.size=0}clearAll(){this._db.forEach((p,g)=>this._notifyRemove(g,p.entry,c.RemoveMode.ALL));this._users.forEach(p=>p.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(p,
g,w){let f;this._removeFuncs.some(r=>p.startsWith(r[0])?(r=r[1](g,w),"number"===typeof r&&(f=r),!0):!1);return f}_checkSizeLimits(){if(this._size>this._maxSize)for(const [p,g]of this._db)if(this._purgeItem(p,g),this._size<=.9*this.maxSize)return;this._users.forEach(p=>{if(0<p.maxSize&&p.size>p.maxSize)for(const [g,w]of this._db)if(g.startsWith(p.id)&&(this._purgeItem(g,w,p),p.size<=.9*p.maxSize))break})}_purgeItem(p,g,w=this._users.find(f=>p.startsWith(f.id))){this._db.delete(p);if(1>=g.lives){this._size-=
g.size;w&&(w.size-=g.size);const f=this._notifyRemove(p,g.entry,c.RemoveMode.SOME);null!=f&&0<f&&(this._size+=f,w&&(w.size+=f),g.lives=g.lifetime,g.size=f,this._db.set(p,g))}else--g.lives,this._db.set(p,g)}}let M=0;c.MemCache=A;c.MemCacheStorage=y;c.minPriority=-3;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q){function F(D){const N=[];let d=0,H=0;for(let S=0;S<D.length;S++){const J=D[S];let R=null;for(let O=0;O<J.length;O++)R=J[O],N.push(R),0===O?H=d=R[0]:(d=Math.min(d,R[0]),H=Math.max(H,R[0]));R&&N.push([(d+H)/2,0])}return N}function E(D,N){if(!(D instanceof p||D instanceof M))throw x.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new A("straightLineDensify: the input geometry is neither polyline nor polygon");var d=g.getGeometryParts(D);
const H=[];for(const J of d){d=[];H.push(d);d.push([J[0][0],J[0][1]]);for(let R=0;R<J.length-1;R++){const O=J[R][0],V=J[R][1],m=J[R+1][0],Q=J[R+1][1];var S=Math.sqrt((m-O)*(m-O)+(Q-V)*(Q-V));const k=(Q-V)/S,u=(m-O)/S,K=S/N;if(1<K){for(let I=1;I<=K-1;I++){const T=I*N;d.push([u*T+O,k*T+V])}S=(S+Math.floor(K-1)*N)/2;d.push([u*S+O,k*S+V])}d.push([m,Q])}}return"polygon"===D.type?new M({rings:H,spatialReference:D.spatialReference}):new p({paths:H,spatialReference:D.spatialReference})}function t(D,N,d){N&&
(D=E(D,1E6),D=f.webMercatorToGeographic(D,!0));d&&(D=g.updatePolyGeometry(D,d));return D}function n(D,N,d){if(Array.isArray(D)){var H=D[0];H>N?(d=g.offsetMagnitude(H,N),D[0]=H+-2*d*N):H<d&&(N=g.offsetMagnitude(H,d),D[0]=H+-2*N*d)}else H=D.x,H>N?(d=g.offsetMagnitude(H,N),D=D.clone().offset(-2*d*N,0)):H<d&&(N=g.offsetMagnitude(H,d),D=D.clone().offset(-2*N*d,0));return D}function a(D,N){let d=-1;for(let H=0;H<N.cutIndexes.length;H++){const S=N.cutIndexes[H],J=N.geometries[H],R=g.getGeometryParts(J);
for(let O=0;O<R.length;O++){const V=R[O];V.some(m=>{if(180>m[0])return!0;m=0;for(var Q=0;Q<V.length;Q++){var k=V[Q][0];m=k>m?k:m}m=Number(m.toFixed(9));m=-360*g.offsetMagnitude(m,180);for(Q=0;Q<V.length;Q++)k=J.getPoint(O,Q),J.setPoint(O,Q,k.clone().offset(m,0));return!0})}if(S===d)if("polygon"===D[0].type)for(const O of g.getGeometryParts(J))D[S]=D[S].addRing(O);else{if("polyline"===D[0].type)for(const O of g.getGeometryParts(J))D[S]=D[S].addPath(O)}else d=S,D[S]=J}return D}async function v(D,N,
d){if(!Array.isArray(D))return v([D],N);N&&"string"!==typeof N&&x.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var H="string"===typeof N?N:N?.url??e.geometryServiceUrl;let S,J,R;let O=0;var V=[];N=[];for(var m of D)if(null==m)N.push(m);else{if(!Q){var Q=m.spatialReference;var k=w.getInfo(Q);var u=(S=Q.isWebMercator)?102100:4326;J=g.cutParams[u].maxX;R=g.cutParams[u].minX;var K=g.cutParams[u].plus180Line;u=g.cutParams[u].minus180Line}if(k)if("mesh"===
m.type)N.push(m);else if("point"===m.type)N.push(n(m.clone(),J,R));else if("multipoint"===m.type){var I=m.clone();I.points=I.points.map(T=>n(T,J,R));N.push(I)}else if("extent"===m.type)I=m.clone()._normalize(!1,!1,k),N.push(I.rings?new M(I):I);else if(m.extent){I=m.extent;const T=2*g.offsetMagnitude(I.xmin,R)*J;let Y=0===T?m.clone():g.updatePolyGeometry(m.clone(),T);I.offset(T,0);I.intersects(K)&&I.xmax!==J?(O=I.xmax>O?I.xmax:O,Y=t(Y,S),V.push(Y),N.push("cut")):I.intersects(u)&&I.xmin!==R?(O=2*I.xmax*
J>O?2*I.xmax*J:O,Y=t(Y,S,360),V.push(Y),N.push("cut")):N.push(Y)}else N.push(m.clone());else N.push(m)}Q=g.offsetMagnitude(O,J);k=-90;K=Q;for(m=new p;0<Q;)u=-180+360*Q,m.addPath([[u,k],[u,-1*k]]),k*=-1,Q--;if(0<V.length&&0<K){Q=await r.cut(H,V,m,d);Q=a(V,Q);k=[];V=[];for(K=0;K<N.length;K++)m=N[K],"cut"!==m?V.push(m):(m=Q.shift(),u=D[K],null!=u&&"polygon"===u.type&&u.rings&&1<u.rings.length&&m.rings.length>=u.rings.length?(k.push(m),V.push("simplify")):V.push(S?f.geographicToWebMercator(m):m));if(!k.length)return V;
N=await q.simplify(H,k,d);D=[];for(d=0;d<V.length;d++)H=V[d],"simplify"!==H?D.push(H):D.push(S?f.geographicToWebMercator(N.shift()):N.shift());return D}D=[];for(d=0;d<N.length;d++)H=N[d],"cut"!==H?D.push(H):(H=V.shift(),D.push(!0===S?f.geographicToWebMercator(H):H));return D}const x=y.getLogger("esri.geometry.support.normalizeUtils");c.getClosestDenormalizedXToReference=function(D,N,d){d=w.getInfo(d);if(null==d)return D;const [H,S]=d.valid;d=2*S;let J=0,R=0;N>S?J=Math.ceil(Math.abs(N-S)/d):N<H&&(J=
-Math.ceil(Math.abs(N-H)/d));D>S?R=Math.ceil(Math.abs(D-S)/d):D<H&&(R=-Math.ceil(Math.abs(D-H)/d));D+=(J-R)*d;N=D-N;N>S?D-=d:N<H&&(D+=d);return D};c.getDenormalizedExtent=function(D){if(!D)return null;const N=D.extent;if(!N)return null;var d=D.spatialReference&&w.getInfo(D.spatialReference);if(!d)return N;const [H,S]=d.valid;({width:d}=N);let {xmin:J,xmax:R}=N;[J,R]=[R,J];if("extent"===D.type||0===d||d<=S||d>2*S||J<H||R>S)return N;let O;switch(D.type){case "polygon":if(1<D.rings.length)O=F(D.rings);
else return N;break;case "polyline":if(1<D.paths.length)O=F(D.paths);else return N;break;case "multipoint":O=D.points}D=N.clone();for(let V=0;V<O.length;V++){let m=O[V][0];0>m?(m+=S,R=Math.max(m,R)):(m-=S,J=Math.min(m,J))}D.xmin=J;D.xmax=R;return D.width<d?(D.xmin-=S,D.xmax-=S,D):N};c.normalizeCentralMeridian=v;c.normalizeMapX=function(D,N){if(N=w.getInfo(N)){const [d,H]=N.valid;N=H-d;if(D<d)for(;D<d;)D+=N;if(D>H)for(;D>H;)D-=N}return D};c.straightLineDensify=E;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(c,e,A,y){function M(p){return y.isPolygon(p)?p.rings:p.paths}e={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:A.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],
[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:A.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:A.WGS84})}};c.cutParams=e;c.getGeometryParts=M;c.offsetMagnitude=function(p,g){return Math.ceil((p-g)/(2*g))};c.updatePolyGeometry=function(p,g){const w=M(p);for(const f of w)for(const r of f)r[0]+=g;return p};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),function(c,e,A,y,M,p){c.cut=async function(g,w,f,r){g=p.parseUrl(g);const q=w[0].spatialReference;w={...r,responseType:"json",query:{...g.query,f:"json",sr:M.srToRESTValue(q),target:JSON.stringify({geometryType:y.getJsonType(w[0]),geometries:w}),cutter:JSON.stringify(f)}};w=await A(g.path+"/cut",
w);const {cutIndexes:F,geometries:E=[]}=w.data;return{cutIndexes:F,geometries:E.map(t=>{t=y.fromJSON(t);t.spatialReference=q;return t})}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(c,e,A,y,M,p){function g(w,f,r){const q={};for(const E in w)if("declaredClass"!==E){var F=w[E];if(null!=F&&"function"!==typeof F)if(Array.isArray(F)){q[E]=[];for(let t=
0;t<F.length;t++)q[E][t]=g(F[t])}else"object"===typeof F?F.toJSON?(F=F.toJSON(r?.[E]),q[E]=f?F:JSON.stringify(F)):q[E]=f?F:JSON.stringify(F):q[E]=F}return q}c.asValidOptions=function(w,f){return f?{...f,query:{...(w??{}),...f.query}}:{query:w}};c.encode=g;c.getToken=function(w,f){return w?p.supportsApiKey(w)&&(f||e.apiKey)?f||e.apiKey:A.id?.findCredential(w)?.token:null};c.parseUrl=function(w){return"string"===typeof w?M.urlToObject(w):y.clone(w)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(c,e,A,y,M,p){c.simplify=async function(g,w,f){const r="string"===typeof g?A.urlToObject(g):g;g=w[0].spatialReference;const q=y.getJsonType(w[0]);w={...f,query:{...r.query,f:"json",sr:M.srToRESTValue(g),geometries:JSON.stringify(p.encodeGeometries(w))}};({data:w}=await e(r.path+"/simplify",w));return p.decodeGeometries(w.geometries,
q,g)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(c,e){c.decodeGeometries=function(A,y,M){const p=e.getGeometryType(y);return A.map(g=>{g=p.fromJSON(g);g.spatialReference=M;return g})};c.encodeGeometries=function(A){return{geometryType:e.getJsonType(A[0]),geometries:A.map(y=>y.toJSON())}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(c,e,A,y){function M(E,t,n={}){const a=p(t,E);if(!a)throw n=r.getError(t,E),new e("unsupported-query","invalid SQL expression",{expression:t,error:n});E=n.expressionName||"expression";if(n.validateStandardized&&!a.isStandardized)throw new e("unsupported-query",`${E} is not standard`,{expression:t});if(n.validateAggregate&&!a.isAggregate)throw new e("unsupported-query",`${E} does not contain a valid aggregate function`,
{expression:t});return a.fieldNames}function p(E,t){return E?r.get(E,t):null}function g(E){return/\((.*?)\)/.test(E)?E:E.split(" as ")[0]}function w(E,t,n,a={}){const v=new Map;var x=a.allowedFieldTypes??F;for(const D of n)if("*"!==D)if(E.get(D))f(v,E,t,x,D);else try{const N=g(D),d=M(E,N,{validateStandardized:!0});for(const H of d)f(v,E,t,x,H)}catch(N){v.set(D,{type:"expression-error",expression:D,error:N})}if(v.size)throw new e("unsupported-query",`${a.expressionName??"expression"} contains invalid or missing fields`,
{errors:Array.from(v.values()),query:a.query});}function f(E,t,n,a,v){"*"!==v&&((t=t.get(v))?n.has(t.name)?!1===a?.has(t.type)&&E.set(v,{type:"invalid-type",fieldName:t.name,fieldType:y.kebabDict.fromJSON(t.type),allowedFieldTypes:Array.from(a,x=>y.kebabDict.fromJSON(x))}):E.set(v,{type:"missing-field",fieldName:t.name}):E.set(v,{type:"invalid-field",fieldName:v}))}const r=new A.WhereClauseCache(50,500);A=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));
const q=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),F=new Set(["esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...A,...q]);c.allDateAndTimeFieldTypes=q;c.getAliasFromFieldName=function(E){return E.split(" as ")[1]};c.getExpressionFromFieldName=g;c.getWhereClause=p;c.numericFieldTypes=A;c.validateFields=w;c.validateHaving=function(E,t,n,a,v){if(!n)return!0;const x=M(E,n,{validateAggregate:!0,expressionName:"having clause"});
w(E,t,x,{expressionName:"having clause",query:v});if(!p(n,E)?.getExpressions().every(D=>{const {aggregateType:N,field:d}=D,H=E.get(d)?.name;return a.some(S=>{const {onStatisticField:J,statisticType:R}=S;return E.get(J)?.name===H&&R.toLowerCase().trim()===N})}))throw new e("unsupported-query","expressions in having clause should also exist in outStatistics",{having:n});return!0};c.validateWhere=function(E,t,n,a){if(!n)return!0;n=M(E,n,{validateStandardized:!0,expressionName:"where clause"});w(E,t,
n,{expressionName:"where clause",query:a});return!0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../LRUCache","./WhereClause"],function(c,e,A){class y{constructor(M,p){this._cache=new e.LRUCache(M);this._invalidCache=new e.LRUCache(p)}get(M,p){const g=`${p.uid}:${M}`,w=this._cache.get(g);if(w)return w;if(null!=this._invalidCache.get(g))return null;try{const f=A.WhereClause.create(M,p);this._cache.put(g,f);return f}catch(f){return this._invalidCache.put(g,
f),null}}getError(M,p){return this._invalidCache.get(`${p.uid}:${M}`)??null}}c.WhereClauseCache=y;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(c,e){class A{constructor(y,M){this._storage=new e.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=y;this._storage.register(this);M&&this._storage.registerRemoveFunc("",M)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(y,M,
p=1){this._storage.put(this,y,M,p,1)}pop(y){return this._storage.pop(this,y)}get(y){return this._storage.get(this,y)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(y){this._storage.maxSize=y}resetHitRate(){}}c.LRUCache=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../../arcade/featureset/support/errorsupport ../has ./AggregateFunctions ./DateOnly ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q,F,E,t,n){function a(m){return Array.isArray(m)?m:[m]}function v(m){return null!==m?!0!==m:null}function x(m,Q){return null!=m&&null!=Q?!0===m&&!0===Q:!1===m||!1===Q?!1:null}function D(m,Q){return null!=m&&null!=Q?!0===m||!0===Q:!0===m||!0===Q?!0:null}function N(m,Q){if(null==m)return null;let k=!1;for(const u of Q)if(null==u)k=null;else if(m===u){k=!0;break}return k}function d(m,Q,k){if(null==m)return null;let u="",K=O.Normal;for(let I=0;I<Q.length;I++){const T=Q.charAt(I);
switch(K){case O.Normal:T===k?K=O.Escaped:u="-[]/{}()*+?.\\^$|".includes(T)?u+("\\"+T):"%"===T?u+".*":"_"===T?u+".":u+T;break;case O.Escaped:u="-[]/{}()*+?.\\^$|".includes(T)?u+("\\"+T):u+T,K=O.Normal}}return(new RegExp("^"+u+"$","m")).test(m)}function H(m,Q,k,u){m=u.getAttribute(m,Q);Q=k?.get(Q);return null==m||"esriFieldTypeDate"!==Q?.type&&"date"!==Q?.type?null==m||"esriFieldTypeDateOnly"!==Q?.type&&"date-only"!==Q?.type?null==m||"esriFieldTypeTimeOnly"!==Q?.type&&"time-only"!==Q?.type?null==m||
"esriFieldTypeTimestampOffset"!==Q?.type&&"timestamp-offset"!==Q?.type?m:new q.SqlTimeStampOffset(m):E.TimeOnly.fromReader(m):p.DateOnly.fromReader(m):f.convertToExecutingTimeZone(new Date(m),k?.getLuxonTimeZone(Q.name)??n.FixedOffsetZone.utcInstance)}const S=new Set(["current_timestamp","current_date","current_time"]);class J{static makeBool(m){return!0===m}static featureValue(m,Q,k,u){return H(m,Q,k,u)}static equalsNull(m){return null===m}static applyLike(m,Q,k){return d(m,Q,k)}static ensureArray(m){return a(m)}static applyIn(m,
Q){return N(m,Q)}static currentDate(m){return p.DateOnly.fromNow(m)}static makeSqlInterval(m,Q,k){return r.SqlInterval.createFromValueAndQualifer(m,Q,k)}static convertInterval(m){return m instanceof r.SqlInterval?m.valueInMilliseconds():m}static currentTimestamp(m){return f.convertToExecutingTimeZone(new Date,m)}static compare(m,Q,k,u){return w.sqlCompare(Q,k,m)}static calculate(m,Q,k,u){return g.sqlCalculateFunction(m,Q,k,u)}static evaluateTime(m){return f.parseTime(m)}static evaluateTimestamp(m,
Q,k){return f.parseTimestamp(m,Q,k)}static evaluateDate(m,Q){return f.parseDate(m,Q)}static evaluateFunction(m,Q,k){return F.evaluateFunction(m,Q,k)}static lookup(m,Q){m=Q[m];return void 0===m?null:m}static between(m,Q,k){return null==m||null==Q[0]||null==Q[1]?null:w.sqlCompare(m,Q[0],"\x3e\x3d")&&w.sqlCompare(m,Q[1],"\x3c\x3d")}static notbetween(m,Q,k){return null==m||null==Q[0]||null==Q[1]?null:w.sqlCompare(m,Q[0],"\x3c")||w.sqlCompare(m,Q[1],"\x3e")}static ternaryNot(m){return v(m)}static ternaryAnd(m,
Q){return x(m,Q)}static ternaryOr(m,Q){return D(m,Q)}}class R{constructor(m,Q,k="UTC"){this.fieldsIndex=Q;this.timeZone=k;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=t.WhereGrammar.parse(m);const {isStandardized:u,isAggregate:K,referencedFieldNames:I}=this._extractExpressionInfo(Q);this._referencedFieldNames=I;this.isStandardized=u;this.isAggregate=K}static convertValueToStorageFormat(m,Q=null){if(null===Q)return f.isDate(m)?m.getTime():f.isDateTime(m)?m.toMillis():f.isTimestampOffset(m)?
m.toStorageFormat():f.isTimeOnly(m)?m.toStorageString():f.isDateOnly(m)?m.toStorageFormat():m;switch(Q){case "date":if(f.isDate(m))return m.getTime();if(f.isDateTime(m))return m.toMillis();if(f.isTimestampOffset(m))return m.toMilliseconds();if(f.isDateOnly(m))return m.toNumber();break;case "date-only":if(f.isDate(m))return p.DateOnly.fromDateJS(m).toString();if(f.isTimestampOffset(m))return p.DateOnly.fromSqlTimeStampOffset(m).toString();if(f.isDateTime(m))return p.DateOnly.fromDateTime(m).toString();
break;case "time-only":if(f.isDate(m))return E.TimeOnly.fromDateJS(m).toStorageString();if(f.isDateTime(m))return E.TimeOnly.fromDateTime(m).toStorageString();if(f.isTimestampOffset(m))return E.TimeOnly.fromSqlTimeStampOffset(m).toStorageString();if(f.isTimeOnly(m))return m.toStorageString();break;case "timestamp-offset":if(f.isDate(m))return q.SqlTimeStampOffset.fromJSDate(m).toStorageFormat();if(f.isDateTime(m))return q.SqlTimeStampOffset.fromDateTime(m).toStorageFormat();if(f.isTimestampOffset(m))return m.toStorageFormat()}return m}static create(m,
Q,k="UTC"){return new R(m,Q,k)}get fieldNames(){return this._referencedFieldNames}testSet(m,Q=V){return!!this._evaluateNode(this.parseTree,null,Q,m)}calculateValue(m,Q=V){m=this._evaluateNode(this.parseTree,m,Q,null);return m instanceof r.SqlInterval?m.valueInMilliseconds()/864E5:m}calculateValueCompiled(m,Q=V){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(m,this.parameters,Q,this.fieldsIndex,this.timeZone);if(y("esri-csp-restrictions"))return this.calculateValue(m,
Q);this._compileMe();return this.parseTree._compiledVersion(m,this.parameters,Q,this.fieldsIndex,this.timeZone)}testFeature(m,Q=V){return!!this._evaluateNode(this.parseTree,m,Q,null)}testFeatureCompiled(m,Q=V){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(m,this.parameters,Q,this.fieldsIndex,this.timeZone);if(y("esri-csp-restrictions"))return this.testFeature(m,Q);this._compileMe();return!!this.parseTree._compiledVersion(m,this.parameters,Q,this.fieldsIndex,this.timeZone)}get hasDateFunctions(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,m=>{"current-time"===m.type?this._hasDateFunctions=!0:"function"===m.type&&(this._hasDateFunctions=this._hasDateFunctions||S.has(m.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const m=new Set;this._visitAll(this.parseTree,Q=>{"function"===Q.type&&m.add(Q.name.toLowerCase())});return Array.from(m)}getExpressions(){const m=new Map;this._visitAll(this.parseTree,Q=>{if("function"===
Q.type){const k=Q.name.toLowerCase();Q=Q.args.value[0];if("column-reference"===Q.type){Q=Q.column;const u=`${k}-${Q}`;m.has(u)||m.set(u,{aggregateType:k,field:Q})}}});return[...m.values()]}getVariables(){const m=new Set;this._visitAll(this.parseTree,Q=>{"parameter"===Q.type&&m.add(Q.value.toLowerCase())});return Array.from(m)}_compileMe(){const m="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter",
"fieldsIndex","timeZone",m)).bind(J)}_extractExpressionInfo(m){const Q=[],k=new Set;let u=!0,K=!1;this._visitAll(this.parseTree,I=>{switch(I.type){case "column-reference":var T=m?.get(I.column);let Y;T?T=Y=T.name??"":(Y=I.column,T=Y.toLowerCase());k.has(T)||(k.add(T),Q.push(Y));I.column=Y;break;case "function":const {name:ea,args:la}=I;I=la.value.length;u&&(u=F.isStandardized(ea,I));!1===K&&(K=M.isAggregate(ea,I))}});return{referencedFieldNames:Array.from(Q),isStandardized:u,isAggregate:K}}_visitAll(m,
Q){if(null!=m)switch(Q(m),m.type){case "when-clause":this._visitAll(m.operand,Q);this._visitAll(m.value,Q);break;case "case-expression":for(const k of m.clauses)this._visitAll(k,Q);"simple"===m.format&&this._visitAll(m.operand,Q);null!==m.else&&this._visitAll(m.else,Q);break;case "expression-list":for(const k of m.value)this._visitAll(k,Q);break;case "unary-expression":this._visitAll(m.expr,Q);break;case "binary-expression":this._visitAll(m.left,Q);this._visitAll(m.right,Q);break;case "function":this._visitAll(m.args,
Q)}}evaluateNodeToJavaScript(m){switch(m.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(m.value)+", "+JSON.stringify(m.qualifier)+","+JSON.stringify(m.op)+")";case "case-expression":var Q="";if("simple"===m.format){var k=this.evaluateNodeToJavaScript(m.operand);Q="( ";for(let u=0;u<m.clauses.length;u++)Q+=" (this.compare('\x3d',"+k+","+this.evaluateNodeToJavaScript(m.clauses[u].operand)+") ? ("+this.evaluateNodeToJavaScript(m.clauses[u].value)+") : "}else for(Q=
"( ",k=0;k<m.clauses.length;k++)Q+=" this.makeBool("+this.evaluateNodeToJavaScript(m.clauses[k].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(m.clauses[k].value)+") : ";Q=null!==m.else?Q+this.evaluateNodeToJavaScript(m.else):Q+"null";return Q+" )";case "parameter":return"this.lookup("+JSON.stringify(m.value.toLowerCase())+",lookups)";case "expression-list":Q="[";for(k of m.value)"["!==Q&&(Q+=","),Q+=this.evaluateNodeToJavaScript(k);return Q+"]";case "unary-expression":return"this.ternaryNot("+
this.evaluateNodeToJavaScript(m.expr)+")";case "binary-expression":switch(m.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "IS":if("null"!==m.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+")";case "ISNOT":if("null"!==
m.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(m.left)+
","+this.evaluateNodeToJavaScript(m.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+
"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+", timeZone)"}throw new A.SqlError(A.SqlErrorCodes.UnsupportedOperator,{operator:m.operator});
case "null":case "boolean":case "string":case "number":return JSON.stringify(m.value);case "time":return"this.evaluateTime(JSON.stringify(node.value))";case "date":return"this.evaluateDate(JSON.stringify(node.value), 'unknown')";case "timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), 'unknown')";case "current-time":return"date"===m.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(m.column)+
",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(m.name)+","+this.evaluateNodeToJavaScript(m.args)+", timeZone)"}throw new A.SqlError(A.SqlErrorCodes.UnsupportedSyntax,{node:m.type});}_evaluateNode(m,Q,k,u){switch(m.type){case "interval":return k=this._evaluateNode(m.value,Q,k,u),r.SqlInterval.createFromValueAndQualifer(k,m.qualifier,m.op);case "case-expression":if("simple"===m.format){var K=this._evaluateNode(m.operand,Q,k,u);for(var I=0;I<m.clauses.length;I++)if(w.sqlCompare(K,
this._evaluateNode(m.clauses[I].operand,Q,k,u),"\x3d",this.timeZone))return this._evaluateNode(m.clauses[I].value,Q,k,u)}else for(K=0;K<m.clauses.length;K++)if(!0===this._evaluateNode(m.clauses[K].operand,Q,k,u))return this._evaluateNode(m.clauses[K].value,Q,k,u);return null!==m.else?this._evaluateNode(m.else,Q,k,u):null;case "parameter":return m=this.parameters[m.value.toLowerCase()],f.isDate(m)?n.DateTime.fromJSDate(m):m instanceof e.ArcadeDate?m.toDateTime():m;case "expression-list":K=[];for(var T of m.value)K.push(this._evaluateNode(T,
Q,k,u));return K;case "unary-expression":return v(this._evaluateNode(m.expr,Q,k,u));case "binary-expression":switch(m.operator){case "AND":return x(this._evaluateNode(m.left,Q,k,u),this._evaluateNode(m.right,Q,k,u));case "OR":return D(this._evaluateNode(m.left,Q,k,u),this._evaluateNode(m.right,Q,k,u));case "IS":if("null"!==m.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(m.left,Q,k,u);case "ISNOT":if("null"!==m.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);
return null!==this._evaluateNode(m.left,Q,k,u);case "IN":return K=a(this._evaluateNode(m.right,Q,k,u)),N(this._evaluateNode(m.left,Q,k,u),K);case "NOT IN":return K=a(this._evaluateNode(m.right,Q,k,u)),v(N(this._evaluateNode(m.left,Q,k,u),K));case "BETWEEN":return K=this._evaluateNode(m.left,Q,k,u),m=this._evaluateNode(m.right,Q,k,u),null==K||null==m[0]||null==m[1]?null:w.sqlCompare(K,m[0],"\x3e\x3d",this.timeZone)&&w.sqlCompare(K,m[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return K=this._evaluateNode(m.left,
Q,k,u),m=this._evaluateNode(m.right,Q,k,u),null==K||null==m[0]||null==m[1]?null:w.sqlCompare(K,m[0],"\x3c",this.timeZone)||w.sqlCompare(K,m[1],"\x3e",this.timeZone);case "LIKE":return d(this._evaluateNode(m.left,Q,k,u),this._evaluateNode(m.right,Q,k,u),m.escape);case "NOT LIKE":return v(d(this._evaluateNode(m.left,Q,k,u),this._evaluateNode(m.right,Q,k,u),m.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return w.sqlCompare(this._evaluateNode(m.left,Q,k,
u),this._evaluateNode(m.right,Q,k,u),m.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return g.sqlCalculateFunction(m.operator,this._evaluateNode(m.left,Q,k,u),this._evaluateNode(m.right,Q,k,u),this.timeZone)}case "null":case "boolean":case "string":case "number":return m.value;case "date":return m.parsedValue??(m.parsedValue=f.parseDate(m.value,"unknown")),m.parsedValue;case "timestamp":return m.parsedValue??(m.parsedValue=f.parseTimestamp(m.value,"unknown")),m.parsedValue;
case "time":return f.parseTime(m.value);case "current-time":return"date"===m.mode?p.DateOnly.fromNow(this.timeZone):f.convertToExecutingTimeZone(new Date,this.timeZone);case "column-reference":return H(Q,m.column,this.fieldsIndex,k);case "data-type":return m.value;case "function":if(this.isAggregate&&M.isAggregate(m.name,m.args.value.length)){Q=[];for(K of m.args?.value||[]){T=[];for(I of u||[])T.push(this._evaluateNode(K,I,k,null));Q.push(T)}return M.aggregateFunction(m.name,Q)}k=this._evaluateNode(m.args,
Q,k,u);return F.evaluateFunction(m.name,k,this.timeZone)}throw new A.SqlError(A.SqlErrorCodes.UnsupportedSyntax,{node:m.type});}}var O;(function(m){m[m.Normal=0]="Normal";m[m.Escaped=1]="Escaped"})(O||(O={}));const V={getAttribute(m,Q){return(m&&"object"===typeof m.attributes?m.attributes:m)[Q]}};c.WhereClause=R;c.defaultAttributeAdapter=V;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone",
"../chunks/datetime"],function(c,e,A,y){function M(r,q,F){return r<q?r-q:r>F?r-F:0}function p(r,q=!0){if(r instanceof y.Zone)return r;if("system"===r.toLowerCase())return"system";if("utc"===r.toLowerCase())return"UTC";if("unknown"===r.toLowerCase())return A.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(r)){const F=y.FixedOffsetZone.parseSpecifier("UTC"+(r.startsWith("+")||r.startsWith("-")?"":"+")+r);if(F)return F}r=y.IANAZone.create(r);if(!r.isValid){if(q)throw new w(c.ArcadeDateErrorCodes.TimeZoneNotRecognized);
return null}return r}c.ArcadeDateErrorCodes=void 0;(c.ArcadeDateErrorCodes||(c.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const g={[c.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class w extends Error{constructor(r,q){super(e.replace(g[r],q));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,w)}}class f{constructor(r){this._date=r;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(r=
0,q=1,F=1,E=0,t=0,n=0,a=0,v){if(isNaN(r)||isNaN(q)||isNaN(F)||isNaN(E)||isNaN(t)||isNaN(n)||isNaN(a))return null;const x=y.DateTime.local(r,q).daysInMonth;r=y.DateTime.fromObject({day:1>F?1:F>x?x:F,year:r,month:1>q?1:12<q?12:q,hour:0>E?0:23<E?23:E,minute:0>t?0:59<t?59:t,second:0>n?0:59<n?59:n,millisecond:0>a?0:999<a?999:a},{zone:p(v)});r=r.plus({months:M(q,1,12),days:M(F,1,x),hours:M(E,0,23),minutes:M(t,0,59),seconds:M(n,0,59),milliseconds:M(a,0,999)});return new f(r)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??
"system"}static arcadeDateAndZoneToArcadeDate(r,q){q=p(q);return r.isUnknownTimeZone||q===A.UnknownTimeZone.instance?f.fromParts(r.year,r.monthJS+1,r.day,r.hour,r.minute,r.second,r.millisecond,q):new f(r._date.setZone(q))}static dateJSToArcadeDate(r){return new f(y.DateTime.fromJSDate(r,{zone:"system"}))}static dateJSAndZoneToArcadeDate(r,q="system"){q=p(q);return new f(y.DateTime.fromJSDate(r,{zone:q}))}static unknownEpochToArcadeDate(r){return new f(y.DateTime.fromMillis(r,{zone:A.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(r){return new f(y.DateTime.fromMillis(r.getTime(),
{zone:A.UnknownTimeZone.instance}))}static epochToArcadeDate(r,q="system"){q=p(q);return new f(y.DateTime.fromMillis(r,{zone:q}))}static dateTimeToArcadeDate(r){return new f(r)}clone(){return new f(this._date)}changeTimeZone(r){r=p(r);return f.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(r,q){q=p(q);return r.zone===A.UnknownTimeZone.instance||q===A.UnknownTimeZone.instance?f.fromParts(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond,q):new f(r.setZone(q))}static nowToArcadeDate(r){r=
p(r);return new f(y.DateTime.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new f(y.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===f.systemTimeZoneCanonicalName}equals(r){return this.isSystem&&r.isSystem?this.toNumber()===r.toNumber():this.isUnknownTimeZone!==r.isUnknownTimeZone?!1:this._date.equals(r._date)}get isUnknownTimeZone(){return this._date.zone===A.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let r=
this._date.weekday;6<r&&(r=0);return r}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const r=this.zone;return"fixed"===r.type?0===r.fixed?"UTC":r.formatOffset(0,"short"):r.name}stringify(){return JSON.stringify(this.toJSDate())}plus(r){return new f(this._date.plus(r))}diff(r,q="milliseconds"){return this._date.diff(r._date,q)[q]}toISODate(){return this._date.toISODate()}toISOString(r){return r?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(r,q){return this._date.toISOTime({suppressMilliseconds:r,
includeOffset:q&&!this.isUnknownTimeZone})}toFormat(r,q){this.isUnknownTimeZone&&(r=r.replaceAll("Z",""));return this._date.toFormat(r,q)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new f(this._date.toUTC())}toLocal(){return new f(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(r){if(!r)return null;
r=y.DateTime.fromISO(r,{setZone:!0});return new f(r)}}c.ArcadeDate=f;c.ArcadeDateError=w;c.ArcadeDateErrorMessages=g;c.createDateTimeZone=p;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(c,e){function A(M){return M instanceof e.Zone?M===y.instance?!0:!1:"unknown"===M?.toString().toLowerCase()?!0:!1}class y{}y.instance=new e.IANAZone("Etc/UTC");c.UnknownTimeZone=y;c.adoptTimeZone=function(M,
p){return e.DateTime.fromObject({day:M.day,year:M.year,month:M.month,hour:M.hour,minute:M.minute,second:M.second,millisecond:M.millisecond},{zone:p})};c.isUnknownTimeZone=A;c.substituteUnknownTimezone=function(M){return A(M)?y.instance:M};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../core/string"],function(c,e){c.SqlErrorCodes=void 0;(function(g){g.InvalidFunctionParameters="InvalidFunctionParameters";
g.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";g.UnsupportedSqlFunction="UnsupportedSqlFunction";g.UnsupportedOperator="UnsupportedOperator";g.UnsupportedSyntax="UnsupportedSyntax";g.UnsupportedIsRhs="UnsupportedIsRhs";g.UnsupportedIsLhs="UnsupportedIsLhs";g.InvalidDataType="InvalidDataType";g.CannotCastValue="CannotCastValue";g.FunctionNotRecognized="FunctionNotRecognized";g.InvalidTime="InvalidTime";g.InvalidParameterCount="InvalidParameterCount";g.InvalidTimeStamp="InvalidTimeStamp";
g.InvalidDate="InvalidDate";g.InvalidOperator="InvalidOperator";g.IllegalInterval="IllegalInterval";g.YearMonthIntervals="YearMonthIntervals";g.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";g.MissingStatisticParameters="MissingStatisticParameters"})(c.SqlErrorCodes||(c.SqlErrorCodes={}));const A={[c.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[c.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[c.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",
[c.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[c.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[c.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[c.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[c.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[c.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[c.SqlErrorCodes.InvalidDate]:"Invalid date encountered",
[c.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[c.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[c.SqlErrorCodes.IllegalInterval]:"Illegal interval",[c.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[c.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[c.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[c.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[c.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",
[c.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class y extends Error{constructor(g,w){super(e.replace(A[g],w));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,y)}}c.FeatureSetErrorCodes=void 0;(function(g){g.NeverReach="NeverReach";g.NotImplemented="NotImplemented";g.Cancelled="Cancelled";g.InvalidStatResponse="InvalidStatResponse";g.InvalidRequest="InvalidRequest";g.RequestFailed="RequestFailed";
g.MissingFeatures="MissingFeatures";g.AggregationFieldNotFound="AggregationFieldNotFound";g.DataElementsNotFound="DataElementsNotFound"})(c.FeatureSetErrorCodes||(c.FeatureSetErrorCodes={}));const M={[c.FeatureSetErrorCodes.Cancelled]:"Cancelled",[c.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[c.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[c.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[c.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[c.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[c.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[c.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[c.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};class p extends Error{constructor(g,w){super(e.replace(M[g],w));this.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(this,p)}}c.FeatureSetError=
p;c.FeatureSetErrorMessages=M;c.SqlError=y;c.SqlErrorMessages=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(c,e,A,y,M,p){function g(q){if(null===q)return null;let F=0,E=0;for(let t=0;t<q.length;t++){const n=q[t];if(null!==n){if("number"!==typeof n)throw new e.SqlError(e.SqlErrorCodes.InvalidValueForAggregateFunction);
E++;F+=n}}return 0===E?null:F/q.length}function w(q,F){if(null===q)return null;let E=null,t=null;for(const n of q)q=n,q=n instanceof A.DateOnly?n.toNumber():n instanceof M.TimeOnly?n.toNumber():n instanceof p.DateTime?n.toMillis():n instanceof y.SqlTimeStampOffset?n.toMilliseconds():n,null===E?(E=n,t=q):"max"===F&&null!==t&&null!==q&&t<=q?(E=n,t=q):"min"===F&&null!==t&&null!==q&&t>=q&&(E=n,t=q);return E}function f(q){if(null===q)return null;q=q.filter(t=>null!==t);if(0===q.length)return null;const F=
g(q);if(null===F)return null;let E=0;for(const t of q){if("number"!==typeof t)throw new e.SqlError(e.SqlErrorCodes.InvalidValueForAggregateFunction);E+=(F-t)**2}return E/(q.length-1)}const r={min:{minParams:1,maxParams:1,evaluate:q=>w(q[0],"min")},max:{minParams:1,maxParams:1,evaluate:q=>w(q[0],"max")},avg:{minParams:1,maxParams:1,evaluate:q=>g(q[0])},sum:{minParams:1,maxParams:1,evaluate:q=>{q=q[0];if(null===q)q=null;else{var F=0;for(let E=0;E<q.length;E++){const t=q[E];if(null!==t){if("number"!==
typeof t)throw new e.SqlError(e.SqlErrorCodes.InvalidValueForAggregateFunction);F+=t}}q=F}return q}},stddev:{minParams:1,maxParams:1,evaluate:q=>{q=q[0];null===q?q=null:(q=f(q),q=null===q?null:Math.sqrt(q));return q}},count:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].length},var:{minParams:1,maxParams:1,evaluate:q=>f(q[0])}};c.aggregateFunction=function(q,F){const E=r[q.toLowerCase()];if(null==E)throw new e.SqlError(e.SqlErrorCodes.FunctionNotRecognized);if(F.length<E.minParams||F.length>
E.maxParams)throw new e.SqlError(e.SqlErrorCodes.InvalidParameterCount,{name:q.toUpperCase()});return E.evaluate(F)};c.isAggregate=function(q,F){q=r[q.toLowerCase()];return null!=q&&F>=q.minParams&&F<=q.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(c,e,A,y){function M(g){g=g.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let w="";const f=
/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of g.match(f)||[])switch(r){case "D":w+="d";break;case "DD":w+="dd";break;case "DDD":w+="o";break;case "d":w+="c";break;case "ddd":w+="ccc";break;case "dddd":w+="cccc";break;case "M":w+="L";break;case "MM":w+="LL";break;case "MMM":w+="LLL";break;case "MMMM":w+="LLLL";break;case "YY":w+="yy";
break;case "Y":case "YYYY":w+="yyyy";break;case "Q":w+="q";break;case "X":case "x":w+=r;break;default:w=2<=r.length&&"["===r.slice(0,1)&&"]"===r.slice(-1)?w+`'${r.slice(1,-1)}'`:w+`'${r}'`}return w}class p{constructor(g,w,f){this._year=g;this._month=w;this._day=f;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(g){return g instanceof
p&&g.day===this.day&&g.month===this.month&&g.year===this.year}clone(){return new p(this._year,this._month,this._day)}toDateTime(g){return y.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:e.createDateTimeZone(g)})}toDateTimeLuxon(g){return y.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:e.createDateTimeZone(g)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(g=
null){if(null===g||""===g)return this.toString();g=M(g);if(!g)return"";const w=this.toDateTime("unknown");return e.ArcadeDate.dateTimeToArcadeDate(w).toFormat(g,{locale:A.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const g=this.toDateTime("unknown");return e.ArcadeDate.dateTimeToArcadeDate(g)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(g,w){return p.fromDateTime(this.toUTCDateTime().plus({[g]:w}))}toUTCDateTime(){return y.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(g,w){switch(w.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(g.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===w?this.toUTCDateTime().diff(g.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(g.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(g.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(g.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(g.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(g){g=y.DateTime.fromMillis(g,{zone:y.FixedOffsetZone.utcInstance});return g.isValid?p.fromParts(g.year,g.month,g.day):null}static fromSeconds(g){g=y.DateTime.fromSeconds(g,{zone:y.FixedOffsetZone.utcInstance});return g.isValid?p.fromParts(g.year,g.month,g.day):null}static fromReader(g){if(!g)return null;g=g.split("-");return 3!==g.length?null:new p(parseInt(g[0],10),parseInt(g[1],
10),parseInt(g[2],10))}static fromParts(g,w,f){g=new p(g,w,f);return!1===g.isValid?null:g}static fromDateJS(g){return p.fromParts(g.getFullYear(),g.getMonth()+1,g.getDay())}static fromDateTime(g){return p.fromParts(g.year,g.month,g.day)}static fromSqlTimeStampOffset(g){return this.fromDateTime(g.toDateTime())}static fromString(g,w=null){if(""===g||null===g)return null;var f=[];if(w)(w=M(w))&&f.push(w);else if(null===w||""===w)return g=y.DateTime.fromISO(g,{setZone:!0}),g.isValid?p.fromParts(g.year,
g.month,g.day):null;for(const r of f)if(f=y.DateTime.fromFormat(g,w??r),f.isValid)return new p(f.year,f.month,f.day);return null}static fromNow(g="system"){g=y.DateTime.fromJSDate(new Date).setZone(e.createDateTimeZone(g));return new p(g.year,g.month,g.day)}}c.DateOnly=p;c.standardiseDateOnlyFormat=M;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports","../../chunks/datetime"],function(c,e){function A(M){return Number.isNaN(M)||
0===M?M:Math.trunc(M)}class y{constructor(M){this._timeStampOffset=M;this._date=null}toDateTime(){this._date??(this._date=e.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return A(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return A(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return y.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(M){return new y(e.DateTime.fromJSDate(M).toISO({includeOffset:!0}))}static fromDateTime(M){return new y(M.toISO({includeOffset:!0}))}static fromParts(M,
p,g=0,w=0,f=0,r=0,q=0,F=!1,E=0,t=0){M=`${M.toString().padStart(4,"0")}-${p.toString().padStart(2,"0")}-${g.toString().padStart(2,"0")}`;p="";10>r&&(p="0");w=`${w.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}:${p+r.toString()}`;0!==q&&(w+="."+q.toString().padStart(3,"0"));q=`${F?"-":"+"}${E.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return new y(M+"T"+w+q)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let M=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});M&&(M=M.replace(".000",""));return M}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(M){M=this.toDateTime().plus(M);return y.fromDateTime(M)}}c.SqlTimeStampOffset=y;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(c,e,A,y){function M(g){if(!g)return"";const w=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let f="";for(const r of g.match(w)||
[])switch(r){case "SSS":f+=r;break;case "A":case "a":f+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":f+=r;break;default:f+=`'${r}'`}return f}class p{constructor(g,w,f,r){this._hour=g;this._minute=w;this._second=f;this._millisecond=r;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(g){return g instanceof p&&g.hour===
this.hour&&g.minute===this.minute&&g.second===this.second&&g.millisecond===this.millisecond}clone(){return new p(this.hour,this.minute,this.second,this.millisecond)}isValid(){return e.isInteger(this.hour)&&e.isInteger(this.minute)&&e.isInteger(this.second)&&e.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(g=null){return null===g||""===g?this.toString():(g=M(g))?y.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(g,{locale:A.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(g,w,f,r){g=new p(g,w,f,r);return g.isValid()?g:null}static fromReader(g){if(!g)return null;g=g.split(":");return 3!==g.length?null:new p(parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],
10),0)}static fromMilliseconds(g){return 864E5<g||0>g?null:new p(Math.floor(g/36E5%24),Math.floor(g/6E4%60),Math.floor(g/1E3%60),Math.floor(g%1E3))}static fromDateJS(g){return new p(g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds())}static fromDateTime(g){return new p(g.hour,g.minute,g.second,g.millisecond)}static fromSqlTimeStampOffset(g){return this.fromDateTime(g.toDateTime())}static fromString(g,w=null){if(""===g||null===g)return null;const f=[];if(w)(w=M(w))&&f.push(w);else if(null===
w||""===w)f.push("HH:mm:ss"),f.push("HH:mm:ss.SSS"),f.push("hh:mm:ss a"),f.push("hh:mm:ss.SSS a"),f.push("HH:mm"),f.push("hh:mm a"),f.push("H:mm"),f.push("h:mm a"),f.push("H:mm:ss"),f.push("h:mm:ss a"),f.push("H:mm:ss.SSS"),f.push("h:mm:ss.SSS a");for(const r of f)if(w=y.DateTime.fromFormat(g,r),w.isValid)return new p(w.hour,w.minute,w.second,w.millisecond);return null}plus(g,w){switch(g){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return p.fromDateTime(this.toUTCDateTime().plus({[g]:w}))}return null}toUTCDateTime(){return y.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(g,w){switch(w.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(g.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===w?this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(g.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(g.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(g.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(g.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds}}}c.TimeOnly=p;c.standardiseTimeFormat=M;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(c,e){c.cloneGeometry=function(A){if(null==A)return null;const y=A.clone();void 0!==A.cache._geVersion&&(y.cache._geVersion=A.cache._geVersion);return y};c.convertLinearUnitsToCode=function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};c.convertSquareUnitsToCode=
function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};c.isInteger=function(A){return"number"===typeof A&&isFinite(A)&&Math.floor(A)===A};c.sameGeomType=function(A,y){return A===y||"point"===A&&"esriGeometryPoint"===y||"polyline"===A&&"esriGeometryPolyline"===
y||"polygon"===A&&"esriGeometryPolygon"===y||"extent"===A&&"esriGeometryEnvelope"===y||"multipoint"===A&&"esriGeometryMultipoint"===y||"point"===y&&"esriGeometryPoint"===A||"polyline"===y&&"esriGeometryPolyline"===A||"polygon"===y&&"esriGeometryPolygon"===A||"extent"===y&&"esriGeometryEnvelope"===A||"multipoint"===y&&"esriGeometryMultipoint"===A?!0:!1};c.shapeExtent=function(A){if(null==A)return null;switch(A.type){case "polygon":case "multipoint":case "polyline":return A.extent;case "point":return new e({xmin:A.x,
ymin:A.y,xmax:A.x,ymax:A.y,spatialReference:A.spatialReference});case "extent":return A}return null};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","../../arcade/featureset/support/errorsupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(c,e,A,y,M){function p(z,G,L){switch(L){case "+":return z+G;case "-":return z-G;case "*":return z*G;case "/":return z/G}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
}function g(z,G,L){switch(L){case "+":return G.plus({milliseconds:z.valueInMilliseconds()});case "-":return z.valueInMilliseconds()-G.toMillis()}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function w(z,G,L){switch(L){case "+":return G.plus("milliseconds",z.valueInMilliseconds())}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function f(z,G,L){switch(L){case "+":return G.plus("milliseconds",z.valueInMilliseconds())}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function r(z,
G,L){switch(L){case "+":return z.plus("milliseconds",G.valueInMilliseconds());case "-":return z.plus("milliseconds",-1*G.valueInMilliseconds())}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function q(z,G,L){switch(L){case "+":return G.addMilliseconds(z.valueInMilliseconds())}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function F(z,G,L){switch(L){case "+":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()+G.valueInMilliseconds());case "-":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()-
G.valueInMilliseconds());case "*":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()*G.valueInMilliseconds());case "/":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()/G.valueInMilliseconds())}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function E(z,G,L){switch(L){case "+":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()+G);case "-":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()-G);case "*":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()*
G);case "/":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()/G)}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function t(z,G,L){switch(L){case "+":return y.SqlInterval.createFromMilliseconds(z+G.valueInMilliseconds());case "-":return y.SqlInterval.createFromMilliseconds(z-G.valueInMilliseconds());case "*":return y.SqlInterval.createFromMilliseconds(z*G.valueInMilliseconds());case "/":return y.SqlInterval.createFromMilliseconds(z/G.valueInMilliseconds())}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
}function n(z,G,L){switch(L){case "+":return z.plus("milliseconds",G.valueInMilliseconds());case "-":return z.plus("milliseconds",-1*G.valueInMilliseconds())}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function a(z,G,L){switch(L){case "+":return z.plus({milliseconds:G.valueInMilliseconds()});case "-":return z.minus({milliseconds:G.valueInMilliseconds()})}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function v(z,G,L){switch(L){case "+":return z.addMilliseconds(G.valueInMilliseconds());
case "-":return z.addMilliseconds(-1*G.valueInMilliseconds())}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function x(z,G,L){G*=864E5;switch(L){case "+":return z.plus({milliseconds:G});case "-":return z.minus({milliseconds:G})}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function D(z,G,L){G*=864E5;switch(L){case "+":return z.plus("milliseconds",G);case "-":return z.plus("milliseconds",-1*G)}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function N(z,G,L){G*=864E5;switch(L){case "+":return z.plus("milliseconds",
G);case "-":return z.plus("milliseconds",-1*G)}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function d(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function H(z,G,L){G*=864E5;switch(L){case "+":return z.addMilliseconds(G);case "-":return z.addMilliseconds(-1*G)}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function S(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function J(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function R(z,
G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function O(z,G,L){G=parseFloat(G);if(isNaN(G))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);return p(z,G,L)}function V(z,G,L){z=parseFloat(z);if(isNaN(z))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);return p(z,G,L)}function m(z,G,L){switch(L){case "+":return z+G}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function Q(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function k(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
}function u(z,G,L){switch(L){case "-":return z.toDateTimeLuxon(G.zone).diff(G).as("days")}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function K(z,G,L){switch(L){case "-":return z.toDateTimeLuxon(G.toDateTime().zone).diff(G.toDateTime()).as("days")}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function I(z,G,L){switch(L){case "-":return z.toDateTimeLuxon("UTC").diff(G.toDateTimeLuxon("UTC")).as("days")}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function T(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
}function Y(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function ea(z,G,L){switch(L){case "-":return z.toDateTime().diff(G.toDateTimeLuxon(z.toDateTime().zone)).as("days")}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function la(z,G,L){switch(L){case "-":return z.toDateTime().diff(G).as("days")}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function na(z,G,L){switch(L){case "-":return z.toDateTime().diff(G.toDateTime()).as("days")}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
}function ua(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function ta(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function pa(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function va(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function wa(z,G,L){switch(L){case "-":return z.diff(G).as("days")}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function Da(z,G,L){switch(L){case "-":return z.diff(G.toDateTimeLuxon(z.zone)).as("days")}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
}function Ia(z,G,L){switch(L){case "-":return z.diff(G.toDateTime()).as("days")}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function Pa(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function Na(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function Sa(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function Va(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function h(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
}function C(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function X(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function aa(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}function ha(z,G,L){throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}c.calculateDateOnlyAndDateOnly=I;c.calculateDateOnlyAndDateTime=u;c.calculateDateOnlyAndNumber=D;c.calculateDateOnlyAndSqlInterval=n;c.calculateDateOnlyAndString=Na;c.calculateDateOnlyAndTimeOnly=T;c.calculateDateOnlyAndTimestamp=
K;c.calculateDateTimeAndDateOnly=Da;c.calculateDateTimeAndDateTime=wa;c.calculateDateTimeAndNumber=x;c.calculateDateTimeAndSqlInterval=a;c.calculateDateTimeAndString=Va;c.calculateDateTimeAndTimeOnly=Pa;c.calculateDateTimeAndTimestamp=Ia;c.calculateNumberAndDateOnly=R;c.calculateNumberAndDateTime=d;c.calculateNumberAndNumber=p;c.calculateNumberAndSqlInterval=t;c.calculateNumberAndString=O;c.calculateNumberAndTimeOnly=J;c.calculateNumberAndTimestamp=S;c.calculateSqlIntervalAndDateOnly=f;c.calculateSqlIntervalAndDateTime=
g;c.calculateSqlIntervalAndNumber=E;c.calculateSqlIntervalAndSqlInterval=F;c.calculateSqlIntervalAndString=Q;c.calculateSqlIntervalAndTimeOnly=w;c.calculateSqlIntervalAndTimestamp=q;c.calculateStringAndDateOnly=X;c.calculateStringAndDateTime=aa;c.calculateStringAndNumber=V;c.calculateStringAndSqlInterval=k;c.calculateStringAndString=m;c.calculateStringAndTimeOnly=C;c.calculateStringAndTimestamp=ha;c.calculateTimeOnlyAndDateOnly=ta;c.calculateTimeOnlyAndDateTime=ua;c.calculateTimeOnlyAndNumber=N;c.calculateTimeOnlyAndSqlInterval=
r;c.calculateTimeOnlyAndString=Sa;c.calculateTimeOnlyAndTimeOnly=va;c.calculateTimeOnlyAndTimestamp=pa;c.calculateTimestampAndDateOnly=ea;c.calculateTimestampAndDateTime=la;c.calculateTimestampAndNumber=H;c.calculateTimestampAndSqlInterval=v;c.calculateTimestampAndString=h;c.calculateTimestampAndTimeOnly=Y;c.calculateTimestampAndTimestamp=na;c.sqlCalculateFunction=function(z,G,L,W){if("||"===z)return M.evaluateFunction("concat",[G,L],W);if(null===G||null===L)return null;if(A.isNumber(G)){if(A.isNumber(L))return p(G,
L,z);if(A.isSqlInterval(L))return t(G,L,z);if(A.isTimeOnly(L))return J();if(A.isDateOnly(L))return R();if(A.isTimestampOffset(L))return S();if(A.isDateTime(L))return d();if(A.isString(L))return O(G,L,z)}else if(A.isDateOnly(G)){if(A.isNumber(L))return D(G,L,z);if(A.isSqlInterval(L))return n(G,L,z);if(A.isTimeOnly(L))return T();if(A.isDateOnly(L))return I(G,L,z);if(A.isTimestampOffset(L))return K(G,L,z);if(A.isDateTime(L))return u(G,L,z);if(A.isString(L))return Na()}else if(A.isTimeOnly(G)){if(A.isNumber(L))return N(G,
L,z);if(A.isSqlInterval(L))return r(G,L,z);if(A.isTimeOnly(L))return va();if(A.isDateOnly(L))return ta();if(A.isTimestampOffset(L))return pa();if(A.isDateTime(L))return ua();if(A.isString(L))return Sa()}else if(A.isSqlInterval(G)){if(A.isNumber(L))return E(G,L,z);if(A.isSqlInterval(L))return F(G,L,z);if(A.isTimeOnly(L))return w(G,L,z);if(A.isDateOnly(L))return f(G,L,z);if(A.isTimestampOffset(L))return q(G,L,z);if(A.isDateTime(L))return g(G,L,z);if(A.isString(L))return Q()}else if(A.isDateTime(G)){if(A.isNumber(L))return x(G,
L,z);if(A.isSqlInterval(L))return a(G,L,z);if(A.isTimeOnly(L))return Pa();if(A.isDateOnly(L))return Da(G,L,z);if(A.isTimestampOffset(L))return Ia(G,L,z);if(A.isDateTime(L))return wa(G,L,z);if(A.isString(L))return Va()}else if(A.isTimestampOffset(G)){if(A.isNumber(L))return H(G,L,z);if(A.isSqlInterval(L))return v(G,L,z);if(A.isTimeOnly(L))return Y();if(A.isDateOnly(L))return ea(G,L,z);if(A.isTimestampOffset(L))return na(G,L,z);if(A.isDateTime(L))return la(G,L,z);if(A.isString(L))return h()}else if(A.isString(G)){if(A.isNumber(L))return V(G,
L,z);if(A.isSqlInterval(L))return k();if(A.isTimeOnly(L))return C();if(A.isDateOnly(L))return X();if(A.isTimestampOffset(L))return ha();if(A.isDateTime(L))return aa();if(A.isString(L))return m(G,L,z)}throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,e,A,y,M,p,g,w){function f(x,D,N){N=t.exec(x);if(null!==N){const [,d,H,S,J,R,O,V]=N;x=w.DateTime.fromObject({year:parseInt(d,10),month:parseInt(H,10),day:parseInt(S,10),hour:parseInt(J,10),minute:parseInt(R,10),second:parseInt(O,10),millisecond:V?parseInt(V.replace(".",""),10):0},{zone:g.substituteUnknownTimezone(D)});if(!1===x.isValid)throw new e.SqlError(e.SqlErrorCodes.InvalidTimeStamp);return x}N=n.exec(x);if(null!==N){const [,d,H,S,J,R,O,V,m,Q,k]=N;x=M.SqlTimeStampOffset.fromParts(parseInt(d,
10),parseInt(H,10),parseInt(S,10),parseInt(J,10),parseInt(R,10),parseInt(O,10),V?parseInt(V.replace(".",""),10):0,"-"===m,parseInt(Q,10),parseInt(k,10));if(!1===x.isValid)throw new e.SqlError(e.SqlErrorCodes.InvalidTimeStamp);return x}N=a.exec(x);if(null!==N){const [,d,H,S,J,R,O,V,m]=N;x=M.SqlTimeStampOffset.fromParts(parseInt(d,10),parseInt(H,10),parseInt(S,10),parseInt(J,10),parseInt(R,10),0,0,"-"===O,parseInt(V,10),parseInt(m,10));if(!1===x.isValid)throw new e.SqlError(e.SqlErrorCodes.InvalidTimeStamp);
return x}N=v.exec(x);if(null!==N){const [,d,H,S,J,R]=N;x=w.DateTime.fromObject({year:parseInt(d,10),month:parseInt(H,10),day:parseInt(S,10),hour:parseInt(J,10),minute:parseInt(R,10),second:0},{zone:g.substituteUnknownTimezone(D)});if(!1===x.isValid)throw new e.SqlError(e.SqlErrorCodes.InvalidTimeStamp);return x}N=E.exec(x);if(null!==N){const [,d,H,S]=N;x=w.DateTime.fromObject({year:parseInt(d,10),month:parseInt(H,10),day:parseInt(S,10),hour:0,minute:0,second:0},{zone:g.substituteUnknownTimezone(D)});
if(!1===x.isValid)throw new e.SqlError(e.SqlErrorCodes.InvalidTimeStamp);return x}throw new e.SqlError(e.SqlErrorCodes.InvalidTimeStamp);}const r=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,q=/^(\d{1,2}):(\d{1,2})$/,F=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,t=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,n=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,
v=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;c.convertToExecutingTimeZone=function(x,D){if(D instanceof w.Zone)return D===g.UnknownTimeZone.instance?w.DateTime.fromMillis(x.getTime(),{zone:g.UnknownTimeZone.instance}):w.DateTime.fromJSDate(x,{zone:D});switch(D){case "system":case "local":case null:return w.DateTime.fromJSDate(x);default:return"unknown"===D?.toLowerCase()?w.DateTime.fromMillis(x.getTime(),{zone:g.UnknownTimeZone.instance}):w.DateTime.fromJSDate(x,{zone:D})}};c.isDate=function(x){return x instanceof
Date};c.isDateOnly=function(x){return x instanceof A.DateOnly};c.isDateTime=function(x){return x instanceof w.DateTime};c.isNumber=function(x){return"number"===typeof x};c.isSqlInterval=function(x){return x instanceof y.SqlInterval};c.isString=function(x){return"string"===typeof x||x instanceof String};c.isTimeOnly=function(x){return x instanceof p.TimeOnly};c.isTimestampOffset=function(x){return x instanceof M.SqlTimeStampOffset};c.parseDate=function(x,D){const N=E.exec(x);if(null===N)try{return f(x,
D)}catch{throw new e.SqlError(e.SqlErrorCodes.InvalidDate);}const [,d,H,S]=N;x=A.DateOnly.fromParts(parseInt(d,10),parseInt(H,10),parseInt(S,10));if(null===x)throw new e.SqlError(e.SqlErrorCodes.InvalidDate);return x};c.parseTime=function(x){let D=r.exec(x);if(null!==D){const [,N,d,H]=D;x=p.TimeOnly.fromParts(parseInt(N,10),parseInt(d,10),parseInt(H,10),0);if(null!==x)return x;throw new e.SqlError(e.SqlErrorCodes.InvalidTime);}D=q.exec(x);if(null!==D){const [,N,d]=D;x=p.TimeOnly.fromParts(parseInt(N,
10),parseInt(d,10),0,0);if(null!==x)return x;throw new e.SqlError(e.SqlErrorCodes.InvalidTime);}D=F.exec(x);if(null!==D){const [,N,d,H,S]=D;x=p.TimeOnly.fromParts(parseInt(N,10),parseInt(d,10),parseInt(H,10),parseInt(S,10));if(null!==x)return x}throw new e.SqlError(e.SqlErrorCodes.InvalidTime);};c.parseTimestamp=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","../../arcade/featureset/support/errorsupport"],function(c,e){class A{constructor(){this.op=
"+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(y){if(null!==y.precision||null!==y.secondary)throw new e.SqlError(e.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(y,M){M.includes(".")?(M=M.split("."),y.second=parseFloat(M[0]),y.millis=parseInt(M[1],10)):y.second=parseFloat(M)}static createFromMilliseconds(y){const M=new A;M.second=y/1E3;return M}static createFromValueAndQualifer(y,M,p){let g=null;const w=new A;w.op="-"===
p?"-":"+";if("interval-period"===M.type){A._fixDefaults(M);p=RegExp("^[0-9]{1,}$");if("year"===M.period||"month"===M.period)throw new e.SqlError(e.SqlErrorCodes.YearMonthIntervals);if("second"===M.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(y))A._parseSecondsComponent(w,y);else throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);else if(p.test(y))w[M.period]=parseFloat(y);else throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);}else{A._fixDefaults(M.start);A._fixDefaults(M.end);if("year"===
M.start.period||"month"===M.start.period||"year"===M.end.period||"month"===M.end.period)throw new e.SqlError(e.SqlErrorCodes.YearMonthIntervals);switch(M.start.period){case "day":switch(M.end.period){case "hour":g=RegExp("^[0-9]{1,} [0-9]{1,}$");if(g.test(y))w[M.start.period]=parseFloat(y.split(" ")[0]),w[M.end.period]=parseFloat(y.split(" ")[1]);else throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);break;case "minute":g=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(g.test(y))w[M.start.period]=
parseFloat(y.split(" ")[0]),y=y.split(" ")[1].split(":"),w.hour=parseFloat(y[0]),w.minute=parseFloat(y[1]);else throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);break;case "second":g=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(y))w[M.start.period]=parseFloat(y.split(" ")[0]),y=y.split(" ")[1].split(":"),w.hour=parseFloat(y[0]),w.minute=parseFloat(y[1]),A._parseSecondsComponent(w,y[2]);else throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);break;default:throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(M.end.period){case "minute":g=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(g.test(y))w.hour=parseFloat(y.split(":")[0]),w.minute=parseFloat(y.split(":")[1]);else throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);break;case "second":g=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(y))y=y.split(":"),w.hour=parseFloat(y[0]),w.minute=parseFloat(y[1]),A._parseSecondsComponent(w,y[2]);else throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);break;default:throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(M.end.period){case "second":g=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(y))y=y.split(":"),w.minute=parseFloat(y[0]),A._parseSecondsComponent(w,y[1]);else throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);break;default:throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);}break;default:throw new e.SqlError(e.SqlErrorCodes.IllegalInterval);}}return w}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}c.SqlInterval=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ../string ./DateOnly ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(c,e,A,y,M,p,g,w){function f(a){return"string"===typeof a||a instanceof String}function r(a){return p.isDate(a)||p.isDateOnly(a)||
p.isDateTime(a)||p.isTimeOnly(a)||p.isTimestampOffset(a)?!1:!0}function q(a){return p.isDateOnly(a)||p.isTimeOnly(a)?a.toString():p.isTimestampOffset(a)?a.toSQLValue():p.isDateTime(a)?0===a.millisecond?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):p.isDate(a)?q(w.DateTime.fromJSDate(a)):a.toString()}function F(a){if(p.isDate(a))return y.DateOnly.fromDateJS(a);if(p.isDateTime(a))return y.DateOnly.fromParts(a.year,a.month,a.day);if(p.isDateOnly(a))return a;if(p.isTimeOnly(a))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);
if(p.isTimestampOffset(a)&&null===y.DateOnly.fromParts(a.year,a.month,a.day))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);if(f(a)&&(a=y.DateOnly.fromReader(a),null!==a&&a.isValid))return a;throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);}function E(a,v,x){if(p.isDate(a))return p.convertToExecutingTimeZone(a,v);if(p.isDateTime(a))return a;if(p.isDateOnly(a))return a.toDateTimeLuxon("unknown");if(p.isTimeOnly(a))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);if(p.isTimestampOffset(a))return a;
if(f(a))return p.parseTimestamp(a,"unknown",x);throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);}function t(a){if(p.isDate(a))return g.TimeOnly.fromDateJS(a);if(p.isDateTime(a))return g.TimeOnly.fromDateTime(a);if(p.isDateOnly(a))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);if(p.isTimeOnly(a))return a;if(p.isTimestampOffset(a))return g.TimeOnly.fromSqlTimeStampOffset(a);if(f(a))return p.parseTime(a);throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);}const n={extract:{minParams:2,
maxParams:2,evaluate:([a,v])=>{if(null==v)return null;if(p.isDate(v))switch(a.toUpperCase()){case "SECOND":return v.getSeconds();case "MINUTE":return v.getMinutes();case "HOUR":return v.getHours();case "DAY":return v.getDate();case "MONTH":return v.getMonth()+1;case "YEAR":return v.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(p.isDateTime(v))switch(a.toUpperCase()){case "SECOND":return v.second;case "MINUTE":return v.minute;case "HOUR":return v.hour;case "DAY":return v.day;
case "MONTH":return v.month;case "YEAR":return v.year}else if(p.isDateOnly(v))switch(a.toUpperCase()){case "DAY":return v.day;case "MONTH":return v.month;case "YEAR":return v.year}else if(p.isTimeOnly(v))switch(a.toUpperCase()){case "SECOND":return v.second;case "MINUTE":return v.minute;case "HOUR":return v.hour}else if(p.isTimestampOffset(v))switch(a.toUpperCase()){case "SECOND":return v.second;case "MINUTE":return v.minute;case "HOUR":return v.hour;case "DAY":return v.day;case "MONTH":return v.month;
case "YEAR":return v.year;case "TIMEZONE_HOUR":return v.timezoneOffsetHour;case "TIMEZONE_MINUTE":return v.timezoneOffsetMinutes}throw new e.SqlError(e.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const [v,x]=a;return null==v||null==x?null:v.toString().substring(x-1)}if(3===a.length){const [v,x,D]=a;return null==v||null==x||null==D?null:0>=D?"":v.toString().substring(x-1,x+D-1)}}},position:{minParams:2,maxParams:2,
evaluate:([a,v])=>null==a||null==v?null:v.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{var v=3===a.length,x=v?a[1]:" ";v=v?a[2]:a[1];if(null==x||null==v)return null;x=`(${A.escapeRegExpString(x)})`;switch(a[0]){case "BOTH":return v.replaceAll(new RegExp(`^${x}*|${x}*$`,"g"),"");case "LEADING":return v.replaceAll(new RegExp(`^${x}*`,"g"),"");case "TRAILING":return v.replaceAll(new RegExp(`${x}*$`,"g"),"")}throw new e.SqlError(e.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:0<a[0]?1:0>a[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,
maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const v=a[0];a=2===a.length?10**a[1]:1;return null==v?null:Math.round(v*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:a=>null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>f(a[0])?a[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:a=>{let v="";for(let x=0;x<a.length;x++){if(null==a[x])return null;
v+=a[x].toString()}return v}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:a=>{for(const v of a)if(null!==v)return v;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,v)=>M.sqlCompare(a[0],a[1],"\x3d")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,v)=>{const x=a[0];a=a[1];if(null===x)return null;switch(a.type){case "integer":if(!r(x))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);v=parseInt(x,10);if(isNaN(v))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);return v;case "smallint":if(!r(x))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);v=parseInt(x,10);if(isNaN(v))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);
if(32767<v||-32767>v)throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);return v;case "float":case "real":if(!r(x))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);v=parseFloat(x);if(isNaN(v))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);return v;case "time":return t(x);case "date":return F(x);case "timestamp":return E(x,v,!0===a.withtimezone);case "varchar":v=q(x);if(v.length>a.size)throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);return v;default:throw new e.SqlError(e.SqlErrorCodes.InvalidDataType);
}}}};c.evaluateFunction=function(a,v,x){const D=n[a.toLowerCase()];if(null==D)throw new e.SqlError(e.SqlErrorCodes.FunctionNotRecognized);if(v.length<D.minParams||v.length>D.maxParams)throw new e.SqlError(e.SqlErrorCodes.InvalidParameterCount,{name:a.toUpperCase()});return D.evaluate(v,x)};c.isStandardized=function(a,v){a=n[a.toLowerCase()];return null!=a&&v>=a.minParams&&v<=a.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,e,A,y,M,p){function g(a){return A.isDateTime(a)||A.isTimestampOffset(a)?!0:!1}function w(a){return A.isDateTime(a)||A.isDateOnly(a)||A.isTimestampOffset(a)||A.isTimeOnly(a)?!0:!1}function f(a){if(A.isDateTime(a))return a.toMillis();if(A.isDateOnly(a))return a.toNumber();if(A.isTimestampOffset(a))return a.toMilliseconds();throw new e.SqlError(e.SqlErrorCodes.InvalidDataType);}function r(a,v,x){switch(x){case "\x3c\x3e":return a!==v;case "\x3d":return a===v;case "\x3e":return a>v;case "\x3c":return a<
v;case "\x3e\x3d":return a>=v;case "\x3c\x3d":return a<=v}}function q(a,v,x){const D=parseFloat(v);if(!isNaN(D))return r(a,D,x);a=a.toString();switch(x){case "\x3c\x3e":return a!==v;case "\x3d":return a===v;case "\x3e":return a>v;case "\x3c":return a<v;case "\x3e\x3d":return a>=v;case "\x3c\x3d":return a<=v}}function F(a,v,x){const D=parseFloat(a);if(!isNaN(D))return r(D,v,x);v=v.toString();switch(x){case "\x3c\x3e":return a!==v;case "\x3d":return a===v;case "\x3e":return a>v;case "\x3c":return a<
v;case "\x3e\x3d":return a>=v;case "\x3c\x3d":return a<=v}}function E(a,v,x){switch(x){case "\x3c\x3e":return a!==v;case "\x3d":return a===v;case "\x3e":return a>v;case "\x3c":return a<v;case "\x3e\x3d":return a>=v;case "\x3c\x3d":return a<=v}}function t(a,v,x){a instanceof y.SqlTimeStampOffset&&(a=a.toDateTime());v instanceof y.SqlTimeStampOffset&&(v=v.toDateTime());a=n(a);v=n(v);switch(x){case "\x3c\x3e":return a!==v;case "\x3d":return a===v;case "\x3e":return a>v;case "\x3c":return a<v;case "\x3e\x3d":return a>=
v;case "\x3c\x3d":return a<=v}}function n(a){return 321408E5*a.year+26784E5*a.month+864E5*a.day+36E5*a.hour+6E4*a.minute+1E3*a.second+a.millisecond}c.dateValueInMilliseconds=f;c.isDateOrTimeValue=w;c.isDateTimeComparableValue=g;c.sqlCompare=function(a,v,x,D){if(null==a||null==v)return null;if(A.isNumber(a)){if(A.isNumber(v))return r(a,v,x);if(A.isString(v))return q(a,v,x);if(w(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
}else if(A.isString(a)){if(A.isNumber(v))return F(a,v,x);if(A.isString(v))return E(a,v,x);if(A.isDateTime(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isTimeOnly(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isTimestampOffset(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}else if(A.isDateTime(a)){if(g(v)){if(a instanceof p.DateTime&&M.isUnknownTimeZone(a.zone)){if(v instanceof p.DateTime&&
!1===M.isUnknownTimeZone(v.zone)||v instanceof y.SqlTimeStampOffset)return t(a,v,x)}else if(v instanceof p.DateTime&&M.isUnknownTimeZone(v.zone)&&(a instanceof p.DateTime&&!1===M.isUnknownTimeZone(a.zone)||a instanceof y.SqlTimeStampOffset))return t(a,v,x);return r(f(a),f(v),x)}if(A.isString(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(v))return v=v.toDateTimeLuxon(a.zone),a=a.startOf("day"),r(a.toMillis(),v.toMillis(),x);if(A.isTimeOnly(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
if(A.isNumber(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}else if(A.isDateOnly(a)){if(A.isTimestampOffset(v))return a=a.toDateTimeLuxon(v.toDateTime().zone),v=v.startOfDay(),r(a.toMillis(),v.toMilliseconds(),x);if(A.isDateTime(v))return a=a.toDateTimeLuxon(v.zone),v=v.startOf("day"),r(a.toMillis(),v.toMillis(),x);if(A.isString(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(v))return r(a.toNumber(),v.toNumber(),x);if(A.isTimeOnly(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);
if(A.isNumber(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}else if(A.isTimeOnly(a)){if(A.isTimeOnly(v))return r(a.toNumber(),v.toNumber(),x);if(A.isString(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isNumber(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(g(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}else if(A.isTimestampOffset(a)){if(g(v))return v instanceof p.DateTime&&
M.isUnknownTimeZone(v.zone)?t(a,v,x):r(f(a),f(v),x);if(A.isString(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(v))return v=v.toDateTimeLuxon(a.toDateTime().zone),a=a.startOfDay(),r(a.toMilliseconds(),v.toMillis(),x);if(A.isTimeOnly(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(A.isNumber(v))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);}switch(x){case "\x3c\x3e":return a!==v;case "\x3d":return a===v;case "\x3e":return a>v;case "\x3c":return a<v;case "\x3e\x3d":return a>=
v;case "\x3c\x3d":return a<=v}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(c,e){var A={exports:{}};A.exports;(function(p){(function(g,w){p.exports&&(p.exports=w())})(e.commonjsGlobal,function(){function g(f,r,q,F){f=Error.call(this,f);Object.setPrototypeOf&&Object.setPrototypeOf(f,g.prototype);f.expected=r;f.found=q;f.location=F;f.name="SyntaxError";return f}function w(f,r,q){q=
q||" ";if(f.length>r)return f;r-=f.length;q+=q.repeat(r);return f+q.slice(0,r)}(function(f,r){function q(){this.constructor=f}q.prototype=r.prototype;f.prototype=new q})(g,Error);g.prototype.format=function(f){var r="Error: "+this.message;if(this.location){var q=null,F;for(F=0;F<f.length;F++)if(f[F].source===this.location.source){q=f[F].text.split(/\r\n|\n|\r/g);break}f=this.location.start;F=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(f):f;var E=
this.location.source+":"+F.line+":"+F.column;if(q){var t=this.location.end,n=w("",F.line.toString().length," ");q=q[f.line-1];t=(f.line===t.line?t.column:q.length+1)-f.column||1;r+="\n --\x3e "+E+"\n"+n+" |\n"+F.line+" | "+q+"\n"+n+" | "+w("",f.column-1," ")+w("",t,"^")}else r+="\n at "+E}return r};g.buildMessage=function(f,r){function q(a){return a.charCodeAt(0).toString(16).toUpperCase()}function F(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,
"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+q(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+q(v)})}function E(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+q(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+q(v)})}function t(a){return n[a.type](a)}var n={literal:function(a){return'"'+
F(a.text)+'"'},class:function(a){var v=a.parts.map(function(x){return Array.isArray(x)?E(x[0])+"-"+E(x[1]):E(x)});return"["+(a.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){a=a.map(t);var v,x;a.sort();if(0<a.length){for(x=v=1;v<a.length;v++)a[v-1]!==a[v]&&(a[x]=a[v],x++);a.length=x}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,
-1).join(", ")+", or "+a[a.length-1]}}(f)+" but "+(r?'"'+F(r)+'"':"end of input")+" found."};return{SyntaxError:g,parse:function(f,r){function q(B,P){P=void 0!==P?P:n(ma,l);throw new g(B,null,null,P);}function F(B,P){return{type:"literal",text:B,ignoreCase:P}}function E(B,P,U){return{type:"class",parts:B,inverted:P,ignoreCase:U}}function t(B){var P=Zb[B],U;if(!P){for(U=B-1;!Zb[U];)U--;P=Zb[U];for(P={line:P.line,column:P.column};U<B;)10===f.charCodeAt(U)?(P.line++,P.column=1):P.column++,U++;Zb[B]=
P}return P}function n(B,P,U){var ca=t(B),qa=t(P);B={source:Mb,start:{offset:B,line:ca.line,column:ca.column},end:{offset:P,line:qa.line,column:qa.column}};U&&Mb&&"function"===typeof Mb.offset&&(B.start=Mb.offset(B.start),B.end=Mb.offset(B.end));return B}function a(B){l<eb||(l>eb&&(eb=l,zc=[]),zc.push(B))}function v(){var B=l;ja();var P=D();P!==b?(ja(),ma=B,B=P):(l=B,B=b);return B}function x(){var B=l;var P=D();if(P!==b){var U=[];var ca=l;var qa=ja();var za=Wa();if(za!==b){var Ea=ja();var Fa=D();Fa!==
b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)}else l=ca,ca=b;for(;ca!==b;)U.push(ca),ca=l,qa=ja(),za=Wa(),za!==b?(Ea=ja(),Fa=D(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)):(l=ca,ca=b);ma=B;B={type:"expression-list"};P=[P];for(ca=0;ca<U.length;ca++)P.push(U[ca][3]);B.value=P}else l=B,B=b;return B}function D(){var B=l;var P=N();if(P!==b){var U=[];var ca=l;var qa=ja();var za=L();if(za!==b){var Ea=ja();var Fa=N();Fa!==b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)}else l=ca,ca=b;for(;ca!==b;)U.push(ca),ca=l,qa=ja(),za=L(),za!==
b?(Ea=ja(),Fa=N(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)):(l=ca,ca=b);ma=B;B=nb(P,U)}else l=B,B=b;return B}function N(){var B=l;var P=d();if(P!==b){var U=[];var ca=l;var qa=ja();var za=G();if(za!==b){var Ea=ja();var Fa=d();Fa!==b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)}else l=ca,ca=b;for(;ca!==b;)U.push(ca),ca=l,qa=ja(),za=G(),za!==b?(Ea=ja(),Fa=d(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)):(l=ca,ca=b);ma=B;B=nb(P,U)}else l=B,B=b;return B}function d(){var B=l;var P=z();if(P===b){P=l;if(33===f.charCodeAt(l)){var U=
Nd;l++}else U=b,0===fa&&a(Od);if(U!==b){var ca=l;fa++;if(61===f.charCodeAt(l)){var qa=Sc;l++}else qa=b,0===fa&&a(Tc);fa--;qa===b?ca=void 0:(l=ca,ca=b);ca!==b?P=U=[U,ca]:(l=P,P=b)}else l=P,P=b}P!==b?(U=ja(),ca=d(),ca!==b?(ma=B,B={type:"unary-expression",operator:"NOT",expr:ca}):(l=B,B=b)):(l=B,B=b);if(B===b){P=l;B=R();if(B!==b){ja();U=l;ca=[];qa=l;var za=ja();var Ea=H();if(Ea!==b){var Fa=ja();var ob=R();ob!==b?qa=za=[za,Ea,Fa,ob]:(l=qa,qa=b)}else l=qa,qa=b;if(qa!==b)for(;qa!==b;)ca.push(qa),qa=l,za=
ja(),Ea=H(),Ea!==b?(Fa=ja(),ob=R(),ob!==b?qa=za=[za,Ea,Fa,ob]:(l=qa,qa=b)):(l=qa,qa=b);else ca=b;ca!==b&&(ma=U,ca={type:"arithmetic",tail:ca});U=ca;U===b&&(U=l,ca=J(),ca!==b?(ja(),qa=Ja(),qa!==b?(ja(),qa=x(),qa!==b?(ja(),za=Ka(),za!==b?(ma=U,U={op:ca,right:qa}):(l=U,U=b)):(l=U,U=b)):(l=U,U=b)):(l=U,U=b),U===b&&(U=l,ca=J(),ca!==b?(ja(),qa=Ja(),qa!==b?(ja(),qa=Ka(),qa!==b?(ma=U,U={op:ca,right:{type:"expression-list",value:[]}}):(l=U,U=b)):(l=U,U=b)):(l=U,U=b),U===b&&(U=l,ca=J(),ca!==b?(ja(),qa=ea(),
qa!==b?(ma=U,U={op:ca,right:qa}):(l=U,U=b)):(l=U,U=b))),U===b&&(U=l,za=z(),za!==b?(ja(),ca=W(),ca!==b?(ja(),qa=R(),qa!==b?(ja(),Ea=G(),Ea!==b?(ja(),za=R(),za!==b?(ma=U,U={op:"NOT"+ca,right:{type:"expression-list",value:[qa,za]}}):(l=U,U=b)):(l=U,U=b)):(l=U,U=b)):(l=U,U=b)):(l=U,U=b),U===b&&(U=l,za=W(),za!==b?(ja(),ca=R(),ca!==b?(ja(),qa=G(),qa!==b?(ja(),Ea=R(),Ea!==b?(ma=U,U={op:za,right:{type:"expression-list",value:[ca,Ea]}}):(l=U,U=b)):(l=U,U=b)):(l=U,U=b)):(l=U,U=b)),U===b&&(U=l,ca=aa(),ca!==
b?(ja(),qa=z(),qa!==b?(ja(),qa=R(),qa!==b?(ma=U,U={op:ca+"NOT",right:qa}):(l=U,U=b)):(l=U,U=b)):(l=U,U=b),U===b&&(U=l,ca=aa(),ca!==b?(ja(),qa=R(),qa!==b?(ma=U,U={op:ca,right:qa}):(l=U,U=b)):(l=U,U=b)),U===b&&(U=l,ca=S(),ca!==b?(ja(),qa=va(),qa!==b?(ja(),za=l,f.substr(l,6).toLowerCase()===Pd?(Ea=f.substr(l,6),l+=6):(Ea=b,0===fa&&a(Qd)),Ea!==b?(Ea=l,fa++,Fa=K(),fa--,Fa===b?Ea=void 0:(l=Ea,Ea=b),Ea!==b?(ma=za,za="ESCAPE"):(l=za,za=b)):(l=za,za=b),za!==b?(ja(),za=wa(),za!==b?(ma=U,U={op:ca,right:qa,escape:za.value}):
(l=U,U=b)):(l=U,U=b)):(l=U,U=b)):(l=U,U=b),U===b&&(U=l,ca=S(),ca!==b?(ja(),qa=va(),qa!==b?(ma=U,U={op:ca,right:qa,escape:""}):(l=U,U=b)):(l=U,U=b))))));U===b&&(U=null);ma=P;P=U;""==P||void 0==P||null==P?P=B:(U=null,P=U="arithmetic"==P.type?nb(B,P.tail):Nb(P.op,B,P.right,P.escape))}else l=P,P=b;B=P}return B}function H(){if(f.substr(l,2)===Uc){var B=Uc;l+=2}else B=b,0===fa&&a(Rd);B===b&&(62===f.charCodeAt(l)?(B=Sd,l++):(B=b,0===fa&&a(Td)),B===b&&(f.substr(l,2)===Vc?(B=Vc,l+=2):(B=b,0===fa&&a(Ud)),B===
b&&(f.substr(l,2)===Wc?(B=Wc,l+=2):(B=b,0===fa&&a(Vd)),B===b&&(60===f.charCodeAt(l)?(B=Wd,l++):(B=b,0===fa&&a(Xd)),B===b&&(61===f.charCodeAt(l)?(B=Sc,l++):(B=b,0===fa&&a(Tc)),B===b&&(f.substr(l,2)===Xc?(B=Xc,l+=2):(B=b,0===fa&&a(Yd))))))));return B}function S(){var B;var P=B=l;var U=z();if(U!==b){var ca=ja();var qa=ha();qa!==b?P=U=[U,ca,qa]:(l=P,P=b)}else l=P,P=b;P!==b&&(ma=B,P=P[0]+" "+P[2]);B=P;B===b&&(B=ha());return B}function J(){var B;var P=B=l;var U=z();if(U!==b){var ca=ja();var qa=X();qa!==
b?P=U=[U,ca,qa]:(l=P,P=b)}else l=P,P=b;P!==b&&(ma=B,P=P[0]+" "+P[2]);B=P;B===b&&(B=X());return B}function R(){var B=l;var P=V();if(P!==b){var U=[];var ca=l;var qa=ja();var za=O();if(za!==b){var Ea=ja();var Fa=V();Fa!==b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)}else l=ca,ca=b;for(;ca!==b;)U.push(ca),ca=l,qa=ja(),za=O(),za!==b?(Ea=ja(),Fa=V(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)):(l=ca,ca=b);ma=B;B=nb(P,U)}else l=B,B=b;return B}function O(){if(43===f.charCodeAt(l)){var B=Ac;l++}else B=b,0===fa&&a(Bc);B===
b&&(45===f.charCodeAt(l)?(B=Cc,l++):(B=b,0===fa&&a(Dc)),B===b&&(f.substr(l,2)===Yc?(B=Yc,l+=2):(B=b,0===fa&&a(Zd))));return B}function V(){var B=l;var P=Q();if(P!==b){var U=[];var ca=l;var qa=ja();var za=m();if(za!==b){var Ea=ja();var Fa=Q();Fa!==b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)}else l=ca,ca=b;for(;ca!==b;)U.push(ca),ca=l,qa=ja(),za=m(),za!==b?(Ea=ja(),Fa=Q(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(l=ca,ca=b)):(l=ca,ca=b);ma=B;B=nb(P,U)}else l=B,B=b;return B}function m(){if(42===f.charCodeAt(l)){var B=$d;l++}else B=
b,0===fa&&a(ae);B===b&&(47===f.charCodeAt(l)?(B=be,l++):(B=b,0===fa&&a(ce)));return B}function Q(){var B=wa();if(B===b){var P=l;var U=l;var ca=Na();if(ca!==b){var qa=Sa();if(qa!==b){var za=Va();za!==b?(ma=U,U=parseFloat(ca+qa+za)):(l=U,U=b)}else l=U,U=b}else l=U,U=b;U===b&&(U=l,ca=Na(),ca!==b?(qa=Sa(),qa!==b?(ma=U,U=parseFloat(ca+qa)):(l=U,U=b)):(l=U,U=b),U===b&&(U=l,ca=Na(),ca!==b?(qa=Va(),qa!==b?(ma=U,U=parseFloat(ca+qa)):(l=U,U=b)):(l=U,U=b),U===b&&(U=l,ca=Na(),ca!==b&&(ma=U,ca=parseFloat(ca)),
U=ca)));var Ea=U;if(Ea!==b){var Fa=l;fa++;var ob=u();fa--;ob===b?Fa=void 0:(l=Fa,Fa=b);Fa!==b?(ma=P,P={type:"number",value:Ea}):(l=P,P=b)}else l=P,P=b;B=P;if(B===b){var pb=l;var Jb=l;if(f.substr(l,4).toLowerCase()===de){var $b=f.substr(l,4);l+=4}else $b=b,0===fa&&a(ee);if($b!==b){var Ob=l;fa++;var fe=K();fa--;fe===b?Ob=void 0:(l=Ob,Ob=b);Ob!==b?Jb=$b=[$b,Ob]:(l=Jb,Jb=b)}else l=Jb,Jb=b;var qb=Jb;qb!==b&&(ma=pb,qb={type:"boolean",value:!0});pb=qb;if(pb===b){pb=l;var Kb=l;if(f.substr(l,5).toLowerCase()===
ge){var ac=f.substr(l,5);l+=5}else ac=b,0===fa&&a(he);if(ac!==b){var Pb=l;fa++;var ie=K();fa--;ie===b?Pb=void 0:(l=Pb,Pb=b);Pb!==b?Kb=ac=[ac,Pb]:(l=Kb,Kb=b)}else l=Kb,Kb=b;qb=Kb;qb!==b&&(ma=pb,qb={type:"boolean",value:!1});pb=qb}B=pb;if(B===b){var je=l;var Lb=l;if(f.substr(l,4).toLowerCase()===ke){var bc=f.substr(l,4);l+=4}else bc=b,0===fa&&a(le);if(bc!==b){var Qb=l;fa++;var me=K();fa--;me===b?Qb=void 0:(l=Qb,Qb=b);Qb!==b?Lb=bc=[bc,Qb]:(l=Lb,Lb=b)}else l=Lb,Lb=b;var Ec=Lb;Ec!==b&&(ma=je,Ec={type:"null",
value:null});B=Ec;if(B===b){var rb=l;if(ia()!==b){ja();var cc=va();cc!==b?(ma=rb,"string"===cc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(cc.value)&&q("Date literal is invalid"),rb={type:"date",
value:cc.value}):(l=rb,rb=b)}else l=rb,rb=b;B=rb;if(B===b){var sb=l;if(da()!==b){ja();var dc=va();dc!==b?(ma=sb,"string"===dc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(dc.value)&&q("Timestamp literal is invalid"),
sb={type:"timestamp",value:dc.value}):(l=sb,sb=b)}else l=sb,sb=b;B=sb;if(B===b){var Ta=l;var Fc=sa();if(Fc!==b){ja();if(45===f.charCodeAt(l)){var hb=Cc;l++}else hb=b,0===fa&&a(Dc);hb===b&&(43===f.charCodeAt(l)?(hb=Ac,l++):(hb=b,0===fa&&a(Bc)));if(hb!==b){ja();var Rb=va();if(Rb!==b){ja();var Zc=na();Zc!==b?(ma=Ta,Ta={type:"interval",value:Rb,qualifier:Zc,op:hb}):(l=Ta,Ta=b)}else l=Ta,Ta=b}else l=Ta,Ta=b}else l=Ta,Ta=b;Ta===b&&(Ta=l,Fc=sa(),Fc!==b?(ja(),hb=va(),hb!==b?(ja(),Rb=na(),Rb!==b?(ma=Ta,Ta=
{type:"interval",value:hb,qualifier:Rb,op:""}):(l=Ta,Ta=b)):(l=Ta,Ta=b)):(l=Ta,Ta=b));B=Ta;if(B===b){var tb=l;if(ka()!==b){ja();var ec=va();ec!==b?(ma=tb,"string"===ec.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(ec.value)&&q("Time literal is invalid"),tb={type:"time",value:ec.value}):(l=tb,tb=b)}else l=tb,tb=b;B=tb}}}}}}}var La=B;if(La===b){var Za=l;var ub=l;if(f.substr(l,7).toLowerCase()===ne){var $c=f.substr(l,7);l+=7}else $c=
b,0===fa&&a(oe);if($c!==b){var fc=l;fa++;var pe=K();fa--;pe===b?fc=void 0:(l=fc,fc=b);fc!==b?(ma=ub,ub="EXTRACT"):(l=ub,ub=b)}else l=ub,ub=b;if(ub!==b){ja();var qe=Ja();if(qe!==b){ja();var $a=oa();if($a===b&&($a=ra(),$a===b&&($a=Ca(),$a===b&&($a=xa(),$a===b&&($a=Ba(),$a===b&&($a=Aa(),$a===b)))))){var vb=l;if(f.substr(l,13).toLowerCase()===re){var ad=f.substr(l,13);l+=13}else ad=b,0===fa&&a(se);if(ad!==b){var gc=l;fa++;var te=K();fa--;te===b?gc=void 0:(l=gc,gc=b);gc!==b?(ma=vb,vb="TIMEZONE_HOUR"):
(l=vb,vb=b)}else l=vb,vb=b;$a=vb;if($a===b){var wb=l;if(f.substr(l,15).toLowerCase()===ue){var bd=f.substr(l,15);l+=15}else bd=b,0===fa&&a(ve);if(bd!==b){var hc=l;fa++;var we=K();fa--;we===b?hc=void 0:(l=hc,hc=b);hc!==b?(ma=wb,wb="TIMEZONE_MINUTE"):(l=wb,wb=b)}else l=wb,wb=b;$a=wb}}var cd=$a;if(cd!==b){ja();var xe=Z();if(xe!==b){ja();var dd=D();if(dd!==b){ja();var ye=Ka();ye!==b?(ma=Za,Za={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:cd},dd]}}):(l=Za,Za=
b)}else l=Za,Za=b}else l=Za,Za=b}else l=Za,Za=b}else l=Za,Za=b}else l=Za,Za=b;La=Za;if(La===b){var ab=l;var xb=l;if(f.substr(l,9).toLowerCase()===ze){var ed=f.substr(l,9);l+=9}else ed=b,0===fa&&a(Ae);if(ed!==b){var ic=l;fa++;var Be=K();fa--;Be===b?ic=void 0:(l=ic,ic=b);ic!==b?(ma=xb,xb="SUBSTRING"):(l=xb,xb=b)}else l=xb,xb=b;if(xb!==b){ja();var Ce=Ja();if(Ce!==b){ja();var Gc=D();if(Gc!==b){ja();var De=Z();if(De!==b){ja();var Hc=D();if(Hc!==b){ja();var ib=l;var yb=l;if(f.substr(l,3).toLowerCase()===
Ee){var fd=f.substr(l,3);l+=3}else fd=b,0===fa&&a(Fe);if(fd!==b){var jc=l;fa++;var Ge=K();fa--;Ge===b?jc=void 0:(l=jc,jc=b);jc!==b?(ma=yb,yb="FOR"):(l=yb,yb=b)}else l=yb,yb=b;var Sb=yb;if(Sb!==b){var He=ja();var gd=D();if(gd!==b){var Ie=ja();ib=Sb=[Sb,He,gd,Ie]}else l=ib,ib=b}else l=ib,ib=b;ib===b&&(ib=null);Sb=Ka();Sb!==b?(ma=ab,ab={type:"function",name:"substring",args:{type:"expression-list",value:ib?[Gc,Hc,ib[2]]:[Gc,Hc]}}):(l=ab,ab=b)}else l=ab,ab=b}else l=ab,ab=b}else l=ab,ab=b}else l=ab,ab=
b}else l=ab,ab=b;La=ab;if(La===b){var Oa=l;var Ic=ba();if(Ic!==b){ja();var Jc=Ja();if(Jc!==b){ja();var jb=la();jb===b&&(jb=null);ja();var Tb=D();if(Tb!==b){ja();var Kc=Z();if(Kc!==b){ja();var hd=D();if(hd!==b){ja();var Je=Ka();Je!==b?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb,hd]}}):(l=Oa,Oa=b)}else l=Oa,Oa=b}else l=Oa,Oa=b}else l=Oa,Oa=b}else l=Oa,Oa=b}else l=Oa,Oa=b;Oa===b&&(Oa=l,Ic=ba(),Ic!==b?(ja(),Jc=Ja(),Jc!==b?(ja(),
jb=la(),jb===b&&(jb=null),ja(),Tb=D(),Tb!==b?(ja(),Kc=Ka(),Kc!==b?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb]}}):(l=Oa,Oa=b)):(l=Oa,Oa=b)):(l=Oa,Oa=b)):(l=Oa,Oa=b));La=Oa;if(La===b){var bb=l;var zb=l;if(f.substr(l,8).toLowerCase()===Ke){var id=f.substr(l,8);l+=8}else id=b,0===fa&&a(Le);if(id!==b){var kc=l;fa++;var Me=K();fa--;Me===b?kc=void 0:(l=kc,kc=b);kc!==b?(ma=zb,zb="POSITION"):(l=zb,zb=b)}else l=zb,zb=b;if(zb!==b){ja();
var Ne=Ja();if(Ne!==b){ja();var jd=D();if(jd!==b){ja();var Oe=X();if(Oe!==b){ja();var kd=D();if(kd!==b){ja();var Pe=Ka();Pe!==b?(ma=bb,bb={type:"function",name:"position",args:{type:"expression-list",value:[jd,kd]}}):(l=bb,bb=b)}else l=bb,bb=b}else l=bb,bb=b}else l=bb,bb=b}else l=bb,bb=b}else l=bb,bb=b;La=bb;if(La===b){var cb=l;var Ab=l;if(f.substr(l,4).toLowerCase()===Qe){var ld=f.substr(l,4);l+=4}else ld=b,0===fa&&a(Re);if(ld!==b){var lc=l;fa++;var Se=K();fa--;Se===b?lc=void 0:(l=lc,lc=b);lc!==
b?(ma=Ab,Ab="CAST"):(l=Ab,Ab=b)}else l=Ab,Ab=b;if(Ab!==b){ja();var Te=Ja();if(Te!==b){ja();var md=D();if(md!==b){ja();var Bb=l;if(f.substr(l,2).toLowerCase()===Ue){var nd=f.substr(l,2);l+=2}else nd=b,0===fa&&a(Ve);if(nd!==b){var mc=l;fa++;var We=K();fa--;We===b?mc=void 0:(l=mc,mc=b);mc!==b?(ma=Bb,Bb="AS"):(l=Bb,Bb=b)}else l=Bb,Bb=b;var Xe=Bb;if(Xe!==b){ja();var Ga=l;var Cb=l;if(f.substr(l,7).toLowerCase()===Ye){var od=f.substr(l,7);l+=7}else od=b,0===fa&&a(Ze);if(od!==b){var nc=l;fa++;var $e=K();
fa--;$e===b?nc=void 0:(l=nc,nc=b);nc!==b?(ma=Cb,Cb="INTEGER"):(l=Cb,Cb=b)}else l=Cb,Cb=b;var Ma=Cb;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"integer"}});Ga=Ma;if(Ga===b){Ga=l;var Db=l;if(f.substr(l,8).toLowerCase()===af){var pd=f.substr(l,8);l+=8}else pd=b,0===fa&&a(bf);if(pd!==b){var oc=l;fa++;var cf=K();fa--;cf===b?oc=void 0:(l=oc,oc=b);oc!==b?(ma=Db,Db="SMALLINT"):(l=Db,Db=b)}else l=Db,Db=b;Ma=Db;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"smallint"}});Ga=Ma;if(Ga===b){Ga=l;var Eb=
l;if(f.substr(l,5).toLowerCase()===df){var qd=f.substr(l,5);l+=5}else qd=b,0===fa&&a(ef);if(qd!==b){var pc=l;fa++;var ff=K();fa--;ff===b?pc=void 0:(l=pc,pc=b);pc!==b?(ma=Eb,Eb="FLOAT"):(l=Eb,Eb=b)}else l=Eb,Eb=b;Ma=Eb;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"float"}});Ga=Ma;if(Ga===b){Ga=l;var Fb=l;if(f.substr(l,4).toLowerCase()===gf){var rd=f.substr(l,4);l+=4}else rd=b,0===fa&&a(hf);if(rd!==b){var qc=l;fa++;var jf=K();fa--;jf===b?qc=void 0:(l=qc,qc=b);qc!==b?(ma=Fb,Fb="REAL"):(l=Fb,Fb=b)}else l=
Fb,Fb=b;Ma=Fb;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"real"}});Ga=Ma;if(Ga===b&&(Ga=l,Ma=ia(),Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"date"}}),Ga=Ma,Ga===b&&(Ga=l,Ma=da(),Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"timestamp"}}),Ga=Ma,Ga===b&&(Ga=l,Ma=ka(),Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"time"}}),Ga=Ma,Ga===b)))){Ga=l;var Gb=l;if(f.substr(l,7).toLowerCase()===kf){var sd=f.substr(l,7);l+=7}else sd=b,0===fa&&a(lf);if(sd!==b){var rc=l;fa++;var mf=K();fa--;mf===
b?rc=void 0:(l=rc,rc=b);rc!==b?(ma=Gb,Gb="VARCHAR"):(l=Gb,Gb=b)}else l=Gb,Gb=b;Ma=Gb;if(Ma!==b){ja();var nf=Ja();if(nf!==b){ja();var td=h();if(td!==b){ja();var of=Ka();of!==b?(ma=Ga,Ga={type:"data-type",value:{type:"varchar",size:parseInt(td)}}):(l=Ga,Ga=b)}else l=Ga,Ga=b}else l=Ga,Ga=b}else l=Ga,Ga=b}}}}var ud=Ga;if(ud!==b){ja();var pf=Ka();pf!==b?(ma=cb,cb={type:"function",name:"cast",args:{type:"expression-list",value:[md,ud]}}):(l=cb,cb=b)}else l=cb,cb=b}else l=cb,cb=b}else l=cb,cb=b}else l=cb,
cb=b}else l=cb,cb=b;La=cb;if(La===b){var kb=l;var db=l;var Ub=k();Ub!==b&&(ma=db);db=Ub;if(db===b)if(db=l,96===f.charCodeAt(l)?(Ub=vd,l++):(Ub=b,0===fa&&a(wd)),Ub!==b){var sc=[];if(xd.test(f.charAt(l))){var lb=f.charAt(l);l++}else lb=b,0===fa&&a(yd);if(lb!==b)for(;lb!==b;)sc.push(lb),xd.test(f.charAt(l))?(lb=f.charAt(l),l++):(lb=b,0===fa&&a(yd));else sc=b;sc!==b?(96===f.charCodeAt(l)?(lb=vd,l++):(lb=b,0===fa&&a(wd)),lb!==b?(ma=db,db=sc.join("")):(l=db,db=b)):(l=db,db=b)}else l=db,db=b;var zd=db;if(zd!==
b){ja();var qf=Ja();if(qf!==b){ja();var tc=x();tc===b&&(tc=null);ja();var rf=Ka();rf!==b?(ma=kb,kb={type:"function",name:zd,args:tc?tc:{type:"expression-list",value:[]}}):(l=kb,kb=b)}else l=kb,kb=b}else l=kb,kb=b;La=kb;if(La===b){var fb;var Ua=l;var Lc=ya();if(Lc!==b){ja();var Vb=D();if(Vb!==b){ja();var Wb=[];for(fb=Ia();fb!==b;)Wb.push(fb),fb=Ia();fb=ja();var uc=Ha();uc!==b?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:null}):(l=Ua,Ua=b)}else l=Ua,Ua=b}else l=Ua,Ua=
b;if(Ua===b)if(Ua=l,Lc=ya(),Lc!==b)if(ja(),Vb=D(),Vb!==b){ja();Wb=[];for(fb=Ia();fb!==b;)Wb.push(fb),fb=Ia();fb=ja();uc=Pa();if(uc!==b){ja();var sf=Ha();sf!==b?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:uc.value}):(l=Ua,Ua=b)}else l=Ua,Ua=b}else l=Ua,Ua=b;else l=Ua,Ua=b;var Mc=Ua;if(Mc===b){var gb;var Xa=l;var Nc=ya();if(Nc!==b){ja();var Xb=[];for(gb=Da();gb!==b;)Xb.push(gb),gb=Da();gb=ja();var vc=Ha();vc!==b?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,
else:null}):(l=Xa,Xa=b)}else l=Xa,Xa=b;if(Xa===b)if(Xa=l,Nc=ya(),Nc!==b){ja();Xb=[];for(gb=Da();gb!==b;)Xb.push(gb),gb=Da();gb=ja();vc=Pa();if(vc!==b){ja();var tf=Ha();tf!==b?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,else:vc.value}):(l=Xa,Xa=b)}else l=Xa,Xa=b}else l=Xa,Xa=b;Mc=Xa}La=Mc;if(La===b){var Hb=l;var uf=l;var wc;var Yb=l;var Ad=u();if(Ad!==b){var Bd=[];for(wc=I();wc!==b;)Bd.push(wc),wc=I();ma=Yb;Yb=Ad+Bd.join("")}else l=Yb,Yb=b;var Cd=Yb;Cd!==b&&(ma=uf);var mb=Cd;if(mb!==
b){ma=Hb;var Oc=mb;mb=/^CURRENT_DATE$/i.test(Oc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Oc}}Hb=mb;if(Hb===b){Hb=l;var Ib=l;if(Y()!==b){var xc;var vf=l;var Pc=[];for(xc=T();xc!==b;)Pc.push(xc),xc=T();ma=vf;var wf=Pc=Pc.join("");var xf=Y();xf!==b?(ma=Ib,Ib=wf):(l=Ib,Ib=b)}else l=Ib,Ib=b;mb=Ib;mb!==b&&(ma=Hb,mb={type:"column-reference",table:"",column:mb,delimited:!0});Hb=mb}La=Hb;if(La===b&&(La=
ea(),La===b)){La=l;var yf=Ja();if(yf!==b){ja();var Qc=D();if(Qc!==b){ja();var zf=Ka();zf!==b?(ma=La,Qc.paren=!0,La=Qc):(l=La,La=b)}else l=La,La=b}else l=La,La=b}}}}}}}}}return La}function k(){var B;var P=l;var U=u();if(U!==b){var ca=[];for(B=K();B!==b;)ca.push(B),B=K();ma=P;P=U+ca.join("")}else l=P,P=b;return P}function u(){if(Af.test(f.charAt(l))){var B=f.charAt(l);l++}else B=b,0===fa&&a(Bf);return B}function K(){if(Cf.test(f.charAt(l))){var B=f.charAt(l);l++}else B=b,0===fa&&a(Df);return B}function I(){if(Dd.test(f.charAt(l))){var B=
f.charAt(l);l++}else B=b,0===fa&&a(Ed);return B}function T(){if(Dd.test(f.charAt(l))){var B=f.charAt(l);l++}else B=b,0===fa&&a(Ed);if(B===b)if(B=l,Y()!==b){var P=Y();P!==b?(ma=B,B='"'):(l=B,B=b)}else l=B,B=b;return B}function Y(){if(Ef.test(f.charAt(l))){var B=f.charAt(l);l++}else B=b,0===fa&&a(Ff);return B}function ea(){var B;var P=B=l;if(64===f.charCodeAt(l)){var U=Gf;l++}else U=b,0===fa&&a(Hf);if(U!==b){var ca=k();ca!==b?P=U=[U,ca]:(l=P,P=b)}else l=P,P=b;P!==b&&(ma=B,P={type:"parameter",value:P[1]});
return P}function la(){var B=l;if(f.substr(l,7).toLowerCase()===If){var P=f.substr(l,7);l+=7}else P=b,0===fa&&a(Jf);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="LEADING"):(l=B,B=b)}else l=B,B=b;B===b&&(B=l,f.substr(l,8).toLowerCase()===Kf?(P=f.substr(l,8),l+=8):(P=b,0===fa&&a(Lf)),P!==b?(P=l,fa++,U=K(),fa--,U===b?P=void 0:(l=P,P=b),P!==b?(ma=B,B="TRAILING"):(l=B,B=b)):(l=B,B=b),B===b&&(B=l,f.substr(l,4).toLowerCase()===Mf?(P=f.substr(l,4),l+=4):(P=b,0===fa&&a(Nf)),P!==
b?(P=l,fa++,U=K(),fa--,U===b?P=void 0:(l=P,P=b),P!==b?(ma=B,B="BOTH"):(l=B,B=b)):(l=B,B=b)));return B}function na(){var B=l;var P=l;var U=ua();if(U!==b){ja();var ca=Ja();if(ca!==b)if(ja(),ca=pa(),ca!==b){ja();var qa=Ka();qa!==b?(ma=P,P={type:"interval-period",period:U.value,precision:ca,secondary:null}):(l=P,P=b)}else l=P,P=b;else l=P,P=b}else l=P,P=b;P===b&&(P=l,U=ua(),U!==b&&(ma=P,U={type:"interval-period",period:U.value,precision:null,secondary:null}),P=U);if(P!==b)if(ja(),U=l,f.substr(l,2).toLowerCase()===
Of?(ca=f.substr(l,2),l+=2):(ca=b,0===fa&&a(Pf)),ca!==b?(ca=l,fa++,qa=K(),fa--,qa===b?ca=void 0:(l=ca,ca=b),ca!==b?(ma=U,U="TO"):(l=U,U=b)):(l=U,U=b),U!==b){ja();U=l;ca=ua();ca!==b&&(ma=U,ca={type:"interval-period",period:ca.value,precision:null,secondary:null});U=ca;if(U===b){U=l;ca=Aa();if(ca!==b)if(ja(),ca=Ja(),ca!==b)if(ja(),ca=pa(),ca!==b)if(ja(),qa=Wa(),qa!==b)if(ja(),qa=ta(),qa!==b){ja();var za=Ka();za!==b?(ma=U,U={type:"interval-period",period:"second",precision:ca,secondary:qa}):(l=U,U=b)}else l=
U,U=b;else l=U,U=b;else l=U,U=b;else l=U,U=b;else l=U,U=b;U===b&&(U=l,ca=Aa(),ca!==b?(ja(),ca=Ja(),ca!==b?(ja(),ca=pa(),ca!==b?(ja(),qa=Ka(),qa!==b?(ma=U,U={type:"interval-period",period:"second",precision:ca,secondary:null}):(l=U,U=b)):(l=U,U=b)):(l=U,U=b)):(l=U,U=b),U===b&&(U=l,ca=Aa(),ca!==b&&(ma=U,ca={type:"interval-period",period:"second",precision:null,secondary:null}),U=ca))}U!==b?(ma=B,B={type:"interval-qualifier",start:P,end:U}):(l=B,B=b)}else l=B,B=b;else l=B,B=b;B===b&&(B=l,U=ua(),U!==
b?(ja(),P=Ja(),P!==b?(ja(),P=ta(),P!==b?(ja(),ca=Ka(),ca!==b?(ma=B,B={type:"interval-period",period:U.value,precision:P,secondary:null}):(l=B,B=b)):(l=B,B=b)):(l=B,B=b)):(l=B,B=b),B===b&&(B=l,U=ua(),U!==b&&(ma=B,U={type:"interval-period",period:U.value,precision:null,secondary:null}),B=U,B===b&&(B=l,U=Aa(),U!==b?(ja(),P=Ja(),P!==b?(ja(),P=pa(),P!==b?(ja(),ca=Wa(),ca!==b?(ja(),U=ta(),U!==b?(ja(),ca=Ka(),ca!==b?(ma=B,B={type:"interval-period",period:"second",precision:P,secondary:U}):(l=B,B=b)):(l=
B,B=b)):(l=B,B=b)):(l=B,B=b)):(l=B,B=b)):(l=B,B=b),B===b&&(B=l,U=Aa(),U!==b?(ja(),P=Ja(),P!==b?(ja(),P=ta(),P!==b?(ja(),ca=Ka(),ca!==b?(ma=B,B={type:"interval-period",period:"second",precision:P,secondary:null}):(l=B,B=b)):(l=B,B=b)):(l=B,B=b)):(l=B,B=b),B===b&&(B=l,U=Aa(),U!==b&&(ma=B,U={type:"interval-period",period:"second",precision:null,secondary:null}),B=U)))));return B}function ua(){var B=l;var P=Ca();P!==b&&(ma=B,P={type:"string",value:"day"});B=P;B===b&&(B=l,P=xa(),P!==b&&(ma=B,P={type:"string",
value:"hour"}),B=P,B===b&&(B=l,P=Ba(),P!==b&&(ma=B,P={type:"string",value:"minute"}),B=P,B===b&&(B=l,P=ra(),P!==b&&(ma=B,P={type:"string",value:"month"}),B=P,B===b&&(B=l,P=oa(),P!==b&&(ma=B,P={type:"string",value:"year"}),B=P))));return B}function ta(){var B=l;var P=h();P!==b&&(ma=B,P=parseFloat(P));return P}function pa(){var B=l;var P=h();P!==b&&(ma=B,P=parseFloat(P));return P}function va(){var B=wa();B===b&&(B=ea());return B}function wa(){var B=l;if(39===f.charCodeAt(l)){var P=Fd;l++}else P=b,0===
fa&&a(Gd);P===b&&(f.substr(l,2)===Hd?(P=Hd,l+=2):(P=b,0===fa&&a(Qf)));if(P!==b){P=[];var U=l;if(f.substr(l,2)===yc){var ca=yc;l+=2}else ca=b,0===fa&&a(Id);ca!==b&&(ma=U,ca="'");U=ca;U===b&&(Jd.test(f.charAt(l))?(U=f.charAt(l),l++):(U=b,0===fa&&a(Kd)));for(;U!==b;)P.push(U),U=l,f.substr(l,2)===yc?(ca=yc,l+=2):(ca=b,0===fa&&a(Id)),ca!==b&&(ma=U,ca="'"),U=ca,U===b&&(Jd.test(f.charAt(l))?(U=f.charAt(l),l++):(U=b,0===fa&&a(Kd)));39===f.charCodeAt(l)?(U=Fd,l++):(U=b,0===fa&&a(Gd));U!==b?(ma=B,B={type:"string",
value:P.join("")}):(l=B,B=b)}else l=B,B=b;return B}function Da(){var B=l;if(Qa()!==b){ja();var P=D();if(P!==b){ja();var U=Ya();U!==b?(ja(),U=D(),U!==b?(ma=B,B={type:"when-clause",operand:P,value:U}):(l=B,B=b)):(l=B,B=b)}else l=B,B=b}else l=B,B=b;return B}function Ia(){var B=l;if(Qa()!==b){ja();var P=D();if(P!==b){ja();var U=Ya();U!==b?(ja(),U=D(),U!==b?(ma=B,B={type:"when-clause",operand:P,value:U}):(l=B,B=b)):(l=B,B=b)}else l=B,B=b}else l=B,B=b;return B}function Pa(){var B=l;var P=l;if(f.substr(l,
4).toLowerCase()===Rf){var U=f.substr(l,4);l+=4}else U=b,0===fa&&a(Sf);if(U!==b){U=l;fa++;var ca=K();fa--;ca===b?U=void 0:(l=U,U=b);U!==b?(ma=P,P="ELSE"):(l=P,P=b)}else l=P,P=b;P!==b?(ja(),P=D(),P!==b?(ma=B,B={type:"else-clause",value:P}):(l=B,B=b)):(l=B,B=b);return B}function Na(){var B=h();if(B===b){B=l;if(45===f.charCodeAt(l)){var P=Cc;l++}else P=b,0===fa&&a(Dc);P===b&&(43===f.charCodeAt(l)?(P=Ac,l++):(P=b,0===fa&&a(Bc)));if(P!==b){var U=h();U!==b?(ma=B,B=P[0]+U):(l=B,B=b)}else l=B,B=b}return B}
function Sa(){var B=l;if(46===f.charCodeAt(l)){var P=Tf;l++}else P=b,0===fa&&a(Uf);P!==b?(P=h(),P===b&&(P=null),ma=B,B="."+(null!=P?P:"")):(l=B,B=b);return B}function Va(){var B;var P=B=l;if(Vf.test(f.charAt(l))){var U=f.charAt(l);l++}else U=b,0===fa&&a(Wf);U!==b?(Xf.test(f.charAt(l))?(U=f.charAt(l),l++):(U=b,0===fa&&a(Yf)),U===b&&(U=null),ma=P,P="e"+(null===U?"":U)):(l=P,P=b);P!==b?(U=h(),U!==b?(ma=B,B=P+U):(l=B,B=b)):(l=B,B=b);return B}function h(){var B=l;var P=[];var U=C();if(U!==b)for(;U!==b;)P.push(U),
U=C();else P=b;P!==b&&(ma=B,P=P.join(""));return P}function C(){if(Zf.test(f.charAt(l))){var B=f.charAt(l);l++}else B=b,0===fa&&a($f);return B}function X(){var B=l;if(f.substr(l,2).toLowerCase()===ag){var P=f.substr(l,2);l+=2}else P=b,0===fa&&a(bg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="IN"):(l=B,B=b)}else l=B,B=b;return B}function aa(){var B=l;if(f.substr(l,2).toLowerCase()===cg){var P=f.substr(l,2);l+=2}else P=b,0===fa&&a(dg);if(P!==b){P=l;fa++;var U=K();fa--;
U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="IS"):(l=B,B=b)}else l=B,B=b;return B}function ha(){var B=l;if(f.substr(l,4).toLowerCase()===eg){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(fg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="LIKE"):(l=B,B=b)}else l=B,B=b;return B}function z(){var B=l;if(f.substr(l,3).toLowerCase()===gg){var P=f.substr(l,3);l+=3}else P=b,0===fa&&a(hg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="NOT"):(l=B,B=b)}else l=B,
B=b;return B}function G(){var B=l;if(f.substr(l,3).toLowerCase()===ig){var P=f.substr(l,3);l+=3}else P=b,0===fa&&a(jg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="AND"):(l=B,B=b)}else l=B,B=b;return B}function L(){var B=l;if(f.substr(l,2).toLowerCase()===kg){var P=f.substr(l,2);l+=2}else P=b,0===fa&&a(lg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="OR"):(l=B,B=b)}else l=B,B=b;return B}function W(){var B=l;if(f.substr(l,7).toLowerCase()===
mg){var P=f.substr(l,7);l+=7}else P=b,0===fa&&a(ng);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="BETWEEN"):(l=B,B=b)}else l=B,B=b;return B}function Z(){var B=l;if(f.substr(l,4).toLowerCase()===og){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(pg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="FROM"):(l=B,B=b)}else l=B,B=b;return B}function ba(){var B=l;if(f.substr(l,4).toLowerCase()===qg){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(rg);if(P!==
b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="TRIM"):(l=B,B=b)}else l=B,B=b;return B}function da(){var B=l;if(f.substr(l,9).toLowerCase()===sg){var P=f.substr(l,9);l+=9}else P=b,0===fa&&a(tg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="TIMESTAMP"):(l=B,B=b)}else l=B,B=b;return B}function ia(){var B=l;if(f.substr(l,4).toLowerCase()===ug){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(vg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==
b?(ma=B,B="DATE"):(l=B,B=b)}else l=B,B=b;return B}function ka(){var B=l;if(f.substr(l,4).toLowerCase()===wg){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(xg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="TIME"):(l=B,B=b)}else l=B,B=b;return B}function sa(){var B=l;if(f.substr(l,8).toLowerCase()===yg){var P=f.substr(l,8);l+=8}else P=b,0===fa&&a(zg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="INTERVAL"):(l=B,B=b)}else l=B,B=b;return B}function oa(){var B=
l;if(f.substr(l,4).toLowerCase()===Ag){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(Bg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="YEAR"):(l=B,B=b)}else l=B,B=b;return B}function ra(){var B=l;if(f.substr(l,5).toLowerCase()===Cg){var P=f.substr(l,5);l+=5}else P=b,0===fa&&a(Dg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="MONTH"):(l=B,B=b)}else l=B,B=b;return B}function Ca(){var B=l;if(f.substr(l,3).toLowerCase()===Eg){var P=f.substr(l,3);l+=
3}else P=b,0===fa&&a(Fg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="DAY"):(l=B,B=b)}else l=B,B=b;return B}function xa(){var B=l;if(f.substr(l,4).toLowerCase()===Gg){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(Hg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="HOUR"):(l=B,B=b)}else l=B,B=b;return B}function Ba(){var B=l;if(f.substr(l,6).toLowerCase()===Ig){var P=f.substr(l,6);l+=6}else P=b,0===fa&&a(Jg);if(P!==b){P=l;fa++;var U=K();fa--;U===
b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="MINUTE"):(l=B,B=b)}else l=B,B=b;return B}function Aa(){var B=l;if(f.substr(l,6).toLowerCase()===Kg){var P=f.substr(l,6);l+=6}else P=b,0===fa&&a(Lg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="SECOND"):(l=B,B=b)}else l=B,B=b;return B}function ya(){var B=l;if(f.substr(l,4).toLowerCase()===Mg){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(Ng);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="CASE"):(l=B,B=b)}else l=
B,B=b;return B}function Ha(){var B=l;if(f.substr(l,3).toLowerCase()===Og){var P=f.substr(l,3);l+=3}else P=b,0===fa&&a(Pg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="END"):(l=B,B=b)}else l=B,B=b;return B}function Qa(){var B=l;if(f.substr(l,4).toLowerCase()===Qg){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(Rg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="WHEN"):(l=B,B=b)}else l=B,B=b;return B}function Ya(){var B=l;if(f.substr(l,4).toLowerCase()===
Sg){var P=f.substr(l,4);l+=4}else P=b,0===fa&&a(Tg);if(P!==b){P=l;fa++;var U=K();fa--;U===b?P=void 0:(l=P,P=b);P!==b?(ma=B,B="THEN"):(l=B,B=b)}else l=B,B=b;return B}function Wa(){if(44===f.charCodeAt(l)){var B=Ug;l++}else B=b,0===fa&&a(Vg);return B}function Ja(){if(40===f.charCodeAt(l)){var B=Wg;l++}else B=b,0===fa&&a(Xg);return B}function Ka(){if(41===f.charCodeAt(l)){var B=Yg;l++}else B=b,0===fa&&a(Zg);return B}function ja(){var B;var P=[];for(B=Ra();B!==b;)P.push(B),B=Ra();return P}function Ra(){if($g.test(f.charAt(l))){var B=
f.charAt(l);l++}else B=b,0===fa&&a(ah);return B}function Nb(B,P,U,ca){B={type:"binary-expression",operator:B,left:P,right:U};void 0!==ca&&(B.escape=ca);return B}function nb(B,P){for(var U=0;U<P.length;U++)B=Nb(P[U][1],B,P[U][3]);return B}r=void 0!==r?r:{};var b={},Mb=r.grammarSource,Ld={start:v},Md=v,Nd="!",Sc="\x3d",Uc="\x3e\x3d",Sd="\x3e",Vc="\x3c\x3d",Wc="\x3c\x3e",Wd="\x3c",Xc="!\x3d",Ac="+",Cc="-",Yc="||",$d="*",be="/",Gf="@",Fd="'",Hd="N'",yc="''",Tf=".",ke="null",de="true",ge="false",ag="in",
cg="is",eg="like",Pd="escape",gg="not",ig="and",kg="or",mg="between",og="from",Ee="for",ze="substring",ne="extract",qg="trim",Ke="position",sg="timestamp",ug="date",wg="time",If="leading",Kf="trailing",Mf="both",Qe="cast",Ue="as",Ye="integer",af="smallint",df="float",gf="real",kf="varchar",Of="to",yg="interval",Ag="year",re="timezone_hour",ue="timezone_minute",Cg="month",Eg="day",Gg="hour",Ig="minute",Kg="second",Mg="case",Og="end",Qg="when",Sg="then",Rf="else",Ug=",",Wg="(",Yg=")",vd="`",Af=/^[A-Za-z_\x80-\uFFFF]/,
Cf=/^[A-Za-z0-9_]/,Dd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ef=/^["]/,Jd=/^[^']/,Zf=/^[0-9]/,Vf=/^[eE]/,Xf=/^[+\-]/,$g=/^[ \t\n\r]/,xd=/^[^`]/,Od=F("!",!1),Tc=F("\x3d",!1),Rd=F("\x3e\x3d",!1),Td=F("\x3e",!1),Ud=F("\x3c\x3d",!1),Vd=F("\x3c\x3e",!1),Xd=F("\x3c",!1),Yd=F("!\x3d",!1),Bc=F("+",!1),Dc=F("-",!1),Zd=F("||",!1),ae=F("*",!1),ce=F("/",!1),Bf=E([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Df=E([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ed=E([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],
!1,!1),Ff=E(['"'],!1,!1),Hf=F("@",!1),Gd=F("'",!1),Qf=F("N'",!1),Id=F("''",!1),Kd=E(["'"],!0,!1),Uf=F(".",!1),$f=E([["0","9"]],!1,!1),Wf=E(["e","E"],!1,!1),Yf=E(["+","-"],!1,!1),le=F("NULL",!0),ee=F("TRUE",!0),he=F("FALSE",!0),bg=F("IN",!0),dg=F("IS",!0),fg=F("LIKE",!0),Qd=F("ESCAPE",!0),hg=F("NOT",!0),jg=F("AND",!0),lg=F("OR",!0),ng=F("BETWEEN",!0),pg=F("FROM",!0),Fe=F("FOR",!0),Ae=F("SUBSTRING",!0),oe=F("EXTRACT",!0),rg=F("TRIM",!0),Le=F("POSITION",!0),tg=F("TIMESTAMP",!0),vg=F("DATE",!0),xg=F("TIME",
!0),Jf=F("LEADING",!0),Lf=F("TRAILING",!0),Nf=F("BOTH",!0),Re=F("CAST",!0),Ve=F("AS",!0),Ze=F("INTEGER",!0),bf=F("SMALLINT",!0),ef=F("FLOAT",!0),hf=F("REAL",!0),lf=F("VARCHAR",!0),Pf=F("TO",!0),zg=F("INTERVAL",!0),Bg=F("YEAR",!0),se=F("TIMEZONE_HOUR",!0),ve=F("TIMEZONE_MINUTE",!0),Dg=F("MONTH",!0),Fg=F("DAY",!0),Hg=F("HOUR",!0),Jg=F("MINUTE",!0),Lg=F("SECOND",!0),Ng=F("CASE",!0),Pg=F("END",!0),Rg=F("WHEN",!0),Tg=F("THEN",!0),Sf=F("ELSE",!0),Vg=F(",",!1),Xg=F("(",!1),Zg=F(")",!1),ah=E([" ","\t","\n",
"\r"],!1,!1),wd=F("`",!1),yd=E(["`"],!0,!1),l=0,ma=0,Zb=[{line:1,column:1}],eb=0,zc=[],fa=0;if("startRule"in r){if(!(r.startRule in Ld))throw Error("Can't start parsing from rule \""+r.startRule+'".');Md=Ld[r.startRule]}var Rc=Md();if(Rc!==b&&l===f.length)return Rc;Rc!==b&&l<f.length&&a({type:"end"});throw function(B,P,U){return new g(g.buildMessage(B,P),B,P,U)}(zc,eb<f.length?f.charAt(eb):null,eb<f.length?n(eb,eb+1):n(eb,eb));}}})})(A);var y=A.exports;class M{static parse(p){return y.parse(p)}}c.WhereGrammar=
M;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(c,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});c.kebabDict=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(c){c.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,
supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q,F,E){function t(x,D,N,d){const H=d.x-N.x;d=d.y-N.y;D=Math.min(1,Math.max(0,((D.x-N.x)*H+(D.y-N.y)*d)/(H*H+d*d)));x.x=N.x+H*D;x.y=N.y+d*D}function n(x,D){return x?D?4:3:D?3:2}class a{constructor(x,D,N){this.items=x;this.query=D;this.geometryType=N.geometryType;this.hasM=N.hasM;this.hasZ=N.hasZ;this.fieldsIndex=N.fieldsIndex;this.objectIdField=N.objectIdField;this.spatialReference=N.spatialReference;this.featureAdapter=N.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const x=
new w(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return x.countDistinctValues(this.items);const {groupByFieldsForStatistics:D,having:N,outStatistics:d}=this.query;if(!D?.length)return 1;const H=new Map,S=new Map,J=new Set;for(const V of d){var {statisticType:R}=V;R="exceedslimit"!==R?V.onStatisticField:void 0;if(!S.has(R)){var O=[];for(const m of D){const Q=this._getAttributeValues(x,m,H);O.push(Q)}S.set(R,this._calculateUniqueValues(O,x.returnDistinctValues))}R=
S.get(R);for(const m in R){const {data:Q,items:k}=R[m];O=Q.join(",");N&&!x.validateItems(k,N)||J.add(O)}}return J.size}async createQueryResponse(){let x;x=this.query.outStatistics?this.query.outStatistics.some(D=>"exceedslimit"===D.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const D=this.query.geometry;g.isValid(this.query.outSR)&&!g.equals(D.spatialReference,
this.query.outSR)?x.queryGeometry=f.cleanFromGeometryEngine({spatialReference:this.query.outSR,...r.project(D,D.spatialReference,this.query.outSR)}):x.queryGeometry=f.cleanFromGeometryEngine({spatialReference:this.query.outSR,...D})}return x}createSnappingResponse(x,D){const N=this.featureAdapter,d=n(this.hasZ,this.hasM),{point:H,mode:S}=x,J="number"===typeof x.distance?x.distance:x.distance.x,R="number"===typeof x.distance?x.distance:x.distance.y,O={candidates:[]},V="esriGeometryPolygon"===this.geometryType;
D=this._getPointCreator(S,this.spatialReference,D);const m=new v(null,0),Q=new v(null,0),k={x:0,y:0,z:0};for(const la of this.items){var u=N.getGeometry(la);if(null==u)continue;const {coords:na,lengths:ua}=u;m.coords=na;Q.coords=na;if(x.returnEdge){u=0;for(var K=0;K<ua.length;K++){var I=ua[K];for(var T=0;T<I;T++,u+=d){var Y=m;Y.coordsIndex=u;if(T!==I-1){const ta=Q;ta.coordsIndex=u+d;const pa=k;t(k,H,Y,ta);var ea=(H.x-pa.x)/J;const va=(H.y-pa.y)/R;ea=ea*ea+va*va;1>=ea&&O.candidates.push(q.makeEdgeCandidate(N.getObjectId(la),
D(pa),Math.sqrt(ea),D(Y),D(ta)))}}}}if("none"!==x.vertexMode)if(u=V?na.length-d:na.length,"all"===x.vertexMode)for(K=0;K<u;K+=d)I=m,I.coordsIndex=K,T=(H.x-I.x)/J,Y=(H.y-I.y)/R,T=T*T+Y*Y,1>=T&&O.candidates.push(q.makeVertexCandidate(N.getObjectId(la),D(I),Math.sqrt(T)));else if("ends"===x.vertexMode){u=[0];V||u.push(na.length-d);for(const ta of u)u=m,u.coordsIndex=ta,K=(H.x-u.x)/J,I=(H.y-u.y)/R,K=K*K+I*I,1>=K&&O.candidates.push(q.makeVertexCandidate(N.getObjectId(la),D(u),Math.sqrt(K)))}}O.candidates.sort((la,
na)=>la.distance-na.distance);return O}_getPointCreator(x,D,N){const d=null==N||g.equals(D,N)?S=>S:S=>r.project(S,D,N),{hasZ:H}=this;return"3d"===x?H?({x:S,y:J,z:R})=>d({x:S,y:J,z:R}):({x:S,y:J})=>d({x:S,y:J,z:0}):({x:S,y:J})=>d({x:S,y:J})}async createSummaryStatisticsResponse(x){const {field:D,valueExpression:N,normalizationField:d,normalizationType:H,normalizationTotal:S,minValue:J,maxValue:R,scale:O,timeZone:V}=x;var m=this.fieldsIndex.get(D);x=F.isDateField(m)||F.isDateOnlyField(m)||F.isTimestampOffsetField(m);
const Q=await this._getDataValues({field:D,valueExpression:N,normalizationField:d,normalizationType:H,normalizationTotal:S,scale:O,timeZone:V}),k=E.isNullCountSupported({normalizationType:H,normalizationField:d,minValue:J,maxValue:R}),u={value:.5,fieldType:m?.type};m=F.isStringField(m)?E.calculateStringStatistics({values:Q,supportsNullCount:k,percentileParams:u}):E.calculateStatistics({values:Q,minValue:J,maxValue:R,useSampleStdDev:!H,supportsNullCount:k,percentileParams:u});return E.processSummaryStatisticsResult(m,
x)}async createUniqueValuesResponse(x){const {field:D,valueExpression:N,domains:d,returnAllCodedValues:H,scale:S,timeZone:J}=x;var R=await this._getDataValues({field:D,field2:x.field2,field3:x.field3,fieldDelimiter:x.fieldDelimiter,valueExpression:N,scale:S,timeZone:J},!1);R=E.calculateUniqueValuesCount(R);return E.createUVResult(R,d,H,x.fieldDelimiter)}async createClassBreaksResponse(x){const {field:D,valueExpression:N,normalizationField:d,normalizationType:H,normalizationTotal:S,classificationMethod:J,
standardDeviationInterval:R,minValue:O,maxValue:V,numClasses:m,scale:Q,timeZone:k}=x;x=await this._getDataValues({field:D,valueExpression:N,normalizationField:d,normalizationType:H,normalizationTotal:S,scale:Q,timeZone:k});x=E.calculateClassBreaks(x,{field:D,normalizationField:d,normalizationType:H,normalizationTotal:S,classificationMethod:J,standardDeviationInterval:R,minValue:O,maxValue:V,numClasses:m});return E.resolveCBResult(x,J)}async createHistogramResponse(x){const {field:D,valueExpression:N,
normalizationField:d,normalizationType:H,normalizationTotal:S,classificationMethod:J,standardDeviationInterval:R,minValue:O,maxValue:V,numBins:m,scale:Q,timeZone:k}=x;x=await this._getDataValues({field:D,valueExpression:N,normalizationField:d,normalizationType:H,normalizationTotal:S,scale:Q,timeZone:k});return E.calculateHistogram(x,{field:D,normalizationField:d,normalizationType:H,normalizationTotal:S,classificationMethod:J,standardDeviationInterval:R,minValue:O,maxValue:V,numBins:m})}_sortFeatures(x,
D,N){if(1<x.length&&D?.length)for(const d of D.reverse()){D=d.split(" ");const H=D[0],S=this.fieldsIndex.get(H);D=D[1]?"desc"===D[1].toLowerCase():!1;const J=E.getAttributeComparator(S?.type,D);x.sort((R,O)=>{R=N(R,H,S);O=N(O,H,S);return J(R,O)})}}_createFeatureQueryResponse(x){const D=this.items,{geometryType:N,hasM:d,hasZ:H,objectIdField:S,spatialReference:J}=this,{outFields:R,outSR:O,quantizationParameters:V,resultRecordCount:m,resultOffset:Q,returnZ:k,returnM:u}=x,K=null!=m?D.length>(Q||0)+m:
!1,I=R&&(R.includes("*")?[...this.fieldsIndex.fields]:R.map(T=>this.fieldsIndex.get(T)));return{exceededTransferLimit:K,features:this._createFeatures(x,D),fields:I,geometryType:N,hasM:d&&u,hasZ:H&&k,objectIdFieldName:S,spatialReference:f.cleanFromGeometryEngine(O||J),transform:V&&p.toQuantizationTransform(V)||null}}_createFeatures(x,D){const N=new w(x,this.featureAdapter,this.fieldsIndex),{hasM:d,hasZ:H}=this,{orderByFields:S,quantizationParameters:J,returnGeometry:R,returnCentroid:O,maxAllowableOffset:V,
resultOffset:m,resultRecordCount:Q,returnZ:k=!1,returnM:u=!1}=x,K=H&&k,I=d&&u;x=[];var T=0;D=[...D];this._sortFeatures(D,S,(la,na,ua)=>N.getFieldValue(la,na,ua));if(this.geometryType&&(R||O)){var Y=p.toQuantizationTransform(J)??void 0;if(R&&!O)for(var ea of D)x[T++]={attributes:N.getAttributes(ea),geometry:f.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ea),V,Y,K,I)};else if(!R&&O)for(const la of D)x[T++]={attributes:N.getAttributes(la),centroid:f.transformCentroid(this,
this.featureAdapter.getCentroid(la,this),Y)};else for(const la of D)x[T++]={attributes:N.getAttributes(la),centroid:f.transformCentroid(this,this.featureAdapter.getCentroid(la,this),Y),geometry:f.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(la),V,Y,K,I)}}else for(Y of D)(ea=N.getAttributes(Y))&&(x[T++]={attributes:ea});T=m||0;null!=Q&&(x=x.slice(T,Math.min(x.length,T+Q)));return x}_createExceedsLimitQueryResponse(x){var D=!1;let N=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY;
D=Number.POSITIVE_INFINITY;for(const H of x.outStatistics??[])if("exceedslimit"===H.statisticType){N=null!=H.maxPointCount?H.maxPointCount:Number.POSITIVE_INFINITY;d=null!=H.maxRecordCount?H.maxRecordCount:Number.POSITIVE_INFINITY;D=null!=H.maxVertexCount?H.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)D=this.items.length>N;else if(this.items.length>d)D=!0;else{x=n(this.hasZ,this.hasM);const H=this.featureAdapter;D=this.items.reduce((S,J)=>{J=H.getGeometry(J);
return S+(null!=J&&J.coords.length||0)},0)/x>D}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(D)}}]}}async _createStatisticsQueryResponse(x){var D={attributes:{}};const N=[],d=new Map,H=new Map,S=new Map,J=new Map,R=new w(x,this.featureAdapter,this.fieldsIndex);var O=x.outStatistics;const {groupByFieldsForStatistics:V,having:m,orderByFields:Q,resultRecordCount:k}=
x;x=V?.length;const u=!!x,K=u?V[0]:null,I=u&&!this.fieldsIndex.get(K);for(const na of O??[]){const {outStatisticFieldName:ua,statisticType:ta}=na;O=na;const pa="exceedslimit"!==ta?na.onStatisticField:void 0,va="percentile_disc"===ta||"percentile_cont"===ta;var T="EnvelopeAggregate"===ta||"CentroidAggregate"===ta||"ConvexHullAggregate"===ta;const wa=u&&1===x&&(pa===K||I)&&"count"===ta;if(u){if(!S.has(pa)){var Y=[];for(const Da of V){var ea=this._getAttributeValues(R,Da,d);Y.push(ea)}S.set(pa,this._calculateUniqueValues(Y,
T?!1:R.returnDistinctValues))}Y=S.get(pa);if(!Y)continue;ea=Object.keys(Y);for(const Da of ea){const {count:Ia,data:Pa,items:Na,itemPositions:Sa}=Y[Da];ea=Pa.join(",");if(!m||R.validateItems(Na,m)){const Va=J.get(ea)||{attributes:{}};if(T){Va.aggregateGeometries||(Va.aggregateGeometries={});const {aggregateGeometries:C,outStatisticFieldName:X}=await this._getAggregateGeometry(O,Na);Va.aggregateGeometries[X]=C}else{var la=null;if(wa)la=Ia;else{const C=this._getAttributeValues(R,pa,d);la=Sa.map(X=>
C[X]);la=va&&"statisticParameters"in O?this._getPercentileValue(O,la):this._getStatisticValue(O,la,null,R.returnDistinctValues)}Va.attributes[ua]=la}let h=0;V.forEach((C,X)=>Va.attributes[this.fieldsIndex.get(C)?C:`EXPR_${++h}`]=Pa[X]);J.set(ea,Va)}}}else if(T){D.aggregateGeometries||(D.aggregateGeometries={});const {aggregateGeometries:Da,outStatisticFieldName:Ia}=await this._getAggregateGeometry(O,this.items);D.aggregateGeometries[Ia]=Da}else T=this._getAttributeValues(R,pa,d),D.attributes[ua]=
va&&"statisticParameters"in O?this._getPercentileValue(O,T):this._getStatisticValue(O,T,H,R.returnDistinctValues);O="min"!==ta&&"max"!==ta||!F.isStringField(this.fieldsIndex.get(pa))&&!this._isAnyDateField(pa)?null:this.fieldsIndex.get(pa)?.type;N.push({name:ua,alias:ua,type:O||"esriFieldTypeDouble"})}D=u?Array.from(J.values()):[D];this._sortFeatures(D,Q,(na,ua)=>na.attributes[ua]);k&&(D.length=Math.min(k,D.length));return{fields:N,features:D}}_isAnyDateField(x){x=this.fieldsIndex.get(x);return F.isDateField(x)||
F.isDateOnlyField(x)||F.isTimestampOffsetField(x)||F.isTimeOnlyField(x)}async _getAggregateGeometry(x,D){const {convexHull:N,union:d}=await new Promise((k,u)=>c(["../../../geometry/geometryEngineJSON"],k,u)),{statisticType:H,outStatisticFieldName:S}=x,{featureAdapter:J,spatialReference:R,geometryType:O,hasZ:V,hasM:m}=this;D=D.map(k=>f.getGeometry(O,V,m,J.getGeometry(k)));const Q=N(R,D,!0)[0];x={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===H?(D=Q?M.getPolygonExtent(Q):
M.getGeometryExtent(d(R,D)),x.aggregateGeometries={...D,spatialReference:R},x.outStatisticFieldName=S||"extent"):"CentroidAggregate"===H?(D=Q?y.polygonCentroid(Q):y.extentCentroid(M.getGeometryExtent(d(R,D))),x.aggregateGeometries={x:D[0],y:D[1],spatialReference:R},x.outStatisticFieldName=S||"centroid"):"ConvexHullAggregate"===H&&(x.aggregateGeometries=Q,x.outStatisticFieldName=S||"convexHull");return x}_getStatisticValue(x,D,N,d){const {onStatisticField:H,statisticType:S}=x;x=null;x=N?.has(H)?N.get(H):
F.isStringField(this.fieldsIndex.get(H))||this._isAnyDateField(H)?E.calculateStringStatistics({values:D,returnDistinct:d}):E.calculateStatistics({values:d?[...(new Set(D))]:D,minValue:null,maxValue:null,useSampleStdDev:!0});N&&N.set(H,x);return x["var"===S?"variance":S]}_getPercentileValue(x,D){const {onStatisticField:N,statisticParameters:d,statisticType:H}=x,{value:S,orderBy:J}=d;x=this.fieldsIndex.get(N);return E.calculatePercentile(D,{value:S,orderBy:J,fieldType:x?.type,isDiscrete:"percentile_disc"===
H})}_getAttributeValues(x,D,N){if(N.has(D))return N.get(D);const d=this.fieldsIndex.get(D),H=this.items.map(S=>x.getFieldValue(S,D,d));N.set(D,H);return H}_calculateUniqueValues(x,D){const N={},d=this.items,H=d.length;for(let S=0;S<H;S++){const J=d[S],R=[];for(const V of x)R.push(V[S]);const O=R.join(",");null==N[O]?N[O]={count:1,data:R,items:[J],itemPositions:[S]}:(D||N[O].count++,N[O].items.push(J),N[O].itemPositions.push(S))}return N}async _getDataValues(x,D=!0){const N=new w(this.query,this.featureAdapter,
this.fieldsIndex),{valueExpression:d,scale:H,timeZone:S}=x;return d?N.getExpressionValues(this.items,d,{viewingMode:"map",scale:H,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},S):N.getDataValues(this.items,A.clone(x),D)}}class v{constructor(x,D){this.coords=x;this.coordsIndex=D}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}e.QueryEngineResult=
a;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(c,e){function A({scale:O,translate:V},m){return Math.round((m-V[0])/O[0])}function y({scale:O,translate:V},m){return Math.round((V[1]-m)/O[1])}function M(O,V,m){const Q=[];let k,u,K,I;for(let T=0;T<m.length;T++){const Y=m[T];if(0<T){if(K=A(O,Y[0]),I=y(O,Y[1]),K!==k||I!==u)Q.push(V(Y,K-k,I-u)),k=K,u=I}else k=A(O,Y[0]),u=y(O,Y[1]),Q.push(V(Y,
k,u))}return 0<Q.length?Q:null}function p(O,V,m,Q){return M(O,m?Q?R:J:Q?J:S,V)}function g(O,V,m,Q){const k=[];m=m?Q?R:J:Q?J:S;for(Q=0;Q<V.length;Q++){const u=M(O,m,V[Q]);u&&3<=u.length&&k.push(u)}return k.length?k:null}function w(O,V,m,Q){const k=[];m=m?Q?R:J:Q?J:S;for(Q=0;Q<V.length;Q++){const u=M(O,m,V[Q]);u&&2<=u.length&&k.push(u)}return k.length?k:null}function f({scale:O,translate:V},m){return m*O[0]+V[0]}function r({scale:O,translate:V},m){return V[1]-m*O[1]}function q(O,V,m){const Q=Array(m.length);
if(!m.length)return Q;const [k,u]=O.scale;let K=f(O,m[0][0]);O=r(O,m[0][1]);Q[0]=V(m[0],K,O);for(let I=1;I<m.length;I++){const T=m[I];K+=T[0]*k;O-=T[1]*u;Q[I]=V(T,K,O)}return Q}function F(O,V,m){const Q=Array(m.length);for(let k=0;k<m.length;k++)Q[k]=q(O,V,m[k]);return Q}function E(O,V,m,Q){return q(O,m?Q?R:J:Q?J:S,V)}function t(O,V,m,Q){return F(O,m?Q?R:J:Q?J:S,V)}function n(O,V,m,Q){return F(O,m?Q?R:J:Q?J:S,V)}function a(O,V,m){let [Q,k]=m[0],u=Math.min(Q,V[0]),K=Math.min(k,V[1]),I=Math.max(Q,V[2]);
V=Math.max(k,V[3]);for(let T=1;T<m.length;T++){const [Y,ea]=m[T];Q+=Y;k+=ea;0>Y&&(u=Math.min(u,Q));0<Y&&(I=Math.max(I,Q));0>ea?K=Math.min(K,k):0<ea&&(V=Math.max(V,k))}O[0]=u;O[1]=K;O[2]=I;O[3]=V;return O}function v(O,V){if(!V.length)return null;O[0]=O[1]=Number.POSITIVE_INFINITY;O[2]=O[3]=Number.NEGATIVE_INFINITY;for(let m=0;m<V.length;m++)a(O,O,V[m]);return O}function x(O,V,m,Q,k){V.xmin=A(O,m.xmin);V.ymin=y(O,m.ymin);V.xmax=A(O,m.xmax);V.ymax=y(O,m.ymax);V!==m&&(Q&&(V.zmin=m.zmin,V.zmax=m.zmax),
k&&(V.mmin=m.mmin,V.mmax=m.mmax));return V}function D(O,V,m,Q,k){V.points=p(O,m.points,Q,k)??[];return V}function N(O,V,m,Q,k){V.x=A(O,m.x);V.y=y(O,m.y);V!==m&&(Q&&(V.z=m.z),k&&(V.m=m.m));return V}function d(O,V,m,Q,k){O=g(O,m.rings,Q,k);if(!O)return null;V.rings=O;return V}function H(O,V,m,Q,k){O=w(O,m.paths,Q,k);if(!O)return null;V.paths=O;return V}const S=(O,V,m)=>[V,m],J=(O,V,m)=>[V,m,O[2]],R=(O,V,m)=>[V,m,O[2],O[3]];c.equals=function(O,V){if(O===V||null==O&&null==V)return!0;if(null==O||null==
V)return!1;let m,Q,k,u;O&&"upperLeft"===O.originPosition?(m=O.translate[0],Q=O.translate[1],O=O.scale[0]):(m=null!=O.extent?O.extent.xmin:0,Q=null!=O.extent?O.extent.ymax:0,O=O.tolerance);V&&"upperLeft"===V.originPosition?(k=V.translate[0],u=V.translate[1],V=V.scale[0]):(k=null!=V.extent?V.extent.xmin:0,u=null!=V.extent?V.extent.ymax:0,V=V.tolerance);return m===k&&Q===u&&O===V};c.getQuantizedBoundsCoordsArray=a;c.getQuantizedBoundsCoordsArrayArray=v;c.getQuantizedBoundsPaths=function(O){return v([0,
0,0,0],O)};c.getQuantizedBoundsPoints=function(O){const V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return a(V,V,O)};c.getQuantizedBoundsRings=function(O){return v([0,0,0,0],O)};c.quantizeBounds=function(O,V,m){V[0]=A(O,m[0]);V[3]=y(O,m[1]);V[2]=A(O,m[2]);V[1]=y(O,m[3]);return V};c.quantizeExtent=x;c.quantizeGeometry=function(O,V){return O&&V?e.isPoint(V)?N(O,{},V,!1,!1):e.isPolyline(V)?H(O,{},V,!1,!1):e.isPolygon(V)?d(O,{},V,!1,!1):e.isMultipoint(V)?
D(O,{},V,!1,!1):e.isExtent(V)?x(O,{},V,!1,!1):null:null};c.quantizeMultipoint=D;c.quantizePaths=w;c.quantizePoint=N;c.quantizePoints=p;c.quantizePolygon=d;c.quantizePolyline=H;c.quantizeRings=g;c.quantizeX=A;c.quantizeY=y;c.toQuantizationTransform=function(O){return O?{originPosition:"upper-left"===O.originPosition?"upperLeft":"lower-left"===O.originPosition?"lowerLeft":O.originPosition,scale:O.tolerance?[O.tolerance,O.tolerance]:[1,1],translate:null!=O.extent?[O.extent.xmin,O.extent.ymax]:[0,0]}:
null};c.unquantizeBounds=function(O,V,m){return m?(V[0]=f(O,m[0]),V[1]=r(O,m[3]),V[2]=f(O,m[2]),V[3]=r(O,m[1]),V):[f(O,V[0]),r(O,V[3]),f(O,V[2]),r(O,V[1])]};c.unquantizeCoordsArray=q;c.unquantizeCoordsArrayArray=F;c.unquantizeExtent=function(O,V,m,Q,k){V.xmin=f(O,m.xmin);V.ymin=r(O,m.ymin);V.xmax=f(O,m.xmax);V.ymax=r(O,m.ymax);V!==m&&(Q&&(V.zmin=m.zmin,V.zmax=m.zmax),k&&(V.mmin=m.mmin,V.mmax=m.mmax));return V};c.unquantizeMultipoint=function(O,V,m,Q,k){null!=m&&(V.points=E(O,m.points,Q,k));return V};
c.unquantizePaths=t;c.unquantizePoint=function(O,V,m,Q,k){if(null==m)return V;V.x=f(O,m.x);V.y=r(O,m.y);V!==m&&(Q&&(V.z=m.z),k&&(V.m=m.m));return V};c.unquantizePoints=E;c.unquantizePolygon=function(O,V,m,Q,k){null!=m&&(V.rings=n(O,m.rings,Q,k));return V};c.unquantizePolyline=function(O,V,m,Q,k){null!=m&&(V.paths=t(O,m.paths,Q,k));return V};c.unquantizeRings=n;c.unquantizeX=f;c.unquantizeY=r;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(c,e,A,y,M,p){class g{constructor(w,f,r){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=w.returnDistinctValues??!1;this.fieldsIndex=r;this.featureAdapter=f;if((f=w.outFields)&&!f.includes("*")){this.outFields=f;w=0;for(const F of f){var q=c.getExpressionFromFieldName(F);q=(f=this.fieldsIndex.get(q))?null:c.getWhereClause(q,r);f=f?f.name:c.getAliasFromFieldName(F)||`FIELD_EXP_${w++}`;this._fieldDataCache.set(F,{alias:f,clause:q})}}}countDistinctValues(w){if(!this.returnDistinctValues)return w.length;
w.forEach(f=>this.getAttributes(f));return this._returnDistinctMap.size}getAttributes(w){w=this._processAttributesForOutFields(w);return this._processAttributesForDistinctValues(w)}getFieldValue(w,f,r){const q=r?r.name:f;let F=null;this._fieldDataCache.has(q)?F=this._fieldDataCache.get(q)?.clause:r||(F=c.getWhereClause(f,this.fieldsIndex),this._fieldDataCache.set(q,{alias:q,clause:F}));return r?this.featureAdapter.getAttribute(w,q):F?.calculateValue(w,this.featureAdapter)}getDataValues(w,f,r=!0){const q=
f.normalizationType,F=f.normalizationTotal,E=this.fieldsIndex.get(f.field),t=A.isDateOnlyField(E)||A.isTimestampOffsetField(E),n=A.isTimeOnlyField(E);return w.map(a=>{let v=f.field&&this.getFieldValue(a,f.field,this.fieldsIndex.get(f.field));f.field2?(v=`${M.processNullValue(v)}${f.fieldDelimiter}${M.processNullValue(this.getFieldValue(a,f.field2,this.fieldsIndex.get(f.field2)))}`,f.field3&&(v=`${v}${f.fieldDelimiter}${M.processNullValue(this.getFieldValue(a,f.field3,this.fieldsIndex.get(f.field3)))}`)):
"string"===typeof v&&r&&(t?v=v?(new Date(v)).getTime():null:n&&(v=v?y.timeOnlyToMilliseconds(v):null));q&&Number.isFinite(v)&&(a="field"===q&&f.normalizationField?this.getFieldValue(a,f.normalizationField,this.fieldsIndex.get(f.normalizationField)):null,v=M.getNormalizedValue(v,q,a,F));return v})}async getExpressionValues(w,f,r,q,F){const {arcadeUtils:E}=await p.loadArcade(),t=E.hasGeometryOperations(f);t&&await E.enableGeometryOperations();const n=E.createFunction(f),a=E.getViewInfo(r),v={fields:this.fieldsIndex.fields};
return w.map(x=>{x={attributes:this.featureAdapter.getAttributes(x),layer:v,geometry:t?{...e.getGeometry(q.geometryType,q.hasZ,q.hasM,this.featureAdapter.getGeometry(x)),spatialReference:r?.spatialReference}:null};x=E.createExecContext(x,a,F);return E.executeFunction(n,x)})}validateItem(w,f){this._fieldDataCache.has(f)||this._fieldDataCache.set(f,{alias:f,clause:c.getWhereClause(f,this.fieldsIndex)});return this._fieldDataCache.get(f)?.clause?.testFeature(w,this.featureAdapter)??!1}validateItems(w,
f){this._fieldDataCache.has(f)||this._fieldDataCache.set(f,{alias:f,clause:c.getWhereClause(f,this.fieldsIndex)});return this._fieldDataCache.get(f)?.clause?.testSet(w,this.featureAdapter)??!1}_processAttributesForOutFields(w){const f=this.outFields;if(!f?.length)return this.featureAdapter.getAttributes(w);const r={};for(const q of f){const {alias:F,clause:E}=this._fieldDataCache.get(q);r[F]=E?E.calculateValue(w,this.featureAdapter):this.featureAdapter.getAttribute(w,F)}return r}_processAttributesForDistinctValues(w){if(null==
w||!this.returnDistinctValues)return w;var f=this.outFields,r=[];if(f)for(const F of f){var {alias:q}=this._fieldDataCache.get(F);r.push(w[q])}else for(q in w)r.push(w[q]);f=`${(f||["*"]).join(",")}=${r.join(",")}`;r=this._returnDistinctMap.get(f)||0;this._returnDistinctMap.set(f,++r);return 1<r?null:w}}return g})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q,F,E,t){function n(d){d=N.exec(d);if(!d)return null;const {hh:H,mm:S,ss:J,ms:R}=d.groups;return Number(H)*M.millisecondsPerTimeUnit.hours+Number(S)*M.millisecondsPerTimeUnit.minutes+Number(J)*M.millisecondsPerTimeUnit.seconds+Number(R||0)}function a(d,H){d=null!=d?d:"";null!=H&&H&&(d=d?"("+d+") AND ("+H+")":H);return d}function v(d){const H=d.layer;return d.fields.filter(S=>!H.getField(S))}function x(d){const H=d.layer;return d.fields.filter(S=>{S=H.getFieldUsageInfo(S);
return!S||!S.supportsStatistics})}let D=null;const N=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;c.calculateHeatmapStats=function(d,H=18,S,J,R,O){const V=new Float64Array(R*O);H=Math.round(y.pt2px(H));let m=Number.POSITIVE_INFINITY,Q=Number.NEGATIVE_INFINITY;var k=0;let u=0,K=0,I=0;S=r.createValueFunction(J,S);for(const {geometry:Y,attributes:ea}of d){const {x:la,y:na}=Y;d=Math.max(0,la-H);k=Math.max(0,na-H);J=Math.min(O,na+H);const ua=Math.min(R,la+H),
ta=+S(ea);for(let pa=k;pa<J;pa++)for(let va=d;va<ua;va++){k=pa*R+va;const wa=r.evaluateDensityKernel(va-la,pa-na,H);var T=V[k];k=V[k]+=wa*ta;T=k-T;u+=T;K+=T*T;k<m&&(m=k);k>Q&&(Q=k);I++}}return I?{mean:u/I,stdDev:Math.sqrt((K-u*u/I)/I),min:m,max:Q,mid:(Q-m)/2,count:I}:{mean:0,stddev:0,min:0,max:0,mid:0,count:0}};c.getDataValues=async function(d,H,S=!0){if(!H)return[];const {field:J,field2:R,field3:O,fieldDelimiter:V,fieldInfos:m,timeZone:Q}=d;var k=J&&m?.find(pa=>pa.name.toLowerCase()===J.toLowerCase());
const u=k?f.isTimeOnlyField(k):!1,K=k?q.isAnyDateField(k):!1,I=d.valueExpression,T=d.normalizationType,Y=d.normalizationField,ea=d.normalizationTotal,la=[];k=d.viewInfoParams;let na=null,ua=null;if(I){if(!D){const {arcadeUtils:pa}=await E.loadArcade();D=pa}D.hasGeometryOperations(I)&&await D.enableGeometryOperations();na=D.createFunction(I);ua=k?D.getViewInfo({viewingMode:k.viewingMode,scale:k.scale,spatialReference:new p(k.spatialReference)}):null}d=d.fieldInfos;const ta=H[0]&&"declaredClass"in H[0]&&
"esri.Graphic"===H[0].declaredClass||!d?null:{fields:d};H.forEach(pa=>{var va=pa.attributes;if(I){var wa=D.createExecContext(ta?{...pa,layer:ta}:pa,ua,Q);wa=D.executeFunction(na,wa)}else va&&(wa=va[J],R?(wa=`${F.processNullValue(wa)}${V}${F.processNullValue(va[R])}`,O&&(wa=`${wa}${V}${F.processNullValue(va[O])}`)):"string"===typeof wa&&S&&(K?wa=wa?(new Date(wa)).getTime():null:u&&(wa=wa?n(wa):null)));T&&"number"===typeof wa&&isFinite(wa)&&(va=va&&parseFloat(va[Y]),wa=F.getNormalizedValue(wa,T,va,
ea));la.push(wa)});return la};c.getRangeExpr=function(d,H,S){H=null!=H?d+" \x3e\x3d "+H:"";d=null!=S?d+" \x3c\x3d "+S:"";S="";return(S=H&&d?a(H,d):H||d)?"("+S+")":""};c.getSQLFilterForNormalization=function(d){const H=d.field,S=d.normalizationType;d=d.normalizationField;let J;if("field"===S)J="(NOT "+d+" \x3d 0)";else if("log"===S||"natural-log"===S||"square-root"===S)J=`(${H} > 0)`;return J};c.getSumOfAttributesExpr=function(d,H,S){const J=[],R=[],O=[],V=[],m=[];d.forEach((u,K)=>{const I=u.field?
"field":"expression",T=u.field||u.valueExpression;u.field?(m.push(T),R.push(`var ${I}${K} = Number($feature["${T}"]);`)):(J.push(`function getValueForExpr${K}() {\n  ${T} \n}`),R.push(`var ${I}${K} = Number(getValueForExpr${K}());`));S||O.push(`${I}${K} = IIf(${I}${K} < 0, 0, ${I}${K});`);V.push(`${I}${K}`)});d="return sum;";const Q=J.length?null:m.reduce((u,K)=>`${u} + ${K}`);let k=null;H||S?H?S||(d="return IIf(sum \x3e\x3d 0, sum, null);",Q&&(k=`(( ${Q} ) >= 0)`)):(d="return IIf(sum !\x3d 0, sum, null);",
Q&&(k=`(( ${Q} ) <> 0)`)):(d="return IIf(sum \x3e 0, sum, null);",Q&&(k=`(( ${Q} ) > 0)`));return{valueExpression:[J.length?J.join("\n"):"",R.join("\n"),O.join("\n"),`var sum = ${V.join(" + ")};`,d].filter(Boolean).join("\n\n"),sqlExpression:Q,sqlWhere:k}};c.mergeWhereClauses=a;c.quantizeFeatures=function(d,H,S,J){const R=w.isWrappable(S)?w.getInfo(S):null,O=R?Math.round((R.valid[1]-R.valid[0])/H.scale[0]):null;return d.map(V=>{const m=new t(V.geometry);g.quantizePoint(H,m,m,m.hasZ,m.hasM);if(R){var Q=
O??0,k=J[0];0>m.x?m.x+=Q:m.x>k&&(m.x-=Q)}V.geometry=m;return V})};c.timeOnlyToMilliseconds=n;c.verifyBasicFieldValidity=function(d,H,S){const J=v({layer:d,fields:H});if(J.length)return new A(S,"Unknown fields: "+J.join(", ")+". You can only use fields defined in the layer schema");d=x({layer:d,fields:H});if(d.length)return new A(S,"Unsupported fields: "+d.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};c.verifyFieldType=function(d,
H,S,J){let R;H?H.name!==d.objectIdField&&J.includes(H.type)||(R=new A(S,"'field' should be one of these types: "+J.join(","))):R=new A(S,"'field' is not defined in the layer schema");return R};c.verifyFilterValidty=function(d,H){if(d&&"intersects"!==d.spatialRelationship)return new A(H,"Only 'intersects' spatialRelationship is supported for featureFilter")};c.verifyNumericField=function(d,H,S){let J;H?H.name!==d.objectIdField&&f.isNumericField(H)||(J=new A(S,"'field' should be one of these numeric types: "+
f.numericTypes.join(","))):J=new A(S,"'field' is not defined in the layer schema");return J};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(c){function e(y){return y?72*y/96:0}const A=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;c.castRenderScreenPointArray=function(y){return y};c.castRenderScreenPointArray3=function(y){return y};c.castScreenPointArray=function(y){return y};c.createRenderScreenPoint=function(y=0,M=0){return{x:y,
y:M}};c.createRenderScreenPointArray=function(y=0,M=0){return[y,M]};c.createRenderScreenPointArray3=function(y=0,M=0,p=0){return[y,M,p]};c.createScreenPoint=function(y=0,M=0){return{x:y,y:M}};c.createScreenPointArray=function(y=0,M=0){return[y,M]};c.pt2px=function(y){return y?y/72*96:0};c.px2pt=e;c.screenPointArrayToObject=function(y,M){return M?(M.x=y[0],M.y=y[1],M):{x:y[0],y:y[1]}};c.screenPointObjectToArray=function(y,M){return M?(M[0]=y.x,M[1]=y.y,2<M.length&&(M[2]=0),M):[y.x,y.y]};c.toPt=function(y){if("string"===
typeof y){var M=y.match(A);if(M){var p=Number(M[1]);M=M[3]&&M[3].toLowerCase();y="-"===y.charAt(0);p="px"===M?e(p):p;return y?-p:p}console.warn("screenUtils.toPt: input not recognized!");return null}return y};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports","../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(c,e,A,y){function M(w,f,r){return 0===w?0:w*g[f]/g[r]}function p(w){switch(w){case "milliseconds":return"millisecond";
case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const g={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};c.convertTime=M;c.isValidDate=function(w){return w instanceof Date&&!isNaN(w.getTime())};c.makeUTCTime=function(w,f,r="milliseconds"){f=new Date(M(f,r,"milliseconds"));
f.setUTCFullYear(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate());return f};c.mergeTimeExtents=function(w,f){return w&&f?w.intersection(f):w||f};c.millisecondsPerTimeUnit=g;c.offsetDate=function(w,f,r,q=A.system){q=new y.IANAZone(e.resolveTimeZone(q));w=y.DateTime.fromJSDate(w,{zone:q});q="decades"===r||"centuries"===r?"year":p(r);"decades"===r&&(f*=10);"centuries"===r&&(f*=100);return w.plus({[q]:f}).toJSDate()};c.offsetDateUTC=function(w,f,r="milliseconds"){w=w.getTime();f=M(f,r,"milliseconds");
return new Date(w+f)};c.resetUTCDate=function(w,f){w=new Date(w.getTime());w.setUTCFullYear(f.getFullYear(),f.getMonth(),f.getDate());return w};c.timeSinceUTCMidnight=function(w,f="milliseconds"){const r=M(w.getUTCHours(),"hours","milliseconds"),q=M(w.getUTCMinutes(),"minutes","milliseconds"),F=M(w.getUTCSeconds(),"seconds","milliseconds");w=w.getUTCMilliseconds();return M(r+q+F+w,"milliseconds",f)};c.truncateDate=function(w,f,r=A.system){r=new y.IANAZone(e.resolveTimeZone(r));w=y.DateTime.fromJSDate(w,
{zone:r});if("decades"===f||"centuries"===f)return w=w.startOf("year"),{year:r}=w,w.set({year:r-r%("decades"===f?10:100)}).toJSDate();f=p(f);return w.startOf(f).toJSDate()};c.truncateLocalTime=function(w){const f=new Date(0);f.setHours(0);f.setMinutes(0);f.setSeconds(0);f.setMilliseconds(0);f.setFullYear(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate());return f};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils",
"../../core/screenUtils","../../chunks/vec4","../../chunks/vec4f64"],function(c,e,A,y,M){function p(r,q,F,E){let {color:t,ratio:n}=q,{color:a,ratio:v}=F;v===n&&(1===v?n-=1E-6:v+=1E-6);q=e.clamp((E-n)/(v-n),0,1);y.lerp(r,t.toArray(),a.toArray(),q)}function g(r,q,F,E,t){r=new Uint32Array(r*r);q="buffer"in q?q:new Float64Array(q);F="buffer"in F?new Uint32Array(F.buffer):new Uint32Array((new Uint8Array(F)).buffer);t=F.length/(t-E);for(let n=0;n<q.length;n++)r[n]=F[e.clamp(Math.floor((q[n]-E)*t),0,F.length-
1)];return r.buffer}function w(r,q,F){r=Math.sqrt(r**2+q**2)/F;return 1<r?0:3/(Math.PI*F**2)*(1-r**2)**2}function f(r,q){return null!=r?"string"===typeof q?F=>-1*+F.readAttribute(r):F=>+F.readAttribute(r)+q:F=>1}c.calculateHeatmapIntensityInfoReaders=function(r,q,F,E){const {radius:t,fieldOffset:n,field:a}=q;q=Math.round(A.pt2px(t));const v=new Float64Array(F*E);let x=Number.NEGATIVE_INFINITY;const D=f(a,n),N=new Set;for(const J of r)for(r=J.getCursor();r.next();){var d=r.getObjectId();if(N.has(d))continue;
N.add(d);d=r.readLegacyPointGeometry();if(-128>d.x||d.x>=F+128||-128>d.y||d.y>E+128)continue;const R=+D(r),O=Math.max(0,Math.round(d.x)-q);var H=Math.max(0,Math.round(d.y)-q);const V=Math.min(E,Math.round(d.y)+q),m=Math.min(F,Math.round(d.x)+q);for(;H<V;H++)for(let Q=O;Q<m;Q++){var S=H*F+Q;const k=w(d.x-Q,d.y-H,q);S=v[S]+=k*R;S>x&&(x=S)}}return{matrix:v.buffer,max:x}};c.createHeatmapImageData=g;c.createValueFunction=function(r,q){return"function"===typeof r?r:r?"string"===typeof q?F=>-1*+F[r]:F=>
+F[r]+q:()=>1};c.createValueFunctionCursor=f;c.drawHeatmap=function(r,q,F,E,t,n){r.canvas.width=r.canvas.height=q;r.clearRect(0,0,q,q);const a=r.getImageData(0,0,q,q);F&&E&&a.data.set(new Uint8ClampedArray(g(q,F,E,t,n)));r.putImageData(a,0,0)};c.evaluateDensityKernel=w;c.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(r){return A.px2pt(2.4*r)};c.generateGradient=function(r){const q=new Uint8ClampedArray(2048);r=r.filter(({ratio:a})=>0<=a&&1>=a).sort((a,v)=>a.ratio-v.ratio).map(({color:a,ratio:v})=>
({color:a,ratio:Math.max(v,.001)}));if(1>r.length)return q;let F=r[0],E=r[0],t=1;const n=M.create();for(let a=0;512>a;a++){const v=(a+.5)/512;for(;v>E.ratio&&t<r.length;)F=E,E=r[t++];p(n,F,E,v);q.set(n,4*a)}return q};c.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(r){return A.pt2px(r)/2.4};c.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),
function(c,e,A,y,M,p){function g(t){return String(t).padStart(2,"0")}function w(t,n,a){if("date"===n||"number"===n){"number"===n&&(t=new Date(t));n=a?t.getFullYear():t.getUTCFullYear();const v=g((a?t.getMonth():t.getUTCMonth())+1),x=g(a?t.getDate():t.getUTCDate()),D=g(a?t.getHours():t.getUTCHours()),N=g(a?t.getMinutes():t.getUTCMinutes());t=g(a?t.getSeconds():t.getUTCSeconds());t=`TIMESTAMP'${n}-${v}-${x} ${D}:${N}:${t}'`}return t}function f(t,n){if(n instanceof Date)return"date";if("number"===typeof n)return"number";
if("string"===typeof n&&(t=t.getField(n),"\x3cnow\x3e"!==n.toLowerCase()&&A.isDateField(t)))return"field"}const r={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},q={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},F=new Set(["integer","small-integer"]);let E=null;c.castIntegerFieldToFloat=function(t){return`cast(${t} as float)`};c.dateTypes=["date","date-only","timestamp-offset"];
c.defaultBasemapGroups=r;c.fieldDelimiter=",";c.formatAnyDate=function(t,n){const {format:a,timeZoneOptions:v,fieldType:x}=n??{};let D;v&&({timeZone:N,timeZoneName:D}=p.getTimeZoneFormattingOptions(v.layerTimeZone,v.datesInUnknownTimezone,v.viewTimeZone,e.convertDateFormatToIntlOptions(a||"short-date-short-time"),x));if("string"===typeof t&&isNaN(Date.parse("time-only"===x?`1970-01-01T${t}Z`:t)))return t;switch(x){case "date-only":var N=e.convertDateFormatToIntlOptions(a||"short-date");return"string"===
typeof t?e.formatDateOnly(t,{...N}):e.formatDate(t,{...N,timeZone:p.utc});case "time-only":return N=e.convertDateFormatToIntlOptions(a||"short-time"),"string"===typeof t?e.formatTimeOnly(t,N):e.formatDate(t,{...N,timeZone:p.utc});case "timestamp-offset":if(!N&&"string"===typeof t&&(new Date(t)).toISOString()!==t)return t;N=(n=a||v?e.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0)?{...n,timeZone:N,timeZoneName:D}:void 0;return"string"===typeof t?e.formatTimestamp(t,N):e.formatDate(t,
N);default:return n=a||v?e.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0,e.formatDate("string"===typeof t?new Date(t):t,n?{...n,timeZone:N,timeZoneName:D}:void 0)}};c.getBasemapGroup=function(t,n=r){for(const a in n)if(n[a].includes(t))return a};c.getBasemapId=function(t,n,a=!0){let v=null;t&&("string"===typeof t?n.includes(t)&&(v=t):v=M.getWellKnownBasemapId(t));return a?v||"gray":v};c.getDateDiffSQL=function(t,n,a,v){const {hasQueryEngine:x}=t;a=w(a,f(t,a),x);t=w(n,f(t,n),x);
t=`(${a} - ${t})`;v=q[v];n="/";1>v&&(v=1/v,n="*");return{sqlExpression:1===v?t:`(${t} ${n} ${v})`,sqlWhere:null}};c.getDateType=f;c.getFieldsList=async function(t){const {field:n,field2:a,field3:v,normalizationField:x,valueExpression:D}=t;t=[];D&&(E||({arcadeUtils:t}=await y.loadArcade(),E=t),t=E.extractFieldNames(D));n&&t.push(n);a&&t.push(a);v&&t.push(v);x&&t.push(x);return t};c.getNormalizationType=function(t){let n=t.normalizationType;n||(t.normalizationField?n="field":null!=t.normalizationTotal&&
(n="percent-of-total"));return n??void 0};c.isAnyDateField=function(t){return A.isDateField(t)||A.isDateOnlyField(t)||A.isTimestampOffsetField(t)};c.isIntegerField=function(t,n){t=n&&t.getField(n);return!!t&&F.has(t.type)};c.unitValueInDays=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(c,e,A,y,M,p,g,w,f,r){function q(k,u){let K;if("string"===typeof k){const I=k in r.esriBasemapDefinitions,T=!I&&k.includes("/");if(!I&&!T)return u=Object.entries(r.esriBasemapDefinitions).filter(([,Y])=>A.apiKey&&!Y.classic||!A.apiKey&&(Y.classic||Y.is3d)).map(([Y])=>`"${Y}"`).sort().join(", "),V.warn(`Unable to find basemap definition for: ${k}. Try one of these: ${u}`),null;u&&(K=u[k]);K||(K=I?e.fromId(k):new e({style:{id:k}}),u&&(u[k]=K))}else K=w.ensureType(e,k);K?.destroyed&&(V.warn("The provided basemap is already destroyed",
{basemap:K}),K=null);return K}function F(k){if(m)return m(k);let u=null;k=a(k);const K=!k?.baseLayers.length;for(const T in r.esriBasemapDefinitions){var I=N(r.esriBasemapDefinitions[T]);I=H(k,I,{mustMatchReferences:K});if("equal"===I){u=T;break}"base-layers-equal"===I&&(u=T)}return u}function E(k,u){const K=new y;k.forEach(I=>{const T=u.find(Y=>"scene"!==Y.type&&J(x(I),x(Y)))||I;K.includes(T)?K.push(I):K.push(T)});return K}function t(k){if(n(k.url))return!0;if("vector-tile"===k.type)for(const u in k.sourceNameToSource)if(n(k.sourceNameToSource[u]?.sourceUrl))return!0;
return!1}function n(k){if(!k)return!1;k=new g.Url(g.makeAbsolute(k));return!!k.authority&&Q.test(k.authority)}function a(k){return k?!k.loaded&&k.resourceInfo?N(k.resourceInfo.data):{baseLayers:v(k.baseLayers),referenceLayers:v(k.referenceLayers)}:null}function v(k){return(y.isCollection(k)?k.toArray():k).map(x)}function x(k){return{type:k.type,effect:"effect"in k?k.effect:void 0,url:R("urlTemplate"in k&&k.urlTemplate||k.url||"styleUrl"in k&&k.styleUrl||""),minScale:"minScale"in k&&null!=k.minScale?
k.minScale:0,maxScale:"maxScale"in k&&null!=k.maxScale?k.maxScale:0,opacity:null!=k.opacity?k.opacity:1,visible:null!=k.visible?!!k.visible:!0,sublayers:"map-image"!==k.type&&"wms"!==k.type||null==k.sublayers?void 0:k.sublayers?.map(u=>({id:u.id,visible:u.visible})),activeLayerId:"wmts"===k.type?k.activeLayer?.id:void 0}}function D(k){return k.isReference||"ArcGISSceneServiceLayer"===k.layerType}function N(k){return k?{baseLayers:d((k.baseMapLayers??[]).filter(u=>!D(u))),referenceLayers:d((k.baseMapLayers??
[]).filter(u=>D(u)))}:null}function d(k){return k.map(u=>{let K;switch(u.layerType){case "VectorTileLayer":K="vector-tile";break;case "ArcGISTiledMapServiceLayer":K="tile";break;case "ArcGISSceneServiceLayer":K="scene";break;default:K="unknown"}return{type:K,effect:u.effect,url:R(u.templateUrl||u.urlTemplate||u.styleUrl||u.url),minScale:u.minScale??0,maxScale:u.maxScale??0,opacity:u.opacity??1,visible:null!=u.visibility?!!u.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function H(k,u,K){return null!=
k!==(null!=u)?"not-equal":k&&u?S(k.baseLayers,u.baseLayers)?S(k.referenceLayers,u.referenceLayers)?"equal":K.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function S(k,u){if(k.length!==u.length)return!1;for(let K=0;K<k.length;K++)if(!J(k[K],u[K]))return!1;return!0}function J(k,u){if(k.type!==u.type||k.url!==u.url||k.minScale!==u.minScale||k.maxScale!==u.maxScale||k.visible!==u.visible||k.opacity!==u.opacity||!f.effectEquals(k.effect,u.effect))return!1;if(null!=k.activeLayerId||
null!=u.activeLayerId)return k.activeLayerId===u.activeLayerId;if(null!=k.sublayers||null!=u.sublayers){if(null==k.sublayers||null==u.sublayers||k.sublayers.length!==u.sublayers.length)return!1;for(let K=0;K<k.sublayers.length;K++){const I=k.sublayers.at(K),T=u.sublayers.at(K);if(I?.id!==T?.id||I?.visible!==T?.visible)return!1}}return!0}function R(k){return k?g.normalize(k).replace(/^\s*https?:/i,"").toLowerCase():""}function O(k){return"portalItem"in k?k.portalItem?.thumbnailUrl:void 0}const V=M.getLogger("esri.support.basemapUtils");
let m;const Q=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;c.clonePreservingTiledLayers=function(k,u=null){k=q(k);if(!k)return null;k=k.clone();u&&(k.baseLayers=E(k.baseLayers,u.baseLayers),k.referenceLayers=E(k.referenceLayers,u.referenceLayers));return k};c.contentEquals=function(k,u){if(k===u||null!=k?.portalItem?.id&&k.portalItem.id===u?.portalItem?.id)return!0;k=a(k);u=a(u);return"equal"===H(k,u,{mustMatchReferences:!0})};c.createCache=function(){return{}};c.destroyCache=function(k){for(const u in k)p.destroyMaybe(k[u]),
delete k[u]};c.ensureType=q;c.findSpatialReference=function(k,u){if(null==u||null==k)return{spatialReference:null,updating:!1};if("not-loaded"===u.loadStatus)return u.load(),{spatialReference:null,updating:!0};if(u.spatialReference)return{spatialReference:u.spatialReference,updating:!1};if(0===u.baseLayers.length)return{spatialReference:null,updating:!1};u=u.baseLayers.at(0);switch(u.loadStatus){case "not-loaded":u.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,
updating:!1}}u=(("supportedSpatialReferences"in u?u.supportedSpatialReferences:null)||["tileInfo"in u?u.tileInfo?.spatialReference:u.spatialReference]).filter(Boolean);const K=k.spatialReference;return K?{spatialReference:u.find(I=>K.equals(I))??u[0]??null,updating:!1}:{spatialReference:u[0],updating:!1}};c.getBasemapThumbnailUrl=function(k){if(!k)return null;var {thumbnailUrl:u}=k;return u?u:(u=F(k))?r.esriBasemapDefinitions[u].thumbnailUrl:p.mappedFind(k.baseLayers,O)};c.getWellKnownBasemapId=F;
c.hasDeveloperBasemapLayer=function(k){return!!k?.baseLayers.concat(k.referenceLayers).some(t)};c.isBasemap3D=function(k){return"Web Scene"===k.portalItem?.type};c.isBasemapInBeta=function(k){return!!k?.portalItem?.tags?.some(u=>"beta"===u.toLowerCase())};c.isBasemapLayer=function(k,u){return k.basemap?.referenceLayers?.some(K=>K.uid===u)||k.basemap?.baseLayers?.some(K=>K.uid===u)};c.isDeveloperBasemapLayer=t;c.overrideGetWellKnownBasemapId=function(k){m=k};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q,F,E,t,n,a,v,x,D,N,d,H,S){var J;let R=0;p=J=class extends p.JSONSupportMixin(w){constructor(m){super(m);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+R++;this.baseLayers=new y;this.referenceLayers=new y;const Q=k=>{k.parent&&k.parent!==this&&"remove"in k.parent&&k.parent.remove(k);k.parent=this;"elevation"===k.type&&r.getLogger(this).error(`Layer '${k.title}, id:${k.id}' of type '${k.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",k=>Q(k.item)),this.referenceLayers.on("after-add",k=>Q(k.item)),this.baseLayers.on("after-remove",k=>{k.item.parent=null}),this.referenceLayers.on("after-remove",k=>{k.item.parent=null})])}initialize(){this.when().catch(m=>{r.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,m)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var m=this.baseLayers.toArray();for(const Q of m)Q.destroy();
m=this.referenceLayers.toArray();for(const Q of m)Q.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=q.destroyMaybe(this.portalItem)}normalizeCtorArgs(m){m&&"resourceInfo"in m&&(this._set("resourceInfo",m.resourceInfo),m={...m},delete m.resourceInfo);return m}set baseLayers(m){this._set("baseLayers",M.referenceSetter(m,this._get("baseLayers")))}_writeBaseLayers(m,Q,k){const u=[];m&&(k={...k,layerContainerType:"basemap"},this.baseLayers.forEach(K=>{K=S.getLayerJSON(K,
k.webmap?k.webmap.getLayerJSONFromResourceInfo(K):null,k);null!=K&&u.push(K)}),this.referenceLayers.forEach(K=>{const I=S.getLayerJSON(K,k.webmap?k.webmap.getLayerJSONFromResourceInfo(K):null,k);null!=I&&("scene"!==K.type&&(I.isReference=!0),u.push(I))}));Q.baseMapLayers=u}set referenceLayers(m){this._set("referenceLayers",M.referenceSetter(m,this._get("referenceLayers")))}writeTitle(m,Q){Q.title=m||"Basemap"}load(m){this.addResolvingPromise(this._loadFromSource(m));return Promise.resolve(this)}loadAll(){return f.loadAll(this,
m=>{m(this.baseLayers,this.referenceLayers)})}clone(){const m={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(Q=>g.isClonable(Q)?Q.clone():Q),referenceLayers:this.referenceLayers.map(Q=>g.isClonable(Q)?Q.clone():Q)};this.loaded&&(m.loadStatus="loaded");return(new J({resourceInfo:this.resourceInfo})).set(m)}read(m,Q){this.resourceInfo||this._set("resourceInfo",{data:m,context:Q});super.read(m,Q)}write(m,Q){m=m||{};Q?.origin||(Q={origin:"web-map",...Q});super.write(m,
Q);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(m.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(k=>{k=g.clone(k);k.url&&E.isProtocolRelative(k.url)&&(k.url=`https:${k.url}`);k.templateUrl&&E.isProtocolRelative(k.templateUrl)&&(k.templateUrl=`https:${k.templateUrl}`);return k}));return m}async _loadFromSource(m){const {resourceInfo:Q,portalItem:k,style:u}=this;F.throwIfAborted(m);const K=[];Q?(K.push(this._loadLayersFromJSON(Q.data,Q.context?Q.context.url:null,m)),Q.data.id&&!Q.data.title&&
K.push(d.getBasemapTitle(Q.data.id).then(I=>{I&&this.read({title:I},Q.context)}))):k?K.push(this._loadFromItem(k,m)):u&&K.push(this._loadFromStylesService(u,m));await Promise.all(K)}async _loadLayersFromJSON(m,Q,k){const u=this.resourceInfo?.context,K=this.portalItem?.portal||u?.portal||null,I=V[u?.origin||""]??"web-map",{populateOperationalLayers:T}=await new Promise((ea,la)=>c(["./layers/support/layersCreator"],ea,la)),Y=[];F.throwIfAborted(k);if(m.baseMapLayers&&Array.isArray(m.baseMapLayers)){Q=
{context:{...u,origin:I,url:Q,portal:K,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const ea=la=>"web-scene"===I&&"ArcGISSceneServiceLayer"===la.layerType||la.isReference;k=T(this.baseLayers,m.baseMapLayers.filter(la=>!ea(la)),Q);Y.push(k);m=T(this.referenceLayers,m.baseMapLayers.filter(ea),Q);Y.push(m)}await Promise.allSettled(Y)}async _loadFromItem(m,Q){const k=await (await m.load(Q)).fetchData("json",Q),u=E.urlToObject(m.itemUrl??"");this._set("resourceInfo",{data:k.baseMap??
{},context:{origin:O[m.type||""]??"web-map",portal:m.portal||D.getDefault(),url:u}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:k.spatialReference},this.resourceInfo.context);this.read({title:m.title,thumbnailUrl:m.thumbnailUrl},{origin:"portal-item",portal:m.portal||D.getDefault(),url:u});return this._loadLayersFromJSON(this.resourceInfo.data,u,Q)}async _loadFromStylesService(m,Q){var k=`${m.serviceUrl}/${m.id}`;m=(await A(k,{query:{language:m.getLanguageParamValue()},
signal:Q?.signal})).data;if(m.baseMap&&Array.isArray(m.baseMap.baseMapLayers))for(const u of m.baseMap.baseMapLayers)if(!u.customParameters&&u.styleUrl?.includes("?")){const K=E.urlToObject(u.styleUrl);K.query&&(u.styleUrl=K.path,u.customParameters=K.query)}k=E.urlToObject(k);this._set("resourceInfo",{data:m.baseMap??{},context:{origin:"web-map",url:k}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:m.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,
k,Q)}static fromId(m){return(m=d.esriBasemapDefinitions[m])?m.itemId?new J({portalItem:{id:m.itemId,portal:{url:"https://www.arcgis.com"}}}):J.fromJSON(m,{origin:m.is3d?"web-scene":"web-map"}):null}};e.__decorate([t.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(m,Q,k,u){this._writeBaseLayers(m,Q,u)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:y}},writer(m,Q,k,u){this._writeBaseLayers(m,Q,u)}}}}}})],p.prototype,"baseLayers",null);e.__decorate([t.property({type:String,
json:{origins:{"web-scene":{write:!0}}}})],p.prototype,"id",void 0);e.__decorate([t.property({type:N})],p.prototype,"portalItem",void 0);e.__decorate([t.property()],p.prototype,"referenceLayers",null);e.__decorate([t.property({readOnly:!0})],p.prototype,"resourceInfo",void 0);e.__decorate([t.property({type:x})],p.prototype,"spatialReference",void 0);e.__decorate([t.property({type:H})],p.prototype,"style",void 0);e.__decorate([t.property()],p.prototype,"thumbnailUrl",void 0);e.__decorate([t.property({type:String,
json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],p.prototype,"title",void 0);e.__decorate([v.writer("title")],p.prototype,"writeTitle",null);p=J=e.__decorate([a.subclass("esri.Basemap")],p);const O={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},V={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return p})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(c,e){c.castForReferenceSetter=function(A){return A};c.referenceSetter=
function(A,y,M=e){y||(y=new M);if(y===A)return y;y.removeAll();A&&(Array.isArray(A)||"items"in A&&Array.isArray(A.items))?y.addMany(A):A&&y.add(A);return y};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,e,A,y,M,p,g,w){const f=r=>{r=class extends r{constructor(...q){super(...q);
this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(F=>{const E=this.load.bind(this);this.load=t=>{const n=new Promise((a,v)=>{const x=M.onAbortOrThrow(t,v);this.destroyed&&v(new e("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(a,v).finally(()=>{x&&x.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");
const a=this._loadController=new AbortController;E({signal:a.signal})}F();return n}}));this.when(()=>{this._set("loadStatus","loaded");this._loadController=null},F=>{this._set("loadStatus","failed");this._set("loadError",F);this._loadController=null})}destroy(){this._loadController&&(this._loadController=A.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;
this._set("loadError",new e("load:cancelled","Cancelled"));this._loadController?.abort();this._promiseProps.abort();return this}};c.__decorate([g.property({readOnly:!0})],r.prototype,"loaded",null);c.__decorate([g.property({readOnly:!0})],r.prototype,"loadError",void 0);c.__decorate([g.property({clonable:!1})],r.prototype,"loadStatus",void 0);c.__decorate([g.property({type:[p],readOnly:!0})],r.prototype,"loadWarnings",null);return r=c.__decorate([w.subclass("esri.core.Loadable")],r)};y=class extends f(y.EsriPromise){};
y=c.__decorate([w.subclass("esri.core.Loadable")],y);(function(r){r.LoadableMixin=f;r.isLoadable=function(q){return!(!q||!q.load)}})(y||(y={}));return y})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(c,e,A,y,M){var p;(function(f){f[f.PENDING=0]="PENDING";f[f.RESOLVED=1]="RESOLVED";f[f.REJECTED=2]="REJECTED"})(p||(p={}));class g{constructor(){this._resolver=y.createResolver();this._status=p.PENDING;
this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=p.RESOLVED;this._cleanUp()},()=>{this._status=p.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(f){this._resolvingPromises.push(f);this._tryResolve()}isResolved(){return this._status===p.RESOLVED}isRejected(){return this._status===p.REJECTED}isFulfilled(){return this._status!==p.PENDING}abort(){this._resolver.reject(y.createAbortError())}_cleanUp(){this._resolvingPromises=
this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var f=y.createResolver(),r=[...this._resolvingPromises,f.promise],q=this._allPromise=Promise.all(r);q.then(()=>{this.isFulfilled()||this._allPromise!==q||this._resolver.resolve()},F=>{this.isFulfilled()||this._allPromise!==q||y.isAbortError(F)||this._resolver.reject(F)});f.resolve()}}}const w=f=>{f=class extends f{constructor(...r){super(...r);this._promiseProps=new g;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,
q){return this._promiseProps.promise.then(()=>this).then(r,q)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return f=e.__decorate([M.subclass("esri.core.Promise")],f)};c.EsriPromise=class extends w(A){};c.EsriPromise=e.__decorate([M.subclass("esri.core.Promise")],c.EsriPromise);c.EsriPromiseMixin=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(c,e,A,y){async function M(p,g){const w=[],f=(...q)=>{for(const F of q)null!=F&&(Array.isArray(F)?f(...F):A.isCollection(F)?F.forEach(E=>f(E)):y.isLoadable(F)&&w.push(F))};g(f);let r=null;await e.map(w,async q=>{q=await e.result("loadAll"in q&&"function"===typeof q.loadAll?q.loadAll():q.load());!1!==q.ok||r||(r=q)});if(r)throw r.error;return p}c.loadAll=async function(p,g){await p.load();return M(p,g)};c.loadAllChildren=M;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q,F,E,t,n,a,v,x,D,N,d,H,S,J){function R(u){const K=y.id;return()=>{const I=u.deref();I&&K.findCredential(I.restUrl)&&I.signIn().catch(()=>{})}}const O=u=>Object.freeze(Object.defineProperty({__proto__:null,default:u},Symbol.toStringTag,{value:"Module"}));var V;let m;const Q={PortalGroup:()=>Promise.resolve({default:N}),PortalItem:()=>new Promise((u,K)=>c(["./PortalItem"],I=>u(O(I)),K)),PortalUser:()=>Promise.resolve({default:S})};g=V=class extends g.JSONSupportMixin(w){constructor(u){super(u);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.galleryTemplatesGroupQuery=
this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.rotatorPanels=this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=A.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(u){return"string"===typeof u?{url:u}:u}destroy(){k.unregister(this);
this.defaultBasemap=f.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=f.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=f.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=f.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(u){if(u)for(const K of u)A.request.trustedServers.includes(K)||A.request.trustedServers.push(K);return u}readDefaultBasemap(u){return this._readBasemap(u)}readDefaultDevBasemap(u){return this._readBasemap(u)}readDefaultVectorBasemap(u){return this._readBasemap(u)}get extraQuery(){const u=
!this.user?.orgId||this.canSearchPublic;return this.id&&!u?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let u=this.url;if(u){const K=u.indexOf("/sharing");u=0<K?u.substring(0,K):this.url.replace(/\/+$/,"");u+="/sharing/rest"}return u}get thumbnailUrl(){const u=this.restUrl,K=this.thumbnail;return u&&K?this._normalizeSSL(u+"/portals/self/resources/"+K):null}readUrlKey(u){return u?u.toLowerCase():
u}readUser(u){let K=null;u&&(K=S.fromJSON(u),K.portal=this);return K}load(u){const K=(new Promise((I,T)=>c(["../Basemap"],Y=>I(O(Y)),T))).then(({default:I})=>{r.throwIfAborted(u);m=I}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,u)).then(I=>{if(y.id){const T=y.id;this.credential=T.findCredential(this.restUrl);this.credential||this.authMode!==V.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=T.on("credential-create",R(new WeakRef(this))),
k.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=I;this.read(I)});this.addResolvingPromise(K);return Promise.resolve(this)}async createElevationLayers(){await this.load();const u=this._getHelperService("defaultElevationLayers"),K=(await new Promise((I,T)=>c(["../layers/ElevationLayer"],Y=>I(O(Y)),T))).default;return u?u.map(I=>new K({id:I.id,url:I.url})):[]}async fetchBasemaps(u,K){const I=await this._fetchBasemaps(u,K);!0===K?.include3d&&!1!==this.use3dBasemaps&&(u=await this._fetchBasemaps3D(u,
K),I.unshift(...u));return I}fetchCategorySchema(u){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",u).then(K=>K.categorySchema):r.isAborted(u)?Promise.reject(r.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(u){const K=this.featuredGroups,I=new d;I.num=100;I.sortField="title";if(K&&K.length){const T=[];for(const Y of K)T.push(`(title:"${Y.title}" AND owner:${Y.owner})`);I.query=T.join(" OR ");return this.queryGroups(I,u).then(Y=>Y.results)}return r.isAborted(u)?
Promise.reject(r.createAbortError()):Promise.resolve([])}fetchRegions(u){const K=this.user?.culture||this.culture||x.getLocale();return this.request(this.restUrl+"/portals/regions",{...u,query:{culture:K}})}fetchSettings(u){const K=this.user?.culture||this.culture||x.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...u,query:{culture:K}})}static getDefault(){return D.ensureDefaultPortalInstance(()=>new V)}queryGroups(u,K){return this.queryPortal("/community/groups",u,"PortalGroup",
K)}queryItems(u,K){return this.queryPortal("/search",u,"PortalItem",K)}queryUsers(u,K){u.sortField||(u.sortField="username");return this.queryPortal("/community/users",u,"PortalUser",K)}fetchSelf(u=this.authMode,K=!1,I){const T=this.restUrl+"/portals/self";u={authMode:u,query:{culture:x.getLocale().toLowerCase()},...I};"auto"===u.authMode&&(u.authMode="no-prompt");K&&(u.query.default=!0);return this.request(T,u)}queryPortal(u,K,I,T){const Y=F.ensureType(d,K),ea=la=>this.request(this.restUrl+u,{...Y.toRequestOptions(this),
...T}).then(na=>{const ua=Y.clone();ua.start=na.nextStart;return new H({nextQueryParams:ua,queryParams:Y,total:na.total,results:V._resultsToTypedArray(la,{portal:this},na,T)})}).then(na=>Promise.all(na.results.map(ua=>"function"===typeof ua.when?ua.when():na)).then(()=>na,ua=>{r.throwIfAbortError(ua);return na}));return I&&Q[I]?Q[I]().then(({default:la})=>{r.throwIfAborted(T);return ea(la)}):ea()}signIn(){if(this.authMode===V.AUTH_MODE_ANONYMOUS)return Promise.reject(new p("portal:invalid-auth-mode",
`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const u=K=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return K||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=K;return this.fetchSelf("immediate")});if(this.user&&this.credential===K)return null;this.credential=K;return this.fetchSelf("immediate")}).then(I=>
{I&&(this.sourceJSON=I,this.read(I))});return y.id?y.id.getCredential(this.restUrl).then(K=>u(K)):u(this.credential)}normalizeUrl(u){const K=this.credential?.token;return this._normalizeSSL(K?u+(u.includes("?")?"\x26":"?")+"token\x3d"+K:u)}requestToTypedArray(u,K,I){return this.request(u,K).then(T=>{const Y=V._resultsToTypedArray(I,{portal:this},T);return Promise.all(Y.map(ea=>"function"===typeof ea.when?ea.when():T)).then(()=>Y,()=>Y)})}request(u,K={}){const I={f:"json",...K.query},{authMode:T=this.authMode===
V.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:Y=null,cacheBust:ea=!1,method:la="auto",responseType:na="json",signal:ua}=K;K={authMode:T,body:Y,cacheBust:ea,method:la,query:I,responseType:na,timeout:0,signal:ua};return M(this._normalizeSSL(u),K).then(ta=>ta.data)}toJSON(){throw new p("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(u){if(!u)return null;if(u.declaredClass)throw Error("JSON object is already hydrated");return new V({sourceJSON:u})}_getHelperService(u){const K=
this.helperServices&&this.helperServices[u];if(!K)throw new p("portal:service-not-found",`The \`helperServices\` do not include an entry named "${u}"`);return K}async _fetchBasemaps(u,K){const I=new d;I.query=u||(A.apiKey&&J.supportsApiKey(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);I.disableExtraQuery=!0;u=await this.queryGroups(I,K);if(!u.total)return[];u=u.results[0];I.num=100;I.query='type:"Web Map" -type:"Web Application"';
I.sortField=u.sortField||"name";I.sortOrder=u.sortOrder||"desc";K=await u.queryItems(I,K);return K.total?K.results.filter(T=>"Web Map"===T.type).map(T=>new m({portalItem:T})):[]}async _fetchBasemaps3D(u,K){u=u||this.basemapGalleryGroupQuery3D;if(!u)return[];u=new d({query:u,disableExtraQuery:!0});var I=await this.queryGroups(u,K);if(!I.total)return[];I=I.results[0];u.num=100;u.query='type:"Web Scene"';u.sortField=I.sortField||"name";u.sortOrder=I.sortOrder||"desc";K=await I.queryItems(u,K);return K.total?
K.results.filter(T=>"Web Scene"===T.type).map(T=>new m({portalItem:T})):[]}_normalizeSSL(u){return u.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(u){return u?(u=m.fromJSON(u),u.portalItem={portal:this},u):null}static _resultsToTypedArray(u,K,I,T){let Y=[];if(I){const ea=null!=T?T.signal:null;Y=I.listings||I.notifications||I.userInvitations||I.tags||I.items||I.groups||I.comments||I.provisions||I.results||I.relatedItems||I;if(u||K)Y=Y.map(la=>{la=Object.assign(u?u.fromJSON(la):
la,K);"function"===typeof la.load&&la.load(ea);return la})}else Y=[];return Y}};g.AUTH_MODE_ANONYMOUS="anonymous";g.AUTH_MODE_AUTO="auto";g.AUTH_MODE_IMMEDIATE="immediate";e.__decorate([q.property()],g.prototype,"access",void 0);e.__decorate([q.property()],g.prototype,"allSSL",void 0);e.__decorate([q.property()],g.prototype,"authMode",void 0);e.__decorate([q.property()],g.prototype,"authorizedCrossOriginDomains",void 0);e.__decorate([n.reader("authorizedCrossOriginDomains")],g.prototype,"readAuthorizedCrossOriginDomains",
null);e.__decorate([q.property()],g.prototype,"basemapGalleryGroupQuery",void 0);e.__decorate([q.property({json:{name:"3DBasemapGalleryGroupQuery"}})],g.prototype,"basemapGalleryGroupQuery3D",void 0);e.__decorate([q.property()],g.prototype,"bingKey",void 0);e.__decorate([q.property()],g.prototype,"canListApps",void 0);e.__decorate([q.property()],g.prototype,"canListData",void 0);e.__decorate([q.property()],g.prototype,"canListPreProvisionedItems",void 0);e.__decorate([q.property()],g.prototype,"canProvisionDirectPurchase",
void 0);e.__decorate([q.property()],g.prototype,"canSearchPublic",void 0);e.__decorate([q.property()],g.prototype,"canShareBingPublic",void 0);e.__decorate([q.property()],g.prototype,"canSharePublic",void 0);e.__decorate([q.property()],g.prototype,"canSignInArcGIS",void 0);e.__decorate([q.property()],g.prototype,"canSignInIDP",void 0);e.__decorate([q.property()],g.prototype,"colorSetsGroupQuery",void 0);e.__decorate([q.property()],g.prototype,"commentsEnabled",void 0);e.__decorate([q.property({type:Date})],
g.prototype,"created",void 0);e.__decorate([q.property()],g.prototype,"credential",void 0);e.__decorate([q.property()],g.prototype,"culture",void 0);e.__decorate([q.property()],g.prototype,"currentVersion",void 0);e.__decorate([q.property()],g.prototype,"customBaseUrl",void 0);e.__decorate([q.property()],g.prototype,"defaultBasemap",void 0);e.__decorate([n.reader("defaultBasemap")],g.prototype,"readDefaultBasemap",null);e.__decorate([q.property()],g.prototype,"defaultDevBasemap",void 0);e.__decorate([n.reader("defaultDevBasemap")],
g.prototype,"readDefaultDevBasemap",null);e.__decorate([q.property({type:v})],g.prototype,"defaultExtent",void 0);e.__decorate([q.property()],g.prototype,"defaultVectorBasemap",void 0);e.__decorate([n.reader("defaultVectorBasemap")],g.prototype,"readDefaultVectorBasemap",null);e.__decorate([q.property()],g.prototype,"description",void 0);e.__decorate([q.property()],g.prototype,"devBasemapGalleryGroupQuery",void 0);e.__decorate([q.property()],g.prototype,"eueiEnabled",void 0);e.__decorate([q.property({readOnly:!0})],
g.prototype,"extraQuery",null);e.__decorate([q.property()],g.prototype,"featuredGroups",void 0);e.__decorate([q.property()],g.prototype,"featuredItemsGroupQuery",void 0);e.__decorate([q.property()],g.prototype,"galleryTemplatesGroupQuery",void 0);e.__decorate([q.property()],g.prototype,"livingAtlasGroupQuery",void 0);e.__decorate([q.property()],g.prototype,"hasCategorySchema",void 0);e.__decorate([q.property()],g.prototype,"helpBase",void 0);e.__decorate([q.property()],g.prototype,"helperServices",
void 0);e.__decorate([q.property()],g.prototype,"helpMap",void 0);e.__decorate([q.property()],g.prototype,"homePageFeaturedContent",void 0);e.__decorate([q.property()],g.prototype,"homePageFeaturedContentCount",void 0);e.__decorate([q.property()],g.prototype,"httpPort",void 0);e.__decorate([q.property()],g.prototype,"httpsPort",void 0);e.__decorate([q.property()],g.prototype,"id",void 0);e.__decorate([q.property()],g.prototype,"ipCntryCode",void 0);e.__decorate([q.property({readOnly:!0})],g.prototype,
"isOrganization",null);e.__decorate([q.property()],g.prototype,"isPortal",void 0);e.__decorate([q.property()],g.prototype,"isReadOnly",void 0);e.__decorate([q.property({readOnly:!0})],g.prototype,"itemPageUrl",null);e.__decorate([q.property()],g.prototype,"layerTemplatesGroupQuery",void 0);e.__decorate([q.property()],g.prototype,"maxTokenExpirationMinutes",void 0);e.__decorate([q.property({type:Date})],g.prototype,"modified",void 0);e.__decorate([q.property()],g.prototype,"name",void 0);e.__decorate([q.property()],
g.prototype,"portalHostname",void 0);e.__decorate([q.property()],g.prototype,"portalMode",void 0);e.__decorate([q.property()],g.prototype,"portalProperties",void 0);e.__decorate([q.property()],g.prototype,"region",void 0);e.__decorate([q.property({readOnly:!0})],g.prototype,"restUrl",null);e.__decorate([q.property()],g.prototype,"rotatorPanels",void 0);e.__decorate([q.property()],g.prototype,"showHomePageDescription",void 0);e.__decorate([q.property()],g.prototype,"sourceJSON",void 0);e.__decorate([q.property()],
g.prototype,"staticImagesUrl",void 0);e.__decorate([q.property({json:{name:"2DStylesGroupQuery"}})],g.prototype,"stylesGroupQuery2d",void 0);e.__decorate([q.property({json:{name:"stylesGroupQuery"}})],g.prototype,"stylesGroupQuery3d",void 0);e.__decorate([q.property()],g.prototype,"supportsHostedServices",void 0);e.__decorate([q.property()],g.prototype,"symbolSetsGroupQuery",void 0);e.__decorate([q.property()],g.prototype,"templatesGroupQuery",void 0);e.__decorate([q.property()],g.prototype,"thumbnail",
void 0);e.__decorate([q.property({readOnly:!0})],g.prototype,"thumbnailUrl",null);e.__decorate([q.property()],g.prototype,"units",void 0);e.__decorate([q.property()],g.prototype,"url",void 0);e.__decorate([q.property()],g.prototype,"urlKey",void 0);e.__decorate([n.reader("urlKey")],g.prototype,"readUrlKey",null);e.__decorate([q.property()],g.prototype,"user",void 0);e.__decorate([n.reader("user")],g.prototype,"readUser",null);e.__decorate([q.property()],g.prototype,"use3dBasemaps",void 0);e.__decorate([q.property()],
g.prototype,"useStandardizedQuery",void 0);e.__decorate([q.property()],g.prototype,"useVectorBasemaps",void 0);e.__decorate([q.property()],g.prototype,"vectorBasemapGalleryGroupQuery",void 0);e=g=V=e.__decorate([a.subclass("esri.portal.Portal")],g);const k=new FinalizationRegistry(u=>{u.remove()});return e})},"esri/portal/portalDefault":function(){define(["exports"],function(c){let e;c.clearDefaultPortalInstance=function(){e=void 0};c.ensureDefaultPortalInstance=function(A){if(!e||e.destroyed)e=A();
return e};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),function(c,e,A,y,M,p,g,w,f){var r;A=r=class extends A.JSONSupport{constructor(q){super(q);this.id=this.description=this.created=this.access=null;
this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const q=this.url,F=this.thumbnail;return q&&F&&this.portal?this.portal?.normalizeUrl(`${q}/info/${F}?f=json`):null}get url(){const q=this.portal?.restUrl;return q?q+"/community/groups/"+this.id:null}fetchCategorySchema(q){return this.portal.request(this.url+"/categorySchema",q).then(F=>{F=F.categorySchema||[];return F.some(E=>"contentCategorySetsGroupQuery.LivingAtlas"===
E.source)?this._fetchCategorySchemaSet("LivingAtlas",q):F})}fetchMembers(q){return this.portal.request(this.url+"/users",q)}getThumbnailUrl(q){let F=this.thumbnailUrl;F&&q&&(F+=`&w=${q}`);return F}toJSON(){throw new e("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(q){if(!q)return null;if(q.declaredClass)throw Error("JSON object is already hydrated");const F=new r;F.sourceJSON=q;F.read(q);return F}queryItems(q,F){q=M.ensureType(f,q);const E=this.portal;
if(5<parseFloat(E.currentVersion))return q=q||new f,E.queryPortal(`/content/groups/${this.id}/search`,q,"PortalItem",F);q=q?q.clone():new f;q.query="group:"+this.id+(q.query?" "+q.query:"");return E.queryItems(q,F)}_fetchCategorySchemaSet(q,F){const E=this.portal;return E.fetchSelf(E.authMode,!0,F).then(t=>{if(t=t.contentCategorySetsGroupQuery){const n=new f;n.disableExtraQuery=!0;n.num=1;n.query=t;return E.queryGroups(n,F)}throw new e("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");
}).then(t=>{if(t.total){t=t.results[0];const n=new f;n.num=1;n.query=`typekeywords:"${q}"`;return t.queryItems(n,F)}throw new e("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(t=>t.total?t.results[0].fetchData("json",F).then(n=>{n=n?.categorySchema;return n?.length?n:[]}):[])}};c.__decorate([y.property()],A.prototype,"access",void 0);c.__decorate([y.property({type:Date})],A.prototype,"created",void 0);c.__decorate([y.property()],A.prototype,"description",
void 0);c.__decorate([y.property()],A.prototype,"id",void 0);c.__decorate([y.property()],A.prototype,"isInvitationOnly",void 0);c.__decorate([y.property({type:Date})],A.prototype,"modified",void 0);c.__decorate([y.property()],A.prototype,"owner",void 0);c.__decorate([y.property()],A.prototype,"portal",void 0);c.__decorate([y.property()],A.prototype,"snippet",void 0);c.__decorate([y.property()],A.prototype,"sortField",void 0);c.__decorate([y.property()],A.prototype,"sortOrder",void 0);c.__decorate([y.property()],
A.prototype,"sourceJSON",void 0);c.__decorate([y.property()],A.prototype,"tags",void 0);c.__decorate([y.property()],A.prototype,"thumbnail",void 0);c.__decorate([y.property({readOnly:!0})],A.prototype,"thumbnailUrl",null);c.__decorate([y.property()],A.prototype,"title",void 0);c.__decorate([y.property({readOnly:!0})],A.prototype,"url",null);return A=r=c.__decorate([w.subclass("esri.portal.PortalGroup")],A)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(c,e,A,y,M,p,g,w,f,r){var q;const F=new A.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});e=q=class extends e{constructor(E){super(E);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(E){"asc"!==E&&"desc"!==E||this._set("sortOrder",E)}clone(){return new q({categories:this.categories?y.clone(this.categories):
null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(E,t){let n=[];this.categories&&(n=this.categories.map(x=>Array.isArray(x)?JSON.stringify(x):x));let a="";if(this.extent){var v=r.project(this.extent,f.WGS84);null!=v&&(a=`${v.xmin},${v.ymin},${v.xmax},${v.ymax}`)}v=this.query;!this.disableExtraQuery&&E.extraQuery&&(v="("+v+")"+
E.extraQuery);E={categories:n,bbox:a,q:v,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(E.sortField=this.sortField.split(",").map(x=>F.toJSON(x.trim())).join(","),E.sortOrder=this.sortOrder);return{query:{...t,...E}}}};c.__decorate([M.property()],e.prototype,"categories",void 0);c.__decorate([M.property()],e.prototype,"disableExtraQuery",void 0);c.__decorate([M.property({type:w})],e.prototype,"extent",void 0);c.__decorate([M.property()],e.prototype,
"filter",void 0);c.__decorate([M.property()],e.prototype,"num",void 0);c.__decorate([M.property()],e.prototype,"query",void 0);c.__decorate([M.property()],e.prototype,"sortField",void 0);c.__decorate([M.property()],e.prototype,"sortOrder",null);c.__decorate([M.property()],e.prototype,"start",void 0);return e=q=c.__decorate([g.subclass("esri.portal.PortalQueryParams")],e)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(c,e,A,y,M,p,g){e=class extends e{constructor(w){super(w);this.total=this.results=this.queryParams=this.nextQueryParams=null}};c.__decorate([A.property()],e.prototype,"nextQueryParams",void 0);c.__decorate([A.property()],e.prototype,"queryParams",void 0);c.__decorate([A.property()],e.prototype,"results",void 0);c.__decorate([A.property()],e.prototype,"total",void 0);return e=c.__decorate([g.subclass("esri.portal.PortalQueryResult")],e)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q){var F;y=F=class extends y.JSONSupport{constructor(...E){super(...E);this.userType=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const E=this.url,t=this.thumbnail;return E&&t?this.portal.normalizeUrl(`${E}/info/${t}?f=json`):null}get userContentUrl(){const E=this.portal?.restUrl;
return E?`${E}/content/users/${this.username}`:null}get url(){const E=this.portal?.restUrl;return E?`${E}/community/users/${this.username}`:null}addItem(E){const t=E&&E.item;var n=E?.data;E=E?.folder;const a={method:"post"};t&&(a.query=t.createPostQuery(),null!=n&&("string"===typeof n?a.query.text=n:"object"===typeof n&&(a.query.text=JSON.stringify(n))));n=this.userContentUrl;E&&(n+="/"+("string"===typeof E?E:E.id));return this.portal.request(n+"/addItem",a).then(v=>{t.id=v.id;t.portal=this.portal;
return t.loaded?t.reload():t.load()})}deleteItem(E){let t=this.userContentUrl;E.ownerFolder&&(t+="/"+E.ownerFolder);return this.portal.request(t+`/items/${E.id}/delete`,{method:"post"}).then(()=>{E.id=null;E.portal=null})}deleteItems(E){const t=this.userContentUrl+"/deleteItems";var n=E.map(a=>a.id);return n.length?(n={method:"post",query:{items:n.join(",")}},this.portal.request(t,n).then(()=>{E.forEach(a=>{a.id=null;a.portal=null})})):Promise.resolve(void 0)}fetchFolders(){return this.portal.request(this.userContentUrl??
"",{query:{num:1}}).then(E=>E&&E.folders?E.folders.map(t=>{t=r.fromJSON(t);t.portal=this.portal;return t}):[])}fetchGroups(){return this.portal.request(this.url??"").then(E=>E&&E.groups?E.groups.map(t=>{t=q.fromJSON(t);t.portal=this.portal;return t}):[])}fetchItems(E){const t=E??{};let n=this.userContentUrl??"";t.folder&&(n+="/"+t.folder.id);let a;return(new Promise((v,x)=>c(["./PortalItem"],D=>v(Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}))),
x))).then(({default:v})=>{a=v;return this.portal.request(n,{query:{folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"}})}).then(v=>{let x;return v?.items?(x=v.items.map(D=>{D=a.fromJSON(D);D.portal=this.portal;return D}),Promise.all(x.map(D=>D.load())).catch(D=>D).then(()=>({items:x,nextStart:v.nextStart,total:v.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(E=>E.tags)}getThumbnailUrl(E){let t=
this.thumbnailUrl;t&&E&&(t+=`&w=${E}`);return t}queryFavorites(E){return this.favGroupId?(this._favGroup||(this._favGroup=new q({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(E)):Promise.reject(new A("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new A("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(E){if(!E)return null;if(E.declaredClass)throw Error("JSON object is already hydrated");
const t=new F;t.sourceJSON=E;t.read(E);return t}};e.__decorate([M.property()],y.prototype,"access",void 0);e.__decorate([M.property({type:Date})],y.prototype,"created",void 0);e.__decorate([M.property()],y.prototype,"culture",void 0);e.__decorate([M.property()],y.prototype,"description",void 0);e.__decorate([M.property()],y.prototype,"email",void 0);e.__decorate([M.property()],y.prototype,"favGroupId",void 0);e.__decorate([M.property()],y.prototype,"fullName",void 0);e.__decorate([M.property({type:Date})],
y.prototype,"modified",void 0);e.__decorate([M.property()],y.prototype,"orgId",void 0);e.__decorate([M.property()],y.prototype,"portal",void 0);e.__decorate([M.property()],y.prototype,"preferredView",void 0);e.__decorate([M.property()],y.prototype,"privileges",void 0);e.__decorate([M.property()],y.prototype,"region",void 0);e.__decorate([M.property()],y.prototype,"role",void 0);e.__decorate([M.property()],y.prototype,"roleId",void 0);e.__decorate([M.property()],y.prototype,"sourceJSON",void 0);e.__decorate([M.property()],
y.prototype,"thumbnail",void 0);e.__decorate([M.property({readOnly:!0})],y.prototype,"thumbnailUrl",null);e.__decorate([M.property()],y.prototype,"units",void 0);e.__decorate([M.property({readOnly:!0})],y.prototype,"userContentUrl",null);e.__decorate([M.property({readOnly:!0})],y.prototype,"url",null);e.__decorate([M.property()],y.prototype,"username",void 0);e.__decorate([M.property()],y.prototype,"userType",void 0);return y=F=e.__decorate([f.subclass("esri.portal.PortalUser")],y)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(c,e,A,y,M,p,g,w){A=class extends A.JSONSupport{constructor(f){super(f);this.username=this.title=this.portal=this.id=this.created=null}get url(){const f=this.portal?.restUrl;return f?`${f}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new e("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};c.__decorate([y.property({type:Date})],A.prototype,"created",void 0);c.__decorate([y.property()],A.prototype,"id",void 0);c.__decorate([y.property()],A.prototype,
"portal",void 0);c.__decorate([y.property()],A.prototype,"title",void 0);c.__decorate([y.property({readOnly:!0})],A.prototype,"url",null);c.__decorate([y.property()],A.prototype,"username",void 0);return A=c.__decorate([w.subclass("esri.portal.PortalFolder")],A)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../kernel ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q,F,E,t,n,a,v){var x;const D=new Set("Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;GeoJson;CSV;KML;WFS;WMTS;WMS;Feed".split(";")),N=new Set(["KML","GeoJson","CSV"]);p=x=class extends p.JSONSupportMixin(w){static from(d){return q.ensureClass(x,d)}constructor(d){super(d);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=this.avgRating=this.applicationProxies=
this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const d=this.type,H=this.typeKeywords||[];let S=d;"Feature Service"===d||"Feature Collection"===
d?S=H.includes("Table")?"Table":H.includes("Route Layer")?"Route Layer":H.includes("Markup")?"Markup":"Feature Layer":"Image Service"===d?S=H.includes("Elevation 3D Layer")?"Elevation Layer":H.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===d?S="Scene Layer":"Video Service"===d?S="Video Layer":"Scene Package"===d?S="Scene Layer Package":"Stream Service"===d?S="Feature Layer":"Geoprocessing Service"===d?S=H.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===
d?S="Locator":"Geoenrichment Service"===d?S="GeoEnrichment Service":"Microsoft Powerpoint"===d?S="Microsoft PowerPoint":"GeoJson"===d?S="GeoJSON":"Globe Service"===d?S="Globe Layer":"Vector Tile Service"===d?S="Tile Layer":"netCDF"===d?S="NetCDF":"Map Service"===d?S=H.includes("Spatiotemporal")||!H.includes("Hosted Service")&&!H.includes("Tiled")||H.includes("Relational")?"Map Image Layer":"Tile Layer":d&&d.toLowerCase().includes("add in")?S=d.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===
d?S="Big Data File Share":"Compact Tile Package"===d?S="Tile Package (tpkx)":"OGCFeatureServer"===d?S="OGC Feature Layer":"web mapping application"===d&&H.includes("configurableApp")?S="Instant App":"Insights Page"===d?S="Insights Report":"Excalibur Imagery Project"===d&&(S="Excalibur Project");return S}readExtent(d){return d&&d.length?new t(d[0][0],d[0][1],d[1][0],d[1][1]):null}get iconUrl(){var d=this.type?.toLowerCase()||"";const H=this.typeKeywords||[];var S=!1;let J=!1,R=!1,O=!1,V=!1,m=!1;S=
!1;0<d.indexOf("service")||"feature collection"===d||"kml"===d||"wms"===d||"wmts"===d||"wfs"===d?(S=H.includes("Hosted Service"),"feature service"===d||"feature collection"===d||"kml"===d||"wfs"===d?(J=H.includes("Table"),R=H.includes("Route Layer"),O=H.includes("Markup"),V=H.includes("Spatiotemporal"),m=H.includes("UtilityNetwork"),d=V&&J?"spatiotemporaltable":J?"table":R?"routelayer":O?"markup":V?"spatiotemporal":S?"featureshosted":m?"utilitynetwork":"features"):d="map service"===d||"wms"===d||
"wmts"===d?S||H.includes("Tiled")||"wmts"===d?"maptiles":"mapimages":"scene service"===d?H.includes("Line")?"sceneweblayerline":H.includes("3DObject")?"sceneweblayermultipatch":H.includes("Point")?"sceneweblayerpoint":H.includes("IntegratedMesh")?"sceneweblayermesh":H.includes("PointCloud")?"sceneweblayerpointcloud":H.includes("Polygon")?"sceneweblayerpolygon":H.includes("Building")?"sceneweblayerbuilding":H.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===d?H.includes("Elevation 3D Layer")?
"elevationlayer":H.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===d?"streamlayer":"video service"===d?H.includes("Live Stream")?"livestreamvideolayer":"videolayer":"vector tile service"===d?"vectortile":"datastore catalog service"===d?"datastorecollection":"geocoding service"===d?"geocodeservice":"geoprocessing service"===d?H.includes("Web Tool")?"tool":"layers":"geodata service"===d?"geodataservice":"3dtiles service"===d?"3dtileslayer":"layers"):d="web map"===d||"cityengine web scene"===
d?"maps":"web scene"===d?H.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===d&&H.includes("configurableApp")?"instantapps":"web mapping application"===d||"mobile application"===d||"application"===d||"operation view"===d||"desktop application"===d?"apps":"map document"===d||"map package"===d||"published map"===d||"scene document"===d||"globe document"===d||"basemap package"===d||"mobile basemap package"===d||"mobile map package"===d||"project package"===d||
"project template"===d||"pro map"===d||"layout"===d||"layer"===d&&H.includes("ArcGIS Pro")||"explorer map"===d&&H.indexOf("Explorer Document")?"mapsgray":"service definition"===d||"csv"===d||"shapefile"===d||"cad drawing"===d||"geojson"===d||"netcdf"===d||"administrative report"===d?"datafiles":"explorer add in"===d||"desktop add in"===d||"windows viewer add in"===d||"windows viewer configuration"===d?"appsgray":"360 vr experience"===d?"360vr":"arcgis pro add in"===d||"arcgis pro configuration"===
d?"addindesktop":"rule package"===d||"file geodatabase"===d||"sqlite geodatabase"===d||"csv collection"===d||"kml collection"===d||"windows mobile package"===d||"map template"===d||"desktop application template"===d||"gml"===d||"arcpad package"===d||"code sample"===d||"document link"===d||"earth configuration"===d||"operations dashboard add in"===d||"rules package"===d||"image"===d||"workflow manager package"===d||"explorer map"===d&&H.includes("Explorer Mapping Application")||H.includes("Document")?
"datafilesgray":"network analysis service"===d||"geoprocessing service"===d||"geodata service"===d||"geometry service"===d||"geoprocessing package"===d||"locator package"===d||"geoprocessing sample"===d||"workflow manager service"===d?"toolsgray":"layer"===d||"layer package"===d||"explorer layer"===d?"layersgray":"scene package"===d?"scenepackage":"3dtiles package"===d?"3dtileslayerpackage":"mobile scene package"===d?"mobilescenepackage":"tile package"===d||"compact tile package"===d?"tilepackage":
"task file"===d?"taskfile":"report template"===d?"report-template":"statistical data collection"===d?"statisticaldatacollection":"insights workbook"===d?"workbook":"insights model"===d?"insightsmodel":"insights page"===d?"insightspage":"insights theme"===d?"insightstheme":"hub initiative"===d?"hubinitiative":"hubpage"===d?"hubpage":"hub event"===d?"hubevent":"hub site application"===d?"hubsite":"hub project"===d?"hubproject":"relational database connection"===d?"relationaldatabaseconnection":"big data file share"===
d?"datastorecollection":"image collection"===d?"imagecollection":"style"===d?"style":"desktop style"===d?"desktopstyle":"dashboard"===d?"dashboard":"raster function template"===d?"rasterprocessingtemplate":"vector tile package"===d?"vectortilepackage":"ortho mapping project"===d?"orthomappingproject":"ortho mapping template"===d?"orthomappingtemplate":"solution"===d?"solutions":"geopackage"===d?"geopackage":"deep learning package"===d?"deeplearningpackage":"real time analytic"===d?"realtimeanalytics":
"big data analytic"===d?"bigdataanalytics":"feed"===d?"feed":"excalibur imagery project"===d?"excaliburimageryproject":"notebook"===d?"notebook":"storymap"===d?"storymap":"survey123 add in"===d?"survey123addin":"mission"===d?"mission":"mission report"===d?"missionreport":"mission template"===d?"missiontemplate":"quickcapture project"===d?"quickcaptureproject":"pro report"===d?"proreport":"pro report template"===d?"proreporttemplate":"urban model"===d?"urbanmodel":"web experience"===d?"experiencebuilder":
"web experience template"===d?"webexperiencetemplate":"experience builder widget"===d?"experiencebuilderwidget":"experience builder widget package"===d?"experiencebuilderwidgetpackage":"workflow"===d?"workflow":"insights script"===d?"insightsscript":"kernel gateway connection"===d?"kernelgatewayconnection":"hub initiative template"===d?"hubinitiativetemplate":"storymap theme"===d?"storymaptheme":"knowledge graph"===d?"knowledgegraph":"knowledge studio project"===d?"knowledgestudio":"native application"===
d?"nativeapp":"native application installer"===d?"nativeappinstaller":"link chart"===d?"linkchart":"investigation"===d?"investigation":"ogcfeatureserver"===d?"features":"pro project"===d?"proproject":"insights workbook package"===d?"insightsworkbookpackage":"apache parquet"===d?"apacheparquet":"notebook code snippets"===d||"notebook code snippet library"===d?"notebookcodesnippets":"suitability model"===d?"suitabilitymodel":"esri classifier definition"===d?"classifierdefinition":"esri classification schema"===
d?"classificationschema":"insights data engineering workbook"===d?"dataengineeringworkbook":"insights data engineering model"===d?"dataengineeringmodel":"deep learning studio project"===d?"deeplearningproject":"discussion"===d?"discussion":"allsource project"===d?"allsourceproject":"api key"===d?"apikey":"data pipeline"===d?"datapipelines":"group layer"===d?(S=H.includes("Map"))?"layergroup2d":"layergroup":"media layer"===d?"onlinemedialayer":"form"===d?H.includes("Survey123")?"survey":"datafilesgray":
"maps";return d?A.getAssetUrl("esri/images/portal/"+d+"16.png"):null}get isLayer(){return null!=this.type&&D.has(this.type)}get itemCdnUrl(){let d=this.itemUrl;d&&y.id&&!y.id.findCredential(d)&&(d=y.id._normalizeAGOLorgDomain(d),d=d.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),d=d.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),d=d.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return d}get itemPageUrl(){const d=this.portal?.itemPageUrl;
return d&&this.id?`${d}?id=${this.id}`:null}get itemUrl(){const d=this.portal?.restUrl;return d&&this.id?`${d}/content/items/${this.id}`:null}get thumbnailUrl(){const d=this.itemUrl,H=this.thumbnail;return d&&H?this.portal?.normalizeUrl(`${d}/info/${H}?f=json`)??null:null}get userItemUrl(){const d=this.portal?.restUrl;if(!d)return null;const H=this.owner||this.portal?.user?.username;return H?`${d}/content/users/${this.ownerFolder?`${H}/${this.ownerFolder}`:H}/items/${this.id}`:null}load(d){const H=
this.portal??(this.portal=n.getDefault()),S=H.load(d).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?H.request(this.itemUrl,{signal:null!=d?d.signal:null,query:{token:this.apiKey}}):{}).then(J=>{this.sourceJSON=J;this.read(J)});this.addResolvingPromise(S);return Promise.resolve(this)}async addRating(d){const H={method:"post",query:{}};d instanceof v&&(d=d.rating);null==d||isNaN(d)||"number"!==typeof d||(H.query.rating=d);if(!this.portal)return null;await this.portal.request(this.itemUrl+
"/addRating",H);return new v({rating:d,created:new Date})}clone(){var d={access:this.access,accessInformation:this.accessInformation,applicationProxies:g.clone(this.applicationProxies),avgRating:this.avgRating,categories:g.clone(this.categories),created:g.clone(this.created),culture:this.culture,description:this.description,extent:g.clone(this.extent),groupCategories:g.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:g.clone(this.modified),
name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:g.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:g.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:g.clone(this.typeKeywords),url:this.url};this.loaded&&(d.loadStatus="loaded");d=(new x({sourceJSON:this.sourceJSON})).set(d);
d._set("isOrgItem",this.isOrgItem);return d}createPostQuery(){const d=this.toJSON();for(var H of["tags","typeKeywords","categories"])d[H]=d[H]?.join(", ");({extent:H}=d);H&&(d.extent=JSON.stringify(H));return d}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(d="json",H){return this.portal.request(this.itemUrl+"/data",{responseType:d,...H,query:{token:this.apiKey}})}async fetchRating(d){d=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},
...d});return null!=d.rating?(d.created=new Date(d.created),new v(d)):null}fetchRelatedItems(d,H){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...d,token:this.apiKey},...H},x)}getThumbnailUrl(d){let H=this.thumbnailUrl;H&&d&&(H+=`&w=${d}`);return H}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(d=>{this.sourceJSON=d;this.read(d);return this})}update(d){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>
{const H=d?.data,S={method:"post"};S.query=this.createPostQuery();for(const J in S.query)null===S.query[J]&&(S.query[J]="");S.query.clearEmptyFields=!0;null!=H&&("string"===typeof H?S.query.text=H:"object"===typeof H&&(S.query.text=JSON.stringify(H)));return this.portal.request(`${this.userItemUrl}/update`,S).then(()=>this.reload())}):Promise.reject(new M("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(d){if(!this.id)throw new M("portal:item-does-not-exist",
"The item does not exist yet");await this.load();const {portal:H,itemUrl:S}=this;await H.signIn();const {copyResources:J,folder:R,tags:O,title:V}=d||{};d={method:"post",query:{copyPrivateResources:"all"===J,folder:"string"===typeof R?R:R?.id,includeResources:!!J,tags:O?.join(","),title:V}};({itemId:d}=await H.request(`${S}/copy`,d));return new x({id:d,portal:H})}updateThumbnail(d){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const H=d.thumbnail,S=d.filename,J={method:"post"};
if("string"===typeof H)f.isDataProtocol(H)?J.query={data:H}:J.query={url:f.makeAbsolute(H)},null!=S&&(J.query.filename=S);else{const R=new FormData;null!=S?R.append("file",H,S):R.append("file",H);J.body=R}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,J).then(()=>this.reload())}):Promise.reject(new M("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(d={},H){const {fetchResources:S}=await new Promise((J,R)=>c(["./support/resourceUtils"],
J,R));return S(this,d,H)}async addResource(d,H,S){const {addOrUpdateResource:J}=await new Promise((R,O)=>c(["./support/resourceUtils"],R,O));d.portalItem=this;return J(d,"add",H,S)}async removeResource(d,H){const {removeResource:S}=await new Promise((J,R)=>c(["./support/resourceUtils"],J,R));if(d.portalItem&&d.portalItem.itemUrl!==this.itemUrl)throw new M("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return S(this,d,H)}async removeAllResources(d){const {removeAllResources:H}=
await new Promise((S,J)=>c(["./support/resourceUtils"],S,J));return H(this,d)}resourceFromPath(d){return new a({portalItem:this,path:d})}toJSON(){var d=this.extent;d={accessInformation:this.accessInformation,categories:g.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:d&&[[d.xmin,d.ymin],[d.xmax,d.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,
snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:g.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:g.clone(this.typeKeywords),url:this.url};return g.fixJson(d)}static fromJSON(d){if(!d)return null;if(d.declaredClass)throw Error("JSON object is already hydrated");return new x({sourceJSON:d})}_getPostQuery(){const d=this.toJSON();for(const H in d)"tags"===H&&null!==d[H]&&(d[H]=d[H].join(", ")),"typeKeywords"===H&&null!==
d[H]&&(d[H]=d[H].join(", ")),"extent"===H&&d[H]&&(d[H]=JSON.stringify(d[H]));return d}};e.__decorate([r.property({type:["private","shared","org","public"]})],p.prototype,"access",void 0);e.__decorate([r.property()],p.prototype,"accessInformation",void 0);e.__decorate([r.property({type:String})],p.prototype,"apiKey",void 0);e.__decorate([r.property({json:{read:{source:"appProxies"}}})],p.prototype,"applicationProxies",void 0);e.__decorate([r.property()],p.prototype,"avgRating",void 0);e.__decorate([r.property()],
p.prototype,"categories",void 0);e.__decorate([r.property({type:Date})],p.prototype,"created",void 0);e.__decorate([r.property()],p.prototype,"culture",void 0);e.__decorate([r.property()],p.prototype,"description",void 0);e.__decorate([r.property({readOnly:!0})],p.prototype,"displayName",null);e.__decorate([r.property({type:t})],p.prototype,"extent",void 0);e.__decorate([F.reader("extent")],p.prototype,"readExtent",null);e.__decorate([r.property()],p.prototype,"groupCategories",void 0);e.__decorate([r.property({readOnly:!0})],
p.prototype,"iconUrl",null);e.__decorate([r.property()],p.prototype,"id",void 0);e.__decorate([r.property({readOnly:!0})],p.prototype,"isLayer",null);e.__decorate([r.property({type:Boolean,readOnly:!0})],p.prototype,"isOrgItem",void 0);e.__decorate([r.property()],p.prototype,"itemControl",void 0);e.__decorate([r.property({readOnly:!0})],p.prototype,"itemPageUrl",null);e.__decorate([r.property({readOnly:!0})],p.prototype,"itemUrl",null);e.__decorate([r.property()],p.prototype,"licenseInfo",void 0);
e.__decorate([r.property({type:Date})],p.prototype,"modified",void 0);e.__decorate([r.property()],p.prototype,"name",void 0);e.__decorate([r.property()],p.prototype,"numComments",void 0);e.__decorate([r.property()],p.prototype,"numRatings",void 0);e.__decorate([r.property()],p.prototype,"numViews",void 0);e.__decorate([r.property()],p.prototype,"owner",void 0);e.__decorate([r.property()],p.prototype,"ownerFolder",void 0);e.__decorate([r.property({type:n})],p.prototype,"portal",void 0);e.__decorate([r.property()],
p.prototype,"screenshots",void 0);e.__decorate([r.property()],p.prototype,"size",void 0);e.__decorate([r.property()],p.prototype,"snippet",void 0);e.__decorate([r.property()],p.prototype,"sourceJSON",void 0);e.__decorate([r.property({type:String})],p.prototype,"sourceUrl",void 0);e.__decorate([r.property({type:String})],p.prototype,"spatialReference",void 0);e.__decorate([r.property()],p.prototype,"tags",void 0);e.__decorate([r.property()],p.prototype,"thumbnail",void 0);e.__decorate([r.property({readOnly:!0})],
p.prototype,"thumbnailUrl",null);e.__decorate([r.property()],p.prototype,"title",void 0);e.__decorate([r.property()],p.prototype,"type",void 0);e.__decorate([r.property()],p.prototype,"typeKeywords",void 0);e.__decorate([r.property({type:String,json:{read(d,H){N.has(H.type)&&(H=this.portal?.restUrl,d||(d=H&&this.id?`${H}/content/items/${this.id}/data`:null));return d}}})],p.prototype,"url",void 0);e.__decorate([r.property({readOnly:!0})],p.prototype,"userItemUrl",null);return p=x=e.__decorate([E.subclass("esri.portal.PortalItem")],
p)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(c,e,A,y,M,p,g,w,f,r,q){A=class extends A{constructor(F){super(F);this.portalItem=null}normalizeCtorArgs(F){return F?.portalItem&&F.path?{...F,path:this._normalizePath(F.path,
F.portalItem)}:F}set path(F){null!=F&&p.isAbsolute(F)?M.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",F)}_castPath(F){return this._normalizePath(F,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?
`./resources/${this.path}`:null}fetch(F="json",E){const t=this.cdnUrl;if(null==t)throw new y("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(t,{responseType:F,query:{token:this.portalItem.apiKey},signal:E?.signal})}async update(F,E){const {addOrUpdateResource:t}=await new Promise((n,a)=>c(["./support/resourceUtils"],n,a));return t(this,"update",F,E)}hasPath(){return null!=this.path}_normalizePath(F,E){if(null==F)return F;
F=F.replace(/^\/+/,"");null!=E&&p.isAbsolute(F)&&(F=p.makeRelative(F,E.itemUrl));return F?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}};e.__decorate([g.property()],A.prototype,"portalItem",void 0);e.__decorate([g.property({type:String,value:null})],A.prototype,"path",null);e.__decorate([w.cast("path")],A.prototype,"_castPath",null);e.__decorate([g.property({type:String,readOnly:!0})],A.prototype,"url",null);e.__decorate([g.property({type:String,readOnly:!0})],A.prototype,"cdnUrl",null);
e.__decorate([g.property({type:String,readOnly:!0})],A.prototype,"itemRelativeUrl",null);return A=e.__decorate([q.subclass("esri.portal.PortalItemResource")],A)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(c,e,A,y,M,p,g){e=class extends e{constructor(w){super(w);this.rating=this.created=
null}};c.__decorate([A.property()],e.prototype,"created",void 0);c.__decorate([A.property()],e.prototype,"rating",void 0);return e=c.__decorate([g.subclass("esri.portal.PortalRating")],e)})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(c,e,A){c.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",
styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],
id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,
opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",
layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,
opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",
title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},
"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",
layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",
is3d:!0,get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",
layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},
"arcgis-imagery-standard":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",
isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/dark-gray.jpg")},
title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",
baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return e.getAssetUrl("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",
baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",
title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",
title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",
title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,
title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};c.getBasemapTitle=async function(y){if(y){var M=y.includes("-vector")?y.slice(0,y.indexOf("-vector")):
y.includes("-3d")?y.slice(0,y.indexOf("-3d")):y,p=await A.fetchMessageBundle("esri/t9n/basemaps");return p[y]||p[M]}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(c,e,A,y,M,p,g,w){const f=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
e=class extends e{constructor(r){super(r);this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps"}getLanguageParamValue(){if(this.language)return this.language;var r=w.getLocale().toLowerCase();switch(r){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}r=w.getLanguage(r);return"pt"===r?"pt-BR":r&&f.has(r)?r:"global"}};c.__decorate([A.property()],e.prototype,
"id",void 0);c.__decorate([A.property()],e.prototype,"language",void 0);c.__decorate([A.property()],e.prototype,"serviceUrl",void 0);return e=c.__decorate([g.subclass("esri.support.BasemapStyle")],e)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),function(c,e,A,y,M,p){function g(r,q){"maxScale"in r&&(q.maxScale=M.numberToJSON(r.maxScale)??
void 0);"minScale"in r&&(q.minScale=M.numberToJSON(r.minScale)??void 0)}const w=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),f=new Set("csv feature geo-rss geojson group imagery imagery-tile kml map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));c.disableRestrictedWriting=function(r){w.add(r);f.add(r)};c.enableRestrictedWriting=
function(r){w.delete(r);f.delete(r)};c.getLayerJSON=function(r,q,F){if(!r.persistenceEnabled)return null;if(!("write"in r&&r.write))return F?.messages&&F.messages.push(new e("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted`,{layer:r})),null;if(p.isFeatureCollectionLayer(r)&&!r.isTable)q=r.resourceInfo;else{if(F.restrictedWebMapWriting){var E="basemap"===F.layerContainerType?w:"operational-layers"===F.layerContainerType?f:null;E=null!=E?E.has(r.type)&&
!p.isFeatureCollectionLayer(r):!0}else E=!0;if(E)return q={},r.write(q,F)?q:null}if(null!=q){q=A.clone(q);if(F=q)p.isFeatureCollectionLayer(r)?(E=y.getDeepValue("featureCollection.layers",F)?.[0]?.layerDefinition)&&g(r,E):"group"!==r.type&&g(r,F);if(F&&(F.id=r.id,"blendMode"in r&&(F.blendMode=r.blendMode,"normal"===F.blendMode&&delete F.blendMode),F.opacity=M.numberToJSON(r.opacity)??void 0,F.title=r.title||"Layer",F.visibility=r.visible,"legendEnabled"in r&&"wmts"!==r.type))if(p.isFeatureCollectionLayer(r)){if(F=
F.featureCollection)F.showLegend=r.legendEnabled}else F.showLegend=r.legendEnabled}return q};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(c,e,A){function y(p){return"scene"===p?.type}function M(p){p=p?.type;return"imagery-tile"===p||"tile"===p||"open-street-map"===p||"vector-tile"===p||"web-tile"===p||"wmts"===p}c.getEffectiveEditingEnabled=function(p){a:if("editingEnabled"in p)switch(p.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var g=
!0;break a;default:g=!1}else g=!1;return g?"effectiveEditingEnabled"in p?p.effectiveEditingEnabled:p.editingEnabled:!1};c.getEffectiveLayerCapabilities=function(p){a:if("capabilities"in p)switch(p.type){case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":case "wfs":var g=!0;break a;default:g=!1}else g=!1;return g?"effectiveCapabilities"in p?p.effectiveCapabilities:
p.capabilities:null};c.getOwningPortalUrl=async function(p,g){var w=e.id?.findServerInfo(p);if(null!=w?.currentVersion)return w.owningSystemUrl||null;w=p.toLowerCase().indexOf("/rest/services");if(-1===w)return null;p=`${p.substring(0,w)}/rest/info`;({data:g}=await A(p,{query:{f:"json"},responseType:"json",signal:null!=g?g.signal:null}));return g?.owningSystemUrl||null};c.getTileMaxtrixSetFromActiveLayer=function(p){if(p.activeLayer){const g=p.activeLayer.tileMatrixSet;if(g)return g;if(p=p.activeLayer.tileMatrixSets)return p}return null};
c.isBaseLayer=function(p){return null!=p?.parent&&"declaredClass"in p.parent&&"esri.Basemap"===p.parent.declaredClass&&p.parent.baseLayers.includes(p)};c.isBasemap3DSupportedLayer=function(p){return M(p)||y(p)};c.isBasemapSupportedTiledLayer=M;c.isFeatureCollectionLayer=function(p){return"feature"===p?.type&&!p.url&&"memory"===p.source?.type};c.isFeatureLayer=function(p){return null!=p&&"object"===typeof p&&"type"in p&&"feature"===p.type};c.isFeatureServiceLayer=function(p){return"feature"===p?.type&&
"feature-layer"===p.source?.type};c.isGraphicsLayer=function(p){return null!=p&&"object"===typeof p&&"type"in p&&"graphics"===p.type};c.isGroupLayer=function(p){return null!=p&&"type"in p&&"group"===p.type};c.isImageryTileLayer=function(p){return"imagery-tile"===p?.type};c.isKnowledgeGraphLayer=function(p){return null!=p&&"object"===typeof p&&"type"in p&&"knowledge-graph"===p.type&&"layers"in p};c.isLayerWithFeatureLayerSource=function(p){return("feature"===p?.type||"subtype-group"===p?.type)&&"feature-layer"===
p.source?.type};c.isMapNotesLayer=function(p){return null!=p&&"object"===typeof p&&"type"in p&&"map-notes"===p.type&&"sublayers"in p};c.isSceneLayer=y;c.isSceneServiceLayer=function(p){p=p?.type;return"building-scene"===p||"integrated-mesh"===p||"point-cloud"===p||"scene"===p};c.isSubtypeGroupLayer=function(p){return null!=p&&"object"===typeof p&&"type"in p&&"subtype-group"===p.type&&"sublayers"in p};c.isTable=function(p){return null!=p&&"object"===typeof p&&"isTable"in p&&!!p.isTable};c.isTiledLayer=
function(p){p=p?.type;return"base-tile"===p||"tile"===p||"elevation"===p||"imagery-tile"===p||"base-elevation"===p||"open-street-map"===p||"wcs"===p||"web-tile"===p||"wmts"===p||"vector-tile"===p};c.isVoxelLayer=function(p){return"voxel"===p?.type};c.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};c.serializeLayerDefinitions=function(p){const g=/[:;]/,w=[];let f=!1;if(p&&(p.forEach((r,
q)=>{w.push([q,r]);!f&&g.test(r)&&(f=!0)}),0<w.length)){if(f){const r={};w.forEach(q=>{r[q[0]]=q[1]});p=JSON.stringify(r)}else{const r=[];w.forEach(q=>{r.push(q[0]+":"+q[1])});p=r.join(";")}return p}return null};c.serializeTimeOptions=function(p){if(p){var g=[];p.forEach((w,f)=>{g.push('"'+f+'":'+JSON.stringify(w))});if(g.length)return"{"+g.join(",")+"}"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(c,
e){c.canInterpolateEffects=function(A,y){const M=A.length>y.length?A:y;return(A.length>y.length?y:A).every((p,g)=>p.type===M[g].type)};c.effectEquals=function(A,y){A=JSON.stringify(A??null);y=JSON.stringify(y??null);return A===y};c.isEffectFunctions=function(A){return(A=A[0])?"type"in A:!1};c.normalizeEffects=function(A,y){const M=A.length>y.length?A:y;A=A.length>y.length?y:A;for(y=A.length;y<M.length;y++)A.push(e.createEffectWithInitialValues(M[y]))};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/effects/effects":function(){define(["exports","../../colorUtils","../../core/screenUtils","../../chunks/mat4f32","./colorMatrixFunctions"],function(c,e,A,y,M){function p(t,n,a){return t+(n-t)*a}function g(t){return Math.round(1E3*A.px2pt(t))/1E3}class w{constructor(t,n,a){this.strength=t;this.radius=n;this.threshold=a;this.type="bloom"}interpolate(t,n,a){this.strength=p(t.strength,n.strength,a);this.radius=p(t.radius,n.radius,a);this.threshold=p(t.threshold,n.threshold,a)}clone(){return new w(this.strength,
this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:g(this.radius),strength:this.strength,threshold:this.threshold}}}class f{constructor(t){this.radius=t;this.type="blur"}interpolate(t,n,a){this.radius=Math.round(p(t.radius,n.radius,a))}clone(){return new f(this.radius)}toJSON(){return{type:"blur",radius:g(this.radius)}}}class r{constructor(t,n){this.type=t;this.amount=n;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||
this._updateMatrix();return this._colorMatrix}interpolate(t,n,a){this.amount=p(t.amount,n.amount,a);this._updateMatrix()}clone(){return new r(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||y.create();switch(this.type){case "brightness":this._colorMatrix=M.brightness(t,this.amount);break;case "contrast":this._colorMatrix=M.contrast(t,this.amount);break;case "grayscale":this._colorMatrix=M.grayscale(t,this.amount);break;case "invert":this._colorMatrix=
M.invert(t,this.amount);break;case "saturate":this._colorMatrix=M.saturate(t,this.amount);break;case "sepia":this._colorMatrix=M.sepia(t,this.amount)}}}class q{constructor(t,n,a,v){this.offsetX=t;this.offsetY=n;this.blurRadius=a;this.color=v;this.type="drop-shadow"}interpolate(t,n,a){this.offsetX=p(t.offsetX,n.offsetX,a);this.offsetY=p(t.offsetY,n.offsetY,a);this.blurRadius=p(t.blurRadius,n.blurRadius,a);this.color[0]=Math.round(p(t.color[0],n.color[0],a));this.color[1]=Math.round(p(t.color[1],n.color[1],
a));this.color[2]=Math.round(p(t.color[2],n.color[2],a));this.color[3]=p(t.color[3],n.color[3],a)}clone(){return new q(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];t[3]*=255;return{type:"drop-shadow",xoffset:g(this.offsetX),yoffset:g(this.offsetY),blurRadius:g(this.blurRadius),color:t}}}class F{constructor(t){this.angle=t;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(t,n,a){this.angle=
p(t.angle,n.angle,a);this._updateMatrix()}clone(){return new F(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||y.create();this._colorMatrix=M.rotateHue(t,this.angle)}}class E{constructor(t){this.amount=t;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(t,n,a){this.amount=p(t.amount,n.amount,a)}clone(){return new E(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}c.BloomEffect=w;c.BlurEffect=f;c.ColorMatrixEffect=
r;c.DropShadowEffect=q;c.HueRotateEffect=F;c.OpacityEffect=E;c.createEffectWithInitialValues=function(t){switch(t.type){case "grayscale":case "sepia":case "invert":return new r(t.type,0);case "saturate":case "brightness":case "contrast":return new r(t.type,1);case "opacity":return new E(1);case "hue-rotate":return new F(0);case "blur":return new f(0);case "drop-shadow":return new q(0,0,0,[...e.getNamedColor("transparent")]);case "bloom":return new w(0,0,1)}};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/chunks/mat4f32":function(){define(["exports"],function(c){function e(){const w=new Float32Array(16);w[0]=1;w[5]=1;w[10]=1;w[15]=1;return w}function A(w){const f=new Float32Array(16);f[0]=w[0];f[1]=w[1];f[2]=w[2];f[3]=w[3];f[4]=w[4];f[5]=w[5];f[6]=w[6];f[7]=w[7];f[8]=w[8];f[9]=w[9];f[10]=w[10];f[11]=w[11];f[12]=w[12];f[13]=w[13];f[14]=w[14];f[15]=w[15];return f}function y(w,f,r,q,F,E,t,n,a,v,x,D,N,d,H,S){const J=new Float32Array(16);J[0]=w;J[1]=f;J[2]=r;J[3]=q;J[4]=F;J[5]=
E;J[6]=t;J[7]=n;J[8]=a;J[9]=v;J[10]=x;J[11]=D;J[12]=N;J[13]=d;J[14]=H;J[15]=S;return J}function M(w,f){return new Float32Array(w,f,16)}const p=e(),g=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:p,clone:A,create:e,createView:M,fromValues:y},Symbol.toStringTag,{value:"Module"}));c.IDENTITY=p;c.clone=A;c.create=e;c.createView=M;c.fromValues=y;c.mat4f32=g})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports","../../chunks/mat4"],function(c,e){c.brightness=(A,y)=>{A=
e.set(A,y,0,0,0,0,y,0,0,0,0,y,0,0,0,0,1);return e.transpose(A,A)};c.contrast=(A,y)=>{A=e.set(A,y,0,0,.5-.5*y,0,y,0,.5-.5*y,0,0,y,.5-.5*y,0,0,0,1);return e.transpose(A,A)};c.grayscale=(A,y)=>{y=1-y;A=e.set(A,.2126+.7874*y,.7152-.7152*y,.0722-.0722*y,0,.2126-.2126*y,.7152+.2848*y,.0722-.0722*y,0,.2126-.2126*y,.7152-.7152*y,.0722+.9278*y,0,0,0,0,1);return e.transpose(A,A)};c.invert=(A,y)=>{const M=1-2*y;A=e.set(A,M,0,0,y,0,M,0,y,0,0,M,y,0,0,0,1);return e.transpose(A,A)};c.rotateHue=(A,y)=>{const M=Math.sin(y*
Math.PI/180);y=Math.cos(y*Math.PI/180);A=e.set(A,.213+.787*y-.213*M,.715-.715*y-.715*M,.072-.072*y+.928*M,0,.213-.213*y+.143*M,.715+.285*y+.14*M,.072-.072*y-.283*M,0,.213-.213*y-.787*M,.715-.715*y+.715*M,.072+.928*y+.072*M,0,0,0,0,1);return e.transpose(A,A)};c.saturate=(A,y)=>{A=e.set(A,.213+.787*y,.715-.715*y,.072-.072*y,0,.213-.213*y,.715+.285*y,.072-.072*y,0,.213-.213*y,.715-.715*y,.072+.928*y,0,0,0,0,1);return e.transpose(A,A)};c.sepia=(A,y)=>{y=1-y;A=e.set(A,.393+.607*y,.769-.769*y,.189-.189*
y,0,.349-.349*y,.686+.314*y,.168-.168*y,0,.272-.272*y,.534-.534*y,.131+.869*y,0,0,0,0,1);return e.transpose(A,A)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(c,e,A){function y(h,C){h[0]=C[0];h[1]=C[1];h[2]=C[2];h[3]=C[3];h[4]=C[4];h[5]=C[5];h[6]=C[6];h[7]=C[7];h[8]=C[8];h[9]=C[9];h[10]=C[10];h[11]=C[11];h[12]=C[12];h[13]=C[13];h[14]=C[14];h[15]=C[15];return h}function M(h,C,X,aa,ha,z,G,L,W,Z,ba,da,
ia,ka,sa,oa,ra){h[0]=C;h[1]=X;h[2]=aa;h[3]=ha;h[4]=z;h[5]=G;h[6]=L;h[7]=W;h[8]=Z;h[9]=ba;h[10]=da;h[11]=ia;h[12]=ka;h[13]=sa;h[14]=oa;h[15]=ra;return h}function p(h){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function g(h,C){if(h===C){const X=C[1],aa=C[2],ha=C[3],z=C[6],G=C[7],L=C[11];h[1]=C[4];h[2]=C[8];h[3]=C[12];h[4]=X;h[6]=C[9];h[7]=C[13];h[8]=aa;h[9]=z;h[11]=C[14];h[12]=ha;h[13]=G;h[14]=L}else h[0]=C[0],h[1]=
C[4],h[2]=C[8],h[3]=C[12],h[4]=C[1],h[5]=C[5],h[6]=C[9],h[7]=C[13],h[8]=C[2],h[9]=C[6],h[10]=C[10],h[11]=C[14],h[12]=C[3],h[13]=C[7],h[14]=C[11],h[15]=C[15];return h}function w(h,C){f(h,C)||p(h);return h}function f(h,C){const X=C[0],aa=C[1],ha=C[2],z=C[3],G=C[4],L=C[5],W=C[6],Z=C[7],ba=C[8],da=C[9],ia=C[10],ka=C[11],sa=C[12],oa=C[13],ra=C[14];C=C[15];const Ca=X*L-aa*G,xa=X*W-ha*G,Ba=X*Z-z*G,Aa=aa*W-ha*L,ya=aa*Z-z*L,Ha=ha*Z-z*W,Qa=ba*oa-da*sa,Ya=ba*ra-ia*sa,Wa=ba*C-ka*sa,Ja=da*ra-ia*oa,Ka=da*C-ka*
oa,ja=ia*C-ka*ra;let Ra=Ca*ja-xa*Ka+Ba*Ja+Aa*Wa-ya*Ya+Ha*Qa;if(!Ra)return null;Ra=1/Ra;h[0]=(L*ja-W*Ka+Z*Ja)*Ra;h[1]=(ha*Ka-aa*ja-z*Ja)*Ra;h[2]=(oa*Ha-ra*ya+C*Aa)*Ra;h[3]=(ia*ya-da*Ha-ka*Aa)*Ra;h[4]=(W*Wa-G*ja-Z*Ya)*Ra;h[5]=(X*ja-ha*Wa+z*Ya)*Ra;h[6]=(ra*Ba-sa*Ha-C*xa)*Ra;h[7]=(ba*Ha-ia*Ba+ka*xa)*Ra;h[8]=(G*Ka-L*Wa+Z*Qa)*Ra;h[9]=(aa*Wa-X*Ka-z*Qa)*Ra;h[10]=(sa*ya-oa*Ba+C*Ca)*Ra;h[11]=(da*Ba-ba*ya-ka*Ca)*Ra;h[12]=(L*Ya-G*Ja-W*Qa)*Ra;h[13]=(X*Ja-aa*Ya+ha*Qa)*Ra;h[14]=(oa*xa-sa*Aa-ra*Ca)*Ra;h[15]=(ba*
Aa-da*xa+ia*Ca)*Ra;return h}function r(h,C){const X=C[0],aa=C[1],ha=C[2],z=C[3],G=C[4],L=C[5],W=C[6],Z=C[7],ba=C[8],da=C[9],ia=C[10],ka=C[11],sa=C[12],oa=C[13],ra=C[14];C=C[15];h[0]=L*(ia*C-ka*ra)-da*(W*C-Z*ra)+oa*(W*ka-Z*ia);h[1]=-(aa*(ia*C-ka*ra)-da*(ha*C-z*ra)+oa*(ha*ka-z*ia));h[2]=aa*(W*C-Z*ra)-L*(ha*C-z*ra)+oa*(ha*Z-z*W);h[3]=-(aa*(W*ka-Z*ia)-L*(ha*ka-z*ia)+da*(ha*Z-z*W));h[4]=-(G*(ia*C-ka*ra)-ba*(W*C-Z*ra)+sa*(W*ka-Z*ia));h[5]=X*(ia*C-ka*ra)-ba*(ha*C-z*ra)+sa*(ha*ka-z*ia);h[6]=-(X*(W*C-Z*ra)-
G*(ha*C-z*ra)+sa*(ha*Z-z*W));h[7]=X*(W*ka-Z*ia)-G*(ha*ka-z*ia)+ba*(ha*Z-z*W);h[8]=G*(da*C-ka*oa)-ba*(L*C-Z*oa)+sa*(L*ka-Z*da);h[9]=-(X*(da*C-ka*oa)-ba*(aa*C-z*oa)+sa*(aa*ka-z*da));h[10]=X*(L*C-Z*oa)-G*(aa*C-z*oa)+sa*(aa*Z-z*L);h[11]=-(X*(L*ka-Z*da)-G*(aa*ka-z*da)+ba*(aa*Z-z*L));h[12]=-(G*(da*ra-ia*oa)-ba*(L*ra-W*oa)+sa*(L*ia-W*da));h[13]=X*(da*ra-ia*oa)-ba*(aa*ra-ha*oa)+sa*(aa*ia-ha*da);h[14]=-(X*(L*ra-W*oa)-G*(aa*ra-ha*oa)+sa*(aa*W-ha*L));h[15]=X*(L*ia-W*da)-G*(aa*ia-ha*da)+ba*(aa*W-ha*L);return h}
function q(h){const C=h[0],X=h[1],aa=h[2],ha=h[3],z=h[4],G=h[5],L=h[6],W=h[7],Z=h[8],ba=h[9],da=h[10],ia=h[11],ka=h[12],sa=h[13],oa=h[14];h=h[15];return(C*G-X*z)*(da*h-ia*oa)-(C*L-aa*z)*(ba*h-ia*sa)+(C*W-ha*z)*(ba*oa-da*sa)+(X*L-aa*G)*(Z*h-ia*ka)-(X*W-ha*G)*(Z*oa-da*ka)+(aa*W-ha*L)*(Z*sa-ba*ka)}function F(h,C,X){const aa=C[0],ha=C[1],z=C[2],G=C[3],L=C[4],W=C[5],Z=C[6],ba=C[7],da=C[8],ia=C[9],ka=C[10],sa=C[11],oa=C[12],ra=C[13],Ca=C[14];C=C[15];let xa=X[0],Ba=X[1],Aa=X[2],ya=X[3];h[0]=xa*aa+Ba*L+Aa*
da+ya*oa;h[1]=xa*ha+Ba*W+Aa*ia+ya*ra;h[2]=xa*z+Ba*Z+Aa*ka+ya*Ca;h[3]=xa*G+Ba*ba+Aa*sa+ya*C;xa=X[4];Ba=X[5];Aa=X[6];ya=X[7];h[4]=xa*aa+Ba*L+Aa*da+ya*oa;h[5]=xa*ha+Ba*W+Aa*ia+ya*ra;h[6]=xa*z+Ba*Z+Aa*ka+ya*Ca;h[7]=xa*G+Ba*ba+Aa*sa+ya*C;xa=X[8];Ba=X[9];Aa=X[10];ya=X[11];h[8]=xa*aa+Ba*L+Aa*da+ya*oa;h[9]=xa*ha+Ba*W+Aa*ia+ya*ra;h[10]=xa*z+Ba*Z+Aa*ka+ya*Ca;h[11]=xa*G+Ba*ba+Aa*sa+ya*C;xa=X[12];Ba=X[13];Aa=X[14];ya=X[15];h[12]=xa*aa+Ba*L+Aa*da+ya*oa;h[13]=xa*ha+Ba*W+Aa*ia+ya*ra;h[14]=xa*z+Ba*Z+Aa*ka+ya*Ca;
h[15]=xa*G+Ba*ba+Aa*sa+ya*C;return h}function E(h,C,X){const aa=X[0],ha=X[1];X=X[2];if(C===h)h[12]=C[0]*aa+C[4]*ha+C[8]*X+C[12],h[13]=C[1]*aa+C[5]*ha+C[9]*X+C[13],h[14]=C[2]*aa+C[6]*ha+C[10]*X+C[14],h[15]=C[3]*aa+C[7]*ha+C[11]*X+C[15];else{const z=C[0],G=C[1],L=C[2],W=C[3],Z=C[4],ba=C[5],da=C[6],ia=C[7],ka=C[8],sa=C[9],oa=C[10],ra=C[11];h[0]=z;h[1]=G;h[2]=L;h[3]=W;h[4]=Z;h[5]=ba;h[6]=da;h[7]=ia;h[8]=ka;h[9]=sa;h[10]=oa;h[11]=ra;h[12]=z*aa+Z*ha+ka*X+C[12];h[13]=G*aa+ba*ha+sa*X+C[13];h[14]=L*aa+da*
ha+oa*X+C[14];h[15]=W*aa+ia*ha+ra*X+C[15]}return h}function t(h,C,X){const aa=X[0],ha=X[1];X=X[2];h[0]=C[0]*aa;h[1]=C[1]*aa;h[2]=C[2]*aa;h[3]=C[3]*aa;h[4]=C[4]*ha;h[5]=C[5]*ha;h[6]=C[6]*ha;h[7]=C[7]*ha;h[8]=C[8]*X;h[9]=C[9]*X;h[10]=C[10]*X;h[11]=C[11]*X;h[12]=C[12];h[13]=C[13];h[14]=C[14];h[15]=C[15];return h}function n(h,C,X,aa){let ha=aa[0],z=aa[1];aa=aa[2];let G=Math.sqrt(ha*ha+z*z+aa*aa);var L=void 0,W=void 0;let Z=void 0,ba=void 0,da=void 0,ia=void 0,ka=void 0,sa=void 0,oa=void 0,ra=void 0,Ca=
void 0,xa=void 0,Ba=void 0,Aa=void 0,ya=void 0,Ha=void 0,Qa=void 0,Ya=void 0,Wa=void 0,Ja=void 0,Ka=void 0,ja=void 0;W=L=void 0;if(G<A.getEpsilon())return null;G=1/G;ha*=G;z*=G;aa*=G;L=Math.sin(X);W=Math.cos(X);Z=1-W;ba=C[0];da=C[1];ia=C[2];ka=C[3];sa=C[4];oa=C[5];ra=C[6];Ca=C[7];xa=C[8];Ba=C[9];Aa=C[10];ya=C[11];Ha=ha*ha*Z+W;Qa=z*ha*Z+aa*L;Ya=aa*ha*Z-z*L;Wa=ha*z*Z-aa*L;Ja=z*z*Z+W;Ka=aa*z*Z+ha*L;ja=ha*aa*Z+z*L;L=z*aa*Z-ha*L;W=aa*aa*Z+W;h[0]=ba*Ha+sa*Qa+xa*Ya;h[1]=da*Ha+oa*Qa+Ba*Ya;h[2]=ia*Ha+ra*Qa+
Aa*Ya;h[3]=ka*Ha+Ca*Qa+ya*Ya;h[4]=ba*Wa+sa*Ja+xa*Ka;h[5]=da*Wa+oa*Ja+Ba*Ka;h[6]=ia*Wa+ra*Ja+Aa*Ka;h[7]=ka*Wa+Ca*Ja+ya*Ka;h[8]=ba*ja+sa*L+xa*W;h[9]=da*ja+oa*L+Ba*W;h[10]=ia*ja+ra*L+Aa*W;h[11]=ka*ja+Ca*L+ya*W;C!==h&&(h[12]=C[12],h[13]=C[13],h[14]=C[14],h[15]=C[15]);return h}function a(h,C,X){const aa=Math.sin(X);X=Math.cos(X);const ha=C[4],z=C[5],G=C[6],L=C[7],W=C[8],Z=C[9],ba=C[10],da=C[11];C!==h&&(h[0]=C[0],h[1]=C[1],h[2]=C[2],h[3]=C[3],h[12]=C[12],h[13]=C[13],h[14]=C[14],h[15]=C[15]);h[4]=ha*X+W*
aa;h[5]=z*X+Z*aa;h[6]=G*X+ba*aa;h[7]=L*X+da*aa;h[8]=W*X-ha*aa;h[9]=Z*X-z*aa;h[10]=ba*X-G*aa;h[11]=da*X-L*aa;return h}function v(h,C,X){const aa=Math.sin(X);X=Math.cos(X);const ha=C[0],z=C[1],G=C[2],L=C[3],W=C[8],Z=C[9],ba=C[10],da=C[11];C!==h&&(h[4]=C[4],h[5]=C[5],h[6]=C[6],h[7]=C[7],h[12]=C[12],h[13]=C[13],h[14]=C[14],h[15]=C[15]);h[0]=ha*X-W*aa;h[1]=z*X-Z*aa;h[2]=G*X-ba*aa;h[3]=L*X-da*aa;h[8]=ha*aa+W*X;h[9]=z*aa+Z*X;h[10]=G*aa+ba*X;h[11]=L*aa+da*X;return h}function x(h,C,X){const aa=Math.sin(X);
X=Math.cos(X);const ha=C[0],z=C[1],G=C[2],L=C[3],W=C[4],Z=C[5],ba=C[6],da=C[7];C!==h&&(h[8]=C[8],h[9]=C[9],h[10]=C[10],h[11]=C[11],h[12]=C[12],h[13]=C[13],h[14]=C[14],h[15]=C[15]);h[0]=ha*X+W*aa;h[1]=z*X+Z*aa;h[2]=G*X+ba*aa;h[3]=L*X+da*aa;h[4]=W*X-ha*aa;h[5]=Z*X-z*aa;h[6]=ba*X-G*aa;h[7]=da*X-L*aa;return h}function D(h,C){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=C[0];h[13]=C[1];h[14]=C[2];h[15]=1;return h}function N(h,C){h[0]=C[0];h[1]=0;h[2]=0;h[3]=
0;h[4]=0;h[5]=C[1];h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=C[2];h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function d(h,C,X){if(0===C)return p(h);let aa=X[0],ha=X[1];X=X[2];let z=Math.sqrt(aa*aa+ha*ha+X*X),G=void 0,L=void 0,W=void 0;if(z<A.getEpsilon())return null;z=1/z;aa*=z;ha*=z;X*=z;G=Math.sin(C);L=Math.cos(C);W=1-L;h[0]=aa*aa*W+L;h[1]=ha*aa*W+X*G;h[2]=X*aa*W-ha*G;h[3]=0;h[4]=aa*ha*W-X*G;h[5]=ha*ha*W+L;h[6]=X*ha*W+aa*G;h[7]=0;h[8]=aa*X*W+ha*G;h[9]=ha*X*W-aa*G;h[10]=X*X*W+L;h[11]=0;h[12]=0;h[13]=
0;h[14]=0;h[15]=1;return h}function H(h,C){const X=Math.sin(C);C=Math.cos(C);h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=C;h[6]=X;h[7]=0;h[8]=0;h[9]=-X;h[10]=C;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function S(h,C){const X=Math.sin(C);C=Math.cos(C);h[0]=C;h[1]=0;h[2]=-X;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=X;h[9]=0;h[10]=C;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function J(h,C){const X=Math.sin(C);C=Math.cos(C);h[0]=C;h[1]=X;h[2]=0;h[3]=0;h[4]=-X;h[5]=C;h[6]=0;h[7]=0;h[8]=0;h[9]=
0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function R(h,C,X){var aa=C[0],ha=C[1],z=C[2],G=C[3],L=aa+aa,W=ha+ha;const Z=z+z;C=aa*L;const ba=aa*W;aa*=Z;const da=ha*W;ha*=Z;z*=Z;L*=G;W*=G;G*=Z;h[0]=1-(da+z);h[1]=ba+G;h[2]=aa-W;h[3]=0;h[4]=ba-G;h[5]=1-(C+z);h[6]=ha+L;h[7]=0;h[8]=aa+W;h[9]=ha-L;h[10]=1-(C+da);h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function O(h,C){const X=Va,aa=-C[0],ha=-C[1],z=-C[2],G=C[3],L=C[4],W=C[5],Z=C[6],ba=C[7],da=aa*aa+ha*ha+z*z+G*G;0<da?(X[0]=
2*(L*G+ba*aa+W*z-Z*ha)/da,X[1]=2*(W*G+ba*ha+Z*aa-L*z)/da,X[2]=2*(Z*G+ba*z+L*ha-W*aa)/da):(X[0]=2*(L*G+ba*aa+W*z-Z*ha),X[1]=2*(W*G+ba*ha+Z*aa-L*z),X[2]=2*(Z*G+ba*z+L*ha-W*aa));R(h,C,X);return h}function V(h,C){h[0]=C[12];h[1]=C[13];h[2]=C[14];return h}function m(h,C){const X=C[0],aa=C[1],ha=C[2],z=C[4],G=C[5],L=C[6],W=C[8],Z=C[9];C=C[10];h[0]=Math.sqrt(X*X+aa*aa+ha*ha);h[1]=Math.sqrt(z*z+G*G+L*L);h[2]=Math.sqrt(W*W+Z*Z+C*C);return h}function Q(h,C){const X=C[0]+C[5]+C[10];let aa=0;0<X?(aa=2*Math.sqrt(X+
1),h[3]=.25*aa,h[0]=(C[6]-C[9])/aa,h[1]=(C[8]-C[2])/aa,h[2]=(C[1]-C[4])/aa):C[0]>C[5]&&C[0]>C[10]?(aa=2*Math.sqrt(1+C[0]-C[5]-C[10]),h[3]=(C[6]-C[9])/aa,h[0]=.25*aa,h[1]=(C[1]+C[4])/aa,h[2]=(C[8]+C[2])/aa):C[5]>C[10]?(aa=2*Math.sqrt(1+C[5]-C[0]-C[10]),h[3]=(C[8]-C[2])/aa,h[0]=(C[1]+C[4])/aa,h[1]=.25*aa,h[2]=(C[6]+C[9])/aa):(aa=2*Math.sqrt(1+C[10]-C[0]-C[5]),h[3]=(C[1]-C[4])/aa,h[0]=(C[8]+C[2])/aa,h[1]=(C[6]+C[9])/aa,h[2]=.25*aa);return h}function k(h,C,X,aa){var ha=C[0],z=C[1],G=C[2],L=C[3],W=ha+
ha,Z=z+z,ba=G+G;C=ha*W;const da=ha*Z;ha*=ba;const ia=z*Z;z*=ba;G*=ba;W*=L;Z*=L;L*=ba;ba=aa[0];const ka=aa[1];aa=aa[2];h[0]=(1-(ia+G))*ba;h[1]=(da+L)*ba;h[2]=(ha-Z)*ba;h[3]=0;h[4]=(da-L)*ka;h[5]=(1-(C+G))*ka;h[6]=(z+W)*ka;h[7]=0;h[8]=(ha+Z)*aa;h[9]=(z-W)*aa;h[10]=(1-(C+ia))*aa;h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function u(h,C,X,aa,ha){var z=C[0],G=C[1],L=C[2],W=C[3],Z=z+z,ba=G+G,da=L+L;C=z*Z;var ia=z*ba,ka=z*da;z=G*ba;G*=da;var sa=L*da;L=W*Z;ba*=W;const oa=W*da;var ra=aa[0],
Ca=aa[1];da=aa[2];aa=ha[0];W=ha[1];ha=ha[2];Z=(1-(z+sa))*ra;const xa=(ia+oa)*ra;ra*=ka-ba;ia=(ia-oa)*Ca;sa=(1-(C+sa))*Ca;Ca*=G+L;ka=(ka+ba)*da;G=(G-L)*da;C=(1-(C+z))*da;h[0]=Z;h[1]=xa;h[2]=ra;h[3]=0;h[4]=ia;h[5]=sa;h[6]=Ca;h[7]=0;h[8]=ka;h[9]=G;h[10]=C;h[11]=0;h[12]=X[0]+aa-(Z*aa+ia*W+ka*ha);h[13]=X[1]+W-(xa*aa+sa*W+G*ha);h[14]=X[2]+ha-(ra*aa+Ca*W+C*ha);h[15]=1;return h}function K(h,C){var X=C[0],aa=C[1],ha=C[2];C=C[3];var z=X+X,G=aa+aa;const L=ha+ha;X*=z;const W=aa*z;aa*=G;const Z=ha*z,ba=ha*G;ha*=
L;z*=C;G*=C;C*=L;h[0]=1-aa-ha;h[1]=W+C;h[2]=Z-G;h[3]=0;h[4]=W-C;h[5]=1-X-ha;h[6]=ba+z;h[7]=0;h[8]=Z+G;h[9]=ba-z;h[10]=1-X-aa;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function I(h,C,X,aa,ha,z,G){const L=1/(X-C),W=1/(ha-aa),Z=1/(z-G);h[0]=2*z*L;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*z*W;h[6]=0;h[7]=0;h[8]=(X+C)*L;h[9]=(ha+aa)*W;h[10]=(G+z)*Z;h[11]=-1;h[12]=0;h[13]=0;h[14]=G*z*2*Z;h[15]=0;return h}function T(h,C,X,aa,ha){C=1/Math.tan(C/2);let z=void 0;h[0]=C/X;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=C;
h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[11]=-1;h[12]=0;h[13]=0;h[15]=0;null!=ha&&Infinity!==ha?(z=1/(aa-ha),h[10]=(ha+aa)*z,h[14]=2*ha*aa*z):(h[10]=-1,h[14]=-2*aa);return h}function Y(h,C,X,aa){const ha=Math.tan(C.upDegrees*Math.PI/180),z=Math.tan(C.downDegrees*Math.PI/180),G=Math.tan(C.leftDegrees*Math.PI/180);C=Math.tan(C.rightDegrees*Math.PI/180);const L=2/(G+C),W=2/(ha+z);h[0]=L;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=W;h[6]=0;h[7]=0;h[8]=-((G-C)*L*.5);h[9]=(ha-z)*W*.5;h[10]=aa/(X-aa);h[11]=-1;h[12]=0;h[13]=0;
h[14]=aa*X/(X-aa);h[15]=0;return h}function ea(h,C,X,aa,ha,z,G){const L=1/(C-X),W=1/(aa-ha),Z=1/(z-G);h[0]=-2*L;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*W;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=2*Z;h[11]=0;h[12]=(C+X)*L;h[13]=(ha+aa)*W;h[14]=(G+z)*Z;h[15]=1;return h}function la(h,C,X,aa){const ha=C[0],z=C[1];C=C[2];let G=ha-X[0],L=z-X[1];X=C-X[2];var W=A.getEpsilon();if(Math.abs(G)<W&&Math.abs(L)<W&&Math.abs(X)<W)p(h);else{var Z=1/Math.sqrt(G*G+L*L+X*X);G*=Z;L*=Z;X*=Z;Z=aa[0];var ba=aa[1];W=aa[2];aa=ba*X-W*
L;W=W*G-Z*X;ba=Z*L-ba*G;(Z=Math.sqrt(aa*aa+W*W+ba*ba))?(Z=1/Z,aa*=Z,W*=Z,ba*=Z):ba=W=aa=0;var da=L*ba-X*W,ia=X*aa-G*ba,ka=G*W-L*aa;(Z=Math.sqrt(da*da+ia*ia+ka*ka))?(Z=1/Z,da*=Z,ia*=Z,ka*=Z):ka=ia=da=0;h[0]=aa;h[1]=da;h[2]=G;h[3]=0;h[4]=W;h[5]=ia;h[6]=L;h[7]=0;h[8]=ba;h[9]=ka;h[10]=X;h[11]=0;h[12]=-(aa*ha+W*z+ba*C);h[13]=-(da*ha+ia*z+ka*C);h[14]=-(G*ha+L*z+X*C);h[15]=1}}function na(h,C,X,aa){const ha=C[0],z=C[1];C=C[2];var G=aa[0];const L=aa[1];var W=aa[2];aa=ha-X[0];let Z=z-X[1];X=C-X[2];let ba=aa*
aa+Z*Z+X*X;0<ba&&(ba=1/Math.sqrt(ba),aa*=ba,Z*=ba,X*=ba);let da=L*X-W*Z;W=W*aa-G*X;G=G*Z-L*aa;ba=da*da+W*W+G*G;0<ba&&(ba=1/Math.sqrt(ba),da*=ba,W*=ba,G*=ba);h[0]=da;h[1]=W;h[2]=G;h[3]=0;h[4]=Z*G-X*W;h[5]=X*da-aa*G;h[6]=aa*W-Z*da;h[7]=0;h[8]=aa;h[9]=Z;h[10]=X;h[11]=0;h[12]=ha;h[13]=z;h[14]=C;h[15]=1;return h}function ua(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}
function ta(h){return Math.sqrt(h[0]**2+h[1]**2+h[2]**2+h[3]**2+h[4]**2+h[5]**2+h[6]**2+h[7]**2+h[8]**2+h[9]**2+h[10]**2+h[11]**2+h[12]**2+h[13]**2+h[14]**2+h[15]**2)}function pa(h,C,X){h[0]=C[0]+X[0];h[1]=C[1]+X[1];h[2]=C[2]+X[2];h[3]=C[3]+X[3];h[4]=C[4]+X[4];h[5]=C[5]+X[5];h[6]=C[6]+X[6];h[7]=C[7]+X[7];h[8]=C[8]+X[8];h[9]=C[9]+X[9];h[10]=C[10]+X[10];h[11]=C[11]+X[11];h[12]=C[12]+X[12];h[13]=C[13]+X[13];h[14]=C[14]+X[14];h[15]=C[15]+X[15];return h}function va(h,C,X){h[0]=C[0]-X[0];h[1]=C[1]-X[1];
h[2]=C[2]-X[2];h[3]=C[3]-X[3];h[4]=C[4]-X[4];h[5]=C[5]-X[5];h[6]=C[6]-X[6];h[7]=C[7]-X[7];h[8]=C[8]-X[8];h[9]=C[9]-X[9];h[10]=C[10]-X[10];h[11]=C[11]-X[11];h[12]=C[12]-X[12];h[13]=C[13]-X[13];h[14]=C[14]-X[14];h[15]=C[15]-X[15];return h}function wa(h,C,X){h[0]=C[0]*X;h[1]=C[1]*X;h[2]=C[2]*X;h[3]=C[3]*X;h[4]=C[4]*X;h[5]=C[5]*X;h[6]=C[6]*X;h[7]=C[7]*X;h[8]=C[8]*X;h[9]=C[9]*X;h[10]=C[10]*X;h[11]=C[11]*X;h[12]=C[12]*X;h[13]=C[13]*X;h[14]=C[14]*X;h[15]=C[15]*X;return h}function Da(h,C,X,aa){h[0]=C[0]+
X[0]*aa;h[1]=C[1]+X[1]*aa;h[2]=C[2]+X[2]*aa;h[3]=C[3]+X[3]*aa;h[4]=C[4]+X[4]*aa;h[5]=C[5]+X[5]*aa;h[6]=C[6]+X[6]*aa;h[7]=C[7]+X[7]*aa;h[8]=C[8]+X[8]*aa;h[9]=C[9]+X[9]*aa;h[10]=C[10]+X[10]*aa;h[11]=C[11]+X[11]*aa;h[12]=C[12]+X[12]*aa;h[13]=C[13]+X[13]*aa;h[14]=C[14]+X[14]*aa;h[15]=C[15]+X[15]*aa;return h}function Ia(h,C){return h[0]===C[0]&&h[1]===C[1]&&h[2]===C[2]&&h[3]===C[3]&&h[4]===C[4]&&h[5]===C[5]&&h[6]===C[6]&&h[7]===C[7]&&h[8]===C[8]&&h[9]===C[9]&&h[10]===C[10]&&h[11]===C[11]&&h[12]===C[12]&&
h[13]===C[13]&&h[14]===C[14]&&h[15]===C[15]}function Pa(h,C){if(h===C)return!0;const X=h[0],aa=h[1],ha=h[2],z=h[3],G=h[4],L=h[5],W=h[6],Z=h[7],ba=h[8],da=h[9],ia=h[10],ka=h[11],sa=h[12],oa=h[13],ra=h[14];h=h[15];const Ca=C[0],xa=C[1],Ba=C[2],Aa=C[3],ya=C[4],Ha=C[5],Qa=C[6],Ya=C[7],Wa=C[8],Ja=C[9],Ka=C[10],ja=C[11],Ra=C[12],Nb=C[13],nb=C[14];C=C[15];const b=A.getEpsilon();return Math.abs(X-Ca)<=b*Math.max(1,Math.abs(X),Math.abs(Ca))&&Math.abs(aa-xa)<=b*Math.max(1,Math.abs(aa),Math.abs(xa))&&Math.abs(ha-
Ba)<=b*Math.max(1,Math.abs(ha),Math.abs(Ba))&&Math.abs(z-Aa)<=b*Math.max(1,Math.abs(z),Math.abs(Aa))&&Math.abs(G-ya)<=b*Math.max(1,Math.abs(G),Math.abs(ya))&&Math.abs(L-Ha)<=b*Math.max(1,Math.abs(L),Math.abs(Ha))&&Math.abs(W-Qa)<=b*Math.max(1,Math.abs(W),Math.abs(Qa))&&Math.abs(Z-Ya)<=b*Math.max(1,Math.abs(Z),Math.abs(Ya))&&Math.abs(ba-Wa)<=b*Math.max(1,Math.abs(ba),Math.abs(Wa))&&Math.abs(da-Ja)<=b*Math.max(1,Math.abs(da),Math.abs(Ja))&&Math.abs(ia-Ka)<=b*Math.max(1,Math.abs(ia),Math.abs(Ka))&&Math.abs(ka-
ja)<=b*Math.max(1,Math.abs(ka),Math.abs(ja))&&Math.abs(sa-Ra)<=b*Math.max(1,Math.abs(sa),Math.abs(Ra))&&Math.abs(oa-Nb)<=b*Math.max(1,Math.abs(oa),Math.abs(Nb))&&Math.abs(ra-nb)<=b*Math.max(1,Math.abs(ra),Math.abs(nb))&&Math.abs(h-C)<=b*Math.max(1,Math.abs(h),Math.abs(C))}function Na(h){const C=A.getEpsilon(),X=h[0],aa=h[1],ha=h[2],z=h[4],G=h[5],L=h[6],W=h[8],Z=h[9];h=h[10];return Math.abs(1-(X*X+z*z+W*W))<=C&&Math.abs(1-(aa*aa+G*G+Z*Z))<=C&&Math.abs(1-(ha*ha+L*L+h*h))<=C}function Sa(h){return 1===
h[0]&&0===h[1]&&0===h[2]&&0===h[4]&&1===h[5]&&0===h[6]&&0===h[8]&&0===h[9]&&1===h[10]}const Va=e.create();e=Object.freeze(Object.defineProperty({__proto__:null,add:pa,adjoint:r,copy:y,determinant:q,equals:Pa,exactEquals:Ia,frob:ta,fromQuat:K,fromQuat2:O,fromRotation:d,fromRotationTranslation:R,fromRotationTranslationScale:k,fromRotationTranslationScaleOrigin:u,fromScaling:N,fromTranslation:D,fromXRotation:H,fromYRotation:S,fromZRotation:J,frustum:I,getRotation:Q,getScaling:m,getTranslation:V,hasIdentityRotation:Sa,
identity:p,invert:f,invertOrIdentity:w,isOrthoNormal:Na,lookAt:la,mul:F,multiply:F,multiplyScalar:wa,multiplyScalarAndAdd:Da,ortho:ea,perspective:T,perspectiveFromFieldOfView:Y,rotate:n,rotateX:a,rotateY:v,rotateZ:x,scale:t,set:M,str:ua,sub:va,subtract:va,targetTo:na,translate:E,transpose:g},Symbol.toStringTag,{value:"Module"}));c.add=pa;c.adjoint=r;c.copy=y;c.determinant=q;c.equals=Pa;c.exactEquals=Ia;c.frob=ta;c.fromQuat=K;c.fromQuat2=O;c.fromRotation=d;c.fromRotationTranslation=R;c.fromRotationTranslationScale=
k;c.fromRotationTranslationScaleOrigin=u;c.fromScaling=N;c.fromTranslation=D;c.fromXRotation=H;c.fromYRotation=S;c.fromZRotation=J;c.frustum=I;c.getRotation=Q;c.getScaling=m;c.getTranslation=V;c.hasIdentityRotation=Sa;c.identity=p;c.invert=f;c.invertOrIdentity=w;c.isOrthoNormal=Na;c.lookAt=la;c.mat4=e;c.mul=F;c.multiply=F;c.multiplyScalar=wa;c.multiplyScalarAndAdd=Da;c.ortho=ea;c.perspective=T;c.perspectiveFromFieldOfView=Y;c.rotate=n;c.rotateX=a;c.rotateY=v;c.rotateZ=x;c.scale=t;c.set=M;c.str=ua;
c.sub=va;c.subtract=va;c.targetTo=na;c.translate=E;c.transpose=g})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(c,e,A){function y(k){return null==k||"string"===typeof k&&!k?"\x3cNull\x3e":k}function M(k){const u=null!=k.minValue||null!=k.maxValue,K=!!k.sqlExpression&&k.supportsSQLExpression;return!(null!=k.normalizationField||null!=k.normalizationType)&&!u&&!K}function p(k){const {values:u,useSampleStdDev:K,
supportsNullCount:I}=k;var T=Number.POSITIVE_INFINITY;let Y=Number.NEGATIVE_INFINITY,ea=null,la=null;var na=null;let ua=null,ta=0;const pa=null==k.minValue?-Infinity:k.minValue,va=null==k.maxValue?Infinity:k.maxValue;for(const wa of u)Number.isFinite(wa)?wa>=pa&&wa<=va&&(ea=null===ea?wa:ea+wa,T=Math.min(T,wa),Y=Math.max(Y,wa),ta++):"string"===typeof wa&&ta++;if(ta&&null!=ea){la=ea/ta;na=0;for(const wa of u)Number.isFinite(wa)&&wa>=pa&&wa<=va&&(na+=(wa-la)**2);ua=K?1<ta?na/(ta-1):0:0<ta?na/ta:0;na=
Math.sqrt(ua)}else Y=T=null;T={avg:la,count:ta,max:Y,min:T,stddev:na,sum:ea,variance:ua};I&&(T.nullcount=u.length-ta);k.percentileParams&&(T.median=g(u,k.percentileParams));return T}function g(k,u){const {fieldType:K,value:I,orderBy:T,isDiscrete:Y}=u,ea=w(K,"desc"===T);k=[...k].filter(ta=>null!=ta).sort((ta,pa)=>ea(ta,pa));if(0===k.length)return null;if(0>=I)return k[0];if(1<=I)return k[k.length-1];var la=(k.length-1)*I,na=Math.floor(la);u=na+1;la%=1;na=k[na];const ua=k[u];return u>=k.length||Y||
"string"===typeof na||"string"===typeof ua?na:na*(1-la)+ua*la}function w(k,u){if(k){if(D.has(k))return u?m:Q;if(N.has(k))return f(u,!1);if("esriFieldTypeTimestampOffset"===k)return u?R:J;const Y=f(u,!0);if("esriFieldTypeString"===k)return Y;if("esriFieldTypeGUID"===k||"esriFieldTypeGlobalID"===k)return(ea,la)=>Y(r(ea),r(la))}const K=u?1:-1,I=u?m:Q,T=f(u,!0);return(Y,ea)=>"number"===typeof Y&&"number"===typeof ea?I(Y,ea):"string"===typeof Y&&"string"===typeof ea?T(Y,ea):K}function f(k,u){if(!u)return k?
V:O;const K=k?H:S;return k?(I,T)=>{const Y=K(I,T);if(null!=Y)return Y;I=I.toUpperCase();T=T.toUpperCase();return I>T?-1:I<T?1:0}:(I,T)=>{const Y=K(I,T);if(null!=Y)return Y;I=I.toUpperCase();T=T.toUpperCase();return I<T?-1:I>T?1:0}}function r(k){return k.substr(24,12)+k.substr(19,4)+k.substr(16,2)+k.substr(14,2)+k.substr(11,2)+k.substr(9,2)+k.substr(6,2)+k.substr(4,2)+k.substr(2,2)+k.substr(0,2)}function q(k){return"coded-value"!==k?.type?[]:k.codedValues.map(u=>u.code)}function F(k,u){const K=t({field:u.field,
normalizationType:u.normalizationType,normalizationField:u.normalizationField,classificationMethod:u.classificationMethod,standardDeviationInterval:u.standardDeviationInterval,breakCount:u.numClasses||5});k=E(k,u.minValue,u.maxValue);return A.createGenerateRendererClassBreaks({definition:K,values:k,normalizationTotal:u.normalizationTotal})}function E(k,u,K){const I=null==u?-Infinity:u,T=null==K?Infinity:K;return k.filter(Y=>Number.isFinite(Y)&&Y>=I&&Y<=T)}function t(k){const {breakCount:u,field:K,
normalizationField:I,normalizationType:T}=k,Y=k.classificationMethod||"equal-interval";return new e({breakCount:u,classificationField:K,classificationMethod:Y,normalizationField:"field"===T?I:void 0,normalizationType:T,standardDeviationInterval:"standard-deviation"===Y?k.standardDeviationInterval||1:void 0})}function n(k,u){const {field:K,classificationMethod:I,standardDeviationInterval:T,normalizationType:Y,normalizationField:ea,normalizationTotal:la,minValue:na,maxValue:ua}=u,ta=u.numBins||10;let pa=
u=null,va=null;I&&"equal-interval"!==I||Y?({classBreaks:k}=F(k,{field:K,normalizationType:Y,normalizationField:ea,normalizationTotal:la,classificationMethod:I,standardDeviationInterval:T,minValue:na,maxValue:ua,numClasses:ta}),u=k[0].minValue,pa=k[k.length-1].maxValue,va=k.map(wa=>[wa.minValue,wa.maxValue])):(null!=na&&null!=ua?(u=na,pa=ua):(k=p({values:k,minValue:na,maxValue:ua,useSampleStdDev:!Y,supportsNullCount:M({normalizationType:Y,normalizationField:ea,minValue:na,maxValue:ua})}),u=k.min??
null,pa=k.max??null),va=v(u??0,pa??0,ta));return{min:u,max:pa,intervals:va}}function a(k,u){let K=-1;for(let I=k.length-1;0<=I;I--)if(u>=k[I][0]){K=I;break}return K}function v(k,u,K){const I=(u-k)/K,T=[];let Y;for(let ea=1;ea<=K;ea++)Y=k+I,Y=Number(Y.toFixed(16)),T.push([k,ea===K?u:Y]),k=Y;return T}const x=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,D=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),
N=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),d="min max avg stddev count sum variance nullcount median".split(" "),H=(k,u)=>null==k?null==u?0:1:null==u?-1:null,S=(k,u)=>null==k?null==u?0:-1:null==u?1:null,J=(k,u)=>S(k,u)??(k===u?0:(new Date(k)).getTime()-(new Date(u)).getTime()),R=(k,u)=>H(k,u)??(k===u?0:(new Date(u)).getTime()-(new Date(k)).getTime()),O=(k,u)=>S(k,u)??(k===u?0:k<u?-1:1),V=(k,u)=>H(k,u)??(k===u?0:k<u?1:-1),m=(k,u)=>H(k,u)??u-k,Q=(k,u)=>S(k,u)??k-u;c.calculateClassBreaks=
F;c.calculateHistogram=function(k,u){var K=n(k,u);if(null==K.min&&null==K.max)return{bins:[],minValue:K.min,maxValue:K.max,normalizationTotal:u.normalizationTotal};const I=K.intervals,T=K.min??0;K=K.max??0;const Y=I.map((ea,la)=>({minValue:I[la][0],maxValue:I[la][1],count:0}));for(const ea of k)null!=ea&&ea>=T&&ea<=K&&(k=a(I,ea),-1<k&&Y[k].count++);return{bins:Y,minValue:T,maxValue:K,normalizationTotal:u.normalizationTotal}};c.calculatePercentile=g;c.calculateStatistics=p;c.calculateStringStatistics=
function(k){const u=k.returnDistinct?[...(new Set(k.values))]:k.values;var K=u.filter(T=>null!=T).sort();const I=K.length;K={count:I,min:K[0],max:K[I-1]};k.supportsNullCount&&(K.nullcount=u.length-I);k.percentileParams&&(K.median=g(u,k.percentileParams));return K};c.calculateUniqueValuesCount=function(k){const u={};for(let K of k){if(null==K||"string"===typeof K&&""===K.trim())K=null;null==u[K]?u[K]={count:1,data:K}:u[K].count++}return{count:u}};c.createClassBreaksDefinition=t;c.createUVResult=function(k,
u,K,I){k=k.count;const T=[];if(K&&u){K=[];var Y=q(u[0]);for(const ea of Y)if(u[1]){Y=q(u[1]);for(const la of Y)if(u[2]){Y=q(u[2]);for(const na of Y)K.push(`${y(ea)}${I}${y(la)}${I}${y(na)}`)}else K.push(`${y(ea)}${I}${y(la)}`)}else K.push(ea);for(const ea of K)k.hasOwnProperty(ea)||(k[ea]={data:ea,count:0})}for(const ea in k)u=k[ea],T.push({value:u.data,count:u.count,label:u.label});return{uniqueValueInfos:T}};c.getAttributeComparator=w;c.getEqualIntervalBins=v;c.getNormalizedValue=function(k,u,K,
I){let T=null;switch(u){case "log":0!==k&&(T=Math.log(k)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(I)&&0!==I&&(T=k/I*100);break;case "field":Number.isFinite(K)&&0!==K&&(T=k/K);break;case "natural-log":0<k&&(T=Math.log(k));break;case "square-root":0<k&&(T=k**.5)}return T};c.isNullCountSupported=M;c.processNullValue=y;c.processSummaryStatisticsResult=function(k,u){let K;for(K in k)d.includes(K)&&(Number.isFinite(k[K])||(k[K]=null));if(!u)return k;["avg","stddev","variance"].forEach(I=>
{null!=k[I]&&(k[I]=Math.ceil(k[I]??0))});return k};c.resolveCBResult=function(k,u){let K=k.classBreaks;const I=K[0]?.minValue,T=K[K.length-1]?.maxValue,Y="standard-deviation"===u;K=K.map(ea=>{const la=ea.label;ea={minValue:ea.minValue,maxValue:ea.maxValue,label:la};if(Y&&la){const na=la.match(x)?.map(ua=>+ua.trim())??[];2===na.length?(ea.minStdDev=na[0],ea.maxStdDev=na[1],0>na[0]&&0<na[1]&&(ea.hasAvg=!0)):1===na.length&&(la.includes("\x3c")?(ea.minStdDev=null,ea.maxStdDev=na[0]):la.includes("\x3e")&&
(ea.minStdDev=na[0],ea.maxStdDev=null))}return ea});return{minValue:I,maxValue:T,classBreakInfos:K,normalizationTotal:k.normalizationTotal}};c.statisticTypes=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,e,A,y,M,p,g,w,f){M=new e.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});e=new e.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});A=class extends A.JSONSupport{constructor(r){super(r);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(r){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",r)}set definedInterval(r){"defined-interval"===this.classificationMethod&&this._set("definedInterval",r)}};c.__decorate([w.enumeration({classBreaksDef:"class-breaks-definition"})],A.prototype,"type",void 0);c.__decorate([y.property({json:{write:!0}})],A.prototype,
"breakCount",void 0);c.__decorate([y.property({json:{write:!0}})],A.prototype,"classificationField",void 0);c.__decorate([y.property({type:String,json:{read:M.read,write:M.write}})],A.prototype,"classificationMethod",void 0);c.__decorate([y.property({json:{write:!0}})],A.prototype,"normalizationField",void 0);c.__decorate([y.property({json:{read:e.read,write:e.write}})],A.prototype,"normalizationType",void 0);c.__decorate([y.property({value:null,json:{write:!0}})],A.prototype,"standardDeviationInterval",
null);c.__decorate([y.property({value:null,json:{write:!0}})],A.prototype,"definedInterval",null);return A=c.__decorate([f.subclass("esri.rest.support.ClassBreaksDefinition")],A)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(c,e,A){c.enumeration=function(y,M={}){y=y instanceof e.JSONMap?y:new e.JSONMap(y,M);y={type:M?.ignoreUnknown??!0?y.apiValues:String,json:{type:y.jsonValues,read:M?.readOnly?!1:{reader:y.read},write:{writer:y.write}}};
void 0!==M?.readOnly&&(y.readOnly=!!M.readOnly);void 0!==M?.default&&(y.json.default=M.default);void 0!==M?.name&&(y.json.name=M.name);void 0!==M?.nonNullable&&(y.nonNullable=M.nonNullable);return A.property(y)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(c,e){function A(E){var t=E.definition;const {classificationMethod:n,normalizationType:a,definedInterval:v}=t;t=t.breakCount??
1;const x=[];var D=E.values;if(0===D.length)return[];D=D.sort((R,O)=>R-O);var N=D[0],d=D[D.length-1];if("equal-interval"===n)if(D.length>=t){D=(d-N)/t;E=N;for(var H=1;H<t;H++){var S=Number((N+H*D).toFixed(6));x.push({minValue:E,maxValue:S,label:y(E,S,a)});E=S}x.push({minValue:E,maxValue:d,label:y(E,d,a)})}else D.forEach(R=>{x.push({minValue:R,maxValue:R,label:y(R,R,a)})});else if("natural-breaks"===n){D=M(D);E=p(D.uniqueValues,E.valueFrequency||D.valueFrequency,t);for(H=1;H<t;H++)D.uniqueValues.length>
H&&(S=Number(D.uniqueValues[E[H]].toFixed(6)),x.push({minValue:N,maxValue:S,label:y(N,S,a)}),N=S);x.push({minValue:N,maxValue:d,label:y(N,d,a)})}else if("quantile"===n)if(D.length>=t&&N!==d){E=Math.ceil(D.length/t);H=0;for(S=1;S<t;S++){var J=E+H-1;J>D.length&&(J=D.length-1);0>J&&(J=0);x.push({minValue:N,maxValue:D[J],label:y(N,D[J],a)});N=D[J];H+=E;E=Math.ceil((D.length-H)/(t-S))}x.push({minValue:N,maxValue:d,label:y(N,d,a)})}else for(t=-1,d=0;d<D.length;d++)N=D[d],N!==t&&(t=N,x.push({minValue:t,
maxValue:N,label:y(t,N,a)}),t=N);else if("standard-deviation"===n)if(E=f(D),H=r(D,E),0===H)x.push({minValue:D[0],maxValue:D[0],label:y(D[0],D[0],a)});else{D=w(N,d,t,E,H)*H;H=0;for(S=t;1<=S;S--)J=Number((E-(S-.5)*D).toFixed(6)),x.push({minValue:N,maxValue:J,label:y(N,J,a)}),N=J,H++;S=Number((E+.5*D).toFixed(6));x.push({minValue:N,maxValue:S,label:y(N,S,a)});N=S;H++;for(J=1;J<=t;J++)S=H===2*t?d:Number((E+(J+.5)*D).toFixed(6)),x.push({minValue:N,maxValue:S,label:y(N,S,a)}),N=S,H++}else if("defined-interval"===
n){if(!v)return x;t=D[0];d=D[D.length-1];D=Math.ceil((d-t)/v);N=t;for(E=1;E<D;E++)H=Number((t+E*v).toFixed(6)),x.push({minValue:N,maxValue:H,label:y(N,H,a)}),N=H;x.push({minValue:N,maxValue:d,label:y(N,d,a)})}return x}function y(E,t,n){let a=null;return a=E===t?n&&"percent-of-total"===n?E+"%":E.toString():n&&"percent-of-total"===n?E+"% - "+t+"%":E+" - "+t}function M(E){const t=[],n=[];let a=Number.MIN_VALUE,v=1,x=-1;for(let D=0;D<E.length;D++){const N=E[D];N===a?(v++,n[x]=v):null!==N&&(t.push(N),
a=N,v=1,n.push(v),x++)}return{uniqueValues:t,valueFrequency:n}}function p(E,t,n){var a=E.length;const v=[];n>a&&(n=a);for(var x=0;x<n;x++)v.push(Math.round(x*a/n-1));v.push(a-1);x=g(v,E,t,n);a=x.mean;x=x.sdcm;var D=n,N=0,d=0;let H=0,S=0,J=!0;for(let O=0;2>O&&J;O++){0===O&&(J=!1);for(var R=0;R<D-1;R++)for(;v[R+1]+1!==v[R+2];)if(v[R+1]+=1,N=q(R,v,E,t),H=N.sbMean,N=N.sbSdcm,d=q(R+1,v,E,t),S=d.sbMean,d=d.sbSdcm,N+d<x[R]+x[R+1])x[R]=N,x[R+1]=d,a[R]=H,a[R+1]=S,J=!0;else{--v[R+1];break}for(R=D-1;0<R;R--)for(;v[R]!==
v[R-1]+1;)if(--v[R],N=q(R-1,v,E,t),H=N.sbMean,N=N.sbSdcm,d=q(R,v,E,t),S=d.sbMean,d=d.sbSdcm,N+d<x[R-1]+x[R])x[R-1]=N,x[R]=d,a[R-1]=H,a[R]=S,J=!0;else{v[R]+=1;break}}J&&(x=g(v,E,t,n));return v}function g(E,t,n,a){let v=[];var x=[],D=[];let N=0;const d=[],H=[];for(var S=0;S<a;S++){var J=q(S,E,t,n);d.push(J.sbMean);H.push(J.sbSdcm);N+=H[S]}J=N;for(S=!0;S||N<J;){S=!1;v=[];for(x=0;x<a;x++)v.push(E[x]);for(D=0;D<a;D++)for(J=E[D]+1;J<=E[D+1];J++)if(x=t[J],0<D&&J!==E[D+1]&&Math.abs(x-d[D])>Math.abs(x-d[D-
1]))E[D]=J;else if(D<a-1&&E[D]!==J-1&&Math.abs(x-d[D])>Math.abs(x-d[D+1])){E[D+1]=J-1;break}J=N;N=0;x=[];D=[];for(let R=0;R<a;R++){x.push(d[R]);D.push(H[R]);const O=q(R,E,t,n);d[R]=O.sbMean;H[R]=O.sbSdcm;N+=H[R]}}if(N>J){for(t=0;t<a;t++)E[t]=v[t],d[t]=x[t],H[t]=D[t];N=J}return{mean:d,sdcm:H}}function w(E,t,n,a,v){E=Math.max(a-E,t-a)/v/n;return 1<=E?1:.5<=E?.5:.25}function f(E){let t=0;for(let n=0;n<E.length;n++)t+=E[n];return t/=E.length}function r(E,t){let n=0;for(let a=0;a<E.length;a++){const v=
E[a];n+=(v-t)*(v-t)}n/=E.length;return Math.sqrt(n)}function q(E,t,n,a){var v=0,x=0;for(var D=t[E]+1;D<=t[E+1];D++){const N=a[D];v+=n[D]*N;x+=N}0>=x&&F.warn("Exception in Natural Breaks calculation");v/=x;x=0;for(D=t[E]+1;D<=t[E+1];D++)x+=a[D]*(n[D]-v)**2;return{sbMean:v,sbSdcm:x}}const F=e.getLogger("esri.rest.support.generateRendererUtils");c.createGenerateRendererClassBreaks=function(E){const {normalizationTotal:t}=E;return{classBreaks:A(E),normalizationTotal:t}};c.createGenerateRendererUniqueValues=
function(E){E=M(E);const t=[],n=E.uniqueValues.length;for(let a=0;a<n;a++){const v=E.uniqueValues[a];t.push({value:v,count:E.valueFrequency[a],label:v.toString()})}return{uniqueValues:t}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(c){c.makeEdgeCandidate=function(e,A,y,M,p,g=!1){return{objectId:e,target:A,distance:y,type:"edge",start:M,end:p,draped:g}};c.makeVertexCandidate=function(e,A,y){return{objectId:e,
target:A,distance:y,type:"vertex"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(c,e,A,y,M,p,g,w,f,r){async function q(v,x,D){if(!v)return null;
var {where:N}=v;v.where=N=N?.trim();if(!N||/^1 *= *1$/.test(N)||x&&x===N)v.where=null;if(!v.geometry)return v;x=await E(v);v.distance=0;v.units=null;"esriSpatialRelEnvelopeIntersects"===v.spatialRel&&({spatialReference:N}=v.geometry,x=p.getGeometryExtent(x),x.spatialReference=N);if(x){await r.checkProjectionSupport(x.spatialReference,D);N=x.spatialReference;x=F(x,D)&&g.isExtent(x)?{spatialReference:N,rings:[[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]]}:x;N=(await w.normalizeCentralMeridian(g.fromJSON(x)))[0];
if(null==N)throw a;const d="quantizationParameters"in v&&v.quantizationParameters?.tolerance||"maxAllowableOffset"in v&&v.maxAllowableOffset||0;x=d&&F(x,D)?{densificationStep:8*d}:void 0;N=N.toJSON();x=r.project(N,N.spatialReference,D,x);if(!x)throw a;x.spatialReference=D;v.geometry=x}return v}function F(v,x){if(!v)return!1;const D=v.spatialReference;return(g.isExtent(v)||g.isPolygon(v)||g.isPolyline(v))&&!f.equals(D,x)&&!M.canProjectWithoutEngine(D,x)}async function E(v){const {distance:x,units:D}=
v,N=v.geometry;if(null==x||"vertexAttributes"in N)return N;var d=N.spatialReference;v=D?n.fromJSON(D):y.getUnitString(d);d=d&&(f.isGeographic(d)||f.isWebMercator(d))?N:await r.checkProjectionSupport(d,f.WGS84).then(()=>r.project(N,f.WGS84));return(await t())(d.spatialReference,d,x,v)}async function t(){return(await new Promise((v,x)=>c(["../../../geometry/geometryEngineJSON"],v,x))).geodesicBuffer}const n=new A.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),a=Object.freeze({});e.normalizeQuery=async function(v,x,D){const {outFields:N,orderByFields:d,groupByFieldsForStatistics:H,outStatistics:S}=v;if(N)for(var J=0;J<N.length;J++)N[J]=N[J].trim();if(d)for(J=0;J<d.length;J++)d[J]=d[J].trim();if(H)for(J=0;J<H.length;J++)H[J]=H[J].trim();if(S)for(J=0;J<S.length;J++)S[J].onStatisticField&&(S[J].onStatisticField=S[J].onStatisticField.trim());
v.geometry&&!v.outSR&&(v.outSR=v.geometry.spatialReference);return q(v,x,D)};e.normalizeQueryLike=q;e.queryEngineEmptyResult=a;e.unitsKebabDict=n;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(c,e,A,y,M,p){function g(F,E,t){const {outFields:n,orderByFields:a,returnDistinctValues:v,
outStatistics:x}=t,D=x?x.map(N=>N.outStatisticFieldName&&N.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(a&&0<a.length){const N=a.map(d=>{const H=d.toLowerCase();return H.includes(" asc")?H.split(" asc")[0]:H.includes(" desc")?H.split(" desc")[0]:d}).filter(d=>!D.includes(d));A.validateFields(F,E,N,{expressionName:"orderByFields",query:t})}if(n&&0<n.length)A.validateFields(F,E,n,{expressionName:"outFields",query:t});else if(v)throw new e("unsupported-query","outFields should be specified for returnDistinctValues",
{query:t});A.validateWhere(F,E,t.where,t)}function w(F,E,t){const {outStatistics:n,groupByFieldsForStatistics:a,having:v}=t;var x=a?.length,D=n?.length;if(v){if(!x||!D)throw new e("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});A.validateHaving(F,E,v,n,t)}if(D&&r(n)){D=n.map(N=>N.onStatisticField).filter(Boolean);A.validateFields(F,E,D,{expressionName:"onStatisticFields",query:t});x&&A.validateFields(F,E,a,{expressionName:"groupByFieldsForStatistics",
query:t});for(const N of n){const {onStatisticField:d,statisticType:H}=N;if(("percentile_disc"===H||"percentile_cont"===H)&&"statisticParameters"in N){if({statisticParameters:x}=N,!x)throw new e("unsupported-query","statisticParameters should be set for percentile type",{definition:N,query:t});}else F.get(d)&&"count"!==H&&"min"!==H&&"max"!==H&&A.validateFields(F,E,[d],{expressionName:`outStatistics with '${H}' statistic type`,allowedFieldTypes:q,query:t})}}}async function f(F,E,t,n){var a=[];t.valueExpression&&
({arcadeUtils:a}=await p.loadArcade(),a=a.extractFieldNames(t.valueExpression));t.field&&a.push(t.field);t.field2&&a.push(t.field2);t.field3&&a.push(t.field3);t.normalizationField&&a.push(t.normalizationField);if(!a.length&&!t.valueExpression)throw new e("unsupported-query","field or valueExpression is required",{params:t});A.validateFields(F,E,a,{expressionName:"statistics",query:n})}function r(F){return null!=F&&F.every(E=>"exceedslimit"!==E.statisticType)}const q=new Set([...A.numericFieldTypes,
...A.allDateAndTimeFieldTypes]);c.validateQuery=async function(F,{fieldsIndex:E,geometryType:t,spatialReference:n,availableFields:a}){if(0>(F.distance??0)||null!=F.geometryPrecision||F.multipatchOption&&"xyFootprint"!==F.multipatchOption||F.pixelSize||F.relationParam||F.text)throw new e("unsupported-query","Unsupported query options",{query:F});g(E,a,F);w(E,a,F);return Promise.all([M.checkSpatialQuerySupport(F,t,n),y.checkProjectionSupport(n,F.outSR)]).then(()=>F)};c.validateStatisticsQuery=async function(F,
E,{fieldsIndex:t,geometryType:n,spatialReference:a,availableFields:v}){if(0>(F.distance??0)||null!=F.geometryPrecision||F.multipatchOption||F.pixelSize||F.relationParam||F.text||F.outStatistics||F.groupByFieldsForStatistics||F.having||F.orderByFields)throw new e("unsupported-query","Unsupported query options",{query:F});g(t,v,F);return Promise.all([f(t,v,E,F),M.checkSpatialQuerySupport(F,n,a),y.checkProjectionSupport(a,F.outSR)]).then(()=>F)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(c,e,A,y,M,p,g,w,f,r,q,F){function E(){return new Promise((x,D)=>c(["../../../geometry/geometryEngineJSON"],x,D))}const t={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var n={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},a={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},v={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};e.canQueryWithRBush=function(x){if(p.isExtent(x))return!0;if(p.isPolygon(x)){for(const D of x.rings)if(5!==D.length||D[0][0]!==D[1][0]||D[0][0]!==D[4][0]||D[2][0]!==D[3][0]||D[0][1]!==D[3][1]||D[0][1]!==
D[4][1]||D[1][1]!==D[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=async function(x,D,N){const {spatialRel:d,geometry:H}=x;if(H){if(null==d||!0!==n[d])throw new A("unsupported-query","Unsupported query spatial relationship",{query:x});if(g.isValid(H.spatialReference)&&g.isValid(N)){if(null==H||!0!==a[p.getJsonType(H)])throw new A("unsupported-query","Unsupported query geometry type",{query:x});if(null==D||!0!==v[D])throw new A("unsupported-query","Unsupported layer geometry type",{query:x});
if(x.outSR)return F.checkProjectionSupport(x.geometry?.spatialReference,x.outSR)}}};e.getSpatialQueryOperator=function(x,D,N,d,H){if(p.isPolygon(D)&&"esriGeometryPoint"===N&&("esriSpatialRelIntersects"===x||"esriSpatialRelContains"===x)){const S=f.convertFromPolygon(new r,D,!1,!1);return Promise.resolve(J=>w.polygonContainsPoint(S,!1,!1,J))}if(p.isPolygon(D)&&"esriGeometryMultipoint"===N){const S=f.convertFromPolygon(new r,D,!1,!1);if("esriSpatialRelContains"===x)return Promise.resolve(J=>w.polygonContainsMultipoint(S,
!1,!1,J,d,H))}if(p.isExtent(D)&&"esriGeometryPoint"===N&&("esriSpatialRelIntersects"===x||"esriSpatialRelContains"===x))return Promise.resolve(S=>y.extentContainsPoint(D,q.getGeometry(N,d,H,S)));if(p.isExtent(D)&&"esriGeometryMultipoint"===N&&"esriSpatialRelContains"===x)return Promise.resolve(S=>y.extentContainsMultipoint(D,q.getGeometry(N,d,H,S)));if(p.isExtent(D)&&"esriSpatialRelIntersects"===x){const S=M.getExtentIntersector(N);return Promise.resolve(J=>S(D,q.getGeometry(N,d,H,J)))}return E().then(S=>
{const J=S[t[x]].bind(null,D.spatialReference,D);return R=>J(q.getGeometry(N,d,H,R))})};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(c,e){c.extentIntersectsExtent=e.extentIntersectsExtent;c.extentIntersectsMultipoint=e.extentIntersectsMultipoint;c.extentIntersectsPoint=e.extentIntersectsPoint;c.extentIntersectsPolygon=e.extentIntersectsPolygon;c.extentIntersectsPolyline=e.extentIntersectsPolyline;
c.extentIntersectsRings=e.extentIntersectsRings;c.getFeatureExtentIntersector=e.getFeatureExtentIntersector;c.isSelfIntersecting=e.isSelfIntersecting;c.segmentIntersects=e.segmentIntersects;c.getExtentIntersector=function(A){return"mesh"===A?e.extentIntersectsExtent:e.getFeatureExtentIntersector(A)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(c){function e(A,y,M,p,g){if(!A)return!1;y=y?M?4:3:M?3:2;const {coords:w,
lengths:f}=A;M=!1;A=0;for(const q of f){var r=A;for(let F=A,E=A+q*y;F<E;F+=y){r=F+y;r===E&&(r=A);const t=w[F],n=w[F+1],a=w[r];r=w[r+1];(n<g&&r>=g||r<g&&n>=g)&&t+(g-n)/(r-n)*(a-t)<p&&(M=!M)}A+=q*y}return M}c.polygonContainsCoords=e;c.polygonContainsMultipoint=function(A,y,M,p,g,w){g=g?w?4:3:w?3:2;const {coords:f,lengths:r}=p;if(!r)return!1;for(let q=0,F=0;q<r.length;q++,F+=g)if(!e(A,y,M,f[F],f[F+1]))return!1;return!0};c.polygonContainsPoint=function(A,y,M,p){return e(A,y,M,p.coords[0],p.coords[1])};
Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(c){function e(M,p,g,w,f){if(null!=w&&null!=f)return r=>{const q=M(r,p);r=M(r,g);return(null==q||q<=f)&&(null==r||r>=w)};if(null!=w)return r=>{r=M(r,g);return null==r||r>=w};if(null!=f)return r=>{r=M(r,p);return null==r||r<=f}}function A(M,p,g,w){if(null!=g&&null!=w&&g===w)return f=>M(f,p)===g;if(null!=g&&null!=w)return f=>{f=M(f,p);return null!=f&&f>=g&&f<=
w};if(null!=g)return f=>{f=M(f,p);return null!=f&&f>=g};if(null!=w)return f=>{f=M(f,p);return null!=f&&f<=w}}function y(){return()=>!1}c.getTimeExtent=async function(M,p){if(!M)return null;const g=p.featureAdapter,{startTimeField:w,endTimeField:f}=M;let r=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY;if(w&&f)await p.forEach(F=>{const E=g.getAttribute(F,w);F=g.getAttribute(F,f);null==E||isNaN(E)||(r=Math.min(r,E));null==F||isNaN(F)||(q=Math.max(q,F))});else{const F=w||f;await p.forEach(E=>{E=
g.getAttribute(E,F);null==E||isNaN(E)||(r=Math.min(r,E),q=Math.max(q,E))})}return{start:r,end:q}};c.getTimeOperator=function(M,p,g){if(!p||!M)return null;const {startTimeField:w,endTimeField:f}=M;if(!w&&!f)return null;const {start:r,end:q}=p;if(null===r&&null===q)return null;if(void 0===r&&void 0===q)return y();M=g.getAttributeAsTimestamp?.bind(g)??g.getAttribute.bind(g);return w&&f?e(M,w,f,r,q):A(M,w||f,r,q)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(c,e,A,y,M,p,g,w){function f(t){return t.trim().toLowerCase()}function r(t){const n=new Map;if(!t.fields)return n;const a=!0===t.datesInUnknownTimezone,{timeInfo:v,editFieldsInfo:x}=t;var D=(v?"startField"in v?v.startField:v.startTimeField:"")??"";const N=(v?"endField"in v?v.endField:v.endTimeField:"")??"",d="dateFieldsTimeZone"in t?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?g.fromTimeReference(t.dateFieldsTimeReference):null,H=x?"timeZone"in x?x.timeZone??d:x.dateFieldsTimeReference?
g.fromTimeReference(x.dateFieldsTimeReference):d??g.utc:null,S=v?"timeZone"in v?v.timeZone??d:v.timeReference?g.fromTimeReference(v.timeReference):d:null;D=new Map([[f(x?.creationDateField??""),H],[f(x?.editDateField??""),H],[f(D),S],[f(N),S]]);for(const {name:J,type:R}of t.fields)E.has(R)?n.set(J,g.unknown):"date"!==R&&"esriFieldTypeDate"!==R?n.set(J,null):a?n.set(J,g.unknown):(t=D.get(f(J??""))??d,n.set(J,t));return n}const q=new Map;class F{static fromJSON(t){return new F(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new F(t.fields??
[],r(t))}static fromLayerJSON(t){return new F(t.fields??[],r(t))}constructor(t=[],n){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=t||[];this._timeZoneByFieldName=n?new Map(n):null;t=[];for(const a of this.fields){n=a?.name;const v=p.normalizeFieldName(n)?.toLowerCase()??"";if(n&&v){const x=f(n);this._fieldsMap.set(n,a);this._fieldsMap.set(x,a);this._normalizedFieldsMap.set(v,
a);t.push(`${x}:${a.type}:${this._timeZoneByFieldName?.get(n)}`);p.isDateField(a)?(this.dateFields.push(a),this._dateFieldsSet.add(a)):p.isNumericField(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a));p.isObjectIDField(a)||p.isGlobalIDField(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}t.sort();this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)p.isObjectIDField(t)||p.isGlobalIDField(t)||
t.nullable||void 0!==p.getFieldDefaultValue(t)||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return null!=this.get(t)}get(t){if(t){var n=this._fieldsMap.get(t);if(n)return n;(n=this._fieldsMap.get(f(t))??this._normalizedFieldsMap.get(p.normalizeFieldName(t)?.toLowerCase()??""))&&this._fieldsMap.set(t,n);return n}}getTimeZone(t){t=this.get(t&&"string"!==typeof t?t.name:t);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):
"date"===t.type||"esriFieldTypeDate"===t.type?(A.getLogger("esri.layers.support.FieldsIndex").error(new c("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),g.utc):E.has(t.type)?g.unknown:null:null}getLuxonTimeZone(t){const n=this.getTimeZone(t);return n?n===g.unknown?M.UnknownTimeZone.instance:n===g.utc?w.FixedOffsetZone.utcInstance:y.getOrCreateMapValue(q,n,()=>w.IANAZone.create(n)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return p.isTimeOnlyField(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??
void 0}toJSON(){return{fields:this.fields.map(t=>e.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const E=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return F})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(c,e,A,y,M,p,g,w,f,r,q,F,E,t){function n(O){return a.has(O)?a.get(O):"number"===typeof O?O:1}c.Task=void 0;(function(O){O[O.YIELD=1]="YIELD"})(c.Task||(c.Task={}));c.TaskPriority=void 0;(function(O){O.RESOURCE_CONTROLLER_IMMEDIATE="immediate";O.RESOURCE_CONTROLLER="schedule";O.SLIDE="slide";O.STREAM_DATA_LOADER="stream loader";O.ELEVATION_QUERY="elevation query";O.TERRAIN_SURFACE="terrain";O.SURFACE_GEOMETRY_UPDATES="surface geometry updates";O.LOD_RENDERER="LoD renderer";O.GRAPHICS_CORE=
"Graphics3D";O.I3S_CONTROLLER="I3S";O.POINT_CLOUD_LAYER="point cloud";O.FEATURE_TILE_FETCHER="feature fetcher";O.OVERLAY="overlay";O.STAGE="stage";O.GRAPHICS_DECONFLICTOR="graphics deconflictor";O.FILTER_VISIBILITY="Graphics3D filter visibility";O.SCALE_VISIBILITY="Graphics3D scale visibility";O.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";O.POINT_OF_INTEREST_FREQUENT="POI frequent";O.POINT_OF_INTEREST_INFREQUENT="POI infrequent";O.LABELER="labeler";O.FEATURE_QUERY_ENGINE="feature query";O.FEATURE_TILE_TREE=
"feature tile tree";O.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";O.ELEVATION_ALIGNMENT="elevation alignment";O.TEXT_TEXTURE_ATLAS="text texture atlas";O.TEXTURE_UNLOAD="texture unload";O.LINE_OF_SIGHT_TOOL="line of sight tool";O.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";O.ELEVATION_PROFILE="elevation profile";O.SNAPPING="snapping";O.SHADOW_ACCUMULATOR="shadow accumulator";O.CLOUDS_GENERATOR="clouds generator";O[O.NONE=0]="NONE";O[O.TEST_PRIO=1]="TEST_PRIO"})(c.TaskPriority||
(c.TaskPriority={}));const a=new Map([[c.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[c.TaskPriority.RESOURCE_CONTROLLER,4],[c.TaskPriority.SLIDE,0],[c.TaskPriority.STREAM_DATA_LOADER,0],[c.TaskPriority.ELEVATION_QUERY,0],[c.TaskPriority.TERRAIN_SURFACE,1],[c.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[c.TaskPriority.LOD_RENDERER,2],[c.TaskPriority.GRAPHICS_CORE,2],[c.TaskPriority.I3S_CONTROLLER,2],[c.TaskPriority.POINT_CLOUD_LAYER,2],[c.TaskPriority.FEATURE_TILE_FETCHER,2],[c.TaskPriority.OVERLAY,
4],[c.TaskPriority.STAGE,4],[c.TaskPriority.GRAPHICS_DECONFLICTOR,4],[c.TaskPriority.FILTER_VISIBILITY,4],[c.TaskPriority.SCALE_VISIBILITY,4],[c.TaskPriority.FRUSTUM_VISIBILITY,4],[c.TaskPriority.CLOUDS_GENERATOR,4],[c.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[c.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[c.TaskPriority.LABELER,8],[c.TaskPriority.FEATURE_QUERY_ENGINE,8],[c.TaskPriority.FEATURE_TILE_TREE,16],[c.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[c.TaskPriority.ELEVATION_ALIGNMENT,12],[c.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[c.TaskPriority.TEXTURE_UNLOAD,12],[c.TaskPriority.LINE_OF_SIGHT_TOOL,16],[c.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[c.TaskPriority.SNAPPING,0],[c.TaskPriority.SHADOW_ACCUMULATOR,30]]),v=q.Milliseconds(6.5),x=q.Milliseconds(1),D=q.Milliseconds(30),N=q.Milliseconds(1E3/30),d=q.Milliseconds(100);var H;(function(O){class V{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(k=>k.needsUpdate)}constructor(){this._updating=r.signal(!0);this._microTaskQueued=
!1;this._frameNumber=0;this.performanceInfo={total:new p("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new Q;this._state=t.RenderState.INTERACTING;this._tasks=new g;this._runQueue=new g;this._load=0;this._idleStateCallbacks=new g;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=f.watch(()=>E.SCHEDULER_LOG_SLOW_TASKS,u=>this._debug=u,f.initial);for(const u of Object.keys(c.TaskPriority))this.performanceInfo.tasks.set(c.TaskPriority[u],new p(c.TaskPriority[u]));
const k=this;this._test={FRAME_SAFETY_BUDGET:v,INTERACTING_BUDGET:N,IDLE_BUDGET:d,get availableBudget(){return k._budget.budget},usedBudget:0,getBudget:()=>k._budget,setBudget:u=>k._budget=u,updateTask:u=>this._updateTask(u),getState:u=>this._getState(u),getRuntime:u=>this._getRuntime(u),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(k=>k.remove());this._tasks.clear();M.removeMaybe(this._debugHandle);
this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(k){this._updatingChanged();k&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(k,u){const K=n(k);u=new m(this,k,u,K);this._tasks.push(u);this._updatingChanged();this.performanceInfo.tasks.has(k)||this.performanceInfo.tasks.set(k,new p(k));return u}registerIdleStateCallbacks(k,
u){const K={idleBegin:k,idleEnd:u};this._idleStateCallbacks.push(K);this.state===t.RenderState.IDLE&&this._idleUpdatesStartFired&&K.idleBegin();const I=this;return{remove:()=>this._removeIdleStateCallbacks(K),set idleBegin(T){I._idleUpdatesStartFired&&(K.idleEnd(),I._state===t.RenderState.IDLE&&T());K.idleBegin=T},set idleEnd(T){K.idleEnd=T}}}get load(){return this._load}set state(k){this._state!==k&&(this._state=k,this.state!==t.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=
!1,this._idleStateCallbacks.forAll(u=>u.idleEnd())))}get state(){return this._state}updateBudget(k){this._test.usedBudget=0;++this._frameNumber;let u=v,K=k.frameDuration,I=x;switch(this.state){case t.RenderState.IDLE:u=q.Milliseconds(0);K=q.Milliseconds(Math.max(d,k.frameDuration));I=D;break;case t.RenderState.INTERACTING:K=q.Milliseconds(Math.max(N,k.frameDuration))}K=q.Milliseconds(K-k.elapsedFrameTime-u);if(this.state!==t.RenderState.IDLE&&K<x&&!this._forceTask)return this._forceTask=!0,!1;K=q.Milliseconds(Math.max(K,
I));this._budget.reset(K,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case t.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(k=>k.idleBegin()));this._runIdle();break;case t.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(q.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(k){this._idleUpdatesStartFired&&
k.idleEnd();this._idleStateCallbacks.removeUnordered(k)}removeTask(k){this._tasks.removeUnordered(k);this._runQueue.removeUnordered(k);this._updatingChanged()}_updateTask(k){this._tasks.forAll(u=>{u.name===k&&u.setPriority(k)})}_getState(k){if(this._runQueue.some(K=>K.name===k))return c.TaskState.SCHEDULED;let u=c.TaskState.IDLE;this._tasks.forAll(K=>{K.name===k&&K.needsUpdate&&(1>=K.schedulePriority?u=c.TaskState.READY:u!==c.TaskState.READY&&(u=c.TaskState.WAITING))});return u}_getRuntime(k){let u=
0;this._tasks.forAll(K=>{K.name===k&&(u+=K.runtime)});return u}_resetRuntimes(){this._tasks.forAll(k=>k.runtime=0)}_getRunning(){const k=new Map;this._tasks.forAll(K=>{K.needsUpdate&&k.set(K.name,(k.get(K.name)||0)+1)});if(0===k.size)return null;let u="";k.forEach((K,I)=>{u=1<K?u+` ${K}x ${I}`:u+` ${I}`});return u}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const k=this._tasks.reduce((u,K)=>K.needsUpdate?++u:u,0);this._load=.9*this._load+k*(1-.9)}_schedule(){this._runQueue.filterInPlace(k=>
{if(k.needsUpdate)return!0;k.schedulePriority=k.basePriority;return!1});for(this._tasks.forAll(k=>{0===k.basePriority&&k.needsUpdate&&!this._runQueue.includes(k)&&k.blockFrame!==this._frameNumber&&this._runQueue.unshift(k)});0===this._runQueue.length;){let k=!1;this._tasks.forAll(u=>{if(u.needsUpdate&&0!==u.schedulePriority&&0!==u.basePriority&&u.blockFrame!==this._frameNumber)switch(k=!0,u.schedulePriority){case 1:u.schedulePriority=0;this._runQueue.push(u);break;default:--u.schedulePriority}});
if(!k)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const k=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var u=this._budget.now();const K=this._runQueue.pop();this._budget.resetProgress();try{K.task.runTask(this._budget)===c.Task.YIELD&&(K.blockFrame=this._frameNumber)}catch(I){y.getLogger("esri.views.support.Scheduler").error(`Exception in task "${K.name}"`,I),K.blockFrame=this._frameNumber}!this._budget.hasProgressed&&K.blockFrame!==
this._frameNumber&&K.needsUpdate&&(K.blockFrame=this._frameNumber);K.schedulePriority=K.basePriority;u=this._budget.now()-u;K.runtime+=u;this._frameTaskTimes.set(K.priority,this._frameTaskTimes.get(K.priority)+u);this._debug&&u>2*this._budget.budget&&console.log("Task",K.name,"used",u,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-k);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
k)}_startFrameTaskTimes(){for(const k of Object.keys(c.TaskPriority))this._frameTaskTimes.set(c.TaskPriority[k],0)}_recordFrameTaskTimes(k){this._frameTaskTimes.forEach((u,K)=>this.performanceInfo.tasks.get(K).record(u));this.performanceInfo.total.record(k)}get test(){return this._test}}O.Scheduler=V;class m{get task(){return this._task.value}get updating(){return this._queue.running}constructor(k,u,K,I){this._scheduler=k;this.name=u;this._basePriority=I;this.runtime=this.blockFrame=0;this._queue=
new F.PromiseQueue;this._handles=new e;this.schedulePriority=this._basePriority;this._task=r.signal(null!=K?K:this._queue);this._handles.add(f.when(()=>this.task.running,T=>k.taskRunningChanged(T)))}remove(){this.processQueue(S);this._scheduler.removeTask(this);this.schedule=R.schedule;this.reschedule=R.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(k){this.name=k;k=n(k);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=k;this._basePriority=
k}get priority(){return this.name}set priority(k){this.setPriority(k)}get needsUpdate(){return this.updating||this.task.running}schedule(k,u,K){return this._queue.push(k,u,K)}reschedule(k,u,K){return this._queue.unshift(k,u,K)}processQueue(k){this._queue.runTask(k)}}class Q{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=t.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(k){if(this.done)return!1;!0===k()&&this.madeProgress();
return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(k){this._enabled=k}reset(k,u){this._begin=this.now();this._budget=k;this._state=u;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=
this._progressed=!1}get hasProgressed(){return this._progressed}}O.Budget=Q})(H||(H={}));c.TaskState=void 0;(function(O){O.SCHEDULED="s";O.READY="r";O.WAITING="w";O.IDLE="i"})(c.TaskState||(c.TaskState={}));const S=(()=>{const O=new H.Budget;O.enabled=!1;return O})();class J{remove(){}processQueue(){}schedule(O,V,m){try{if(w.isAborted(V)){const Q=w.createAbortError();return m?Promise.resolve(m(Q)):Promise.reject(Q)}return w.when(O(S))}catch(Q){return Promise.reject(Q)}}reschedule(O,V,m){return this.schedule(O,
V,m)}}const R=new J;c.ImmediateTask=R;c.getTaskPriority=n;c.newScheduler=function(){return new H.Scheduler};c.noBudget=S;c.taskPriorities=a;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(c,e,A,y){class M{constructor(p,g){this._observable=new y.SimpleObservable;this._value=p;this._equalityFunction=g}get value(){A.trackAccess(this._observable);
return this._value}set value(p){this._equalityFunction(p,this._value)||(this._value=p,this._observable.notify())}mutate(p){p(this._value);this._observable.notify()}}c.signal=function(p,g=e.equalsShallow){return new M(p,g)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal"],function(c,e,A){class y{constructor(){this._tasks=[];this._running=A.signal(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(p){for(;!p.done&&
this._process(p);)p.madeProgress()}push(p,g,w){this._running.value=!0;return new Promise((f,r)=>this._tasks.push(new M(f,r,p,g,w)))}unshift(p,g,w){this._running.value=!0;return new Promise((f,r)=>this._tasks.unshift(new M(f,r,p,g,w)))}_process(p){if(0===this._tasks.length)return!1;const g=this._tasks.shift();try{const w=e.isAborted(g.signal);if(w&&!g.abortCallback)g.reject(e.createAbortError());else{const f=w?g.abortCallback?.(e.createAbortError()):g.callback(p);e.isPromiseLike(f)?f.then(g.resolve,
g.reject):g.resolve(f)}}catch(w){g.reject(w)}this._running.value=0<this._tasks.length;return!0}cancelAll(){const p=e.createAbortError();for(const g of this._tasks)if(g.abortCallback){const w=g.abortCallback(p);g.resolve(w)}else g.reject(p);this._tasks.length=0;this._running.value=!1}}class M{constructor(p,g,w,f,r){this.resolve=p;this.reject=g;this.callback=w;this.signal=f;this.abortCallback=r}}c.PromiseQueue=y;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,e,A,y,M,p,g){e=class extends e{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=!1}};c.__decorate([A.property()],e.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);c.__decorate([A.property()],e.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);e=c.__decorate([g.subclass("esri.views.support.DebugFlags")],e);return new e})},"esri/views/support/RenderState":function(){define(["exports"],function(c){c.RenderState=
void 0;var e=c.RenderState||(c.RenderState={});e[e.ANIMATING=0]="ANIMATING";e[e.INTERACTING=1]="INTERACTING";e[e.IDLE=2]="IDLE";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports","../../../../core/date","../../../../core/number","../../../support/fieldUtils"],function(c,e,A,y){function*M(N,d,H){let S=0;for(;S<=N.length;){var J=N.indexOf(d,S);J=N.substring(S,-1<J?J:void 0);S+=J.length+d.length;if(!H||J.trim())yield J}}
function p(N){const d=N.includes("\r\n")?"\r\n":"\n";return M(N,d,!0)}function g(N,d){return M(N,d,!1)}function*w(N,d,H,S=()=>Object.create(null)){var J=p(N);J.next();var R="";N="";let O=0,V=S(),m=0;a:for(const Q of J){J=g(Q,H);for(const k of J)if(R+=N+k,N="",O+=q(k),0===O%2){if(0<O)if(R=t.exec(R))V[d[m]]=R[1].replaceAll(n,'"'),m++;else{V=S();m=0;R="";O=0;continue a}else V[d[m]]=R,m++;R="";O=0}else N=H;0===O?(yield V,V=S(),m=0):N="\n"}}function f(N,d){N=r(N,d).filter(H=>null!=H);d=N.map(H=>y.normalizeFieldName(H));
for(let H=d.length-1;0<=H;H--)d[H]||(d.splice(H,1),N.splice(H,1));return{names:d,aliases:N}}function r(N,d){if(!N?.length)return[];const H=[];var S="";let J="",R=0;N=g(N,d);for(const O of N)S+=J+O,J="",R+=q(O),0===R%2?(0<R?(S=t.exec(S))&&H.push(S[1].replaceAll(n,'"')):H.push(S),S="",R=0):J=d;return H}function q(N){let d=0,H;for(H=N.indexOf('"',0);0<=H;)d++,H=N.indexOf('"',H+1);return d}function F(N,d,H){d=y.normalizeFieldName(d)?.toLowerCase();H=y.normalizeFieldName(H)?.toLowerCase();const S=N.map(J=>
J.toLowerCase());d=d?N[S.indexOf(d)]:null;H=H?N[S.indexOf(H)]:null;return{longitudeFieldName:d||N[S.indexOf(D.find(J=>S.includes(J)))],latitudeFieldName:H||N[S.indexOf(x.find(J=>S.includes(J)))]}}function E(N){if(!N.length)return"string";const d=/[^+\-.,0-9]/;return N.map(H=>{if(""!==H){if(!d.test(H)){let S=v(H);if(!isNaN(S))return/[.,]/.test(H)||!Number.isInteger(S)||214783647<S||-214783648>S?"double":"integer";if(H.includes("E"))if(S=Number(H),Number.isNaN(S)){if(H.includes(",")&&(H=H.replace(",",
"."),S=Number(H),!Number.isNaN(S)))return"double"}else return"double"}return e.isDateString(H)?"date":"string"}}).reduce((H,S)=>{if(void 0===H)return S;if(void 0===S)return H;if(H===S)return S;if("string"===H||"string"===S)return"string";if("double"===H||"double"===S)return"double"})}const t=/^\s*"([\S\s]*)"\s*$/,n=/""/g,a=[","," ",";","|","\t"],v=function(){const N=A._parseInfo(),d=new RegExp("^"+N.regexp+"$"),H=new RegExp("["+N.group+"\\s\\xa0]","g"),S=N.factor;return J=>{J=d.exec(J);N.factor=S;
if(!J)return NaN;let R=J[1];if(!J[1]){if(!J[2])return NaN;R=J[2];N.factor*=-1}R=R.replace(H,"").replace(N.decimal,".");return+R*N.factor}}(),x="lat latitude latitude83 latdecdeg lat_dd y ycenter point_y".split(" "),D="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point_x".split(" ");c.extractFieldNamesAndAliasesFromRow=f;c.inferDelimiterAndLocationInfo=function(N,d,H){N=N.trim();d=d?.trim();var S=[],J=Array.from(new Set([H?.delimiter,...a])).filter(R=>null!=R);for(const R of J){J=
r(N,R).length;const O=r(d,R).length??J;1<J&&S.push({weight:Math.min(J,O),delimiter:R})}d=S.sort(({weight:R},{weight:O})=>O-R).map(({delimiter:R})=>R);for(const R of d)if(S=f(N,R).names,S=F(S,H?.longitudeField,H?.latitudeField),S.longitudeFieldName&&S.latitudeFieldName)return{delimiter:R,locationInfo:S};return{delimiter:d[0],locationInfo:null}};c.inferFieldType=E;c.inferFields=function(N,d,H,S,J){const R=[];d=w(N,H,d);N=[];for(var O of d){if(10===N.length)break;N.push(O)}for(O=0;O<H.length;O++){const m=
H[O];d=S[O];if(m===J.longitudeFieldName||m===J.latitudeFieldName)R.push({name:m,type:"esriFieldTypeDouble",alias:d});else{var V=N.map(Q=>Q[m]);switch(E(V)){case "integer":V="esriFieldTypeInteger";break;case "double":V="esriFieldTypeDouble";break;case "date":V="esriFieldTypeDate";break;default:V="esriFieldTypeString"}R.push({name:m,type:V,alias:d,length:y.getFieldDefaultLength(V)})}}return R};c.parseNumber=v;c.parseRows=w;c.readRowParts=g;c.readRows=p;c.splitSingleRow=r;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(c,e,A){function y(q=A.getLocale()){q=q.toLowerCase();let F=q in w;if(!F){const a=q.split("-");1<a.length&&a[0]in w&&(q=a[0],F=!0);F||(q="en")}const [E,t,n="#,##0.###"]=w[q];return{decimal:E,group:t,pattern:n}}function M(q){q=q||{};var F=y(q.locale);const E=q.pattern||F.pattern,t=F.group,n=F.decimal;let a=1;if(E.includes("%"))a/=100;else if(E.includes("\u2030"))a/=1E3;else if(E.includes("\u00a4"))throw Error("currency notation not supported");
F=E.split(";");1===F.length&&F.push("-"+F[0]);return{regexp:r(F,v=>{v="(?:"+e.escapeRegExpString(v,".")+")";return v.replace(f,x=>{const D={signed:!1,separator:q.strict?t:[t,""],fractional:q.fractional,decimal:n,exponent:!1};x=x.split(".");let N=q.places;1===x.length&&1!==a&&(x[1]="###");1===x.length||0===N?D.fractional=!1:(void 0===N&&(N=q.pattern?x[1].lastIndexOf("0")+1:Infinity),N&&null==q.fractional&&(D.fractional=!0),!q.places&&+N<x[1].length&&(N+=","+x[1].length),D.places=N);x=x[0].split(",");
1<x.length&&(D.groupSize=x.pop().length,1<x.length&&(D.groupSize2=x.pop().length));return"("+p(D)+")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:t,decimal:n,factor:a}}function p(q){q=q||{};"places"in q||(q.places=Infinity);"string"!==typeof q.decimal&&(q.decimal=".");"fractional"in q&&!String(q.places).startsWith("0")||(q.fractional=[!0,!1]);"exponent"in q||(q.exponent=[!0,!1]);"eSigned"in q||(q.eSigned=[!0,!1]);var F=g(q);const E=r(q.fractional,n=>{let a="";n&&0!==q.places&&(a="\\"+q.decimal,
a=Infinity===q.places?"(?:"+a+"\\d+)?":a+("\\d{"+q.places+"}"));return a},!0),t=r(q.exponent,n=>n?"([eE]"+g({signed:q.eSigned})+")":"");F+=E;E&&(F="(?:(?:"+F+")|(?:"+E+"))");return F+t}function g(q){q=q||{};"signed"in q||(q.signed=[!0,!1]);"separator"in q?"groupSize"in q||(q.groupSize=3):q.separator="";const F=r(q.signed,t=>t?"[-+]":"",!0),E=r(q.separator,t=>{if(!t)return"(?:\\d+)";t=e.escapeRegExpString(t);" "===t?t="\\s":"\u00a0"===t&&(t="\\s\\xa0");const n=q.groupSize,a=q.groupSize2;return a?(t=
"(?:0|[1-9]\\d{0,"+(a-1)+"}(?:["+t+"]\\d{"+a+"})*["+t+"]\\d{"+n+"})",0<n-a?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":t):"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*)"},!0);return F+E}const w={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],
hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},f=/[#0,]*[#0](?:\.0*#*)?/,r=(q,F,E)=>{if(!(q instanceof Array))return F(q);const t=[];for(let n=0;n<
q.length;n++)t.push(F(q[n]));q=t.join("|");return"("+(E?"?:":"")+q+")"};c._parseInfo=M;c.format=function(q,F){F={...F};var E=y(F.locale);F.customs=E;E=F.pattern||E.pattern;if(isNaN(q)||Infinity===Math.abs(q))return null;var t=q;var n=F||{};var a=n.customs.group,v=n.customs.decimal;E=E.split(";");q=E[0];F=E[0>t?1:0]||"-"+q;if(F.includes("%"))t*=100;else if(F.includes("\u2030"))t*=1E3;else{if(F.includes("\u00a4"))throw Error("currency notation not supported");if(F.includes("E"))throw Error("exponential notation not supported");
}E=f;var x=q.match(E);if(!x)throw Error("unable to find a number expression in pattern: "+F);!1===n.fractional&&(n.places=0);q=F.replace;x=x[0];n=n={decimal:v,group:a,places:n.places,round:n.round};!0===n.places&&(n.places=0);Infinity===n.places&&(n.places=6);v=x.split(".");var D="string"===typeof n.places&&n.places.indexOf(",");x=n.places;D?x=n.places.substring(D+1):0<=+x||(x=(v[1]||[]).length);0>n.round||(t=Number(t.toFixed(Number(x))));a=String(Math.abs(t)).split(".");t=a[1]||"";v[1]||n.places?
(D&&(n.places=n.places.substring(0,D)),D=void 0!==n.places?n.places:v[1]&&v[1].lastIndexOf("0")+1,+D>t.length&&(a[1]=t.padEnd(Number(D),"0")),+x<t.length&&(a[1]=t.substr(0,Number(x)))):a[1]&&a.pop();t=v[0].replace(",","");x=t.indexOf("0");-1!==x&&(x=t.length-x,x>a[0].length&&(a[0]=a[0].padStart(x,"0")),t.includes("#")||(a[0]=a[0].substr(a[0].length-x)));t=v[0].lastIndexOf(",");let N;if(-1!==t){var d=v[0].length-t-1;v=v[0].substr(0,t);t=v.lastIndexOf(",");-1!==t&&(N=v.length-t-1)}v=[];for(t=a[0];t;)x=
t.length-d,v.push(0<x?t.substr(x):t),t=0<x?t.slice(0,x):"",N&&(d=N,N=void 0);a[0]=v.reverse().join(n.group||",");d=a.join(n.decimal||".");return q.call(F,E,d)};c.getCustoms=y;c.parse=function(q,F){F=M(F);q=(new RegExp("^"+F.regexp+"$")).exec(q);if(!q)return NaN;let E=q[1];if(!q[1]){if(!q[2])return NaN;E=q[2];F.factor*=-1}E=E.replaceAll(new RegExp("["+F.group+"\\s\\xa0]","g"),"").replace(F.decimal,".");return Number(E)*F.factor};c.regexp=function(q){return M(q).regexp};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(c,e,A,y,M){const p=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let g=1;c.createCapabilities=function(w,f){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:w},metadata:{supportsAdvancedFieldProperties:!1},
operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:f,supportsDelete:f,supportsEditing:f,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:f,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:y.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},
editing:{supportsGeometryUpdate:f,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}};c.createDefaultAttributesFunction=function(w,f){if(e("esri-csp-restrictions"))return()=>({[f]:null,...w});try{let r=`this.${f} = null;`;for(const F in w){const E=
p.test(F)?`.${F}`:`["${F}"]`;r+=`this${E} = ${JSON.stringify(w[F])};`}const q=(new Function(`\n      return class AttributesClass$${g++} {\n        constructor() {\n          ${r};\n        }\n      }\n    `))();return()=>new q}catch(r){return()=>({[f]:null,...w})}};c.createDefaultTemplate=function(w={}){return[{name:"New Feature",description:"",prototype:{attributes:A.clone(w)}}]};c.createDrawingInfo=function(w){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===w||"esriGeometryMultipoint"===
w?M.defaultPointSymbolJSON:"esriGeometryPolyline"===w?M.defaultPolylineSymbolJSON:M.defaultPolygonSymbolJSON}}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(c){const e=[252,146,31,255],A={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},y={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};c.defaultColor=e;c.defaultOutlineColor=
[153,153,153,255];c.defaultPointSymbolJSON=A;c.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};c.defaultPolylineSymbolJSON=y;c.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};c.errorPointSymbolJSON=
{type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};c.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};c.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../geometry ../../../../request ../../../../core/asyncUtils ../../../../core/date ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../time/timeZoneUtils ../../../../geometry/SpatialReference".split(" "),function(c,
e,A,y,M,p,g,w,f,r,q,F,E,t,n,a,v,x,D,N,d,H,S){function J(k,u){var K=u.parsingOptions||{};const I={delimiter:K.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:K.latitudeField,longitudeFieldName:K.longitudeField}},T=I.layerDefinition={name:w.getFilename(u.url,O)||"csv",dateFieldsTimeReference:{timeZoneIANA:H.utc},drawingInfo:R,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:K.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,
ymax:Number.NEGATIVE_INFINITY,spatialReference:K.spatialReference||{wkid:4326}}};var Y=x.readRows(k);u=Y.next().value?.trim();Y=Y.next().value?.trim();if(!u)throw new M("csv-layer:empty-csv","CSV is empty",{csv:k});const {delimiter:ea,locationInfo:la}=x.inferDelimiterAndLocationInfo(u,Y,K);if(!ea)throw new M("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:u,secondLine:Y,parsingOptions:K});if(!la)throw new M("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",
{firstLine:u,secondLine:Y,parsingOptions:K});I.locationInfo=la;I.delimiter=ea;const {names:na,aliases:ua}=x.extractFieldNamesAndAliasesFromRow(u,ea);k=x.inferFields(k,I.delimiter,na,ua,I.locationInfo);if(K.fields?.length){K=new N(K.fields);for(var ta of k)(u=K.get(ta.name))&&Object.assign(ta,u)}k.some(pa=>"esriFieldTypeOID"===pa.type?(T.objectIdField=pa.name,!0):!1)||(ta={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},T.objectIdField=ta.name,k.unshift(ta));T.fields=
k;K=new N(T.fields);I.locationInfo&&(I.locationInfo.latitudeFieldName=K.get(I.locationInfo.latitudeFieldName).name,I.locationInfo.longitudeFieldName=K.get(I.locationInfo.longitudeFieldName).name);T.timeInfo&&(ta=T.timeInfo,ta.startTimeField&&((k=K.get(ta.startTimeField))?(ta.startTimeField=k.name,k.type="esriFieldTypeDate"):ta.startTimeField=null),ta.endTimeField&&((k=K.get(ta.endTimeField))?(ta.endTimeField=k.name,k.type="esriFieldTypeDate"):ta.endTimeField=null),ta.trackIdField&&(K=K.get(ta.trackIdField),
ta.trackIdField=K?K.name:null),ta.startTimeField||ta.endTimeField||(T.timeInfo=null));return I}const R=D.createDrawingInfo("esriGeometryPoint"),O=["csv"],V=[0,0];class m{constructor(k,u){this.x=k;this.y=u}}class Q{constructor(){this._queryEngine=null;this._snapshotFeatures=async k=>{k=await this._fetch(k);return this._createFeatures(k)}}destroy(){this._queryEngine?.destroy();this._queryEngine=null}async load(k,u={}){this._loadOptions=k;[u]=await Promise.all([this._fetch(u.signal),this._checkProjection(k?.parsingOptions?.spatialReference)]);
k=J(u,k);this._locationInfo=k.locationInfo;this._delimiter=k.delimiter;this._queryEngine=this._createQueryEngine(k);u=await this._createFeatures(u);this._queryEngine.featureStore.addMany(u);const {fullExtent:K,timeExtent:I}=await this._queryEngine.fetchRecomputedExtents();k.layerDefinition.extent=K;if(I){const {start:T,end:Y}=I;k.layerDefinition.timeInfo.timeExtent=[T,Y]}return k}async applyEdits(){throw new M("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");}async queryFeatures(k=
{},u={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(k,u.signal)}async queryFeatureCount(k={},u={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(k,u.signal)}async queryObjectIds(k={},u={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(k,u.signal)}async queryExtent(k={},u={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(k,u.signal)}async querySnapping(k,u={}){await this._waitSnapshotComplete();
return this._queryEngine.executeQueryForSnapping(k,u.signal)}async refresh(k){this._loadOptions.customParameters=k;this._snapshotTask?.abort();this._snapshotTask=A.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(I=>{this._queryEngine.featureStore.clear();I&&this._queryEngine.featureStore.addMany(I)},I=>{this._queryEngine.featureStore.clear();g.isAbortError(I)||p.getLogger("esri.layers.CSVLayer").error(new M("csv-layer:refresh","An error occurred during refresh",{error:I}))});await this._waitSnapshotComplete();
const {fullExtent:u,timeExtent:K}=await this._queryEngine.fetchRecomputedExtents();return{extent:u,timeExtent:K}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(k){const {url:u,customParameters:K}=this._loadOptions;if(!u)throw new M("csv-layer:invalid-source","url not defined");const I=w.urlToObject(u);return(await e(I.path,{query:{...I.query,...K},responseType:"text",signal:k})).data}_createQueryEngine(k){const {objectIdField:u,
fields:K,extent:I,timeInfo:T}=k.layerDefinition;k=new n({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new v.QueryEngine({fieldsIndex:N.fromLayerJSON({fields:K,dateFieldsTimeReference:{timeZoneIANA:H.utc}}),geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:T,objectIdField:u,spatialReference:I.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:k})}async _createFeatures(k){const {latitudeFieldName:u,longitudeFieldName:K}=this._locationInfo,{objectIdField:I,fieldsIndex:T,
spatialReference:Y}=this._queryEngine;let ea=[];const la=[];var na=T.fields.filter(wa=>wa.name!==I).map(wa=>wa.name),ua=0,ta={};for(const wa of T.fields)if("esriFieldTypeOID"!==wa.type&&"esriFieldTypeGlobalID"!==wa.type){const Da=d.getFieldDefaultValue(wa);void 0!==Da&&(ta[wa.name]=Da)}k=x.parseRows(k,na,this._delimiter,D.createDefaultAttributesFunction(ta,I));for(var pa of k)if(k=this._parseCoordinateValue(pa[u]),na=this._parseCoordinateValue(pa[K]),null!=na&&null!=k&&!isNaN(k)&&!isNaN(na)){pa[u]=
k;pa[K]=na;for(var va in pa)va!==u&&va!==K&&(T.isDateField(va)?pa[va]=y.parseDate(pa[va]):T.isNumericField(va)&&(ta=x.parseNumber(pa[va]),isNaN(ta)?pa[va]=null:pa[va]=ta));pa[I]=ua;ua++;ea.push(new m(na,k));la.push(pa)}if(!q.equals({wkid:4326},Y))if(q.isWebMercator(Y))for(const wa of ea)[wa.x,wa.y]=F.lngLatToXY(wa.x,wa.y,V);else ea=f.projectMany(r.jsonAdapter,ea,S.WGS84,Y,null,null);ua=[];for(pa=0;pa<ea.length;pa++){const {x:wa,y:Da}=ea[pa];va=la[pa];va[I]=pa+1;ua.push(new E.OptimizedFeature(new t([],
[wa,Da]),va,null,va[I]))}return ua}_parseCoordinateValue(k){if(null==k||""===k)return null;let u=x.parseNumber(k);if(isNaN(u)||181<Math.abs(u))u=parseFloat(k);return u}async _checkProjection(k){try{await a.checkProjectionSupport(q.WGS84,k)}catch{throw new M("csv-layer:projection-not-supported","Projection not supported");}}}return Q});