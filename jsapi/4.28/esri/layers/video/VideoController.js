// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Logger ../../core/mathUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./VideoCameraSensorModel ./videoUtils ../../chunks/_commonjsHelpers".split(" "),function(xa,Xl,Yl,Zl,Hd,za,wr,xr,yr,$l,am,Id,hb){function oc(d,f){if(!(this instanceof oc))return new oc(d,f);this.nodeValue=this.data=d;
this.length=d.length;this.ownerDocument=f||null}function Qb(d,f){if(!(this instanceof Qb))return new Qb(d);this.data=d||"";this.length=this.data.length;this.ownerDocument=f||null}function mh(d){switch(d.nodeType){case 3:return $e(d.data);case 8:return"\x3c!--"+d.data+"--\x3e";default:var f=[],k=d.tagName;"http://www.w3.org/1999/xhtml"===d.namespaceURI&&(k=k.toLowerCase());var n=f.push,t="\x3c"+k;var a=[];for(var b in d){var c=d;var e=b,g=typeof c[e];c="style"===e&&0<Object.keys(c.style).length?!0:
c.hasOwnProperty(e)&&("string"===g||"boolean"===g||"number"===g)&&"nodeName"!==e&&"className"!==e&&"tagName"!==e&&"textContent"!==e&&"innerText"!==e&&"namespaceURI"!==e&&"innerHTML"!==e;c&&a.push({name:b,value:d[b]})}for(var m in d._attributes)for(var p in d._attributes[m])b=d._attributes[m][p],a.push({name:(b.prefix?b.prefix+":":"")+p,value:b.value});d.className&&a.push({name:"class",value:d.className});a=a.length?nh(a):"";t+=a;a=d.dataset;m=[];for(u in a)m.push({name:"data-"+u,value:a[u]});var u=
m.length?nh(m):"";n.call(f,t+u);-1<bm.indexOf(k)?f.push(" /\x3e"):(f.push("\x3e"),d.childNodes.length?f.push.apply(f,d.childNodes.map(mh)):d.textContent||d.innerText?f.push($e(d.textContent||d.innerText)):d.innerHTML&&f.push(d.innerHTML),f.push("\x3c/"+k+"\x3e"));return f.join("")}}function cm(d){if("string"===typeof d)return d;var f="";Object.keys(d).forEach(function(k){var n=d[k];k=k.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});f+=k+":"+n+";"});return f}function nh(d){var f=[];d.forEach(function(k){var n=
k.name;k=k.value;"style"===n&&(k=cm(k));f.push(n+'\x3d"'+$e(k).replace(/"/g,"\x26quot;")+'"')});return f.length?" "+f.join(" "):""}function $e(d){var f="";"string"===typeof d?f=d:d&&(f=d.toString());return f.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")}function fa(d,f,k){if(!(this instanceof fa))return new fa(d);k=void 0===k?"http://www.w3.org/1999/xhtml":k||null;this.nodeName=this.tagName="http://www.w3.org/1999/xhtml"===k?String(d).toUpperCase():d;this.className="";this.dataset=
{};this.childNodes=[];this.parentNode=null;this.style={};this.ownerDocument=f||null;this.namespaceURI=k;this._attributes={};"INPUT"===this.tagName&&(this.type="text")}function qb(d){if(!(this instanceof qb))return new qb;this.childNodes=[];this.parentNode=null;this.ownerDocument=d||null}function af(d){}function Jd(){if(!(this instanceof Jd))return new Jd;this.head=this.createElement("head");this.body=this.createElement("body");this.documentElement=this.createElement("html");this.documentElement.appendChild(this.head);
this.documentElement.appendChild(this.body);this.childNodes=[this.documentElement];this.nodeType=9}function dm(d){void 0===d&&(d="");return d.toLowerCase().split(";").reduce(function(f,k){k=k.split("\x3d");var n=k[1];return"charset"===k[0].trim()?n.trim():f},"utf-8")}function em(d){for(var f in d)if(d.hasOwnProperty(f))return!1;return!0}function oh(d,f,k){var n=d;if(f){var t=fm.call(f);t="[object Function]"===t||"function"===typeof f&&"[object RegExp]"!==t||"undefined"!==typeof window&&(f===window.setTimeout||
f===window.alert||f===window.confirm||f===window.prompt)}else t=!1;t?(k=f,"string"===typeof d&&(n={uri:d})):n=gm({},f,{uri:d});n.callback=k;return n}function rb(d,f,k){f=oh(d,f,k);return ph(f)}function ph(d){function f(B){clearTimeout(x);B instanceof Error||(B=Error(""+(B||"Unknown XMLHttpRequest Error")));B.statusCode=0;var z=y;n||(n=!0,d.callback(B,z,void 0))}function k(){if(!b){clearTimeout(x);var B=d.useXDR&&void 0===t.status?200:1223===t.status?204:t.status;var z=y,E=null;if(0!==B){z=void 0;
if(t.response)var J=t.response;else{if(!(z=t.responseText))a:{try{if("document"===t.responseType){z=t.responseXML;break a}J=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!J){z=t.responseXML;break a}}catch(G){}z=null}J=z}z=J;if(u)try{z=JSON.parse(z)}catch(G){}z={body:z,statusCode:B,method:e,headers:{},url:c,rawRequest:t};t.getAllResponseHeaders&&(z.headers=hm(t.getAllResponseHeaders()))}else E=Error("Internal XMLHttpRequest Error");B=z.body;n||(n=!0,
d.callback(E,z,B))}}if("undefined"===typeof d.callback)throw Error("callback argument missing");var n=!1,t=d.xhr||null;t||(t=d.cors||d.useXDR?new rb.XDomainRequest:new rb.XMLHttpRequest);var a,b,c=t.url=d.uri||d.url,e=t.method=d.method||"GET",g=d.body||d.data,m=t.headers=d.headers||{},p=!!d.sync,u=!1,x,y={body:void 0,headers:{},statusCode:0,method:e,url:c,rawRequest:t};"json"in d&&!1!==d.json&&(u=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==e&&"HEAD"!==e&&(m["content-type"]||m["Content-Type"]||
(m["Content-Type"]="application/json"),g=JSON.stringify(!0===d.json?g:d.json)));t.onreadystatechange=function(){4===t.readyState&&setTimeout(k,0)};t.onload=k;t.onerror=f;t.onprogress=function(){};t.onabort=function(){b=!0};t.ontimeout=f;t.open(e,c,!p,d.username,d.password);p||(t.withCredentials=!!d.withCredentials);!p&&0<d.timeout&&(x=setTimeout(function(){if(!b){b=!0;t.abort("timeout");var B=Error("XMLHttpRequest timeout");B.code="ETIMEDOUT";f(B)}},d.timeout));if(t.setRequestHeader)for(a in m)m.hasOwnProperty(a)&&
t.setRequestHeader(a,m[a]);else if(d.headers&&!em(d.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in d&&(t.responseType=d.responseType);"beforeSend"in d&&"function"===typeof d.beforeSend&&d.beforeSend(t);t.send(g||null);return t}function im(){}function Za(d,f){this.name="ParsingError";this.code=d.code;this.message=f||d.message}function bf(d){d=d.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!d)return null;if(d[3]){var f=d[3].replace(":","");return 3600*
(d[1]|0)+60*(d[2]|0)+(f|0)+(d[4]|0)/1E3}return 59<d[1]?3600*(d[1]|0)+60*(d[2]|0)+(d[4]|0)/1E3:60*(d[1]|0)+(d[2]|0)+(d[4]|0)/1E3}function Wc(){this.values=cf(null)}function Xc(d,f,k,n){d=n?d.split(n):[d];for(var t in d)if("string"===typeof d[t]){var a=d[t].split(k);2===a.length&&(n=a[0].trim(),a=a[1].trim(),f(n,a))}}function jm(d,f,k){function n(){var b=bf(d);if(null===b)throw new Za(Za.Errors.BadTimeStamp,"Malformed timestamp: "+a);d=d.replace(/^[^\sa-zA-Z-]+/,"");return b}function t(){d=d.replace(/^\s+/,
"")}var a=d;t();f.startTime=n();t();if("--\x3e"!==d.substr(0,3))throw new Za(Za.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);d=d.substr(3);t();f.endTime=n();t();(function(b,c){var e=new Wc;Xc(b,function(g,m){switch(g){case "region":for(var p=k.length-1;0<=p;p--)if(k[p].id===m){e.set(g,k[p].region);break}break;case "vertical":e.alt(g,m,["rl","lr"]);break;case "line":m=m.split(",");p=m[0];e.integer(g,p);e.percent(g,p)?e.set("snapToLines",!1):null;e.alt(g,
p,["auto"]);2===m.length&&e.alt("lineAlign",m[1],["start","center","end"]);break;case "position":m=m.split(",");e.percent(g,m[0]);2===m.length&&e.alt("positionAlign",m[1],["start","center","end"]);break;case "size":e.percent(g,m);break;case "align":e.alt(g,m,["start","center","end","left","right"])}},/:/,/\s/);c.region=e.get("region",null);c.vertical=e.get("vertical","");try{c.line=e.get("line","auto")}catch(g){}c.lineAlign=e.get("lineAlign","start");c.snapToLines=e.get("snapToLines",!0);c.size=e.get("size",
100);try{c.align=e.get("align","center")}catch(g){c.align=e.get("align","middle")}try{c.position=e.get("position","auto")}catch(g){c.position=e.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},c.align)}c.positionAlign=e.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},c.align)})(d,f)}function qh(d,f){function k(){if(!f)return null;var p=f.match(/^([^<]*)(<[^>]*>?)?/);p=p[1]?p[1]:p[2];f=f.substr(p.length);return p}function n(p){df.innerHTML=
p;p=df.textContent;df.textContent="";return p}function t(p,u){var x=km[p];if(!x)return null;x=d.document.createElement(x);(p=lm[p])&&u&&(x[p]=u.trim());return x}for(var a=d.document.createElement("div"),b=a,c,e=[];null!==(c=k());)if("\x3c"===c[0])if("/"===c[1])e.length&&e[e.length-1]===c.substr(2).replace("\x3e","")&&(e.pop(),b=b.parentNode);else{var g=bf(c.substr(1,c.length-2));if(g){var m=d.document.createProcessingInstruction("timestamp",g);b.appendChild(m)}else if(c=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))!(m=
t(c[1],c[3]))||rh[m.localName]&&rh[m.localName]!==b.localName||(c[2]&&(g=c[2].split("."),g.forEach(function(p){var u=/^bg_/.test(p);p=u?p.slice(3):p;sh.hasOwnProperty(p)&&(m.style[u?"background-color":"color"]=sh[p])}),m.className=g.join(" ")),e.push(c[1]),b.appendChild(m),b=m)}else b.appendChild(d.document.createTextNode(n(c)));return a}function mm(d){for(var f=0;f<th.length;f++){var k=th[f];if(d>=k[0]&&d<=k[1])return!0}return!1}function nm(d){function f(b,c){for(var e=c.childNodes.length-1;0<=e;e--)b.push(c.childNodes[e])}
function k(b){if(!b||!b.length)return null;var c=b.pop(),e=c.textContent||c.innerText;if(e)return(c=e.match(/^.*(\n|\r)/))?(b.length=0,c[0]):e;if("ruby"===c.tagName)return k(b);if(c.childNodes)return f(b,c),k(b)}var n=[],t="";if(!d||!d.childNodes)return"ltr";for(f(n,d);t=k(n);)for(var a=0;a<t.length;a++)if(d=t.charCodeAt(a),mm(d))return"rtl";return"ltr"}function ef(){}function Kd(d,f,k){this.cue=f;this.cueDiv=qh(d,f.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",
position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===f.vertical?"horizontal-tb":"lr"===f.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv);this.div=d.document.createElement("div");n={direction:nm(this.cueDiv),writingMode:""===f.vertical?"horizontal-tb":"lr"===f.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===f.align?"center":f.align,font:k.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(n);
this.div.appendChild(this.cueDiv);d=0;switch(f.positionAlign){case "start":case "line-left":d=f.position;break;case "center":d=f.position-f.size/2;break;case "end":case "line-right":d=f.position-f.size}""===f.vertical?this.applyStyles({left:this.formatStyle(d,"%"),width:this.formatStyle(f.size,"%")}):this.applyStyles({top:this.formatStyle(d,"%"),height:this.formatStyle(f.size,"%")});this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,
"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function Na(d){if(d.div){var f=d.div.offsetHeight;var k=d.div.offsetWidth;var n=d.div.offsetTop;var t=(t=d.div.childNodes)&&(t=t[0])&&t.getClientRects&&t.getClientRects();d=d.div.getBoundingClientRect();var a=t?Math.max(t[0]&&t[0].height||0,d.height/t.length):0}this.left=d.left;this.right=d.right;this.top=d.top||n;this.height=d.height||f;this.bottom=d.bottom||n+(d.height||f);this.width=
d.width||k;this.lineHeight=void 0!==a?a:d.lineHeight}function pc(){}function ff(d){return"string"!==typeof d?!1:om[d.toLowerCase()]?d.toLowerCase():!1}function uh(d,f,k){this.hasBeenReset=!1;var n="",t=!1,a=d,b=f,c=k,e=null,g="",m=!0,p="auto",u="start",x="auto",y="auto",B=100,z="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(E){n=""+E}},pauseOnExit:{enumerable:!0,get:function(){return t},set:function(E){t=!!E}},startTime:{enumerable:!0,get:function(){return a},
set:function(E){if("number"!==typeof E)throw new TypeError("Start time must be set to a number.");a=E;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return b},set:function(E){if("number"!==typeof E)throw new TypeError("End time must be set to a number.");b=E;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return c},set:function(E){c=""+E;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return e},set:function(E){e=E;this.hasBeenReset=!0}},vertical:{enumerable:!0,
get:function(){return g},set:function(E){E="string"!==typeof E?!1:pm[E.toLowerCase()]?E.toLowerCase():!1;if(!1===E)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");g=E;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(E){m=!!E;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(E){if("number"!==typeof E&&"auto"!==E)throw new SyntaxError("Line: an invalid number or illegal string was specified.");
p=E;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return u},set:function(E){(E=ff(E))?(u=E,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return x},set:function(E){if(0>E||100<E)throw Error("Position must be between 0 and 100.");x=E;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return y},set:function(E){(E=ff(E))?(y=E,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},
size:{enumerable:!0,get:function(){return B},set:function(E){if(0>E||100<E)throw Error("Size must be between 0 and 100.");B=E;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return z},set:function(E){E=ff(E);if(!E)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");z=E;this.hasBeenReset=!0}}});this.displayState=void 0}function Yc(d){return"number"===typeof d&&0<=d&&100>=d}function Rb(){Rb=Object.assign?Object.assign.bind():function(d){for(var f=1;f<arguments.length;f++){var k=
arguments[f],n;for(n in k)Object.prototype.hasOwnProperty.call(k,n)&&(d[n]=k[n])}return d};return Rb.apply(this,arguments)}function Ld(d,f){void 0===f&&(f=Object);return f&&"function"===typeof f.freeze?f.freeze(d):d}function qm(d){return""!==d}function rm(d,f){d.hasOwnProperty(f)||(d[f]=!0);return d}function vh(d){if(!d)return[];d=d?d.split(/[\t\n\f\r ]+/).filter(qm):[];return Object.keys(d.reduce(rm,{}))}function sm(d){return function(f){return d&&-1!==d.indexOf(f)}}function Zc(d,f){for(var k in d)Object.prototype.hasOwnProperty.call(d,
k)&&(f[k]=d[k])}function Ta(d,f){var k=d.prototype;if(!(k instanceof f)){function n(){}n.prototype=f.prototype;n=new n;Zc(k,n);d.prototype=k=n}k.constructor!=d&&("function"!=typeof d&&console.error("unknown Class:"+d),k.constructor=d)}function Aa(d,f){if(f instanceof Error)var k=f;else k=this,Error.call(this,Da[d]),this.message=Da[d],Error.captureStackTrace&&Error.captureStackTrace(this,Aa);k.code=d;f&&(this.message=this.message+": "+f);return k}function Sb(){}function qc(d,f){this._node=d;this._refresh=
f;gf(this)}function gf(d){var f=d._node._inc||d._node.ownerDocument._inc;if(d._inc!==f){var k=d._refresh(d._node);wh(d,"length",k.length);if(!d.$$length||k.length<d.$$length)for(var n=k.length;n in d;n++)Object.prototype.hasOwnProperty.call(d,n)&&delete d[n];Zc(k,d);d._inc=f}}function Md(){}function xh(d,f){for(var k=d.length;k--;)if(d[k]===f)return k}function yh(d,f,k,n){n?f[xh(f,n)]=k:f[f.length++]=k;d&&(k.ownerElement=d,f=d.ownerDocument)&&(n&&(f&&f._inc++,n.namespaceURI===rc.XMLNS&&delete d._nsMap[n.prefix?
n.localName:""]),f&&f._inc++,k.namespaceURI===rc.XMLNS&&(d._nsMap[k.prefix?k.localName:""]=k.value))}function zh(d,f,k){var n=xh(f,k);if(0<=n){for(var t=f.length-1;n<t;)f[n]=f[++n];f.length=t;d&&(f=d.ownerDocument)&&(f&&f._inc++,k.namespaceURI===rc.XMLNS&&delete d._nsMap[k.prefix?k.localName:""],k.ownerElement=null)}else throw new Aa(Ah,Error(d.tagName+"@"+k));}function Bh(){}function ja(){}function Ch(d){return"\x3c"==d&&"\x26lt;"||"\x3e"==d&&"\x26gt;"||"\x26"==d&&"\x26amp;"||'"'==d&&"\x26quot;"||
"\x26#"+d.charCodeAt()+";"}function $c(d,f){if(f(d))return!0;if(d=d.firstChild){do if($c(d,f))return!0;while(d=d.nextSibling)}}function ad(){this.ownerDocument=this}function hf(d,f,k){if(d&&d._inc)if(d._inc++,d=f.childNodes,k)d[d.length++]=k;else{f=f.firstChild;for(k=0;f;)d[k++]=f,f=f.nextSibling;d.length=k;delete d[d.length]}}function Dh(d,f){var k=f.previousSibling,n=f.nextSibling;k?k.nextSibling=n:d.firstChild=n;n?n.previousSibling=k:d.lastChild=k;f.parentNode=null;f.previousSibling=null;f.nextSibling=
null;hf(d.ownerDocument,d);return f}function Gb(d){return d&&d.nodeType===ja.DOCUMENT_TYPE_NODE}function sb(d){return d&&d.nodeType===ja.ELEMENT_NODE}function jf(d){return d&&d.nodeType===ja.TEXT_NODE}function Eh(d,f){d=d.childNodes||[];if(tb(d,sb)||Gb(f))return!1;var k=tb(d,Gb);return!(f&&k&&d.indexOf(k)>d.indexOf(f))}function Fh(d,f){d=d.childNodes||[];if(tb(d,function(n){return sb(n)&&n!==f}))return!1;var k=tb(d,Gb);return!(f&&k&&d.indexOf(k)>d.indexOf(f))}function tm(d,f,k){var n=d.childNodes||
[],t=f.childNodes||[];if(f.nodeType===ja.DOCUMENT_FRAGMENT_NODE){var a=t.filter(sb);if(1<a.length||tb(t,jf))throw new Aa(Ua,"More than one element or text in fragment");if(1===a.length&&!Eh(d,k))throw new Aa(Ua,"Element in fragment can not be inserted before doctype");}if(sb(f)&&!Eh(d,k))throw new Aa(Ua,"Only one element can be added and only after doctype");if(Gb(f)){if(tb(n,Gb))throw new Aa(Ua,"Only one doctype is allowed");d=tb(n,sb);if(k&&n.indexOf(d)<n.indexOf(k))throw new Aa(Ua,"Doctype can only be inserted before an element");
if(!k&&d)throw new Aa(Ua,"Doctype can not be appended since element is present");}}function Gh(d,f,k){var n=d.childNodes||[],t=f.childNodes||[];if(f.nodeType===ja.DOCUMENT_FRAGMENT_NODE){var a=t.filter(sb);if(1<a.length||tb(t,jf))throw new Aa(Ua,"More than one element or text in fragment");if(1===a.length&&!Fh(d,k))throw new Aa(Ua,"Element in fragment can not be inserted before doctype");}if(sb(f)&&!Fh(d,k))throw new Aa(Ua,"Only one element can be added and only after doctype");if(Gb(f)){if(tb(n,
function(b){return Gb(b)&&b!==k}))throw new Aa(Ua,"Only one doctype is allowed");d=tb(n,sb);if(k&&n.indexOf(d)<n.indexOf(k))throw new Aa(Ua,"Doctype can only be inserted before an element");}}function Nd(d,f,k,n){if(!d||d.nodeType!==ja.DOCUMENT_NODE&&d.nodeType!==ja.DOCUMENT_FRAGMENT_NODE&&d.nodeType!==ja.ELEMENT_NODE)throw new Aa(Ua,"Unexpected parent node type "+d.nodeType);if(k&&k.parentNode!==d)throw new Aa(Ah,"child not in parent");if(!f||!(sb(f)||jf(f)||Gb(f)||f.nodeType===ja.DOCUMENT_FRAGMENT_NODE||
f.nodeType===ja.COMMENT_NODE||f.nodeType===ja.PROCESSING_INSTRUCTION_NODE)||Gb(f)&&d.nodeType!==ja.DOCUMENT_NODE)throw new Aa(Ua,"Unexpected node type "+f.nodeType+" for parent node type "+d.nodeType);d.nodeType===ja.DOCUMENT_NODE&&(n||tm)(d,f,k);(n=f.parentNode)&&n.removeChild(f);if(f.nodeType===Hb){n=f.firstChild;if(null==n)return f;var t=f.lastChild}else n=t=f;var a=k?k.previousSibling:d.lastChild;n.previousSibling=a;t.nextSibling=k;a?a.nextSibling=n:d.firstChild=n;null==k?d.lastChild=t:k.previousSibling=
t;do n.parentNode=d;while(n!==t&&(n=n.nextSibling));hf(d.ownerDocument||d,d);f.nodeType==Hb&&(f.firstChild=f.lastChild=null);return f}function sc(){this._nsMap={}}function Od(){}function bd(){}function kf(){}function lf(){}function mf(){}function nf(){}function Hh(){}function Ih(){}function of(){}function Pd(){}function pf(){}function Jh(d,f,k){f=d.prefix||"";d=d.namespaceURI;if(!d||"xml"===f&&d===rc.XML||d===rc.XMLNS)return!1;for(var n=k.length;n--;){var t=k[n];if(t.prefix===f)return t.namespace!==
d}return!0}function qf(d,f,k){d.push(" ",f,'\x3d"',k.replace(/[<>&"\t\n\r]/g,Ch),'"')}function tc(d,f,k,n,t){t||(t=[]);if(n)if(d=n(d)){if("string"==typeof d){f.push(d);return}}else return;switch(d.nodeType){case lb:var a=d.attributes,b=a.length,c=d.firstChild,e=d.tagName;k=rc.isHTML(d.namespaceURI)||k;var g=e;if(!k&&!d.prefix&&d.namespaceURI){for(var m,p=0;p<a.length;p++)if("xmlns"===a.item(p).name){m=a.item(p).value;break}if(!m)for(p=t.length-1;0<=p;p--){var u=t[p];if(""===u.prefix&&u.namespace===
d.namespaceURI){m=u.namespace;break}}if(m!==d.namespaceURI)for(p=t.length-1;0<=p;p--)if(u=t[p],u.namespace===d.namespaceURI){u.prefix&&(g=u.prefix+":"+e);break}}f.push("\x3c",g);for(m=0;m<b;m++)p=a.item(m),"xmlns"==p.prefix?t.push({prefix:p.localName,namespace:p.value}):"xmlns"==p.nodeName&&t.push({prefix:"",namespace:p.value});for(m=0;m<b;m++){p=a.item(m);if(Jh(p,k,t)){u=p.prefix||"";var x=p.namespaceURI;qf(f,u?"xmlns:"+u:"xmlns",x);t.push({prefix:u,namespace:x})}tc(p,f,k,n,t)}e===g&&Jh(d,k,t)&&
(u=d.prefix||"",x=d.namespaceURI,qf(f,u?"xmlns:"+u:"xmlns",x),t.push({prefix:u,namespace:x}));if(c||k&&!/^(?:meta|link|img|br|hr|input)$/i.test(e)){f.push("\x3e");if(k&&/^script$/i.test(e))for(;c;)c.data?f.push(c.data):tc(c,f,k,n,t.slice()),c=c.nextSibling;else for(;c;)tc(c,f,k,n,t.slice()),c=c.nextSibling;f.push("\x3c/",g,"\x3e")}else f.push("/\x3e");break;case Kh:case Hb:for(c=d.firstChild;c;)tc(c,f,k,n,t.slice()),c=c.nextSibling;break;case uc:return qf(f,d.name,d.value);case Qd:return f.push(d.data.replace(/[<&>]/g,
Ch));case Lh:return f.push("\x3c![CDATA[",d.data,"]]\x3e");case Mh:return f.push("\x3c!--",d.data,"--\x3e");case Nh:k=d.publicId;n=d.systemId;f.push("\x3c!DOCTYPE ",d.name);k?(f.push(" PUBLIC ",k),n&&"."!=n&&f.push(" ",n),f.push("\x3e")):n&&"."!=n?f.push(" SYSTEM ",n,"\x3e"):((d=d.internalSubset)&&f.push(" [",d,"]"),f.push("\x3e"));break;case Oh:return f.push("\x3c?",d.target," ",d.data,"?\x3e");case Ph:return f.push("\x26",d.nodeName,";");default:f.push("??",d.nodeName)}}function Qh(d,f,k){switch(f.nodeType){case lb:var n=
f.cloneNode(!1);n.ownerDocument=d;case Hb:break;case uc:k=!0}n||(n=f.cloneNode(!1));n.ownerDocument=d;n.parentNode=null;if(k)for(f=f.firstChild;f;)n.appendChild(Qh(d,f,k)),f=f.nextSibling;return n}function rf(d,f,k){var n=new f.constructor;for(a in f)if(Object.prototype.hasOwnProperty.call(f,a)){var t=f[a];"object"!=typeof t&&t!=n[a]&&(n[a]=t)}f.childNodes&&(n.childNodes=new Sb);n.ownerDocument=d;switch(n.nodeType){case lb:var a=f.attributes;var b=n.attributes=new Md;t=a.length;b._ownerElement=n;
for(b=0;b<t;b++)n.setAttributeNode(rf(d,a.item(b),!0));break;case uc:k=!0}if(k)for(f=f.firstChild;f;)n.appendChild(rf(d,f,k)),f=f.nextSibling;return n}function wh(d,f,k){d[f]=k}function vc(d,f){this.message=d;this.locator=f;Error.captureStackTrace&&Error.captureStackTrace(this,vc)}function Rh(){}function um(d,f,k,n,t){function a(V){var Ca=V.slice(1,-1);if(Object.hasOwnProperty.call(k,Ca))return k[Ca];if("#"===Ca.charAt(0))return V=parseInt(Ca.substr(1).replace("x","0x")),65535<V?(V-=65536,V=String.fromCharCode(55296+
(V>>10),56320+(V&1023))):V=String.fromCharCode(V),V;t.error("entity not found:"+V);return V}function b(V){if(V>x){var Ca=d.substring(x,V).replace(/&#?\w+;/g,a);p&&c(x);n.characters(Ca,0,V-x);x=V}}function c(V,Ca){for(;V>=g&&(Ca=m.exec(d));)e=Ca.index,g=e+Ca[0].length,p.lineNumber++;p.columnNumber=V-e+1}var e=0,g=0,m=/.*(?:\r\n?|\n)|.*$/g,p=n.locator;f=[{currentNSMap:f}];for(var u={},x=0;;){try{var y=d.indexOf("\x3c",x);if(0>y){if(!d.substr(x).match(/^\s*$/)){var B=n.doc,z=B.createTextNode(d.substr(x));
B.appendChild(z);n.currentElement=z}break}y>x&&b(y);switch(d.charAt(y+1)){case "/":var E=d.indexOf("\x3e",y+3),J=d.substring(y+2,E).replace(/[ \t\n\r]+$/g,""),G=f.pop();0>E?(J=d.substring(y+2).replace(/[\s<].*/,""),t.error("end tag name: "+J+" is not complete:"+G.tagName),E=y+1+J.length):J.match(/\s</)&&(J=J.replace(/[\s<].*/,""),t.error("end tag name: "+J+" maybe not complete"),E=y+1+J.length);var O=G.localNSMap,R=G.tagName==J;if(R||G.tagName&&G.tagName.toLowerCase()==J.toLowerCase()){n.endElement(G.uri,
G.localName,J);if(O)for(var W in O)Object.prototype.hasOwnProperty.call(O,W)&&n.endPrefixMapping(W);R||t.fatalError("end tag name: "+J+" is not match the current start tagName:"+G.tagName)}else f.push(G);E++;break;case "?":p&&c(y);E=vm(d,y,n);break;case "!":p&&c(y);E=wm(d,y,n,t);break;default:p&&c(y);var T=new Sh,ea=f[f.length-1].currentNSMap;E=xm(d,y,T,ea,a,t);var K=T.length;!T.closed&&ym(d,E,T.tagName,u)&&(T.closed=!0,k.nbsp||t.warning("unclosed xml attribute"));if(p&&K){for(var ba=Th(p,{}),ta=
0;ta<K;ta++){var Ea=T[ta];c(Ea.offset);Ea.locator=Th(p,{})}n.locator=ba;Uh(T,n,ea)&&f.push(T);n.locator=p}else Uh(T,n,ea)&&f.push(T);cd.isHTML(T.uri)&&!T.closed?E=zm(d,E,T.tagName,a,n):E++}}catch(V){if(V instanceof vc)throw V;t.error("element parse error: "+V);E=-1}E>x?x=E:b(Math.max(y,x)+1)}}function Th(d,f){f.lineNumber=d.lineNumber;f.columnNumber=d.columnNumber;return f}function xm(d,f,k,n,t,a){function b(u,x,y){k.attributeNames.hasOwnProperty(u)&&a.fatalError("Attribute "+u+" redefined");k.addValue(u,
x.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,t),y)}for(var c,e,g=++f,m=0;;){var p=d.charAt(g);switch(p){case "\x3d":if(1===m)c=d.slice(f,g),m=3;else if(2===m)m=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===m||1===m)if(1===m&&(a.warning('attribute value must after "\x3d"'),c=d.slice(f,g)),f=g+1,g=d.indexOf(p,f),0<g)e=d.slice(f,g),b(c,e,f-1),m=5;else throw Error("attribute value no end '"+p+"' match");else if(4==m)e=d.slice(f,g),b(c,e,f),a.warning('attribute "'+
c+'" missed start quot('+p+")!!"),f=g+1,m=5;else throw Error('attribute value must after "\x3d"');break;case "/":switch(m){case 0:k.setTagName(d.slice(f,g));case 5:case 6:case 7:m=7,k.closed=!0;case 4:case 1:break;case 2:k.closed=!0;break;default:throw Error("attribute invalid close char('/')");}break;case "":return a.error("unexpected end of input"),0==m&&k.setTagName(d.slice(f,g)),g;case "\x3e":switch(m){case 0:k.setTagName(d.slice(f,g));case 5:case 6:case 7:break;case 4:case 1:e=d.slice(f,g),"/"===
e.slice(-1)&&(k.closed=!0,e=e.slice(0,-1));case 2:2===m&&(e=c);4==m?(a.warning('attribute "'+e+'" missed quot(")!'),b(c,e,f)):(cd.isHTML(n[""])&&e.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+e+'" missed value!! "'+e+'" instead!!'),b(e,e,f));break;case 3:throw Error("attribute value missed!!");}return g;case "\u0080":p=" ";default:if(" ">=p)switch(m){case 0:k.setTagName(d.slice(f,g));m=6;break;case 1:c=d.slice(f,g);m=2;break;case 4:e=d.slice(f,g),a.warning('attribute "'+e+'" missed quot(")!!'),
b(c,e,f);case 5:m=6}else switch(m){case 2:k.tagName;cd.isHTML(n[""])&&c.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+c+'" missed value!! "'+c+'" instead2!!');b(c,c,f);f=g;m=1;break;case 5:a.warning('attribute space is required"'+c+'"!!');case 6:m=1;f=g;break;case 3:m=4;f=g;break;case 7:throw Error("elements closed character '/' and '\x3e' must be connected to");}}g++}}function Uh(d,f,k){for(var n=d.tagName,t=null,a=d.length;a--;){var b=d[a],c=b.qName,e=b.value,g=c.indexOf(":");
if(0<g){var m=b.prefix=c.slice(0,g);g=c.slice(g+1);m="xmlns"===m&&g}else g=c,m=null,m="xmlns"===c&&"";b.localName=g;!1!==m&&(null==t&&(t={},Vh(k,k={})),k[m]=t[m]=e,b.uri=cd.XMLNS,f.startPrefixMapping(m,e))}for(a=d.length;a--;)if(b=d[a],m=b.prefix)"xml"===m&&(b.uri=cd.XML),"xmlns"!==m&&(b.uri=k[m||""]);g=n.indexOf(":");0<g?(m=d.prefix=n.slice(0,g),g=d.localName=n.slice(g+1)):(m=null,g=d.localName=n);a=d.uri=k[m||""];f.startElement(a,g,n,d);if(d.closed){if(f.endElement(a,g,n),t)for(m in t)Object.prototype.hasOwnProperty.call(t,
m)&&f.endPrefixMapping(m)}else return d.currentNSMap=k,d.localNSMap=t,!0}function zm(d,f,k,n,t){if(/^(?:script|textarea)$/i.test(k)){var a=d.indexOf("\x3c/"+k+"\x3e",f);d=d.substring(f+1,a);if(/[&<]/.test(d)){if(/^script$/i.test(k))return t.characters(d,0,d.length),a;d=d.replace(/&#?\w+;/g,n);t.characters(d,0,d.length);return a}}return f+1}function ym(d,f,k,n){var t=n[k];null==t&&(t=d.lastIndexOf("\x3c/"+k+"\x3e"),t<f&&(t=d.lastIndexOf("\x3c/"+k)),n[k]=t);return t<f}function Vh(d,f){for(var k in d)Object.prototype.hasOwnProperty.call(d,
k)&&(f[k]=d[k])}function wm(d,f,k,n){switch(d.charAt(f+2)){case "-":if("-"===d.charAt(f+3)){var t=d.indexOf("--\x3e",f+4);if(t>f)return k.comment(d,f+4,t-f-4),t+3;n.error("Unclosed comment")}break;default:if("CDATA["==d.substr(f+3,6))return t=d.indexOf("]]\x3e",f+9),k.startCDATA(),k.characters(d,f+9,t-f-9),k.endCDATA(),t+3;a:{n=[];t=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;t.lastIndex=f;for(t.exec(d);f=t.exec(d);)if(n.push(f),f[1]){t=n;break a}t=void 0}var a=t.length;if(1<a&&/!doctype/i.test(t[0][0]))return d=
t[1][0],n=f=!1,3<a&&(/^public$/i.test(t[2][0])?(f=t[3][0],n=4<a&&t[4][0]):/^system$/i.test(t[2][0])&&(n=t[3][0])),t=t[a-1],k.startDTD(d,f,n),k.endDTD(),t.index+t[0].length}return-1}function vm(d,f,k){var n=d.indexOf("?\x3e",f);return n&&(d=d.substring(f,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(d[0].length,k.processingInstruction(d[1],d[2]),n+2):-1}function Sh(){this.attributeNames={}}function Am(d){return d.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function Wh(d){this.options=
d||{locator:{}}}function Bm(d,f,k){function n(b){var c=d[b];!c&&a&&(c=2==d.length?function(e){d(b,e)}:d);t[b]=c&&function(e){c("[xmldom "+b+"]\t"+e+sf(k))}||function(){}}if(!d){if(f instanceof Rd)return f;d=f}var t={},a=d instanceof Function;k=k||{};n("warning");n("error");n("fatalError");return t}function Rd(){this.cdata=!1}function wc(d,f){f.lineNumber=d.lineNumber;f.columnNumber=d.columnNumber}function sf(d){if(d)return"\n@"+(d.systemId||"")+"#[line:"+d.lineNumber+",col:"+d.columnNumber+"]"}function Xh(d,
f,k){return"string"==typeof d?d.substr(f,k):d.length>=f+k||f?new java.lang.String(d,f,k)+"":d}function Sd(d,f){d.currentElement?d.currentElement.appendChild(f):d.doc.appendChild(f)}function Yh(d){let f="info",k;const n=function(...t){k("log",f,t)};k=Cm(d,n);n.createLogger=t=>Yh(d+": "+t);n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:f};n.level=t=>{if("string"===typeof t){if(!n.levels.hasOwnProperty(t))throw Error(`"${t}" in not a valid log level`);
f=t}return f};n.history=()=>Va?[].concat(Va):[];n.history.filter=t=>(Va||[]).filter(a=>(new RegExp(`.*${t}.*`)).test(a[0]));n.history.clear=()=>{Va&&(Va.length=0)};n.history.disable=()=>{null!==Va&&(Va.length=0,Va=null)};n.history.enable=()=>{null===Va&&(Va=[])};n.error=(...t)=>k("error",f,t);n.warn=(...t)=>k("warn",f,t);n.debug=(...t)=>k("debug",f,t);return n}function xc(d,f){Zh(d).forEach(k=>f(d[k],k))}function $h(d,f,k=0){return Zh(d).reduce((n,t)=>f(n,d[t],t),k)}function ub(d){return!!d&&"object"===
typeof d}function yc(d){return ub(d)&&"[object Object]"===Dm.call(d)&&d.constructor===Object}function ma(...d){const f={};d.forEach(k=>{k&&xc(k,(n,t)=>{yc(n)?(yc(f[t])||(f[t]={}),f[t]=ma(f[t],n)):f[t]=n})});return f}function ai(d={}){const f=[];for(const k in d)d.hasOwnProperty(k)&&f.push(d[k]);return f}function Td(d,f,k,n=!0){const t=b=>Object.defineProperty(d,f,{value:b,enumerable:!0,writable:!0}),a={configurable:!0,enumerable:!0,get(){const b=k();t(b);return b}};n&&(a.set=t);return Object.defineProperty(d,
f,a)}function zc(){return P===D.document}function Ac(d){return ub(d)&&1===d.nodeType}function bi(){try{return D.parent!==D.self}catch(d){return!0}}function ci(d){return function(f,k){if("string"!==typeof f||!f.trim())return P[d](null);"string"===typeof k&&k.trim()&&(k=P.querySelector(k));k=Ac(k)?k:P;return k[d]&&k[d](f)}}function aa(d="div",f={},k={},n){const t=P.createElement(d);Object.getOwnPropertyNames(f).forEach(function(a){const b=f[a];if("textContent"===a)Tb(t,b);else if(t[a]!==b||"tabIndex"===
a)t[a]=b});Object.getOwnPropertyNames(k).forEach(function(a){t.setAttribute(a,k[a])});n&&tf(t,n);return t}function Tb(d,f){"undefined"===typeof d.textContent?d.innerText=f:d.textContent=f;return d}function uf(d,f){f.firstChild?f.insertBefore(d,f.firstChild):f.appendChild(d)}function dd(d,f){if(0<=f.indexOf(" "))throw Error("class has illegal whitespace characters");return d.classList.contains(f)}function ac(d,...f){d.classList.add(...f.reduce((k,n)=>k.concat(n.split(/\s+/)),[]));return d}function Ud(d,
...f){if(!d)return ca.warn("removeClass was called with an element that doesn't exist"),null;d.classList.remove(...f.reduce((k,n)=>k.concat(n.split(/\s+/)),[]));return d}function di(d,f,k){"function"===typeof k&&(k=k(d,f));"boolean"!==typeof k&&(k=void 0);f.split(/\s+/).forEach(n=>d.classList.toggle(n,k));return d}function ei(d,f){Object.getOwnPropertyNames(f).forEach(function(k){const n=f[k];null===n||"undefined"===typeof n||!1===n?d.removeAttribute(k):d.setAttribute(k,!0===n?"":n)})}function Ub(d){const f=
{},k="autoplay controls playsinline loop muted default defaultMuted".split(" ");if(d&&d.attributes&&0<d.attributes.length){d=d.attributes;for(let n=d.length-1;0<=n;n--){const t=d[n].name;let a=d[n].value;k.includes(t)&&(a=null!==a?!0:!1);f[t]=a}}return f}function fi(){P.body.focus();P.onselectstart=function(){return!1}}function gi(){P.onselectstart=function(){return!0}}function Bc(d){if(d&&d.getBoundingClientRect&&d.parentNode){const f=d.getBoundingClientRect(),k={};"bottom height left right top width".split(" ").forEach(n=>
{void 0!==f[n]&&(k[n]=f[n])});k.height||(k.height=parseFloat(Cc(d,"height")));k.width||(k.width=parseFloat(Cc(d,"width")));return k}}function ed(d){if(!d||d&&!d.offsetParent)return{left:0,top:0,width:0,height:0};const f=d.offsetWidth,k=d.offsetHeight;let n=0,t=0;for(;d.offsetParent&&d!==P[Vd.fullscreenElement];)n+=d.offsetLeft,t+=d.offsetTop,d=d.offsetParent;return{left:n,top:t,width:f,height:k}}function Wd(d,f){var k=0,n=0;if(Oa)for(var t=d;t&&"html"!==t.nodeName.toLowerCase();){var a=Cc(t,"transform");
/^matrix/.test(a)?(a=a.slice(7,-1).split(/,\s/).map(Number),k+=a[4],n+=a[5]):/^matrix3d/.test(a)&&(a=a.slice(9,-1).split(/,\s/).map(Number),k+=a[12],n+=a[13]);t=t.parentNode}t={};a=ed(f.target);d=ed(d);const b=d.width,c=d.height;let e=f.offsetY-(d.top-a.top);a=f.offsetX-(d.left-a.left);f.changedTouches&&(a=f.changedTouches[0].pageX-d.left,e=f.changedTouches[0].pageY+d.top,Oa&&(a-=k,e-=n));t.y=1-Math.max(0,Math.min(1,e/c));t.x=Math.max(0,Math.min(1,a/b));return t}function hi(d){return ub(d)&&3===d.nodeType}
function Xd(d){for(;d.firstChild;)d.removeChild(d.firstChild);return d}function ii(d){"function"===typeof d&&(d=d());return(Array.isArray(d)?d:[d]).map(f=>{"function"===typeof f&&(f=f());if(Ac(f)||hi(f))return f;if("string"===typeof f&&/\S/.test(f))return P.createTextNode(f)}).filter(f=>f)}function tf(d,f){ii(f).forEach(k=>d.appendChild(k));return d}function ji(d,f){return tf(Xd(d),f)}function fd(d){return void 0===d.button&&void 0===d.buttons||0===d.button&&void 0===d.buttons||"mouseup"===d.type&&
0===d.button&&0===d.buttons?!0:0!==d.button||1!==d.buttons?!1:!0}function Cc(d,f){if(!d||!f)return"";if("function"===typeof D.getComputedStyle){let k;try{k=D.getComputedStyle(d)}catch(n){return""}return k?k.getPropertyValue(f)||k[f]:""}return""}function ki(d){[...P.styleSheets].forEach(f=>{try{var k=[...f.cssRules].map(t=>t.cssText).join("");const n=P.createElement("style");n.textContent=k;d.document.head.appendChild(n)}catch(n){k=P.createElement("link"),k.rel="stylesheet",k.type=f.type,k.media=f.media.mediaText,
k.href=f.href,d.document.head.appendChild(k)}})}function vf(d,f){zc()&&(f&&(wf=f),D.setTimeout(Em,d))}function xf(){li=!0;D.removeEventListener("load",xf)}function mi(d,f){if(Pa.has(d)){var k=Pa.get(d);0===k.handlers[f].length&&(delete k.handlers[f],d.removeEventListener?d.removeEventListener(f,k.dispatcher,!1):d.detachEvent&&d.detachEvent("on"+f,k.dispatcher));0>=Object.getOwnPropertyNames(k.handlers).length&&(delete k.handlers,delete k.dispatcher,delete k.disabled);0===Object.getOwnPropertyNames(k).length&&
Pa.delete(d)}}function yf(d,f,k,n){k.forEach(function(t){d(f,t,n)})}function Yd(d){function f(){return!0}function k(){return!1}if(d.fixed_)return d;if(!d||!d.isPropagationStopped||!d.isImmediatePropagationStopped){const t=d||D.event;d={};for(var n in t)"layerX"!==n&&"layerY"!==n&&"keyLocation"!==n&&"webkitMovementX"!==n&&"webkitMovementY"!==n&&"path"!==n&&("returnValue"===n&&t.preventDefault||(d[n]=t[n]));d.target||(d.target=d.srcElement||P);d.relatedTarget||(d.relatedTarget=d.fromElement===d.target?
d.toElement:d.fromElement);d.preventDefault=function(){t.preventDefault&&t.preventDefault();d.returnValue=!1;t.returnValue=!1;d.defaultPrevented=!0};d.defaultPrevented=!1;d.stopPropagation=function(){t.stopPropagation&&t.stopPropagation();d.cancelBubble=!0;t.cancelBubble=!0;d.isPropagationStopped=f};d.isPropagationStopped=k;d.stopImmediatePropagation=function(){t.stopImmediatePropagation&&t.stopImmediatePropagation();d.isImmediatePropagationStopped=f;d.stopPropagation()};d.isImmediatePropagationStopped=
k;if(null!==d.clientX&&void 0!==d.clientX){n=P.documentElement;const a=P.body;d.pageX=d.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0);d.pageY=d.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0)}d.which=d.charCode||d.keyCode;null!==d.button&&void 0!==d.button&&(d.button=d.button&1?0:d.button&4?1:d.button&2?2:0)}d.fixed_=!0;return d}function $a(d,f,k){if(Array.isArray(f))return yf($a,d,f,k);Pa.has(d)||Pa.set(d,{});const n=Pa.get(d);
n.handlers||(n.handlers={});n.handlers[f]||(n.handlers[f]=[]);k.guid||(k.guid=vb++);n.handlers[f].push(k);n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,a){if(!n.disabled){t=Yd(t);var b=n.handlers[t.type];if(b){b=b.slice(0);for(let c=0,e=b.length;c<e&&!t.isImmediatePropagationStopped();c++)try{b[c].call(d,t,a)}catch(g){ca.error(g)}}}});1===n.handlers[f].length&&(d.addEventListener?(k=!1,Fm()&&-1<Gm.indexOf(f)&&(k={passive:!0}),d.addEventListener(f,n.dispatcher,k)):d.attachEvent&&d.attachEvent("on"+
f,n.dispatcher))}function Ka(d,f,k){if(Pa.has(d)){var n=Pa.get(d);if(n.handlers){if(Array.isArray(f))return yf(Ka,d,f,k);if(void 0===f)for(var t in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},t)&&(f=d,k=t,n.handlers[k]=[],mi(f,k));else if(t=n.handlers[f]){if(!k)n.handlers[f]=[];else if(k.guid)for(n=0;n<t.length;n++)t[n].guid===k.guid&&t.splice(n--,1);mi(d,f)}}}}function Dc(d,f,k){const n=Pa.has(d)?Pa.get(d):{},t=d.parentNode||d.ownerDocument;"string"===typeof f?f={type:f,target:d}:
f.target||(f.target=d);f=Yd(f);n.dispatcher&&n.dispatcher.call(d,f,k);if(t&&!f.isPropagationStopped()&&!0===f.bubbles)Dc.call(null,t,f,k);else if(!t&&!f.defaultPrevented&&f.target&&f.target[f.type]&&(Pa.has(f.target)||Pa.set(f.target,{}),d=Pa.get(f.target),f.target[f.type])){d.disabled=!0;if("function"===typeof f.target[f.type])f.target[f.type]();d.disabled=!1}return!f.defaultPrevented}function Zd(d,f,k){if(Array.isArray(f))return yf(Zd,d,f,k);const n=function(){Ka(d,f,n);k.apply(this,arguments)};
n.guid=k.guid=k.guid||vb++;$a(d,f,n)}function zf(d,f,k){const n=function(){Ka(d,f,n);k.apply(this,arguments)};n.guid=k.guid=k.guid||vb++;$a(d,f,n)}function Af(d,f={}){({eventBusKey:f}=f);if(f){if(!d[f].nodeName)throw Error(`The eventBusKey "${f}" does not refer to an element.`);d.eventBusEl_=d[f]}else d.eventBusEl_=aa("span",{className:"vjs-event-bus"});Object.assign(d,Hm);d.eventedCallbacks&&d.eventedCallbacks.forEach(k=>{k()});d.on("dispose",()=>{d.off();[d,d.el_,d.eventBusEl_].forEach(function(k){k&&
Pa.has(k)&&Pa.delete(k)});D.setTimeout(()=>{d.eventBusEl_=null},0)});return d}function ni(d,f){Object.assign(d,Im);d.state=Object.assign({},d.state,f);if("function"===typeof d.handleStateChanged&&Ib(d))d.on("statechanged",d.handleStateChanged);return d}function oi(d,f,k,n){var t=k.length-1;if("number"!==typeof n||0>n||n>t)throw Error(`Failed to execute '${d}' on 'TimeRanges': The index provided (${n}) is non-numeric or out of bounds (0-${t}).`);return k[n][f]}function Bf(d){let f;f=void 0===d||0===
d.length?{length:0,start(){throw Error("This TimeRanges object is empty");},end(){throw Error("This TimeRanges object is empty");}}:{length:d.length,start:oi.bind(null,"start",0,d),end:oi.bind(null,"end",1,d)};D.Symbol&&D.Symbol.iterator&&(f[D.Symbol.iterator]=()=>(d||[]).values());return f}function wb(d,f){return Array.isArray(d)?Bf(d):void 0===d||void 0===f?Bf():Bf([[d,f]])}function pi(d){Cf=d}function qi(){Cf=ri}function bc(d,f=d){return Cf(d,f)}function si(d,f){let k=0,n,t;if(!f)return 0;d&&d.length||
(d=wb(0,0));for(let a=0;a<d.length;a++)n=d.start(a),t=d.end(a),t>f&&(t=f),k+=t-n;return k/f}function Qa(d){if(d instanceof Qa)return d;"number"===typeof d?this.code=d:"string"===typeof d?this.message=d:ub(d)&&("number"===typeof d.code&&(this.code=d.code),Object.assign(this,d));this.message||(this.message=Qa.defaultMessages[this.code]||"")}function gd(d){return void 0!==d&&null!==d&&"function"===typeof d.then}function xb(d){gd(d)&&d.then(null,f=>{})}function Jm(d,f,k,n,t={}){const a=d.textTracks();
t.kind=f;k&&(t.label=k);n&&(t.language=n);t.tech=d;d=new Ra.text.TrackClass(t);a.addTrack(d);return d}function Km(d,f,k){d.setTimeout(()=>cc(f,dc[f.type],k,d),1)}function Lm(d,f){d.forEach(k=>k.setTech&&k.setTech(f))}function ti(d,f,k,n=null){var t="call"+va(k);t=d.reduce(Df(t),n);f=(n=t===$d)?null:f[k](t);for(t=d.length-1;0<=t;t--){const a=d[t];if(a[k])a[k](n,f)}return f}function Df(d){return(f,k)=>f===$d?$d:k[d]?k[d](f):f}function Mm(d,f){const k=Ef[d.id()];let n=null;if(void 0===k||null===k)return n=
f(d),Ef[d.id()]=[[f,n]],n;for(let t=0;t<k.length;t++){const [a,b]=k[t];a===f&&(n=b)}null===n&&(n=f(d),k.push([f,n]));return n}function cc(d={},f=[],k,n,t=[],a=!1){const [b,...c]=f;if("string"===typeof b)cc(d,dc[b],k,n,t,a);else if(b){const e=Mm(n,b);if(!e.setSource)return t.push(e),cc(d,c,k,n,t,a);e.setSource(Object.assign({},d),function(g,m){if(g)return cc(d,c,k,n,t,a);t.push(e);cc(m,d.type===m.type?c:dc[m.type],k,n,t,a)})}else c.length?cc(d,c,k,n,t,a):a?k(d,t):cc(d,dc["*"],k,n,t,!0)}function ui(d){if(!d.type){const f=
ae(d.src);f&&(d.type=f)}return d}function Ff(d,f){if(4===d.length)d=d[1]+d[1]+d[2]+d[2]+d[3]+d[3];else if(7===d.length)d=d.slice(1);else throw Error("Invalid color code provided, "+d+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(d.slice(0,2),16)+","+parseInt(d.slice(2,4),16)+","+parseInt(d.slice(4,6),16)+","+f+")"}function hd(d,f,k){try{d.style[f]=k}catch(n){}}function ec(d,f,k){d=Number(d);return Math.min(k,Math.max(f,isNaN(d)?f:d))}function vi(d,f){f&&(d=f(d));if(d&&"none"!==
d)return d}function Nm(d,f){let k=!1;return function(...n){k||ca.warn(d);k=!0;return f.apply(this,n)}}function mb(d,f,k,n){return Nm(`${f} is deprecated and will be removed in ${d}.0; please use ${k} instead.`,n)}function H(d,f,k){let n=H.getPlayer(d);if(n)return f&&ca.warn(`Player "${d}" is already initialised. Options will not be applied.`),k&&n.ready(k),n;const t="string"===typeof d?Vb("#"+wi(d)):d;if(!Ac(t))throw new TypeError("The element or ID supplied is not valid. (videojs)");d="getRootNode"in
t&&t.getRootNode()instanceof D.ShadowRoot?t.getRootNode():t.ownerDocument.body;t.ownerDocument.defaultView&&d.contains(t)||ca.warn("The element supplied is not included in the DOM");f=f||{};!0===f.restoreEl&&(f.restoreEl=(t.parentNode&&t.parentNode.hasAttribute("data-vjs-player")?t.parentNode:t).cloneNode(!0));Wb("beforesetup").forEach(a=>{a=a(t,ma(f));!ub(a)||Array.isArray(a)?ca.error("please return an object in beforesetup hooks"):f=ma(f,a)});n=new (M.getComponent("Player"))(t,f,k);Wb("setup").forEach(a=>
a(n));return n}function ka(...d){const f=H.obj||H;return(f.merge||f.mergeOptions).apply(f,d)}function La(...d){const f=H.time||H;return(f.createTimeRanges||f.createTimeRanges).apply(f,d)}function Jb(){}var ab="undefined"!==typeof window?window:"undefined"!==typeof hb.commonjsGlobal?hb.commonjsGlobal:"undefined"!==typeof self?self:{};const D=hb.getDefaultExportFromCjs(ab);var xi=Array.prototype.slice,be=function(d,f){"length"in d||(d=[d]);for(d=xi.call(d);d.length;){var k=d.shift(),n=f(k);if(n)return n;
k.childNodes&&k.childNodes.length&&(d=xi.call(k.childNodes).concat(d))}};oc.prototype.nodeType=8;oc.prototype.nodeName="#comment";oc.prototype.toString=function(){return"[object Comment]"};Qb.prototype.type="DOMTextNode";Qb.prototype.nodeType=3;Qb.prototype.nodeName="#text";Qb.prototype.toString=function(){return this.data};Qb.prototype.replaceData=function(d,f,k){var n=this.data,t=n.substring(0,d);d=n.substring(d+f,n.length);this.data=t+k+d;this.length=this.data.length};var yi=function(d){var f=
this,k=d.type;d.target||(d.target=f);f.listeners||(f.listeners={});if(k=f.listeners[k])return k.forEach(function(n){d.currentTarget=f;"function"===typeof n?n(d):n.handleEvent(d)});f.parentNode&&f.parentNode.dispatchEvent(d)},zi=function(d,f){this.listeners||(this.listeners={});this.listeners[d]||(this.listeners[d]=[]);-1===this.listeners[d].indexOf(f)&&this.listeners[d].push(f)},Ai=function(d,f){this.listeners&&this.listeners[d]&&(d=this.listeners[d],f=d.indexOf(f),-1!==f&&d.splice(f,1))},bm="area base br col embed hr img input keygen link menuitem meta param source track wbr".split(" ");
fa.prototype.type="DOMElement";fa.prototype.nodeType=1;fa.prototype.appendChild=function(d){d.parentNode&&d.parentNode.removeChild(d);this.childNodes.push(d);d.parentNode=this;return d};fa.prototype.replaceChild=function(d,f){d.parentNode&&d.parentNode.removeChild(d);var k=this.childNodes.indexOf(f);f.parentNode=null;this.childNodes[k]=d;d.parentNode=this;return f};fa.prototype.removeChild=function(d){var f=this.childNodes.indexOf(d);this.childNodes.splice(f,1);d.parentNode=null;return d};fa.prototype.insertBefore=
function(d,f){d.parentNode&&d.parentNode.removeChild(d);f=null===f||void 0===f?-1:this.childNodes.indexOf(f);-1<f?this.childNodes.splice(f,0,d):this.childNodes.push(d);d.parentNode=this;return d};fa.prototype.setAttributeNS=function(d,f,k){var n=null,t=f,a=f.indexOf(":");-1<a&&(n=f.substr(0,a),t=f.substr(a+1));"INPUT"===this.tagName&&"type"===f?this.type=k:(this._attributes[d]||(this._attributes[d]={}))[t]={value:k,prefix:n}};fa.prototype.getAttributeNS=function(d,f){d=(d=this._attributes[d])&&d[f]&&
d[f].value;return"INPUT"===this.tagName&&"type"===f?this.type:"string"!==typeof d?null:d};fa.prototype.removeAttributeNS=function(d,f){(d=this._attributes[d])&&delete d[f]};fa.prototype.hasAttributeNS=function(d,f){d=this._attributes[d];return!!d&&f in d};fa.prototype.setAttribute=function(d,f){return this.setAttributeNS(null,d,f)};fa.prototype.getAttribute=function(d){return this.getAttributeNS(null,d)};fa.prototype.removeAttribute=function(d){return this.removeAttributeNS(null,d)};fa.prototype.hasAttribute=
function(d){return this.hasAttributeNS(null,d)};fa.prototype.removeEventListener=Ai;fa.prototype.addEventListener=zi;fa.prototype.dispatchEvent=yi;fa.prototype.focus=function(){};fa.prototype.toString=function(){return mh(this)};fa.prototype.getElementsByClassName=function(d){var f=d.split(" "),k=[];be(this,function(n){if(1===n.nodeType){var t=(n.className||"").split(" ");f.every(function(a){return-1!==t.indexOf(a)})&&k.push(n)}});return k};fa.prototype.getElementsByTagName=function(d){d=d.toLowerCase();
var f=[];be(this.childNodes,function(k){1!==k.nodeType||"*"!==d&&k.tagName.toLowerCase()!==d||f.push(k)});return f};fa.prototype.contains=function(d){return be(this,function(f){return d===f})||!1};qb.prototype.type="DocumentFragment";qb.prototype.nodeType=11;qb.prototype.nodeName="#document-fragment";qb.prototype.appendChild=fa.prototype.appendChild;qb.prototype.replaceChild=fa.prototype.replaceChild;qb.prototype.removeChild=fa.prototype.removeChild;qb.prototype.toString=function(){return this.childNodes.map(function(d){return String(d)}).join("")};
af.prototype.initEvent=function(d,f,k){this.type=d;this.bubbles=f;this.cancelable=k};af.prototype.preventDefault=function(){};var bb=Jd.prototype;bb.createTextNode=function(d){return new Qb(d,this)};bb.createElementNS=function(d,f){return new fa(f,this,null===d?null:String(d))};bb.createElement=function(d){return new fa(d,this)};bb.createDocumentFragment=function(){return new qb(this)};bb.createEvent=function(d){return new af};bb.createComment=function(d){return new oc(d,this)};bb.getElementById=
function(d){d=String(d);return be(this.childNodes,function(f){if(String(f.id)===d)return f})||null};bb.getElementsByClassName=fa.prototype.getElementsByClassName;bb.getElementsByTagName=fa.prototype.getElementsByTagName;bb.contains=fa.prototype.contains;bb.removeEventListener=Ai;bb.addEventListener=zi;bb.dispatchEvent=yi;var Om=new Jd,Bi="undefined"!==typeof hb.commonjsGlobal?hb.commonjsGlobal:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var Gf=document;else(Gf=Bi["__GLOBAL_DOCUMENT_CACHE@4"])||
(Gf=Bi["__GLOBAL_DOCUMENT_CACHE@4"]=Om);var Hf=Gf;const P=hb.getDefaultExportFromCjs(Hf);var ce={exports:{}};ce.exports;(function(d,f){function k(c){if(c&&"object"===typeof c){var e=c.which||c.keyCode||c.charCode;e&&(c=e)}if("number"===typeof c)return a[c];c=String(c);if((e=n[c.toLowerCase()])||(e=t[c.toLowerCase()]))return e;if(1===c.length)return c.charCodeAt(0)}k.isEventKey=function(c,e){if(c&&"object"===typeof c){c=c.which||c.keyCode||c.charCode;if(null===c||void 0===c)return!1;if("string"===
typeof e){var g=n[e.toLowerCase()];if(g||(g=t[e.toLowerCase()]))return g===c}else if("number"===typeof e)return e===c;return!1}};f=d.exports=k;var n=f.code=f.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,
"my computer":182,"my calculator":183,";":186,"\x3d":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},t=f.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(d=97;123>d;d++)n[String.fromCharCode(d)]=d-32;for(d=48;58>d;d++)n[d-48]=d;for(d=1;13>d;d++)n["f"+d]=d+111;for(d=0;10>d;d++)n["numpad "+d]=d+96;var a=f.names=f.title=
{};for(d in n)a[n[d]]=d;for(var b in t)n[b]=t[b]})(ce,ce.exports);const Y=hb.getDefaultExportFromCjs(ce.exports),Pm=hb.getDefaultExportFromCjs(function(d,f){var k=null;try{var n=JSON.parse(d,f)}catch(t){k=t}return[k,n]});var If={},Jf={exports:{}};Jf.exports;(function(d){function f(){d.exports=f=Object.assign?Object.assign.bind():function(k){for(var n=1;n<arguments.length;n++){var t=arguments[n],a;for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&(k[a]=t[a])}return k};d.exports.__esModule=!0;d.exports["default"]=
d.exports;return f.apply(this,arguments)}d.exports=f;d.exports.__esModule=!0;d.exports["default"]=d.exports})(Jf);var fm=Object.prototype.toString,gm=Jf.exports;rb.httpHandler=function(d,f){void 0===f&&(f=!1);return function(k,n,t){if(k)d(k);else if(400<=n.statusCode&&599>=n.statusCode){k=t;if(f)if(ab.TextDecoder){n=dm(n.headers&&n.headers["content-type"]);try{k=(new TextDecoder(n)).decode(t)}catch(a){}}else k=String.fromCharCode.apply(null,new Uint8Array(t));d({cause:k})}else d(null,t)}};var hm=
function(d){var f={};if(!d)return f;d.trim().split("\n").forEach(function(k){var n=k.indexOf(":"),t=k.slice(0,n).trim().toLowerCase();k=k.slice(n+1).trim();"undefined"===typeof f[t]?f[t]=k:Array.isArray(f[t])?f[t].push(k):f[t]=[f[t],k]});return f};If=rb;If.default=rb;rb.XMLHttpRequest=ab.XMLHttpRequest||im;rb.XDomainRequest="withCredentials"in new rb.XMLHttpRequest?rb.XMLHttpRequest:ab.XDomainRequest;(function(d,f){for(var k=0;k<d.length;k++)f(d[k])})("get put post patch head delete".split(" "),function(d){rb["delete"===
d?"del":d]=function(f,k,n){k=oh(f,k,n);k.method=d.toUpperCase();return ph(k)}});const Ci=hb.getDefaultExportFromCjs(If);var Di={},cf=Object.create||function(){function d(){}return function(f){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");d.prototype=f;return new d}}();Za.prototype=cf(Error.prototype);Za.prototype.constructor=Za;Za.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};Wc.prototype=
{set:function(d,f){this.get(d)||""===f||(this.values[d]=f)},get:function(d,f,k){return k?this.has(d)?this.values[d]:f[k]:this.has(d)?this.values[d]:f},has:function(d){return d in this.values},alt:function(d,f,k){for(var n=0;n<k.length;++n)if(f===k[n]){this.set(d,f);break}},integer:function(d,f){/^-?\d+$/.test(f)&&this.set(d,parseInt(f,10))},percent:function(d,f){return f.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(f=parseFloat(f),0<=f&&100>=f)?(this.set(d,f),!0):!1}};var df=Hf.createElement&&Hf.createElement("textarea"),
km={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},sh={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},lm={v:"title",lang:"lang"},rh={rt:"ruby"},th=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],
[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,
67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],
[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];ef.prototype.applyStyles=function(d,f){f=f||this.div;for(var k in d)d.hasOwnProperty(k)&&(f.style[k]=d[k])};ef.prototype.formatStyle=function(d,f){return 0===d?0:d+f};Kd.prototype=cf(ef.prototype);Kd.prototype.constructor=
Kd;Na.prototype.move=function(d,f){f=void 0!==f?f:this.lineHeight;switch(d){case "+x":this.left+=f;this.right+=f;break;case "-x":this.left-=f;this.right-=f;break;case "+y":this.top+=f;this.bottom+=f;break;case "-y":this.top-=f,this.bottom-=f}};Na.prototype.overlaps=function(d){return this.left<d.right&&this.right>d.left&&this.top<d.bottom&&this.bottom>d.top};Na.prototype.overlapsAny=function(d){for(var f=0;f<d.length;f++)if(this.overlaps(d[f]))return!0;return!1};Na.prototype.within=function(d){return this.top>=
d.top&&this.bottom<=d.bottom&&this.left>=d.left&&this.right<=d.right};Na.prototype.overlapsOppositeAxis=function(d,f){switch(f){case "+x":return this.left<d.left;case "-x":return this.right>d.right;case "+y":return this.top<d.top;case "-y":return this.bottom>d.bottom}};Na.prototype.intersectPercentage=function(d){return Math.max(0,Math.min(this.right,d.right)-Math.max(this.left,d.left))*Math.max(0,Math.min(this.bottom,d.bottom)-Math.max(this.top,d.top))/(this.height*this.width)};Na.prototype.toCSSCompatValues=
function(d){return{top:this.top-d.top,bottom:d.bottom-this.bottom,left:this.left-d.left,right:d.right-this.right,height:this.height,width:this.width}};Na.getSimpleBoxPosition=function(d){var f=d.div?d.div.offsetHeight:d.tagName?d.offsetHeight:0,k=d.div?d.div.offsetWidth:d.tagName?d.offsetWidth:0,n=d.div?d.div.offsetTop:d.tagName?d.offsetTop:0;d=d.div?d.div.getBoundingClientRect():d.tagName?d.getBoundingClientRect():d;return{left:d.left,right:d.right,top:d.top||n,height:d.height||f,bottom:d.bottom||
n+(d.height||f),width:d.width||k}};pc.StringDecoder=function(){return{decode:function(d){if(!d)return"";if("string"!==typeof d)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(d))}}};pc.convertCueToDOMTree=function(d,f){return d&&f?qh(d,f):null};pc.processCues=function(d,f,k){if(!d||!f||!k)return null;for(;k.firstChild;)k.removeChild(k.firstChild);var n=d.document.createElement("div");n.style.position="absolute";n.style.left="0";n.style.right="0";n.style.top=
"0";n.style.bottom="0";n.style.margin="1.5%";k.appendChild(n);if(function(c){for(var e=0;e<c.length;e++)if(c[e].hasBeenReset||!c[e].displayState)return!0;return!1}(f)){var t=[],a=Na.getSimpleBoxPosition(n),b={font:Math.round(5*a.height)/100+"px sans-serif"};(function(){for(var c,e,g=0;g<f.length;g++){e=f[g];c=new Kd(d,e,b);n.appendChild(c.div);var m=void 0,p=void 0,u=void 0,x=c,y=a;p=t;var B=new Na(x),z=x.cue;if("number"===typeof z.line&&(z.snapToLines||0<=z.line&&100>=z.line))var E=z.line;else if(z.track&&
z.track.textTrackList&&z.track.textTrackList.mediaElement){E=z.track;for(var J=E.textTrackList,G=0,O=0;O<J.length&&J[O]!==E;O++)"showing"===J[O].mode&&G++;E=-1*++G}else E=-1;J=[];if(z.snapToLines){switch(z.vertical){case "":J=["+y","-y"];u="height";break;case "rl":J=["+x","-x"];u="width";break;case "lr":J=["-x","+x"],u="width"}G=B.lineHeight;O=G*Math.round(E);u=y[u]+G;var R=J[0];Math.abs(O)>u&&(O=(0>O?-1:1)*Math.ceil(u/G)*G);0>E&&(O+=""===z.vertical?y.height:y.width,J=J.reverse());B.move(R,O)}else{B=
B.lineHeight/y.height*100;switch(z.lineAlign){case "center":E-=B/2;break;case "end":E-=B}switch(z.vertical){case "":x.applyStyles({top:x.formatStyle(E,"%")});break;case "rl":x.applyStyles({left:x.formatStyle(E,"%")});break;case "lr":x.applyStyles({right:x.formatStyle(E,"%")})}J=["+y","-x","+x","-y"];B=new Na(x)}a:{z=B;B=J;u=new Na(z);E=1;for(J=0;J<B.length;J++){for(;z.overlapsOppositeAxis(y,B[J])||z.within(y)&&z.overlapsAny(p);)z.move(B[J]);if(z.within(y)){p=z;break a}G=z.intersectPercentage(y);E>
G&&(m=new Na(z),E=G);z=new Na(u)}p=m||u}x.move(p.toCSSCompatValues(y));e.displayState=c.div;t.push(Na.getSimpleBoxPosition(c))}})()}else for(k=0;k<f.length;k++)n.appendChild(f[k].displayState)};pc.Parser=function(d,f,k){k||(k=f,f={});f||(f={});this.window=d;this.vttjs=f;this.state="INITIAL";this.buffer="";this.decoder=k||new TextDecoder("utf8");this.regionList=[]};pc.Parser.prototype={reportOrThrowError:function(d){if(d instanceof Za)this.onparsingerror&&this.onparsingerror(d);else throw d;},parse:function(d){function f(){for(var g=
a.buffer,m=0;m<g.length&&"\r"!==g[m]&&"\n"!==g[m];)++m;var p=g.substr(0,m);"\r"===g[m]&&++m;"\n"===g[m]&&++m;a.buffer=g.substr(m);return p}function k(g){var m=new Wc;Xc(g,function(p,u){switch(p){case "id":m.set(p,u);break;case "width":m.percent(p,u);break;case "lines":m.integer(p,u);break;case "regionanchor":case "viewportanchor":u=u.split(",");if(2!==u.length)break;var x=new Wc;x.percent("x",u[0]);x.percent("y",u[1]);if(!x.has("x")||!x.has("y"))break;m.set(p+"X",x.get("x"));m.set(p+"Y",x.get("y"));
break;case "scroll":m.alt(p,u,["up"])}},/=/,/\s/);m.has("id")&&(g=new (a.vttjs.VTTRegion||a.window.VTTRegion),g.width=m.get("width",100),g.lines=m.get("lines",3),g.regionAnchorX=m.get("regionanchorX",0),g.regionAnchorY=m.get("regionanchorY",100),g.viewportAnchorX=m.get("viewportanchorX",0),g.viewportAnchorY=m.get("viewportanchorY",100),g.scroll=m.get("scroll",""),a.onregion&&a.onregion(g),a.regionList.push({id:m.get("id"),region:g}))}function n(g){var m=new Wc;Xc(g,function(p,u){switch(p){case "MPEGT":m.integer(p+
"S",u);break;case "LOCA":m.set(p+"L",bf(u))}},/[^\d]:/,/,/);a.ontimestampmap&&a.ontimestampmap({MPEGTS:m.get("MPEGTS"),LOCAL:m.get("LOCAL")})}function t(g){g.match(/X-TIMESTAMP-MAP/)?Xc(g,function(m,p){switch(m){case "X-TIMESTAMP-MAP":n(p)}},/=/):Xc(g,function(m,p){switch(m){case "Region":k(p)}},/:/)}var a=this;d&&(a.buffer+=a.decoder.decode(d,{stream:!0}));try{if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;var b=f();var c=b.match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new Za(Za.Errors.BadSignature);
a.state="HEADER"}for(d=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;d?d=!1:b=f();switch(a.state){case "HEADER":/:/.test(b)?t(b):b||(a.state="ID");continue;case "NOTE":b||(a.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(b)){a.state="NOTE";break}if(!b)continue;a.cue=new (a.vttjs.VTTCue||a.window.VTTCue)(0,0,"");try{a.cue.align="center"}catch(g){a.cue.align="middle"}a.state="CUE";if(-1===b.indexOf("--\x3e")){a.cue.id=b;continue}case "CUE":try{jm(b,a.cue,a.regionList)}catch(g){a.reportOrThrowError(g);
a.cue=null;a.state="BADCUE";continue}a.state="CUETEXT";continue;case "CUETEXT":var e=-1!==b.indexOf("--\x3e");if(!b||e&&(d=!0)){a.oncue&&a.oncue(a.cue);a.cue=null;a.state="ID";continue}a.cue.text&&(a.cue.text+="\n");a.cue.text+=b.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case "BADCUE":b||(a.state="ID")}}}catch(g){a.reportOrThrowError(g);if("CUETEXT"===a.state&&a.cue&&a.oncue)a.oncue(a.cue);a.cue=null;a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=
this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new Za(Za.Errors.BadSignature);}catch(d){this.reportOrThrowError(d)}this.onflush&&this.onflush();return this}};var pm={"":1,lr:1,rl:1},om={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};uh.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Qm={"":!0,up:!0},fc=Di={WebVTT:pc,VTTCue:uh,VTTRegion:function(){var d=
100,f=3,k=0,n=100,t=0,a=100,b="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return d},set:function(c){if(!Yc(c))throw Error("Width must be between 0 and 100.");d=c}},lines:{enumerable:!0,get:function(){return f},set:function(c){if("number"!==typeof c)throw new TypeError("Lines must be set to a number.");f=c}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(c){if(!Yc(c))throw Error("RegionAnchorX must be between 0 and 100.");n=c}},regionAnchorX:{enumerable:!0,
get:function(){return k},set:function(c){if(!Yc(c))throw Error("RegionAnchorY must be between 0 and 100.");k=c}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(c){if(!Yc(c))throw Error("ViewportAnchorY must be between 0 and 100.");a=c}},viewportAnchorX:{enumerable:!0,get:function(){return t},set:function(c){if(!Yc(c))throw Error("ViewportAnchorX must be between 0 and 100.");t=c}},scroll:{enumerable:!0,get:function(){return b},set:function(c){c="string"!==typeof c?!1:Qm[c.toLowerCase()]?
c.toLowerCase():!1;!1===c?console.warn("Scroll: an invalid or illegal string was specified."):b=c}}})}};ab.vttjs=fc;ab.WebVTT=fc.WebVTT;var Rm=fc.VTTCue,Sm=fc.VTTRegion,Tm=ab.VTTCue,Um=ab.VTTRegion;fc.shim=function(){ab.VTTCue=Rm;ab.VTTRegion=Sm};fc.restore=function(){ab.VTTCue=Tm;ab.VTTRegion=Um};ab.VTTCue||fc.shim();const Ei=hb.getDefaultExportFromCjs(Di);var de={exports:{}};de.exports;(function(d,f){(function(k){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,
t=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,b=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(e,g,m){m=m||{};e=e.trim();g=g.trim();if(!g){if(!m.alwaysNormalize)return e;m=c.parseURL(e);if(!m)throw Error("Error trying to parse base URL.");m.path=c.normalizePath(m.path);return c.buildURLFromParts(m)}var p=c.parseURL(g);if(!p)throw Error("Error trying to parse relative URL.");if(p.scheme){if(!m.alwaysNormalize)return g;p.path=c.normalizePath(p.path);return c.buildURLFromParts(p)}g=
c.parseURL(e);if(!g)throw Error("Error trying to parse base URL.");!g.netLoc&&g.path&&"/"!==g.path[0]&&(e=t.exec(g.path),g.netLoc=e[1],g.path=e[2]);g.netLoc&&!g.path&&(g.path="/");e={scheme:g.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};p.netLoc||(e.netLoc=g.netLoc,"/"!==p.path[0]&&(p.path?(g=g.path,g=g.substring(0,g.lastIndexOf("/")+1)+p.path,e.path=c.normalizePath(g)):(e.path=g.path,p.params||(e.params=g.params,p.query||(e.query=g.query)))));null===e.path&&
(e.path=m.alwaysNormalize?c.normalizePath(p.path):p.path);return c.buildURLFromParts(e)},parseURL:function(e){return(e=n.exec(e))?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(b,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};d.exports=c})()})(de,
de.exports);const ee=hb.getDefaultExportFromCjs(de.exports);var Kf=function(){function d(){this.listeners={}}var f=d.prototype;f.on=function(k,n){this.listeners[k]||(this.listeners[k]=[]);this.listeners[k].push(n)};f.off=function(k,n){if(!this.listeners[k])return!1;n=this.listeners[k].indexOf(n);this.listeners[k]=this.listeners[k].slice(0);this.listeners[k].splice(n,1);return-1<n};f.trigger=function(k){var n=this.listeners[k];if(n)if(2===arguments.length)for(var t=n.length,a=0;a<t;++a)n[a].call(this,
arguments[1]);else{t=Array.prototype.slice.call(arguments,1);a=n.length;for(var b=0;b<a;++b)n[b].apply(this,t)}};f.dispose=function(){this.listeners={}};f.pipe=function(k){this.on("data",function(n){k.push(n)})};return d}();class Vm extends Kf{constructor(){super();this.buffer=""}push(d){this.buffer+=d;for(d=this.buffer.indexOf("\n");-1<d;d=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,d)),this.buffer=this.buffer.substring(d+1)}}const Wm=String.fromCharCode(9),Lf=function(d){d=
/([0-9.]*)?@?([0-9.]*)?/.exec(d||"");const f={};d[1]&&(f.length=parseInt(d[1],10));d[2]&&(f.offset=parseInt(d[2],10));return f},ib=function(d){const f={};if(!d)return f;d=d.split.call(d,RegExp('(?:^|,)((?:[^\x3d]*)\x3d(?:"[^"]*"|[^,]*))'));let k=d.length,n;for(;k--;)""!==d[k]&&(n=/([^=]*)=(.*)/.exec(d[k]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),f[n[0]]=n[1]);return f};class Xm extends Kf{constructor(){super();this.customParsers=
[];this.tagMappers=[]}push(d){let f,k;d=d.trim();0!==d.length&&("#"!==d[0]?this.trigger("data",{type:"uri",uri:d}):this.tagMappers.reduce((n,t)=>{t=t(d);return t===d?n:n.concat([t])},[d]).forEach(n=>{for(var t=0;t<this.customParsers.length;t++)if(this.customParsers[t].call(this,n))return;if(0!==n.indexOf("#EXT"))this.trigger("data",{type:"comment",text:n.slice(1)});else if(n=n.replace("\r",""),f=/^#EXTM3U/.exec(n))this.trigger("data",{type:"tag",tagType:"m3u"});else if(f=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(n))k=
{type:"tag",tagType:"inf"},f[1]&&(k.duration=parseFloat(f[1])),f[2]&&(k.title=f[2]),this.trigger("data",k);else if(f=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(n))k={type:"tag",tagType:"targetduration"},f[1]&&(k.duration=parseInt(f[1],10)),this.trigger("data",k);else if(f=/^#EXT-X-VERSION:([0-9.]*)?/.exec(n))k={type:"tag",tagType:"version"},f[1]&&(k.version=parseInt(f[1],10)),this.trigger("data",k);else if(f=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(n))k={type:"tag",tagType:"media-sequence"},f[1]&&
(k.number=parseInt(f[1],10)),this.trigger("data",k);else if(f=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(n))k={type:"tag",tagType:"discontinuity-sequence"},f[1]&&(k.number=parseInt(f[1],10)),this.trigger("data",k);else if(f=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(n))k={type:"tag",tagType:"playlist-type"},f[1]&&(k.playlistType=f[1]),this.trigger("data",k);else if(f=/^#EXT-X-BYTERANGE:(.*)?$/.exec(n))k=Rb(Lf(f[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",k);else if(f=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(n))k=
{type:"tag",tagType:"allow-cache"},f[1]&&(k.allowed=!/NO/.test(f[1])),this.trigger("data",k);else if(f=/^#EXT-X-MAP:(.*)$/.exec(n)){k={type:"tag",tagType:"map"};if(f[1]){var a=ib(f[1]);a.URI&&(k.uri=a.URI);a.BYTERANGE&&(k.byterange=Lf(a.BYTERANGE))}this.trigger("data",k)}else if(f=/^#EXT-X-STREAM-INF:(.*)$/.exec(n))k={type:"tag",tagType:"stream-inf"},f[1]&&(k.attributes=ib(f[1]),k.attributes.RESOLUTION&&(a=k.attributes.RESOLUTION.split("x"),n={},a[0]&&(n.width=parseInt(a[0],10)),a[1]&&(n.height=parseInt(a[1],
10)),k.attributes.RESOLUTION=n),k.attributes.BANDWIDTH&&(k.attributes.BANDWIDTH=parseInt(k.attributes.BANDWIDTH,10)),k.attributes["FRAME-RATE"]&&(k.attributes["FRAME-RATE"]=parseFloat(k.attributes["FRAME-RATE"])),k.attributes["PROGRAM-ID"]&&(k.attributes["PROGRAM-ID"]=parseInt(k.attributes["PROGRAM-ID"],10))),this.trigger("data",k);else if(f=/^#EXT-X-MEDIA:(.*)$/.exec(n))k={type:"tag",tagType:"media"},f[1]&&(k.attributes=ib(f[1])),this.trigger("data",k);else if(f=/^#EXT-X-ENDLIST/.exec(n))this.trigger("data",
{type:"tag",tagType:"endlist"});else if(f=/^#EXT-X-DISCONTINUITY/.exec(n))this.trigger("data",{type:"tag",tagType:"discontinuity"});else if(f=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(n))k={type:"tag",tagType:"program-date-time"},f[1]&&(k.dateTimeString=f[1],k.dateTimeObject=new Date(f[1])),this.trigger("data",k);else if(f=/^#EXT-X-KEY:(.*)$/.exec(n))k={type:"tag",tagType:"key"},f[1]&&(k.attributes=ib(f[1]),k.attributes.IV&&("0x"===k.attributes.IV.substring(0,2).toLowerCase()&&(k.attributes.IV=k.attributes.IV.substring(2)),
k.attributes.IV=k.attributes.IV.match(/.{8}/g),k.attributes.IV[0]=parseInt(k.attributes.IV[0],16),k.attributes.IV[1]=parseInt(k.attributes.IV[1],16),k.attributes.IV[2]=parseInt(k.attributes.IV[2],16),k.attributes.IV[3]=parseInt(k.attributes.IV[3],16),k.attributes.IV=new Uint32Array(k.attributes.IV))),this.trigger("data",k);else if(f=/^#EXT-X-START:(.*)$/.exec(n))k={type:"tag",tagType:"start"},f[1]&&(k.attributes=ib(f[1]),k.attributes["TIME-OFFSET"]=parseFloat(k.attributes["TIME-OFFSET"]),k.attributes.PRECISE=
/YES/.test(k.attributes.PRECISE)),this.trigger("data",k);else if(f=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(n))k={type:"tag",tagType:"cue-out-cont"},k.data=f[1]?f[1]:"",this.trigger("data",k);else if(f=/^#EXT-X-CUE-OUT:(.*)?$/.exec(n))k={type:"tag",tagType:"cue-out"},k.data=f[1]?f[1]:"",this.trigger("data",k);else if(f=/^#EXT-X-CUE-IN:(.*)?$/.exec(n))k={type:"tag",tagType:"cue-in"},k.data=f[1]?f[1]:"",this.trigger("data",k);else if((f=/^#EXT-X-SKIP:(.*)$/.exec(n))&&f[1])k={type:"tag",tagType:"skip"},k.attributes=
ib(f[1]),k.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(k.attributes["SKIPPED-SEGMENTS"]=parseInt(k.attributes["SKIPPED-SEGMENTS"],10)),k.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(k.attributes["RECENTLY-REMOVED-DATERANGES"]=k.attributes["RECENTLY-REMOVED-DATERANGES"].split(Wm)),this.trigger("data",k);else if((f=/^#EXT-X-PART:(.*)$/.exec(n))&&f[1])k={type:"tag",tagType:"part"},k.attributes=ib(f[1]),["DURATION"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=
parseFloat(k.attributes[b]))}),["INDEPENDENT","GAP"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=/YES/.test(k.attributes[b]))}),k.attributes.hasOwnProperty("BYTERANGE")&&(k.attributes.byterange=Lf(k.attributes.BYTERANGE)),this.trigger("data",k);else if((f=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(n))&&f[1])k={type:"tag",tagType:"server-control"},k.attributes=ib(f[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=
parseFloat(k.attributes[b]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=/YES/.test(k.attributes[b]))}),this.trigger("data",k);else if((f=/^#EXT-X-PART-INF:(.*)$/.exec(n))&&f[1])k={type:"tag",tagType:"part-inf"},k.attributes=ib(f[1]),["PART-TARGET"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=parseFloat(k.attributes[b]))}),this.trigger("data",k);else if((f=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(n))&&f[1])k={type:"tag",
tagType:"preload-hint"},k.attributes=ib(f[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=parseInt(k.attributes[b],10),k.attributes.byterange=k.attributes.byterange||{},k.attributes.byterange["BYTERANGE-LENGTH"===b?"length":"offset"]=k.attributes[b],delete k.attributes[b])}),this.trigger("data",k);else if((f=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(n))&&f[1])k={type:"tag",tagType:"rendition-report"},k.attributes=ib(f[1]),["LAST-MSN","LAST-PART"].forEach(function(b){k.attributes.hasOwnProperty(b)&&
(k.attributes[b]=parseInt(k.attributes[b],10))}),this.trigger("data",k);else if((f=/^#EXT-X-DATERANGE:(.*)$/.exec(n))&&f[1]){k={type:"tag",tagType:"daterange"};k.attributes=ib(f[1]);["ID","CLASS"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=String(k.attributes[b]))});["START-DATE","END-DATE"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=new Date(k.attributes[b]))});["DURATION","PLANNED-DURATION"].forEach(function(b){k.attributes.hasOwnProperty(b)&&
(k.attributes[b]=parseFloat(k.attributes[b]))});["END-ON-NEXT"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=/YES/i.test(k.attributes[b]))});["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(b){k.attributes.hasOwnProperty(b)&&(k.attributes[b]=k.attributes[b].toString(16))});n=/^X-([A-Z]+-)+[A-Z]+$/;for(a in k.attributes){if(!n.test(a))continue;t=/[0-9A-Fa-f]{6}/g.test(k.attributes[a]);const b=/^\d+(\.\d+)?$/.test(k.attributes[a]);k.attributes[a]=t?k.attributes[a].toString(16):
b?parseFloat(k.attributes[a]):String(k.attributes[a])}this.trigger("data",k)}else(f=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(n))?this.trigger("data",{type:"tag",tagType:"independent-segments"}):this.trigger("data",{type:"tag",data:n.slice(4)})}))}addParser({expression:d,customType:f,dataParser:k,segment:n}){"function"!==typeof k&&(k=t=>t);this.customParsers.push(t=>{if(d.exec(t))return this.trigger("data",{type:"custom",data:k(t),customType:f,segment:n}),!0})}addTagMapper({expression:d,map:f}){this.tagMappers.push(k=>
d.test(k)?f(k):k)}}const Ym=d=>d.toLowerCase().replace(/-(\w)/g,f=>f[1].toUpperCase()),gc=function(d){const f={};Object.keys(d).forEach(function(k){f[Ym(k)]=d[k]});return f},Mf=function(d){const {serverControl:f,targetDuration:k,partTargetDuration:n}=d;if(f){d=k&&3*k;var t=n&&2*n;k&&!f.hasOwnProperty("holdBack")&&(f.holdBack=d,this.trigger("info",{message:`${"#EXT-X-SERVER-CONTROL"} defaulting HOLD-BACK to targetDuration * 3 (${d}).`}));d&&f.holdBack<d&&(this.trigger("warn",{message:`${"#EXT-X-SERVER-CONTROL"} clamping HOLD-BACK (${f.holdBack}) to targetDuration * 3 (${d})`}),
f.holdBack=d);n&&!f.hasOwnProperty("partHoldBack")&&(f.partHoldBack=3*n,this.trigger("info",{message:`${"#EXT-X-SERVER-CONTROL"} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${f.partHoldBack}).`}));n&&f.partHoldBack<t&&(this.trigger("warn",{message:`${"#EXT-X-SERVER-CONTROL"} clamping PART-HOLD-BACK (${f.partHoldBack}) to partTargetDuration * 2 (${t}).`}),f.partHoldBack=t)}};class Zm extends Kf{constructor(){super();this.lineStream=new Vm;this.parseStream=new Xm;this.lineStream.pipe(this.parseStream);
const d=this,f=[];let k={},n,t,a=!1;const b=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let e=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let g=0,m=0;const p={};this.on("end",()=>{k.uri||!k.parts&&!k.preloadHints||(!k.map&&n&&(k.map=n),!k.key&&t&&(k.key=t),k.timeline||"number"!==typeof e||(k.timeline=e),this.manifest.preloadSegment=k)});this.parseStream.on("data",function(u){let x,y;({tag(){({version(){u.version&&(this.manifest.version=u.version)},["allow-cache"](){this.manifest.allowCache=
u.allowed;"allowed"in u||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const B={};"length"in u&&(k.byterange=B,B.length=u.length,"offset"in u||(u.offset=g));"offset"in u&&(k.byterange=B,B.offset=u.offset);g=B.offset+B.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=
0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<u.duration&&(k.duration=u.duration);0===u.duration&&(k.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=f},key(){if(u.attributes)if("NONE"===u.attributes.METHOD)t=null;else if(u.attributes.URI)if("com.apple.streamingkeydelivery"===u.attributes.KEYFORMAT)this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]=
{attributes:u.attributes};else if("com.microsoft.playready"===u.attributes.KEYFORMAT)this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:u.attributes.URI};else if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===u.attributes.KEYFORMAT)if(-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(u.attributes.METHOD))this.trigger("warn",{message:"invalid key method provided for Widevine"});else if("SAMPLE-AES-CENC"===
u.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==u.attributes.URI.substring(0,23))this.trigger("warn",{message:"invalid key URI provided for Widevine"});else if(u.attributes.KEYID&&"0x"===u.attributes.KEYID.substring(0,2)){this.manifest.contentProtection=this.manifest.contentProtection||{};var B=this.manifest.contentProtection,z={schemeIdUri:u.attributes.KEYFORMAT,keyId:u.attributes.KEYID.substring(2)};
var E=u.attributes.URI.split(",")[1];E=D.atob?D.atob(E):Buffer.from(E,"base64").toString("binary");for(var J=new Uint8Array(E.length),G=0;G<E.length;G++)J[G]=E.charCodeAt(G);B["com.widevine.alpha"]={attributes:z,pssh:J}}else this.trigger("warn",{message:"invalid key ID provided for Widevine"});else u.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),t={method:u.attributes.METHOD||"AES-128",uri:u.attributes.URI},"undefined"!==typeof u.attributes.IV&&(t.iv=u.attributes.IV);
else this.trigger("warn",{message:"ignoring key declaration without URI"});else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},["media-sequence"](){isFinite(u.number)?this.manifest.mediaSequence=u.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+u.number})},["discontinuity-sequence"](){isFinite(u.number)?e=this.manifest.discontinuitySequence=u.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+u.number})},["playlist-type"](){/VOD|EVENT/.test(u.playlistType)?
this.manifest.playlistType=u.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+u.playlist})},map(){n={};u.uri&&(n.uri=u.uri);u.byterange&&(n.byterange=u.byterange);t&&(n.key=t)},["stream-inf"](){this.manifest.playlists=f;this.manifest.mediaGroups=this.manifest.mediaGroups||c;u.attributes?(k.attributes||(k.attributes={}),Rb(k.attributes,u.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){this.manifest.mediaGroups=this.manifest.mediaGroups||
c;if(u.attributes&&u.attributes.TYPE&&u.attributes["GROUP-ID"]&&u.attributes.NAME){var B=this.manifest.mediaGroups[u.attributes.TYPE];B[u.attributes["GROUP-ID"]]=B[u.attributes["GROUP-ID"]]||{};x=B[u.attributes["GROUP-ID"]];y={default:/yes/i.test(u.attributes.DEFAULT)};y.autoselect=y.default?!0:/yes/i.test(u.attributes.AUTOSELECT);u.attributes.LANGUAGE&&(y.language=u.attributes.LANGUAGE);u.attributes.URI&&(y.uri=u.attributes.URI);u.attributes["INSTREAM-ID"]&&(y.instreamId=u.attributes["INSTREAM-ID"]);
u.attributes.CHARACTERISTICS&&(y.characteristics=u.attributes.CHARACTERISTICS);u.attributes.FORCED&&(y.forced=/yes/i.test(u.attributes.FORCED));x[u.attributes.NAME]=y}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity(){e+=1;k.discontinuity=!0;this.manifest.discontinuityStarts.push(f.length)},["program-date-time"](){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=u.dateTimeString,this.manifest.dateTimeObject=u.dateTimeObject);
k.dateTimeString=u.dateTimeString;k.dateTimeObject=u.dateTimeObject},targetduration(){!isFinite(u.duration)||0>u.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+u.duration}):(this.manifest.targetDuration=u.duration,Mf.call(this,this.manifest))},start(){!u.attributes||isNaN(u.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start={timeOffset:u.attributes["TIME-OFFSET"],precise:u.attributes.PRECISE}},
["cue-out"](){k.cueOut=u.data},["cue-out-cont"](){k.cueOutCont=u.data},["cue-in"](){k.cueIn=u.data},skip(){this.manifest.skip=gc(u.attributes);this.warnOnMissingAttributes_("#EXT-X-SKIP",u.attributes,["SKIPPED-SEGMENTS"])},part(){a=!0;const B=this.manifest.segments.length,z=gc(u.attributes);k.parts=k.parts||[];k.parts.push(z);z.byterange&&(z.byterange.hasOwnProperty("offset")||(z.byterange.offset=m),m=z.byterange.offset+z.byterange.length);this.warnOnMissingAttributes_(`#EXT-X-PART #${k.parts.length-
1} for segment #${B}`,u.attributes,["URI","DURATION"]);this.manifest.renditionReports&&this.manifest.renditionReports.forEach((E,J)=>{E.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${J} lacks required attribute(s): LAST-PART`})})},["server-control"](){const B=this.manifest.serverControl=gc(u.attributes);B.hasOwnProperty("canBlockReload")||(B.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"}));Mf.call(this,
this.manifest);B.canSkipDateranges&&!B.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},["preload-hint"](){const B=this.manifest.segments.length,z=gc(u.attributes);var E=z.type&&"PART"===z.type;k.preloadHints=k.preloadHints||[];k.preloadHints.push(z);z.byterange&&!z.byterange.hasOwnProperty("offset")&&(z.byterange.offset=E?m:0,E&&(m=z.byterange.offset+z.byterange.length));
E=k.preloadHints.length-1;this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${E} for segment #${B}`,u.attributes,["TYPE","URI"]);if(z.type)for(let J=0;J<k.preloadHints.length-1;J++){const G=k.preloadHints[J];G.type&&G.type===z.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${E} for segment #${B} has the same TYPE ${z.type} as preload hint #${J}`})}},["rendition-report"](){var B=gc(u.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[];this.manifest.renditionReports.push(B);
B=this.manifest.renditionReports.length-1;const z=["LAST-MSN","URI"];a&&z.push("LAST-PART");this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${B}`,u.attributes,z)},["part-inf"](){this.manifest.partInf=gc(u.attributes);this.warnOnMissingAttributes_("#EXT-X-PART-INF",u.attributes,["PART-TARGET"]);this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget);Mf.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[];this.manifest.daterange.push(gc(u.attributes));
const B=this.manifest.daterange.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${B}`,u.attributes,["ID","START-DATE"]);const z=this.manifest.daterange[B];z.endDate&&z.startDate&&new Date(z.endDate)<new Date(z.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"});z.duration&&0>z.duration&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"});z.plannedDuration&&0>z.plannedDuration&&this.trigger("warn",
{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});var E=!!z.endOnNext;E&&!z.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT\x3dYES attribute must have a CLASS attribute"});E&&(z.duration||z.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT\x3dYES attribute must not contain DURATION or END-DATE attributes"});z.duration&&z.endDate&&(E=z.startDate,E=E.setSeconds(E.getSeconds()+z.duration),this.manifest.daterange[B].endDate=new Date(E));
z&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"});if(!p[z.id])p[z.id]=z;else for(const J in p[z.id])if(p[z.id][J]!==z[J]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}},["independent-segments"](){this.manifest.independentSegments=!0}}[u.tagType]||b).call(d)},uri(){k.uri=u.uri;f.push(k);!this.manifest.targetDuration||
"duration"in k||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),k.duration=this.manifest.targetDuration);t&&(k.key=t);k.timeline=e;n&&(k.map=n);m=0;k={}},comment(){},custom(){u.segment?(k.custom=k.custom||{},k.custom[u.customType]=u.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[u.customType]=u.data)}})[u.type].call(d)})}warnOnMissingAttributes_(d,f,k){const n=[];k.forEach(function(t){f.hasOwnProperty(t)||n.push(t)});n.length&&this.trigger("warn",
{message:`${d} lacks required attribute(s): ${n.join(", ")}`})}push(d){this.lineStream.push(d)}end(){this.lineStream.push("\n");this.trigger("end")}addParser(d){this.parseStream.addParser(d)}addTagMapper(d){this.parseStream.addTagMapper(d)}}var hc={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,
text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},$m=["video","audio","text"],Fi=["Video","Audio","Text"],Gi=function(d){return d?d.replace(/avc1\.(\d+)\.(\d+)/i,function(f,k,n){f=("00"+Number(k).toString(16)).slice(-2);n=("00"+Number(n).toString(16)).slice(-2);return"avc1."+f+"00"+n}):d},yb=function(d){void 0===d&&(d="");var f=[];d.split(",").forEach(function(k){k=k.trim();var n;$m.forEach(function(t){var a=hc[t].exec(k.toLowerCase());if(a&&!(1>=a.length)){n=t;
a=k.substring(0,a[1].length);var b=k.replace(a,"");f.push({type:a,details:b,mediaType:t})}});n||f.push({type:k,details:"",mediaType:"unknown"})});return f},an=function(d,f){if(!d.mediaGroups.AUDIO||!f)return null;d=d.mediaGroups.AUDIO[f];if(!d)return null;for(var k in d)if(f=d[k],f.default&&f.playlists)return yb(f.playlists[0].attributes.CODECS);return null},Hi=function(d){void 0===d&&(d="");return hc.audio.test(d.trim().toLowerCase())},bn=function(d){void 0===d&&(d="");return hc.text.test(d.trim().toLowerCase())},
id=function(d){if(d&&"string"===typeof d){var f=d.toLowerCase().split(",").map(function(t){return Gi(t.trim())}),k="video";1===f.length&&Hi(f[0])?k="audio":1===f.length&&bn(f[0])&&(k="application");var n="mp4";f.every(function(t){return hc.mp4.test(t)})?n="mp4":f.every(function(t){return hc.webm.test(t)})?n="webm":f.every(function(t){return hc.ogg.test(t)})&&(n="ogg");return k+"/"+n+';codecs\x3d"'+d+'"'}},fe=function(d){void 0===d&&(d="");return D.MediaSource&&D.MediaSource.isTypeSupported&&D.MediaSource.isTypeSupported(id(d))||
!1},Nf=function(d){void 0===d&&(d="");return d.toLowerCase().split(",").every(function(f){f=f.trim();for(var k=0;k<Fi.length;k++)if(hc["muxer"+Fi[k]].test(f))return!0;return!1})},cn=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,dn=/^application\/dash\+xml/i,Ii=function(d){return cn.test(d)?"hls":dn.test(d)?"dash":"application/vnd.videojs.vhs+json"===d?"vhs-json":null},Ji=function(d){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(d):d&&d.buffer instanceof ArrayBuffer},U=function(d){if(d instanceof
Uint8Array)return d;Array.isArray(d)||Ji(d)||d instanceof ArrayBuffer||(d="number"!==typeof d||"number"===typeof d&&d!==d?0:[d]);return new Uint8Array(d&&d.buffer||d,d&&d.byteOffset||0,d&&d.byteLength||0)},Ia=D.BigInt||Number,Of=[Ia("0x1"),Ia("0x100"),Ia("0x10000"),Ia("0x1000000"),Ia("0x100000000"),Ia("0x10000000000"),Ia("0x1000000000000"),Ia("0x100000000000000"),Ia("0x10000000000000000")];(function(){var d=new Uint16Array([65484]);d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);return 255===
d[0]?"big":204===d[0]?"little":"unknown"})();var en=function(d,f){var k=void 0===f?{}:f;f=k.signed;f=void 0===f?!1:f;k=k.le;var n=void 0===k?!1:k;d=U(d);k=n?"reduce":"reduceRight";k=(d[k]?d[k]:Array.prototype[k]).call(d,function(t,a,b){return t+Ia(a)*Of[n?b:Math.abs(b+1-d.length)]},Ia(0));f&&(f=Of[d.length]/Ia(2)-Ia(1),k=Ia(k),k>f&&(k=k-f-f-Ia(2)));return Number(k)},fn=function(d,f){f=(void 0===f?{}:f).le;f=void 0===f?!1:f;if("bigint"!==typeof d&&"number"!==typeof d||"number"===typeof d&&d!==d)d=
0;d=Ia(d);for(var k=Math.ceil(d.toString(2).length/8),n=new Uint8Array(new ArrayBuffer(k)),t=0;t<k;t++){var a=f?t:Math.abs(t+1-n.length);n[a]=Number(d/Of[t]&Ia(255));0>d&&(n[a]=Math.abs(~n[a]),n[a]-=0===t?1:2)}return n},Ki=function(d,f){"string"!==typeof d&&d&&"function"===typeof d.toString&&(d=d.toString());if("string"!==typeof d)return new Uint8Array;f||(d=unescape(encodeURIComponent(d)));f=new Uint8Array(d.length);for(var k=0;k<d.length;k++)f[k]=d.charCodeAt(k);return f},gn=function(){for(var d=
arguments.length,f=Array(d),k=0;k<d;k++)f[k]=arguments[k];f=f.filter(function(a){return a&&(a.byteLength||a.length)&&"string"!==typeof a});if(1>=f.length)return U(f[0]);d=f.reduce(function(a,b,c){return a+(b.byteLength||b.length)},0);var n=new Uint8Array(d),t=0;f.forEach(function(a){a=U(a);n.set(a,t);t+=a.byteLength});return n},qa=function(d,f,k){k=void 0===k?{}:k;var n=k.offset,t=void 0===n?0:n;k=k.mask;var a=void 0===k?[]:k;d=U(d);f=U(f);k=f.every?f.every:Array.prototype.every;return f.length&&
d.length-t>=f.length&&k.call(f,function(b,c){return b===(a[c]?a[c]&d[t+c]:d[t+c])})},Pf=function(d,f){if(/^[a-z]+:/i.test(f))return f;/^data:/.test(d)&&(d=D.location&&D.location.href||"");var k="function"===typeof D.URL,n=/^\/\//.test(d),t=!D.location&&!/\/\//i.test(d);k?d=new D.URL(d,D.location||"http://example.com"):/\/\//i.test(d)||(d=ee.buildAbsoluteURL(D.location&&D.location.href||"",d));return k?(d=new URL(f,d),t?d.href.slice(18):n?d.href.slice(d.protocol.length):d.href):ee.buildAbsoluteURL(d,
f)},hn=function(d,f,k){f.forEach(function(n){for(var t in d.mediaGroups[n])for(var a in d.mediaGroups[n][t])k(d.mediaGroups[n][t][a],n,t,a)})},jn=Ld({HTML:"text/html",isHTML:function(d){return d===jn.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Li=Ld({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(d){return d===Li.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});
var ge=Li;var tb=function(d,f,k){void 0===k&&(k=Array.prototype);if(d&&"function"===typeof k.find)return k.find.call(d,f);for(k=0;k<d.length;k++)if(Object.prototype.hasOwnProperty.call(d,k)){var n=d[k];if(f.call(void 0,n,k,d))return n}},rc=ge,Wa={},lb=Wa.ELEMENT_NODE=1,uc=Wa.ATTRIBUTE_NODE=2,Qd=Wa.TEXT_NODE=3,Lh=Wa.CDATA_SECTION_NODE=4,Ph=Wa.ENTITY_REFERENCE_NODE=5,kn=Wa.ENTITY_NODE=6,Oh=Wa.PROCESSING_INSTRUCTION_NODE=7,Mh=Wa.COMMENT_NODE=8,Kh=Wa.DOCUMENT_NODE=9,Nh=Wa.DOCUMENT_TYPE_NODE=10,Hb=Wa.DOCUMENT_FRAGMENT_NODE=
11,ln=Wa.NOTATION_NODE=12,Ma={},Da={};Ma.INDEX_SIZE_ERR=(Da[1]="Index size error",1);Ma.DOMSTRING_SIZE_ERR=(Da[2]="DOMString size error",2);var Ua=Ma.HIERARCHY_REQUEST_ERR=(Da[3]="Hierarchy request error",3);Ma.WRONG_DOCUMENT_ERR=(Da[4]="Wrong document",4);Ma.INVALID_CHARACTER_ERR=(Da[5]="Invalid character",5);Ma.NO_DATA_ALLOWED_ERR=(Da[6]="No data allowed",6);Ma.NO_MODIFICATION_ALLOWED_ERR=(Da[7]="No modification allowed",7);var Ah=Ma.NOT_FOUND_ERR=(Da[8]="Not found",8);Ma.NOT_SUPPORTED_ERR=(Da[9]=
"Not supported",9);var Mi=Ma.INUSE_ATTRIBUTE_ERR=(Da[10]="Attribute in use",10);Ma.INVALID_STATE_ERR=(Da[11]="Invalid state",11);Ma.SYNTAX_ERR=(Da[12]="Syntax error",12);Ma.INVALID_MODIFICATION_ERR=(Da[13]="Invalid modification",13);Ma.NAMESPACE_ERR=(Da[14]="Invalid namespace",14);Ma.INVALID_ACCESS_ERR=(Da[15]="Invalid access",15);Aa.prototype=Error.prototype;Zc(Ma,Aa);Sb.prototype={length:0,item:function(d){return 0<=d&&d<this.length?this[d]:null},toString:function(d,f){for(var k=[],n=0;n<this.length;n++)tc(this[n],
k,d,f);return k.join("")},filter:function(d){return Array.prototype.filter.call(this,d)},indexOf:function(d){return Array.prototype.indexOf.call(this,d)}};qc.prototype.item=function(d){gf(this);return this[d]||null};Ta(qc,Sb);Md.prototype={length:0,item:Sb.prototype.item,getNamedItem:function(d){for(var f=this.length;f--;){var k=this[f];if(k.nodeName==d)return k}},setNamedItem:function(d){var f=d.ownerElement;if(f&&f!=this._ownerElement)throw new Aa(Mi);f=this.getNamedItem(d.nodeName);yh(this._ownerElement,
this,d,f);return f},setNamedItemNS:function(d){var f=d.ownerElement;if(f&&f!=this._ownerElement)throw new Aa(Mi);f=this.getNamedItemNS(d.namespaceURI,d.localName);yh(this._ownerElement,this,d,f);return f},removeNamedItem:function(d){d=this.getNamedItem(d);zh(this._ownerElement,this,d);return d},removeNamedItemNS:function(d,f){d=this.getNamedItemNS(d,f);zh(this._ownerElement,this,d);return d},getNamedItemNS:function(d,f){for(var k=this.length;k--;){var n=this[k];if(n.localName==f&&n.namespaceURI==
d)return n}return null}};Bh.prototype={hasFeature:function(d,f){return!0},createDocument:function(d,f,k){var n=new ad;n.implementation=this;n.childNodes=new Sb;n.doctype=k||null;k&&n.appendChild(k);f&&(d=n.createElementNS(d,f),n.appendChild(d));return n},createDocumentType:function(d,f,k){var n=new nf;n.name=d;n.nodeName=d;n.publicId=f||"";n.systemId=k||"";return n}};ja.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,
ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(d,f){return Nd(this,d,f)},replaceChild:function(d,f){Nd(this,d,f,Gh);f&&this.removeChild(f)},removeChild:function(d){return Dh(this,d)},appendChild:function(d){return this.insertBefore(d,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(d){return rf(this.ownerDocument||this,this,d)},normalize:function(){for(var d=this.firstChild;d;){var f=d.nextSibling;f&&f.nodeType==
Qd&&d.nodeType==Qd?(this.removeChild(f),d.appendData(f.data)):(d.normalize(),d=f)}},isSupported:function(d,f){return this.ownerDocument.implementation.hasFeature(d,f)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(d){for(var f=this;f;){var k=f._nsMap;if(k)for(var n in k)if(Object.prototype.hasOwnProperty.call(k,n)&&k[n]===d)return n;f=f.nodeType==uc?f.ownerDocument:f.parentNode}return null},lookupNamespaceURI:function(d){for(var f=this;f;){var k=f._nsMap;if(k&&Object.prototype.hasOwnProperty.call(k,
d))return k[d];f=f.nodeType==uc?f.ownerDocument:f.parentNode}return null},isDefaultNamespace:function(d){return null==this.lookupPrefix(d)}};Zc(Wa,ja);Zc(Wa,ja.prototype);ad.prototype={nodeName:"#document",nodeType:Kh,doctype:null,documentElement:null,_inc:1,insertBefore:function(d,f){if(d.nodeType==Hb){for(var k=d.firstChild;k;){var n=k.nextSibling;this.insertBefore(k,f);k=n}return d}Nd(this,d,f);d.ownerDocument=this;null===this.documentElement&&d.nodeType===lb&&(this.documentElement=d);return d},
removeChild:function(d){this.documentElement==d&&(this.documentElement=null);return Dh(this,d)},replaceChild:function(d,f){Nd(this,d,f,Gh);d.ownerDocument=this;f&&this.removeChild(f);sb(d)&&(this.documentElement=d)},importNode:function(d,f){return Qh(this,d,f)},getElementById:function(d){var f=null;$c(this.documentElement,function(k){if(k.nodeType==lb&&k.getAttribute("id")==d)return f=k,!0});return f},getElementsByClassName:function(d){var f=vh(d);return new qc(this,function(k){var n=[];0<f.length&&
$c(k.documentElement,function(t){if(t!==k&&t.nodeType===lb){var a=t.getAttribute("class");if(a){var b=d===a;b||(a=vh(a),b=f.every(sm(a)));b&&n.push(t)}}});return n})},createElement:function(d){var f=new sc;f.ownerDocument=this;f.nodeName=d;f.tagName=d;f.localName=d;f.childNodes=new Sb;return(f.attributes=new Md)._ownerElement=f},createDocumentFragment:function(){var d=new Pd;d.ownerDocument=this;d.childNodes=new Sb;return d},createTextNode:function(d){var f=new kf;f.ownerDocument=this;f.appendData(d);
return f},createComment:function(d){var f=new lf;f.ownerDocument=this;f.appendData(d);return f},createCDATASection:function(d){var f=new mf;f.ownerDocument=this;f.appendData(d);return f},createProcessingInstruction:function(d,f){var k=new pf;k.ownerDocument=this;k.tagName=k.nodeName=k.target=d;k.nodeValue=k.data=f;return k},createAttribute:function(d){var f=new Od;f.ownerDocument=this;f.name=d;f.nodeName=d;f.localName=d;f.specified=!0;return f},createEntityReference:function(d){var f=new of;f.ownerDocument=
this;f.nodeName=d;return f},createElementNS:function(d,f){var k=new sc,n=f.split(":"),t=k.attributes=new Md;k.childNodes=new Sb;k.ownerDocument=this;k.nodeName=f;k.tagName=f;k.namespaceURI=d;2==n.length?(k.prefix=n[0],k.localName=n[1]):k.localName=f;return t._ownerElement=k},createAttributeNS:function(d,f){var k=new Od,n=f.split(":");k.ownerDocument=this;k.nodeName=f;k.name=f;k.namespaceURI=d;k.specified=!0;2==n.length?(k.prefix=n[0],k.localName=n[1]):k.localName=f;return k}};Ta(ad,ja);sc.prototype=
{nodeType:lb,hasAttribute:function(d){return null!=this.getAttributeNode(d)},getAttribute:function(d){return(d=this.getAttributeNode(d))&&d.value||""},getAttributeNode:function(d){return this.attributes.getNamedItem(d)},setAttribute:function(d,f){d=this.ownerDocument.createAttribute(d);d.value=d.nodeValue=""+f;this.setAttributeNode(d)},removeAttribute:function(d){(d=this.getAttributeNode(d))&&this.removeAttributeNode(d)},appendChild:function(d){if(d.nodeType===Hb)return this.insertBefore(d,null);
d.parentNode&&d.parentNode.removeChild(d);d.parentNode=this;d.previousSibling=this.lastChild;d.nextSibling=null;d.previousSibling?d.previousSibling.nextSibling=d:this.firstChild=d;this.lastChild=d;hf(this.ownerDocument,this,d);return d},setAttributeNode:function(d){return this.attributes.setNamedItem(d)},setAttributeNodeNS:function(d){return this.attributes.setNamedItemNS(d)},removeAttributeNode:function(d){return this.attributes.removeNamedItem(d.nodeName)},removeAttributeNS:function(d,f){(d=this.getAttributeNodeNS(d,
f))&&this.removeAttributeNode(d)},hasAttributeNS:function(d,f){return null!=this.getAttributeNodeNS(d,f)},getAttributeNS:function(d,f){return(d=this.getAttributeNodeNS(d,f))&&d.value||""},setAttributeNS:function(d,f,k){d=this.ownerDocument.createAttributeNS(d,f);d.value=d.nodeValue=""+k;this.setAttributeNode(d)},getAttributeNodeNS:function(d,f){return this.attributes.getNamedItemNS(d,f)},getElementsByTagName:function(d){return new qc(this,function(f){var k=[];$c(f,function(n){n===f||n.nodeType!=lb||
"*"!==d&&n.tagName!=d||k.push(n)});return k})},getElementsByTagNameNS:function(d,f){return new qc(this,function(k){var n=[];$c(k,function(t){t===k||t.nodeType!==lb||"*"!==d&&t.namespaceURI!==d||"*"!==f&&t.localName!=f||n.push(t)});return n})}};ad.prototype.getElementsByTagName=sc.prototype.getElementsByTagName;ad.prototype.getElementsByTagNameNS=sc.prototype.getElementsByTagNameNS;Ta(sc,ja);Od.prototype.nodeType=uc;Ta(Od,ja);bd.prototype={data:"",substringData:function(d,f){return this.data.substring(d,
d+f)},appendData:function(d){this.nodeValue=this.data=d=this.data+d;this.length=d.length},insertData:function(d,f){this.replaceData(d,0,f)},appendChild:function(d){throw Error(Da[Ua]);},deleteData:function(d,f){this.replaceData(d,f,"")},replaceData:function(d,f,k){var n=this.data.substring(0,d);d=this.data.substring(d+f);this.nodeValue=this.data=k=n+k+d;this.length=k.length}};Ta(bd,ja);kf.prototype={nodeName:"#text",nodeType:Qd,splitText:function(d){var f=this.data,k=f.substring(d);this.data=this.nodeValue=
f=f.substring(0,d);this.length=f.length;d=this.ownerDocument.createTextNode(k);this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling);return d}};Ta(kf,bd);lf.prototype={nodeName:"#comment",nodeType:Mh};Ta(lf,bd);mf.prototype={nodeName:"#cdata-section",nodeType:Lh};Ta(mf,bd);nf.prototype.nodeType=Nh;Ta(nf,ja);Hh.prototype.nodeType=ln;Ta(Hh,ja);Ih.prototype.nodeType=kn;Ta(Ih,ja);of.prototype.nodeType=Ph;Ta(of,ja);Pd.prototype.nodeName="#document-fragment";Pd.prototype.nodeType=Hb;Ta(Pd,ja);
pf.prototype.nodeType=Oh;Ta(pf,ja);ja.prototype.toString=function(d,f){var k=[],n=9==this.nodeType&&this.documentElement||this,t=n.prefix,a=n.namespaceURI;if(a&&null==t&&(t=n.lookupPrefix(a),null==t))var b=[{namespace:a,prefix:null}];tc(this,k,d,f,b);return k.join("")};try{if(Object.defineProperty){Object.defineProperty(qc.prototype,"length",{get:function(){gf(this);return this.$$length}});Object.defineProperty(ja.prototype,"textContent",{get:function(){return d(this)},set:function(f){switch(this.nodeType){case lb:case Hb:for(;this.firstChild;)this.removeChild(this.firstChild);
(f||String(f))&&this.appendChild(this.ownerDocument.createTextNode(f));break;default:this.nodeValue=this.value=this.data=f}}});function d(f){switch(f.nodeType){case lb:case Hb:var k=[];for(f=f.firstChild;f;)7!==f.nodeType&&8!==f.nodeType&&k.push(d(f)),f=f.nextSibling;return k.join("");default:return f.nodeValue}}wh=function(f,k,n){f["$$"+k]=n}}}catch(d){}var Qf={};(function(d){d.XML_ENTITIES=Ld({amp:"\x26",apos:"'",gt:"\x3e",lt:"\x3c",quot:'"'});d.HTML_ENTITIES=Ld({Aacute:"\u00c1",aacute:"\u00e1",
Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\u00c2",acirc:"\u00e2",acute:"\u00b4",Acy:"\u0410",acy:"\u0430",AElig:"\u00c6",aelig:"\u00e6",af:"\u2061",Afr:"\ud835\udd04",afr:"\ud835\udd1e",Agrave:"\u00c0",agrave:"\u00e0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"\x26",amp:"\x26",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",
angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\u00c5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\ud835\udd38",aopf:"\ud835\udd52",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\u00c5",aring:"\u00e5",
Ascr:"\ud835\udc9c",ascr:"\ud835\udcb6",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\u00c3",atilde:"\u00e3",Auml:"\u00c4",auml:"\u00e4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",
because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\ud835\udd05",bfr:"\ud835\udd1f",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",
blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"\x3d\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\ud835\udd39",bopf:"\ud835\udd53",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",
boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",
breve:"\u02d8",brvbar:"\u00a6",Bscr:"\u212c",bscr:"\ud835\udcb7",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",
Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\u00c7",ccedil:"\u00e7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\u00b8",Cedilla:"\u00b8",cemptyv:"\u29b2",cent:"\u00a2",CenterDot:"\u00b7",centerdot:"\u00b7",Cfr:"\u212d",cfr:"\ud835\udd20",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",
circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\u00ae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",
complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\ud835\udd54",coprod:"\u2210",Coproduct:"\u2210",COPY:"\u00a9",copy:"\u00a9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\ud835\udc9e",cscr:"\ud835\udcb8",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",
cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\u00a4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",
darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\u00b0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\ud835\udd07",dfr:"\ud835\udd21",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\u00b4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",
DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\u00a8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\u00f7",divide:"\u00f7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\ud835\udd3b",dopf:"\ud835\udd55",Dot:"\u00a8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",
doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\u00a8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",
DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\ud835\udc9f",dscr:"\ud835\udcb9",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",
dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\u00c9",eacute:"\u00e9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\u00ca",ecirc:"\u00ea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\ud835\udd08",efr:"\ud835\udd22",eg:"\u2a9a",Egrave:"\u00c8",egrave:"\u00e8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",
ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\ud835\udd3c",eopf:"\ud835\udd56",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",
eqslantless:"\u2a95",Equal:"\u2a75",equals:"\x3d",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\u00d0",eth:"\u00f0",Euml:"\u00cb",euml:"\u00eb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",
female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\ud835\udd09",ffr:"\ud835\udd23",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\ud835\udd3d",fopf:"\ud835\udd57",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\u00bd",frac13:"\u2153",frac14:"\u00bc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",
frac34:"\u00be",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\ud835\udcbb",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",
gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\ud835\udd0a",gfr:"\ud835\udd24",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\ud835\udd3e",gopf:"\ud835\udd58",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",
GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\ud835\udca2",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:"\x3e",gt:"\x3e",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\u00bd",hamilt:"\u210b",HARDcy:"\u042a",
hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\ud835\udd25",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\ud835\udd59",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\ud835\udcbd",hslash:"\u210f",Hstrok:"\u0126",
hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\u00cd",iacute:"\u00ed",ic:"\u2063",Icirc:"\u00ce",icirc:"\u00ee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\u00a1",iff:"\u21d4",Ifr:"\u2111",ifr:"\ud835\udd26",Igrave:"\u00cc",igrave:"\u00ec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",
imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\ud835\udd40",iopf:"\ud835\udd5a",Iota:"\u0399",iota:"\u03b9",
iprod:"\u2a3c",iquest:"\u00bf",Iscr:"\u2110",iscr:"\ud835\udcbe",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\u00cf",iuml:"\u00ef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\ud835\udd0d",jfr:"\ud835\udd27",jmath:"\u0237",Jopf:"\ud835\udd41",jopf:"\ud835\udd5b",Jscr:"\ud835\udca5",jscr:"\ud835\udcbf",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",
Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\ud835\udd0e",kfr:"\ud835\udd28",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\ud835\udd42",kopf:"\ud835\udd5c",Kscr:"\ud835\udca6",kscr:"\ud835\udcc0",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\u00ab",
Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",
ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",
leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",
les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\ud835\udd0f",lfr:"\ud835\udd29",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",
lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",
longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\ud835\udd43",lopf:"\ud835\udd5d",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\ud835\udcc1",
Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"\x3c",lt:"\x3c",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\u00af",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",
mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\ud835\udd10",mfr:"\ud835\udd2a",mho:"\u2127",micro:"\u00b5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\u00b7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\ud835\udd44",
mopf:"\ud835\udd5e",mp:"\u2213",Mscr:"\u2133",mscr:"\ud835\udcc2",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\u00a0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",
ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\ud835\udd11",nfr:"\ud835\udd2b",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",
ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",
nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\u00a0",Nopf:"\u2115",nopf:"\ud835\udd5f",Not:"\u2aec",not:"\u00ac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",
NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",
NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",
NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",
nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\ud835\udca9",nscr:"\ud835\udcc3",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",
nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\u00d1",ntilde:"\u00f1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:"\x3e\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",
nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"\x3c\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\u00d3",oacute:"\u00f3",oast:"\u229b",ocir:"\u229a",Ocirc:"\u00d4",ocirc:"\u00f4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\ud835\udd12",ofr:"\ud835\udd2c",
ogon:"\u02db",Ograve:"\u00d2",ograve:"\u00f2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\ud835\udd46",oopf:"\ud835\udd60",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",
orderof:"\u2134",ordf:"\u00aa",ordm:"\u00ba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\ud835\udcaa",oscr:"\u2134",Oslash:"\u00d8",oslash:"\u00f8",osol:"\u2298",Otilde:"\u00d5",otilde:"\u00f5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\u00d6",ouml:"\u00f6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\u00b6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",
Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\ud835\udd13",pfr:"\ud835\udd2d",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\u00b1",plusmn:"\u00b1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\u00b1",Poincareplane:"\u210c",
pointint:"\u2a15",Popf:"\u2119",popf:"\ud835\udd61",pound:"\u00a3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",
profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\ud835\udcab",pscr:"\ud835\udcc5",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\ud835\udd14",qfr:"\ud835\udd2e",qint:"\u2a0c",Qopf:"\u211a",qopf:"\ud835\udd62",qprime:"\u2057",Qscr:"\ud835\udcac",qscr:"\ud835\udcc6",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",
racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\u00bb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",
rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\u00ae",reg:"\u00ae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\ud835\udd2f",
rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",
rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",
roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\ud835\udd63",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\ud835\udcc7",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",
sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\u00a7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\ud835\udd16",
sfr:"\ud835\udd30",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\u00ad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",
SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\ud835\udd4a",sopf:"\ud835\udd64",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",
sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\ud835\udcae",sscr:"\ud835\udcc8",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\u00af",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",
subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",
succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\u00b9",sup2:"\u00b2",sup3:"\u00b3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",
supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\u00df",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\ud835\udd17",tfr:"\ud835\udd31",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",
thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\u00de",thorn:"\u00fe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\u00d7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\ud835\udd4b",topf:"\ud835\udd65",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",
triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\ud835\udcaf",tscr:"\ud835\udcc9",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\u00da",uacute:"\u00fa",Uarr:"\u219f",
uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\u00db",ucirc:"\u00fb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\ud835\udd18",ufr:"\ud835\udd32",Ugrave:"\u00d9",ugrave:"\u00f9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\u00a8",UnderBar:"_",UnderBrace:"\u23df",
UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\ud835\udd4c",uopf:"\ud835\udd66",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",
upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\ud835\udcb0",uscr:"\ud835\udcca",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\u00dc",uuml:"\u00fc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",
varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",
VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\ud835\udd19",vfr:"\ud835\udd33",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\ud835\udd4d",vopf:"\ud835\udd67",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\ud835\udcb1",vscr:"\ud835\udccb",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",
Wfr:"\ud835\udd1a",wfr:"\ud835\udd34",Wopf:"\ud835\udd4e",wopf:"\ud835\udd68",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\ud835\udcb2",wscr:"\ud835\udccc",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\ud835\udd1b",xfr:"\ud835\udd35",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\ud835\udd4f",xopf:"\ud835\udd69",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\ud835\udcb3",
xscr:"\ud835\udccd",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\u00dd",yacute:"\u00fd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\u00a5",Yfr:"\ud835\udd1c",yfr:"\ud835\udd36",YIcy:"\u0407",yicy:"\u0457",Yopf:"\ud835\udd50",yopf:"\ud835\udd6a",Yscr:"\ud835\udcb4",yscr:"\ud835\udcce",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\u00ff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",
zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\ud835\udd37",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\ud835\udd6b",Zscr:"\ud835\udcb5",zscr:"\ud835\udccf",zwj:"\u200d",zwnj:"\u200c"});d.entityMap=d.HTML_ENTITIES})(Qf);var cd=ge,Rf=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ni=new RegExp("[\\-\\.0-9"+
Rf.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Oi=new RegExp("^"+Rf.source+Ni.source+"*(?::"+Rf.source+Ni.source+"*)?$");vc.prototype=Error();vc.prototype.name=vc.name;Rh.prototype={parse:function(d,f,k){var n=this.domBuilder;n.startDocument();Vh(f,f={});um(d,f,k,n,this.errorHandler);n.endDocument()}};Sh.prototype={setTagName:function(d){if(!Oi.test(d))throw Error("invalid tagName:"+d);this.tagName=d},addValue:function(d,f,k){if(!Oi.test(d))throw Error("invalid attribute:"+d);this.attributeNames[d]=
this.length;this[this.length++]={qName:d,value:f,offset:k}},length:0,getLocalName:function(d){return this[d].localName},getLocator:function(d){return this[d].locator},getQName:function(d){return this[d].qName},getURI:function(d){return this[d].uri},getValue:function(d){return this[d].value}};Wh.prototype.parseFromString=function(d,f){var k=this.options,n=new Rh,t=k.domBuilder||new Rd,a=k.errorHandler,b=k.locator,c=k.xmlns||{},e=/\/x?html?$/.test(f);f=e?Qf.HTML_ENTITIES:Qf.XML_ENTITIES;b&&t.setDocumentLocator(b);
n.errorHandler=Bm(a,t,b);n.domBuilder=k.domBuilder||t;e&&(c[""]=ge.HTML);c.xml=c.xml||ge.XML;k=k.normalizeLineEndings||Am;d&&"string"===typeof d?n.parse(k(d),c,f):n.errorHandler.error("invalid doc source");return t.doc};Rd.prototype={startDocument:function(){this.doc=(new Bh).createDocument(null,null,null);this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(d,f,k,n){var t=this.doc;f=t.createElementNS(d,k||f);var a=n.length;Sd(this,f);this.currentElement=f;this.locator&&
wc(this.locator,f);for(var b=0;b<a;b++){d=n.getURI(b);var c=n.getValue(b);k=n.getQName(b);d=t.createAttributeNS(d,k);this.locator&&wc(n.getLocator(b),d);d.value=d.nodeValue=c;f.setAttributeNode(d)}},endElement:function(d,f,k){d=this.currentElement;d.tagName;this.currentElement=d.parentNode},startPrefixMapping:function(d,f){},endPrefixMapping:function(d){},processingInstruction:function(d,f){d=this.doc.createProcessingInstruction(d,f);this.locator&&wc(this.locator,d);Sd(this,d)},ignorableWhitespace:function(d,
f,k){},characters:function(d,f,k){if(d=Xh.apply(this,arguments)){var n=this.cdata?this.doc.createCDATASection(d):this.doc.createTextNode(d);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(d)&&this.doc.appendChild(n);this.locator&&wc(this.locator,n)}},skippedEntity:function(d){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(d){if(this.locator=d)d.lineNumber=0},comment:function(d,f,k){d=Xh.apply(this,arguments);var n=this.doc.createComment(d);this.locator&&
wc(this.locator,n);Sd(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(d,f,k){var n=this.doc.implementation;n&&n.createDocumentType&&(d=n.createDocumentType(d,f,k),this.locator&&wc(this.locator,d),Sd(this,d),this.doc.doctype=d)},warning:function(d){console.warn("[xmldom warning]\t"+d,sf(this.locator))},error:function(d){console.error("[xmldom error]\t"+d,sf(this.locator))},fatalError:function(d){throw new vc(d,this.locator);}};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,
function(d){Rd.prototype[d]=function(){return null}});const Pi=d=>!!d&&"object"===typeof d,Fa=(...d)=>d.reduce((f,k)=>{if("object"!==typeof k)return f;Object.keys(k).forEach(n=>{Array.isArray(f[n])&&Array.isArray(k[n])?f[n]=f[n].concat(k[n]):Pi(f[n])&&Pi(k[n])?f[n]=Fa(f[n],k[n]):f[n]=k[n]});return f},{}),Qi=d=>Object.keys(d).map(f=>d[f]),Ec=d=>d.reduce((f,k)=>f.concat(k),[]),Ri=d=>{if(!d.length)return[];const f=[];for(let k=0;k<d.length;k++)f.push(d[k]);return f},mn=(d,f)=>d.reduce((k,n,t)=>{n[f]&&
k.push(t);return k},[]),nn=(d,f)=>Qi(d.reduce((k,n)=>{n.forEach(t=>{k[f(t)]=t});return k},{})),jd=({baseUrl:d="",source:f="",range:k="",indexRange:n=""})=>{d={uri:f,resolvedUri:Pf(d||"",f)};if(k||n)n=(k?k:n).split("-"),k=D.BigInt?D.BigInt(n[0]):parseInt(n[0],10),n=D.BigInt?D.BigInt(n[1]):parseInt(n[1],10),k<Number.MAX_SAFE_INTEGER&&"bigint"===typeof k&&(k=Number(k)),n<Number.MAX_SAFE_INTEGER&&"bigint"===typeof n&&(n=Number(n)),n="bigint"===typeof n||"bigint"===typeof k?D.BigInt(n)-D.BigInt(k)+D.BigInt(1):
n-k+1,"bigint"===typeof n&&n<Number.MAX_SAFE_INTEGER&&(n=Number(n)),d.byterange={length:n,offset:k};return d},Si=d=>{d&&"number"!==typeof d&&(d=parseInt(d,10));return isNaN(d)?null:d},on={static(d){const {duration:f,timescale:k=1,sourceDuration:n,periodDuration:t}=d;d=Si(d.endNumber);const a=f/k;return"number"===typeof d?{start:0,end:d}:"number"===typeof t?{start:0,end:t/a}:{start:0,end:n/a}},dynamic(d){const {NOW:f,clientOffset:k,availabilityStartTime:n,timescale:t=1,duration:a,periodStart:b=0,minimumUpdatePeriod:c=
0,timeShiftBufferDepth:e=Infinity}=d;d=Si(d.endNumber);const g=(f+k)/1E3,m=n+b,p=Math.ceil((g+c-m)*t/a),u=Math.floor((g-m)*t/a);return{start:Math.max(0,Math.floor((g-m-e)*t/a)),end:"number"===typeof d?d:Math.min(p,u)}}},pn=d=>f=>{const {duration:k,timescale:n=1,periodStart:t,startNumber:a=1}=d;return{number:a+f,duration:k/n,timeline:t,time:f*k}},Sf=d=>{const {type:f,duration:k,timescale:n=1,periodDuration:t,sourceDuration:a}=d,{start:b,end:c}=on[f](d);var e=[];for(let g=b;g<c;g++)e.push(g);d=e.map(pn(d));
"static"===f&&(e=d.length-1,d[e].duration=("number"===typeof t?t:a)-k/n*e);return d},Ti=d=>{const {baseUrl:f,initialization:k={},sourceDuration:n,indexRange:t="",periodStart:a,presentationTime:b,number:c=0,duration:e}=d;if(!f)throw Error("NO_BASE_URL");const g=jd({baseUrl:f,source:k.sourceURL,range:k.range}),m=jd({baseUrl:f,source:f,indexRange:t});m.map=g;e?(d=Sf(d),d.length&&(m.duration=d[0].duration,m.timeline=d[0].timeline)):n&&(m.duration=n,m.timeline=a);m.presentationTime=b||a;m.number=c;return[m]},
Tf=(d,f,k)=>{const n=d.sidx.map?d.sidx.map:null,t=d.sidx.duration,a=d.timeline||0;var b=d.sidx.byterange,c=b.offset+b.length;b=f.timescale;const e=f.references.filter(z=>1!==z.referenceType),g=[],m=d.endList?"static":"dynamic",p=d.sidx.timeline;let u=p,x=d.mediaSequence||0;c="bigint"===typeof f.firstOffset?D.BigInt(c)+f.firstOffset:c+f.firstOffset;for(let z=0;z<e.length;z++){var y=f.references[z];const E=y.referencedSize;y=y.subsegmentDuration;var B=void 0;B="bigint"===typeof c?c+D.BigInt(E)-D.BigInt(1):
c+E-1;B=Ti({baseUrl:k,timescale:b,timeline:a,periodStart:p,presentationTime:u,number:x,duration:y,sourceDuration:t,indexRange:`${c}-${B}`,type:m})[0];n&&(B.map=n);g.push(B);c="bigint"===typeof c?c+D.BigInt(E):c+E;u+=y/b;x++}d.segments=g;return d},qn=["AUDIO","SUBTITLES"],rn=1/60,Ui=d=>nn(d,({timeline:f})=>f).sort((f,k)=>f.timeline>k.timeline?1:-1),sn=(d,f)=>{for(let k=0;k<d.length;k++)if(d[k].attributes.NAME===f)return d[k];return null},Vi=d=>{let f=[];hn(d,qn,(k,n,t,a)=>{f=f.concat(k.playlists||
[])});return f},Wi=({playlist:d,mediaSequence:f})=>{d.mediaSequence=f;d.segments.forEach((k,n)=>{k.number=d.mediaSequence+n})},tn=({oldPlaylists:d,newPlaylists:f,timelineStarts:k})=>{f.forEach(n=>{n.discontinuitySequence=k.findIndex(function({timeline:c}){return c===n.timeline});const t=sn(d,n.attributes.NAME);if(t&&!n.sidx){var a=n.segments[0],b=t.segments.findIndex(function(c){return Math.abs(c.presentationTime-a.presentationTime)<rn});-1===b?(Wi({playlist:n,mediaSequence:t.mediaSequence+t.segments.length}),
n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!t.segments.length&&n.timeline>t.timeline||t.segments.length&&n.timeline>t.segments[t.segments.length-1].timeline)&&n.discontinuitySequence--):(t.segments[b].discontinuity&&!a.discontinuity&&(a.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),Wi({playlist:n,mediaSequence:t.segments[b].number}))}})},un=({oldManifest:d,newManifest:f})=>{const k=d.playlists.concat(Vi(d)),n=f.playlists.concat(Vi(f));f.timelineStarts=
Ui([d.timelineStarts,f.timelineStarts]);tn({oldPlaylists:k,newPlaylists:n,timelineStarts:f.timelineStarts});return f},he=d=>{var f;if(f=d){f=d.uri+"-";d=d.byterange;let k;k="bigint"===typeof d.offset||"bigint"===typeof d.length?D.BigInt(d.offset)+D.BigInt(d.length)-D.BigInt(1):d.offset+d.length-1;f+=`${d.offset}-${k}`}return f},Uf=d=>{d=d.reduce(function(k,n){k[n.attributes.baseUrl]||(k[n.attributes.baseUrl]=[]);k[n.attributes.baseUrl].push(n);return k},{});let f=[];Object.values(d).forEach(k=>{k=
Qi(k.reduce((n,t)=>{const a=t.attributes.id+(t.attributes.lang||"");n[a]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),n[a].segments.push(...t.segments)),t.attributes.contentProtection&&(n[a].attributes.contentProtection=t.attributes.contentProtection)):(n[a]=t,n[a].attributes.timelineStarts=[]);n[a].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart});return n},{}));f=f.concat(k)});return f.map(k=>{k.discontinuityStarts=mn(k.segments||
[],"discontinuity");return k})},Vf=(d,f)=>{const k=he(d.sidx);(f=k&&f[k]&&f[k].sidx)&&Tf(d,f,d.sidx.resolvedUri);return d},vn=(d,f={})=>{if(!Object.keys(f).length)return d;for(const k in d)d[k]=Vf(d[k],f);return d},wn=({attributes:d,segments:f,sidx:k,mediaSequence:n,discontinuitySequence:t,discontinuityStarts:a},b)=>{f={attributes:{NAME:d.id,BANDWIDTH:d.bandwidth,CODECS:d.codecs,["PROGRAM-ID"]:1},uri:"",endList:"static"===d.type,timeline:d.periodStart,resolvedUri:d.baseUrl||"",targetDuration:d.duration,
discontinuitySequence:t,discontinuityStarts:a,timelineStarts:d.timelineStarts,mediaSequence:n,segments:f};d.contentProtection&&(f.contentProtection=d.contentProtection);d.serviceLocation&&(f.attributes.serviceLocation=d.serviceLocation);k&&(f.sidx=k);b&&(f.attributes.AUDIO="audio",f.attributes.SUBTITLES="subs");return f},xn=({attributes:d,segments:f,mediaSequence:k,discontinuityStarts:n,discontinuitySequence:t})=>{"undefined"===typeof f&&(f=[{uri:d.baseUrl,timeline:d.periodStart,resolvedUri:d.baseUrl||
"",duration:d.sourceDuration,number:0}],d.duration=d.sourceDuration);const a={NAME:d.id,BANDWIDTH:d.bandwidth,["PROGRAM-ID"]:1};d.codecs&&(a.CODECS=d.codecs);f={attributes:a,uri:"",endList:"static"===d.type,timeline:d.periodStart,resolvedUri:d.baseUrl||"",targetDuration:d.duration,timelineStarts:d.timelineStarts,discontinuityStarts:n,discontinuitySequence:t,mediaSequence:k,segments:f};d.serviceLocation&&(f.attributes.serviceLocation=d.serviceLocation);return f},yn=(d,f={},k=!1)=>{let n;d=d.reduce((t,
a)=>{const b=a.attributes.role&&a.attributes.role.value||"";var c=a.attributes.lang||"";let e=a.attributes.label||"main";c&&!a.attributes.label&&(e=`${a.attributes.lang}${b?` (${b})`:""}`);t[e]||(t[e]={language:c,autoselect:!0,default:"main"===b,playlists:[],uri:""});c=Vf(wn(a,k),f);t[e].playlists.push(c);"undefined"===typeof n&&"main"===b&&(n=a,n.default=!0);return t},{});if(!n){const t=Object.keys(d)[0];d[t].default=!0}return d},zn=(d,f={})=>d.reduce((k,n)=>{const t=n.attributes.label||n.attributes.lang||
"text";k[t]||(k[t]={language:t,default:!1,autoselect:!1,playlists:[],uri:""});k[t].playlists.push(Vf(xn(n),f));return k},{}),An=d=>d.reduce((f,k)=>{if(!k)return f;k.forEach(n=>{const {channel:t,language:a}=n;f[a]={autoselect:!1,default:!1,instreamId:t,language:a};n.hasOwnProperty("aspectRatio")&&(f[a].aspectRatio=n.aspectRatio);n.hasOwnProperty("easyReader")&&(f[a].easyReader=n.easyReader);n.hasOwnProperty("3D")&&(f[a]["3D"]=n["3D"])});return f},{}),Bn=({attributes:d,segments:f,sidx:k,discontinuityStarts:n})=>
{f={attributes:{NAME:d.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:d.width,height:d.height},CODECS:d.codecs,BANDWIDTH:d.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:"static"===d.type,timeline:d.periodStart,resolvedUri:d.baseUrl||"",targetDuration:d.duration,discontinuityStarts:n,timelineStarts:d.timelineStarts,segments:f};d.frameRate&&(f.attributes["FRAME-RATE"]=d.frameRate);d.contentProtection&&(f.contentProtection=d.contentProtection);d.serviceLocation&&(f.attributes.serviceLocation=d.serviceLocation);
k&&(f.sidx=k);return f},Cn=({attributes:d})=>"video/mp4"===d.mimeType||"video/webm"===d.mimeType||"video"===d.contentType,Dn=({attributes:d})=>"audio/mp4"===d.mimeType||"audio/webm"===d.mimeType||"audio"===d.contentType,En=({attributes:d})=>"text/vtt"===d.mimeType||"text"===d.contentType,Fn=(d,f)=>{d.forEach(k=>{k.mediaSequence=0;k.discontinuitySequence=f.findIndex(function({timeline:n}){return n===k.timeline});k.segments&&k.segments.forEach((n,t)=>{n.number=t})})},Xi=d=>d?Object.keys(d).reduce((f,
k)=>f.concat(d[k].playlists),[]):[],Gn=({dashPlaylists:d,locations:f,contentSteering:k,sidxMapping:n={},previousManifest:t,eventStream:a})=>{if(!d.length)return{};const {sourceDuration:b,type:c,suggestedPresentationDelay:e,minimumUpdatePeriod:g}=d[0].attributes;var m=Uf(d.filter(Cn)).map(Bn),p=Uf(d.filter(Dn)),u=Uf(d.filter(En));d=d.map(y=>y.attributes.captionServices).filter(Boolean);const x={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},
SUBTITLES:{}},uri:"",duration:b,playlists:vn(m,n)};0<=g&&(x.minimumUpdatePeriod=1E3*g);f&&(x.locations=f);k&&(x.contentSteering=k);"dynamic"===c&&(x.suggestedPresentationDelay=e);a&&0<a.length&&(x.eventStream=a);f=0===x.playlists.length;p=p.length?yn(p,n,f):null;n=u.length?zn(u,n):null;m=m.concat(Xi(p),Xi(n));u=m.map(({timelineStarts:y})=>y);x.timelineStarts=Ui(u);Fn(m,x.timelineStarts);p&&(x.mediaGroups.AUDIO.audio=p);n&&(x.mediaGroups.SUBTITLES.subs=n);d.length&&(x.mediaGroups["CLOSED-CAPTIONS"].cc=
An(d));return t?un({oldManifest:t,newManifest:x}):x},Yi=(d,f)=>{const {type:k,minimumUpdatePeriod:n=0,media:t="",sourceDuration:a,timescale:b=1,startNumber:c=1,periodStart:e}=d,g=[];let m=-1;for(let x=0;x<f.length;x++){var p=f[x];const y=p.d;var u=p.r||0;p=p.t||0;0>m&&(m=p);p&&p>m&&(m=p);if(0>u)if(u=x+1,u===f.length)if("dynamic"===k&&0<n&&0<t.indexOf("$Number$")){const {NOW:B,clientOffset:z,availabilityStartTime:E,timescale:J=1,periodStart:G=0,minimumUpdatePeriod:O=0}=d;u=Math.ceil((((B+z)/1E3+O-
(E+G))*J-m)/y)}else u=(a*b-m)/y;else u=(f[u].t-m)/y;else u+=1;u=c+g.length+u;for(p=c+g.length;p<u;)g.push({number:p,duration:y/b,time:m,timeline:e}),m+=y,p++}return g},Zi=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,$i=d=>(f,k,n,t)=>{if("$$"===f)return"$";if("undefined"===typeof d[k])return f;f=""+d[k];if("RepresentationID"===k)return f;t=n?parseInt(t,10):1;return f.length>=t?f:`${Array(t-f.length+1).join("0")}${f}`},Hn=(d,f)=>d.duration||f?d.duration?Sf(d):Yi(d,f):[{number:d.startNumber||1,duration:d.sourceDuration,
time:0,timeline:d.periodStart}],In=(d,f)=>{const k={RepresentationID:d.id,Bandwidth:d.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=d,t=jd({baseUrl:d.baseUrl,source:n.sourceURL.replace(Zi,$i(k)),range:n.range});return Hn(d,f).map(a=>{k.Number=a.number;k.Time=a.time;const b=(d.media||"").replace(Zi,$i(k)),c=d.periodStart+(a.time-(d.presentationTimeOffset||0))/(d.timescale||1);return{uri:b,timeline:a.timeline,duration:a.duration,resolvedUri:Pf(d.baseUrl||"",b),map:t,number:a.number,presentationTime:c}})},
Jn=(d,f)=>{const {duration:k,segmentUrls:n=[],periodStart:t}=d;if(!k&&!f||k&&f)throw Error("SEGMENT_TIME_UNSPECIFIED");const a=n.map(c=>{const {baseUrl:e,initialization:g={}}=d,m=jd({baseUrl:e,source:g.sourceURL,range:g.range});c=jd({baseUrl:e,source:c.media,range:c.mediaRange});c.map=m;return c});let b;k&&(b=Sf(d));f&&(b=Yi(d,f));return b.map((c,e)=>{if(a[e]){e=a[e];const g=d.timescale||1,m=d.presentationTimeOffset||0;e.timeline=c.timeline;e.duration=c.duration;e.number=c.number;e.presentationTime=
t+(c.time-m)/g;return e}}).filter(c=>c)},Kn=({attributes:d,segmentInfo:f})=>{let k;if(f.template){var n=In;k=Fa(d,f.template)}else f.base?(n=Ti,k=Fa(d,f.base)):f.list&&(n=Jn,k=Fa(d,f.list));d={attributes:d};if(!n)return d;n=n(k,f.segmentTimeline);if(k.duration){const {duration:t,timescale:a=1}=k;k.duration=t/a}else k.duration=n.length?n.reduce((t,a)=>Math.max(t,Math.ceil(a.duration)),0):0;d.attributes=k;d.segments=n;f.base&&k.indexRange&&(d.sidx=n[0],d.segments=[]);return d},ra=(d,f)=>Ri(d.childNodes).filter(({tagName:k})=>
k===f),Ln=d=>d.textContent.trim(),Mn=d=>parseFloat(d.split("/").reduce((f,k)=>f/k)),Fc=d=>{d=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(d);if(!d)return 0;const [f,k,n,t,a,b]=d.slice(1);return 31536E3*parseFloat(f||0)+2592E3*parseFloat(k||0)+86400*parseFloat(n||0)+3600*parseFloat(t||0)+60*parseFloat(a||0)+parseFloat(b||0)},aj={mediaPresentationDuration(d){return Fc(d)},availabilityStartTime(d){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(d)&&(d+="Z");return Date.parse(d)/
1E3},minimumUpdatePeriod(d){return Fc(d)},suggestedPresentationDelay(d){return Fc(d)},type(d){return d},timeShiftBufferDepth(d){return Fc(d)},start(d){return Fc(d)},width(d){return parseInt(d,10)},height(d){return parseInt(d,10)},bandwidth(d){return parseInt(d,10)},frameRate(d){return Mn(d)},startNumber(d){return parseInt(d,10)},timescale(d){return parseInt(d,10)},presentationTimeOffset(d){return parseInt(d,10)},duration(d){const f=parseInt(d,10);return isNaN(f)?Fc(d):f},d(d){return parseInt(d,10)},
t(d){return parseInt(d,10)},r(d){return parseInt(d,10)},presentationTime(d){return parseInt(d,10)},DEFAULT(d){return d}},Ba=d=>d&&d.attributes?Ri(d.attributes).reduce((f,k)=>{f[k.name]=(aj[k.name]||aj.DEFAULT)(k.value);return f},{}):{},Nn={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},
ie=(d,f)=>f.length?Ec(d.map(function(k){return f.map(function(n){const t=n.textContent.trim(),a=Pf(k.baseUrl,t);n=Fa(Ba(n),{baseUrl:a});a!==t&&!n.serviceLocation&&k.serviceLocation&&(n.serviceLocation=k.serviceLocation);return n})})):d,Wf=d=>{var f=ra(d,"SegmentTemplate")[0];const k=ra(d,"SegmentList")[0],n=k&&ra(k,"SegmentURL").map(c=>Fa({tag:"SegmentURL"},Ba(c)));d=ra(d,"SegmentBase")[0];var t=k||f;t=t&&ra(t,"SegmentTimeline")[0];var a=k||d||f;a=a&&ra(a,"Initialization")[0];(f=f&&Ba(f))&&a?f.initialization=
a&&Ba(a):f&&f.initialization&&(f.initialization={sourceURL:f.initialization});const b={template:f,segmentTimeline:t&&ra(t,"S").map(c=>Ba(c)),list:k&&Fa(Ba(k),{segmentUrls:n,initialization:Ba(a)}),base:d&&Fa(Ba(d),{initialization:Ba(a)})};Object.keys(b).forEach(c=>{b[c]||delete b[c]});return b},On=(d,f,k)=>n=>{var t=ra(n,"BaseURL");t=ie(f,t);const a=Fa(d,Ba(n)),b=Wf(n);return t.map(c=>({segmentInfo:Fa(k,b),attributes:Fa(a,c)}))},Pn=d=>d.reduce((f,k)=>{var n=Ba(k);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());
var t=Nn[n.schemeIdUri];if(t&&(f[t]={attributes:n},k=ra(k,"cenc:pssh")[0])){k=k.textContent.trim();t=f[t];if(n=k){k=D.atob?D.atob(k):Buffer.from(k,"base64").toString("binary");n=new Uint8Array(k.length);for(var a=0;a<k.length;a++)n[a]=k.charCodeAt(a)}t.pssh=n}return f},{}),Qn=d=>{if("urn:scte:dash:cc:cea-608:2015"===d.schemeIdUri)return("string"!==typeof d.value?[]:d.value.split(";")).map(f=>{let k,n;n=f;/^CC\d=/.test(f)?[k,n]=f.split("\x3d"):/^CC\d$/.test(f)&&(k=f);return{channel:k,language:n}});
if("urn:scte:dash:cc:cea-708:2015"===d.schemeIdUri)return("string"!==typeof d.value?[]:d.value.split(";")).map(f=>{const k={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(f)){const [n,t=""]=f.split("\x3d");k.channel=n;k.language=f;t.split(",").forEach(a=>{const [b,c]=a.split(":");"lang"===b?k.language=c:"er"===b?k.easyReader=Number(c):"war"===b?k.aspectRatio=Number(c):"3D"===b&&(k["3D"]=Number(c))})}else k.language=f;k.channel&&(k.channel="SERVICE"+k.channel);return k})},
Rn=d=>Ec(ra(d.node,"EventStream").map(f=>{const k=Ba(f),n=k.schemeIdUri;return ra(f,"Event").map(t=>{const a=Ba(t),b=k.timescale||1,c=(a.presentationTime||0)/b+d.attributes.start;return{schemeIdUri:n,value:k.value,id:a.id,start:c,end:c+(a.duration||0)/b,messageData:t.textContent.trim()||a.messageData,contentEncoding:k.contentEncoding,presentationTimeOffset:k.presentationTimeOffset||0}})})),Sn=(d,f,k)=>n=>{var t=Ba(n);const a=ie(f,ra(n,"BaseURL"));var b=ra(n,"Role")[0];b={role:Ba(b)};t=Fa(d,t,b);b=
ra(n,"Accessibility")[0];(b=Qn(Ba(b)))&&(t=Fa(t,{captionServices:b}));(b=ra(n,"Label")[0])&&b.childNodes.length&&(b=b.childNodes[0].nodeValue.trim(),t=Fa(t,{label:b}));b=Pn(ra(n,"ContentProtection"));Object.keys(b).length&&(t=Fa(t,{contentProtection:b}));b=Wf(n);n=ra(n,"Representation");b=Fa(k,b);return Ec(n.map(On(t,a,b)))},Tn=(d,f)=>(k,n)=>{n=ie(f,ra(k.node,"BaseURL"));const t=Fa(d,{periodStart:k.attributes.start});"number"===typeof k.attributes.duration&&(t.periodDuration=k.attributes.duration);
const a=ra(k.node,"AdaptationSet");k=Wf(k.node);return Ec(a.map(Sn(t,n,k)))},Un=(d,f)=>{1<d.length&&f({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"});if(!d.length)return null;d=Fa({serverURL:d[0].textContent.trim()},Ba(d[0]));d.queryBeforeStart="true"===d.queryBeforeStart;return d},Vn=({attributes:d,priorPeriodAttributes:f,mpdType:k})=>"number"===typeof d.start?d.start:f&&"number"===typeof f.start&&"number"===typeof f.duration?f.start+f.duration:f||"static"!==
k?null:0,Wn=(d,f={})=>{const {manifestUri:k="",NOW:n=Date.now(),clientOffset:t=0,eventHandler:a=function(){}}=f;f=ra(d,"Period");if(!f.length)throw Error("INVALID_NUMBER_OF_PERIOD");const b=ra(d,"Location"),c=Ba(d),e=ie([{baseUrl:k}],ra(d,"BaseURL"));d=ra(d,"ContentSteering");c.type=c.type||"static";c.sourceDuration=c.mediaPresentationDuration||0;c.NOW=n;c.clientOffset=t;b.length&&(c.locations=b.map(Ln));const g=[];f.forEach((m,p)=>{const u=Ba(m);p=g[p-1];u.start=Vn({attributes:u,priorPeriodAttributes:p?
p.attributes:null,mpdType:c.type});g.push({node:m,attributes:u})});return{locations:c.locations,contentSteeringInfo:Un(d,a),representationInfo:Ec(g.map(Tn(c,e))),eventStream:Ec(g.map(Rn))}},bj=d=>{if(""===d)throw Error("DASH_EMPTY_MANIFEST");const f=new Wh;let k,n;try{n=(k=f.parseFromString(d,"application/xml"))&&"MPD"===k.documentElement.tagName?k.documentElement:null}catch(t){}if(!n||n&&0<n.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return n},Xn=d=>{d=ra(d,"UTCTiming")[0];
if(!d)return null;d=Ba(d);switch(d.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":d.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":d.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":d.method="DIRECT";d.value=Date.parse(d.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");
}return d},Yn=(d,f={})=>{d=Wn(bj(d),f);const k=d.representationInfo.map(Kn);return Gn({dashPlaylists:k,locations:d.locations,contentSteering:d.contentSteeringInfo,sidxMapping:f.sidxMapping,previousManifest:f.previousManifest,eventStream:d.eventStream})};var Zn=Math.pow(2,32),cj=function(d){d=new DataView(d.buffer,d.byteOffset,d.byteLength);return d.getBigUint64?(d=d.getBigUint64(0),d<Number.MAX_SAFE_INTEGER?Number(d):d):d.getUint32(0)*Zn+d.getUint32(4)};const $n=hb.getDefaultExportFromCjs(function(d){var f=
new DataView(d.buffer,d.byteOffset,d.byteLength),k={version:d[0],flags:new Uint8Array(d.subarray(1,4)),references:[],referenceId:f.getUint32(4),timescale:f.getUint32(8)},n=12;0===k.version?(k.earliestPresentationTime=f.getUint32(n),k.firstOffset=f.getUint32(n+4),n+=8):(k.earliestPresentationTime=cj(d.subarray(n)),k.firstOffset=cj(d.subarray(n+8)),n+=16);n+=2;var t=f.getUint16(n);for(n+=2;0<t;n+=12,t--)k.references.push({referenceType:(d[n]&128)>>>7,referencedSize:f.getUint32(n)&2147483647,subsegmentDuration:f.getUint32(n+
4),startsWithSap:!!(d[n+8]&128),sapType:(d[n+8]&112)>>>4,sapDeltaTime:f.getUint32(n+8)&268435455});return k});var ao=U([73,68,51]),kd=function n(f,k){void 0===k&&(k=0);f=U(f);if(10>f.length-k||!qa(f,ao,{offset:k}))return k;var t=k;var a=k;void 0===a&&(a=0);k=U(f);var b=k[a+6]<<21|k[a+7]<<14|k[a+8]<<7|k[a+9];k=(k[a+5]&16)>>4?b+20:b+10;k=t+k;return n(f,k)},dj=function(f){return"string"===typeof f?Ki(f):f},bo=function(f){return Array.isArray(f)?f.map(function(k){return dj(k)}):[dj(f)]},co=function a(k,
n,t){void 0===t&&(t=!1);n=bo(n);k=U(k);var b=[];if(!n.length)return b;for(var c=0;c<k.length;){var e=(k[c]<<24|k[c+1]<<16|k[c+2]<<8|k[c+3])>>>0,g=k.subarray(c+4,c+8);if(0===e)break;e=c+e;if(e>k.length){if(t)break;e=k.length}c=k.subarray(c+8,e);qa(g,n[0])&&(1===n.length?b.push(c):b.push.apply(b,a(c,n.slice(1),t)));c=e}return b},ej=U([26,69,223,163]),fj=U([66,130]);U([24,83,128,103]);U([21,73,169,102]);U([22,84,174,107]);U([174]);U([215]);U([35,227,131]);U([174]);U([131]);U([136]);U([134]);U([99,162]);
U([224]);U([225]);U([31,67,182,117]);U([231]);U([42,215,177]);U([160]);U([155]);U([161]);U([163]);var Xf=[128,64,32,16,8,4,2,1],je=function(k,n,t,a){void 0===t&&(t=!0);void 0===a&&(a=!1);var b=1;for(var c=0;c<Xf.length&&!(k[n]&Xf[c]);c++)b++;c=k.subarray(n,n+b);t&&(c=Array.prototype.slice.call(k,n,n+b),c[0]^=Xf[b-1]);return{length:b,value:en(c,{signed:a}),bytes:c}},gj=function t(n){return"string"===typeof n?n.match(/.{1,2}/g).map(function(a){return t(a)}):"number"===typeof n?fn(n):n},eo=function(n){return Array.isArray(n)?
n.map(function(t){return gj(t)}):[gj(n)]},fo=function c(t,a,b){if(b>=a.length)return a.length;var e=je(a,b,!1);if(qa(t.bytes,e.bytes))return b;var g=je(a,b+e.length);return c(t,a,b+g.length+g.value+e.length)},hj=function c(a,b){b=eo(b);a=U(a);var e=[];if(!b.length)return e;for(var g=0;g<a.length;){var m=je(a,g,!1),p=je(a,g+m.length),u=g+m.length+p.length;127===p.value&&(p.value=fo(m,a,u),p.value!==a.length&&(p.value-=u));u=a.subarray(u,u+p.value>a.length?a.length:u+p.value);qa(b[0],m.bytes)&&(1===
b.length?e.push(u):e=e.concat(c(u,b.slice(1))));g+=m.length+p.length+u.length}return e},go=U([0,0,0,1]),ho=U([0,0,1]),io=U([0,0,3]),ij=function(a,b,c,e){void 0===e&&(e=Infinity);a=U(a);c=[].concat(c);for(var g=0,m,p=0;g<a.length&&(p<e||m);){var u=void 0;qa(a.subarray(g),go)?u=4:qa(a.subarray(g),ho)&&(u=3);if(u){p++;if(m){a=a.subarray(m,g);b=[];for(c=1;c<a.length-2;)qa(a.subarray(c,c+3),io)&&(b.push(c+2),c++),c++;if(0!==b.length){e=a.length-b.length;g=new Uint8Array(e);for(c=m=0;c<e;m++,c++)m===b[0]&&
(m++,b.shift()),g[c]=a[m];a=g}return a}var x=void 0;"h264"===b?x=a[g+u]&31:"h265"===b&&(x=a[g+u]>>1&63);-1!==c.indexOf(x)&&(m=g+u);g+=u+("h264"===b?1:2)}else g++}return a.subarray(0,0)},Sa={webm:U([119,101,98,109]),matroska:U([109,97,116,114,111,115,107,97]),flac:U([102,76,97,67]),ogg:U([79,103,103,83]),ac3:U([11,119]),riff:U([82,73,70,70]),avi:U([65,86,73]),wav:U([87,65,86,69]),"3gp":U([102,116,121,112,51,103]),mp4:U([102,116,121,112]),fmp4:U([115,116,121,112]),mov:U([102,116,121,112,113,116]),moov:U([109,
111,111,118]),moof:U([109,111,111,102])},Gc={aac:function(a){var b=kd(a);return qa(a,[255,16],{offset:b,mask:[255,22]})},mp3:function(a){var b=kd(a);return qa(a,[255,2],{offset:b,mask:[255,6]})},webm:function(a){a=hj(a,[ej,fj])[0];return qa(a,Sa.webm)},mkv:function(a){a=hj(a,[ej,fj])[0];return qa(a,Sa.matroska)},mp4:function(a){if(Gc["3gp"](a)||Gc.mov(a))return!1;if(qa(a,Sa.mp4,{offset:4})||qa(a,Sa.fmp4,{offset:4})||qa(a,Sa.moof,{offset:4})||qa(a,Sa.moov,{offset:4}))return!0},mov:function(a){return qa(a,
Sa.mov,{offset:4})},"3gp":function(a){return qa(a,Sa["3gp"],{offset:4})},ac3:function(a){var b=kd(a);return qa(a,Sa.ac3,{offset:b})},ts:function(a){if(189>a.length&&1<=a.length)return 71===a[0];for(var b=0;b+188<a.length&&188>b;){if(71===a[b]&&71===a[b+188])return!0;b+=1}return!1},flac:function(a){var b=kd(a);return qa(a,Sa.flac,{offset:b})},ogg:function(a){return qa(a,Sa.ogg)},avi:function(a){return qa(a,Sa.riff)&&qa(a,Sa.avi,{offset:8})},wav:function(a){return qa(a,Sa.riff)&&qa(a,Sa.wav,{offset:8})},
h264:function(a){return ij(a,"h264",7,3).length},h265:function(a){return ij(a,"h265",[32,33],3).length}},Yf=Object.keys(Gc).filter(function(a){return"ts"!==a&&"h264"!==a&&"h265"!==a}).concat(["ts","h264","h265"]);Yf.forEach(function(a){var b=Gc[a];Gc[a]=function(c){return b(U(c))}});var jo=Gc,Zf=function(a){a=U(a);for(var b=0;b<Yf.length;b++){var c=Yf[b];if(jo[c](a))return c}return""};const Kb={},Wb=function(a,b){Kb[a]=Kb[a]||[];b&&(Kb[a]=Kb[a].concat(b));return Kb[a]},jj=function(a,b){b=Wb(a).indexOf(b);
if(-1>=b)return!1;Kb[a]=Kb[a].slice();Kb[a].splice(b,1);return!0},Vd={prefixed:!0},ke=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" ")],kj=ke[0];let ld;for(let a=0;a<ke.length;a++)if(ke[a][1]in P){ld=ke[a];break}if(ld){for(let a=0;a<ld.length;a++)Vd[kj[a]]=
ld[a];Vd.prefixed=ld[0]!==kj[0]}let Va=[];const Cm=(a,b)=>(c,e,g)=>{e=b.levels[e];const m=new RegExp(`^(${e})$`);"log"!==c&&g.unshift(c.toUpperCase()+":");g.unshift(a+":");if(Va){Va.push([].concat(g));var p=Va.length-1E3;Va.splice(0,0<p?p:0)}if(D.console&&((p=D.console[c])||"debug"!==c||(p=D.console.info||D.console.log),p&&e&&m.test(c)))p[Array.isArray(g)?"apply":"call"](D.console,g)},ca=Yh("VIDEOJS"),lj=ca.createLogger,Dm=Object.prototype.toString,Zh=function(a){return ub(a)?Object.keys(a):[]};var ko=
Object.freeze({__proto__:null,each:xc,reduce:$h,isObject:ub,isPlain:yc,merge:ma,values:ai,defineLazyProperty:Td});let $f=!1,mj=null,zb=!1,nj,oj=!1,Hc=!1,Ic=!1,Ab=!1,ag=null,le=null,pj=null,me=!1,ne=!1,oe=!1,pe=!1;const md=!(!zc()||!("ontouchstart"in D||D.navigator.maxTouchPoints||D.DocumentTouch&&D.document instanceof D.DocumentTouch)),Jc=D.navigator&&D.navigator.userAgentData;Jc&&(zb="Android"===Jc.platform,Hc=!!Jc.brands.find(a=>"Microsoft Edge"===a.brand),Ic=!!Jc.brands.find(a=>"Chromium"===a.brand),
Ab=!Hc&&Ic,ag=le=(Jc.brands.find(a=>"Chromium"===a.brand)||{}).version||null,ne="Windows"===Jc.platform);if(!Ic){const a=D.navigator&&D.navigator.userAgent||"";$f=/iPod/i.test(a);mj=function(){const b=a.match(/OS (\d+)_/i);return b&&b[1]?b[1]:null}();zb=/Android/i.test(a);nj=function(){const b=a.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!b)return null;const c=b[1]&&parseFloat(b[1]),e=b[2]&&parseFloat(b[2]);return c&&e?parseFloat(b[1]+"."+b[2]):c?c:null}();oj=/Firefox/i.test(a);Hc=/Edg/i.test(a);
Ic=/Chrome/i.test(a)||/CriOS/i.test(a);Ab=!Hc&&Ic;ag=le=function(){const b=a.match(/(Chrome|CriOS)\/(\d+)/);return b&&b[2]?parseFloat(b[2]):null}();pj=function(){var b=/MSIE\s(\d+)\.\d/.exec(a);b=b&&parseFloat(b[1]);!b&&/Trident\/7.0/i.test(a)&&/rv:11.0/.test(a)&&(b=11);return b}();me=/Safari/i.test(a)&&!Ab&&!zb&&!Hc;ne=/Windows/i.test(a);oe=/iPad/i.test(a)||me&&md&&!/iPhone/i.test(a);pe=/iPhone/i.test(a)&&!oe}const Oa=pe||oe||$f,qe=(me||Oa)&&!Ab;var lo=Object.freeze({__proto__:null,get IS_IPOD(){return $f},
get IOS_VERSION(){return mj},get IS_ANDROID(){return zb},get ANDROID_VERSION(){return nj},get IS_FIREFOX(){return oj},get IS_EDGE(){return Hc},get IS_CHROMIUM(){return Ic},get IS_CHROME(){return Ab},get CHROMIUM_VERSION(){return ag},get CHROME_VERSION(){return le},get IE_VERSION(){return pj},get IS_SAFARI(){return me},get IS_WINDOWS(){return ne},get IS_IPAD(){return oe},get IS_IPHONE(){return pe},TOUCH_ENABLED:md,IS_IOS:Oa,IS_ANY_SAFARI:qe});const Vb=ci("querySelector"),qj=ci("querySelectorAll");
var rj=Object.freeze({__proto__:null,isReal:zc,isEl:Ac,isInFrame:bi,createEl:aa,textContent:Tb,prependTo:uf,hasClass:dd,addClass:ac,removeClass:Ud,toggleClass:di,setAttributes:ei,getAttributes:Ub,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},removeAttribute:function(a,b){a.removeAttribute(b)},blockTextSelection:fi,unblockTextSelection:gi,getBoundingClientRect:Bc,findPosition:ed,getPointerPosition:Wd,isTextNode:hi,emptyEl:Xd,normalizeContent:ii,
appendContent:tf,insertContent:ji,isSingleLeftClick:fd,$:Vb,$$:qj,computedStyle:Cc,copyStyleSheetsToWindow:ki});let li=!1,wf;const Em=function(){if(!1!==wf.options.autoSetup){var a=Array.prototype.slice.call(P.getElementsByTagName("video")),b=Array.prototype.slice.call(P.getElementsByTagName("audio")),c=Array.prototype.slice.call(P.getElementsByTagName("video-js"));if((a=a.concat(b,c))&&0<a.length)for(let e=0,g=a.length;e<g;e++)if((b=a[e])&&b.getAttribute)void 0===b.player&&null!==b.getAttribute("data-setup")&&
wf(b);else{vf(1);break}else li||vf(1)}};zc()&&("complete"===P.readyState?xf():D.addEventListener("load",xf));const sj=function(a){const b=P.createElement("style");b.className=a;return b},tj=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b};var Pa=new WeakMap;let vb=3,re;const Fm=function(){if("boolean"!==typeof re){re=!1;try{const a=Object.defineProperty({},"passive",{get(){re=!0}});D.addEventListener("test",null,a);D.removeEventListener("test",null,a)}catch(a){}}return re},Gm=["touchstart",
"touchmove"];var mo=Object.freeze({__proto__:null,fixEvent:Yd,on:$a,off:Ka,trigger:Dc,one:Zd,any:zf});const na=function(a,b,c){b.guid||(b.guid=vb++);a=b.bind(a);a.guid=c?c+"_"+b.guid:b.guid;return a},Bb=function(a,b){let c=D.performance.now();return function(...e){const g=D.performance.now();g-c>=b&&(a(...e),c=g)}},uj=function(a,b,c,e=D){let g;const m=function(){const p=this,u=arguments;let x=function(){x=g=null;c||a.apply(p,u)};!g&&c&&a.apply(p,u);e.clearTimeout(g);g=e.setTimeout(x,b)};m.cancel=
()=>{e.clearTimeout(g);g=null};return m};var no=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:na,throttle:Bb,debounce:uj});let nd;class jb{on(a,b){const c=this.addEventListener;this.addEventListener=()=>{};$a(this,a,b);this.addEventListener=c}off(a,b){Ka(this,a,b)}one(a,b){const c=this.addEventListener;this.addEventListener=()=>{};Zd(this,a,b);this.addEventListener=c}any(a,b){const c=this.addEventListener;this.addEventListener=()=>{};zf(this,a,b);this.addEventListener=c}trigger(a){const b=
a.type||a;"string"===typeof a&&(a={type:b});a=Yd(a);if(this.allowedEvents_[b]&&this["on"+b])this["on"+b](a);Dc(this,a)}queueTrigger(a){nd||(nd=new Map);const b=a.type||a;let c=nd.get(this);c||(c=new Map,nd.set(this,c));var e=c.get(b);c.delete(b);D.clearTimeout(e);e=D.setTimeout(()=>{c.delete(b);0===c.size&&(c=null,nd.delete(this));this.trigger(a)},0);c.set(b,e)}}jb.prototype.allowedEvents_={};jb.prototype.addEventListener=jb.prototype.on;jb.prototype.removeEventListener=jb.prototype.off;jb.prototype.dispatchEvent=
jb.prototype.trigger;const se=a=>"function"===typeof a.name?a.name():"string"===typeof a.name?a.name:a.name_?a.name_:a.constructor&&a.constructor.name?a.constructor.name:typeof a,Ib=a=>a instanceof jb||!!a.eventBusEl_&&["on","one","off","trigger"].every(b=>"function"===typeof a[b]),oo=(a,b)=>{Ib(a)?b():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(b))},bg=a=>"string"===typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length,te=(a,b,c)=>{if(!a||!a.nodeName&&!Ib(a))throw Error(`Invalid target for ${se(b)}#${c}; must be a DOM node or evented object.`);
},vj=(a,b,c)=>{if(!bg(a))throw Error(`Invalid event type for ${se(b)}#${c}; must be a non-empty string or array.`);},wj=(a,b,c)=>{if("function"!==typeof a)throw Error(`Invalid listener for ${se(b)}#${c}; must be a function.`);},cg=(a,b,c)=>{const e=3>b.length||b[0]===a||b[0]===a.eventBusEl_;let g,m;e?(g=a.eventBusEl_,3<=b.length&&b.shift(),[b,m]=b):[g,b,m]=b;te(g,a,c);vj(b,a,c);wj(m,a,c);m=na(a,m);return{isTargetingSelf:e,target:g,type:b,listener:m}},ic=(a,b,c,e)=>{te(a,a,b);if(a.nodeName)mo[b](a,
c,e);else a[b](c,e)},Hm={on(...a){const {isTargetingSelf:b,target:c,type:e,listener:g}=cg(this,a,"on");ic(c,"on",e,g);if(!b){const m=()=>this.off(c,e,g);m.guid=g.guid;a=()=>this.off("dispose",m);a.guid=g.guid;ic(this,"on","dispose",m);ic(c,"on","dispose",a)}},one(...a){const {isTargetingSelf:b,target:c,type:e,listener:g}=cg(this,a,"one");if(b)ic(c,"one",e,g);else{const m=(...p)=>{this.off(c,e,m);g.apply(null,p)};m.guid=g.guid;ic(c,"one",e,m)}},any(...a){const {isTargetingSelf:b,target:c,type:e,listener:g}=
cg(this,a,"any");if(b)ic(c,"any",e,g);else{const m=(...p)=>{this.off(c,e,m);g.apply(null,p)};m.guid=g.guid;ic(c,"any",e,m)}},off(a,b,c){!a||bg(a)?Ka(this.eventBusEl_,a,b):(te(a,this,"off"),vj(b,this,"off"),wj(c,this,"off"),c=na(this,c),this.off("dispose",c),a.nodeName?(Ka(a,b,c),Ka(a,"dispose",c)):Ib(a)&&(a.off(b,c),a.off("dispose",c)))},trigger(a,b){te(this.eventBusEl_,this,"trigger");if(!bg(a&&"string"!==typeof a?a.type:a))throw Error(`Invalid event type for ${se(this)}#trigger; `+"must be a non-empty string or object with a type key that has a non-empty value.");
return Dc(this.eventBusEl_,a,b)}},Im={state:{},setState(a){"function"===typeof a&&(a=a());let b;xc(a,(c,e)=>{this.state[e]!==c&&(b=b||{},b[e]={from:this.state[e],to:c});this.state[e]=c});b&&Ib(this)&&this.trigger({changes:b,type:"statechanged"});return b}},od=function(a){return"string"!==typeof a?a:a.replace(/./,b=>b.toLowerCase())},va=function(a){return"string"!==typeof a?a:a.replace(/./,b=>b.toUpperCase())},xj=function(a,b){return va(a)===va(b)};var po=Object.freeze({__proto__:null,toLowerCase:od,
toTitleCase:va,titleCaseEquals:xj});class M{constructor(a,b,c){this.player_=!a&&this.play?a=this:a;this.isDisposed_=!1;this.parentComponent_=null;this.options_=ma({},this.options_);b=this.options_=ma(this.options_,b);this.id_=b.id||b.el&&b.el.id;this.id_||(this.id_=`${a&&a.id&&a.id()||"no_player"}_component_${vb++}`);this.name_=b.name||null;b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl());b.className&&this.el_&&b.className.split(" ").forEach(e=>this.addClass(e));["on","off","one","any",
"trigger"].forEach(e=>{this[e]=void 0});!1!==b.evented&&(Af(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange));ni(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};this.setTimeoutIds_=new Set;this.setIntervalIds_=new Set;this.rafIds_=new Set;this.namedRafs_=new Map;this.clearingTimersOnDispose_=!1;!1!==b.initChildren&&this.initChildren();
this.ready(c);!1!==b.reportTouchActivity&&this.enableTouchActivity()}on(a,b){}off(a,b){}one(a,b){}any(a,b){}trigger(a,b){}dispose(a={}){if(!this.isDisposed_){this.readyQueue_&&(this.readyQueue_.length=0);this.trigger({type:"dispose",bubbles:!1});this.isDisposed_=!0;if(this.children_)for(let b=this.children_.length-1;0<=b;b--)this.children_[b].dispose&&this.children_[b].dispose();this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;this.el_&&(this.el_.parentNode&&(a.restoreEl?
this.el_.parentNode.replaceChild(a.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null);this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(a){return a?this.options_=ma(this.options_,a):this.options_}el(){return this.el_}createEl(a,b,c){return aa(a,b,c)}localize(a,b,c=a){var e=this.player_.language&&this.player_.language(),g=this.player_.languages&&this.player_.languages();const m=g&&g[e];e=e&&e.split("-")[0];g=g&&g[e];m&&m[a]?c=m[a]:
g&&g[a]&&(c=g[a]);b&&(c=c.replace(/\{(\d+)\}/g,function(p,u){let x=u=b[u-1];"undefined"===typeof u&&(x=p);return x}));return c}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(a){return this.childIndex_[a]}getChild(a){if(a)return this.childNameIndex_[a]}getDescendant(...a){a=a.reduce((c,e)=>c.concat(e),[]);let b=this;for(let c=0;c<a.length;c++)if(b=b.getChild(a[c]),!b||!b.getChild)return;
return b}setIcon(a,b=this.el()){if(this.player_.options_.experimentalSvgIcons){var c=aa("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),e=P.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"viewBox","0 0 512 512");var g=P.createElementNS("http://www.w3.org/2000/svg","use");e.appendChild(g);g.setAttributeNS(null,"href",`#vjs-icon-${a}`);c.appendChild(e);this.iconIsSet_?b.replaceChild(c,b.querySelector(".vjs-icon-placeholder")):b.appendChild(c);
this.iconIsSet_=!0;return c}}addChild(a,b={},c=this.children_.length){if("string"===typeof a){var e=va(a);a=b.componentClass||e;b.name=e;const g=M.getComponent(a);if(!g)throw Error(`Component ${a} does not exist`);if("function"!==typeof g)return null;b=new g(this.player_||this,b)}else b=a;b.parentComponent_&&b.parentComponent_.removeChild(b);this.children_.splice(c,0,b);b.parentComponent_=this;"function"===typeof b.id&&(this.childIndex_[b.id()]=b);if(e=e||b.name&&va(b.name()))this.childNameIndex_[e]=
b,this.childNameIndex_[od(e)]=b;"function"===typeof b.el&&b.el()&&(e=null,this.children_[c+1]&&(this.children_[c+1].el_?e=this.children_[c+1].el_:Ac(this.children_[c+1])&&(e=this.children_[c+1])),this.contentEl().insertBefore(b.el(),e));return b}removeChild(a){"string"===typeof a&&(a=this.getChild(a));if(a&&this.children_){var b=!1;for(let c=this.children_.length-1;0<=c;c--)if(this.children_[c]===a){b=!0;this.children_.splice(c,1);break}b&&(a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[va(a.name())]=
null,this.childNameIndex_[od(a.name())]=null,(b=a.el())&&b.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el()))}}initChildren(){const a=this.options_.children;if(a){const b=this.options_;let c;const e=M.getComponent("Tech");c=Array.isArray(a)?a:Object.keys(a);c.concat(Object.keys(this.options_).filter(function(g){return!c.some(function(m){return"string"===typeof m?g===m:g===m.name})})).map(g=>{let m;"string"===typeof g?(m=g,g=a[m]||this.options_[m]||{}):m=g.name;return{name:m,opts:g}}).filter(g=>
(g=M.getComponent(g.opts.componentClass||va(g.name)))&&!e.isTech(g)).forEach(g=>{const m=g.name;g=g.opts;void 0!==b[m]&&(g=b[m]);!1!==g&&(!0===g&&(g={}),g.playerOptions=this.options_.playerOptions,(g=this.addChild(m,g))&&(this[m]=g))})}}buildCSSClass(){return""}ready(a,b=!1){a&&(this.isReady_?b?a.call(this):this.setTimeout(a,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(a)))}triggerReady(){this.isReady_=!0;this.setTimeout(function(){const a=this.readyQueue_;this.readyQueue_=[];a&&
0<a.length&&a.forEach(function(b){b.call(this)},this);this.trigger("ready")},1)}$(a,b){return Vb(a,b||this.contentEl())}$$(a,b){return qj(a,b||this.contentEl())}hasClass(a){return dd(this.el_,a)}addClass(...a){ac(this.el_,...a)}removeClass(...a){Ud(this.el_,...a)}toggleClass(a,b){di(this.el_,a,b)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(a){return this.el_.getAttribute(a)}setAttribute(a,
b){this.el_.setAttribute(a,b)}removeAttribute(a){this.el_.removeAttribute(a)}width(a,b){return this.dimension("width",a,b)}height(a,b){return this.dimension("height",a,b)}dimensions(a,b){this.width(a,!0);this.height(b)}dimension(a,b,c){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:this.el_.style[a]="auto"===b?"":b+"px";c||this.trigger("componentresize")}else{if(!this.el_)return 0;b=this.el_.style[a];c=b.indexOf("px");return-1!==c?parseInt(b.slice(0,
c),10):parseInt(this.el_["offset"+va(a)],10)}}currentDimension(a){let b=0;if("width"!==a&&"height"!==a)throw Error("currentDimension only accepts width or height value");b=Cc(this.el_,a);b=parseFloat(b);if(0===b||isNaN(b))a=`offset${va(a)}`,b=this.el_[a];return b}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(a){this.player_&&
(Y.isEventKey(a,"Tab")||a.stopPropagation(),this.player_.handleKeyDown(a))}handleKeyPress(a){this.handleKeyDown(a)}emitTapEvents(){let a=0,b=null,c;this.on("touchstart",function(g){1===g.touches.length&&(b={pageX:g.touches[0].pageX,pageY:g.touches[0].pageY},a=D.performance.now(),c=!0)});this.on("touchmove",function(g){if(1<g.touches.length)c=!1;else if(b){const m=g.touches[0].pageX-b.pageX;g=g.touches[0].pageY-b.pageY;10<Math.sqrt(m*m+g*g)&&(c=!1)}});const e=function(){c=!1};this.on("touchleave",
e);this.on("touchcancel",e);this.on("touchend",function(g){b=null;!0===c&&200>D.performance.now()-a&&(g.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(this.player()&&this.player().reportUserActivity){var a=na(this.player(),this.player().reportUserActivity),b;this.on("touchstart",function(){a();this.clearInterval(b);b=this.setInterval(a,250)});var c=function(e){a();this.clearInterval(b)};this.on("touchmove",a);this.on("touchend",c);this.on("touchcancel",c)}}setTimeout(a,b){a=na(this,
a);this.clearTimersOnDispose_();var c=D.setTimeout(()=>{this.setTimeoutIds_.has(c)&&this.setTimeoutIds_.delete(c);a()},b);this.setTimeoutIds_.add(c);return c}clearTimeout(a){this.setTimeoutIds_.has(a)&&(this.setTimeoutIds_.delete(a),D.clearTimeout(a));return a}setInterval(a,b){a=na(this,a);this.clearTimersOnDispose_();a=D.setInterval(a,b);this.setIntervalIds_.add(a);return a}clearInterval(a){this.setIntervalIds_.has(a)&&(this.setIntervalIds_.delete(a),D.clearInterval(a));return a}requestAnimationFrame(a){this.clearTimersOnDispose_();
a=na(this,a);var b=D.requestAnimationFrame(()=>{this.rafIds_.has(b)&&this.rafIds_.delete(b);a()});this.rafIds_.add(b);return b}requestNamedAnimationFrame(a,b){if(!this.namedRafs_.has(a)){this.clearTimersOnDispose_();b=na(this,b);var c=this.requestAnimationFrame(()=>{b();this.namedRafs_.has(a)&&this.namedRafs_.delete(a)});this.namedRafs_.set(a,c);return a}}cancelNamedAnimationFrame(a){this.namedRafs_.has(a)&&(this.cancelAnimationFrame(this.namedRafs_.get(a)),this.namedRafs_.delete(a))}cancelAnimationFrame(a){this.rafIds_.has(a)&&
(this.rafIds_.delete(a),D.cancelAnimationFrame(a));return a}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([a,b])=>{this[a].forEach((c,e)=>this[b](e))});this.clearingTimersOnDispose_=!1}))}static registerComponent(a,b){if("string"!==typeof a||!a)throw Error(`Illegal component name, "${a}"; must be a non-empty string.`);
var c=M.getComponent("Tech");c=c&&c.isTech(b);const e=M===b||M.prototype.isPrototypeOf(b.prototype);if(c||!e)throw Error(`Illegal component, "${a}"; ${c?"techs must be registered using Tech.registerTech()":"must be a Component subclass"}.`);a=va(a);M.components_||(M.components_={});c=M.getComponent("Player");if("Player"===a&&c&&c.players){const g=c.players;c=Object.keys(g);if(g&&0<c.length&&c.map(m=>g[m]).every(Boolean))throw Error("Can not register Player component after player has been created.");
}M.components_[a]=b;return M.components_[od(a)]=b}static getComponent(a){if(a&&M.components_)return M.components_[a]}}M.registerComponent("Component",M);const ri=function(a,b){a=0>a?0:a;let c=Math.floor(a%60),e=Math.floor(a/60%60),g=Math.floor(a/3600);const m=Math.floor(b/60%60);b=Math.floor(b/3600);if(isNaN(a)||Infinity===a)g=e=c="-";g=0<g||0<b?g+":":"";return g+(((g||10<=m)&&10>e?"0"+e:e)+":")+(10>c?"0"+c:c)};let Cf=ri;var qo=Object.freeze({__proto__:null,createTimeRanges:wb,createTimeRange:wb,
setFormatTime:pi,resetFormatTime:qi,formatTime:bc});Qa.prototype.code=0;Qa.prototype.message="";Qa.prototype.status=null;Qa.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");Qa.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let a=0;a<Qa.errorTypes.length;a++)Qa[Qa.errorTypes[a]]=a,Qa.prototype[Qa.errorTypes[a]]=a;const dg=function(a){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce((b,c,e)=>{a[c]&&(b[c]=a[c]);return b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(b){return{startTime:b.startTime,
endTime:b.endTime,text:b.text,id:b.id}})})};var yj={textTracksToJson:function(a){const b=a.$$("track"),c=Array.prototype.map.call(b,e=>e.track);return Array.prototype.map.call(b,function(e){const g=dg(e.track);e.src&&(g.src=e.src);return g}).concat(Array.prototype.filter.call(a.textTracks(),function(e){return-1===c.indexOf(e)}).map(dg))},jsonToTextTracks:function(a,b){a.forEach(function(c){const e=b.addRemoteTextTrack(c).track;!c.src&&c.cues&&c.cues.forEach(g=>e.addCue(g))});return b.textTracks()},
trackToJson_:dg};class Kc extends M{constructor(a,b){super(a,b);this.handleKeyDown_=c=>this.handleKeyDown(c);this.close_=c=>this.close(c);this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1;this.closeable(!this.options_.uncloseable);this.content(this.options_.content);this.contentEl_=aa("div",{className:"vjs-modal-dialog-content"},{role:"document"});this.descEl_=aa("p",{className:"vjs-modal-dialog-description vjs-control-text",id:this.el().getAttribute("aria-describedby")});Tb(this.descEl_,this.description());
this.el_.appendChild(this.descEl_);this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;super.dispose()}buildCSSClass(){return`${"vjs-modal-dialog"} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let a=
this.options_.description||this.localize("This is a modal window.");this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));return a}open(){if(!this.opened_){const a=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!a.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause();this.on("keydown",this.handleKeyDown_);
this.hadControls_=a.controls();a.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}}opened(a){if("boolean"===typeof a)this[a?"open":"close"]();return this.opened_}close(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&a.play();this.off("keydown",this.handleKeyDown_);this.hadControls_&&a.controls(!0);this.hide();this.el().setAttribute("aria-hidden",
"true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}}closeable(a){if("boolean"===typeof a){a=this.closeable_=!!a;let b=this.getChild("closeButton");if(a&&!b){const c=this.contentEl_;this.contentEl_=this.el_;b=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=c;this.on(b,"close",this.close_)}!a&&b&&(this.off(b,"close",this.close_),this.removeChild(b),b.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(a){const b=
this.contentEl(),c=b.parentNode,e=b.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;c.removeChild(b);this.empty();ji(b,a);this.trigger("modalfill");e?c.insertBefore(b,e):c.appendChild(b);(a=this.getChild("closeButton"))&&c.appendChild(a.el_)}empty(){this.trigger("beforemodalempty");Xd(this.contentEl());this.trigger("modalempty")}content(a){"undefined"!==typeof a&&(this.content_=a);return this.content_}conditionalFocus_(){const a=P.activeElement,b=this.player_.el_;this.previouslyActiveEl_=
null;if(b.contains(a)||b===a)this.previouslyActiveEl_=a,this.focus()}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(a){a.stopPropagation();if(Y.isEventKey(a,"Escape")&&this.closeable())a.preventDefault(),this.close();else if(Y.isEventKey(a,"Tab")){var b=this.focusableEls_(),c=this.el_.querySelector(":focus");for(let g=0;g<b.length;g++)if(c===b[g]){var e=g;break}P.activeElement===this.el_&&(e=0);a.shiftKey&&0===e?(b[b.length-
1].focus(),a.preventDefault()):a.shiftKey||e!==b.length-1||(b[0].focus(),a.preventDefault())}}focusableEls_(){const a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,b=>(b instanceof D.HTMLAnchorElement||b instanceof D.HTMLAreaElement)&&b.hasAttribute("href")||(b instanceof D.HTMLInputElement||b instanceof D.HTMLSelectElement||b instanceof D.HTMLTextAreaElement||b instanceof D.HTMLButtonElement)&&!b.hasAttribute("disabled")||b instanceof D.HTMLIFrameElement||b instanceof D.HTMLObjectElement||
b instanceof D.HTMLEmbedElement||b.hasAttribute("tabindex")&&-1!==b.getAttribute("tabindex")||b.hasAttribute("contenteditable"))}}Kc.prototype.options_={pauseOnOpen:!0,temporary:!0};M.registerComponent("ModalDialog",Kc);class Lc extends jb{constructor(a=[]){super();this.tracks_=[];Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let b=0;b<a.length;b++)this.addTrack(a[b])}addTrack(a){const b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get(){return this.tracks_[b]}});
-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this}));a.labelchange_=()=>{this.trigger({track:a,type:"labelchange",target:this})};Ib(a)&&a.addEventListener("labelchange",a.labelchange_)}removeTrack(a){let b;for(let c=0,e=this.length;c<e;c++)if(this[c]===a){b=this[c];b.off&&b.off();this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})}getTrackById(a){let b=null;for(let c=0,e=this.length;c<e;c++){const g=this[c];if(g.id===
a){b=g;break}}return b}}Lc.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const a in Lc.prototype.allowedEvents_)Lc.prototype["on"+a]=null;const eg=function(a,b){for(let c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)};class ro extends Lc{constructor(a=[]){for(let b=a.length-1;0<=b;b--)if(a[b].enabled){eg(a,a[b]);break}super(a);this.changing_=!1}addTrack(a){a.enabled&&eg(this,a);super.addTrack(a);
a.addEventListener&&(a.enabledChange_=()=>{this.changing_||(this.changing_=!0,eg(this,a),this.changing_=!1,this.trigger("change"))},a.addEventListener("enabledchange",a.enabledChange_))}removeTrack(a){super.removeTrack(a);a.removeEventListener&&a.enabledChange_&&(a.removeEventListener("enabledchange",a.enabledChange_),a.enabledChange_=null)}}const fg=function(a,b){for(let c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)};class so extends Lc{constructor(a=[]){for(let b=
a.length-1;0<=b;b--)if(a[b].selected){fg(a,a[b]);break}super(a);this.changing_=!1;Object.defineProperty(this,"selectedIndex",{get(){for(let b=0;b<this.length;b++)if(this[b].selected)return b;return-1},set(){}})}addTrack(a){a.selected&&fg(this,a);super.addTrack(a);a.addEventListener&&(a.selectedChange_=()=>{this.changing_||(this.changing_=!0,fg(this,a),this.changing_=!1,this.trigger("change"))},a.addEventListener("selectedchange",a.selectedChange_))}removeTrack(a){super.removeTrack(a);a.removeEventListener&&
a.selectedChange_&&(a.removeEventListener("selectedchange",a.selectedChange_),a.selectedChange_=null)}}class zj extends Lc{addTrack(a){super.addTrack(a);this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change"));this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange"));a.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(a.kind)&&a.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(a){super.removeTrack(a);
a.removeEventListener&&(this.queueChange_&&a.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&a.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class to{constructor(a=[]){this.trackElements_=[];Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}addTrackElement_(a){const b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get(){return this.trackElements_[b]}});
-1===this.trackElements_.indexOf(a)&&this.trackElements_.push(a)}getTrackElementByTrack_(a){let b;for(let c=0,e=this.trackElements_.length;c<e;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b}removeTrackElement_(a){for(let b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"===typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off();"function"===typeof this.trackElements_[b].off&&this.trackElements_[b].off();
this.trackElements_.splice(b,1);break}}}class gg{constructor(a){gg.prototype.setCues_.call(this,a);Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(a){const b=this.length||0;let c=0;const e=a.length;this.cues_=a;this.length_=a.length;a=function(g){""+g in this||Object.defineProperty(this,""+g,{get(){return this.cues_[g]}})};if(b<e)for(c=b;c<e;c++)a.call(this,c)}getCueById(a){let b=null;for(let c=0,e=this.length;c<e;c++){const g=this[c];if(g.id===a){b=g;break}}return b}}const uo=
{alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},vo={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},wo={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Aj={disabled:"disabled",hidden:"hidden",showing:"showing"};class hg extends jb{constructor(a={}){super();const b={id:a.id||
"vjs_track_"+vb++,kind:a.kind||"",language:a.language||""};let c=a.label||"";for(const e in b)Object.defineProperty(this,e,{get(){return b[e]},set(){}});Object.defineProperty(this,"label",{get(){return c},set(e){e!==c&&(c=e,this.trigger("labelchange"))}})}}const ig=function(a){const b="protocol hostname port pathname search hash host".split(" "),c=P.createElement("a");c.href=a;a={};for(let e=0;e<b.length;e++)a[b[e]]=c[b[e]];"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,""));"https:"===a.protocol&&
(a.host=a.host.replace(/:443$/,""));a.protocol||(a.protocol=D.location.protocol);a.host||(a.host=D.location.host);return a},Bj=function(a){if(!a.match(/^https?:\/\//)){const b=P.createElement("a");b.href=a;a=b.href}return a},jg=function(a){return"string"===typeof a&&(a=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(a))?a.pop().toLowerCase():""},ue=function(a,b=D.location){a=ig(a);return(":"===a.protocol?b.protocol:a.protocol)+a.host!==b.protocol+b.host};var xo=Object.freeze({__proto__:null,
parseUrl:ig,getAbsoluteURL:Bj,getFileExtension:jg,isCrossOrigin:ue});const Cj=function(a,b){const c=new D.WebVTT.Parser(D,D.vttjs,D.WebVTT.StringDecoder()),e=[];c.oncue=function(g){b.addCue(g)};c.onparsingerror=function(g){e.push(g)};c.onflush=function(){b.trigger({type:"loadeddata",target:b})};c.parse(a);0<e.length&&(D.console&&D.console.groupCollapsed&&D.console.groupCollapsed(`Text Track parsing errors for ${b.src}`),e.forEach(g=>ca.error(g)),D.console&&D.console.groupEnd&&D.console.groupEnd());
c.flush()},Dj=function(a,b){const c={uri:a};if(a=ue(a))c.cors=a;if(a="use-credentials"===b.tech_.crossOrigin())c.withCredentials=a;Ci(c,na(this,function(e,g,m){if(e)return ca.error(e,g);b.loaded_=!0;"function"!==typeof D.WebVTT?b.tech_&&b.tech_.any(["vttjsloaded","vttjserror"],p=>{if("vttjserror"===p.type)ca.error(`vttjs failed to load, stopping trying to process ${b.src}`);else return Cj(m,b)}):Cj(m,b)}))};class pd extends hg{constructor(a={}){if(!a.tech)throw Error("A tech was not provided.");a=
ma(a,{kind:wo[a.kind]||"subtitles",language:a.language||a.srclang||""});let b=Aj[a.mode]||"disabled";const c=a.default;if("metadata"===a.kind||"chapters"===a.kind)b="hidden";super(a);this.tech_=a.tech;this.cues_=[];this.activeCues_=[];this.preload_=!1!==this.tech_.preloadTextTracks;const e=new gg(this.cues_),g=new gg(this.activeCues_);let m=!1;this.timeupdateHandler=na(this,function(p={}){this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,m&&(this.trigger("cuechange"),
m=!1)),"timeupdate"!==p.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))});this.tech_.one("dispose",()=>{this.stopTracking()});"disabled"!==b&&this.startTracking();Object.defineProperties(this,{default:{get(){return c},set(){}},mode:{get(){return b},set(p){Aj[p]&&b!==p&&(b=p,this.preload_||"disabled"===b||0!==this.cues.length||Dj(this.src,this),this.stopTracking(),"disabled"!==b&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?e:null},
set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return g;var p=this.tech_.currentTime();const u=[];for(let x=0,y=this.cues.length;x<y;x++){const B=this.cues[x];B.startTime<=p&&B.endTime>=p&&u.push(B)}m=!1;if(u.length!==this.activeCues_.length)m=!0;else for(p=0;p<u.length;p++)-1===this.activeCues_.indexOf(u[p])&&(m=!0);this.activeCues_=u;g.setCues_(this.activeCues_);return g},set(){}}});a.src?(this.src=a.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==
a.kind&&"captions"!==a.kind)&&Dj(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler);this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0);this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(a){let b=a;if(b.constructor&&"VTTCue"!==b.constructor.name){b=new D.vttjs.VTTCue(a.startTime,a.endTime,a.text);for(var c in a)c in b||(b[c]=a[c]);b.id=
a.id;b.originalCue_=a}a=this.tech_.textTracks();for(c=0;c<a.length;c++)a[c]!==this&&a[c].removeCue(b);this.cues_.push(b);this.cues.setCues_(this.cues_)}removeCue(a){let b=this.cues_.length;for(;b--;){const c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1);this.cues.setCues_(this.cues_);break}}}}pd.prototype.allowedEvents_={cuechange:"cuechange"};class Ej extends hg{constructor(a={}){a=ma(a,{kind:vo[a.kind]||""});super(a);let b=!1;Object.defineProperty(this,"enabled",
{get(){return b},set(c){"boolean"===typeof c&&c!==b&&(b=c,this.trigger("enabledchange"))}});a.enabled&&(this.enabled=a.enabled);this.loaded_=!0}}class Fj extends hg{constructor(a={}){a=ma(a,{kind:uo[a.kind]||""});super(a);let b=!1;Object.defineProperty(this,"selected",{get(){return b},set(c){"boolean"===typeof c&&c!==b&&(b=c,this.trigger("selectedchange"))}});a.selected&&(this.selected=a.selected)}}class Xb extends jb{constructor(a={}){super();let b;const c=new pd(a);this.kind=c.kind;this.src=c.src;
this.srclang=c.language;this.label=c.label;this.default=c.default;Object.defineProperties(this,{readyState:{get(){return b}},track:{get(){return c}}});b=Xb.NONE;c.addEventListener("loadeddata",()=>{b=Xb.LOADED;this.trigger({type:"load",target:this})})}}Xb.prototype.allowedEvents_={load:"load"};Xb.NONE=0;Xb.LOADING=1;Xb.LOADED=2;Xb.ERROR=3;const kb={audio:{ListClass:ro,TrackClass:Ej,capitalName:"Audio"},video:{ListClass:so,TrackClass:Fj,capitalName:"Video"},text:{ListClass:zj,TrackClass:pd,capitalName:"Text"}};
Object.keys(kb).forEach(function(a){kb[a].getterName=`${a}Tracks`;kb[a].privateName=`${a}Tracks_`});const Mc={remoteText:{ListClass:zj,TrackClass:pd,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:to,TrackClass:Xb,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ra=Object.assign({},kb,Mc);Mc.names=Object.keys(Mc);kb.names=Object.keys(kb);Ra.names=[].concat(Mc.names).concat(kb.names);
class Z extends M{constructor(a={},b=function(){}){a.reportTouchActivity=!1;super(null,a,b);this.onDurationChange_=c=>this.onDurationChange(c);this.trackProgress_=c=>this.trackProgress(c);this.trackCurrentTime_=c=>this.trackCurrentTime(c);this.stopTrackingCurrentTime_=c=>this.stopTrackingCurrentTime(c);this.disposeSourceHandler_=c=>this.disposeSourceHandler(c);this.queuedHanders_=new Set;this.hasStarted_=!1;this.on("playing",function(){this.hasStarted_=!0});this.on("loadstart",function(){this.hasStarted_=
!1});Ra.names.forEach(c=>{c=Ra[c];a&&a[c.getterName]&&(this[c.privateName]=a[c.getterName])});this.featuresProgressEvents||this.manualProgressOn();this.featuresTimeupdateEvents||this.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(c=>{!1===a[`native${c}Tracks`]&&(this[`featuresNative${c}Tracks`]=!1)});if(!1===a.nativeCaptions||!1===a.nativeTextTracks)this.featuresNativeTextTracks=!1;else if(!0===a.nativeCaptions||!0===a.nativeTextTracks)this.featuresNativeTextTracks=!0;this.featuresNativeTextTracks||
this.emulateTextTracks();this.preloadTextTracks=!1!==a.preloadTextTracks;this.autoRemoteTextTracks_=new Ra.text.ListClass;this.initTrackListeners();a.nativeControlsForTouch||this.emitTapEvents();this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(a){if(!this.isReady_)this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(a),1));this.trigger({src:a,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_);this.manualProgress=!0;
this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange_)}trackProgress(a){this.stopTrackingProgress();this.progressInterval=this.setInterval(na(this,function(){const b=this.bufferedPercent();this.bufferedPercent_!==b&&this.trigger("progress");this.bufferedPercent_=b;1===b&&this.stopTrackingProgress()}),500)}onDurationChange(a){this.duration_=this.duration()}buffered(){return wb(0,0)}bufferedPercent(){return si(this.buffered(),
this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime_);this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime_);this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",
target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(kb.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();super.dispose()}clearTracks(a){a=[].concat(a);a.forEach(b=>{const c=this[`${b}Tracks`]()||[];let e=c.length;for(;e--;){const g=c[e];"text"===b&&this.removeRemoteTextTrack(g);c.removeTrack(g)}})}cleanupAutoTextTracks(){const a=
this.autoRemoteTextTracks_||[];let b=a.length;for(;b--;)this.removeRemoteTextTrack(a[b])}reset(){}crossOrigin(){}setCrossOrigin(){}error(a){void 0!==a&&(this.error_=new Qa(a),this.trigger("error"));return this.error_}played(){return this.hasStarted_?wb(0,0):wb()}play(){}setScrubbing(a){}scrubbing(){}setCurrentTime(a){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){kb.names.forEach(a=>{const b=()=>{this.trigger(`${a}trackchange`)},c=this[kb[a].getterName]();
c.addEventListener("removetrack",b);c.addEventListener("addtrack",b);this.on("dispose",()=>{c.removeEventListener("removetrack",b);c.removeEventListener("addtrack",b)})})}addWebVttScript_(){if(!D.WebVTT)if(P.body.contains(this.el()))if(!this.options_["vtt.js"]&&yc(Ei)&&0<Object.keys(Ei).length)this.trigger("vttjsloaded");else{var a=P.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";a.onload=()=>{this.trigger("vttjsloaded")};a.onerror=()=>{this.trigger("vttjserror")};
this.on("dispose",()=>{a.onload=null;a.onerror=null});D.WebVTT=!0;this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const a=this.textTracks(),b=this.remoteTextTracks(),c=p=>a.addTrack(p.track),e=p=>a.removeTrack(p.track);b.on("addtrack",c);b.on("removetrack",e);this.addWebVttScript_();const g=()=>this.trigger("texttrackchange"),m=()=>{g();for(let p=0;p<a.length;p++){const u=a[p];u.removeEventListener("cuechange",g);"showing"===u.mode&&u.addEventListener("cuechange",
g)}};m();a.addEventListener("change",m);a.addEventListener("addtrack",m);a.addEventListener("removetrack",m);this.on("dispose",function(){b.off("addtrack",c);b.off("removetrack",e);a.removeEventListener("change",m);a.removeEventListener("addtrack",m);a.removeEventListener("removetrack",m);for(let p=0;p<a.length;p++)a[p].removeEventListener("cuechange",g)})}addTextTrack(a,b,c){if(!a)throw Error("TextTrack kind is required but was not provided");return Jm(this,a,b,c)}createRemoteTextTrack(a){a=ma(a,
{tech:this});return new Mc.remoteTextEl.TrackClass(a)}addRemoteTextTrack(a={},b){const c=this.createRemoteTextTrack(a);"boolean"!==typeof b&&(b=!1);this.remoteTextTrackEls().addTrackElement_(c);this.remoteTextTracks().addTrack(c.track);!1===b&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(c.track));return c}removeRemoteTextTrack(a){const b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b);this.remoteTextTracks().removeTrack(a);this.autoRemoteTextTracks_.removeTrack(a)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(a){const b=
vb++;!this.isReady_||this.paused()?(this.queuedHanders_.add(b),this.one("playing",()=>{this.queuedHanders_.has(b)&&(this.queuedHanders_.delete(b),a())})):this.requestNamedAnimationFrame(b,a);return b}cancelVideoFrameCallback(a){this.queuedHanders_.has(a)?this.queuedHanders_.delete(a):this.cancelNamedAnimationFrame(a)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(a){}overrideNativeVideoTracks(a){}canPlayType(a){return""}static canPlayType(a){return""}static canPlaySource(a,
b){return Z.canPlayType(a.type)}static isTech(a){return a.prototype instanceof Z||a instanceof Z||a===Z}static registerTech(a,b){Z.techs_||(Z.techs_={});if(!Z.isTech(b))throw Error(`Tech ${a} must be a Tech`);if(!Z.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!Z.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");a=va(a);Z.techs_[a]=b;Z.techs_[od(a)]=b;"Tech"!==a&&Z.defaultTechOrder_.push(a);return b}static getTech(a){if(a){if(Z.techs_&&
Z.techs_[a])return Z.techs_[a];a=va(a);if(D&&D.videojs&&D.videojs[a])return ca.warn(`The ${a} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),D.videojs[a]}}}Ra.names.forEach(function(a){const b=Ra[a];Z.prototype[b.getterName]=function(){this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});Z.prototype.featuresVolumeControl=!0;Z.prototype.featuresMuteControl=!0;Z.prototype.featuresFullscreenResize=!1;Z.prototype.featuresPlaybackRate=
!1;Z.prototype.featuresProgressEvents=!1;Z.prototype.featuresSourceset=!1;Z.prototype.featuresTimeupdateEvents=!1;Z.prototype.featuresNativeTextTracks=!1;Z.prototype.featuresVideoFrameCallback=!1;Z.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){let e=a.sourceHandlers;e||(e=a.sourceHandlers=[]);void 0===c&&(c=e.length);e.splice(c,0,b)};a.canPlayType=function(b){const c=a.sourceHandlers||[];let e;for(let g=0;g<c.length;g++)if(e=c[g].canPlayType(b))return e;return""};a.selectSourceHandler=
function(b,c){const e=a.sourceHandlers||[];let g;for(let m=0;m<e.length;m++)if(g=e[m].canHandleSource(b,c))return e[m];return null};a.canPlaySource=function(b,c){const e=a.selectSourceHandler(b,c);return e?e.canHandleSource(b,c):""};["seekable","seeking","duration"].forEach(function(b){const c=this[b];"function"===typeof c&&(this[b]=function(){return this.sourceHandler_&&this.sourceHandler_[b]?this.sourceHandler_[b].apply(this.sourceHandler_,arguments):c.apply(this,arguments)})},a.prototype);a.prototype.setSource=
function(b){let c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:ca.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler_);c!==a.nativeSourceHandler&&(this.currentSource_=b);this.sourceHandler_=c.handleSource(b,this,this.options_);this.one("dispose",this.disposeSourceHandler_)};a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),
this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};M.registerComponent("Tech",Z);Z.registerTech("Tech",Z);Z.defaultTechOrder_=[];const dc={},Ef={},$d={},yo={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},zo={setCurrentTime:1,setMuted:1,setVolume:1},Gj={play:1,pause:1},Ao={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",
mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ae=function(a=""){a=jg(a);return Ao[a.toLowerCase()]||""},Bo=(a,b)=>{if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(e=>e.src===
b);if(c.length)return c[0].type;a=a.$$("source");for(c=0;c<a.length;c++){const e=a[c];if(e.type&&e.src&&e.src===b)return e.type}return ae(b)},Hj=function(a){if(Array.isArray(a)){let b=[];a.forEach(function(c){c=Hj(c);Array.isArray(c)?b=b.concat(c):ub(c)&&b.push(c)});a=b}else a="string"===typeof a&&a.trim()?[ui({src:a})]:ub(a)&&"string"===typeof a.src&&a.src&&a.src.trim()?[ui(a)]:[];return a};class Co extends M{constructor(a,b,c){const e=ma({createEl:!1},b);super(a,e,c);if(b.playerOptions.sources&&
0!==b.playerOptions.sources.length)a.src(b.playerOptions.sources);else for(let g=0,m=b.playerOptions.techOrder;g<m.length;g++)if(b=va(m[g]),c=Z.getTech(b),b||(c=M.getComponent(b)),c&&c.isSupported()){a.loadTech_(b);break}}}M.registerComponent("MediaLoader",Co);class ve extends M{constructor(a,b){super(a,b);this.options_.controlText&&this.controlText(this.options_.controlText);this.handleMouseOver_=c=>this.handleMouseOver(c);this.handleMouseOut_=c=>this.handleMouseOut(c);this.handleClick_=c=>this.handleClick(c);
this.handleKeyDown_=c=>this.handleKeyDown(c);this.emitTapEvents();this.enable()}createEl(a="div",b={},c={}){b=Object.assign({className:this.buildCSSClass(),tabIndex:0},b);"button"===a&&ca.error(`Creating a ClickableComponent with an HTML element of ${a} is not supported; use a Button instead.`);c=Object.assign({role:"button"},c);this.tabIndex_=b.tabIndex;a=aa(a,b,c);this.player_.options_.experimentalSvgIcons||a.appendChild(aa("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0}));this.createControlTextEl(a);
return a}dispose(){this.controlTextEl_=null;super.dispose()}createControlTextEl(a){this.controlTextEl_=aa("span",{className:"vjs-control-text"},{"aria-live":"polite"});a&&a.appendChild(this.controlTextEl_);this.controlText(this.controlText_,a);return this.controlTextEl_}controlText(a,b=this.el()){if(void 0===a)return this.controlText_||"Need Text";const c=this.localize(a);this.controlText_=a;Tb(this.controlTextEl_,c);this.nonIconControl||this.player_.options_.noUITitleAttributes||b.setAttribute("title",
c)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&
this.el_.removeAttribute("tabIndex");this.off("mouseover",this.handleMouseOver_);this.off("mouseout",this.handleMouseOut_);this.off(["tap","click"],this.handleClick_);this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(a){Y.isEventKey(a,"Space")||Y.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):super.handleKeyDown(a)}}
M.registerComponent("ClickableComponent",ve);class kg extends ve{constructor(a,b){super(a,b);this.update();this.update_=c=>this.update(c);a.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_);super.dispose()}createEl(){return aa("div",{className:"vjs-poster"})}crossOrigin(a){if("undefined"===typeof a)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||
null;null!==a&&"anonymous"!==a&&"use-credentials"!==a?this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${a}"`):this.$("img")&&(this.$("img").crossOrigin=a)}update(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()}setSrc(a){a?(this.$("img")||this.el_.appendChild(aa("picture",{className:"vjs-poster",tabIndex:-1},{},aa("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=a):this.el_.textContent=""}handleClick(a){this.player_.controls()&&
(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?xb(this.player_.play()):this.player_.pause())}}kg.prototype.crossorigin=kg.prototype.crossOrigin;M.registerComponent("PosterImage",kg);const Do={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',
smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};class Eo extends M{constructor(a,b,c){super(a,b,c);const e=g=>{this.updateDisplayOverlay();this.updateDisplay(g)};a.on("loadstart",g=>this.toggleDisplay(g));a.on("texttrackchange",g=>this.updateDisplay(g));a.on("loadedmetadata",g=>{this.updateDisplayOverlay();this.preselectTrack(g)});a.ready(na(this,function(){if(a.tech_&&a.tech_.featuresNativeTextTracks)this.hide();else{a.on("fullscreenchange",e);a.on("playerresize",e);var g=D.screen.orientation||
D,m=D.screen.orientation?"change":"orientationchange";g.addEventListener(m,e);a.on("dispose",()=>g.removeEventListener(m,e));var p=this.options_.playerOptions.tracks||[];for(let u=0;u<p.length;u++)this.player_.addRemoteTextTrack(p[u],!0);this.preselectTrack()}}))}preselectTrack(){const a={captions:1,subtitles:1},b=this.player_.textTracks(),c=this.player_.cache_.selectedLanguage;let e,g,m;for(let p=0;p<b.length;p++){const u=b[p];c&&c.enabled&&c.language&&c.language===u.language&&u.kind in a?u.kind===
c.kind?m=u:m||(m=u):c&&!c.enabled?g=e=m=null:u.default&&("descriptions"!==u.kind||e?u.kind in a&&!g&&(g=u):e=u)}m?m.mode="showing":g?g.mode="showing":e&&(e.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"===typeof D.WebVTT&&D.WebVTT.processCues(D,[],this.el_)}updateDisplay(){const a=
this.player_.textTracks();var b=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(b){b=[];for(var c=0;c<a.length;++c){var e=a[c];"showing"===e.mode&&b.push(e)}this.updateForTrack(b)}else{c=b=null;for(e=a.length;e--;){const g=a[e];"showing"===g.mode&&("descriptions"===g.kind?b=g:c=g)}c?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b))}}updateDisplayOverlay(){if(this.player_.videoHeight()&&
D.CSS.supports("inset-inline: 10px")){var a=this.player_.currentWidth(),b=this.player_.currentHeight(),c=a/b,e=this.player_.videoWidth()/this.player_.videoHeight(),g=0,m=0;.1<Math.abs(c-e)&&(c>e?g=Math.round((a-b*e)/2):m=Math.round((b-a/e)/2));hd(this.el_,"insetInline",g?`${g}px`:"");hd(this.el_,"insetBlock",m?`${m}px`:"")}}updateDisplayState(a){const b=this.player_.textTrackSettings.getValues();a=a.activeCues;let c=a.length;for(;c--;){var e=a[c];if(e){e=e.displayState;b.color&&(e.firstChild.style.color=
b.color);b.textOpacity&&hd(e.firstChild,"color",Ff(b.color||"#fff",b.textOpacity));b.backgroundColor&&(e.firstChild.style.backgroundColor=b.backgroundColor);b.backgroundOpacity&&hd(e.firstChild,"backgroundColor",Ff(b.backgroundColor||"#000",b.backgroundOpacity));b.windowColor&&(b.windowOpacity?hd(e,"backgroundColor",Ff(b.windowColor,b.windowOpacity)):e.style.backgroundColor=b.windowColor);b.edgeStyle&&("dropshadow"===b.edgeStyle?e.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":
"raised"===b.edgeStyle?e.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===b.edgeStyle?e.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===b.edgeStyle&&(e.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));if(b.fontPercent&&1!==b.fontPercent){const g=D.parseFloat(e.style.fontSize);e.style.fontSize=g*b.fontPercent+"px";e.style.height="auto";e.style.top="auto"}b.fontFamily&&"default"!==
b.fontFamily&&("small-caps"===b.fontFamily?e.firstChild.style.fontVariant="small-caps":e.firstChild.style.fontFamily=Do[b.fontFamily])}}}updateForTrack(a){Array.isArray(a)||(a=[a]);if("function"===typeof D.WebVTT&&!a.every(m=>!m.activeCues)){var b=[];for(var c=0;c<a.length;++c){var e=a[c];for(var g=0;g<e.activeCues.length;++g)b.push(e.activeCues[g])}D.WebVTT.processCues(D,b,this.el_);for(b=0;b<a.length;++b){c=a[b];for(e=0;e<c.activeCues.length;++e)g=c.activeCues[e].displayState,ac(g,"vjs-text-track-cue",
"vjs-text-track-cue-"+(c.language?c.language:b)),c.language&&g.setAttribute("lang",c.language);this.player_.textTrackSettings&&this.updateDisplayState(c)}}}}M.registerComponent("TextTrackDisplay",Eo);class Fo extends M{createEl(){var a=this.player_.isAudio();a=this.localize(a?"Audio Player":"Video Player");a=aa("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])});const b=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});b.appendChild(a);return b}handleLanguagechange(){this.$(".vjs-control-text").textContent=
this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}M.registerComponent("LoadingSpinner",Fo);class cb extends ve{createEl(a,b={},c={}){a="button";b=Object.assign({className:this.buildCSSClass()},b);c=Object.assign({type:"button"},c);a=aa(a,b,c);this.player_.options_.experimentalSvgIcons||a.appendChild(aa("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0}));this.createControlTextEl(a);return a}addChild(a,b={}){ca.warn(`Adding an actionable (user controllable) child to a Button (${this.constructor.name}) is not supported; use a ClickableComponent instead.`);
return M.prototype.addChild.call(this,a,b)}enable(){super.enable();this.el_.removeAttribute("disabled")}disable(){super.disable();this.el_.setAttribute("disabled","disabled")}handleKeyDown(a){Y.isEventKey(a,"Space")||Y.isEventKey(a,"Enter")?a.stopPropagation():super.handleKeyDown(a)}}M.registerComponent("Button",cb);class Ij extends cb{constructor(a,b){super(a,b);this.mouseused_=!1;this.setIcon("play");this.on("mousedown",c=>this.handleMouseDown(c))}buildCSSClass(){return"vjs-big-play-button"}handleClick(a){const b=
this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY)xb(b),this.player_.tech(!0)&&this.player_.tech(!0).focus();else{var c=(a=this.player_.getChild("controlBar"))&&a.getChild("playToggle");c?(a=()=>c.focus(),gd(b)?b.then(a,()=>{}):this.setTimeout(a,1)):this.player_.tech(!0).focus()}}handleKeyDown(a){this.mouseused_=!1;super.handleKeyDown(a)}handleMouseDown(a){this.mouseused_=!0}}Ij.prototype.controlText_="Play Video";M.registerComponent("BigPlayButton",Ij);class Go extends cb{constructor(a,
b){super(a,b);this.setIcon("cancel");this.controlText(b&&b.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(a){this.trigger({type:"close",bubbles:!1})}handleKeyDown(a){Y.isEventKey(a,"Esc")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):super.handleKeyDown(a)}}M.registerComponent("CloseButton",Go);class Jj extends cb{constructor(a,b={}){super(a,b);b.replay=void 0===b.replay||b.replay;this.setIcon("play");this.on(a,"play",
c=>this.handlePlay(c));this.on(a,"pause",c=>this.handlePause(c));if(b.replay)this.on(a,"ended",c=>this.handleEnded(c))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(a){this.player_.paused()?xb(this.player_.play()):this.player_.pause()}handleSeeked(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)}handlePlay(a){this.removeClass("vjs-ended","vjs-paused");this.addClass("vjs-playing");this.setIcon("pause");this.controlText("Pause")}handlePause(a){this.removeClass("vjs-playing");
this.addClass("vjs-paused");this.setIcon("play");this.controlText("Play")}handleEnded(a){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.setIcon("replay");this.controlText("Replay");this.one(this.player_,"seeked",b=>this.handleSeeked(b))}}Jj.prototype.controlText_="Play";M.registerComponent("PlayToggle",Jj);class Nc extends M{constructor(a,b){super(a,b);this.on(a,["timeupdate","ended"],c=>this.updateContent(c));this.updateTextNode_()}createEl(){const a=this.buildCSSClass(),b=super.createEl("div",
{className:`${a} vjs-time-control vjs-control`}),c=aa("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\u00a0`},{role:"presentation"});b.appendChild(c);this.contentEl_=aa("span",{className:`${a}-display`},{role:"presentation"});b.appendChild(this.contentEl_);return b}dispose(){this.textNode_=this.contentEl_=null;super.dispose()}updateTextNode_(a=0){a=bc(a);this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",
()=>{if(this.contentEl_){var b=this.textNode_;b&&this.contentEl_.firstChild!==b&&(b=null,ca.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead."));(this.textNode_=P.createTextNode(this.formattedTime_))&&(b?this.contentEl_.replaceChild(this.textNode_,b):this.contentEl_.appendChild(this.textNode_))}}))}updateContent(a){}}Nc.prototype.labelText_="Time";Nc.prototype.controlText_="Time";M.registerComponent("TimeDisplay",
Nc);class lg extends Nc{buildCSSClass(){return"vjs-current-time"}updateContent(a){a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(a)}}lg.prototype.labelText_="Current Time";lg.prototype.controlText_="Current Time";M.registerComponent("CurrentTimeDisplay",lg);class mg extends Nc{constructor(a,b){super(a,b);b=c=>this.updateContent(c);this.on(a,"durationchange",b);this.on(a,"loadstart",b);this.on(a,
"loadedmetadata",b)}buildCSSClass(){return"vjs-duration"}updateContent(a){a=this.player_.duration();this.updateTextNode_(a)}}mg.prototype.labelText_="Duration";mg.prototype.controlText_="Duration";M.registerComponent("DurationDisplay",mg);class Ho extends M{createEl(){const a=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),b=super.createEl("div"),c=super.createEl("span",{textContent:"/"});b.appendChild(c);a.appendChild(b);return a}}M.registerComponent("TimeDivider",
Ho);class ng extends Nc{constructor(a,b){super(a,b);this.on(a,"durationchange",c=>this.updateContent(c))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const a=super.createEl();!1!==this.options_.displayNegative&&a.insertBefore(aa("span",{},{"aria-hidden":!0},"-"),this.contentEl_);return a}updateContent(a){"number"===typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))}}
ng.prototype.labelText_="Remaining Time";ng.prototype.controlText_="Remaining Time";M.registerComponent("RemainingTimeDisplay",ng);class Io extends M{constructor(a,b){super(a,b);this.updateShowing();this.on(this.player(),"durationchange",c=>this.updateShowing(c))}createEl(){const a=super.createEl("div",{className:"vjs-live-control vjs-control"});this.contentEl_=aa("div",{className:"vjs-live-display"},{"aria-live":"off"});this.contentEl_.appendChild(aa("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\u00a0`}));
this.contentEl_.appendChild(P.createTextNode(this.localize("LIVE")));a.appendChild(this.contentEl_);return a}dispose(){this.contentEl_=null;super.dispose()}updateShowing(a){Infinity===this.player().duration()?this.show():this.hide()}}M.registerComponent("LiveDisplay",Io);class Kj extends cb{constructor(a,b){super(a,b);this.updateLiveEdgeStatus();this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=c=>this.updateLiveEdgeStatus(c),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const a=
super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});this.setIcon("circle",a);this.textEl_=aa("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"});a.appendChild(this.textEl_);return a}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",
!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_);this.textEl_=null;super.dispose()}}Kj.prototype.controlText_="Seek to live, currently playing live";M.registerComponent("SeekToLive",Kj);var Jo=Object.freeze({__proto__:null,clamp:ec});class og extends M{constructor(a,b){super(a,
b);this.handleMouseDown_=c=>this.handleMouseDown(c);this.handleMouseUp_=c=>this.handleMouseUp(c);this.handleKeyDown_=c=>this.handleKeyDown(c);this.handleClick_=c=>this.handleClick(c);this.handleMouseMove_=c=>this.handleMouseMove(c);this.update_=c=>this.update(c);this.bar=this.getChild(this.options_.barName);this.vertical(!!this.options_.vertical);this.enable()}enabled(){return this.enabled_}enable(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown_);this.on("touchstart",this.handleMouseDown_);
this.on("keydown",this.handleKeyDown_);this.on("click",this.handleClick_);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}}disable(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_);this.off("touchstart",this.handleMouseDown_);this.off("keydown",this.handleKeyDown_);this.off("click",this.handleClick_);
this.off(this.player_,"controlsvisible",this.update_);this.off(a,"mousemove",this.handleMouseMove_);this.off(a,"mouseup",this.handleMouseUp_);this.off(a,"touchmove",this.handleMouseMove_);this.off(a,"touchend",this.handleMouseUp_);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}}createEl(a,b={},c={}){b.className+=" vjs-slider";b=Object.assign({tabIndex:0},b);c=Object.assign({role:"slider","aria-valuenow":0,
"aria-valuemin":0,"aria-valuemax":100},c);return super.createEl(a,b,c)}handleMouseDown(a){const b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();"touchstart"!==a.type||Ab||a.preventDefault();fi();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(b,"mousemove",this.handleMouseMove_);this.on(b,"mouseup",this.handleMouseUp_);this.on(b,"touchmove",this.handleMouseMove_);this.on(b,"touchend",this.handleMouseUp_);this.handleMouseMove(a,!0)}handleMouseMove(a){}handleMouseUp(a){a=
this.bar.el_.ownerDocument;gi();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove_);this.off(a,"mouseup",this.handleMouseUp_);this.off(a,"touchmove",this.handleMouseMove_);this.off(a,"touchend",this.handleMouseUp_);this.update()}update(){if(this.el_&&this.bar){var a=this.getProgress();if(a===this.progress_)return a;this.progress_=a;this.requestNamedAnimationFrame("Slider#update",()=>{const b=this.vertical()?"height":"width";this.bar.el().style[b]=
(100*a).toFixed(2)+"%"});return a}}getProgress(){return Number(ec(this.getPercent(),0,1).toFixed(4))}calculateDistance(a){a=Wd(this.el_,a);return this.vertical()?a.y:a.x}handleKeyDown(a){Y.isEventKey(a,"Left")||Y.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepBack()):Y.isEventKey(a,"Right")||Y.isEventKey(a,"Up")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):super.handleKeyDown(a)}handleClick(a){a.stopPropagation();a.preventDefault()}vertical(a){if(void 0===a)return this.vertical_||
!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}M.registerComponent("Slider",og);class Ko extends M{constructor(a,b){super(a,b);this.partEls_=[];this.on(a,"progress",c=>this.update(c))}createEl(){const a=super.createEl("div",{className:"vjs-load-progress"}),b=aa("span",{className:"vjs-control-text"}),c=aa("span",{textContent:this.localize("Loaded")}),e=P.createTextNode(": ");this.percentageEl_=aa("span",{className:"vjs-control-text-loaded-percentage",
textContent:"0%"});a.appendChild(b);b.appendChild(c);b.appendChild(e);b.appendChild(this.percentageEl_);return a}dispose(){this.percentageEl_=this.partEls_=null;super.dispose()}update(a){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{var b=this.player_.liveTracker;const c=this.player_.buffered();var e=b&&b.isLive()?b.seekableEnd():this.player_.duration(),g=this.player_.bufferedEnd();b=this.partEls_;e=ec(g/e*100,0,100).toFixed(2)+"%";this.percent_!==e&&(this.el_.style.width=e,Tb(this.percentageEl_,
e),this.percent_=e);for(e=0;e<c.length;e++){const m=c.start(e),p=c.end(e);let u=b[e];u||(u=this.el_.appendChild(aa()),b[e]=u);if(u.dataset.start!==m||u.dataset.end!==p)u.dataset.start=m,u.dataset.end=p,u.style.left=ec(m/g*100,0,100).toFixed(2)+"%",u.style.width=ec((p-m)/g*100,0,100).toFixed(2)+"%"}for(g=b.length;g>c.length;g--)this.el_.removeChild(b[g-1]);b.length=c.length})}}M.registerComponent("LoadProgressBar",Ko);class Lo extends M{constructor(a,b){super(a,b);this.update=Bb(na(this,this.update),
30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(a,b,c){const e=ed(this.el_);var g=Bc(this.player_.el());const m=a.width*b;g&&e&&(b=a.left-g.left+m,a=a.width-m+(g.right-a.right),g=e.width/2,b<g?g+=g-b:a<g&&(g=a),0>g?g=0:g>e.width&&(g=e.width),g=Math.round(g),this.el_.style.right=`-${g}px`,this.write(c))}write(a){Tb(this.el_,a)}updateTime(a,b,c,e){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{var g=this.player_.duration();if(this.player_.liveTracker&&
this.player_.liveTracker.isLive()){g=this.player_.liveTracker.liveWindow();const m=g-b*g;g=(1>m?"":"-")+bc(m,g)}else g=bc(c,g);this.update(a,b,g);e&&e()})}}M.registerComponent("TimeTooltip",Lo);class pg extends M{constructor(a,b){super(a,b);this.setIcon("circle");this.update=Bb(na(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(a,b){const c=this.getChild("timeTooltip");if(c){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:
this.player_.currentTime();c.updateTime(a,b,e)}}}pg.prototype.options_={children:[]};Oa||zb||pg.prototype.options_.children.push("timeTooltip");M.registerComponent("PlayProgressBar",pg);class Lj extends M{constructor(a,b){super(a,b);this.update=Bb(na(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(a,b){const c=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,c,()=>{this.el_.style.left=`${a.width*b}px`})}}Lj.prototype.options_=
{children:["timeTooltip"]};M.registerComponent("MouseTimeDisplay",Lj);class qg extends og{constructor(a,b){super(a,b);this.setEventHandlers_()}setEventHandlers_(){this.update_=na(this,this.update);this.update=Bb(this.update_,30);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.enableIntervalHandler_=a=>this.enableInterval_(a);this.disableIntervalHandler_=
a=>this.disableInterval_(a);this.on(this.player_,["playing"],this.enableIntervalHandler_);this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_);if("hidden"in P&&"visibilityState"in P)this.on(P,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(a){"hidden"===P.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(a)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),
this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(a){if("hidden"!==P.visibilityState){var b=super.update();this.requestNamedAnimationFrame("SeekBar#update",
()=>{const c=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),e=this.player_.liveTracker;let g=this.player_.duration();e&&e.isLive()&&(g=this.player_.liveTracker.liveCurrentTime());this.percent_!==b&&(this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2)),this.percent_=b);if(this.currentTime_!==c||this.duration_!==g)this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime\x3d{1} duration\x3d{2}",[bc(c,g),bc(g,g)],"{1} of {2}")),this.currentTime_=
c,this.duration_=g;this.bar&&this.bar.update(Bc(this.el()),this.getProgress())});return b}}userSeek_(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser();this.player_.currentTime(a)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){var a=this.getCurrentTime_();const b=this.player_.liveTracker;b&&b.isLive()?(a=(a-b.seekableStart())/b.liveWindow(),b.atLiveEdge()&&(a=1)):
a/=this.player_.duration();return a}handleMouseDown(a){fd(a)&&(a.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(a))}handleMouseMove(a,b=!1){if(fd(a)&&!isNaN(this.player_.duration())){b||this.player_.scrubbing()||this.player_.scrubbing(!0);var c=this.calculateDistance(a);var e=this.player_.liveTracker;if(e&&e.isLive()){if(.99<=c){e.seekToLiveEdge();return}a=e.seekableStart();b=e.liveCurrentTime();c=a+c*e.liveWindow();c>=b&&(c=b);c<=a&&(c=a+
.1);if(Infinity===c)return}else c*=this.player_.duration(),c===this.player_.duration()&&(c-=.1);this.userSeek_(c)}}enable(){super.enable();const a=this.getChild("mouseTimeDisplay");a&&a.show()}disable(){super.disable();const a=this.getChild("mouseTimeDisplay");a&&a.hide()}handleMouseUp(a){super.handleMouseUp(a);a&&a.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying?xb(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+
5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(a){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(a){const b=this.player_.liveTracker;Y.isEventKey(a,"Space")||Y.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.handleAction(a)):Y.isEventKey(a,"Home")?(a.preventDefault(),a.stopPropagation(),this.userSeek_(0)):Y.isEventKey(a,"End")?(a.preventDefault(),a.stopPropagation(),b&&b.isLive()?this.userSeek_(b.liveCurrentTime()):this.userSeek_(this.player_.duration())):
/^[0-9]$/.test(Y(a))?(a.preventDefault(),a.stopPropagation(),a=10*(Y.codes[Y(a)]-Y.codes["0"])/100,b&&b.isLive()?this.userSeek_(b.seekableStart()+b.liveWindow()*a):this.userSeek_(this.player_.duration()*a)):Y.isEventKey(a,"PgDn")?(a.preventDefault(),a.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Y.isEventKey(a,"PgUp")?(a.preventDefault(),a.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(a)}dispose(){this.disableInterval_();this.off(this.player_,
["ended","durationchange","timeupdate"],this.update);this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update);this.off(this.player_,["playing"],this.enableIntervalHandler_);this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_);"hidden"in P&&"visibilityState"in P&&this.off(P,"visibilitychange",this.toggleVisibility_);super.dispose()}}qg.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};Oa||zb||qg.prototype.options_.children.splice(1,
0,"mouseTimeDisplay");M.registerComponent("SeekBar",qg);class Mj extends M{constructor(a,b){super(a,b);this.handleMouseMove=Bb(na(this,this.handleMouseMove),30);this.throttledHandleMouseSeek=Bb(na(this,this.handleMouseSeek),30);this.handleMouseUpHandler_=c=>this.handleMouseUp(c);this.handleMouseDownHandler_=c=>this.handleMouseDown(c);this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(a){const b=this.getChild("seekBar");if(b){var c=
b.getChild("playProgressBar"),e=b.getChild("mouseTimeDisplay");if(c||e){var g=b.el(),m=ed(g);a=Wd(g,a).x;a=ec(a,0,1);e&&e.update(m,a);c&&c.update(m,b.getProgress())}}}handleMouseSeek(a){const b=this.getChild("seekBar");b&&b.handleMouseMove(a)}enabled(){return this.enabled_}disable(){this.children().forEach(a=>a.disable&&a.disable());if(this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),
this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const a=this.getChild("seekBar");this.player_.scrubbing(!1);a.videoWasPlaying&&xb(this.player_.play())}}enable(){this.children().forEach(a=>a.enable&&a.enable());this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const a=this.el_.ownerDocument;this.off(a,
"mousemove",this.throttledHandleMouseSeek);this.off(a,"touchmove",this.throttledHandleMouseSeek);this.off(a,"mouseup",this.handleMouseUpHandler_);this.off(a,"touchend",this.handleMouseUpHandler_)}handleMouseDown(a){const b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a);this.on(b,"mousemove",this.throttledHandleMouseSeek);this.on(b,"touchmove",this.throttledHandleMouseSeek);this.on(b,"mouseup",this.handleMouseUpHandler_);this.on(b,"touchend",this.handleMouseUpHandler_)}handleMouseUp(a){const b=
this.getChild("seekBar");b&&b.handleMouseUp(a);this.removeListenersAddedOnMousedownAndTouchstart()}}Mj.prototype.options_={children:["seekBar"]};M.registerComponent("ProgressControl",Mj);class Nj extends cb{constructor(a,b){super(a,b);this.setIcon("picture-in-picture-enter");this.on(a,["enterpictureinpicture","leavepictureinpicture"],c=>this.handlePictureInPictureChange(c));this.on(a,["disablepictureinpicturechanged","loadedmetadata"],c=>this.handlePictureInPictureEnabledChange(c));this.on(a,["loadedmetadata",
"audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange());this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){P.pictureInPictureEnabled&&
!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in D?this.enable():this.disable()}handlePictureInPictureChange(a){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture"));this.handlePictureInPictureEnabledChange()}handleClick(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():
this.player_.requestPictureInPicture()}show(){"function"===typeof P.exitPictureInPicture&&super.show()}}Nj.prototype.controlText_="Picture-in-Picture";M.registerComponent("PictureInPictureToggle",Nj);class Oj extends cb{constructor(a,b){super(a,b);this.setIcon("fullscreen-enter");this.on(a,"fullscreenchange",c=>this.handleFullscreenChange(c));!1===P[a.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(a){this.player_.isFullscreen()?
(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Oj.prototype.controlText_="Fullscreen";M.registerComponent("FullscreenToggle",Oj);const Mo=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):
a.addClass("vjs-hidden")})};class No extends M{createEl(){const a=super.createEl("div",{className:"vjs-volume-level"});this.setIcon("circle",a);a.appendChild(super.createEl("span",{className:"vjs-control-text"}));return a}}M.registerComponent("VolumeLevel",No);class Oo extends M{constructor(a,b){super(a,b);this.update=Bb(na(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(a,b,c,e){if(!c){c=Bc(this.el_);var g=Bc(this.player_.el());
const m=a.width*b;if(!g||!c)return;b=a.left-g.left+m;a=a.width-m+(g.right-a.right);g=c.width/2;b<g?g+=g-b:a<g&&(g=a);0>g?g=0:g>c.width&&(g=c.width);this.el_.style.right=`-${g}px`}this.write(`${e}%`)}write(a){Tb(this.el_,a)}updateVolume(a,b,c,e,g){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(a,b,c,e.toFixed(0));g&&g()})}}M.registerComponent("VolumeLevelTooltip",Oo);class Pj extends M{constructor(a,b){super(a,b);this.update=Bb(na(this,this.update),30)}createEl(){return super.createEl("div",
{className:"vjs-mouse-display"})}update(a,b,c){const e=100*b;this.getChild("volumeLevelTooltip").updateVolume(a,b,c,e,()=>{c?this.el_.style.bottom=`${a.height*b}px`:this.el_.style.left=`${a.width*b}px`})}}Pj.prototype.options_={children:["volumeLevelTooltip"]};M.registerComponent("MouseVolumeLevelDisplay",Pj);class we extends og{constructor(a,b){super(a,b);this.on("slideractive",c=>this.updateLastVolume_(c));this.on(a,"volumechange",c=>this.updateARIAAttributes(c));a.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",
{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(a){fd(a)&&super.handleMouseDown(a)}handleMouseMove(a){const b=this.getChild("mouseVolumeLevelDisplay");if(b){var c=this.el();const e=Bc(c),g=this.vertical();c=Wd(c,a);c=g?c.y:c.x;c=ec(c,0,1);b.update(e,c,g)}fd(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?
0:this.player_.volume()}stepForward(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(a){a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a);this.el_.setAttribute("aria-valuetext",a+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const a=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&
this.player_.lastVolume_(a)})}}we.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};Oa||zb||we.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");we.prototype.playerEvent="volumechange";M.registerComponent("VolumeBar",we);class Qj extends M{constructor(a,b={}){b.vertical=b.vertical||!1;if("undefined"===typeof b.volumeBar||yc(b.volumeBar))b.volumeBar=b.volumeBar||{},b.volumeBar.vertical=b.vertical;super(a,b);Mo(this,a);this.throttledHandleMouseMove=Bb(na(this,this.handleMouseMove),
30);this.handleMouseUpHandler_=c=>this.handleMouseUp(c);this.on("mousedown",c=>this.handleMouseDown(c));this.on("touchstart",c=>this.handleMouseDown(c));this.on("mousemove",c=>this.handleMouseMove(c));this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active");this.addClass("vjs-slider-active");this.trigger("slideractive")});this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active");this.removeClass("vjs-slider-active");
this.trigger("sliderinactive")})}createEl(){let a="vjs-volume-horizontal";this.options_.vertical&&(a="vjs-volume-vertical");return super.createEl("div",{className:`vjs-volume-control vjs-control ${a}`})}handleMouseDown(a){a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);this.on(a,"mouseup",this.handleMouseUpHandler_);this.on(a,"touchend",this.handleMouseUpHandler_)}handleMouseUp(a){a=this.el_.ownerDocument;this.off(a,
"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUpHandler_);this.off(a,"touchend",this.handleMouseUpHandler_)}handleMouseMove(a){this.volumeBar.handleMouseMove(a)}}Qj.prototype.options_={children:["volumeBar"]};M.registerComponent("VolumeControl",Qj);const Po=function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):
a.addClass("vjs-hidden")})};class Rj extends cb{constructor(a,b){super(a,b);Po(this,a);this.on(a,["loadstart","volumechange"],c=>this.update(c))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(a){a=this.player_.volume();const b=this.player_.lastVolume_();0===a?(this.player_.volume(.1>b?.1:b),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)}update(a){this.updateIcon_();this.updateControlText_()}updateIcon_(){const a=this.player_.volume();let b=3;
this.setIcon("volume-high");Oa&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);0===a||this.player_.muted()?(this.setIcon("volume-mute"),b=0):.33>a?(this.setIcon("volume-low"),b=1):.67>a&&(this.setIcon("volume-medium"),b=2);Ud(this.el_,[0,1,2,3].reduce((c,e)=>c+`${e?" ":""}vjs-vol-${e}`,""));ac(this.el_,`vjs-vol-${b}`)}updateControlText_(){const a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)}}
Rj.prototype.controlText_="Mute";M.registerComponent("MuteToggle",Rj);class Sj extends M{constructor(a,b={}){b.inline="undefined"!==typeof b.inline?b.inline:!0;if("undefined"===typeof b.volumeControl||yc(b.volumeControl))b.volumeControl=b.volumeControl||{},b.volumeControl.vertical=!b.inline;super(a,b);this.handleKeyPressHandler_=c=>this.handleKeyPress(c);this.on(a,["loadstart"],c=>this.volumePanelState_(c));this.on(this.muteToggle,"keyup",c=>this.handleKeyPress(c));this.on(this.volumeControl,"keyup",
c=>this.handleVolumeControlKeyUp(c));this.on("keydown",c=>this.handleKeyPress(c));this.on("mouseover",c=>this.handleMouseOver(c));this.on("mouseout",c=>this.handleMouseOut(c));this.on(this.volumeControl,["slideractive"],this.sliderActive_);this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&
this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let a="vjs-volume-panel-horizontal";this.options_.inline||(a="vjs-volume-panel-vertical");return super.createEl("div",{className:`vjs-volume-panel vjs-control ${a}`})}dispose(){this.handleMouseOut();super.dispose()}handleVolumeControlKeyUp(a){Y.isEventKey(a,"Esc")&&this.muteToggle.focus()}handleMouseOver(a){this.addClass("vjs-hover");$a(P,
"keyup",this.handleKeyPressHandler_)}handleMouseOut(a){this.removeClass("vjs-hover");Ka(P,"keyup",this.handleKeyPressHandler_)}handleKeyPress(a){Y.isEventKey(a,"Esc")&&this.handleMouseOut()}}Sj.prototype.options_={children:["muteToggle","volumeControl"]};M.registerComponent("VolumePanel",Sj);class Qo extends cb{constructor(a,b){super(a,b);this.validOptions=[5,10,30];(this.skipTime=this.getSkipForwardTime())&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",
[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const a=this.options_.playerOptions;return a.controlBar&&a.controlBar.skipButtons&&a.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(a){if(!isNaN(this.player_.duration())){a=this.player_.currentTime();var b=this.player_.liveTracker;b=b&&b.isLive()?b.seekableEnd():this.player_.duration();this.player_.currentTime(a+this.skipTime<=b?a+this.skipTime:
b)}}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}M.registerComponent("SkipForward",Qo);class Tj extends cb{constructor(a,b){super(a,b);this.validOptions=[5,10,30];(this.skipTime=this.getSkipBackwardTime())&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const a=this.options_.playerOptions;
return a.controlBar&&a.controlBar.skipButtons&&a.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(a){a=this.player_.currentTime();var b=this.player_.liveTracker;b=b&&b.isLive()&&b.seekableStart();this.player_.currentTime(b&&a-this.skipTime<=b?b:a>=this.skipTime?a-this.skipTime:0)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}Tj.prototype.controlText_="Skip Backward";
M.registerComponent("SkipBackward",Tj);class Uj extends M{constructor(a,b){super(a,b);b&&(this.menuButton_=b.menuButton);this.focusedChild_=-1;this.on("keydown",c=>this.handleKeyDown(c));this.boundHandleBlur_=c=>this.handleBlur(c);this.boundHandleTapClick_=c=>this.handleTapClick(c)}addEventListenerForItem(a){a instanceof M&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(a){a instanceof M&&(this.off(a,"blur",this.boundHandleBlur_),
this.off(a,["tap","click"],this.boundHandleTapClick_))}removeChild(a){"string"===typeof a&&(a=this.getChild(a));this.removeEventListenerForItem(a);super.removeChild(a)}addItem(a){(a=this.addChild(a))&&this.addEventListenerForItem(a)}createEl(){this.contentEl_=aa(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");const a=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});a.appendChild(this.contentEl_);$a(a,"click",function(b){b.preventDefault();
b.stopImmediatePropagation()});return a}dispose(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;super.dispose()}handleBlur(a){const b=a.relatedTarget||P.activeElement;this.children().some(c=>c.el()===b)||(a=this.menuButton_)&&a.buttonPressed_&&b!==a.el().firstChild&&a.unpressButton()}handleTapClick(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();Array.isArray(b)&&(b=b.filter(c=>c.el()===a.target)[0])&&"CaptionSettingsMenuItem"!==b.name()&&this.menuButton_.focus()}}handleKeyDown(a){if(Y.isEventKey(a,
"Left")||Y.isEventKey(a,"Down"))a.preventDefault(),a.stopPropagation(),this.stepForward();else if(Y.isEventKey(a,"Right")||Y.isEventKey(a,"Up"))a.preventDefault(),a.stopPropagation(),this.stepBack()}stepForward(){let a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)}stepBack(){let a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1);this.focus(a)}focus(a=0){const b=this.children().slice();b.length&&b[0].hasClass("vjs-menu-title")&&b.shift();0<b.length&&(0>a?a=0:a>=b.length&&
(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())}}M.registerComponent("Menu",Uj);class rg extends M{constructor(a,b={}){super(a,b);this.menuButton_=new cb(a,b);this.menuButton_.controlText(this.controlText_);this.menuButton_.el_.setAttribute("aria-haspopup","true");a=cb.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+a;this.menuButton_.removeClass("vjs-control");this.addChild(this.menuButton_);this.update();this.enabled_=!0;a=c=>this.handleClick(c);this.handleMenuKeyUp_=
c=>this.handleMenuKeyUp(c);this.on(this.menuButton_,"tap",a);this.on(this.menuButton_,"click",a);this.on(this.menuButton_,"keydown",c=>this.handleKeyDown(c));this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover");this.menu.show();$a(P,"keyup",this.handleMenuKeyUp_)});this.on("mouseleave",c=>this.handleMouseLeave(c));this.on("keydown",c=>this.handleSubmenuKeyDown(c))}update(){const a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=a;this.addChild(a);
this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const a=new Uj(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var b=aa("li",{className:"vjs-menu-title",textContent:va(this.options_.title),tabIndex:-1});b=new M(this.player_,{el:b});a.addItem(b)}if(this.items=
this.createItems())for(b=0;b<this.items.length;b++)a.addItem(this.items[b]);return a}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(a){super.setIcon(a,this.menuButton_.el_)}buildWrapperCSSClass(){let a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";const b=cb.prototype.buildCSSClass();return`vjs-menu-button ${a} ${b} ${super.buildCSSClass()}`}buildCSSClass(){let a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":
a+"-popup";return`vjs-menu-button ${a} ${super.buildCSSClass()}`}controlText(a,b=this.menuButton_.el()){return this.menuButton_.controlText(a,b)}dispose(){this.handleMouseLeave();super.dispose()}handleClick(a){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(a){this.removeClass("vjs-hover");Ka(P,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(a){Y.isEventKey(a,"Esc")||Y.isEventKey(a,"Tab")?(this.buttonPressed_&&
this.unpressButton(),Y.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):!Y.isEventKey(a,"Up")&&!Y.isEventKey(a,"Down")||this.buttonPressed_||(a.preventDefault(),this.pressButton())}handleMenuKeyUp(a){(Y.isEventKey(a,"Esc")||Y.isEventKey(a,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(a){this.handleSubmenuKeyDown(a)}handleSubmenuKeyDown(a){if(Y.isEventKey(a,"Esc")||Y.isEventKey(a,"Tab"))this.buttonPressed_&&this.unpressButton(),Y.isEventKey(a,"Tab")||(a.preventDefault(),
this.menuButton_.focus())}pressButton(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Oa&&bi()||this.menu.focus())}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()}enable(){this.enabled_=!0;this.removeClass("vjs-disabled");
this.menuButton_.enable()}}M.registerComponent("MenuButton",rg);class sg extends rg{constructor(a,b){const c=b.tracks;super(a,b);1>=this.items.length&&this.hide();if(c){var e=na(this,this.update);c.addEventListener("removetrack",e);c.addEventListener("addtrack",e);c.addEventListener("labelchange",e);this.player_.on("ready",e);this.player_.on("dispose",function(){c.removeEventListener("removetrack",e);c.removeEventListener("addtrack",e);c.removeEventListener("labelchange",e)})}}}M.registerComponent("TrackButton",
sg);const Ro="Tab Esc Up Down Right Left".split(" ");class qd extends ve{constructor(a,b){super(a,b);this.selectable=b.selectable;this.isSelected_=b.selected||!1;this.multiSelectable=b.multiSelectable;this.selected(this.isSelected_);this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(a,b,c){this.nonIconControl=!0;a=super.createEl("li",Object.assign({className:"vjs-menu-item",
tabIndex:-1},b),c);b=aa("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});this.player_.options_.experimentalSvgIcons?a.appendChild(b):a.replaceChild(b,a.querySelector(".vjs-icon-placeholder"));return a}handleKeyDown(a){Ro.some(b=>Y.isEventKey(a,b))||super.handleKeyDown(a)}handleClick(a){this.selected(!0)}selected(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):
(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}M.registerComponent("MenuItem",qd);class rd extends qd{constructor(a,b){const c=b.track,e=a.textTracks();b.label=c.label||c.language||"Unknown";b.selected="showing"===c.mode;super(a,b);this.track=c;this.kinds=(b.kinds||[b.kind||this.track.kind]).filter(Boolean);const g=(...p)=>{this.handleTracksChange.apply(this,p)},m=(...p)=>{this.handleSelectedLanguageChange.apply(this,p)};
a.on(["loadstart","texttrackchange"],g);e.addEventListener("change",g);e.addEventListener("selectedlanguagechange",m);this.on("dispose",function(){a.off(["loadstart","texttrackchange"],g);e.removeEventListener("change",g);e.removeEventListener("selectedlanguagechange",m)});if(void 0===e.onchange){let p;this.on(["tap","click"],function(){if("object"!==typeof D.Event)try{p=new D.Event("change")}catch(u){}p||(p=P.createEvent("Event"),p.initEvent("change",!0,!0));e.dispatchEvent(p)})}this.handleTracksChange()}handleClick(a){const b=
this.track,c=this.player_.textTracks();super.handleClick(a);if(c)for(a=0;a<c.length;a++){const e=c[a];-1!==this.kinds.indexOf(e.kind)&&(e===b?"showing"!==e.mode&&(e.mode="showing"):"disabled"!==e.mode&&(e.mode="disabled"))}}handleTracksChange(a){a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)}handleSelectedLanguageChange(a){"showing"===this.track.mode&&(a=this.player_.cache_.selectedLanguage,a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage=
{enabled:!0,language:this.track.language,kind:this.track.kind}))}dispose(){this.track=null;super.dispose()}}M.registerComponent("TextTrackMenuItem",rd);class Vj extends rd{constructor(a,b){b.track={player:a,kind:b.kind,kinds:b.kinds,default:!1,mode:"disabled"};b.kinds||(b.kinds=[b.kind]);b.track.label=b.label?b.label:b.kinds.join(" and ")+" off";b.selectable=!0;b.multiSelectable=!1;super(a,b)}handleTracksChange(a){a=this.player().textTracks();let b=!0;for(let c=0,e=a.length;c<e;c++){const g=a[c];
if(-1<this.options_.kinds.indexOf(g.kind)&&"showing"===g.mode){b=!1;break}}b!==this.isSelected_&&this.selected(b)}handleSelectedLanguageChange(a){a=this.player().textTracks();let b=!0;for(let c=0,e=a.length;c<e;c++){const g=a[c];if(-1<["captions","descriptions","subtitles"].indexOf(g.kind)&&"showing"===g.mode){b=!1;break}}b&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label);super.handleLanguagechange()}}
M.registerComponent("OffTextTrackMenuItem",Vj);class Oc extends sg{constructor(a,b={}){b.tracks=a.textTracks();super(a,b)}createItems(a=[],b=rd){var c;this.label_&&(c=`${this.label_} off`);a.push(new Vj(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c}));this.hideThreshold_+=1;c=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let e=0;e<c.length;e++){const g=c[e];if(-1<this.kinds_.indexOf(g.kind)){const m=new b(this.player_,{track:g,kinds:this.kinds_,kind:this.kind_,
selectable:!0,multiSelectable:!1});m.addClass(`vjs-${g.kind}-menu-item`);a.push(m)}}return a}}M.registerComponent("TextTrackButton",Oc);class Wj extends qd{constructor(a,b){const c=b.track,e=b.cue,g=a.currentTime();b.selectable=!0;b.multiSelectable=!1;b.label=e.text;b.selected=e.startTime<=g&&g<e.endTime;super(a,b);this.track=c;this.cue=e}handleClick(a){super.handleClick();this.player_.currentTime(this.cue.startTime)}}M.registerComponent("ChaptersTrackMenuItem",Wj);class tg extends Oc{constructor(a,
b,c){super(a,b,c);this.setIcon("chapters");this.selectCurrentItem_=()=>{this.items.forEach(e=>{e.selected(this.track_.activeCues[0]===e.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(a){a&&a.track&&"chapters"!==a.track.kind||(a=this.findChaptersTrack(),a!==this.track_?(this.setTrack(a),super.update()):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&super.update())}setTrack(a){if(this.track_!==
a){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){const b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_);this.track_.removeEventListener("cuechange",this.selectCurrentItem_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",
this.selectCurrentItem_)}}findChaptersTrack(){const a=this.player_.textTracks()||[];for(let b=a.length-1;0<=b;b--){const c=a[b];if(c.kind===this.kind_)return c}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(va(this.kind_))}createMenu(){this.options_.title=this.getMenuCaption();return super.createMenu()}createItems(){const a=[];if(!this.track_)return a;const b=this.track_.cues;if(!b)return a;for(let c=0,e=b.length;c<e;c++){const g=new Wj(this.player_,{track:this.track_,
cue:b[c]});a.push(g)}return a}}tg.prototype.kind_="chapters";tg.prototype.controlText_="Chapters";M.registerComponent("ChaptersButton",tg);class ug extends Oc{constructor(a,b,c){super(a,b,c);this.setIcon("audio-description");const e=a.textTracks(),g=na(this,this.handleTracksChange);e.addEventListener("change",g);this.on("dispose",function(){e.removeEventListener("change",g)})}handleTracksChange(a){a=this.player().textTracks();let b=!1;for(let c=0,e=a.length;c<e;c++){const g=a[c];if(g.kind!==this.kind_&&
"showing"===g.mode){b=!0;break}}b?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}ug.prototype.kind_="descriptions";ug.prototype.controlText_="Descriptions";M.registerComponent("DescriptionsButton",ug);class vg extends Oc{constructor(a,b,c){super(a,b,c);this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}
vg.prototype.kind_="subtitles";vg.prototype.controlText_="Subtitles";M.registerComponent("SubtitlesButton",vg);class wg extends rd{constructor(a,b){b.track={player:a,kind:b.kind,label:b.kind+" settings",selectable:!1,default:!1,mode:"disabled"};b.selectable=!1;b.name="CaptionSettingsMenuItem";super(a,b);this.addClass("vjs-texttrack-settings");this.controlText(", opens "+b.kind+" settings dialog")}handleClick(a){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=
this.player_.localize(this.options_.kind+" settings");super.handleLanguagechange()}}M.registerComponent("CaptionSettingsMenuItem",wg);class xg extends Oc{constructor(a,b,c){super(a,b,c);this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const a=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||
(a.push(new wg(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return super.createItems(a)}}xg.prototype.kind_="captions";xg.prototype.controlText_="Captions";M.registerComponent("CaptionsButton",xg);class Xj extends rd{createEl(a,b,c){a=super.createEl(a,b,c);b=a.querySelector(".vjs-menu-item-text");"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",a):b.appendChild(aa("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),b.appendChild(aa("span",
{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`})));return a}}M.registerComponent("SubsCapsMenuItem",Xj);class yg extends Oc{constructor(a,b={}){super(a,b);this.label_="subtitles";this.setIcon("subtitles");-1<["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)&&(this.label_="captions",this.setIcon("captions"));this.menuButton_.controlText(va(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let a=
[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new wg(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return a=super.createItems(a,Xj)}}yg.prototype.kinds_=["captions","subtitles"];yg.prototype.controlText_="Subtitles";M.registerComponent("SubsCapsButton",yg);class Yj extends qd{constructor(a,b){const c=b.track,e=a.audioTracks();b.label=c.label||c.language||"Unknown";b.selected=c.enabled;super(a,b);this.track=c;
this.addClass(`vjs-${c.kind}-menu-item`);const g=(...m)=>{this.handleTracksChange.apply(this,m)};e.addEventListener("change",g);this.on("dispose",()=>{e.removeEventListener("change",g)})}createEl(a,b,c){a=super.createEl(a,b,c);b=a.querySelector(".vjs-menu-item-text");0<=["main-desc","description"].indexOf(this.options_.track.kind)&&(b.appendChild(aa("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),b.appendChild(aa("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")})));
return a}handleClick(a){super.handleClick(a);this.track.enabled=!0;if(this.player_.tech_.featuresNativeAudioTracks){a=this.player_.audioTracks();for(let b=0;b<a.length;b++){const c=a[b];c!==this.track&&(c.enabled=c===this.track)}}}handleTracksChange(a){this.selected(this.track.enabled)}}M.registerComponent("AudioTrackMenuItem",Yj);class Zj extends sg{constructor(a,b={}){b.tracks=a.audioTracks();super(a,b);this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(a=
[]){this.hideThreshold_=1;const b=this.player_.audioTracks();for(let c=0;c<b.length;c++)a.push(new Yj(this.player_,{track:b[c],selectable:!0,multiSelectable:!1}));return a}}Zj.prototype.controlText_="Audio Track";M.registerComponent("AudioTrackButton",Zj);class zg extends qd{constructor(a,b){const c=b.rate,e=parseFloat(c,10);b.label=c;b.selected=e===a.playbackRate();b.selectable=!0;b.multiSelectable=!1;super(a,b);this.label=c;this.rate=e;this.on(a,"ratechange",g=>this.update(g))}handleClick(a){super.handleClick();
this.player().playbackRate(this.rate)}update(a){this.selected(this.player().playbackRate()===this.rate)}}zg.prototype.contentElType="button";M.registerComponent("PlaybackRateMenuItem",zg);class ak extends rg{constructor(a,b){super(a,b);this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_);this.updateVisibility();this.updateLabel();this.on(a,"loadstart",c=>this.updateVisibility(c));this.on(a,"ratechange",c=>this.updateLabel(c));this.on(a,"playbackrateschange",c=>this.handlePlaybackRateschange(c))}createEl(){const a=
super.createEl();this.labelElId_="vjs-playback-rate-value-label-"+this.id_;this.labelEl_=aa("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"});a.appendChild(this.labelEl_);return a}dispose(){this.labelEl_=null;super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const a=this.playbackRates(),b=[];for(let c=a.length-1;0<=c;c--)b.push(new zg(this.player(),
{rate:a[c]+"x"}));return b}handlePlaybackRateschange(a){this.update()}playbackRates(){const a=this.player();return a.playbackRates&&a.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length}updateVisibility(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(a){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+
"x")}}ak.prototype.controlText_="Playback Rate";M.registerComponent("PlaybackRateMenuButton",ak);class bk extends M{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(a="div",b={},c={}){b.className||(b.className=this.buildCSSClass());return super.createEl(a,b,c)}}M.registerComponent("Spacer",bk);class So extends bk{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\u00a0"})}}
M.registerComponent("CustomControlSpacer",So);class ck extends M{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}ck.prototype.options_={children:"playToggle skipBackward skipForward volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton pictureInPictureToggle fullscreenToggle".split(" ")};M.registerComponent("ControlBar",
ck);class dk extends Kc{constructor(a,b){super(a,b);this.on(a,"error",c=>this.open(c))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const a=this.player().error();return a?this.localize(a.message):""}}dk.prototype.options_=Object.assign({},Kc.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});M.registerComponent("ErrorDisplay",dk);const ek=["#000","Black"],fk=["#00F","Blue"],gk=["#0FF","Cyan"],hk=["#0F0","Green"],ik=["#F0F","Magenta"],jk=
["#F00","Red"],kk=["#FFF","White"],lk=["#FF0","Yellow"],Ag=["1","Opaque"],Bg=["0.5","Semi-Transparent"],mk=["0","Transparent"],jc={backgroundColor:{selector:".vjs-bg-color \x3e select",id:"captions-background-color-%s",label:"Color",options:[ek,kk,jk,hk,fk,lk,ik,gk]},backgroundOpacity:{selector:".vjs-bg-opacity \x3e select",id:"captions-background-opacity-%s",label:"Opacity",options:[Ag,Bg,mk]},color:{selector:".vjs-text-color \x3e select",id:"captions-foreground-color-%s",label:"Color",options:[kk,
ek,jk,hk,fk,lk,ik,gk]},edgeStyle:{selector:".vjs-edge-style \x3e select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family \x3e select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],
["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent \x3e select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:a=>"1.00"===a?null:Number(a)},textOpacity:{selector:".vjs-text-opacity \x3e select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Ag,Bg]},windowColor:{selector:".vjs-window-color \x3e select",
id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity \x3e select",id:"captions-window-opacity-%s",label:"Opacity",options:[mk,Bg,Ag]}};jc.windowColor.options=jc.backgroundColor.options;class To extends Kc{constructor(a,b){b.temporary=!1;super(a,b);this.updateDisplay=this.updateDisplay.bind(this);this.fill();this.hasBeenOpened_=this.hasBeenFilled_=!0;this.endDialog=aa("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")});this.el().appendChild(this.endDialog);
this.setDefaults();void 0===b.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings);this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings();this.close()});this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults();this.updateDisplay()});xc(jc,c=>{this.on(this.$(c.selector),"change",this.updateDisplay)});this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null;super.dispose()}createElSelect_(a,
b="",c="label"){a=jc[a];const e=a.id.replace("%s",this.id_),g=[b,e].join(" ").trim();return[`<${c} id="${e}" class="${"label"===c?"vjs-label":""}">`,this.localize(a.label),`</${c}>`,`<select aria-labelledby="${g}">`].concat(a.options.map(m=>{const p=e+"-"+m[1].replace(/\W+/g,"");return[`<option id="${p}" value="${m[0]}" `,`aria-labelledby="${g} ${p}">`,this.localize(m[1]),"\x3c/option\x3e"].join("")})).concat("\x3c/select\x3e").join("")}createElFgColor_(){const a=`captions-text-legend-${this.id_}`;
return['\x3cfieldset class\x3d"vjs-fg vjs-track-setting"\x3e',`<legend id="${a}">`,this.localize("Text"),'\x3c/legend\x3e\x3cspan class\x3d"vjs-text-color"\x3e',this.createElSelect_("color",a),'\x3c/span\x3e\x3cspan class\x3d"vjs-text-opacity vjs-opacity"\x3e',this.createElSelect_("textOpacity",a),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")}createElBgColor_(){const a=`captions-background-${this.id_}`;return['\x3cfieldset class\x3d"vjs-bg vjs-track-setting"\x3e',`<legend id="${a}">`,this.localize("Text Background"),
'\x3c/legend\x3e\x3cspan class\x3d"vjs-bg-color"\x3e',this.createElSelect_("backgroundColor",a),'\x3c/span\x3e\x3cspan class\x3d"vjs-bg-opacity vjs-opacity"\x3e',this.createElSelect_("backgroundOpacity",a),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")}createElWinColor_(){const a=`captions-window-${this.id_}`;return['\x3cfieldset class\x3d"vjs-window vjs-track-setting"\x3e',`<legend id="${a}">`,this.localize("Caption Area Background"),'\x3c/legend\x3e\x3cspan class\x3d"vjs-window-color"\x3e',this.createElSelect_("windowColor",
a),'\x3c/span\x3e\x3cspan class\x3d"vjs-window-opacity vjs-opacity"\x3e',this.createElSelect_("windowOpacity",a),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")}createElColors_(){return aa("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return aa("div",{className:"vjs-track-settings-font",innerHTML:['\x3cfieldset class\x3d"vjs-font-percent vjs-track-setting"\x3e',this.createElSelect_("fontPercent",
"","legend"),'\x3c/fieldset\x3e\x3cfieldset class\x3d"vjs-edge-style vjs-track-setting"\x3e',this.createElSelect_("edgeStyle","","legend"),'\x3c/fieldset\x3e\x3cfieldset class\x3d"vjs-font-family vjs-track-setting"\x3e',this.createElSelect_("fontFamily","","legend"),"\x3c/fieldset\x3e"].join("")})}createElControls_(){const a=this.localize("restore all settings to the default values");return aa("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${a}">`,
this.localize("Reset"),`<span class="vjs-control-text"> ${a}</span>`,"\x3c/button\x3e",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return $h(jc,
(a,b,c)=>{var e=this.$(b.selector);b=vi(e.options[e.options.selectedIndex].value,b.parser);void 0!==b&&(a[c]=b);return a},{})}setValues(a){xc(jc,(b,c)=>{var e=this.$(b.selector);c=a[c];b=b.parser;if(c)for(let g=0;g<e.options.length;g++)if(vi(e.options[g].value,b)===c){e.selectedIndex=g;break}})}setDefaults(){xc(jc,a=>{const b=a.hasOwnProperty("default")?a.default:0;this.$(a.selector).selectedIndex=b})}restoreSettings(){let a;try{a=JSON.parse(D.localStorage.getItem("vjs-text-track-settings"))}catch(b){ca.warn(b)}a&&
this.setValues(a)}saveSettings(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?D.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):D.localStorage.removeItem("vjs-text-track-settings")}catch(b){ca.warn(b)}}}updateDisplay(){const a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;var a=this.player_.controlBar;const b=a&&a.subsCapsButton;a=a&&a.captionsButton;b?b.focus():a&&a.focus()}handleLanguagechange(){this.fill()}}
M.registerComponent("TextTrackSettings",To);class Uo extends M{constructor(a,b){let c=b.ResizeObserver||D.ResizeObserver;null===b.ResizeObserver&&(c=!1);const e=ma({createEl:!c,reportTouchActivity:!1},b);super(a,e);this.ResizeObserver=b.ResizeObserver||D.ResizeObserver;this.resizeObserver_=this.loadListener_=null;this.debouncedHandler_=uj(()=>{this.resizeHandler()},100,!1,this);c?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(a.el())):(this.loadListener_=
()=>{if(this.el_&&this.el_.contentWindow){var g=this.debouncedHandler_,m=this.unloadListener_=function(){Ka(this,"resize",g);Ka(this,"unload",m);m=null};$a(this.el_.contentWindow,"unload",m);$a(this.el_.contentWindow,"resize",g)}},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&
this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.loadListener_&&this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;super.dispose()}}M.registerComponent("ResizeManager",Uo);const Vo={trackingThreshold:20,liveTolerance:15};
class Wo extends M{constructor(a,b){b=ma(Vo,b,{createEl:!1});super(a,b);this.trackLiveHandler_=()=>this.trackLive_();this.handlePlay_=c=>this.handlePlay(c);this.handleFirstTimeupdate_=c=>this.handleFirstTimeupdate(c);this.handleSeeked_=c=>this.handleSeeked(c);this.seekToLiveEdge_=c=>this.seekToLiveEdge(c);this.reset_();this.on(this.player_,"durationchange",c=>this.handleDurationchange(c));this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){var a=this.player_.seekable();if(a&&a.length){a=
Number(D.performance.now().toFixed(4));var b=-1===this.lastTime_?0:(a-this.lastTime_)/1E3;this.lastTime_=a;this.pastSeekEnd_=this.pastSeekEnd()+b;a=this.liveCurrentTime();b=this.player_.currentTime();b=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-b)>this.options_.liveTolerance;this.timeupdateSeen_&&Infinity!==a||(b=!1);b!==this.behindLiveEdge_&&(this.behindLiveEdge_=b,this.trigger("liveedgechange"))}}handleDurationchange(){this.toggleTracking()}toggleTracking(){Infinity===this.player_.duration()&&
this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){if(!this.isTracking())if(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_)this.on(this.player_,
"seeked",this.handleSeeked_);else this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)}handleFirstTimeupdate(){this.timeupdateSeen_=!0;this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<a;this.nextSeekedFromUser_=!1;this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=
-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=!0;this.nextSeekedFromUser_=this.seekedBehindLive_=this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLiveHandler_);this.off(this.player_,"seeked",this.handleSeeked_);this.off(this.player_,"play",this.handlePlay_);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_);this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=
!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const a=this.player_.seekable(),b=[];let c=a?a.length:0;for(;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:Infinity}seekableStart(){const a=this.player_.seekable(),b=[];let c=a?a.length:0;for(;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0}liveWindow(){const a=this.liveCurrentTime();return Infinity===a?0:a-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+
this.seekableEnd()}pastSeekEnd(){const a=this.seekableEnd();-1!==this.lastSeekEnd_&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0);this.lastSeekEnd_=a;return this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"===typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1;this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking();super.dispose()}}M.registerComponent("LiveTracker",
Wo);class Xo extends M{constructor(a,b){super(a,b);this.on("statechanged",c=>this.updateDom_());this.updateDom_()}createEl(){this.els={title:aa("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${vb++}`}),description:aa("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${vb++}`})};return aa("div",{className:"vjs-title-bar"},{},ai(this.els))}updateDom_(){const a=this.player_.tech_,b=a&&a.el_,c={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(e=>
{const g=this.state[e],m=this.els[e];e=c[e];Xd(m);g&&Tb(m,g);b&&(b.removeAttribute(e),g&&b.setAttribute(e,m.id))});this.state.title||this.state.description?this.show():this.hide()}update(a){this.setState(a)}dispose(){var a=this.player_.tech_;if(a=a&&a.el_)a.removeAttribute("aria-labelledby"),a.removeAttribute("aria-describedby");super.dispose();this.els=null}}M.registerComponent("TitleBar",Xo);const Cg=a=>{var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;b=a.$$("source");
const c=[];let e="";if(!b.length)return!1;for(let g=0;g<b.length;g++){const m=b[g].src;m&&-1===c.indexOf(m)&&c.push(m)}if(!c.length)return!1;1===c.length&&(e=c[0]);a.triggerSourceset(e);return!0},Yo=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(a){const b=P.createElement(this.nodeName.toLowerCase());b.innerHTML=a;for(a=P.createDocumentFragment();b.childNodes.length;)a.appendChild(b.childNodes[0]);this.innerText="";D.Element.prototype.appendChild.call(this,a);
return this.innerHTML}}),nk=(a,b)=>{let c={};for(let e=0;e<a.length&&!((c=Object.getOwnPropertyDescriptor(a[e],b))&&c.set&&c.get);e++);c.enumerable=!0;c.configurable=!0;return c},ok=function(a){const b=a.el();if(!b.resetSourceWatch_){var c={},e=nk([a.el(),D.HTMLMediaElement.prototype,D.Element.prototype,Yo],"innerHTML"),g=m=>(...p)=>{p=m.apply(b,p);Cg(a);return p};["append","appendChild","insertAdjacentHTML"].forEach(m=>{b[m]&&(c[m]=b[m],b[m]=g(c[m]))});Object.defineProperty(b,"innerHTML",ma(e,{set:g(e.set)}));
b.resetSourceWatch_=()=>{b.resetSourceWatch_=null;Object.keys(c).forEach(m=>{b[m]=c[m]});Object.defineProperty(b,"innerHTML",e)};a.one("sourceset",b.resetSourceWatch_)}},Zo=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?Bj(D.Element.prototype.getAttribute.call(this,"src")):""},set(a){D.Element.prototype.setAttribute.call(this,"src",a);return a}}),$o=function(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=nk([a.el(),D.HTMLMediaElement.prototype,Zo],"src"),
e=b.setAttribute,g=b.load;Object.defineProperty(b,"src",ma(c,{set:m=>{m=c.set.call(b,m);a.triggerSourceset(b.src);return m}}));b.setAttribute=(m,p)=>{p=e.call(b,m,p);/src/i.test(m)&&a.triggerSourceset(b.src);return p};b.load=()=>{const m=g.call(b);Cg(a)||(a.triggerSourceset(""),ok(a));return m};b.currentSrc?a.triggerSourceset(b.currentSrc):Cg(a)||ok(a);b.resetSourceset_=()=>{b.resetSourceset_=null;b.load=g;b.setAttribute=e;Object.defineProperty(b,"src",c);b.resetSourceWatch_&&b.resetSourceWatch_()}}}};
class Q extends Z{constructor(a,b){super(a,b);var c=a.source;b=!1;this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName;c&&(this.el_.currentSrc!==c.src||a.tag&&3===a.tag.initNetworkState_)?this.setSource(c):this.handleLateInit_(this.el_);a.enableSourceset&&this.setupSourcesetHandling_();this.isScrubbing_=!1;if(this.el_.hasChildNodes()){var e=this.el_.childNodes;let g=e.length;for(c=[];g--;){const m=e[g];"track"===m.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?
(this.remoteTextTrackEls().addTrackElement_(m),this.remoteTextTracks().addTrack(m.track),this.textTracks().addTrack(m.track),b||this.el_.hasAttribute("crossorigin")||!ue(m.src)||(b=!0)):c.push(m))}for(e=0;e<c.length;e++)this.el_.removeChild(c[e])}this.proxyNativeTracks_();this.featuresNativeTextTracks&&b&&ca.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");this.restoreMetadataTracksInIOSNativePlayer_();(md||
pe)&&!0===a.nativeControlsForTouch&&this.setControls(!0);this.proxyWebkitFullscreen_();this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();Q.disposeMediaElement(this.el_);this.options_=null;super.dispose()}setupSourcesetHandling_(){$o(this)}restoreMetadataTracksInIOSNativePlayer_(){const a=this.textTracks();let b;const c=()=>{b=[];for(let g=0;g<a.length;g++){const m=a[g];"metadata"===m.kind&&b.push({track:m,storedMode:m.mode})}};c();a.addEventListener("change",
c);this.on("dispose",()=>a.removeEventListener("change",c));const e=()=>{for(let g=0;g<b.length;g++){const m=b[g];"disabled"===m.track.mode&&m.track.mode!==m.storedMode&&(m.track.mode=m.storedMode)}a.removeEventListener("change",e)};this.on("webkitbeginfullscreen",()=>{a.removeEventListener("change",c);a.removeEventListener("change",e);a.addEventListener("change",e)});this.on("webkitendfullscreen",()=>{a.removeEventListener("change",c);a.addEventListener("change",c);a.removeEventListener("change",
e)})}overrideNative_(a,b){if(b===this[`featuresNative${a}Tracks`]){var c=a.toLowerCase();this[`${c}TracksListeners_`]&&Object.keys(this[`${c}TracksListeners_`]).forEach(e=>{this.el()[`${c}Tracks`].removeEventListener(e,this[`${c}TracksListeners_`][e])});this[`featuresNative${a}Tracks`]=!b;this[`${c}TracksListeners_`]=null;this.proxyNativeTracksForType_(c)}}overrideNativeAudioTracks(a){this.overrideNative_("Audio",a)}overrideNativeVideoTracks(a){this.overrideNative_("Video",a)}proxyNativeTracksForType_(a){const b=
kb[a],c=this.el()[b.getterName],e=this[b.getterName]();if(this[`featuresNative${b.capitalName}Tracks`]&&c&&c.addEventListener){var g={change:p=>{p={type:"change",target:e,currentTarget:e,srcElement:e};e.trigger(p);"text"===a&&this[Mc.remoteText.getterName]().trigger(p)},addtrack(p){e.addTrack(p.track)},removetrack(p){e.removeTrack(p.track)}},m=function(){const p=[];for(let u=0;u<e.length;u++){let x=!1;for(let y=0;y<c.length;y++)if(c[y]===e[u]){x=!0;break}x||p.push(e[u])}for(;p.length;)e.removeTrack(p.shift())};
this[b.getterName+"Listeners_"]=g;Object.keys(g).forEach(p=>{const u=g[p];c.addEventListener(p,u);this.on("dispose",x=>c.removeEventListener(p,u))});this.on("loadstart",m);this.on("dispose",p=>this.off("loadstart",m))}}proxyNativeTracks_(){kb.names.forEach(a=>{this.proxyNativeTracksForType_(a)})}createEl(){let a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var b=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(b,a);Q.disposeMediaElement(a);a=
b}else a=P.createElement("video"),b=this.options_.tag&&Ub(this.options_.tag),b=ma({},b),md&&!0===this.options_.nativeControlsForTouch||delete b.controls,ei(a,Object.assign(b,{id:this.options_.techId,class:"vjs-tech"}));a.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&a.setAttribute("preload",this.options_.preload);void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);b=["loop","muted","playsinline","autoplay"];
for(let c=0;c<b.length;c++){const e=b[c],g=this.options_[e];"undefined"!==typeof g&&(g?a.setAttribute(e,e):a.removeAttribute(e),a[e]=g)}return a}handleLateInit_(a){if(0!==a.networkState&&3!==a.networkState)if(0===a.readyState){let c=!1;const e=function(){c=!0};this.on("loadstart",e);const g=function(){c||this.trigger("loadstart")};this.on("loadedmetadata",g);this.ready(function(){this.off("loadstart",e);this.off("loadedmetadata",g);c||this.trigger("loadstart")})}else{var b=["loadstart"];b.push("loadedmetadata");
2<=a.readyState&&b.push("loadeddata");3<=a.readyState&&b.push("canplay");4<=a.readyState&&b.push("canplaythrough");this.ready(function(){b.forEach(function(c){this.trigger(c)},this)})}}setScrubbing(a){this.isScrubbing_=a}scrubbing(){return this.isScrubbing_}setCurrentTime(a){try{this.isScrubbing_&&this.el_.fastSeek&&qe?this.el_.fastSeek(a):this.el_.currentTime=a}catch(b){ca(b,"Video is not ready. (Video.js)")}}duration(){if(Infinity===this.el_.duration&&zb&&Ab&&0===this.el_.currentTime){const a=()=>
{0<this.el_.currentTime&&(Infinity===this.el_.duration&&this.trigger("durationchange"),this.off("timeupdate",a))};this.on("timeupdate",a);return NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1});this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},b=function(){"webkitPresentationMode"in
this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",b);this.on("dispose",()=>{this.off("webkitbeginfullscreen",b);this.off("webkitendfullscreen",a)})}}supportsFullScreen(){return"function"===typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)xb(this.el_.play()),this.setTimeout(function(){a.pause();
try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",b)}},0);else try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",b)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(a){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(a):
super.requestVideoFrameCallback(a)}cancelVideoFrameCallback(a){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(a):super.cancelVideoFrameCallback(a)}src(a){if(void 0===a)return this.el_.src;this.setSrc(a)}reset(){Q.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(a){this.el_.controls=!!a}addTextTrack(a,b,c){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,b,c):super.addTextTrack(a,
b,c)}createRemoteTextTrack(a){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(a);const b=P.createElement("track");a.kind&&(b.kind=a.kind);a.label&&(b.label=a.label);if(a.language||a.srclang)b.srclang=a.language||a.srclang;a.default&&(b.default=a.default);a.id&&(b.id=a.id);a.src&&(b.src=a.src);return b}addRemoteTextTrack(a,b){a=super.addRemoteTextTrack(a,b);this.featuresNativeTextTracks&&this.el().appendChild(a);return a}removeRemoteTextTrack(a){super.removeRemoteTextTrack(a);
if(this.featuresNativeTextTracks){const b=this.$$("track");let c=b.length;for(;c--;)a!==b[c]&&a!==b[c].track||this.el().removeChild(b[c])}}getVideoPlaybackQuality(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const a={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount);D.performance&&
(a.creationTime=D.performance.now());return a}}Td(Q,"TEST_VID",function(){if(zc()){var a=P.createElement("video"),b=P.createElement("track");b.kind="captions";b.srclang="en";b.label="English";a.appendChild(b);return a}});Q.isSupported=function(){try{Q.TEST_VID.volume=.5}catch(a){return!1}return!(!Q.TEST_VID||!Q.TEST_VID.canPlayType)};Q.canPlayType=function(a){return Q.TEST_VID.canPlayType(a)};Q.canPlaySource=function(a,b){return Q.canPlayType(a.type)};Q.canControlVolume=function(){try{const a=Q.TEST_VID.volume;
Q.TEST_VID.volume=a/2+.1;const b=a!==Q.TEST_VID.volume;return b&&Oa?(D.setTimeout(()=>{Q&&Q.prototype&&(Q.prototype.featuresVolumeControl=a!==Q.TEST_VID.volume)}),!1):b}catch(a){return!1}};Q.canMuteVolume=function(){try{const a=Q.TEST_VID.muted;Q.TEST_VID.muted=!a;Q.TEST_VID.muted?Q.TEST_VID.setAttribute("muted","muted"):Q.TEST_VID.removeAttribute("muted");return a!==Q.TEST_VID.muted}catch(a){return!1}};Q.canControlPlaybackRate=function(){if(zb&&Ab&&58>le)return!1;try{const a=Q.TEST_VID.playbackRate;
Q.TEST_VID.playbackRate=a/2+.1;return a!==Q.TEST_VID.playbackRate}catch(a){return!1}};Q.canOverrideAttributes=function(){try{const a=()=>{};Object.defineProperty(P.createElement("video"),"src",{get:a,set:a});Object.defineProperty(P.createElement("audio"),"src",{get:a,set:a});Object.defineProperty(P.createElement("video"),"innerHTML",{get:a,set:a});Object.defineProperty(P.createElement("audio"),"innerHTML",{get:a,set:a})}catch(a){return!1}return!0};Q.supportsNativeTextTracks=function(){return qe||
Oa&&Ab};Q.supportsNativeVideoTracks=function(){return!(!Q.TEST_VID||!Q.TEST_VID.videoTracks)};Q.supportsNativeAudioTracks=function(){return!(!Q.TEST_VID||!Q.TEST_VID.audioTracks)};Q.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],
["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([a,b]){Td(Q.prototype,a,()=>Q[b](),!0)});Q.prototype.featuresVolumeControl=Q.canControlVolume();Q.prototype.movingMediaElementInDOM=!Oa;Q.prototype.featuresFullscreenResize=!0;Q.prototype.featuresProgressEvents=!0;Q.prototype.featuresTimeupdateEvents=!0;Q.prototype.featuresVideoFrameCallback=
!(!Q.TEST_VID||!Q.TEST_VID.requestVideoFrameCallback);Q.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(b){}}};Q.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(e){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(a){Q.prototype[a]=
function(){return this.el_[a]||this.el_.hasAttribute(a)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){Q.prototype["set"+va(a)]=function(b){(this.el_[a]=b)?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate disablePictureInPicture played networkState readyState videoWidth videoHeight crossOrigin".split(" ").forEach(function(a){Q.prototype[a]=function(){return this.el_[a]}});
"volume src poster preload playbackRate defaultPlaybackRate disablePictureInPicture crossOrigin".split(" ").forEach(function(a){Q.prototype["set"+va(a)]=function(b){this.el_[a]=b}});["pause","load","play"].forEach(function(a){Q.prototype[a]=function(){return this.el_[a]()}});Z.withSourceHandlers(Q);Q.nativeSourceHandler={};Q.nativeSourceHandler.canPlayType=function(a){try{return Q.TEST_VID.canPlayType(a)}catch(b){return""}};Q.nativeSourceHandler.canHandleSource=function(a,b){return a.type?Q.nativeSourceHandler.canPlayType(a.type):
a.src?(a=jg(a.src),Q.nativeSourceHandler.canPlayType(`video/${a}`)):""};Q.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)};Q.nativeSourceHandler.dispose=function(){};Q.registerSourceHandler(Q.nativeSourceHandler);Z.registerTech("Html5",Q);const pk="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),Dg={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Eg="tiny xsmall small medium large xlarge huge".split(" "),
xe={};Eg.forEach(a=>{const b="x"===a.charAt(0)?`x-${a.substring(1)}`:a;xe[a]=`vjs-layout-${b}`});const ap={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};class pa extends M{constructor(a,b,c){a.id=a.id||b.id||`vjs_video_${vb++}`;b=Object.assign(pa.getTagSettings(a),b);b.initChildren=!1;b.createEl=!1;b.evented=!1;b.reportTouchActivity=!1;if(!b.language){const e=a.closest("[lang]");e&&(b.language=e.getAttribute("lang"))}super(null,b,c);this.boundDocumentFullscreenChange_=
e=>this.documentFullscreenChange_(e);this.boundFullWindowOnEscKey_=e=>this.fullWindowOnEscKey(e);this.boundUpdateStyleEl_=e=>this.updateStyleEl_(e);this.boundApplyInitTime_=e=>this.applyInitTime_(e);this.boundUpdateCurrentBreakpoint_=e=>this.updateCurrentBreakpoint_(e);this.boundHandleTechClick_=e=>this.handleTechClick_(e);this.boundHandleTechDoubleClick_=e=>this.handleTechDoubleClick_(e);this.boundHandleTechTouchStart_=e=>this.handleTechTouchStart_(e);this.boundHandleTechTouchMove_=e=>this.handleTechTouchMove_(e);
this.boundHandleTechTouchEnd_=e=>this.handleTechTouchEnd_(e);this.boundHandleTechTap_=e=>this.handleTechTap_(e);this.isFullscreen_=!1;this.log=lj(this.id_);this.fsApi_=Vd;this.isPosterFromTech_=!1;this.queuedCallbacks_=[];this.audioPosterMode_=this.audioOnlyMode_=this.debugEnabled_=this.userActive_=this.hasStarted_=this.isReady_=!1;this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]};if(!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");
this.tagAttributes=(this.tag=a)&&Ub(a);this.language(this.options_.language);if(b.languages){const e={};Object.getOwnPropertyNames(b.languages).forEach(function(g){e[g.toLowerCase()]=b.languages[g]});this.languages_=e}else this.languages_=pa.prototype.options_.languages;this.resetCache_();this.poster_=b.poster||"";this.controls_=!!b.controls;a.controls=!1;a.removeAttribute("controls");this.changingSrc_=!1;this.playCallbacks_=[];this.playTerminatedQueue_=[];a.hasAttribute("autoplay")?this.autoplay(!0):
this.autoplay(this.options_.autoplay);b.plugins&&Object.keys(b.plugins).forEach(e=>{if("function"!==typeof this[e])throw Error(`plugin "${e}" does not exist`);});this.scrubbing_=!1;this.el_=this.createEl();Af(this,{eventBusKey:"el_"});this.fsApi_.requestFullscreen&&($a(P,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_));if(this.fluid_)this.on(["playerreset","resize"],this.boundUpdateStyleEl_);c=ma(this.options_);
b.plugins&&Object.keys(b.plugins).forEach(e=>{this[e](b.plugins[e])});b.debug&&this.debug(!0);this.options_.playerOptions=c;this.middleware_=[];this.playbackRates(b.playbackRates);b.experimentalSvgIcons&&(c=(new D.DOMParser).parseFromString('\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"\x3e\n  \x3cdefs\x3e\n    \x3csymbol viewBox\x3d"0 0 16 16" id\x3d"vjs-icon-play"\x3e\n      \x3cpath d\x3d"M2 1v14l12-7z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-pause"\x3e\n       \x3cpath d\x3d"M10 4H5v16h5V4zm9 0h-5v16h5V4z"/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-audio"\x3e\n      \x3cg\x3e\x3crect fill\x3d\'none\' height\x3d\'24\' width\x3d\'24\'/\x3e\x3c/g\x3e\x3cg\x3e\x3cpath d\x3d\'M12,3c-4.97,0-9,4.03-9,9v7c0,1.1,0.9,2,2,2h4v-8H5v-1c0-3.87,3.13-7,7-7s7,3.13,7,7v1h-4v8h4c1.1,0,2-0.9,2-2v-7 C21,7.03,16.97,3,12,3z\'/\x3e\x3c/g\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 576 512" id\x3d"vjs-icon-captions"\x3e\n      \x3cpath d\x3d\'M0 96C0 60.7 28.7 32 64 32H512c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM200 208c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48s21.5-48 48-48zm144 48c0-26.5 21.5-48 48-48c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-subtitles"\x3e\n      \x3cpath d\x3d\'M0 0h24v24H0z\' fill\x3d\'none\'/\x3e\x3cpath d\x3d\'M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 448 512" id\x3d"vjs-icon-fullscreen-enter"\x3e\n      \x3cpath d\x3d\'M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-fullscreen-exit"\x3e\n      \x3cpath d\x3d"M16,9h5a1,1,0,0,0,0-2H17V3a1,1,0,0,0-2,0V8A1,1,0,0,0,16,9ZM8,15H3a1,1,0,0,0,0,2H7v4a1,1,0,0,0,2,0V16A1,1,0,0,0,8,15ZM8,2A1,1,0,0,0,7,3V7H3A1,1,0,0,0,3,9H8A1,1,0,0,0,9,8V3A1,1,0,0,0,8,2ZM21,15H16a1,1,0,0,0-1,1v5a1,1,0,0,0,2,0V17h4a1,1,0,0,0,0-2Z"/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 512 512" id\x3d"vjs-icon-play-circle"\x3e\n      \x3cpath d\x3d\'M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c7.6-4.2 16.8-4.1 24.3 .5l144 88c7.1 4.4 11.5 12.1 11.5 20.5s-4.4 16.1-11.5 20.5l-144 88c-7.4 4.5-16.7 4.7-24.3 .5s-12.3-12.2-12.3-20.9V168c0-8.7 4.7-16.7 12.3-20.9z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-volume-mute"\x3e\n      \x3cpath d\x3d\'M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-volume-low"\x3e\n      \x3cpath d\x3d"M0 0h24v24H0z" fill\x3d"none"/\x3e\x3cpath d\x3d"M7 9v6h4l5 5V4l-5 5H7z"/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-volume-medium"\x3e\n      \x3cpath d\x3d"M0 0h24v24H0z" fill\x3d"none"/\x3e\x3cpath d\x3d"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-volume-high"\x3e\n      \x3cpath d\x3d"M0 0h24v24H0z" fill\x3d"none"/\x3e\x3cpath d\x3d"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 512 512" id\x3d"vjs-icon-spinner"\x3e\n      \x3cpath d\x3d\'M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-hd"\x3e\n      \x3cpath d\x3d\'M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-chapters"\x3e\n      \x3cpath d\x3d\'M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-downloading"\x3e\n      \x3cpath d\x3d\'M18.32,4.26C16.84,3.05,15.01,2.25,13,2.05v2.02c1.46,0.18,2.79,0.76,3.9,1.62L18.32,4.26z M19.93,11h2.02 c-0.2-2.01-1-3.84-2.21-5.32L18.31,7.1C19.17,8.21,19.75,9.54,19.93,11z M18.31,16.9l1.43,1.43c1.21-1.48,2.01-3.32,2.21-5.32 h-2.02C19.75,14.46,19.17,15.79,18.31,16.9z M13,19.93v2.02c2.01-0.2,3.84-1,5.32-2.21l-1.43-1.43 C15.79,19.17,14.46,19.75,13,19.93z M15.59,10.59L13,13.17V7h-2v6.17l-2.59-2.59L7,12l5,5l5-5L15.59,10.59z M11,19.93v2.02 c-5.05-0.5-9-4.76-9-9.95s3.95-9.45,9-9.95v2.02C7.05,4.56,4,7.92,4,12S7.05,19.44,11,19.93z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-file-download"\x3e\n      \x3cpath d\x3d\'M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M17,11l-1.41-1.41L13,12.17V4h-2v8.17L8.41,9.59L7,11l5,5 L17,11z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-file-download-done"\x3e\n      \x3cpolygon points\x3d\'20.13,5.41 18.72,4 9.53,13.19 5.28,8.95 3.87,10.36 9.53,16.02\'/\x3e\x3crect height\x3d\'2\' width\x3d\'14\' x\x3d\'5\' y\x3d\'18\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-file-download-off"\x3e\n      \x3cpath d\x3d\'M18,15.17V15h2v2.17L18,15.17z M15.41,12.59L17,11l-1.41-1.41L14,11.17L15.41,12.59z M13,10.17V4h-2v4.17L13,10.17z M21.19,21.19l-1.78-1.78L2.81,2.81L1.39,4.22l6.19,6.19L7,11l5,5l0.59-0.59L15.17,18H6v-3H4v3c0,1.1,0.9,2,2,2h11.17l2.61,2.61 L21.19,21.19z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-share"\x3e\n      \x3cpath d\x3d\'M0 0h24v24H0z\' fill\x3d\'none\'/\x3e\x3cpath d\x3d\'M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-cog"\x3e\n      \x3cpath d\x3d\'M0,0h24v24H0V0z\' fill\x3d\'none\'/\x3e\x3cpath d\x3d\'M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 448 512" id\x3d"vjs-icon-square"\x3e\n      \x3cpath d\x3d\'M384 80c8.8 0 16 7.2 16 16V416c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16H384zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 512 512" id\x3d"vjs-icon-circle"\x3e\n      \x3cpath d\x3d\'M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-circle-outline"\x3e\n      \x3cpath d\x3d\'M12,2C6.47,2,2,6.47,2,12c0,5.53,4.47,10,10,10s10-4.47,10-10C22,6.47,17.53,2,12,2z M12,20c-4.42,0-8-3.58-8-8 c0-4.42,3.58-8,8-8s8,3.58,8,8C20,16.42,16.42,20,12,20z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-circle-inner-circle"\x3e\n      \x3cpath d\x3d\'M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-cancel"\x3e\n      \x3cpath d\x3d\'M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-repeat"\x3e\n      \x3cpath d\x3d\'M0 0h24v24H0z\' fill\x3d\'none\'/\x3e\x3cpath d\x3d\'M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-replay"\x3e\n      \x3cpath d\x3d\'M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-replay-5"\x3e\n      \x3cpath d\x3d\'m17.68852 98-8.69633 8.69633 8.69633 8.69634 2.48665-2.48434-4.31928-4.31928h1.3011c4.93015 0 9.07149 1.72189 12.42399 5.16511 3.35251 3.44322 5.02876 7.63753 5.02876 12.58345h3.54972c0-2.95809-.55264-5.7293-1.657-8.3127-1.10435-2.5834-2.62238-4.84095-4.555-6.77357-1.93262-1.93262-4.19017-3.45065-6.77357-4.55501-2.5834-1.10435-5.35462-1.65699-8.31271-1.65699H15.5l4.61508-4.61509zm-8.07929 21.65879v13.86144h11.35631v5.00796H9.60923V143h12.699c.83466 0 1.55075-.29818 2.14693-.89436.59619-.59619.89436-1.30996.89436-2.14462v-7.78117c0-.83466-.29817-1.55075-.89436-2.14693-.59618-.59618-1.31227-.89436-2.14693-.89436h-8.22719v-5.09578h11.26848v-4.38399z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-replay-10"\x3e\n      \x3cpath d\x3d\'M42.314792 125.62978c0-4.99676-1.693476-9.23445-5.080438-12.71305-3.386962-3.47861-7.570851-5.21791-12.551676-5.21791h-1.314946l4.363203 4.3632-2.510335 2.51034-8.786174-8.78619L25.2206 97l2.450567 2.45057-4.662053 4.66205h1.374714c2.988489 0 5.787713.55785 8.397671 1.67355 2.609949 1.11571 4.891163 2.64981 6.843654 4.60229 1.952481 1.95248 3.486576 4.2337 4.602275 6.84365 1.115709 2.60995 1.673563 5.40917 1.673563 8.39767zM8.1829433 142v-19.65677H3.17603v-4.5433h9.642939V142Zm13.6299297 0c-1.155923 0-2.126398-.39251-2.911424-1.17755-.778861-.77885-1.168286-1.74624-1.168286-2.90215v-16.04066c0-1.15593.392524-2.1264 1.17755-2.91144.77886-.77885 1.746237-1.16827 2.90216-1.16827h7.695814c1.155914 0 2.126388.39251 2.911425 1.17755.77885.77886 1.168275 1.74623 1.168275 2.90216v16.04066c0 1.15591-.392513 2.12639-1.177549 2.91142-.778851.77885-1.746237 1.16828-2.902151 1.16828Zm.556316-4.63603h6.583172v-15.02074h-6.583172z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-replay-30"\x3e\n      \x3cpath d\x3d\'m26.046875 97-8.732422 8.73242 8.732422 8.73242 2.496094-2.49414-4.335938-4.33789h1.306641c4.950749 0 9.108097 1.72991 12.474609 5.1875 3.366504 3.4576 5.050781 7.66818 5.050781 12.63477h3.564454c0-2.97045-.555098-5.75152-1.664063-8.3457-1.108965-2.59419-2.633522-4.86205-4.574219-6.80274-1.940688-1.94069-4.208545-3.46525-6.802734-4.57422-2.59419-1.10897-5.375262-1.66406-8.345703-1.66406h-1.367188l4.634766-4.63477zM2.5546875 117.53125v4.6875H12.851562v5.25H5.8730469v4.6875h6.9785151v5.15625H2.5546875V142H13.361328c1.06088 0 1.950319-.39495 2.667969-1.18555.71765-.79059 1.076172-1.7727 1.076172-2.9414v-16.2168c0-1.1687-.358522-2.14886-1.076172-2.93945-.71765-.79059-1.607089-1.18555-2.667969-1.18555zm22.4824215.14063c-1.148936 0-2.110612.38991-2.884765 1.16406-.780292.78029-1.171875 1.74365-1.171875 2.89258v15.94336c0 1.14892.387966 2.1106 1.162109 2.88476.780302.78029 1.745595 1.17188 2.894531 1.17188h7.648438c1.148936 0 2.110613-.38795 2.884765-1.16211.780294-.78029 1.169922-1.74561 1.169922-2.89453v-15.94336c0-1.14893-.386013-2.11061-1.160156-2.88477-.780293-.78029-1.745595-1.17187-2.894531-1.17187zm.552735 4.51757h6.544922v14.92969h-6.544922z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-forward-5"\x3e\n      \x3cpath d\x3d\'m29.50843 97-2.43193 2.42962 4.6253 4.6253h-1.3642c-2.96464 0-5.74198.55386-8.3311 1.66066-2.58912 1.1068-4.85167 2.62819-6.78857 4.56508-1.93689 1.9369-3.45828 4.19945-4.56508 6.78857-1.1068 2.58911-1.66066 5.36646-1.66066 8.3311h3.55757c0-4.95687 1.67996-9.16047 5.03989-12.6113 3.35992-3.45084 7.51042-5.17654 12.45149-5.17654h1.30398l-4.32653 4.32883 2.48984 2.48984 8.71558-8.71558zm-9.78332 21.60945v13.8898h11.38144v5.01905H19.72511V142h12.72711c.83651 0 1.55186-.29884 2.14937-.89634.5975-.59751.89634-1.31286.89634-2.14936v-7.7984c0-.83651-.29884-1.55418-.89634-2.15168-.59751-.5975-1.31286-.89634-2.14937-.89634h-8.2454v-5.10706h11.29111v-4.39137z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-forward-10"\x3e\n      \x3cpath d\x3d\'m23.118923 97-2.385761 2.38349 4.537491 4.53749h-1.338298c-2.908354 0-5.632974.54335-8.172936 1.62913-2.539963 1.08579-4.759558 2.57829-6.659682 4.47842-1.900125 1.90012-3.39263 4.11972-4.478415 6.65968-1.085785 2.53996-1.629134 5.26458-1.629134 8.17294h3.490028c0-4.86277 1.648071-8.98656 4.944206-12.37188 3.296134-3.38532 7.367841-5.07826 12.215097-5.07826h1.279222l-4.244383 4.24665 2.442565 2.44257 8.550114-8.55012zm-9.520322 21.44913v4.42161h4.871497V142h4.512496v-23.55087zm18.136328 0c-1.124919 0-2.06632.37811-2.824287 1.13608-.763982.76398-1.147437 1.70845-1.147437 2.83337v15.61197c0 1.12492.380382 2.06631 1.138349 2.82428.763983.76398 1.708456 1.14517 2.833375 1.14517h7.489021c1.12492 0 2.06632-.37811 2.82428-1.13608.76399-.76398 1.14517-1.70845 1.14517-2.83337v-15.61197c0-1.12492-.37811-2.06632-1.13608-2.82429-.76398-.76398-1.70845-1.14516-2.83337-1.14516zm.540773 4.42161h6.407468v14.61676h-6.407468z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-forward-30"\x3e\n      \x3cpath d\x3d\'m25.548631 97-2.436697 2.43438 4.634367 4.63436H26.37943c-2.970448 0-5.753239.55495-8.347429 1.66392-2.594191 1.10897-4.861176 2.63334-6.801867 4.57403-1.940693 1.94069-3.465063 4.20767-4.57403 6.80187-1.108967 2.59419-1.663916 5.37698-1.663916 8.34742h3.56454c0-4.96658 1.683258-9.17841 5.049766-12.63601 3.366507-3.4576 7.525145-5.18669 12.475891-5.18669h1.306534l-4.335002 4.33733 2.494714 2.49471 8.73266-8.73266zm-11.552266 20.53092v4.68774h10.296787v5.24934h-6.978237v4.68774h6.978237v5.15652H13.996365V142h10.807333c1.060879 0 1.94879-.39527 2.666443-1.18586.717653-.79059 1.076789-1.77158 1.076789-2.94028v-16.2168c0-1.1687-.359136-2.14969-1.076789-2.94028-.717653-.79059-1.605564-1.18586-2.666443-1.18586zm21.173741.16708c-1.148937 0-2.110436.38851-2.884586 1.16266-.780294.78029-1.171935 1.74493-1.171935 2.89387v15.94296c0 1.14894.388502 2.11043 1.162652 2.88458.780294.78029 1.744932 1.16962 2.893869 1.16962h7.648904c1.14894 0 2.11044-.38619 2.88459-1.16033.78029-.7803 1.16961-1.74493 1.16961-2.89387v-15.94296c0-1.14894-.38618-2.11044-1.16033-2.88459-.78029-.78029-1.74493-1.17194-2.89387-1.17194zm.552317 4.51602h6.541957v14.93115h-6.541957z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 512 512" xmlns:sketch\x3d\'http://www.bohemiancoding.com/sketch/ns\' id\x3d"vjs-icon-audio-description"\x3e\n      \x3cg id\x3d\'Page-1\' stroke\x3d\'none\' stroke-width\x3d\'1\' sketch:type\x3d\'MSPage\'\x3e\x3cg id\x3d\'AD\' sketch:type\x3d\'MSArtboardGroup\'\x3e\x3cg id\x3d\'g24\' sketch:type\x3d\'MSLayerGroup\' transform\x3d\'translate(226.904216, 162.124958)\'\x3e\x3cpath d\x3d\'M0.385466989,219.226204 L0.385466989,0.867948105 C50.7660025,-0.149278544 89.4938709,-2.16027378 118.016886,17.9940357 C145.39121,37.3362698 166.750707,74.9591545 162.906445,123.318579 C158.839382,174.474203 121.571663,217.457893 73.1311827,221.793795 C49.0460488,223.949377 1.1583283,221.793795 1.1583283,221.793795 C1.1583283,221.793795 0.318395733,220.441758 0.385466989,219.226204 M49.1404882,164.421786 C80.5703101,165.681697 102.34881,147.788744 105.636072,119.036417 C110.038491,80.5268177 84.4473371,55.4838492 47.5943801,58.2399576 L47.5943801,161.852062 C47.5585317,163.318404 48.1702678,164.071194 49.1404882,164.421786\' id\x3d\'path26\' sketch:type\x3d\'MSShapeGroup\'\x3e\x3c/path\x3e\x3c/g\x3e\x3cg id\x3d\'g28\' sketch:type\x3d\'MSLayerGroup\' transform\x3d\'translate(383.779991, 168.926023)\'\x3e\x3cpath d\x3d\'M0,212.402042 C13.3360014,216.111401 17.386874,201.342635 23.2151349,190.99422 C35.936702,168.422877 45.5086182,139.400143 45.6604922,106.220214 C45.8813648,58.6259492 27.3172746,23.7033002 10.059532,0.0383859113 L1.54919183,0.0383859113 C0.96289654,3.91152436 3.77564916,7.35260805 5.41542574,10.3142944 C18.5814362,34.0755999 30.7818519,66.8674044 30.9556975,104.507776 C31.1545985,147.683822 16.7932549,183.786198 0,212.402042\' id\x3d\'path30\' sketch:type\x3d\'MSShapeGroup\'\x3e\x3c/path\x3e\x3c/g\x3e\x3cg id\x3d\'g32\' sketch:type\x3d\'MSLayerGroup\' transform\x3d\'translate(425.153705, 168.926023)\'\x3e\x3cpath d\x3d\'M0,212.402042 C13.3360014,216.111401 17.3841758,201.340502 23.2151349,190.99422 C35.936702,168.422877 45.5066909,139.400143 45.6604922,106.220214 C45.8813648,58.6259492 27.3172746,23.7033002 10.059532,0.0383859113 L1.54919183,0.0383859113 C0.96289654,3.91152436 3.77487823,7.35346107 5.41542574,10.3142944 C18.5814362,34.0755999 30.7822374,66.8674044 30.9556975,104.507776 C31.1545985,147.683822 16.7932549,183.786198 0,212.402042\' id\x3d\'path34\' sketch:type\x3d\'MSShapeGroup\'\x3e\x3c/path\x3e\x3c/g\x3e\x3cg id\x3d\'g36\' sketch:type\x3d\'MSLayerGroup\' transform\x3d\'translate(466.260868, 168.926023)\'\x3e\x3cpath d\x3d\'M0,212.402042 C13.3360014,216.111401 17.3841758,201.340502 23.2151349,190.99422 C35.936702,168.422877 45.5066909,139.400143 45.6604922,106.220214 C45.8813648,58.6259492 27.3172746,23.7033002 10.059532,0.0383859113 L1.54919183,0.0383859113 C0.96289654,3.91152436 3.77487823,7.35303456 5.41542574,10.3142944 C18.5814362,34.0755999 30.7818519,66.8674044 30.9556975,104.507776 C31.1545985,147.683822 16.7932549,183.786198 0,212.402042\' id\x3d\'path38\' sketch:type\x3d\'MSShapeGroup\'\x3e\x3c/path\x3e\x3c/g\x3e\x3cpath d\x3d\'M4.4765625,383.005158 L72.5800993,383.005158 L91.1530552,354.521486 L155.321745,354.386058 C155.321745,354.386058 155.386889,373.799083 155.386889,383.005158 L204.142681,383.005158 L204.142681,160.308263 L145.326586,160.308263 C139.673713,169.845383 4.4765625,383.005158 4.4765625,383.005158 L4.4765625,383.005158 Z M157.144233,237.722611 L157.144233,308.881058 L116.6914,308.610203 L157.144233,237.722611 L157.144233,237.722611 Z\' id\x3d\'path22\' sketch:type\x3d\'MSShapeGroup\'\x3e\x3c/path\x3e\x3c/g\x3e\x3c/g\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-next-item"\x3e\n      \x3cpath d\x3d\'M0 0h24v24H0z\' fill\x3d\'none\'/\x3e\x3cpath d\x3d\'M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-previous-item"\x3e\n      \x3cpath d\x3d\'M0 0h24v24H0z\' fill\x3d\'none\'/\x3e\x3cpath d\x3d\'M6 6h2v12H6zm3.5 6l8.5 6V6z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-shuffle"\x3e\n      \x3cpath d\x3d\'M0 0h24v24H0z\' fill\x3d\'none\'/\x3e\x3cpath d\x3d\'M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-cast"\x3e\n      \x3cpath d\x3d\'M0 0h24v24H0z\' fill\x3d\'none\'/\x3e\x3cpath d\x3d\'M0 0h24v24H0z\' fill\x3d\'none\' opacity\x3d\'.1\'/\x3e\x3cpath d\x3d\'M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-picture-in-picture-enter"\x3e\n      \x3cpath d\x3d\'M0 0h24v24H0V0z\' fill\x3d\'none\'/\x3e\x3cpath d\x3d\'M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 22 18" id\x3d"vjs-icon-picture-in-picture-exit"\x3e\n      \x3cpath d\x3d\'M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z\'/\x3e\x3cpath fill\x3d\'none\' d\x3d\'M-1-3h24v24H-1z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 320 512" id\x3d"vjs-icon-facebook"\x3e\n      \x3cpath d\x3d\'M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 448 512" id\x3d"vjs-icon-linkedin"\x3e\n      \x3cpath d\x3d\'M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 512 512" id\x3d"vjs-icon-twitter"\x3e\n      \x3cpath d\x3d\'M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 320 512" id\x3d"vjs-icon-tumblr"\x3e\n      \x3cpath d\x3d\'M309.8 480.3c-13.6 14.5-50 31.7-97.4 31.7-120.8 0-147-88.8-147-140.6v-144H17.9c-5.5 0-10-4.5-10-10v-68c0-7.2 4.5-13.6 11.3-16 62-21.8 81.5-76 84.3-117.1.8-11 6.5-16.3 16.1-16.3h70.9c5.5 0 10 4.5 10 10v115.2h83c5.5 0 10 4.4 10 9.9v81.7c0 5.5-4.5 10-10 10h-83.4V360c0 34.2 23.7 53.6 68 35.8 4.8-1.9 9-3.2 12.7-2.2 3.5.9 5.8 3.4 7.4 7.9l22 64.3c1.8 5 3.3 10.6-.4 14.5z\'/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 496 512" id\x3d"vjs-icon-pinterest"\x3e\n      \x3cpath d\x3d\'M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z\'/\x3e\n    \x3c/symbol\x3e\n  \x3c/defs\x3e\n\x3c/svg\x3e',
"image/svg+xml"),c.querySelector("parsererror")?(ca.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null):(c=c.documentElement,c.style.display="none",this.el_.appendChild(c),this.addClass("vjs-svg-icons-enabled")));this.initChildren();this.isAudio("audio"===a.nodeName.toLowerCase());this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled");this.el_.setAttribute("role","region");this.isAudio()?this.el_.setAttribute("aria-label",
this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player"));this.isAudio()&&this.addClass("vjs-audio");md&&this.addClass("vjs-touch-enabled");Oa||this.addClass("vjs-workinghover");pa.players[this.id_]=this;this.addClass("vjs-v8");this.userActive(!0);this.reportUserActivity();this.one("play",e=>this.listenForUserActivity_(e));this.on("keydown",e=>this.handleKeyDown(e));this.on("languagechange",e=>this.handleLanguagechange(e));this.breakpoints(this.options_.breakpoints);
this.responsive(this.options_.responsive);this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode);this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose");this.off("dispose");Ka(P,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);Ka(P,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);pa.players[this.id_]=null;this.tag&&this.tag.player&&
(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Ef[this.id()]=null;Ra.names.forEach(a=>{(a=this[Ra[a].getterName]())&&a.off&&a.off()});super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let a=this.tag,b,c=this.playerElIngest_=a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player");
const e="video-js"===this.tag.tagName.toLowerCase();c?b=this.el_=a.parentNode:e||(b=this.el_=super.createEl("div"));const g=Ub(a);if(e){b=this.el_=a;for(a=this.tag=P.createElement("video");b.children.length;)a.appendChild(b.firstChild);dd(b,"video-js")||ac(b,"video-js");b.appendChild(a);c=this.playerElIngest_=b;Object.keys(b).forEach(u=>{try{a[u]=b[u]}catch(x){}})}a.setAttribute("tabindex","-1");g.tabindex="-1";Ab&&ne&&(a.setAttribute("role","application"),g.role="application");a.removeAttribute("width");
a.removeAttribute("height");"width"in g&&delete g.width;"height"in g&&delete g.height;Object.getOwnPropertyNames(g).forEach(function(u){e&&"class"===u||b.setAttribute(u,g[u]);e&&a.setAttribute(u,g[u])});a.playerId=a.id;a.id+="_html5_api";a.className="vjs-tech";a.player=b.player=this;this.addClass("vjs-paused");if(!0!==D.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=sj("vjs-styles-dimensions");var m=Vb(".vjs-styles-defaults"),p=Vb("head");p.insertBefore(this.styleEl_,m?m.nextSibling:p.firstChild)}this.fluid_=
this.fill_=!1;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);m=a.getElementsByTagName("a");for(p=0;p<m.length;p++){const u=m.item(p);ac(u,"vjs-hidden");u.setAttribute("hidden","hidden")}a.initNetworkState_=a.networkState;a.parentNode&&!c&&a.parentNode.insertBefore(b,a);uf(a,b);this.children_.unshift(a);this.el_.setAttribute("lang",
this.language_);this.el_.setAttribute("translate","no");return this.el_=b}crossOrigin(a){if("undefined"===typeof a)return this.techGet_("crossOrigin");null!==a&&"anonymous"!==a&&"use-credentials"!==a?ca.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${a}"`):(this.techCall_("setCrossOrigin",a),this.posterImage&&this.posterImage.crossOrigin(a))}width(a){return this.dimension("width",a)}height(a){return this.dimension("height",a)}dimension(a,b){const c=a+"_";if(void 0===b)return this[c]||
0;if(""===b||"auto"===b)this[c]=void 0,this.updateStyleEl_();else{var e=parseFloat(b);isNaN(e)?ca.error(`Improper value "${b}" supplied for for ${a}`):(this[c]=e,this.updateStyleEl_())}}fluid(a){if(void 0===a)return!!this.fluid_;this.fluid_=!!a;Ib(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_);a?(this.addClass("vjs-fluid"),this.fill(!1),oo(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid");this.updateStyleEl_()}fill(a){if(void 0===
a)return!!this.fill_;this.fill_=!!a;a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()}updateStyleEl_(){if(!0===D.VIDEOJS_NO_DYNAMIC_STYLE){var a="number"===typeof this.width_?this.width_:this.options_.width,b="number"===typeof this.height_?
this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(0<=a&&(c.width=a),0<=b&&(c.height=b))}else{a=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var e=a[1]/a[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/e:this.videoWidth()||300;b=void 0!==this.height_?this.height_:a*e;c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(c);
tj(this.styleEl_,`\n      .${c} {\n        width: ${a}px;\n        height: ${b}px;\n      }\n\n      .${c}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*e}%;\n      }\n    `)}}loadTech_(a,b){this.tech_&&this.unloadTech_();const c=va(a),e=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==c&&this.tag&&(Z.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=c;this.isReady_=!1;let g=this.autoplay();if("string"===typeof this.autoplay()||!0===this.autoplay()&&
this.options_.normalizeAutoplay)g=!1;const m={source:b,autoplay:g,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${e}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,
enableSourceset:this.options_.enableSourceset};Ra.names.forEach(p=>{p=Ra[p];m[p.getterName]=this[p.privateName]});Object.assign(m,this.options_[c]);Object.assign(m,this.options_[e]);Object.assign(m,this.options_[a.toLowerCase()]);this.tag&&(m.tag=this.tag);b&&b.src===this.cache_.src&&0<this.cache_.currentTime&&(m.startTime=this.cache_.currentTime);a=Z.getTech(a);if(!a)throw Error(`No Tech named '${c}' exists! '${c}' should be registered using videojs.registerTech()'`);this.tech_=new a(m);this.tech_.ready(na(this,
this.handleTechReady_),!0);yj.jsonToTextTracks(this.textTracksJson_||[],this.tech_);pk.forEach(p=>{this.on(this.tech_,p,u=>this[`handleTech${va(p)}_`](u))});Object.keys(Dg).forEach(p=>{this.on(this.tech_,p,u=>{if(0===this.tech_.playbackRate()&&this.tech_.seeking())this.queuedCallbacks_.push({callback:this[`handleTech${Dg[p]}_`].bind(this),event:u});else this[`handleTech${Dg[p]}_`](u)})});this.on(this.tech_,"loadstart",p=>this.handleTechLoadStart_(p));this.on(this.tech_,"sourceset",p=>this.handleTechSourceset_(p));
this.on(this.tech_,"waiting",p=>this.handleTechWaiting_(p));this.on(this.tech_,"ended",p=>this.handleTechEnded_(p));this.on(this.tech_,"seeking",p=>this.handleTechSeeking_(p));this.on(this.tech_,"play",p=>this.handleTechPlay_(p));this.on(this.tech_,"pause",p=>this.handleTechPause_(p));this.on(this.tech_,"durationchange",p=>this.handleTechDurationChange_(p));this.on(this.tech_,"fullscreenchange",(p,u)=>this.handleTechFullscreenChange_(p,u));this.on(this.tech_,"fullscreenerror",(p,u)=>this.handleTechFullscreenError_(p,
u));this.on(this.tech_,"enterpictureinpicture",p=>this.handleTechEnterPictureInPicture_(p));this.on(this.tech_,"leavepictureinpicture",p=>this.handleTechLeavePictureInPicture_(p));this.on(this.tech_,"error",p=>this.handleTechError_(p));this.on(this.tech_,"posterchange",p=>this.handleTechPosterChange_(p));this.on(this.tech_,"textdata",p=>this.handleTechTextData_(p));this.on(this.tech_,"ratechange",p=>this.handleTechRateChange_(p));this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_);this.usingNativeControls(this.techGet_("controls"));
this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===c&&this.tag||uf(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)}unloadTech_(){Ra.names.forEach(a=>{a=Ra[a];this[a.privateName]=this[a.getterName]()});this.textTracksJson_=yj.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1}tech(a){void 0===
a&&ca.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n");return this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_();this.on(this.tech_,"click",this.boundHandleTechClick_);this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_);this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_);this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_);this.on(this.tech_,
"touchend",this.boundHandleTechTouchEnd_);this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_);this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_);this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_);this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_);this.off(this.tech_,"click",this.boundHandleTechClick_);this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady();
this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()&&this.hasStarted(!1);this.trigger("loadstart");this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(a){if(this.tech_&&"string"===typeof a){var b=()=>{const e=this.muted();this.muted(!0);
const g=()=>{this.muted(e)};this.playTerminatedQueue_.push(g);const m=this.play();if(gd(m))return m.catch(p=>{g();throw Error(`Rejection at manualAutoplay. Restoring muted value. ${p?p:""}`);})};if("any"!==a||this.muted())var c="muted"!==a||this.muted()?this.play():b();else c=this.play(),gd(c)&&(c=c.catch(b));if(gd(c))return c.then(()=>{this.trigger({type:"autoplay-success",autoplay:a})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:a})})}}updateSourceCaches_(a=""){let b=a;var c="";"string"!==
typeof b&&(b=a.src,c=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];b&&!c&&(c=Bo(this,b));this.cache_.source=ma({},a,{src:b,type:c});a=this.cache_.sources.filter(m=>m.src&&m.src===b);c=[];const e=this.$$("source"),g=[];for(let m=0;m<e.length;m++){const p=Ub(e[m]);c.push(p);p.src&&p.src===b&&g.push(p.src)}g.length&&!a.length?this.cache_.sources=c:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=b}handleTechSourceset_(a){if(!this.changingSrc_){let b=
g=>this.updateSourceCaches_(g);const c=this.currentSource().src,e=a.src;c&&!/^blob:/.test(c)&&/^blob:/.test(e)&&(!this.lastSource_||this.lastSource_.tech!==e&&this.lastSource_.player!==c)&&(b=()=>{});b(e);a.src||this.tech_.any(["sourceset","loadstart"],g=>{"sourceset"!==g.type&&(g=this.techGet_("currentSrc"),this.lastSource_.tech=g,this.updateSourceCaches_(g))})}this.lastSource_={player:this.currentSource().src,tech:a.src};this.trigger({src:a.src,type:"sourceset"})}hasStarted(a){if(void 0===a)return this.hasStarted_;
a!==this.hasStarted_&&((this.hasStarted_=a)?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")}handleTechRateChange_(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(a=>a.callback(a.event)),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting");
this.trigger("waiting");const a=this.currentTime(),b=()=>{a!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",b))};this.on("timeupdate",b)}handleTechCanPlay_(){this.removeClass("vjs-waiting");this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting");this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking");this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking",
"vjs-ended");this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended");this.removeClass("vjs-waiting");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(a){!this.controls_||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&
!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.click?this.options_.userActions.click.call(this,a):this.paused()?xb(this.play()):this.pause())}handleTechDoubleClick_(a){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),b=>b.contains(a.target))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||
(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(a){a.cancelable&&a.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?
this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(a){a=a.target.player;if(!a||a===this){a=this.el();var b=P[this.fsApi_.fullscreenElement]===a;!b&&a.matches&&(b=a.matches(":"+this.fsApi_.fullscreen));this.isFullscreen(b)}}handleTechFullscreenChange_(a,b){b&&(b.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(b.isFullscreen))}handleTechFullscreenError_(a,
b){this.trigger("fullscreenerror",b)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(a){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(a){this.isInPictureInPicture(!1)}handleTechError_(){const a=this.tech_.error();this.error(a)}handleTechTextData_(){let a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",a)}getCache(){return this.cache_}resetCache_(){this.cache_=
{currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(a,b){this.ready(function(){if(a in zo)return this.tech_[a](this.middleware_.reduce(Df(a),b));if(a in Gj)return ti(this.middleware_,this.tech_,a,b);try{if(this.tech_)this.tech_[a](b)}catch(c){throw ca(c),c;}},!0)}techGet_(a){if(this.tech_&&this.tech_.isReady_){if(a in yo){var b=this.tech_;
return this.middleware_.reduceRight(Df(a),b[a]())}if(a in Gj)return ti(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(c){if(void 0===this.tech_[a])throw ca(`Video.js: ${a} method not defined for ${this.techName_} playback technology.`,c),c;if("TypeError"===c.name)throw ca(`Video.js: ${a} unavailable on ${this.techName_} playback technology element.`,c),this.tech_.isReady_=!1,c;ca(c);throw c;}}}play(){return new Promise(a=>{this.play_(a)})}play_(a=xb){this.playCallbacks_.push(a);var b=
!(this.changingSrc_||!this.src()&&!this.currentSrc());a=!(!qe&&!Oa);this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&b?(b=this.techGet_("play"),a&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===b?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(b)):(this.waitToPlay_=c=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!b&&a&&this.load())}runPlayTerminatedQueue_(){const a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=
[];a.forEach(function(b){b()})}runPlayCallbacks_(a){const b=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];b.forEach(function(c){c(a)})}pause(){this.techCall_("pause")}paused(){return!1===this.techGet_("paused")?!1:!0}played(){return this.techGet_("played")||wb(0,0)}scrubbing(a){if("undefined"===typeof a)return this.scrubbing_;this.scrubbing_=!!a;this.techCall_("setScrubbing",this.scrubbing_);a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(a){if(void 0===
a)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;0>a&&(a=0);this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),this.cache_.initTime=0,isFinite(a)&&(this.cache_.currentTime=Number(a))):(this.cache_.initTime=a,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(a){if(void 0===a)return void 0!==this.cache_.duration?
this.cache_.duration:NaN;a=parseFloat(a);0>a&&(a=Infinity);a!==this.cache_.duration&&(this.cache_.duration=a,Infinity===a?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let a=this.techGet_("buffered");a&&a.length||(a=wb(0,0));return a}bufferedPercent(){return si(this.buffered(),this.duration())}bufferedEnd(){var a=
this.buffered();const b=this.duration();a=a.end(a.length-1);a>b&&(a=b);return a}volume(a){if(void 0!==a)a=Math.max(0,Math.min(1,a)),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a}muted(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1}defaultMuted(a){void 0!==a&&this.techCall_("setDefaultMuted",a);return this.techGet_("defaultMuted")||!1}lastVolume_(a){if(void 0!==a&&0!==
a)this.cache_.lastVolume=a;else return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(a){if(void 0!==a){const b=this.isFullscreen_;this.isFullscreen_=!!a;this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange");this.toggleFullscreenClass_()}else return this.isFullscreen_}requestFullscreen(a){this.isInPictureInPicture()&&this.exitPictureInPicture();const b=this;return new Promise((c,e)=>{function g(){b.off("fullscreenerror",
p);b.off("fullscreenchange",m)}function m(){g();c()}function p(x,y){g();e(y)}b.one("fullscreenchange",m);b.one("fullscreenerror",p);const u=b.requestFullscreenHelper_(a);u&&(u.then(g,g),u.then(c,e))})}requestFullscreenHelper_(a){let b;this.fsApi_.prefixed||(b=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==a&&(b=a));if(this.fsApi_.requestFullscreen)return(a=this.el_[this.fsApi_.requestFullscreen](b))&&a.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),a;this.tech_.supportsFullScreen()&&
!0===!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const a=this;return new Promise((b,c)=>{function e(){a.off("fullscreenerror",m);a.off("fullscreenchange",g)}function g(){e();b()}function m(u,x){e();c(x)}a.one("fullscreenchange",g);a.one("fullscreenerror",m);const p=a.exitFullscreenHelper_();p&&(p.then(e,e),p.then(b,c))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const a=P[this.fsApi_.exitFullscreen]();a&&xb(a.then(()=>this.isFullscreen(!1)));
return a}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0);this.isFullWindow=!0;this.docOrigOverflow=P.documentElement.style.overflow;$a(P,"keydown",this.boundFullWindowOnEscKey_);P.documentElement.style.overflow="hidden";ac(P.body,"vjs-full-window");this.trigger("enterFullWindow")}fullWindowOnEscKey(a){Y.isEventKey(a,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():
this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1);this.isFullWindow=!1;Ka(P,"keydown",this.boundFullWindowOnEscKey_);P.documentElement.style.overflow=this.docOrigOverflow;Ud(P.body,"vjs-full-window");this.trigger("exitFullWindow")}disablePictureInPicture(a){if(void 0===a)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",a);this.options_.disablePictureInPicture=a;this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(a){if(void 0!==
a)this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&D.documentPictureInPicture){const a=P.createElement(this.el().tagName);a.classList=this.el().classList;a.classList.add("vjs-pip-container");this.posterImage&&a.appendChild(this.posterImage.el().cloneNode(!0));this.titleBar&&a.appendChild(this.titleBar.el().cloneNode(!0));a.appendChild(aa("p",{className:"vjs-pip-text"},
{},this.localize("Playing in picture-in-picture")));return D.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(b=>{ki(b);this.el_.parentNode.insertBefore(a,this.el_);b.document.body.appendChild(this.el_);b.document.body.classList.add("vjs-pip-window");this.player_.isInPictureInPicture(!0);this.player_.trigger("enterpictureinpicture");b.addEventListener("pagehide",c=>{c=c.target.querySelector(".video-js");a.parentNode.replaceChild(c,a);this.player_.isInPictureInPicture(!1);
this.player_.trigger("leavepictureinpicture")});return b})}return"pictureInPictureEnabled"in P&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(D.documentPictureInPicture&&D.documentPictureInPicture.window)return D.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in P)return P.exitPictureInPicture()}handleKeyDown(a){const {userActions:b}=this.options_;if(b&&b.hotkeys){{var c=
this.el_.ownerDocument.activeElement;const g=c.tagName.toLowerCase();if(c.isContentEditable)c=!0;else{var e="button checkbox hidden radio reset submit".split(" ");c="input"===g?-1===e.indexOf(c.type):-1!==["textarea"].indexOf(g)}}c||("function"===typeof b.hotkeys?b.hotkeys.call(this,a):this.handleHotkeys(a))}}handleHotkeys(a){const {fullscreenKey:b=g=>Y.isEventKey(g,"f"),muteKey:c=g=>Y.isEventKey(g,"m"),playPauseKey:e=g=>Y.isEventKey(g,"k")||Y.isEventKey(g,"Space")}=this.options_.userActions?this.options_.userActions.hotkeys:
{};if(b.call(this,a)){a.preventDefault();a.stopPropagation();const g=M.getComponent("FullscreenToggle");!1!==P[this.fsApi_.fullscreenEnabled]&&g.prototype.handleClick.call(this,a)}else c.call(this,a)?(a.preventDefault(),a.stopPropagation(),M.getComponent("MuteToggle").prototype.handleClick.call(this,a)):e.call(this,a)&&(a.preventDefault(),a.stopPropagation(),M.getComponent("PlayToggle").prototype.handleClick.call(this,a))}canPlayType(a){for(let c=0,e=this.options_.techOrder;c<e.length;c++){var b=
e[c];let g=Z.getTech(b);g||(g=M.getComponent(b));if(!g)ca.error(`The "${b}" tech is undefined. Skipped browser support check for that tech.`);else if(g.isSupported()&&(b=g.canPlayType(a)))return b}return""}selectSource(a){const b=this.options_.techOrder.map(m=>[m,Z.getTech(m)]).filter(([m,p])=>{if(p)return p.isSupported();ca.error(`The "${m}" tech is undefined. Skipped browser support check for that tech.`);return!1}),c=function(m,p,u){let x;m.some(y=>p.some(B=>{if(x=u(y,B))return!0}));return x},
e=m=>(p,u)=>m(u,p),g=([m,p],u)=>{if(p.canPlaySource(u,this.options_[m.toLowerCase()]))return{source:u,tech:m}};return(this.options_.sourceOrder?c(a,b,e(g)):c(b,a,g))||!1}handleSrc_(a,b){if("undefined"===typeof a)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const c=Hj(a);if(c.length){if(this.changingSrc_=!0,b||(this.cache_.sources=c),this.updateSourceCaches_(c[0]),Km(this,c[0],(e,g)=>{this.middleware_=g;b||(this.cache_.sources=c);this.updateSourceCaches_(e);if(this.src_(e)){if(1<
c.length)return this.handleSrc_(c.slice(1));this.changingSrc_=!1;this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);this.triggerReady()}else Lm(g,this.tech_)}),1<c.length){const e=()=>{this.error(null);this.handleSrc_(c.slice(1),!0)},g=()=>{this.off("error",e)};this.one("error",e);this.one("playing",g);this.resetRetryOnError_=()=>{this.off("error",e);this.off("playing",g)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},
0)}src(a){return this.handleSrc_(a,!1)}src_(a){const b=this.selectSource([a]);if(!b)return!0;if(!xj(b.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(b.tech,b.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src);this.changingSrc_=!1},!0);return!1}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){if(this.paused())this.doReset_();
else{const a=this.play();xb(a.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text");this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();Ib(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const {currentTimeDisplay:a,durationDisplay:b,progressControl:c,remainingTimeDisplay:e}=
this.controlBar||{},{seekBar:g}=c||{};a&&a.updateContent();b&&b.updateContent();e&&e.updateContent();g&&(g.update(),g.loadProgressBar&&g.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1);this.trigger("volumechange")}currentSources(){const a=this.currentSource(),b=[];0!==Object.keys(a).length&&b.push(a);return this.cache_.sources||b}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&
this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(a){if(void 0!==a)this.techCall_("setPreload",a),this.options_.preload=a;else return this.techGet_("preload")}autoplay(a){if(void 0===a)return this.options_.autoplay||!1;let b;"string"===typeof a&&/(any|play|muted)/.test(a)||!0===a&&this.options_.normalizeAutoplay?(this.options_.autoplay=a,this.manualAutoplay_("string"===typeof a?a:"play"),b=!1):this.options_.autoplay=a?!0:!1;b="undefined"===
typeof b?this.options_.autoplay:b;this.tech_&&this.techCall_("setAutoplay",b)}playsinline(a){void 0!==a&&(this.techCall_("setPlaysinline",a),this.options_.playsinline=a);return this.techGet_("playsinline")}loop(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=a;else return this.techGet_("loop")}poster(a){if(void 0===a)return this.poster_;a||(a="");a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||
this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||
this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(a){if(void 0===a)return!!this.usingNativeControls_;a=!!a;this.usingNativeControls_!==a&&((this.usingNativeControls_=a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(a){if(void 0===
a)return this.error_||null;Wb("beforeerror").forEach(b=>{b=b(this,a);ub(b)&&!Array.isArray(b)||"string"===typeof b||"number"===typeof b||null===b?a=b:this.log.error("please return a value that MediaError expects in beforeerror hooks")});if(this.options_.suppressNotSupportedError&&a&&4===a.code){const b=function(){this.error(a)};this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],b);this.one("loadstart",function(){this.off(["click","touchstart"],b)})}else null===a?(this.error_=
null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new Qa(a),this.addClass("vjs-error"),ca.error(`(CODE:${this.error_.code} ${Qa.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Wb("error").forEach(b=>b(this,this.error_)))}reportUserActivity(a){this.userActivity_=!0}userActive(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),
this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(b){b.stopPropagation();b.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}}listenForUserActivity_(){let a,b,c;const e=na(this,this.reportUserActivity);var g=function(p){e();this.clearInterval(a)};this.on("mousedown",function(){e();this.clearInterval(a);a=this.setInterval(e,250)});this.on("mousemove",
function(p){if(p.screenX!==b||p.screenY!==c)b=p.screenX,c=p.screenY,e()});this.on("mouseup",g);this.on("mouseleave",g);!(g=this.getChild("controlBar"))||Oa||zb||(g.on("mouseenter",function(p){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout);this.player().options_.inactivityTimeout=0}),g.on("mouseleave",function(p){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",e);this.on("keyup",
e);let m;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(m);var p=this.options_.inactivityTimeout;0>=p||(m=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},p))}},250)}playbackRate(a){if(void 0!==a)this.techCall_("setPlaybackRate",a);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",
a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const a=this.children(),b=this.getChild("ControlBar"),c=b&&b.currentHeight();a.forEach(e=>{e!==b&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),this.audioOnlyCache_.hiddenChildren.push(e))});this.audioOnlyCache_.playerHeight=this.currentHeight();this.height(c);this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode");
this.audioOnlyCache_.hiddenChildren.forEach(a=>a.show());this.height(this.audioOnlyCache_.playerHeight);this.trigger("audioonlymodechange")}audioOnlyMode(a){return"boolean"!==typeof a||a===this.audioOnlyMode_?this.audioOnlyMode_:(this.audioOnlyMode_=a)?(a=[],this.isInPictureInPicture()&&a.push(this.exitPictureInPicture()),this.isFullscreen()&&a.push(this.exitFullscreen()),this.audioPosterMode()&&a.push(this.audioPosterMode(!1)),Promise.all(a).then(()=>this.enableAudioOnlyUI_())):Promise.resolve().then(()=>
this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide();this.addClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show();this.removeClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange")}audioPosterMode(a){return"boolean"!==typeof a||a===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=a)?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>
{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()})}addTextTrack(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)}addRemoteTextTrack(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)}removeRemoteTextTrack(a={}){let {track:b}=a;b||(b=a);if(this.tech_)return this.tech_.removeRemoteTextTrack(b)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||
0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(a){if(void 0===a)return this.language_;this.language_!==String(a).toLowerCase()&&(this.language_=String(a).toLowerCase(),Ib(this)&&this.trigger("languagechange"))}languages(){return ma(pa.prototype.options_.languages,this.languages_)}toJSON(){const a=ma(this.options_),b=a.tracks;a.tracks=[];for(let c=0;c<b.length;c++){let e=b[c];e=ma(e);e.player=void 0;a.tracks[c]=e}return a}createModal(a,b){b=b||{};b.content=
a||"";const c=new Kc(this,b);this.addChild(c);c.on("dispose",()=>{this.removeChild(c)});c.open();return c}updateCurrentBreakpoint_(){if(this.responsive()){var a=this.currentBreakpoint(),b=this.currentWidth();for(let c=0;c<Eg.length;c++){const e=Eg[c];if(b<=this.breakpoints_[e]){if(a===e)break;a&&this.removeClass(xe[a]);this.addClass(xe[e]);this.breakpoint_=e;break}}}}removeCurrentBreakpoint_(){const a=this.currentBreakpointClass();this.breakpoint_="";a&&this.removeClass(a)}breakpoints(a){if(void 0===
a)return Object.assign(this.breakpoints_);this.breakpoint_="";this.breakpoints_=Object.assign({},ap,a);this.updateCurrentBreakpoint_();return Object.assign(this.breakpoints_)}responsive(a){if(void 0===a)return this.responsive_;a=!!a;if(a!==this.responsive_)return(this.responsive_=a)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return xe[this.breakpoint_]||
""}loadMedia(a,b){if(a&&"object"===typeof a){var c=this.crossOrigin();this.reset();this.cache_.media=ma(a);var {artist:e,artwork:g,description:m,poster:p,src:u,textTracks:x,title:y}=this.cache_.media;!g&&p&&(this.cache_.media.artwork=[{src:p,type:ae(p)}]);c&&this.crossOrigin(c);u&&this.src(u);p&&this.poster(p);Array.isArray(x)&&x.forEach(B=>this.addRemoteTextTrack(B,!1));this.titleBar&&this.titleBar.update({title:y,description:m||e||""});this.ready(b)}}getMedia(){if(!this.cache_.media){const b=this.poster();
var a=this.currentSources();const c=Array.prototype.map.call(this.remoteTextTracks(),e=>({kind:e.kind,label:e.label,language:e.language,src:e.src}));a={src:a,textTracks:c};b&&(a.poster=b,a.artwork=[{src:a.poster,type:ae(a.poster)}]);return a}return ma(this.cache_.media)}static getTagSettings(a){const b={sources:[],tracks:[]};var c=Ub(a),e=c["data-setup"];dd(a,"vjs-fill")&&(c.fill=!0);dd(a,"vjs-fluid")&&(c.fluid=!0);if(null!==e){const [g,m]=Pm(e||"{}");g&&ca.error(g);Object.assign(c,m)}Object.assign(b,
c);if(a.hasChildNodes()){a=a.childNodes;for(let g=0,m=a.length;g<m;g++)c=a[g],e=c.nodeName.toLowerCase(),"source"===e?b.sources.push(Ub(c)):"track"===e&&b.tracks.push(Ub(c))}return b}debug(a){if(void 0===a)return this.debugEnabled_;a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(a){if(void 0===a)return this.cache_.playbackRates;
Array.isArray(a)&&a.every(b=>"number"===typeof b)&&(this.cache_.playbackRates=a,this.trigger("playbackrateschange"))}}Ra.names.forEach(function(a){const b=Ra[a];pa.prototype[b.getterName]=function(){if(this.tech_)return this.tech_[b.getterName]();this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});pa.prototype.crossorigin=pa.prototype.crossOrigin;pa.players={};const sd=D.navigator;pa.prototype.options_={techOrder:Z.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2E3,
playbackRates:[],liveui:!1,children:"mediaLoader posterImage titleBar textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:sd&&(sd.languages&&sd.languages[0]||sd.userLanguage||sd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking",
"seekable","networkState","readyState"].forEach(function(a){pa.prototype[a]=function(){return this.techGet_(a)}});pk.forEach(function(a){pa.prototype[`handleTech${va(a)}_`]=function(){return this.trigger(a)}});M.registerComponent("Player",pa);const Lb={},ye=a=>Lb.hasOwnProperty(a)?Lb[a]:void 0,ze=(a,b,c)=>{c=(c?"before":"")+"pluginsetup";a.trigger(c,b);a.trigger(c+":"+b.name,b)},bp=function(a,b){const c=function(){ze(this,{name:a,plugin:b,instance:null},!0);const e=b.apply(this,arguments);this.activePlugins_=
this.activePlugins_||{};this.activePlugins_[a]=!0;ze(this,{name:a,plugin:b,instance:e});return e};Object.keys(b).forEach(function(e){c[e]=b[e]});return c},qk=(a,b)=>{b.prototype.name=a;return function(...c){ze(this,{name:a,plugin:b,instance:null},!0);const e=new b(...[this,...c]);this[a]=()=>e;ze(this,e.getEventHash());return e}};class db{constructor(a){if(this.constructor===db)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=a;this.log||(this.log=this.player.log.createLogger(this.name));
Af(this);delete this.trigger;ni(this,this.constructor.defaultState);var b=this.name;a.activePlugins_=a.activePlugins_||{};a.activePlugins_[b]=!0;this.dispose=this.dispose.bind(this);a.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(a={}){a.name=this.name;a.plugin=this.constructor;a.instance=this;return a}trigger(a,b={}){return Dc(this.eventBusEl_,a,this.getEventHash(b))}handleStateChanged(a){}dispose(){const {name:a,player:b}=this;this.trigger("dispose");this.off();
b.off("dispose",this.dispose);b.activePlugins_[a]=!1;this.player=this.state=null;b[a]=qk(a,Lb[a])}static isBasic(a){a="string"===typeof a?ye(a):a;return"function"===typeof a&&!db.prototype.isPrototypeOf(a.prototype)}static registerPlugin(a,b){if("string"!==typeof a)throw Error(`Illegal plugin name, "${a}", must be a string, was ${typeof a}.`);if(Lb.hasOwnProperty(a))ca.warn(`A plugin named "${a}" already exists. You may want to avoid re-registering plugins!`);else if(pa.prototype.hasOwnProperty(a))throw Error(`Illegal plugin name, "${a}", cannot share a name with an existing player method!`);
if("function"!==typeof b)throw Error(`Illegal plugin for "${a}", must be a function, was ${typeof b}.`);Lb[a]=b;"plugin"!==a&&(db.isBasic(b)?pa.prototype[a]=bp(a,b):pa.prototype[a]=qk(a,b));return b}static deregisterPlugin(a){if("plugin"===a)throw Error("Cannot de-register base plugin.");Lb.hasOwnProperty(a)&&(delete Lb[a],delete pa.prototype[a])}static getPlugins(a=Object.keys(Lb)){let b;a.forEach(c=>{const e=ye(c);e&&(b=b||{},b[c]=e)});return b}static getPluginVersion(a){return(a=ye(a))&&a.VERSION||
""}}db.getPlugin=ye;db.BASE_PLUGIN_NAME="plugin";db.registerPlugin("plugin",db);pa.prototype.usingPlugin=function(a){return!!this.activePlugins_&&!0===this.activePlugins_[a]};pa.prototype.hasPlugin=function(a){return!!Lb.hasOwnProperty(a)};const wi=a=>0===a.indexOf("#")?a.slice(1):a;H.hooks_=Kb;H.hooks=Wb;H.hook=function(a,b){Wb(a,b)};H.hookOnce=function(a,b){Wb(a,[].concat(b).map(c=>{const e=(...g)=>{jj(a,e);return c(...g)};return e}))};H.removeHook=jj;if(!0!==D.VIDEOJS_NO_DYNAMIC_STYLE&&zc()){let a=
Vb(".vjs-styles-defaults");if(!a){a=sj("vjs-styles-defaults");const b=Vb("head");b&&b.insertBefore(a,b.firstChild);tj(a,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}vf(1,H);H.VERSION="8.5.2";H.options=pa.prototype.options_;H.getPlayers=()=>pa.players;H.getPlayer=a=>{const b=pa.players;if("string"===typeof a){a=wi(a);const c=b[a];if(c)return c;a=Vb("#"+a)}if(Ac(a)){const {player:c,
playerId:e}=a;if(c||b[e])return c||b[e]}};H.getAllPlayers=()=>Object.keys(pa.players).map(a=>pa.players[a]).filter(Boolean);H.players=pa.players;H.getComponent=M.getComponent;H.registerComponent=(a,b)=>{Z.isTech(b)&&ca.warn(`The ${a} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`);return M.registerComponent.call(M,a,b)};H.getTech=Z.getTech;H.registerTech=Z.registerTech;H.use=function(a,b){dc[a]=dc[a]||[];dc[a].push(b)};Object.defineProperty(H,
"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(H.middleware,"TERMINATOR",{value:$d,writeable:!1,enumerable:!0});H.browser=lo;H.obj=ko;H.mergeOptions=mb(9,"videojs.mergeOptions","videojs.obj.merge",ma);H.defineLazyProperty=mb(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Td);H.bind=mb(9,"videojs.bind","native Function.prototype.bind",na);H.registerPlugin=db.registerPlugin;H.deregisterPlugin=db.deregisterPlugin;H.plugin=(a,b)=>{ca.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");
return db.registerPlugin(a,b)};H.getPlugins=db.getPlugins;H.getPlugin=db.getPlugin;H.getPluginVersion=db.getPluginVersion;H.addLanguage=function(a,b){a=(""+a).toLowerCase();H.options.languages=ma(H.options.languages,{[a]:b});return H.options.languages[a]};H.log=ca;H.createLogger=lj;H.time=qo;H.createTimeRange=mb(9,"videojs.createTimeRange","videojs.time.createTimeRanges",wb);H.createTimeRanges=mb(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",wb);H.formatTime=mb(9,"videojs.formatTime",
"videojs.time.formatTime",bc);H.setFormatTime=mb(9,"videojs.setFormatTime","videojs.time.setFormatTime",pi);H.resetFormatTime=mb(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",qi);H.parseUrl=mb(9,"videojs.parseUrl","videojs.url.parseUrl",ig);H.isCrossOrigin=mb(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",ue);H.EventTarget=jb;H.any=zf;H.on=$a;H.one=Zd;H.off=Ka;H.trigger=Dc;H.xhr=Ci;H.TextTrack=pd;H.AudioTrack=Ej;H.VideoTrack=Fj;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(a=>
{H[a]=function(){ca.warn(`videojs.${a}() is deprecated; use videojs.dom.${a}() instead`);return rj[a].apply(null,arguments)}});H.computedStyle=mb(9,"videojs.computedStyle","videojs.dom.computedStyle",Cc);H.dom=rj;H.fn=no;H.num=Jo;H.str=po;H.url=xo;class cp{constructor(a){let b=this;b.id=a.id;b.label=b.id;b.width=a.width;b.height=a.height;b.bitrate=a.bandwidth;b.frameRate=a.frameRate;b.enabled_=a.enabled;Object.defineProperty(b,"enabled",{get(){return b.enabled_()},set(c){b.enabled_(c)}});return b}}
class Ae extends H.EventTarget{constructor(){super();let a=this;a.levels_=[];a.selectedIndex_=-1;Object.defineProperty(a,"selectedIndex",{get(){return a.selectedIndex_}});Object.defineProperty(a,"length",{get(){return a.levels_.length}});a[Symbol.iterator]=()=>a.levels_.values();return a}addQualityLevel(a){let b=this.getQualityLevelById(a.id);if(b)return b;const c=this.levels_.length;b=new cp(a);""+c in this||Object.defineProperty(this,c,{get(){return this.levels_[c]}});this.levels_.push(b);this.trigger({qualityLevel:b,
type:"addqualitylevel"});return b}removeQualityLevel(a){let b=null;for(let c=0,e=this.length;c<e;c++)if(this[c]===a){b=this.levels_.splice(c,1)[0];this.selectedIndex_===c?this.selectedIndex_=-1:this.selectedIndex_>c&&this.selectedIndex_--;break}b&&this.trigger({qualityLevel:a,type:"removequalitylevel"});return b}getQualityLevelById(a){for(let b=0,c=this.length;b<c;b++){const e=this[b];if(e.id===a)return e}return null}dispose(){this.selectedIndex_=-1;this.levels_.length=0}}Ae.prototype.allowedEvents_=
{change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const a in Ae.prototype.allowedEvents_)Ae.prototype["on"+a]=null;const dp=function(a,b){const c=a.qualityLevels,e=new Ae,g=function(){e.dispose();a.qualityLevels=c;a.off("dispose",g)};a.on("dispose",g);a.qualityLevels=()=>e;a.qualityLevels.VERSION="4.0.0";return e},rk=function(a){return dp(this,H.obj.merge({},a))};H.registerPlugin("qualityLevels",rk);rk.VERSION="4.0.0";const nb=function(a,b){if(/^[a-z]+:/i.test(b))return b;
/^data:/.test(a)&&(a=D.location&&D.location.href||"");var c="function"===typeof D.URL,e=/^\/\//.test(a),g=!D.location&&!/\/\//i.test(a);c?a=new D.URL(a,D.location||"http://example.com"):/\/\//i.test(a)||(a=ee.buildAbsoluteURL(D.location&&D.location.href||"",a));return c?(a=new URL(b,a),g?a.href.slice(18):e?a.href.slice(a.protocol.length):a.href):ee.buildAbsoluteURL(a,b)},Be=(a,b)=>b&&b.responseURL&&a!==b.responseURL?b.responseURL:a,ob=a=>H.log.debug?H.log.debug.bind(H,"VHS:",`${a} >`):function(){},
Yb=1/30,Cb=3*Yb,sk=function(a,b){const c=[];let e;if(a&&a.length)for(e=0;e<a.length;e++)b(a.start(e),a.end(e))&&c.push([a.start(e),a.end(e)]);return La(c)},Pc=function(a,b){return sk(a,function(c,e){return c-Cb<=b&&e+Cb>=b})},Ce=function(a,b){return sk(a,function(c){return c-Yb>=b})},ep=function(a,b){let c=null,e=null,g=0;const m=[],p=[];if(!(a&&a.length&&b&&b.length))return La();let u=a.length;for(;u--;)m.push({time:a.start(u),type:"start"}),m.push({time:a.end(u),type:"end"});for(u=b.length;u--;)m.push({time:b.start(u),
type:"start"}),m.push({time:b.end(u),type:"end"});m.sort(function(x,y){return x.time-y.time});for(u=0;u<m.length;u++)"start"===m[u].type?(g++,2===g&&(c=m[u].time)):"end"===m[u].type&&(g--,1===g&&(e=m[u].time)),null!==c&&null!==e&&(p.push([c,e]),e=c=null);return La(p)},tk=a=>{const b=[];if(!a||!a.length)return"";for(let c=0;c<a.length;c++)b.push(a.start(c)+" \x3d\x3e "+a.end(c));return b.join(", ")},fp=function(a,b,c=1){return((a.length?a.end(a.length-1):0)-b)/c},kc=a=>{const b=[];for(let c=0;c<a.length;c++)b.push({start:a.start(c),
end:a.end(c)});return b},gp=function(a,b){if(a===b)return!1;if(!a&&b||!b&&a||a.length!==b.length)return!0;for(let c=0;c<a.length;c++)if(a.start(c)!==b.start(c)||a.end(c)!==b.end(c))return!0;return!1},uk=function(a){if(a&&a.length&&a.end)return a.end(a.length-1)},Fg=function(a,b){let c=0;if(!a||!a.length)return c;for(let e=0;e<a.length;e++){const g=a.start(e),m=a.end(e);b>m||(c=b>g&&b<=m?c+(m-b):c+(m-g))}return c},Gg=(a,b)=>{if(!b.preload)return b.duration;let c=0;(b.parts||[]).forEach(function(e){c+=
e.duration});(b.preloadHints||[]).forEach(function(e){"PART"===e.type&&(c+=a.partTargetDuration)});return c},Hg=a=>(a.segments||[]).reduce((b,c,e)=>{c.parts?c.parts.forEach(function(g,m){b.push({duration:g.duration,segmentIndex:e,partIndex:m,part:g,segment:c})}):b.push({duration:c.duration,segmentIndex:e,partIndex:null,segment:c,part:null});return b},[]),vk=a=>(a=a.segments&&a.segments.length&&a.segments[a.segments.length-1])&&a.parts||[],wk=({preloadSegment:a})=>{if(a){var {parts:b,preloadHints:c}=
a;a=(c||[]).reduce((e,g)=>e+("PART"===g.type?1:0),0);return a+=b&&b.length?b.length:0}},xk=(a,b)=>b.endList?0:a&&a.suggestedPresentationDelay?a.suggestedPresentationDelay:(a=0<vk(b).length)&&b.serverControl&&b.serverControl.partHoldBack?b.serverControl.partHoldBack:a&&b.partTargetDuration?3*b.partTargetDuration:b.serverControl&&b.serverControl.holdBack?b.serverControl.holdBack:b.targetDuration?3*b.targetDuration:0,hp=function(a,b){let c=0;b-=a.mediaSequence;let e=a.segments[b];if(e){if("undefined"!==
typeof e.start)return{result:e.start,precise:!0};if("undefined"!==typeof e.end)return{result:e.end-e.duration,precise:!0}}for(;b--;){e=a.segments[b];if("undefined"!==typeof e.end)return{result:c+e.end,precise:!0};c+=Gg(a,e);if("undefined"!==typeof e.start)return{result:c+e.start,precise:!0}}return{result:c,precise:!1}},yk=function(a,b,c){"undefined"===typeof b&&(b=a.mediaSequence+a.segments.length);if(b<a.mediaSequence)return 0;const e=hp(a,b);if(e.precise)return e.result;a:{let g=0,m=b-a.mediaSequence;
for(;m<a.segments.length;m++){b=a.segments[m];if("undefined"!==typeof b.start){a={result:b.start-g,precise:!0};break a}g+=Gg(a,b);if("undefined"!==typeof b.end){a={result:b.end-g,precise:!0};break a}}a={result:-1,precise:!1}}return a.precise?a.result:e.result+c},zk=function(a,b,c){if(!a)return 0;"number"!==typeof c&&(c=0);if("undefined"===typeof b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return D.Infinity}return yk(a,b,c)},td=function({defaultDuration:a,durationList:b,startIndex:c,
endIndex:e}){let g=0;c>e&&([c,e]=[e,c]);if(0>c){for(;c<Math.min(0,e);c++)g+=a;c=0}for(a=c;a<e;a++)g+=b[a].duration;return g},Ak=function(a,b,c,e){if(!a||!a.segments)return null;if(a.endList)return zk(a);if(null===b)return null;b=yk(a,a.mediaSequence+a.segments.length,b||0);c&&(e="number"===typeof e?e:xk(null,a),b-=e);return Math.max(0,b)},Bk=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},Ig=function(a){return a.excludeUntil&&Infinity===a.excludeUntil},De=function(a){const b=Bk(a);return!a.disabled&&
!b},Ck=function(a,b){return b.attributes&&b.attributes[a]},Jg=(a,b)=>{if(1===a.playlists.length)return!0;const c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(e=>De(e)?(e.attributes.BANDWIDTH||0)<c:!1).length},Kg=(a,b)=>!a&&!b||!a&&b||a&&!b?!1:a===b||a.id&&b.id&&a.id===b.id||a.resolvedUri&&b.resolvedUri&&a.resolvedUri===b.resolvedUri||a.uri&&b.uri&&a.uri===b.uri?!0:!1,Dk=function(a,b){a=a&&a.mediaGroups&&a.mediaGroups.AUDIO||{};let c=!1;for(const e in a){for(const g in a[e])if(c=
b(a[e][g]))break;if(c)break}return!!c},ud=a=>{if(!a||!a.playlists||!a.playlists.length)return Dk(a,b=>b.playlists&&b.playlists.length||b.uri);for(let b=0;b<a.playlists.length;b++){const c=a.playlists[b],e=c.attributes&&c.attributes.CODECS;if(!(e&&e.split(",").every(g=>Hi(g))||Dk(a,g=>Kg(c,g))))return!1}return!0};var Xa={liveEdgeDelay:xk,duration:zk,seekable:function(a,b,c){const e=b||0;a=Ak(a,b,!0,c);return null===a?La():La(e,a)},getMediaInfoForTime:function({playlist:a,currentTime:b,startingSegmentIndex:c,
startingPartIndex:e,startTime:g,exactManifestTimings:m}){let p=b-g;const u=Hg(a);var x=0;for(let y=0;y<u.length;y++){const B=u[y];if(c===B.segmentIndex&&("number"!==typeof e||"number"!==typeof B.partIndex||e===B.partIndex)){x=y;break}}if(0>p){if(0<x)for(c=x-1;0<=c;c--){e=u[c];p+=e.duration;if(m){if(0>p)continue}else if(0>=p+Yb)continue;return{partIndex:e.partIndex,segmentIndex:e.segmentIndex,startTime:g-td({defaultDuration:a.targetDuration,durationList:u,startIndex:x,endIndex:c})}}return{partIndex:u[0]&&
u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:b}}if(0>x){for(;0>x;x++)if(p-=a.targetDuration,0>p)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:b};x=0}for(c=x;c<u.length;c++){e=u[c];p-=e.duration;if(m){if(0<p)continue}else if(0<=p-Yb)continue;return{partIndex:e.partIndex,segmentIndex:e.segmentIndex,startTime:g+td({defaultDuration:a.targetDuration,durationList:u,startIndex:x,endIndex:c})}}return{segmentIndex:u[u.length-1].segmentIndex,
partIndex:u[u.length-1].partIndex,startTime:b}},isEnabled:De,isDisabled:function(a){return a.disabled},isExcluded:Bk,isIncompatible:Ig,playlistEnd:Ak,isAes:function(a){for(let b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},hasAttribute:Ck,estimateSegmentRequestTime:function(a,b,c,e=0){return Ck("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*e)/b:NaN},isLowestEnabledRendition:Jg,isAudioOnly:ud,playlistMatch:Kg,segmentDurationWithParts:Gg};const {log:Ek}=H,ip=(a,b,c)=>`placeholder-uri-${a}-${b}-${c}`,
jp=({onwarn:a,oninfo:b,manifestString:c,customTagParsers:e=[],customTagMappers:g=[],llhls:m})=>{const p=new Zm;if(a)p.on("warn",a);if(b)p.on("info",b);e.forEach(x=>p.addParser(x));g.forEach(x=>p.addTagMapper(x));p.push(c);p.end();const u=p.manifest;m||("preloadSegment skip serverControl renditionReports partInf partTargetDuration".split(" ").forEach(function(x){u.hasOwnProperty(x)&&delete u[x]}),u.segments&&u.segments.forEach(function(x){["parts","preloadHints"].forEach(function(y){x.hasOwnProperty(y)&&
delete x[y]})}));u.targetDuration||(b=10,u.segments&&u.segments.length&&(b=u.segments.reduce((x,y)=>Math.max(x,y.duration),0)),a&&a(`manifest has no targetDuration defaulting to ${b}`),u.targetDuration=b);b=vk(u);b.length&&!u.partTargetDuration&&(b=b.reduce((x,y)=>Math.max(x,y.duration),0),a&&(a(`manifest has no partTargetDuration defaulting to ${b}`),Ek.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),
u.partTargetDuration=b);return u},Qc=(a,b)=>{a.mediaGroups&&["AUDIO","SUBTITLES"].forEach(c=>{if(a.mediaGroups[c])for(const e in a.mediaGroups[c])for(const g in a.mediaGroups[c][e])b(a.mediaGroups[c][e][g],c,e,g)})},Fk=({playlist:a,uri:b,id:c})=>{a.id=c;a.playlistErrors_=0;b&&(a.uri=b);a.attributes=a.attributes||{}},kp=a=>{let b=a.playlists.length;for(;b--;){const c=a.playlists[b];Fk({playlist:c,id:`${b}-${c.uri}`});c.resolvedUri=nb(a.uri,c.uri);a.playlists[c.id]=c;a.playlists[c.uri]=c;c.attributes.BANDWIDTH||
Ek.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},lp=a=>{Qc(a,b=>{b.uri&&(b.resolvedUri=nb(a.uri,b.uri))})},mp=(a,b)=>{a=`${0}-${b}`;const c={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:D.location.href,resolvedUri:D.location.href,playlists:[{uri:b,id:a,resolvedUri:b,attributes:{}}]};c.playlists[a]=c.playlists[0];c.playlists[b]=c.playlists[0];return c},Gk=(a,b,c=ip)=>{a.uri=b;for(b=0;b<a.playlists.length;b++)a.playlists[b].uri||(a.playlists[b].uri=
`placeholder-uri-${b}`);const e=ud(a);Qc(a,(g,m,p,u)=>{if(!g.playlists||!g.playlists.length){if(e&&"AUDIO"===m&&!g.uri)for(let x=0;x<a.playlists.length;x++){const y=a.playlists[x];if(y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===p)return}g.playlists=[Rb({},g)]}g.playlists.forEach(function(x,y){const B=c(m,p,u,x),z=`${y}-${B}`;x.uri?x.resolvedUri=x.resolvedUri||nb(a.uri,x.uri):(x.uri=0===y?B:z,x.resolvedUri=x.uri);x.id=x.id||z;x.attributes=x.attributes||{};a.playlists[x.id]=x;a.playlists[x.uri]=
x})});kp(a);lp(a)};class Hk{constructor(){this.offset_=null;this.pendingDateRanges_=new Map;this.processedDateRanges_=new Map}setOffset(a=[]){null===this.offset_&&a.length&&([a]=a,void 0!==a.programDateTime&&(this.offset_=a.programDateTime/1E3))}setPendingDateRanges(a=[]){if(a.length){var [b]=a;b=b.startDate.getTime();this.trimProcessedDateRanges_(b);this.pendingDateRanges_=a.reduce((c,e)=>{c.set(e.id,e);return c},new Map)}}processDateRange(a){this.pendingDateRanges_.delete(a.id);this.processedDateRanges_.set(a.id,
a)}getDateRangesToProcess(){if(null===this.offset_)return[];const a={},b=[];this.pendingDateRanges_.forEach((c,e)=>{this.processedDateRanges_.has(e)||(c.startTime=c.startDate.getTime()/1E3-this.offset_,c.processDateRange=()=>this.processDateRange(c),b.push(c),c.class&&(a[c.class]?(e=a[c.class].push(c),c.classListIndex=e-1):(a[c.class]=[c],c.classListIndex=0)))});for(const c of b){const e=a[c.class]||[];c.endTime=c.endDate?c.endDate.getTime()/1E3-this.offset_:c.endOnNext&&e[c.classListIndex+1]?e[c.classListIndex+
1].startTime:c.duration?c.startTime+c.duration:c.plannedDuration?c.startTime+c.plannedDuration:c.startTime}return b}trimProcessedDateRanges_(a){(new Map(this.processedDateRanges_)).forEach((b,c)=>{b.startDate.getTime()<a&&this.processedDateRanges_.delete(c)})}}const {EventTarget:np}=H,op=(a,b)=>{if(b.endList||!b.serverControl)return a;const c={};if(b.serverControl.canBlockReload){var {preloadSegment:e}=b;let g=b.mediaSequence+b.segments.length;if(e){e=e.parts||[];const m=wk(b)-1;-1<m&&m!==e.length-
1&&(c._HLS_part=m);(-1<m||e.length)&&g--}c._HLS_msn=g}b.serverControl&&b.serverControl.canSkipUntil&&(c._HLS_skip=b.serverControl.canSkipDateranges?"v2":"YES");if(Object.keys(c).length){const g=new D.URL(a);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(m){c.hasOwnProperty(m)&&g.searchParams.set(m,c[m])});a=g.toString()}return a},pp=(a,b,c)=>{a=a.slice();b=b.slice();c=c||0;const e=[];let g;for(let y=0;y<b.length;y++){var m=a[y+c],p=b[y];if(m){g=m.map||g;var u=e,x=u.push;a:{if(!m){m=p;break a}const B=
ka(m,p);m.preloadHints&&!p.preloadHints&&delete B.preloadHints;if(m.parts&&!p.parts)delete B.parts;else if(m.parts&&p.parts)for(let z=0;z<p.parts.length;z++)m.parts&&m.parts[z]&&(B.parts[z]=ka(m.parts[z],p.parts[z]));!m.skipped&&p.skipped&&(B.skipped=!1);m.preload&&!p.preload&&(B.preload=!1);m=B}x.call(u,m)}else g&&!p.map&&(p.map=g),e.push(p)}return e},Ik=(a,b)=>{!a.resolvedUri&&a.uri&&(a.resolvedUri=nb(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=nb(b,a.key.uri));a.map&&!a.map.resolvedUri&&
(a.map.resolvedUri=nb(b,a.map.uri));a.map&&a.map.key&&!a.map.key.resolvedUri&&(a.map.key.resolvedUri=nb(b,a.map.key.uri));a.parts&&a.parts.length&&a.parts.forEach(c=>{c.resolvedUri||(c.resolvedUri=nb(b,c.uri))});a.preloadHints&&a.preloadHints.length&&a.preloadHints.forEach(c=>{c.resolvedUri||(c.resolvedUri=nb(b,c.uri))})},Jk=function(a){const b=a.segments||[],c=a.preloadSegment;if(c&&c.parts&&c.parts.length){if(c.preloadHints)for(let e=0;e<c.preloadHints.length;e++)if("MAP"===c.preloadHints[e].type)return b;
c.duration=a.targetDuration;c.preload=!0;b.push(c)}return b},Kk=(a,b)=>a===b||a.segments&&b.segments&&a.segments.length===b.segments.length&&a.endList===b.endList&&a.mediaSequence===b.mediaSequence&&a.preloadSegment===b.preloadSegment,Lg=(a,b,c=Kk)=>{const e=ka(a,{});var g=e.playlists[b.id];if(!g||c(g,b))return null;b.segments=Jk(b);const m=ka(g,b);m.preloadSegment&&!b.preloadSegment&&delete m.preloadSegment;if(g.segments){if(b.skip)for(b.segments=b.segments||[],c=0;c<b.skip.skippedSegments;c++)b.segments.unshift({skipped:!0});
m.segments=pp(g.segments,b.segments,b.mediaSequence-g.mediaSequence)}m.segments.forEach(p=>{Ik(p,m.resolvedUri)});for(g=0;g<e.playlists.length;g++)e.playlists[g].id===b.id&&(e.playlists[g]=m);e.playlists[b.id]=m;e.playlists[b.uri]=m;Qc(a,(p,u,x,y)=>{if(p.playlists)for(u=0;u<p.playlists.length;u++)b.id===p.playlists[u].id&&(p.playlists[u]=m)});return e},Mg=(a,b)=>{var c=a.segments||[];const e=(c=c[c.length-1])&&c.parts&&c.parts[c.parts.length-1];c=e&&e.duration||c&&c.duration;return b&&c?1E3*c:500*
(a.partTargetDuration||a.targetDuration||10)};class Rc extends np{constructor(a,b,c={}){super();if(!a)throw Error("A non-empty playlist URL or object is required");this.logger_=ob("PlaylistLoader");const {withCredentials:e=!1}=c;this.src=a;this.vhs_=b;this.withCredentials=e;this.addDateRangesToTextTrack_=c.addDateRangesToTextTrack;this.customTagParsers=(a=b.options_)&&a.customTagParsers||[];this.customTagMappers=a&&a.customTagMappers||[];this.llhls=a&&a.llhls;this.dateRangesStorage_=new Hk;this.state=
"HAVE_NOTHING";this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this);this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_);this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){var a=this.media();a&&(this.dateRangesStorage_.setOffset(a.segments),this.dateRangesStorage_.setPendingDateRanges(a.dateRanges),a=this.dateRangesStorage_.getDateRangesToProcess(),a.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(a))}handleMediaupdatetimeout_(){if("HAVE_METADATA"===
this.state){var a=this.media(),b=nb(this.main.uri,a.uri);this.llhls&&(b=op(b,a));this.state="HAVE_CURRENT_METADATA";this.request=this.vhs_.xhr({uri:b,withCredentials:this.withCredentials},(c,e)=>{if(this.request){if(c)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}}playlistRequestError(a,b,c){const {uri:e,id:g}=b;this.request=null;c&&(this.state=c);this.error={playlist:this.main.playlists[g],
status:a.status,message:`HLS playlist request error at URL: ${e}.`,responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}parseManifest_({url:a,manifestString:b}){return jp({onwarn:({message:c})=>this.logger_(`m3u8-parser warn for ${a}: ${c}`),oninfo:({message:c})=>this.logger_(`m3u8-parser info for ${a}: ${c}`),manifestString:b,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:a,playlistObject:b,url:c,
id:e}){this.request=null;this.state="HAVE_METADATA";a=b||this.parseManifest_({url:c,manifestString:a});a.lastRequest=Date.now();Fk({playlist:a,uri:c,id:e});c=Lg(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration;this.pendingMedia_=null;c?(this.main=c,this.media_=this.main.playlists[e]):this.trigger("playlistunchanged");this.updateMediaUpdateTimeout_(Mg(this.media(),!!c));this.trigger("loadedplaylist")}dispose(){this.trigger("dispose");this.stopRequest();D.clearTimeout(this.mediaUpdateTimeout);
D.clearTimeout(this.finalRenditionTimeout);this.dateRangesStorage_=new Hk;this.off()}stopRequest(){if(this.request){const a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}media(a,b){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"===typeof a){if(!this.main.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.main.playlists[a]}D.clearTimeout(this.finalRenditionTimeout);if(b)b=(a.partTargetDuration||
a.targetDuration)/2*1E3||5E3,this.finalRenditionTimeout=D.setTimeout(this.media.bind(this,a,!1),b);else{var c=this.state;b=!this.media_||a.id!==this.media_.id;var e=this.main.playlists[a.id];if(e&&e.endList||a.endList&&a.segments.length)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,b&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===c?this.trigger("loadedmetadata"):this.trigger("mediachange"));else if(this.updateMediaUpdateTimeout_(Mg(a,
!0)),b){this.state="SWITCHING_MEDIA";if(this.request){if(a.resolvedUri===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.pendingMedia_=a;this.request=this.vhs_.xhr({uri:a.resolvedUri,withCredentials:this.withCredentials},(g,m)=>{if(this.request){a.lastRequest=Date.now();a.resolvedUri=Be(a.resolvedUri,m);if(g)return this.playlistRequestError(this.request,a,c);this.haveMetadata({playlistString:m.responseText,
url:a.uri,id:a.id});"HAVE_MAIN_MANIFEST"===c?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}}pause(){this.mediaUpdateTimeout&&(D.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);this.stopRequest();"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(a){this.mediaUpdateTimeout&&(D.clearTimeout(this.mediaUpdateTimeout),
this.mediaUpdateTimeout=null);const b=this.media();a?this.mediaUpdateTimeout=D.setTimeout(()=>{this.mediaUpdateTimeout=null;this.load()},b?(b.partTargetDuration||b.targetDuration)/2*1E3:5E3):this.started?b&&!b.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(a){this.mediaUpdateTimeout&&(D.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=D.setTimeout(()=>
{this.mediaUpdateTimeout=null;this.trigger("mediaupdatetimeout");this.updateMediaUpdateTimeout_(a)},a))}start(){this.started=!0;"object"===typeof this.src?(this.src.uri||(this.src.uri=D.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0)):this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(a,b)=>{if(this.request){this.request=null;if(a)return this.error={status:b.status,message:`HLS playlist request error at URL: ${this.src}.`,
responseText:b.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=Be(this.src,b);a=this.parseManifest_({manifestString:b.responseText,url:this.src});this.setupInitialPlaylist(a)}})}srcUri(){return"string"===typeof this.src?this.src:this.src.uri}setupInitialPlaylist(a){this.state="HAVE_MAIN_MANIFEST";if(a.playlists)this.main=a,Gk(this.main,this.srcUri()),a.playlists.forEach(c=>{c.segments=Jk(c);c.segments.forEach(e=>{Ik(e,c.resolvedUri)})}),this.trigger("loadedplaylist"),
this.request||this.media(this.main.playlists[0]);else{var b=this.srcUri()||D.location.href;this.main=mp(a,b);this.haveMetadata({playlistObject:a,url:b,id:this.main.playlists[0].id});this.trigger("loadedmetadata")}}}const {xhr:qp}=H,Ng=function(a,b,c,e){const g="arraybuffer"===a.responseType?a.response:a.responseText;!b&&g&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=g.byteLength||g.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*
8E3)));c.headers&&(a.responseHeaders=c.headers);b&&"ETIMEDOUT"===b.code&&(a.timedout=!0);b||a.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(b=Error("XHR Failed with a response of: "+(a&&(g||a.responseText))));e(b,a)},rp=(a,b)=>{if(a&&a.size){var c=b;a.forEach(e=>{c=e(c)});return c}},sp=(a,b,c,e)=>{a&&a.size&&a.forEach(g=>{g(b,c,e)})},Lk=function(){const a=function g(c,e){c=ka({timeout:45E3},c);const m=g.beforeRequest||H.Vhs.xhr.beforeRequest,p=g._requestCallbackSet||H.Vhs.xhr._requestCallbackSet||
new Set,u=g._responseCallbackSet||H.Vhs.xhr._responseCallbackSet;m&&"function"===typeof m&&(H.log.warn("beforeRequest is deprecated, use onRequest instead."),p.add(m));const x=!0===H.Vhs.xhr.original?qp:H.Vhs.xhr,y=rp(p,c);p.delete(m);const B=x(y||c,function(E,J){sp(u,B,E,J);return Ng(B,E,J,e)}),z=B.abort;B.abort=function(){B.aborted=!0;return z.apply(B,arguments)};B.uri=c.uri;B.requestTime=Date.now();return B};a.original=!0;return a},Og=function(a){const b={};if(a.byterange){var c=a.byterange;a=
c.offset;c="bigint"===typeof c.offset||"bigint"===typeof c.length?D.BigInt(c.offset)+D.BigInt(c.length)-D.BigInt(1):c.offset+c.length-1;b.Range="bytes\x3d"+a+"-"+c}return b},tp=function(a,b){a=a.toString(16);return"00".substring(0,2-a.length)+a+(b%2?" ":"")},up=function(a){return 32<=a&&126>a?String.fromCharCode(a):"."},Mk=function(a){const b={};Object.keys(a).forEach(c=>{const e=a[c];Ji(e)?b[c]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:b[c]=e});return b},Ee=function(a){const b=
a.byterange||{length:Infinity,offset:0};return[b.length,b.offset,a.resolvedUri].join()},Nk=a=>{a=Array.prototype.slice.call(a);let b="",c,e;for(let g=0;g<a.length/16;g++)c=a.slice(16*g,16*g+16).map(tp).join(""),e=a.slice(16*g,16*g+16).map(up).join(""),b+=c+" "+e+"\n";return b};var vp=Object.freeze({__proto__:null,createTransferableMessage:Mk,initSegmentId:Ee,segmentKeyId:function(a){return a.resolvedUri},hexDump:Nk,tagDump:({bytes:a})=>Nk(a),textRanges:a=>{var b="";let c;for(c=0;c<a.length;c++){var e=
a;var g=c;e=e.start(g)+"-"+e.end(g);b+=e+" "}return b}});const wp=(a,b)=>{let c;try{c=new Date(a)}catch(p){return null}if(!b||!b.segments||0===b.segments.length)return null;a=b.segments[0];if(c<new Date(a.dateTimeObject))return null;for(var e=0;e<b.segments.length-1&&!(a=b.segments[e],c<new Date(b.segments[e+1].dateTimeObject));e++);e=b.segments[b.segments.length-1];const g=e.dateTimeObject;if(e.videoTimingInfo){var m=e.videoTimingInfo;m=m.transmuxedPresentationEnd-m.transmuxedPresentationStart-m.transmuxerPrependedSeconds}else m=
e.duration+.25*e.duration;m=new Date(g.getTime()+1E3*m);if(c>m)return null;c>new Date(g)&&(a=e);return{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:Xa.duration(b,b.mediaSequence+b.segments.indexOf(a)),type:a.videoTimingInfo?"accurate":"estimate"}},xp=(a,b)=>{if(!b||!b.segments||0===b.segments.length)return null;let c=0,e;for(let g=0;g<b.segments.length&&!(e=b.segments[g],c=e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:c+e.duration,a<=c);g++);
b=b.segments[b.segments.length-1];if(b.videoTimingInfo&&b.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>c){if(a>c+.25*b.duration)return null;e=b}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:c-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}},yp=(a,b)=>{let c,e;try{c=new Date(a),e=new Date(b)}catch(g){}a=c.getTime();return(e.getTime()-a)/1E3},zp=a=>{if(!a.segments||0===a.segments.length)return!1;for(let b=0;b<a.segments.length;b++)if(!a.segments[b].dateTimeObject)return!1;
return!0},Ap=({playlist:a,time:b,callback:c})=>{if(!c)throw Error("getProgramTime: callback must be provided");if(!a||void 0===b)return c({message:"getProgramTime: playlist and time must be provided"});var e=xp(b,a);if(!e)return c({message:"valid programTime was not found"});if("estimate"===e.type)return c({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:e.estimatedStart});a={mediaSeconds:b};e=e.segment;e.dateTimeObject?(b-=e.videoTimingInfo.transmuxedPresentationStart+
e.videoTimingInfo.transmuxerPrependedSeconds,b=new Date(e.dateTimeObject.getTime()+1E3*b)):b=null;b&&(a.programDateTime=b.toISOString());return c(null,a)},Ok=({programTime:a,playlist:b,retryCount:c=2,seekTo:e,pauseAfterSeek:g=!0,tech:m,callback:p})=>{if(!p)throw Error("seekToProgramTime: callback must be provided");if("undefined"===typeof a||!b||!e)return p({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!b.endList&&!m.hasStarted_)return p({message:"player must be playing a live stream to start buffering"});
if(!zp(b))return p({message:"programDateTime tags must be provided in the manifest "+b.resolvedUri});var u=wp(a,b);if(!u)return p({message:`${a} was not found in the stream`});const x=u.segment,y=yp(x.dateTimeObject,a);if("estimate"===u.type){if(0===c)return p({message:`${a} is not buffered yet. Try again`});e(u.estimatedStart+y);m.one("seeked",()=>{Ok({programTime:a,playlist:b,retryCount:c-1,seekTo:e,pauseAfterSeek:g,tech:m,callback:p})})}else u=x.start+y,m.one("seeked",()=>p(null,m.currentTime())),
g&&m.pause(),e(u)},Pk=(a,b)=>{if(4===a.readyState)return b()},Bp=(a,b,c)=>{let e=[],g,m=!1;const p=function(y,B,z,E){B.abort();m=!0;return c(y,B,z,E)},u=function(y,B){if(!m){if(y)return p(y,B,"",e);var z=B.responseText.substring(e&&e.byteLength||0,B.responseText.length);e=gn(e,Ki(z,!0));g=g||kd(e);if(10>e.length||g&&e.length<g+2)return Pk(B,()=>p(y,B,"",e));z=Zf(e);return"ts"===z&&188>e.length||!z&&376>e.length?Pk(B,()=>p(y,B,"",e)):p(null,B,z,e)}},x=b({uri:a,beforeSend(y){y.overrideMimeType("text/plain; charset\x3dx-user-defined");
y.addEventListener("progress",function({}){return Ng(y,null,{statusCode:y.status},u)})}},function(y,B){return Ng(x,y,B,u)});return x},{EventTarget:Cp}=H,Qk=function(a,b){if(!Kk(a,b)||a.sidx&&b.sidx&&(a.sidx.offset!==b.sidx.offset||a.sidx.length!==b.sidx.length)||!a.sidx&&b.sidx||a.sidx&&!b.sidx||a.segments&&!b.segments||!a.segments&&b.segments)return!1;if(!a.segments&&!b.segments)return!0;for(let g=0;g<a.segments.length;g++){var c=a.segments[g],e=b.segments[g];if(c.uri!==e.uri)return!1;if(c.byterange||
e.byterange)if(c=c.byterange,e=e.byterange,c&&!e||!c&&e||c.offset!==e.offset||c.length!==e.length)return!1}return!0},Dp=(a,b,c,e)=>`placeholder-uri-${a}-${b}-${e.attributes.NAME||c}`,Ep=({mainXml:a,srcUrl:b,clientOffset:c,sidxMapping:e,previousManifest:g})=>{a=Yn(a,{manifestUri:b,clientOffset:c,sidxMapping:e,previousManifest:g});Gk(a,b,Dp);return a},Fp=(a,b)=>{Qc(a,(c,e,g,m)=>{m in b.mediaGroups[e][g]||delete a.mediaGroups[e][g][m]})},Gp=(a,b,c)=>{let e=!0,g=ka(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod,
timelineStarts:b.timelineStarts});for(let p=0;p<b.playlists.length;p++){var m=b.playlists[p];if(m.sidx){const u=he(m.sidx);c&&c[u]&&c[u].sidx&&Tf(m,c[u].sidx,m.sidx.resolvedUri)}if(m=Lg(g,m,Qk))g=m,e=!1}Qc(b,(p,u,x,y)=>{if(p.playlists&&p.playlists.length){const B=p.playlists[0].id,z=Lg(g,p.playlists[0],Qk);z&&(g=z,y in g.mediaGroups[u][x]||(g.mediaGroups[u][x][y]=p),g.mediaGroups[u][x][y].playlists[0]=g.playlists[B],e=!1)}});Fp(g,b);b.minimumUpdatePeriod!==a.minimumUpdatePeriod&&(e=!1);return e?null:
g},Rk=(a,b)=>{const c={};for(const e in a){const g=a[e].sidx;if(g){const m=he(g);if(!b[m])break;const p=b[m].sidxInfo;(!p.map&&!g.map||p.map&&g.map&&p.map.byterange.offset===g.map.byterange.offset&&p.map.byterange.length===g.map.byterange.length)&&p.uri===g.uri&&p.byterange.offset===g.byterange.offset&&p.byterange.length===g.byterange.length&&(c[m]=b[m])}}return c},Hp=(a,b)=>{let c=Rk(a.playlists,b);Qc(a,(e,g,m,p)=>{e.playlists&&e.playlists.length&&(c=ka(c,Rk(e.playlists,b)))});return c};class Pg extends Cp{constructor(a,
b,c={},e){super();this.mainPlaylistLoader_=e||this;e||(this.isMain_=!0);({withCredentials:e=!1}=c);this.vhs_=b;this.withCredentials=e;this.addMetadataToTextTrack=c.addMetadataToTextTrack;if(!a)throw Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()});this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)});this.state="HAVE_NOTHING";this.loadedPlaylists_={};this.logger_=ob("DashPlaylistLoader");this.isMain_?(this.mainPlaylistLoader_.srcUrl=
a,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=a}requestErrored_(a,b,c){if(!this.request)return!0;this.request=null;if(a)return this.error="object"!==typeof a||a instanceof Error?{status:b.status,message:"DASH request error at URL: "+b.uri,response:b.response,code:2}:a,c&&(this.state=c),this.trigger("error"),!0}addSidxSegments_(a,b,c){const e=a.sidx&&he(a.sidx);if(a.sidx&&e&&!this.mainPlaylistLoader_.sidxMapping_[e]){var g=Be(a.sidx.resolvedUri),m=(p,u)=>{if(!this.requestErrored_(p,
u,b)){p=this.mainPlaylistLoader_.sidxMapping_;try{var x=$n(U(u.response).subarray(8))}catch(y){this.requestErrored_(y,u,b);return}p[e]={sidxInfo:a.sidx,sidx:x};Tf(a,x,a.sidx.resolvedUri);return c(!0)}};this.request=Bp(g,this.vhs_.xhr,(p,u,x,y)=>{if(p)return m(p,u);if(!x||"mp4"!==x)return m({status:u.status,message:`Unsupported ${x||"unknown"} container type for sidx segment at URL: ${g}`,response:"",playlist:a,internal:!0,playlistExclusionDuration:Infinity,code:2},u);const {offset:B,length:z}=a.sidx.byterange;
if(y.length>=z+B)return m(p,{response:y.subarray(B,B+z),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:g,responseType:"arraybuffer",headers:Og({byterange:a.sidx.byterange})},m)})}else this.mediaRequest_=D.setTimeout(()=>c(!1),0)}dispose(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};D.clearTimeout(this.minimumUpdatePeriodTimeout_);D.clearTimeout(this.mediaRequest_);D.clearTimeout(this.mediaUpdateTimeout);this.minimumUpdatePeriodTimeout_=this.mediaRequest_=this.mediaUpdateTimeout=
null;this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null);this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}media(a){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);const b=this.state;if("string"===
typeof a){if(!this.mainPlaylistLoader_.main.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.mainPlaylistLoader_.main.playlists[a]}const c=!this.media_||a.id!==this.media_.id;c&&this.loadedPlaylists_[a.id]&&this.loadedPlaylists_[a.id].endList?(this.state="HAVE_METADATA",this.media_=a,c&&(this.trigger("mediachanging"),this.trigger("mediachange"))):c&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(a,b,e=>{this.haveMetadata({startingState:b,playlist:a})}))}haveMetadata({startingState:a,
playlist:b}){this.state="HAVE_METADATA";this.loadedPlaylists_[b.id]=b;this.mediaRequest_=null;this.refreshMedia_(b.id);"HAVE_MAIN_MANIFEST"===a?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null);this.stopRequest();D.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;this.isMain_&&(D.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),
this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null);"HAVE_NOTHING"===this.state&&(this.started=!1)}load(a){D.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;const b=this.media();a?this.mediaUpdateTimeout=D.setTimeout(()=>this.load(),b?b.targetDuration/2*1E3:5E3):this.started?b&&!b.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):
this.start()}start(){this.started=!0;this.isMain_?this.requestMain_((a,b)=>{this.haveMain_();this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])}):this.mediaRequest_=D.setTimeout(()=>this.haveMain_(),0)}requestMain_(a){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(b,c)=>{if(this.requestErrored_(b,c))"HAVE_NOTHING"===this.state&&(this.started=!1);else{var e=c.responseText!==this.mainPlaylistLoader_.mainXml_;
this.mainPlaylistLoader_.mainXml_=c.responseText;this.mainLoaded_=c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):Date.now();this.mainPlaylistLoader_.srcUrl=Be(this.mainPlaylistLoader_.srcUrl,c);if(e)this.handleMain_(),this.syncClientServerClock_(()=>a(c,e));else return a(c,e)}})}syncClientServerClock_(a){const b=Xn(bj(this.mainPlaylistLoader_.mainXml_));if(null===b)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),a();if("DIRECT"===b.method)return this.mainPlaylistLoader_.clientOffset_=
b.value-Date.now(),a();this.request=this.vhs_.xhr({uri:nb(this.mainPlaylistLoader_.srcUrl,b.value),method:b.method,withCredentials:this.withCredentials},(c,e)=>{if(this.request){if(c)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),a();c="HEAD"===b.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):this.mainLoaded_:Date.parse(e.responseText);this.mainPlaylistLoader_.clientOffset_=c-Date.now();a()}})}haveMain_(){this.state="HAVE_MAIN_MANIFEST";
this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const a=this.mainPlaylistLoader_.main;let b=Ep({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:a});a&&(b=Gp(a,b,this.mainPlaylistLoader_.sidxMapping_));this.mainPlaylistLoader_.main=b?b:a;const c=this.mainPlaylistLoader_.main.locations&&
this.mainPlaylistLoader_.main.locations[0];c&&c!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=c);(!a||b&&b.minimumUpdatePeriod!==a.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_();this.addEventStreamToMetadataTrack_(b);return!!b}updateMinimumUpdatePeriodTimeout_(){const a=this.mainPlaylistLoader_;a.createMupOnMedia_&&(a.off("loadedmetadata",a.createMupOnMedia_),a.createMupOnMedia_=null);a.minimumUpdatePeriodTimeout_&&(D.clearTimeout(a.minimumUpdatePeriodTimeout_),
a.minimumUpdatePeriodTimeout_=null);let b=a.main&&a.main.minimumUpdatePeriod;0===b&&(a.media()?b=1E3*a.media().targetDuration:(a.createMupOnMedia_=a.updateMinimumUpdatePeriodTimeout_,a.one("loadedmetadata",a.createMupOnMedia_)));"number"!==typeof b||0>=b?0>b&&this.logger_(`found invalid minimumUpdatePeriod of ${b}, not setting a timeout`):this.createMUPTimeout_(b)}createMUPTimeout_(a){const b=this.mainPlaylistLoader_;b.minimumUpdatePeriodTimeout_=D.setTimeout(()=>{b.minimumUpdatePeriodTimeout_=null;
b.trigger("minimumUpdatePeriod");b.createMUPTimeout_(a)},a)}refreshXml_(){this.requestMain_((a,b)=>{b&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=Hp(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,c=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(a){if(!a)throw Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();
const b=this.mainPlaylistLoader_.main.playlists,c=!this.media_||this.media_!==b[a];c?this.media_=b[a]:this.trigger("playlistunchanged");if(!this.mediaUpdateTimeout){const e=()=>{this.media().endList||(this.mediaUpdateTimeout=D.setTimeout(()=>{this.trigger("mediaupdatetimeout");e()},Mg(this.media(),!!c)))};e()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(a){a&&this.mainPlaylistLoader_.main.eventStream&&(a=this.mainPlaylistLoader_.main.eventStream.map(b=>({cueTime:b.start,frames:[{data:b.messageData}]})),
this.addMetadataToTextTrack("EventStream",a,this.mainPlaylistLoader_.main.duration))}}var Ga={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Sk=function(a){a.on=a.addEventListener;a.off=a.removeEventListener;return a},Ip=function(a){try{return URL.createObjectURL(new Blob([a],
{type:"application/javascript"}))}catch(b){const c=new BlobBuilder;c.append(a);return URL.createObjectURL(c.getBlob())}},Tk=function(a){return function(){const b=Ip(a),c=Sk(new Worker(b));c.objURL=b;const e=c.terminate;c.on=c.addEventListener;c.off=c.removeEventListener;c.terminate=function(){URL.revokeObjectURL(b);return e.call(this)};return c}},Uk=function(a){return`var browserWorkerPolyFill = ${Sk.toString()};\n`+"browserWorkerPolyFill(self);\n"+a},Vk=function(a){return a.toString().replace(/^function.+?{/,
"").slice(0,-1)},pq=Uk(Vk(function(){var a="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},b=function(){this.init=function(){var h={};this.on=function(l,r){h[l]||(h[l]=[]);h[l]=h[l].concat(r)};this.off=function(l,r){if(!h[l])return!1;r=h[l].indexOf(r);h[l]=h[l].slice();h[l].splice(r,1);return-1<r};this.trigger=function(l){var r,q;if(r=h[l])if(2===arguments.length){var v=r.length;for(q=0;q<v;++q)r[q].call(this,
arguments[1])}else{var w=[];q=arguments.length;for(q=1;q<arguments.length;++q)w.push(arguments[q]);v=r.length;for(q=0;q<v;++q)r[q].apply(this,w)}};this.dispose=function(){h={}}}};b.prototype.pipe=function(h){this.on("data",function(l){h.push(l)});this.on("done",function(l){h.flush(l)});this.on("partialdone",function(l){h.partialFlush(l)});this.on("endedtimeline",function(l){h.endTimeline(l)});this.on("reset",function(l){h.reset(l)});return h};b.prototype.push=function(h){this.trigger("data",h)};b.prototype.flush=
function(h){this.trigger("done",h)};b.prototype.partialFlush=function(h){this.trigger("partialdone",h)};b.prototype.endTimeline=function(h){this.trigger("endedtimeline",h)};b.prototype.reset=function(h){this.trigger("reset",h)};var c=Math.pow(2,32),e=function(h){h=new DataView(h.buffer,h.byteOffset,h.byteLength);return h.getBigUint64?(h=h.getBigUint64(0),h<Number.MAX_SAFE_INTEGER?Number(h):h):h.getUint32(0)*c+h.getUint32(4)},g,m,p,u,x,y,B,z,E,J,G,O,R,W,T,ea;(function(){var h;p={avc1:[],avcC:[],btrt:[],
dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(h in p)p.hasOwnProperty(h)&&(p[h]=[h.charCodeAt(0),h.charCodeAt(1),h.charCodeAt(2),h.charCodeAt(3)]);u=new Uint8Array([105,115,111,109]);y=new Uint8Array([97,118,99,49]);x=new Uint8Array([0,0,0,1]);
B=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);z=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);E={video:B,audio:z};O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);G=new Uint8Array([0,0,0,0,0,0,0,0]);W=R=new Uint8Array([0,0,0,0,0,0,0,0]);T=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);ea=R;J=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();
var K=function(h){var l=[],r=0,q;for(q=1;q<arguments.length;q++)l.push(arguments[q]);for(q=l.length;q--;)r+=l[q].byteLength;var v=new Uint8Array(r+8);(new DataView(v.buffer,v.byteOffset,v.byteLength)).setUint32(0,v.byteLength);v.set(h,4);q=0;for(r=8;q<l.length;q++)v.set(l[q],r),r+=l[q].byteLength;return v};var ba=function(){return K(p.dinf,K(p.dref,O))};var ta=function(h){return K(p.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,h.audioobjecttype<<3|h.samplingfrequencyindex>>>
1,h.samplingfrequencyindex<<7|h.channelcount<<3,6,1,2]))};var Ea=function(){return K(p.ftyp,u,x,u,y)};var V=function(h){return K(p.hdlr,E[h])};var Ca=function(h){var l=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,h.duration>>>24&255,h.duration>>>16&255,h.duration>>>8&255,h.duration&255,85,196,0,0]);h.samplerate&&(l[12]=h.samplerate>>>24&255,l[13]=h.samplerate>>>16&255,l[14]=h.samplerate>>>8&255,l[15]=h.samplerate&255);return K(p.mdhd,l)};var Qg=function(h){return K(p.mdia,Ca(h),V(h.type),Fe(h))};
var Ge=function(h){return K(p.mfhd,new Uint8Array([0,0,0,0,(h&4278190080)>>24,(h&16711680)>>16,(h&65280)>>8,h&255]))};var Fe=function(h){return K(p.minf,"video"===h.type?K(p.vmhd,J):K(p.smhd,G),ba(),Jp(h))};var Wk=function(h){for(var l=h.length,r=[];l--;)r[l]=Kp(h[l]);return K.apply(null,[p.moov,Lp(4294967295)].concat(r).concat(Mp(h)))};var Mp=function(h){for(var l=h.length,r=[];l--;)r[l]=Np(h[l]);return K.apply(null,[p.mvex].concat(r))};var Lp=function(h){h=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,
2,0,1,95,144,(h&4278190080)>>24,(h&16711680)>>16,(h&65280)>>8,h&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return K(p.mvhd,h)};var Op=function(h){h=h.samples||[];var l=new Uint8Array(4+h.length),r;for(r=0;r<h.length;r++){var q=h[r].flags;l[r+4]=q.dependsOn<<4|q.isDependedOn<<2|q.hasRedundancy}return K(p.sdtp,l)};var Jp=function(h){return K(p.stbl,g(h),K(p.stts,ea),K(p.stsc,
W),K(p.stsz,T),K(p.stco,R))};(function(){g=function(r){return K(p.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===r.type?h(r):l(r))};var h=function(r){var q=r.sps||[],v=r.pps||[],w=[],A=[],C;for(C=0;C<q.length;C++)w.push((q[C].byteLength&65280)>>>8),w.push(q[C].byteLength&255),w=w.concat(Array.prototype.slice.call(q[C]));for(C=0;C<v.length;C++)A.push((v[C].byteLength&65280)>>>8),A.push(v[C].byteLength&255),A=A.concat(Array.prototype.slice.call(v[C]));q=[p.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,(r.width&65280)>>8,r.width&255,(r.height&65280)>>8,r.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),K(p.avcC,new Uint8Array([1,r.profileIdc,r.profileCompatibility,r.levelIdc,255].concat([q.length],w,[v.length],A))),K(p.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];r.sarRatio&&(v=r.sarRatio[0],r=r.sarRatio[1],q.push(K(p.pasp,new Uint8Array([(v&4278190080)>>
24,(v&16711680)>>16,(v&65280)>>8,v&255,(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255]))));return K.apply(null,q)};var l=function(r){return K(p.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(r.channelcount&65280)>>8,r.channelcount&255,(r.samplesize&65280)>>8,r.samplesize&255,0,0,0,0,(r.samplerate&65280)>>8,r.samplerate&255,0,0]),ta(r))}})();var Pp=function(h){h=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(h.id&4278190080)>>24,(h.id&16711680)>>16,(h.id&65280)>>8,h.id&255,0,0,0,0,(h.duration&
4278190080)>>24,(h.duration&16711680)>>16,(h.duration&65280)>>8,h.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(h.width&65280)>>8,h.width&255,0,0,(h.height&65280)>>8,h.height&255,0,0]);return K(p.tkhd,h)};var Qp=function(h){var l=K(p.tfhd,new Uint8Array([0,0,0,58,(h.id&4278190080)>>24,(h.id&16711680)>>16,(h.id&65280)>>8,h.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var r=Math.floor(h.baseMediaDecodeTime/c);var q=Math.floor(h.baseMediaDecodeTime%
c);r=K(p.tfdt,new Uint8Array([1,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,r&255,q>>>24&255,q>>>16&255,q>>>8&255,q&255]));if("audio"===h.type)return h=m(h,92),K(p.traf,l,r,h);q=Op(h);h=m(h,q.length+92);return K(p.traf,l,r,h,q)};var Kp=function(h){h.duration=h.duration||4294967295;return K(p.trak,Pp(h),Qg(h))};var Np=function(h){var l=new Uint8Array([0,0,0,0,(h.id&4278190080)>>24,(h.id&16711680)>>16,(h.id&65280)>>8,h.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==h.type&&(l[l.length-1]=0);return K(p.trex,
l)};(function(){var h=function(q,v){var w=0,A=0,C=0,F=0;q.length&&(void 0!==q[0].duration&&(w=1),void 0!==q[0].size&&(A=2),void 0!==q[0].flags&&(C=4),void 0!==q[0].compositionTimeOffset&&(F=8));return[0,0,w|A|C|F,1,(q.length&4278190080)>>>24,(q.length&16711680)>>>16,(q.length&65280)>>>8,q.length&255,(v&4278190080)>>>24,(v&16711680)>>>16,(v&65280)>>>8,v&255]};var l=function(q,v){var w;q=q.samples||[];v+=20+16*q.length;var A=h(q,v);v=new Uint8Array(A.length+16*q.length);v.set(A);A=A.length;for(w=0;w<
q.length;w++){var C=q[w];v[A++]=(C.duration&4278190080)>>>24;v[A++]=(C.duration&16711680)>>>16;v[A++]=(C.duration&65280)>>>8;v[A++]=C.duration&255;v[A++]=(C.size&4278190080)>>>24;v[A++]=(C.size&16711680)>>>16;v[A++]=(C.size&65280)>>>8;v[A++]=C.size&255;v[A++]=C.flags.isLeading<<2|C.flags.dependsOn;v[A++]=C.flags.isDependedOn<<6|C.flags.hasRedundancy<<4|C.flags.paddingValue<<1|C.flags.isNonSyncSample;v[A++]=C.flags.degradationPriority&61440;v[A++]=C.flags.degradationPriority&15;v[A++]=(C.compositionTimeOffset&
4278190080)>>>24;v[A++]=(C.compositionTimeOffset&16711680)>>>16;v[A++]=(C.compositionTimeOffset&65280)>>>8;v[A++]=C.compositionTimeOffset&255}return K(p.trun,v)};var r=function(q,v){var w;q=q.samples||[];v+=20+8*q.length;var A=h(q,v);v=new Uint8Array(A.length+8*q.length);v.set(A);A=A.length;for(w=0;w<q.length;w++){var C=q[w];v[A++]=(C.duration&4278190080)>>>24;v[A++]=(C.duration&16711680)>>>16;v[A++]=(C.duration&65280)>>>8;v[A++]=C.duration&255;v[A++]=(C.size&4278190080)>>>24;v[A++]=(C.size&16711680)>>>
16;v[A++]=(C.size&65280)>>>8;v[A++]=C.size&255}return K(p.trun,v)};m=function(q,v){return"audio"===q.type?r(q,v):l(q,v)}})();var vd={ftyp:Ea,mdat:function(h){return K(p.mdat,h)},moof:function(h,l){for(var r=[],q=l.length;q--;)r[q]=Qp(l[q]);return K.apply(null,[p.moof,Ge(h)].concat(r))},moov:Wk,initSegment:function(h){var l=Ea();h=Wk(h);var r=new Uint8Array(l.byteLength+h.byteLength);r.set(l);r.set(h,l.byteLength);return r}},Xk=function(h,l){var r={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,
hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};r.dataOffset=l;r.compositionTimeOffset=h.pts-h.dts;r.duration=h.duration;r.size=4*h.length;r.size+=h.byteLength;h.keyFrame&&(r.flags.dependsOn=2,r.flags.isNonSyncSample=0);return r},Zb=[33,16,5,32,164,27],Rg=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ia=function(h){for(var l=[];h--;)l.push(0);return l},Rp=function(h){return Object.keys(h).reduce(function(l,r){l[r]=new Uint8Array(h[r].reduce(function(q,v){return q.concat(v)},[]));return l},
{})},Sg;var Yk=function(h){return 9E4*h};var Zk=function(h,l){return h*l};var Tg=function(h){return h/9E4};var $k=function(h,l){return h/l};var ha={ONE_SECOND_IN_TS:9E4,secondsToVideoTs:Yk,secondsToAudioTs:Zk,videoTsToSeconds:Tg,audioTsToSeconds:$k,audioTsToVideoTs:function(h,l){return Yk($k(h,l))},videoTsToAudioTs:function(h,l){return Zk(Tg(h),l)},metadataTsToSeconds:function(h,l,r){return Tg(r?h:h-l)}},Sp=ha.ONE_SECOND_IN_TS,wd={parseSei:function(h){for(var l=0,r={payloadType:-1,payloadSize:0},
q=0,v=0;l<h.byteLength&&128!==h[l];){for(;255===h[l];)q+=255,l++;for(q+=h[l++];255===h[l];)v+=255,l++;v+=h[l++];if(!r.payload&&4===q)if("GA94"===String.fromCharCode(h[l+3],h[l+4],h[l+5],h[l+6])){r.payloadType=q;r.payloadSize=v;r.payload=h.subarray(l,l+v);break}else r.payload=void 0;l+=v;v=q=0}return r},parseUserData:function(h){return 181!==h.payload[0]||49!==(h.payload[1]<<8|h.payload[2])||"GA94"!==String.fromCharCode(h.payload[3],h.payload[4],h.payload[5],h.payload[6])||3!==h.payload[7]?null:h.payload.subarray(8,
h.payload.length-1)},parseCaptionPackets:function(h,l){var r=[],q;if(!(l[0]&64))return r;var v=l[0]&31;for(q=0;q<v;q++){var w=3*q;var A={type:l[w+2]&3,pts:h};l[w+2]&4&&(A.ccData=l[w+3]<<8|l[w+4],r.push(A))}return r},discardEmulationPreventionBytes:function(h){for(var l=h.byteLength,r=[],q=1,v;q<l-2;)0===h[q]&&0===h[q+1]&&3===h[q+2]?(r.push(q+2),q+=2):q++;if(0===r.length)return h;l-=r.length;v=new Uint8Array(l);var w=0;for(q=0;q<l;w++,q++)w===r[0]&&(w++,r.shift()),v[q]=h[w];return v},USER_DATA_REGISTERED_ITU_T_T35:4},
Ya=function(h){h=h||{};Ya.prototype.init.call(this);this.parse708captions_="boolean"===typeof h.parse708captions?h.parse708captions:!0;this.captionPackets_=[];this.ccStreams_=[new sa(0,0),new sa(0,1),new sa(1,0),new sa(1,1)];this.parse708captions_&&(this.cc708Stream_=new la({captionServices:h.captionServices}));this.reset();this.ccStreams_.forEach(function(l){l.on("data",this.trigger.bind(this,"data"));l.on("partialdone",this.trigger.bind(this,"partialdone"));l.on("done",this.trigger.bind(this,"done"))},
this);this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ya.prototype=new b;Ya.prototype.push=function(h){if("sei_rbsp"===h.nalUnitType){var l=wd.parseSei(h.escapedRBSP);l.payload&&l.payloadType===wd.USER_DATA_REGISTERED_ITU_T_T35&&(l=wd.parseUserData(l))&&(h.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:h.dts===this.latestDts_&&
this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(l=wd.parseCaptionPackets(h.pts,l),this.captionPackets_=this.captionPackets_.concat(l),this.latestDts_!==h.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=h.dts))}};Ya.prototype.flushCCStreams=function(h){this.ccStreams_.forEach(function(l){return"flush"===h?l.flush():l.partialFlush()},this)};Ya.prototype.flushStream=function(h){this.captionPackets_.length&&(this.captionPackets_.forEach(function(l,
r){l.presortIndex=r}),this.captionPackets_.sort(function(l,r){return l.pts===r.pts?l.presortIndex-r.presortIndex:l.pts-r.pts}),this.captionPackets_.forEach(function(l){2>l.type?this.dispatchCea608Packet(l):this.dispatchCea708Packet(l)},this),this.captionPackets_.length=0);this.flushCCStreams(h)};Ya.prototype.flush=function(){return this.flushStream("flush")};Ya.prototype.partialFlush=function(){return this.flushStream("partialFlush")};Ya.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=
!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(h){h.reset()})};Ya.prototype.dispatchCea608Packet=function(h){this.setsTextOrXDSActive(h)?this.activeCea608Channel_[h.type]=null:this.setsChannel1Active(h)?this.activeCea608Channel_[h.type]=0:this.setsChannel2Active(h)&&(this.activeCea608Channel_[h.type]=1);null!==this.activeCea608Channel_[h.type]&&this.ccStreams_[(h.type<<1)+this.activeCea608Channel_[h.type]].push(h)};Ya.prototype.setsChannel1Active=function(h){return 4096===
(h.ccData&30720)};Ya.prototype.setsChannel2Active=function(h){return 6144===(h.ccData&30720)};Ya.prototype.setsTextOrXDSActive=function(h){return 256===(h.ccData&28928)||4138===(h.ccData&30974)||6186===(h.ccData&30974)};Ya.prototype.dispatchCea708Packet=function(h){this.parse708captions_&&this.cc708Stream_.push(h)};var Tp={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,
4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},He=function(h){return 32<=h&&127>=h||160<=h&&255>=h},Mb=function(h){this.windowNum=h;this.reset()};Mb.prototype.reset=function(){this.clearText();this.pendingNewLine=!1;this.winAttr={};this.penAttr={};this.penLoc={};this.penColor={};this.anchorPoint=this.anchorHorizontal=this.anchorVertical=this.relativePositioning=this.priority=this.columnLock=this.rowLock=this.visible=0;this.rowCount=1;this.virtualRowCount=
this.rowCount+1;this.columnCount=41;this.penStyle=this.windowStyle=0};Mb.prototype.getText=function(){return this.rows.join("\n")};Mb.prototype.clearText=function(){this.rows=[""];this.rowIdx=0};Mb.prototype.newLine=function(h){this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(h);0<this.rows.length&&(this.rows.push(""),this.rowIdx++);for(;this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--};Mb.prototype.isEmpty=function(){return 0===
this.rows.length?!0:1===this.rows.length?""===this.rows[0]:!1};Mb.prototype.addText=function(h){this.rows[this.rowIdx]+=h};Mb.prototype.backspace=function(){if(!this.isEmpty()){var h=this.rows[this.rowIdx];this.rows[this.rowIdx]=h.substr(0,h.length-1)}};var Ie=function(h,l,r){this.serviceNum=h;this.text="";this.currentWindow=new Mb(-1);this.windows=[];this.stream=r;"string"===typeof l&&this.createTextDecoder(l)};Ie.prototype.init=function(h,l){this.startPts=h;for(h=0;8>h;h++)this.windows[h]=new Mb(h),
"function"===typeof l&&(this.windows[h].beforeRowOverflow=l)};Ie.prototype.setCurrentWindow=function(h){this.currentWindow=this.windows[h]};Ie.prototype.createTextDecoder=function(h){if("undefined"===typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(h)}catch(l){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+h+" encoding. "+l})}};
var la=function(h){h=h||{};la.prototype.init.call(this);var l=this,r=h.captionServices||{},q={},v;Object.keys(r).forEach(w=>{v=r[w];/^SERVICE/.test(w)&&(q[w]=v.encoding)});this.serviceEncodings=q;this.current708Packet=null;this.services={};this.push=function(w){3===w.type?l.new708Packet():null===l.current708Packet&&l.new708Packet();l.add708Bytes(w)}};la.prototype=new b;la.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet();this.current708Packet={data:[],ptsVals:[]}};
la.prototype.add708Bytes=function(h){var l=h.ccData,r=l>>>8;l&=255;this.current708Packet.ptsVals.push(h.pts);this.current708Packet.data.push(r);this.current708Packet.data.push(l)};la.prototype.push708Packet=function(){var h=this.current708Packet,l=h.data,r=null,q=null,v=0,w=l[v++];h.seq=w>>6;for(h.sizeCode=w&63;v<l.length;v++)w=l[v++],r=w>>5,q=w&31,7===r&&0<q&&(r=w=l[v++]),this.pushServiceBlock(r,v,q),0<q&&(v+=q-1)};la.prototype.pushServiceBlock=function(h,l,r){var q=l,v=this.current708Packet.data,
w=this.services[h];for(w||(w=this.initService(h,q));q<l+r&&q<v.length;q++)h=v[q],He(h)?q=this.handleText(q,w):24===h?q=this.multiByteCharacter(q,w):16===h?q=this.extendedCommands(q,w):128<=h&&135>=h?q=this.setCurrentWindow(q,w):152<=h&&159>=h?q=this.defineWindow(q,w):136===h?q=this.clearWindows(q,w):140===h?q=this.deleteWindows(q,w):137===h?q=this.displayWindows(q,w):138===h?q=this.hideWindows(q,w):139===h?q=this.toggleWindows(q,w):151===h?q=this.setWindowAttributes(q,w):144===h?q=this.setPenAttributes(q,
w):145===h?q=this.setPenColor(q,w):146===h?q=this.setPenLocation(q,w):143===h?w=this.reset(q,w):8===h?w.currentWindow.backspace():12===h?w.currentWindow.clearText():13===h?w.currentWindow.pendingNewLine=!0:14===h?w.currentWindow.clearText():141===h&&q++};la.prototype.extendedCommands=function(h,l){var r=this.current708Packet.data[++h];He(r)&&(h=this.handleText(h,l,{isExtended:!0}));return h};la.prototype.getPts=function(h){return this.current708Packet.ptsVals[Math.floor(h/2)]};la.prototype.initService=
function(h,l){var r="SERVICE"+h,q=this,v;r in this.serviceEncodings&&(v=this.serviceEncodings[r]);this.services[h]=new Ie(h,v,q);this.services[h].init(this.getPts(l),function(w){q.flushDisplayed(w,q.services[h])});return this.services[h]};la.prototype.handleText=function(h,l,r){var q=r&&r.isExtended,v=r&&r.isMultiByte;r=this.current708Packet.data;var w=q?4096:0,A=r[h],C=r[h+1];r=l.currentWindow;l.textDecoder_&&!q?(v?(q=[A,C],h++):q=[A],l=l.textDecoder_.decode(new Uint8Array(q))):(l=w|A,q=Tp[l]||l,
l=l&4096&&l===q?"":String.fromCharCode(q));r.pendingNewLine&&!r.isEmpty()&&r.newLine(this.getPts(h));r.pendingNewLine=!1;r.addText(l);return h};la.prototype.multiByteCharacter=function(h,l){var r=this.current708Packet.data,q=r[h+2];He(r[h+1])&&He(q)&&(h=this.handleText(++h,l,{isMultiByte:!0}));return h};la.prototype.setCurrentWindow=function(h,l){l.setCurrentWindow(this.current708Packet.data[h]&7);return h};la.prototype.defineWindow=function(h,l){var r=this.current708Packet.data,q=r[h];l.setCurrentWindow(q&
7);l=l.currentWindow;q=r[++h];l.visible=(q&32)>>5;l.rowLock=(q&16)>>4;l.columnLock=(q&8)>>3;l.priority=q&7;q=r[++h];l.relativePositioning=(q&128)>>7;l.anchorVertical=q&127;q=r[++h];l.anchorHorizontal=q;q=r[++h];l.anchorPoint=(q&240)>>4;l.rowCount=q&15;q=r[++h];l.columnCount=q&63;q=r[++h];l.windowStyle=(q&56)>>3;l.penStyle=q&7;l.virtualRowCount=l.rowCount+1;return h};la.prototype.setWindowAttributes=function(h,l){var r=this.current708Packet.data,q=r[h];l=l.currentWindow.winAttr;q=r[++h];l.fillOpacity=
(q&192)>>6;l.fillRed=(q&48)>>4;l.fillGreen=(q&12)>>2;l.fillBlue=q&3;q=r[++h];l.borderType=(q&192)>>6;l.borderRed=(q&48)>>4;l.borderGreen=(q&12)>>2;l.borderBlue=q&3;q=r[++h];l.borderType+=(q&128)>>5;l.wordWrap=(q&64)>>6;l.printDirection=(q&48)>>4;l.scrollDirection=(q&12)>>2;l.justify=q&3;q=r[++h];l.effectSpeed=(q&240)>>4;l.effectDirection=(q&12)>>2;l.displayEffect=q&3;return h};la.prototype.flushDisplayed=function(h,l){for(var r=[],q=0;8>q;q++)l.windows[q].visible&&!l.windows[q].isEmpty()&&r.push(l.windows[q].getText());
l.endPts=h;l.text=r.join("\n\n");this.pushCaption(l);l.startPts=h};la.prototype.pushCaption=function(h){""!==h.text&&(this.trigger("data",{startPts:h.startPts,endPts:h.endPts,text:h.text,stream:"cc708_"+h.serviceNum}),h.text="",h.startPts=h.endPts)};la.prototype.displayWindows=function(h,l){var r=this.current708Packet.data[++h],q=this.getPts(h);this.flushDisplayed(q,l);for(q=0;8>q;q++)r&1<<q&&(l.windows[q].visible=1);return h};la.prototype.hideWindows=function(h,l){var r=this.current708Packet.data[++h],
q=this.getPts(h);this.flushDisplayed(q,l);for(q=0;8>q;q++)r&1<<q&&(l.windows[q].visible=0);return h};la.prototype.toggleWindows=function(h,l){var r=this.current708Packet.data[++h],q=this.getPts(h);this.flushDisplayed(q,l);for(q=0;8>q;q++)r&1<<q&&(l.windows[q].visible^=1);return h};la.prototype.clearWindows=function(h,l){var r=this.current708Packet.data[++h],q=this.getPts(h);this.flushDisplayed(q,l);for(q=0;8>q;q++)r&1<<q&&l.windows[q].clearText();return h};la.prototype.deleteWindows=function(h,l){var r=
this.current708Packet.data[++h],q=this.getPts(h);this.flushDisplayed(q,l);for(q=0;8>q;q++)r&1<<q&&l.windows[q].reset();return h};la.prototype.setPenAttributes=function(h,l){var r=this.current708Packet.data,q=r[h];l=l.currentWindow.penAttr;q=r[++h];l.textTag=(q&240)>>4;l.offset=(q&12)>>2;l.penSize=q&3;q=r[++h];l.italics=(q&128)>>7;l.underline=(q&64)>>6;l.edgeType=(q&56)>>3;l.fontStyle=q&7;return h};la.prototype.setPenColor=function(h,l){var r=this.current708Packet.data,q=r[h];l=l.currentWindow.penColor;
q=r[++h];l.fgOpacity=(q&192)>>6;l.fgRed=(q&48)>>4;l.fgGreen=(q&12)>>2;l.fgBlue=q&3;q=r[++h];l.bgOpacity=(q&192)>>6;l.bgRed=(q&48)>>4;l.bgGreen=(q&12)>>2;l.bgBlue=q&3;q=r[++h];l.edgeRed=(q&48)>>4;l.edgeGreen=(q&12)>>2;l.edgeBlue=q&3;return h};la.prototype.setPenLocation=function(h,l){var r=this.current708Packet.data,q=r[h],v=l.currentWindow.penLoc;l.currentWindow.pendingNewLine=!0;q=r[++h];v.row=q&15;q=r[++h];v.column=q&63;return h};la.prototype.reset=function(h,l){var r=this.getPts(h);this.flushDisplayed(r,
l);return this.initService(l.serviceNum,h)};var Up={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,
574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Je=function(h){if(null===h)return"";h=Up[h]||h;return String.fromCharCode(h)},Vp=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],lc=function(){for(var h=[],l=15;l--;)h.push({text:"",indent:0,offset:0});
return h},sa=function(h,l){sa.prototype.init.call(this);this.field_=h||0;this.dataChannel_=l||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(r){var q=r.ccData&32639;if(q===this.lastControlCode_)this.lastControlCode_=null;else{4096===(q&61440)?this.lastControlCode_=q:q!==this.PADDING_&&(this.lastControlCode_=null);var v=q>>>8;var w=q&255;q!==this.PADDING_&&(q===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":q===this.END_OF_CAPTION_?(this.mode_=
"popOn",this.clearFormatting(r.pts),this.flushDisplayed(r.pts),w=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=w,this.startPts_=r.pts):q===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(r.pts)):q===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(r.pts)):q===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(r.pts)):q===this.CARRIAGE_RETURN_?(this.clearFormatting(r.pts),this.flushDisplayed(r.pts),this.shiftRowsUp_(),this.startPts_=r.pts):q===this.BACKSPACE_?
"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1):q===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(r.pts),this.displayed_=lc()):q===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=lc():q===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(r.pts),this.displayed_=lc()),this.mode_="paintOn",this.startPts_=r.pts):this.isSpecialCharacter(v,
w)?(q=Je((v&3)<<8|w),this[this.mode_](r.pts,q),this.column_++):this.isExtCharacter(v,w)?("popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),q=Je((v&3)<<8|w),this[this.mode_](r.pts,q),this.column_++):this.isMidRowCode(v,w)?(this.clearFormatting(r.pts),this[this.mode_](r.pts," "),this.column_++,14===(w&14)&&this.addFormatting(r.pts,["i"]),1===(w&1)&&this.addFormatting(r.pts,
["u"])):this.isOffsetControlCode(v,w)?(r=w&3,this.nonDisplayed_[this.row_].offset=r,this.column_+=r):this.isPAC(v,w)?(v=Vp.indexOf(q&7968),"rollUp"===this.mode_&&(0>v-this.rollUpRows_+1&&(v=this.rollUpRows_-1),this.setRollUp(r.pts,v)),v!==this.row_&&(this.clearFormatting(r.pts),this.row_=v),w&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(r.pts,["u"]),16===(q&16)&&(q=(q&14)>>1,this.column_=4*q,this.nonDisplayed_[this.row_].indent+=q),this.isColorPAC(w)&&14===(w&14)&&this.addFormatting(r.pts,
["i"])):this.isNormalChar(v)&&(0===w&&(w=null),q=Je(v),q+=Je(w),this[this.mode_](r.pts,q),this.column_+=q.length))}}};sa.prototype=new b;sa.prototype.flushDisplayed=function(h){const l=q=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+q+"."})},r=[];this.displayed_.forEach((q,v)=>{if(q&&q.text&&q.text.length){try{q.text=q.text.trim()}catch(w){l(v)}q.text.length&&r.push({text:q.text,line:v+1,position:10+Math.min(70,10*q.indent)+2.5*q.offset})}else void 0!==q&&
null!==q||l(v)});r.length&&this.trigger("data",{startPts:this.startPts_,endPts:h,content:r,stream:this.name_})};sa.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=lc();this.nonDisplayed_=lc();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};sa.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=
24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};sa.prototype.isSpecialCharacter=
function(h,l){return h===this.EXT_&&48<=l&&63>=l};sa.prototype.isExtCharacter=function(h,l){return(h===this.EXT_+1||h===this.EXT_+2)&&32<=l&&63>=l};sa.prototype.isMidRowCode=function(h,l){return h===this.EXT_&&32<=l&&47>=l};sa.prototype.isOffsetControlCode=function(h,l){return h===this.OFFSET_&&33<=l&&35>=l};sa.prototype.isPAC=function(h,l){return h>=this.BASE_&&h<this.BASE_+8&&64<=l&&127>=l};sa.prototype.isColorPAC=function(h){return 64<=h&&79>=h||96<=h&&127>=h};sa.prototype.isNormalChar=function(h){return 32<=
h&&127>=h};sa.prototype.setRollUp=function(h,l){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(h),this.nonDisplayed_=lc(),this.displayed_=lc());if(void 0!==l&&l!==this.row_)for(h=0;h<this.rollUpRows_;h++)this.displayed_[l-h]=this.displayed_[this.row_-h],this.displayed_[this.row_-h]={text:"",indent:0,offset:0};void 0===l&&(l=this.row_);this.topRow_=l-this.rollUpRows_+1};sa.prototype.addFormatting=function(h,l){this.formatting_=this.formatting_.concat(l);l=l.reduce(function(r,
q){return r+"\x3c"+q+"\x3e"},"");this[this.mode_](h,l)};sa.prototype.clearFormatting=function(h){if(this.formatting_.length){var l=this.formatting_.reverse().reduce(function(r,q){return r+"\x3c/"+q+"\x3e"},"");this.formatting_=[];this[this.mode_](h,l)}};sa.prototype.popOn=function(h,l){this.nonDisplayed_[this.row_].text+=l};sa.prototype.rollUp=function(h,l){this.displayed_[this.row_].text+=l};sa.prototype.shiftRowsUp_=function(){var h;for(h=0;h<this.topRow_;h++)this.displayed_[h]={text:"",indent:0,
offset:0};for(h=this.row_+1;15>h;h++)this.displayed_[h]={text:"",indent:0,offset:0};for(h=this.topRow_;h<this.row_;h++)this.displayed_[h]=this.displayed_[h+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}};sa.prototype.paintOn=function(h,l){this.displayed_[this.row_].text+=l};var al=Ya,Wp=sa,Xp=la,Ja={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},$b=function(h,l){var r=1;for(h>l&&(r=-1);4294967296<Math.abs(l-h);)h+=8589934592*r;return h},Ug=function(h){var l,r;Ug.prototype.init.call(this);
this.type_=h||"shared";this.push=function(q){if("shared"===this.type_||q.type===this.type_)void 0===r&&(r=q.dts),q.dts=$b(q.dts,r),q.pts=$b(q.pts,r),l=q.dts,this.trigger("data",q)};this.flush=function(){r=l;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){l=r=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};Ug.prototype=new b;var Yp=Ug,Ke=(h,l,r)=>{if(!h)return-1;for(;r<h.length;r++)if(h[r]===l)return r;
return-1},Db=function(h,l,r){for(var q="";l<r;l++)q+="%"+("00"+h[l].toString(16)).slice(-2);return q},xd=function(h){return h[0]<<21|h[1]<<14|h[2]<<7|h[3]},yd={APIC:function(h){var l=1;if(3===h.data[0]){var r=Ke(h.data,0,l);0>r||(h.mimeType=unescape(Db(h.data,l,r)),l=r+1,h.pictureType=h.data[l],l++,r=Ke(h.data,0,l),0>r||(h.description=decodeURIComponent(Db(h.data,l,r)),l=r+1,"--\x3e"===h.mimeType?h.url=unescape(Db(h.data,l,h.data.length)):h.pictureData=h.data.subarray(l,h.data.length)))}},"T*":function(h){3===
h.data[0]&&(h.value=decodeURIComponent(Db(h.data,1,h.data.length)).replace(/\0*$/,""),h.values=h.value.split("\x00"))},TXXX:function(h){if(3===h.data[0]){var l=Ke(h.data,0,1);-1!==l&&(h.description=decodeURIComponent(Db(h.data,1,l)),h.value=decodeURIComponent(Db(h.data,l+1,h.data.length)).replace(/\0*$/,""),h.data=h.value)}},"W*":function(h){h.url=unescape(Db(h.data,0,h.data.length)).replace(/\0.*$/,"")},WXXX:function(h){if(3===h.data[0]){var l=Ke(h.data,0,1);-1!==l&&(h.description=decodeURIComponent(Db(h.data,
1,l)),h.url=unescape(Db(h.data,l+1,h.data.length)).replace(/\0.*$/,""))}},PRIV:function(h){var l;for(l=0;l<h.data.length;l++)if(0===h.data[l]){h.owner=unescape(Db(h.data,0,l));break}h.privateData=h.data.subarray(l+1);h.data=h.privateData}},Nb={parseId3Frames:function(h){var l=10,r=0,q=[];if(!(10>h.length||73!==h[0]||68!==h[1]||51!==h[2])){r=xd(h.subarray(6,10));r+=10;h[5]&64&&(l=l+4+xd(h.subarray(10,14)),r-=xd(h.subarray(16,20)));do{var v=xd(h.subarray(l+4,l+8));if(1>v)break;var w=String.fromCharCode(h[l],
h[l+1],h[l+2],h[l+3]);w={id:w,data:h.subarray(l+10,l+v+10)};w.key=w.id;if(yd[w.id])yd[w.id](w);else if("T"===w.id[0])yd["T*"](w);else if("W"===w.id[0])yd["W*"](w);q.push(w);l+=10;l+=v}while(l<r);return q}},parseSyncSafeInteger:xd,frameParsers:yd};var Vg=function(h){h=h&&h.descriptor;var l=0,r=[],q=0,v;Vg.prototype.init.call(this);this.dispatchType=Ja.METADATA_STREAM_TYPE.toString(16);if(h)for(v=0;v<h.length;v++)this.dispatchType+=("00"+h[v].toString(16)).slice(-2);this.push=function(w){var A;if("timed-metadata"===
w.type)if(w.dataAlignmentIndicator&&(q=0,r.length=0),0===r.length&&(10>w.data.length||73!==w.data[0]||68!==w.data[1]||51!==w.data[2]))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(w),q+=w.data.byteLength,1===r.length&&(l=Nb.parseSyncSafeInteger(w.data.subarray(6,10)),l+=10),!(q<l)){w={data:new Uint8Array(l),frames:[],pts:r[0].pts,dts:r[0].dts};for(A=0;A<l;)w.data.set(r[0].data.subarray(0,l-A),A),A+=r[0].data.byteLength,q-=r[0].data.byteLength,r.shift();
A=10;w.data[5]&64&&(A=A+4+Nb.parseSyncSafeInteger(w.data.subarray(10,14)),l-=Nb.parseSyncSafeInteger(w.data.subarray(16,20)));do{var C=Nb.parseSyncSafeInteger(w.data.subarray(A+4,A+8));if(1>C){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}var F=String.fromCharCode(w.data[A],w.data[A+1],w.data[A+2],w.data[A+3]);F={id:F,data:w.data.subarray(A+10,A+C+10)};F.key=F.id;if(Nb.frameParsers[F.id])Nb.frameParsers[F.id](F);else if("T"===
F.id[0])Nb.frameParsers["T*"](F);else if("W"===F.id[0])Nb.frameParsers["W*"](F);if("com.apple.streaming.transportStreamTimestamp"===F.owner){var I=F.data,N=(I[3]&1)<<30|I[4]<<22|I[5]<<14|I[6]<<6|I[7]>>>2;N*=4;N+=I[7]&3;F.timeStamp=N;void 0===w.pts&&void 0===w.dts&&(w.pts=F.timeStamp,w.dts=F.timeStamp);this.trigger("timestamp",F)}w.frames.push(F);A+=10;A+=C}while(A<l);this.trigger("data",w)}}};Vg.prototype=new b;var Wg=function(){var h=new Uint8Array(188),l=0;Wg.prototype.init.call(this);this.push=
function(r){var q=0,v=188;if(l){var w=new Uint8Array(r.byteLength+l);w.set(h.subarray(0,l));w.set(r,l);l=0}else w=r;for(;v<w.byteLength;)71===w[q]&&71===w[v]?(this.trigger("data",w.subarray(q,v)),q+=188,v+=188):(q++,v++);q<w.byteLength&&(h.set(w.subarray(q),0),l=w.byteLength-q)};this.flush=function(){188===l&&71===h[0]&&(this.trigger("data",h),l=0);this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.reset=function(){l=0;this.trigger("reset")}};Wg.prototype=
new b;var Le=function(){Le.prototype.init.call(this);var h=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var l=function(v,w){var A=0;w.payloadUnitStartIndicator&&(A+=v[A]+1);"pat"===w.type?r(v.subarray(A),w):q(v.subarray(A),w)};var r=function(v,w){w.section_number=v[7];w.last_section_number=v[8];h.pmtPid=(v[10]&31)<<8|v[11];w.pmtPid=h.pmtPid};var q=function(v,w){var A;if(v[5]&1){h.programMapTable={video:null,audio:null,"timed-metadata":{}};var C=3+((v[1]&15)<<8|v[2])-4;for(A=12+((v[10]&
15)<<8|v[11]);A<C;){var F=v[A],I=(v[A+1]&31)<<8|v[A+2];F===Ja.H264_STREAM_TYPE&&null===h.programMapTable.video?h.programMapTable.video=I:F===Ja.ADTS_STREAM_TYPE&&null===h.programMapTable.audio?h.programMapTable.audio=I:F===Ja.METADATA_STREAM_TYPE&&(h.programMapTable["timed-metadata"][I]=F);A+=((v[A+3]&15)<<8|v[A+4])+5}w.programMapTable=h.programMapTable}};this.push=function(v){var w={},A=4;w.payloadUnitStartIndicator=!!(v[1]&64);w.pid=v[1]&31;w.pid<<=8;w.pid|=v[2];1<(v[3]&48)>>>4&&(A+=v[A]+1);if(0===
w.pid)w.type="pat",l(v.subarray(A),w),this.trigger("data",w);else if(w.pid===this.pmtPid)for(w.type="pmt",l(v.subarray(A),w),this.trigger("data",w);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([v,A,w]):this.processPes_(v,A,w)};this.processPes_=function(v,w,A){A.streamType=A.pid===this.programMapTable.video?Ja.H264_STREAM_TYPE:A.pid===this.programMapTable.audio?Ja.ADTS_STREAM_TYPE:
this.programMapTable["timed-metadata"][A.pid];A.type="pes";A.data=v.subarray(w);this.trigger("data",A)}};Le.prototype=new b;Le.STREAM_TYPES={h264:27,adts:15};var Xg=function(){var h=this,l=!1,r={data:[],size:0},q={data:[],size:0},v={data:[],size:0},w,A=function(C,F,I){var N=new Uint8Array(C.size),L={type:F},X=0,S=0;X=!1;if(C.data.length&&!(9>C.size)){L.trackId=C.data[0].pid;for(X=0;X<C.data.length;X++){var da=C.data[X];N.set(da.data,S);S+=da.data.byteLength}S=N[0]<<16|N[1]<<8|N[2];L.data=new Uint8Array;
1===S&&(L.packetLength=6+(N[4]<<8|N[5]),L.dataAlignmentIndicator=0!==(N[6]&4),S=N[7],S&192&&(L.pts=(N[9]&14)<<27|(N[10]&255)<<20|(N[11]&254)<<12|(N[12]&255)<<5|(N[13]&254)>>>3,L.pts*=4,L.pts+=(N[13]&6)>>>1,L.dts=L.pts,S&64&&(L.dts=(N[14]&14)<<27|(N[15]&255)<<20|(N[16]&254)<<12|(N[17]&255)<<5|(N[18]&254)>>>3,L.dts*=4,L.dts+=(N[18]&6)>>>1)),L.data=N.subarray(9+N[8]));X="video"===F||L.packetLength<=C.size;if(I||X)C.size=0,C.data.length=0;X&&h.trigger("data",L)}};Xg.prototype.init.call(this);this.push=
function(C){({pat:function(){},pes:function(){switch(C.streamType){case Ja.H264_STREAM_TYPE:var F=r;var I="video";break;case Ja.ADTS_STREAM_TYPE:F=q;I="audio";break;case Ja.METADATA_STREAM_TYPE:F=v;I="timed-metadata";break;default:return}C.payloadUnitStartIndicator&&A(F,I,!0);F.data.push(C);F.size+=C.data.byteLength},pmt:function(){var F={type:"metadata",tracks:[]};w=C.programMapTable;null!==w.video&&F.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.video,codec:"avc",type:"video"});null!==
w.audio&&F.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.audio,codec:"adts",type:"audio"});l=!0;h.trigger("data",F)}})[C.type]()};this.reset=function(){r.size=0;r.data.length=0;q.size=0;q.data.length=0;this.trigger("reset")};this.flushStreams_=function(){A(r,"video");A(q,"audio");A(v,"timed-metadata")};this.flush=function(){if(!l&&w){var C={type:"metadata",tracks:[]};null!==w.video&&C.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.video,codec:"avc",type:"video"});null!==
w.audio&&C.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.audio,codec:"adts",type:"audio"});h.trigger("data",C)}l=!1;this.flushStreams_();this.trigger("done")}};Xg.prototype=new b;var Eb={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Wg,TransportParseStream:Le,ElementaryStream:Xg,TimestampRolloverStream:Yp,CaptionStream:al,Cea608Stream:Wp,Cea708Stream:Xp,MetadataStream:Vg},Me;for(Me in Ja)Ja.hasOwnProperty(Me)&&(Eb[Me]=Ja[Me]);var Zp=ha.ONE_SECOND_IN_TS,bl=[96E3,88200,64E3,
48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Ne=function(h){var l,r=0;Ne.prototype.init.call(this);this.skipWarn_=function(q,v){this.trigger("log",{level:"warn",message:`adts skiping bytes ${q} to ${v} in frame ${r} outside syncword`})};this.push=function(q){var v=0;h||(r=0);if("audio"===q.type){if(l&&l.length){var w=l;l=new Uint8Array(w.byteLength+q.data.byteLength);l.set(w);l.set(q.data,w.byteLength)}else l=q.data;for(var A;v+7<l.length;)if(255!==l[v]||240!==(l[v+1]&246))"number"!==
typeof A&&(A=v),v++;else{"number"===typeof A&&(this.skipWarn_(A,v),A=null);var C=2*(~l[v+1]&1);w=(l[v+3]&3)<<11|l[v+4]<<3|(l[v+5]&224)>>5;var F=1024*((l[v+6]&3)+1);var I=F*Zp/bl[(l[v+2]&60)>>>2];if(l.byteLength-v<w)break;this.trigger("data",{pts:q.pts+r*I,dts:q.dts+r*I,sampleCount:F,audioobjecttype:(l[v+2]>>>6&3)+1,channelcount:(l[v+2]&1)<<2|(l[v+3]&192)>>>6,samplerate:bl[(l[v+2]&60)>>>2],samplingfrequencyindex:(l[v+2]&60)>>>2,samplesize:16,data:l.subarray(v+7+C,v+w)});r++;v+=w}"number"===typeof A&&
(this.skipWarn_(A,v),A=null);l=l.subarray(v)}};this.flush=function(){r=0;this.trigger("done")};this.reset=function(){l=void 0;this.trigger("reset")};this.endTimeline=function(){l=void 0;this.trigger("endedtimeline")}};Ne.prototype=new b;var $p=function(h){var l=h.byteLength,r=0,q=0;this.length=function(){return 8*l};this.bitsAvailable=function(){return 8*l+q};this.loadWord=function(){var v=h.byteLength-l,w=new Uint8Array(4),A=Math.min(4,l);if(0===A)throw Error("no bytes available");w.set(h.subarray(v,
v+A));r=(new DataView(w.buffer)).getUint32(0);q=8*A;l-=A};this.skipBits=function(v){if(!(q>v)){v-=q;var w=Math.floor(v/8);v-=8*w;l-=w;this.loadWord()}r<<=v;q-=v};this.readBits=function(v){var w=Math.min(q,v),A=r>>>32-w;q-=w;0<q?r<<=w:0<l&&this.loadWord();w=v-w;return 0<w?A<<w|this.readBits(w):A};this.skipLeadingZeros=function(){var v;for(v=0;v<q;++v)if(0!==(r&2147483648>>>v))return r<<=v,q-=v,v;this.loadWord();return v+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+
this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var v=this.skipLeadingZeros();return this.readBits(v+1)-1};this.readExpGolomb=function(){var v=this.readUnsignedExpGolomb();return 1&v?1+v>>>1:-1*(v>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var Yg=function(){var h=0,l,r;Yg.prototype.init.call(this);this.push=function(q){if(r){var v=
new Uint8Array(r.byteLength+q.data.byteLength);v.set(r);v.set(q.data,r.byteLength);r=v}else r=q.data;for(q=r.byteLength;h<q-3;h++)if(1===r[h+2]){l=h+5;break}for(;l<q;)switch(r[l]){case 0:if(0!==r[l-1]){l+=2;break}else if(0!==r[l-2]){l++;break}h+3!==l-2&&this.trigger("data",r.subarray(h+3,l-2));do l++;while(1!==r[l]&&l<q);h=l-2;l+=3;break;case 1:if(0!==r[l-1]||0!==r[l-2]){l+=3;break}this.trigger("data",r.subarray(h+3,l-2));h=l-2;l+=3;break;default:l+=3}r=r.subarray(h);l-=h;h=0};this.reset=function(){r=
null;h=0;this.trigger("reset")};this.flush=function(){r&&3<r.byteLength&&this.trigger("data",r.subarray(h+3));r=null;h=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};Yg.prototype=new b;var aq={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Zg=function(){var h=new Yg,l,r,q;Zg.prototype.init.call(this);var v=this;this.push=function(F){"video"===F.type&&(l=F.trackId,r=F.pts,q=F.dts,h.push(F))};h.on("data",function(F){var I=
{trackId:l,pts:r,dts:q,data:F,nalUnitTypeCode:F[0]&31};switch(I.nalUnitTypeCode){case 5:I.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:I.nalUnitType="sei_rbsp";I.escapedRBSP=A(F.subarray(1));break;case 7:I.nalUnitType="seq_parameter_set_rbsp";I.escapedRBSP=A(F.subarray(1));I.config=C(I.escapedRBSP);break;case 8:I.nalUnitType="pic_parameter_set_rbsp";break;case 9:I.nalUnitType="access_unit_delimiter_rbsp"}v.trigger("data",I)});h.on("done",function(){v.trigger("done")});h.on("partialdone",
function(){v.trigger("partialdone")});h.on("reset",function(){v.trigger("reset")});h.on("endedtimeline",function(){v.trigger("endedtimeline")});this.flush=function(){h.flush()};this.partialFlush=function(){h.partialFlush()};this.reset=function(){h.reset()};this.endTimeline=function(){h.endTimeline()};var w=function(F,I){var N=8,L=8,X;for(X=0;X<F;X++)0!==L&&(L=I.readExpGolomb(),L=(N+L+256)%256),N=0===L?N:L};var A=function(F){for(var I=F.byteLength,N=[],L=1,X;L<I-2;)0===F[L]&&0===F[L+1]&&3===F[L+2]?
(N.push(L+2),L+=2):L++;if(0===N.length)return F;I-=N.length;X=new Uint8Array(I);var S=0;for(L=0;L<I;S++,L++)S===N[0]&&(S++,N.shift()),X[L]=F[S];return X};var C=function(F){var I=0,N=0,L=0,X=0,S=[1,1];F=new $p(F);var da=F.readUnsignedByte();var eb=F.readUnsignedByte();var zd=F.readUnsignedByte();F.skipUnsignedExpGolomb();if(aq[da]){var Ha=F.readUnsignedExpGolomb();3===Ha&&F.skipBits(1);F.skipUnsignedExpGolomb();F.skipUnsignedExpGolomb();F.skipBits(1);if(F.readBoolean()){var Ad=3!==Ha?8:12;for(Ha=0;Ha<
Ad;Ha++)F.readBoolean()&&(6>Ha?w(16,F):w(64,F))}}F.skipUnsignedExpGolomb();Ha=F.readUnsignedExpGolomb();if(0===Ha)F.readUnsignedExpGolomb();else if(1===Ha)for(F.skipBits(1),F.skipExpGolomb(),F.skipExpGolomb(),Ad=F.readUnsignedExpGolomb(),Ha=0;Ha<Ad;Ha++)F.skipExpGolomb();F.skipUnsignedExpGolomb();F.skipBits(1);Ha=F.readUnsignedExpGolomb();Ad=F.readUnsignedExpGolomb();var cl=F.readBits(1);0===cl&&F.skipBits(1);F.skipBits(1);F.readBoolean()&&(I=F.readUnsignedExpGolomb(),N=F.readUnsignedExpGolomb(),
L=F.readUnsignedExpGolomb(),X=F.readUnsignedExpGolomb());if(F.readBoolean()&&F.readBoolean()){var bq=F.readUnsignedByte();switch(bq){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;
case 255:S=[F.readUnsignedByte()<<8|F.readUnsignedByte(),F.readUnsignedByte()<<8|F.readUnsignedByte()]}S&&S[0]/S[1]}return{profileIdc:da,levelIdc:zd,profileCompatibility:eb,width:16*(Ha+1)-2*I-2*N,height:(2-cl)*(Ad+1)*16-2*L-2*X,sarRatio:S}}};Zg.prototype=new b;var cq=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],dl=function(h,l){var r=h[l+6]<<21|h[l+7]<<14|h[l+8]<<7|h[l+9];h=h[l+5];r=0<=r?r:0;return(h&16)>>4?r+20:r+10},el=function(h,l){if(10>h.length-l||73!==h[l]||68!==h[l+
1]||51!==h[l+2])return l;l+=dl(h,l);return el(h,l)},fl=function(h){return h[0]<<21|h[1]<<14|h[2]<<7|h[3]},Ob={isLikelyAacData:function(h){var l=el(h,0);return h.length>=l+2&&255===(h[l]&255)&&240===(h[l+1]&240)&&16===(h[l+1]&22)},parseId3TagSize:dl,parseAdtsSize:function(h,l){return h[l+3]&6144|h[l+4]<<3|(h[l+5]&224)>>5},parseType:function(h,l){return 73===h[l]&&68===h[l+1]&&51===h[l+2]?"timed-metadata":h[l]&1&&240===(h[l+1]&240)?"audio":null},parseSampleRate:function(h){for(var l=0;l+5<h.length;)if(255!==
h[l]||240!==(h[l+1]&246))l++;else return cq[(h[l+2]&60)>>>2];return null},parseAacTimestamp:function(h){var l=10;h[5]&64&&(l=l+4+fl(h.subarray(10,14)));do{var r=fl(h.subarray(l+4,l+8));if(1>r)break;var q=String.fromCharCode(h[l],h[l+1],h[l+2],h[l+3]);if("PRIV"===q){q=h.subarray(l+10,l+r+10);for(var v=0;v<q.byteLength;v++)if(0===q[v]){var w=unescape,A=void 0,C=q,F=v,I="";for(A=0;A<F;A++)I+="%"+("00"+C[A].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===w(I))return h=q.subarray(v+
1),l=(h[3]&1)<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2,l*=4,l+=h[7]&3;break}}l+=10;l+=r}while(l<h.byteLength);return null}};var $g=function(){var h=new Uint8Array,l=0;$g.prototype.init.call(this);this.setTimestamp=function(r){l=r};this.push=function(r){var q=0,v=0;h.length?(q=h.length,h=new Uint8Array(r.byteLength+q),h.set(h.subarray(0,q)),h.set(r,q)):h=r;for(;3<=h.length-v;)if(73===h[v]&&68===h[v+1]&&51===h[v+2]){if(10>h.length-v)break;q=Ob.parseId3TagSize(h,v);if(v+q>h.length)break;r={type:"timed-metadata",
data:h.subarray(v,v+q)};this.trigger("data",r);v+=q}else if(255===(h[v]&255)&&240===(h[v+1]&240)){if(7>h.length-v)break;q=Ob.parseAdtsSize(h,v);if(v+q>h.length)break;r={type:"audio",data:h.subarray(v,v+q),pts:l,dts:l};this.trigger("data",r);v+=q}else v++;h=0<h.length-v?h.subarray(v):new Uint8Array};this.reset=function(){h=new Uint8Array;this.trigger("reset")};this.endTimeline=function(){h=new Uint8Array;this.trigger("endedtimeline")}};$g.prototype=new b;var Bd={groupNalsIntoFrames:function(h){var l,
r=[],q=[];q.byteLength=0;q.nalCount=0;q.duration=0;for(l=r.byteLength=0;l<h.length;l++){var v=h[l];"access_unit_delimiter_rbsp"===v.nalUnitType?(r.length&&(r.duration=v.dts-r.dts,q.byteLength+=r.byteLength,q.nalCount+=r.length,q.duration+=r.duration,q.push(r)),r=[v],r.byteLength=v.data.byteLength,r.pts=v.pts,r.dts=v.dts):("slice_layer_without_partitioning_rbsp_idr"===v.nalUnitType&&(r.keyFrame=!0),r.duration=v.dts-r.dts,r.byteLength+=v.data.byteLength,r.push(v))}q.length&&(!r.duration||0>=r.duration)&&
(r.duration=q[q.length-1].duration);q.byteLength+=r.byteLength;q.nalCount+=r.length;q.duration+=r.duration;q.push(r);return q},groupFramesIntoGops:function(h){var l,r=[],q=[];r.byteLength=0;r.nalCount=0;r.duration=0;r.pts=h[0].pts;r.dts=h[0].dts;q.byteLength=0;q.nalCount=0;q.duration=0;q.pts=h[0].pts;q.dts=h[0].dts;for(l=0;l<h.length;l++){var v=h[l];v.keyFrame?(r.length&&(q.push(r),q.byteLength+=r.byteLength,q.nalCount+=r.nalCount,q.duration+=r.duration),r=[v],r.nalCount=v.length,r.byteLength=v.byteLength,
r.pts=v.pts,r.dts=v.dts,r.duration=v.duration):(r.duration+=v.duration,r.nalCount+=v.length,r.byteLength+=v.byteLength,r.push(v))}q.length&&0>=r.duration&&(r.duration=q[q.length-1].duration);q.byteLength+=r.byteLength;q.nalCount+=r.nalCount;q.duration+=r.duration;q.push(r);return q},extendFirstKeyFrame:function(h){if(!h[0][0].keyFrame&&1<h.length){var l=h.shift();h.byteLength-=l.byteLength;h.nalCount-=l.nalCount;h[0][0].dts=l.dts;h[0][0].pts=l.pts;h[0][0].duration+=l.duration}return h},generateSampleTable:function(h,
l){var r,q=l||0,v=[];for(l=0;l<h.length;l++){var w=h[l];for(r=0;r<w.length;r++){var A=w[r];A=Xk(A,q);q+=A.size;v.push(A)}}return v},concatenateNalData:function(h){var l,r,q,v=0,w=new Uint8Array(h.byteLength+4*h.nalCount),A=new DataView(w.buffer);for(l=0;l<h.length;l++){var C=h[l];for(r=0;r<C.length;r++){var F=C[r];for(q=0;q<F.length;q++){var I=F[q];A.setUint32(v,I.data.byteLength);v+=4;w.set(I.data,v);v+=I.data.byteLength}}}return w},generateSampleTableForFrame:function(h,l){var r=[];h=Xk(h,l||0);
r.push(h);return r},concatenateNalDataForFrame:function(h){var l,r=0,q=new Uint8Array(h.byteLength+4*h.length),v=new DataView(q.buffer);for(l=0;l<h.length;l++){var w=h[l];v.setUint32(r,w.data.byteLength);r+=4;q.set(w.data,r);r+=w.data.byteLength}return q}},Oe={prefixWithSilence:function(h,l,r,q){var v=0,w=0,A=w=0;if(l.length){var C=ha.audioTsToVideoTs(h.baseMediaDecodeTime,h.samplerate);v=Math.ceil(ha.ONE_SECOND_IN_TS/(h.samplerate/1024));r&&q&&(w=C-Math.max(r,q),w=Math.floor(w/v),A=w*v);if(!(1>w||
A>ha.ONE_SECOND_IN_TS/2)){Sg||(r={96E3:[Zb,[227,64],ia(154),[56]],88200:[Zb,[231],ia(170),[56]],64E3:[Zb,[248,192],ia(240),[56]],48E3:[Zb,[255,192],ia(268),[55,148,128],ia(54),[112]],44100:[Zb,[255,192],ia(268),[55,163,128],ia(84),[112]],32E3:[Zb,[255,192],ia(268),[55,234],ia(226),[112]],24E3:[Zb,[255,192],ia(268),[55,255,128],ia(268),[111,112],ia(126),[224]],16E3:[Zb,[255,192],ia(268),[55,255,128],ia(268),[111,255],ia(269),[223,108],ia(195),[1,192]],12E3:[Rg,ia(268),[3,127,248],ia(268),[6,255,240],
ia(268),[13,255,224],ia(268),[27,253,128],ia(259),[56]],11025:[Rg,ia(268),[3,127,248],ia(268),[6,255,240],ia(268),[13,255,224],ia(268),[27,255,192],ia(268),[55,175,128],ia(108),[112]],8E3:[Rg,ia(268),[3,121,16],ia(47),[7]]},Sg=Rp(r));r=Sg[h.samplerate];r||(r=l[0].data);for(q=0;q<w;q++)C=l[0],l.splice(0,0,{data:r,dts:C.dts-v,pts:C.pts-v});h.baseMediaDecodeTime-=Math.floor(ha.videoTsToAudioTs(A,h.samplerate));return A}}},trimAdtsFramesByEarliestDts:function(h,l,r){if(l.minSegmentDts>=r)return h;l.minSegmentDts=
Infinity;return h.filter(function(q){return q.dts>=r?(l.minSegmentDts=Math.min(l.minSegmentDts,q.dts),l.minSegmentPts=l.minSegmentDts,!0):!1})},generateSampleTable:function(h){var l,r=[];for(l=0;l<h.length;l++){var q=h[l];r.push({size:q.data.byteLength,duration:1024})}return r},concatenateFrameData:function(h){var l,r=0;var q=Uint8Array;var v=0;for(l=0;l<h.length;l++){var w=h[l];v+=w.data.byteLength}w=new q(v);for(q=0;q<h.length;q++)l=h[q],w.set(l.data,r),r+=l.data.byteLength;return w}},pb={clearDtsInfo:function(h){delete h.minSegmentDts;
delete h.maxSegmentDts;delete h.minSegmentPts;delete h.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(h,l){var r=h.minSegmentDts;l||(r-=h.timelineStartInfo.dts);l=h.timelineStartInfo.baseMediaDecodeTime;l=Math.max(0,l+r);"audio"===h.type&&(h=h.samplerate/Sp,l=Math.floor(l*h));return l},collectDtsInfo:function(h,l){"number"===typeof l.pts&&(void 0===h.timelineStartInfo.pts&&(h.timelineStartInfo.pts=l.pts),h.minSegmentPts=void 0===h.minSegmentPts?l.pts:Math.min(h.minSegmentPts,l.pts),h.maxSegmentPts=
void 0===h.maxSegmentPts?l.pts:Math.max(h.maxSegmentPts,l.pts));"number"===typeof l.dts&&(void 0===h.timelineStartInfo.dts&&(h.timelineStartInfo.dts=l.dts),h.minSegmentDts=void 0===h.minSegmentDts?l.dts:Math.min(h.minSegmentDts,l.dts),h.maxSegmentDts=void 0===h.maxSegmentDts?l.dts:Math.max(h.maxSegmentDts,l.dts))}},dq=Ob.isLikelyAacData,eq=ha.ONE_SECOND_IN_TS,gl=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],hl="width height profileIdc levelIdc profileCompatibility sarRatio".split(" "),
fq=function(h,l){l.stream=h;this.trigger("log",l)},il=function(h,l){for(var r=Object.keys(l),q=0;q<r.length;q++){var v=r[q];if("headOfPipeline"!==v&&l[v].on)l[v].on("log",fq.bind(h,v))}},jl=function(h,l){var r;if(h.length!==l.length)return!1;for(r=0;r<h.length;r++)if(h[r]!==l[r])return!1;return!0},kl=function(h,l,r,q,v,w){return{start:{dts:h,pts:h+(r-l)},end:{dts:h+(q-l),pts:h+(v-r)},prependedContentDuration:w,baseMediaDecodeTime:h}};var Pe=function(h,l){var r=[],q=0,v=0,w=Infinity;l=l||{};var A=
l.firstSequenceNumber||0;Pe.prototype.init.call(this);this.push=function(C){pb.collectDtsInfo(h,C);h&&gl.forEach(function(F){h[F]=C[F]});r.push(C)};this.setEarliestDts=function(C){q=C};this.setVideoBaseMediaDecodeTime=function(C){w=C};this.setAudioAppendStart=function(C){v=C};this.flush=function(){if(0!==r.length){var C=Oe.trimAdtsFramesByEarliestDts(r,h,q);h.baseMediaDecodeTime=pb.calculateTrackBaseMediaDecodeTime(h,l.keepOriginalTimestamps);var F=Oe.prefixWithSilence(h,C,v,w);h.samples=Oe.generateSampleTable(C);
var I=vd.mdat(Oe.concatenateFrameData(C));r=[];var N=vd.moof(A,[h]);var L=new Uint8Array(N.byteLength+I.byteLength);A++;L.set(N);L.set(I,N.byteLength);pb.clearDtsInfo(h);N=Math.ceil(1024*eq/h.samplerate);C.length&&(N*=C.length,this.trigger("segmentTimingInfo",kl(ha.audioTsToVideoTs(h.baseMediaDecodeTime,h.samplerate),C[0].dts,C[0].pts,C[0].dts+N,C[0].pts+N,F||0)),this.trigger("timingInfo",{start:C[0].pts,end:C[0].pts+N}));this.trigger("data",{track:h,boxes:L})}this.trigger("done","AudioSegmentStream")};
this.reset=function(){pb.clearDtsInfo(h);r=[];this.trigger("reset")}};Pe.prototype=new b;var ah=function(h,l){var r=[],q=[],v,w;l=l||{};var A=l.firstSequenceNumber||0;ah.prototype.init.call(this);delete h.minPTS;this.gopCache_=[];this.push=function(C){pb.collectDtsInfo(h,C);"seq_parameter_set_rbsp"!==C.nalUnitType||v||(v=C.config,h.sps=[C.data],hl.forEach(function(F){h[F]=v[F]},this));"pic_parameter_set_rbsp"!==C.nalUnitType||w||(w=C.data,h.pps=[C.data]);r.push(C)};this.flush=function(){var C;var F=
0;for(var I,N;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0!==r.length){var L=Bd.groupNalsIntoFrames(r);L=Bd.groupFramesIntoGops(L);L[0][0].keyFrame||((C=this.getGopForFusion_(r[0],h))?(F=C.duration,L.unshift(C),L.byteLength+=C.byteLength,L.nalCount+=C.nalCount,L.pts=C.pts,L.dts=C.dts,L.duration+=C.duration):L=Bd.extendFirstKeyFrame(L));if(q.length){C=l.alignGopsAtEnd?this.alignGopsAtEnd_(L):this.alignGopsAtStart_(L);if(!C){this.gopCache_.unshift({gop:L.pop(),pps:h.pps,
sps:h.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);r=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}pb.clearDtsInfo(h);L=C}pb.collectDtsInfo(h,L);h.samples=Bd.generateSampleTable(L);C=vd.mdat(Bd.concatenateNalData(L));h.baseMediaDecodeTime=pb.calculateTrackBaseMediaDecodeTime(h,l.keepOriginalTimestamps);this.trigger("processedGopsInfo",L.map(function(X){return{pts:X.pts,dts:X.dts,byteLength:X.byteLength}}));I=L[0];N=L[L.length-1];this.trigger("segmentTimingInfo",
kl(h.baseMediaDecodeTime,I.dts,I.pts,N.dts+N.duration,N.pts+N.duration,F));this.trigger("timingInfo",{start:L[0].pts,end:L[L.length-1].pts+L[L.length-1].duration});this.gopCache_.unshift({gop:L.pop(),pps:h.pps,sps:h.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);r=[];this.trigger("baseMediaDecodeTime",h.baseMediaDecodeTime);this.trigger("timelineStartInfo",h.timelineStartInfo);F=vd.moof(A,[h]);L=new Uint8Array(F.byteLength+C.byteLength);A++;L.set(F);L.set(C,F.byteLength);this.trigger("data",
{track:h,boxes:L})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();r=[];this.gopCache_.length=0;q.length=0;this.trigger("reset")};this.resetStream_=function(){pb.clearDtsInfo(h);w=v=void 0};this.getGopForFusion_=function(C){var F=Infinity,I;for(I=0;I<this.gopCache_.length;I++){var N=this.gopCache_[I];var L=N.gop;if(h.pps&&jl(h.pps[0],N.pps[0])&&h.sps&&jl(h.sps[0],N.sps[0])&&!(L.dts<h.timelineStartInfo.dts)&&(L=C.dts-L.dts-L.duration,-1E4<=L&&
45E3>=L&&(!X||F>L))){var X=N;F=L}}return X?X.gop:null};this.alignGopsAtStart_=function(C){var F,I;var N=C.byteLength;var L=C.nalCount;var X=C.duration;for(F=I=0;F<q.length&&I<C.length;){var S=q[F];var da=C[I];if(S.pts===da.pts)break;da.pts>S.pts?F++:(I++,N-=da.byteLength,L-=da.nalCount,X-=da.duration)}if(0===I)return C;if(I===C.length)return null;C=C.slice(I);C.byteLength=N;C.duration=X;C.nalCount=L;C.pts=C[0].pts;C.dts=C[0].dts;return C};this.alignGopsAtEnd_=function(C){var F;var I=q.length-1;var N=
C.length-1;var L=null;for(F=!1;0<=I&&0<=N;){var X=q[I];var S=C[N];if(X.pts===S.pts){F=!0;break}X.pts>S.pts?I--:(I===q.length-1&&(L=N),N--)}if(!F&&null===L)return null;I=F?N:L;if(0===I)return C;C=C.slice(I);I=C.reduce(function(da,eb){da.byteLength+=eb.byteLength;da.duration+=eb.duration;da.nalCount+=eb.nalCount;return da},{byteLength:0,duration:0,nalCount:0});C.byteLength=I.byteLength;C.duration=I.duration;C.nalCount=I.nalCount;C.pts=C[0].pts;C.dts=C[0].dts;return C};this.alignGopsWith=function(C){q=
C}};ah.prototype=new b;var Sc=function(h,l){this.numberOfTracks=0;this.metadataStream=l;h=h||{};this.remuxTracks="undefined"!==typeof h.remux?!!h.remux:!0;this.keepOriginalTimestamps="boolean"===typeof h.keepOriginalTimestamps?h.keepOriginalTimestamps:!1;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;Sc.prototype.init.call(this);this.push=function(r){if(r.content||r.text)return this.pendingCaptions.push(r);
if(r.frames)return this.pendingMetadata.push(r);this.pendingTracks.push(r.track);this.pendingBytes+=r.boxes.byteLength;"video"===r.track.type&&(this.videoTrack=r.track,this.pendingBoxes.push(r.boxes));"audio"===r.track.type&&(this.audioTrack=r.track,this.pendingBoxes.unshift(r.boxes))}};Sc.prototype=new b;Sc.prototype.flush=function(h){var l=0,r={captions:[],captionStreams:{},metadata:[],info:{}},q=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==h&&"AudioSegmentStream"!==
h||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(q=this.videoTrack.timelineStartInfo.pts,hl.forEach(function(v){r.info[v]=this.videoTrack[v]},this)):this.audioTrack&&(q=this.audioTrack.timelineStartInfo.pts,gl.forEach(function(v){r.info[v]=this.audioTrack[v]},this));if(this.videoTrack||this.audioTrack){r.type=1===this.pendingTracks.length?this.pendingTracks[0].type:
"combined";this.emittedTracks+=this.pendingTracks.length;h=vd.initSegment(this.pendingTracks);r.initSegment=new Uint8Array(h.byteLength);r.initSegment.set(h);r.data=new Uint8Array(this.pendingBytes);for(h=0;h<this.pendingBoxes.length;h++)r.data.set(this.pendingBoxes[h],l),l+=this.pendingBoxes[h].byteLength;for(h=0;h<this.pendingCaptions.length;h++)l=this.pendingCaptions[h],l.startTime=ha.metadataTsToSeconds(l.startPts,q,this.keepOriginalTimestamps),l.endTime=ha.metadataTsToSeconds(l.endPts,q,this.keepOriginalTimestamps),
r.captionStreams[l.stream]=!0,r.captions.push(l);for(h=0;h<this.pendingMetadata.length;h++)l=this.pendingMetadata[h],l.cueTime=ha.metadataTsToSeconds(l.pts,q,this.keepOriginalTimestamps),r.metadata.push(l);r.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",r);for(h=0;h<r.captions.length;h++)l=r.captions[h],this.trigger("caption",
l);for(h=0;h<r.metadata.length;h++)l=r.metadata[h],this.trigger("id3Frame",l)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};Sc.prototype.setRemux=function(h){this.remuxTracks=h};var bh=function(h){var l=this,r=!0,q,v;bh.prototype.init.call(this);h=h||{};this.baseMediaDecodeTime=h.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var w={};this.transmuxPipeline_=w;w.type="aac";w.metadataStream=new Eb.MetadataStream;w.aacStream=
new $g;w.audioTimestampRolloverStream=new Eb.TimestampRolloverStream("audio");w.timedMetadataTimestampRolloverStream=new Eb.TimestampRolloverStream("timed-metadata");w.adtsStream=new Ne;w.coalesceStream=new Sc(h,w.metadataStream);w.headOfPipeline=w.aacStream;w.aacStream.pipe(w.audioTimestampRolloverStream).pipe(w.adtsStream);w.aacStream.pipe(w.timedMetadataTimestampRolloverStream).pipe(w.metadataStream).pipe(w.coalesceStream);w.metadataStream.on("timestamp",function(A){w.aacStream.setTimestamp(A.timeStamp)});
w.aacStream.on("data",function(A){"timed-metadata"!==A.type&&"audio"!==A.type||w.audioSegmentStream||(v=v||{timelineStartInfo:{baseMediaDecodeTime:l.baseMediaDecodeTime},codec:"adts",type:"audio"},w.coalesceStream.numberOfTracks++,w.audioSegmentStream=new Pe(v,h),w.audioSegmentStream.on("log",l.getLogTrigger_("audioSegmentStream")),w.audioSegmentStream.on("timingInfo",l.trigger.bind(l,"audioTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream),l.trigger("trackinfo",{hasAudio:!!v,
hasVideo:!!q}))});w.coalesceStream.on("data",this.trigger.bind(this,"data"));w.coalesceStream.on("done",this.trigger.bind(this,"done"));il(this,w)};this.setupTsPipeline=function(){var w={};this.transmuxPipeline_=w;w.type="ts";w.metadataStream=new Eb.MetadataStream;w.packetStream=new Eb.TransportPacketStream;w.parseStream=new Eb.TransportParseStream;w.elementaryStream=new Eb.ElementaryStream;w.timestampRolloverStream=new Eb.TimestampRolloverStream;w.adtsStream=new Ne;w.h264Stream=new Zg;w.captionStream=
new Eb.CaptionStream(h);w.coalesceStream=new Sc(h,w.metadataStream);w.headOfPipeline=w.packetStream;w.packetStream.pipe(w.parseStream).pipe(w.elementaryStream).pipe(w.timestampRolloverStream);w.timestampRolloverStream.pipe(w.h264Stream);w.timestampRolloverStream.pipe(w.adtsStream);w.timestampRolloverStream.pipe(w.metadataStream).pipe(w.coalesceStream);w.h264Stream.pipe(w.captionStream).pipe(w.coalesceStream);w.elementaryStream.on("data",function(A){var C;if("metadata"===A.type){for(C=A.tracks.length;C--;)q||
"video"!==A.tracks[C].type?v||"audio"!==A.tracks[C].type||(v=A.tracks[C],v.timelineStartInfo.baseMediaDecodeTime=l.baseMediaDecodeTime):(q=A.tracks[C],q.timelineStartInfo.baseMediaDecodeTime=l.baseMediaDecodeTime);q&&!w.videoSegmentStream&&(w.coalesceStream.numberOfTracks++,w.videoSegmentStream=new ah(q,h),w.videoSegmentStream.on("log",l.getLogTrigger_("videoSegmentStream")),w.videoSegmentStream.on("timelineStartInfo",function(F){v&&!h.keepOriginalTimestamps&&(v.timelineStartInfo=F,w.audioSegmentStream.setEarliestDts(F.dts-
l.baseMediaDecodeTime))}),w.videoSegmentStream.on("processedGopsInfo",l.trigger.bind(l,"gopInfo")),w.videoSegmentStream.on("segmentTimingInfo",l.trigger.bind(l,"videoSegmentTimingInfo")),w.videoSegmentStream.on("baseMediaDecodeTime",function(F){v&&w.audioSegmentStream.setVideoBaseMediaDecodeTime(F)}),w.videoSegmentStream.on("timingInfo",l.trigger.bind(l,"videoTimingInfo")),w.h264Stream.pipe(w.videoSegmentStream).pipe(w.coalesceStream));v&&!w.audioSegmentStream&&(w.coalesceStream.numberOfTracks++,
w.audioSegmentStream=new Pe(v,h),w.audioSegmentStream.on("log",l.getLogTrigger_("audioSegmentStream")),w.audioSegmentStream.on("timingInfo",l.trigger.bind(l,"audioTimingInfo")),w.audioSegmentStream.on("segmentTimingInfo",l.trigger.bind(l,"audioSegmentTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream));l.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!q})}});w.coalesceStream.on("data",this.trigger.bind(this,"data"));w.coalesceStream.on("id3Frame",function(A){A.dispatchType=w.metadataStream.dispatchType;
l.trigger("id3Frame",A)});w.coalesceStream.on("caption",this.trigger.bind(this,"caption"));w.coalesceStream.on("done",this.trigger.bind(this,"done"));il(this,w)};this.setBaseMediaDecodeTime=function(w){var A=this.transmuxPipeline_;h.keepOriginalTimestamps||(this.baseMediaDecodeTime=w);v&&(v.timelineStartInfo.dts=void 0,v.timelineStartInfo.pts=void 0,pb.clearDtsInfo(v),A.audioTimestampRolloverStream&&A.audioTimestampRolloverStream.discontinuity());q&&(A.videoSegmentStream&&(A.videoSegmentStream.gopCache_=
[]),q.timelineStartInfo.dts=void 0,q.timelineStartInfo.pts=void 0,pb.clearDtsInfo(q),A.captionStream.reset());A.timestampRolloverStream&&A.timestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(w){v&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(w)};this.setRemux=function(w){var A=this.transmuxPipeline_;h.remux=w;A&&A.coalesceStream&&A.coalesceStream.setRemux(w)};this.alignGopsWith=function(w){q&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(w)};
this.getLogTrigger_=function(w){var A=this;return function(C){C.stream=w;A.trigger("log",C)}};this.push=function(w){if(r){var A=dq(w);A&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():A||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();r=!1}this.transmuxPipeline_.headOfPipeline.push(w)};this.flush=function(){r=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};this.reset=function(){this.transmuxPipeline_.headOfPipeline&&
this.transmuxPipeline_.headOfPipeline.reset()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};bh.prototype=new b;var mc=function(h){var l=""+String.fromCharCode(h[0]);l+=String.fromCharCode(h[1]);l+=String.fromCharCode(h[2]);return l+=String.fromCharCode(h[3])},ll=function(h,l){var r=[],q;if(!l.length)return null;for(q=0;q<h.byteLength;){var v=(h[q]<<24|h[q+1]<<16|h[q+2]<<8|h[q+3])>>>0;var w=mc(h.subarray(q+4,q+8));v=1<v?q+v:h.byteLength;
w===l[0]&&(1===l.length?r.push(h.subarray(q+8,v)):(q=ll(h.subarray(q+8,v),l.slice(1)),q.length&&(r=r.concat(q))));q=v}return r},oa=ll,ml=function(h){var l={version:h[0],flags:new Uint8Array(h.subarray(1,4))};l.baseMediaDecodeTime=1===l.version?e(h.subarray(4)):(h[4]<<24|h[5]<<16|h[6]<<8|h[7])>>>0;return l},nl=function(h){return{isLeading:(h[0]&12)>>>2,dependsOn:h[0]&3,isDependedOn:(h[1]&192)>>>6,hasRedundancy:(h[1]&48)>>>4,paddingValue:(h[1]&14)>>>1,isNonSyncSample:h[1]&1,degradationPriority:h[2]<<
8|h[3]}},ol=function(h){var l={version:h[0],flags:new Uint8Array(h.subarray(1,4)),samples:[]},r=new DataView(h.buffer,h.byteOffset,h.byteLength),q=l.flags[2]&1,v=l.flags[2]&4,w=l.flags[1]&1,A=l.flags[1]&2,C=l.flags[1]&4,F=l.flags[1]&8,I=r.getUint32(4),N=8;q&&(l.dataOffset=r.getInt32(N),N+=4);v&&I&&(q={flags:nl(h.subarray(N,N+4))},N+=4,w&&(q.duration=r.getUint32(N),N+=4),A&&(q.size=r.getUint32(N),N+=4),F&&(q.compositionTimeOffset=1===l.version?r.getInt32(N):r.getUint32(N),N+=4),l.samples.push(q),I--);
for(;I--;)q={},w&&(q.duration=r.getUint32(N),N+=4),A&&(q.size=r.getUint32(N),N+=4),C&&(q.flags=nl(h.subarray(N,N+4)),N+=4),F&&(q.compositionTimeOffset=1===l.version?r.getInt32(N):r.getUint32(N),N+=4),l.samples.push(q);return l},pl=function(h){var l=new DataView(h.buffer,h.byteOffset,h.byteLength);h={version:h[0],flags:new Uint8Array(h.subarray(1,4)),trackId:l.getUint32(4)};var r=h.flags[2]&1,q=h.flags[2]&2,v=h.flags[2]&8,w=h.flags[2]&16,A=h.flags[2]&32,C=h.flags[0]&65536,F=h.flags[0]&131072;var I=
8;r&&(I+=4,h.baseDataOffset=l.getUint32(12),I+=4);q&&(h.sampleDescriptionIndex=l.getUint32(I),I+=4);v&&(h.defaultSampleDuration=l.getUint32(I),I+=4);w&&(h.defaultSampleSize=l.getUint32(I),I+=4);A&&(h.defaultSampleFlags=l.getUint32(I));C&&(h.durationIsEmpty=!0);!r&&F&&(h.baseDataOffsetIsMoof=!0);return h},Cd="undefined"!==typeof window?window:"undefined"!==typeof a?a:"undefined"!==typeof self?self:{},gq=wd.discardEmulationPreventionBytes,hq=function(h,l,r){var q=l,v=r.defaultSampleDuration||0,w=r.defaultSampleSize||
0,A=r.trackId,C=[];h.forEach(function(F){F=ol(F).samples;F.forEach(function(I){void 0===I.duration&&(I.duration=v);void 0===I.size&&(I.size=w);I.trackId=A;I.dts=q;void 0===I.compositionTimeOffset&&(I.compositionTimeOffset=0);"bigint"===typeof q?(I.pts=q+Cd.BigInt(I.compositionTimeOffset),q+=Cd.BigInt(I.duration)):(I.pts=q+I.compositionTimeOffset,q+=I.duration)});C=C.concat(F)});return C},iq=function(h,l){var r=oa(h,["moof","traf"]),q={},v=[];oa(h,["mdat"]).forEach(function(w,A){v.push({mdat:w,traf:r[A]})});
v.forEach(function(w){var A=w.mdat,C=w.traf;w=oa(C,["tfhd"]);var F=pl(w[0]);w=F.trackId;var I=oa(C,["tfdt"]);I=0<I.length?ml(I[0]).baseMediaDecodeTime:0;C=oa(C,["trun"]);if(l===w&&0<C.length){C=hq(C,I,F);F=new DataView(A.buffer,A.byteOffset,A.byteLength);I=[];var N=[],L;for(L=0;L+4<A.length;L+=X){var X=F.getUint32(L);L+=4;if(!(0>=X))switch(A[L]&31){case 6:var S=A.subarray(L+1,L+1+X);a:{var da=L;for(var eb=0;eb<C.length;eb++){var zd=C[eb];if(da<zd.size){da=zd;break a}da-=zd.size}da=null}S={nalUnitType:"sei_rbsp",
size:X,data:S,escapedRBSP:gq(S),trackId:w};if(da){S.pts=da.pts;S.dts=da.dts;var Ha=da}else if(Ha)S.pts=Ha.pts,S.dts=Ha.dts;else{I.push({level:"warn",message:"We've encountered a nal unit without data at "+L+" for trackId "+w+". See mux.js#223."});break}N.push(S)}}q[w]||(q[w]={seiNals:[],logs:[]});q[w].seiNals=q[w].seiNals.concat(N);q[w].logs=q[w].logs.concat(I)}});return q},jq=function(){var h=!1,l,r,q,v,w,A;this.isInitialized=function(){return h};this.init=function(C){l=new al;h=!0;A=C?C.isPartial:
!1;l.on("data",function(F){F.startTime=F.startPts/v;F.endTime=F.endPts/v;w.captions.push(F);w.captionStreams[F.stream]=!0});l.on("log",function(F){w.logs.push(F)})};this.isNewInit=function(C,F){return C&&0===C.length||F&&"object"===typeof F&&0===Object.keys(F).length?!1:q!==C[0]||v!==F[q]};this.parse=function(C,F,I){if(this.isInitialized()){if(!F||!I)return null;if(this.isNewInit(F,I))q=F[0],v=I[q];else if(null===q||!v)return r.push(C),null}else return null;for(;0<r.length;){var N=r.shift();this.parse(N,
F,I)}I=q;F=v;null===I?C=null:(C=iq(C,I)[I]||{},C={seiNals:C.seiNals,logs:C.logs,timescale:F});C&&C.logs&&(w.logs=w.logs.concat(C.logs));if(null===C||!C.seiNals)return w.logs.length?{logs:w.logs,captions:[],captionStreams:[]}:null;this.pushNals(C.seiNals);this.flushStream();return w};this.pushNals=function(C){if(!this.isInitialized()||!C||0===C.length)return null;C.forEach(function(F){l.push(F)})};this.flushStream=function(){if(!this.isInitialized())return null;A?l.partialFlush():l.flush()};this.clearParsedCaptions=
function(){w.captions=[];w.captionStreams={};w.logs=[]};this.resetCaptionStream=function(){if(!this.isInitialized())return null;l.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){r=[];v=q=null;w?this.clearParsedCaptions():w={captions:[],captionStreams:{},logs:[]};this.resetCaptionStream()};this.reset()},Qe=function(h){for(var l=0,r=String.fromCharCode(h[l]),q="";"\x00"!==r;)q+=r,l++,r=String.fromCharCode(h[l]);return q+r},ql=function(h){return void 0!==
h||null!==h},Dd=function(h){return("00"+h.toString(16)).slice(-2)},ch={parseEmsgBox:function(h){var l=4,r=h[0];if(0===r){var q=Qe(h.subarray(l));l+=q.length;var v=Qe(h.subarray(l));l+=v.length;var w=new DataView(h.buffer);var A=w.getUint32(l);l+=4;var C=w.getUint32(l);l+=4;var F=w.getUint32(l);l+=4;w=w.getUint32(l);l+=4}else if(1===r){w=new DataView(h.buffer);A=w.getUint32(l);l+=4;var I=e(h.subarray(l));l+=8;F=w.getUint32(l);l+=4;w=w.getUint32(l);l+=4;q=Qe(h.subarray(l));l+=q.length;v=Qe(h.subarray(l));
l+=v.length}h=new Uint8Array(h.subarray(l,h.byteLength));q={scheme_id_uri:q,value:v,timescale:A?A:1,presentation_time:I,presentation_time_delta:C,event_duration:F,id:w,message_data:h};A="\x00"!==q.scheme_id_uri;v=0===r&&ql(q.presentation_time_delta)&&A;A=1===r&&ql(q.presentation_time)&&A;return!(1<r)&&v||A?q:void 0},scaleTime:function(h,l,r,q){return h||0===h?h/l:q+r/l}},kq=Nb.parseId3Frames;var rl=function(h){var l=0===h[0]?12:20;return(h[l]<<24|h[l+1]<<16|h[l+2]<<8|h[l+3])>>>0};var dh={findBox:oa,
parseType:mc,timescale:function(h){return oa(h,["moov","trak"]).reduce(function(l,r){var q=oa(r,["tkhd"])[0];if(!q)return null;var v=q[0];v=0===v?12:20;q=(q[v]<<24|q[v+1]<<16|q[v+2]<<8|q[v+3])>>>0;r=oa(r,["mdia","mdhd"])[0];if(!r)return null;v=r[0];v=0===v?12:20;l[q]=(r[v]<<24|r[v+1]<<16|r[v+2]<<8|r[v+3])>>>0;return l},{})},startTime:function(h,l){l=oa(l,["moof","traf"]).reduce(function(r,q){var v=oa(q,["tfhd"])[0];v=h[(v[4]<<24|v[5]<<16|v[6]<<8|v[7])>>>0]||9E4;q=oa(q,["tfdt"])[0];var w=new DataView(q.buffer,
q.byteOffset,q.byteLength);q=1===q[0]?e(q.subarray(4,12)):w.getUint32(4);let A;"bigint"===typeof q?A=q/Cd.BigInt(v):"number"!==typeof q||isNaN(q)||(A=q/v);A<Number.MAX_SAFE_INTEGER&&(A=Number(A));A<r&&(r=A);return r},Infinity);return"bigint"===typeof l||isFinite(l)?l:0},compositionStartTime:function(h,l){var r=oa(l,["moof","traf"]),q=l=0;if(r&&r.length){var v=oa(r[0],["tfhd"])[0],w=oa(r[0],["trun"])[0];r=oa(r[0],["tfdt"])[0];if(v)var A=pl(v).trackId;r&&(l=ml(r).baseMediaDecodeTime);w&&(v=ol(w),v.samples&&
v.samples.length&&(q=v.samples[0].compositionTimeOffset||0))}h=h[A]||9E4;"bigint"===typeof l&&(q=Cd.BigInt(q),h=Cd.BigInt(h));h=(l+q)/h;"bigint"===typeof h&&h<Number.MAX_SAFE_INTEGER&&(h=Number(h));return h},videoTrackIds:function(h){var l=[];oa(h,["moov","trak"]).forEach(function(r){var q=oa(r,["mdia","hdlr"]),v=oa(r,["tkhd"]);q.forEach(function(w,A){w=mc(w.subarray(8,12));A=v[A];"vide"===w&&(A=new DataView(A.buffer,A.byteOffset,A.byteLength),w=A.getUint8(0),A=0===w?A.getUint32(12):A.getUint32(20),
l.push(A))})});return l},tracks:function(h){var l=[];oa(h,["moov","trak"]).forEach(function(r){var q={},v=oa(r,["tkhd"])[0];if(v){v=new DataView(v.buffer,v.byteOffset,v.byteLength);var w=v.getUint8(0);q.id=0===w?v.getUint32(12):v.getUint32(20)}if(v=oa(r,["mdia","hdlr"])[0])v=mc(v.subarray(8,12)),q.type="vide"===v?"video":"soun"===v?"audio":v;if(v=oa(r,["mdia","minf","stbl","stsd"])[0])if(v=v.subarray(8),q.codec=mc(v.subarray(4,8)),v=oa(v,[q.codec])[0])/^[asm]vc[1-9]$/i.test(q.codec)?(v=v.subarray(78),
w=mc(v.subarray(4,8)),"avcC"===w&&11<v.length?(q.codec+=".",q.codec+=Dd(v[9]),q.codec+=Dd(v[10]),q.codec+=Dd(v[11])):q.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(q.codec)?(v=v.subarray(28),w=mc(v.subarray(4,8)),"esds"===w&&20<v.length&&0!==v[19]?(q.codec+="."+Dd(v[19]),q.codec+="."+Dd(v[20]>>>2&63).replace(/^0/,"")):q.codec="mp4a.40.2"):q.codec=q.codec.toLowerCase();if(r=oa(r,["mdia","mdhd"])[0])q.timescale=rl(r);l.push(q)});return l},getTimescaleFromMediaHeader:rl,getEmsgID3:function(h,l=0){return oa(h,
["emsg"]).map(r=>{r=ch.parseEmsgBox(new Uint8Array(r));var q=kq(r.message_data);return{cueTime:ch.scaleTime(r.presentation_time,r.timescale,r.presentation_time_delta,l),duration:ch.scaleTime(r.event_duration,r.timescale),frames:q}})}},sl=function(h){var l=h[1]&31;return l=l<<8|h[2]},Re=function(h){return!!(h[1]&64)},Se=function(h){var l=0;1<(h[3]&48)>>>4&&(l+=h[4]+1);return l},eh=function(h){switch(h){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";
case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var ya={parseType:function(h,l){h=sl(h);return 0===h?"pat":h===l?"pmt":l?"pes":null},parsePat:function(h){var l=Re(h),r=4+Se(h);l&&(r+=h[r]+1);return(h[r+10]&31)<<8|h[r+11]},parsePmt:function(h){var l={},r=Re(h),q=4+Se(h);r&&(q+=h[q]+1);if(h[q+5]&1){r=3+((h[q+1]&15)<<8|h[q+2])-4;for(var v=12+((h[q+10]&15)<<8|h[q+11]);v<r;){var w=q+v;l[(h[w+1]&31)<<8|h[w+2]]=h[w];v+=((h[w+3]&15)<<8|h[w+4])+5}return l}},
parsePayloadUnitStartIndicator:Re,parsePesType:function(h,l){h=sl(h);switch(l[h]){case Ja.H264_STREAM_TYPE:return"video";case Ja.ADTS_STREAM_TYPE:return"audio";case Ja.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(h){if(!Re(h))return null;var l=4+Se(h);if(l>=h.byteLength)return null;var r=null;var q=h[l+7];q&192&&(r={},r.pts=(h[l+9]&14)<<27|(h[l+10]&255)<<20|(h[l+11]&254)<<12|(h[l+12]&255)<<5|(h[l+13]&254)>>>3,r.pts*=4,r.pts+=(h[l+13]&6)>>>1,r.dts=r.pts,q&
64&&(r.dts=(h[l+14]&14)<<27|(h[l+15]&255)<<20|(h[l+16]&254)<<12|(h[l+17]&255)<<5|(h[l+18]&254)>>>3,r.dts*=4,r.dts+=(h[l+18]&6)>>>1));return r},videoPacketContainsKeyFrame:function(h){var l=4+Se(h);h=h.subarray(l);for(var r=l=0,q=!1;r<h.byteLength-3;r++)if(1===h[r+2]){l=r+5;break}for(;l<h.byteLength;)switch(h[l]){case 0:if(0!==h[l-1]){l+=2;break}else if(0!==h[l-2]){l++;break}r+3!==l-2&&(r=eh(h[r+3]&31),"slice_layer_without_partitioning_rbsp_idr"===r&&(q=!0));do l++;while(1!==h[l]&&l<h.length);r=l-
2;l+=3;break;case 1:if(0!==h[l-1]||0!==h[l-2]){l+=3;break}r=eh(h[r+3]&31);"slice_layer_without_partitioning_rbsp_idr"===r&&(q=!0);r=l-2;l+=3;break;default:l+=3}h=h.subarray(r);l-=r;h&&3<h.byteLength&&(r=eh(h[3]&31),"slice_layer_without_partitioning_rbsp_idr"===r&&(q=!0));return q}};var nc=ha.ONE_SECOND_IN_TS,lq=function(h,l){for(var r=0,q=188,v,w;q<h.byteLength;)if(71===h[r]&&71===h[q]){v=h.subarray(r,q);w=ya.parseType(v,l.pid);switch(w){case "pat":l.pid=ya.parsePat(v);break;case "pmt":var A=ya.parsePmt(v);
l.table=l.table||{};Object.keys(A).forEach(function(C){l.table[C]=A[C]})}r+=188;q+=188}else r++,q++},tl=function(h,l,r){for(var q=0,v=188,w,A,C,F=!1;v<=h.byteLength;)if(71!==h[q]||71!==h[v]&&v!==h.byteLength)q++,v++;else{w=h.subarray(q,v);A=ya.parseType(w,l.pid);switch(A){case "pes":if(A=ya.parsePesType(w,l.table),C=ya.parsePayloadUnitStartIndicator(w),"audio"===A&&C&&(w=ya.parsePesTime(w)))w.type="audio",r.audio.push(w),F=!0}if(F)break;q+=188;v+=188}v=h.byteLength;q=v-188;for(F=!1;0<=q;)if(71!==
h[q]||71!==h[v]&&v!==h.byteLength)q--,v--;else{w=h.subarray(q,v);A=ya.parseType(w,l.pid);switch(A){case "pes":if(A=ya.parsePesType(w,l.table),C=ya.parsePayloadUnitStartIndicator(w),"audio"===A&&C&&(w=ya.parsePesTime(w)))w.type="audio",r.audio.push(w),F=!0}if(F)break;q-=188;v-=188}},mq=function(h,l){if(h.audio&&h.audio.length){var r=l;if("undefined"===typeof r||isNaN(r))r=h.audio[0].dts;h.audio.forEach(function(v){v.dts=$b(v.dts,r);v.pts=$b(v.pts,r);v.dtsTime=v.dts/nc;v.ptsTime=v.pts/nc})}if(h.video&&
h.video.length){var q=l;if("undefined"===typeof q||isNaN(q))q=h.video[0].dts;h.video.forEach(function(v){v.dts=$b(v.dts,q);v.pts=$b(v.pts,q);v.dtsTime=v.dts/nc;v.ptsTime=v.pts/nc});h.firstKeyFrame&&(h=h.firstKeyFrame,h.dts=$b(h.dts,q),h.pts=$b(h.pts,q),h.dtsTime=h.dts/nc,h.ptsTime=h.pts/nc)}},nq={inspect:function(h,l){if(Ob.isLikelyAacData(h))a:{for(var r=!1,q=0,v=null,w=null,A=0,C=0,F;3<=h.length-C;){switch(Ob.parseType(h,C)){case "timed-metadata":if(10>h.length-C){r=!0;break}A=Ob.parseId3TagSize(h,
C);if(A>h.length){r=!0;break}null===w&&(F=h.subarray(C,C+A),w=Ob.parseAacTimestamp(F));C+=A;break;case "audio":if(7>h.length-C){r=!0;break}A=Ob.parseAdtsSize(h,C);if(A>h.length){r=!0;break}null===v&&(F=h.subarray(C,C+A),v=Ob.parseSampleRate(F));q++;C+=A;break;default:C++}if(r){h=null;break a}}null===v||null===w?h=null:(h=nc/v,h={audio:[{type:"audio",dts:w,pts:w},{type:"audio",dts:w+1024*q*h,pts:w+1024*q*h}]})}else{q={pid:null,table:null};w={};lq(h,q);for(r in q.table)if(q.table.hasOwnProperty(r))switch(q.table[r]){case Ja.H264_STREAM_TYPE:w.video=
[];var I=void 0,N=void 0,L=void 0;v=N=L=N=L=void 0;A=h;C=q;F=w;var X=0,S=188,da=!1,eb=[];for(I=0;S<A.byteLength;)if(71===A[X]&&71===A[S]){v=A.subarray(X,S);N=ya.parseType(v,C.pid);switch(N){case "pes":if(L=ya.parsePesType(v,C.table),N=ya.parsePayloadUnitStartIndicator(v),"video"===L)if(N&&!da&&(L=ya.parsePesTime(v))&&(L.type="video",F.video.push(L),da=!0),!F.firstKeyFrame){if(N&&0!==I){L=new Uint8Array(I);for(N=0;eb.length;)I=eb.shift(),L.set(I,N),N+=I.byteLength;ya.videoPacketContainsKeyFrame(L)&&
((I=ya.parsePesTime(L))?(F.firstKeyFrame=I,F.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));I=0}eb.push(v);I+=v.byteLength}}if(da&&F.firstKeyFrame)break;X+=188;S+=188}else X++,S++;S=A.byteLength;X=S-188;for(da=!1;0<=X;)if(71===
A[X]&&71===A[S]){v=A.subarray(X,S);N=ya.parseType(v,C.pid);switch(N){case "pes":if(L=ya.parsePesType(v,C.table),N=ya.parsePayloadUnitStartIndicator(v),"video"===L&&N&&(L=ya.parsePesTime(v)))L.type="video",F.video.push(L),da=!0}if(da)break;X-=188;S-=188}else X--,S--;0===w.video.length&&delete w.video;break;case Ja.ADTS_STREAM_TYPE:w.audio=[],tl(h,q,w),0===w.audio.length&&delete w.audio}h=w}if(!h||!h.audio&&!h.video)return null;mq(h,l);return h},parseAudioPes_:tl};const oq=function(h,l){l.on("data",
function(r){var q=r.initSegment;r.initSegment={data:q.buffer,byteOffset:q.byteOffset,byteLength:q.byteLength};q=r.data;r.data=q.buffer;h.postMessage({action:"data",segment:r,byteOffset:q.byteOffset,byteLength:q.byteLength},[r.data])});l.on("done",function(r){h.postMessage({action:"done"})});l.on("gopInfo",function(r){h.postMessage({action:"gopInfo",gopInfo:r})});l.on("videoSegmentTimingInfo",function(r){const q={start:{decode:ha.videoTsToSeconds(r.start.dts),presentation:ha.videoTsToSeconds(r.start.pts)},
end:{decode:ha.videoTsToSeconds(r.end.dts),presentation:ha.videoTsToSeconds(r.end.pts)},baseMediaDecodeTime:ha.videoTsToSeconds(r.baseMediaDecodeTime)};r.prependedContentDuration&&(q.prependedContentDuration=ha.videoTsToSeconds(r.prependedContentDuration));h.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:q})});l.on("audioSegmentTimingInfo",function(r){const q={start:{decode:ha.videoTsToSeconds(r.start.dts),presentation:ha.videoTsToSeconds(r.start.pts)},end:{decode:ha.videoTsToSeconds(r.end.dts),
presentation:ha.videoTsToSeconds(r.end.pts)},baseMediaDecodeTime:ha.videoTsToSeconds(r.baseMediaDecodeTime)};r.prependedContentDuration&&(q.prependedContentDuration=ha.videoTsToSeconds(r.prependedContentDuration));h.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:q})});l.on("id3Frame",function(r){h.postMessage({action:"id3Frame",id3Frame:r})});l.on("caption",function(r){h.postMessage({action:"caption",caption:r})});l.on("trackinfo",function(r){h.postMessage({action:"trackinfo",
trackInfo:r})});l.on("audioTimingInfo",function(r){h.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ha.videoTsToSeconds(r.start),end:ha.videoTsToSeconds(r.end)}})});l.on("videoTimingInfo",function(r){h.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ha.videoTsToSeconds(r.start),end:ha.videoTsToSeconds(r.end)}})});l.on("log",function(r){h.postMessage({action:"log",log:r})})};class ul{constructor(h,l){this.options=l||{};this.self=h;this.init()}init(){this.transmuxer&&this.transmuxer.dispose();
this.transmuxer=new bh(this.options);oq(this.self,this.transmuxer)}pushMp4Captions(h){this.captionParser||(this.captionParser=new jq,this.captionParser.init());const l=new Uint8Array(h.data,h.byteOffset,h.byteLength);h=this.captionParser.parse(l,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:h&&h.captions||[],logs:h&&h.logs||[],data:l.buffer},[l.buffer])}probeMp4StartTime({timescales:h,data:l}){h=dh.startTime(h,l);this.self.postMessage({action:"probeMp4StartTime",startTime:h,
data:l},[l.buffer])}probeMp4Tracks({data:h}){const l=dh.tracks(h);this.self.postMessage({action:"probeMp4Tracks",tracks:l,data:h},[h.buffer])}probeEmsgID3({data:h,offset:l}){l=dh.getEmsgID3(h,l);this.self.postMessage({action:"probeEmsgID3",id3Frames:l,emsgData:h},[h.buffer])}probeTs({data:h,baseStartTime:l}){l="number"!==typeof l||isNaN(l)?void 0:l*ha.ONE_SECOND_IN_TS;l=nq.inspect(h,l);let r=null;l&&(r={hasVideo:l.video&&2===l.video.length||!1,hasAudio:l.audio&&2===l.audio.length||!1},r.hasVideo&&
(r.videoStart=l.video[0].ptsTime),r.hasAudio&&(r.audioStart=l.audio[0].ptsTime));this.self.postMessage({action:"probeTs",result:r,data:h},[h.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(h){h=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(h)}reset(){this.transmuxer.reset()}setTimestampOffset(h){this.transmuxer.setBaseMediaDecodeTime(Math.round(ha.secondsToVideoTs(h.timestampOffset||
0)))}setAudioAppendStart(h){this.transmuxer.setAudioAppendStart(Math.ceil(ha.secondsToVideoTs(h.appendStart)))}setRemux(h){this.transmuxer.setRemux(h.remux)}flush(h){this.transmuxer.flush();self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline();self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())}}self.onmessage=function(h){if("init"===h.data.action&&h.data.options)this.messageHandlers=
new ul(self,h.data.options);else if(this.messageHandlers||(this.messageHandlers=new ul(self)),h.data&&h.data.action&&"init"!==h.data.action&&this.messageHandlers[h.data.action])this.messageHandlers[h.data.action](h.data)}}));var qq=Tk(pq);const rq=({transmuxedData:a,callback:b})=>{a.buffer=[];b(a)},vl=a=>{const {transmuxer:b,bytes:c,audioAppendStart:e,gopsToAlignWith:g,remux:m,onData:p,onTrackInfo:u,onAudioTimingInfo:x,onVideoTimingInfo:y,onVideoSegmentTimingInfo:B,onAudioSegmentTimingInfo:z,onId3:E,
onCaptions:J,onDone:G,onEndedTimeline:O,onTransmuxerLog:R,isEndOfTimeline:W}=a,T={buffer:[]};let ea=W;b.onmessage=K=>{if(b.currentTransmux===a){if("data"===K.data.action){const {type:ta,initSegment:Ea,captions:V,captionStreams:Ca,metadata:Qg,videoFrameDtsTime:Ge,videoFramePtsTime:Fe}=K.data.segment;T.buffer.push({captions:V,captionStreams:Ca,metadata:Qg});var ba=K.data.segment.boxes||{data:K.data.segment.data};ba={type:ta,data:new Uint8Array(ba.data,ba.data.byteOffset,ba.data.byteLength),initSegment:new Uint8Array(Ea.data,
Ea.byteOffset,Ea.byteLength)};"undefined"!==typeof Ge&&(ba.videoFrameDtsTime=Ge);"undefined"!==typeof Fe&&(ba.videoFramePtsTime=Fe);p(ba)}"trackinfo"===K.data.action&&u(K.data.trackInfo);"gopInfo"===K.data.action&&(T.gopInfo=K.data.gopInfo);"audioTimingInfo"===K.data.action&&x(K.data.audioTimingInfo);"videoTimingInfo"===K.data.action&&y(K.data.videoTimingInfo);"videoSegmentTimingInfo"===K.data.action&&B(K.data.videoSegmentTimingInfo);"audioSegmentTimingInfo"===K.data.action&&z(K.data.audioSegmentTimingInfo);
"id3Frame"===K.data.action&&E([K.data.id3Frame],K.data.id3Frame.dispatchType);"caption"===K.data.action&&J(K.data.caption);"endedtimeline"===K.data.action&&(ea=!1,O());"log"===K.data.action&&R(K.data.log);"transmuxed"!==K.data.type||ea||(b.onmessage=null,rq({transmuxedData:T,callback:G}),fh(b))}};e&&b.postMessage({action:"setAudioAppendStart",appendStart:e});Array.isArray(g)&&b.postMessage({action:"alignGopsWith",gopsToAlignWith:g});"undefined"!==typeof m&&b.postMessage({action:"setRemux",remux:m});
if(c.byteLength){const K=c instanceof ArrayBuffer?c:c.buffer;b.postMessage({action:"push",data:K,byteOffset:c instanceof ArrayBuffer?0:c.byteOffset,byteLength:c.byteLength},[K])}W&&b.postMessage({action:"endTimeline"});b.postMessage({action:"flush"})},fh=a=>{a.currentTransmux=null;a.transmuxQueue.length&&(a.currentTransmux=a.transmuxQueue.shift(),"function"===typeof a.currentTransmux?a.currentTransmux():vl(a.currentTransmux))},sq=(a,b)=>{a.postMessage({action:b});fh(a)},wl=(a,b)=>{b.currentTransmux?
b.transmuxQueue.push(sq.bind(null,b,a)):(b.currentTransmux=a,b.postMessage({action:a}),fh(b))},xl=a=>{a.transmuxer.currentTransmux?a.transmuxer.transmuxQueue.push(a):(a.transmuxer.currentTransmux=a,vl(a))};var gh={reset:a=>{wl("reset",a)},endTimeline:a=>{wl("endTimeline",a)},transmux:xl,createTransmuxer:a=>{const b=new qq;b.currentTransmux=null;b.transmuxQueue=[];const c=b.terminate;b.terminate=()=>{b.currentTransmux=null;b.transmuxQueue.length=0;return c.call(b)};b.postMessage({action:"init",options:a});
return b}};const Ed=function(a){const b=a.transmuxer,c=a.endAction||a.action,e=a.callback,g=Rb({},a,{endAction:null,transmuxer:null,callback:null}),m=p=>{p.data.action===c&&(b.removeEventListener("message",m),p.data.data&&(p.data.data=new Uint8Array(p.data.data,a.byteOffset||0,a.byteLength||p.data.data.byteLength),a.data&&(a.data=p.data.data)),e(p.data))};b.addEventListener("message",m);if(a.data){const p=a.data instanceof ArrayBuffer;g.byteOffset=p?0:a.data.byteOffset;g.byteLength=a.data.byteLength;
b.postMessage(g,[p?a.data:a.data.buffer])}else b.postMessage(g)},hh=a=>{a.forEach(b=>{b.abort()})},ih=(a,b)=>b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:-101,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:-102,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:2,xhr:b}:"arraybuffer"===b.responseType&&0===b.response.byteLength?{status:b.status,message:"Empty HLS response at URL: "+b.uri,code:2,xhr:b}:
null,yl=(a,b,c)=>(e,g)=>{var m=g.response;if(e=ih(e,g))return c(e,a);if(16!==m.byteLength)return c({status:g.status,message:"Invalid HLS key at URL: "+g.uri,code:2,xhr:g},a);g=new DataView(m);g=new Uint32Array([g.getUint32(0),g.getUint32(4),g.getUint32(8),g.getUint32(12)]);for(m=0;m<b.length;m++)b[m].bytes=g;return c(null,a)},zl=(a,b)=>{const c=Zf(a.map.bytes);if("mp4"!==c)return b({internal:!0,message:`Found unsupported ${c||"unknown"} container for initialization segment at URL: ${a.map.resolvedUri||
a.map.uri}`,code:2});Ed({action:"probeMp4Tracks",data:a.map.bytes,transmuxer:a.transmuxer,callback:({tracks:e,data:g})=>{a.map.bytes=g;e.forEach(function(m){a.map.tracks=a.map.tracks||{};a.map.tracks[m.type]||(a.map.tracks[m.type]=m,"number"===typeof m.id&&m.timescale&&(a.map.timescales=a.map.timescales||{},a.map.timescales[m.id]=m.timescale))});return b(null)}})},tq=({segment:a,finishProcessingFn:b})=>(c,e)=>{if(c=ih(c,e))return b(c,a);c=new Uint8Array(e.response);if(a.map.key)return a.map.encryptedBytes=
c,b(null,a);a.map.bytes=c;zl(a,function(g){if(g)return g.xhr=e,g.status=e.status,b(g,a);b(null,a)})},uq=({segment:a,finishProcessingFn:b,responseType:c})=>(e,g)=>{if(e=ih(e,g))return b(e,a);if("arraybuffer"!==c&&g.responseText){e=g.responseText.substring(a.lastReachedChar||0);const m=new Uint8Array(new ArrayBuffer(e.length));for(let p=0;p<e.length;p++)m[p]=e.charCodeAt(p);e=m.buffer}else e=g.response;a.stats={bandwidth:g.bandwidth,bytesReceived:g.bytesReceived||0,roundTripTime:g.roundTripTime||0};
a.key?a.encryptedBytes=new Uint8Array(e):a.bytes=new Uint8Array(e);return b(null,a)},vq=({segment:a,bytes:b,trackInfoFn:c,timingInfoFn:e,videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:m,id3Fn:p,captionsFn:u,isEndOfTimeline:x,endedTimelineFn:y,dataFn:B,doneFn:z,onTransmuxerLog:E})=>{const J=a.map&&a.map.tracks||{},G=!(!J.audio||!J.video);let O=e.bind(null,a,"audio","start");const R=e.bind(null,a,"audio","end");let W=e.bind(null,a,"video","start");const T=e.bind(null,a,"video","end"),ea=()=>xl({bytes:b,
transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,remux:G,onData:K=>{K.type="combined"===K.type?"video":K.type;B(a,K)},onTrackInfo:K=>{c&&(G&&(K.isMuxed=!0),c(a,K))},onAudioTimingInfo:K=>{O&&"undefined"!==typeof K.start&&(O(K.start),O=null);R&&"undefined"!==typeof K.end&&R(K.end)},onVideoTimingInfo:K=>{W&&"undefined"!==typeof K.start&&(W(K.start),W=null);T&&"undefined"!==typeof K.end&&T(K.end)},onVideoSegmentTimingInfo:K=>{g(K)},onAudioSegmentTimingInfo:K=>
{m(K)},onId3:(K,ba)=>{p(a,K,ba)},onCaptions:K=>{u(a,[K])},isEndOfTimeline:x,onEndedTimeline:()=>{y()},onTransmuxerLog:E,onDone:K=>{z&&(K.type="combined"===K.type?"video":K.type,z(null,a,K))}});Ed({action:"probeTs",transmuxer:a.transmuxer,data:b,baseStartTime:a.baseStartTime,callback:K=>{a.bytes=b=K.data;if(K=K.result)c(a,{hasAudio:K.hasAudio,hasVideo:K.hasVideo,isMuxed:G}),c=null,K.hasAudio&&!G&&O(K.audioStart),K.hasVideo&&W(K.videoStart),W=O=null;ea()}})},Al=({segment:a,bytes:b,trackInfoFn:c,timingInfoFn:e,
videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:m,id3Fn:p,captionsFn:u,isEndOfTimeline:x,endedTimelineFn:y,dataFn:B,doneFn:z,onTransmuxerLog:E})=>{let J=new Uint8Array(b);if(0<co(J,["moof"]).length){a.isFmp4=!0;const {tracks:G}=a.map,O={isFmp4:!0,hasVideo:!!G.video,hasAudio:!!G.audio};G.audio&&G.audio.codec&&"enca"!==G.audio.codec&&(O.audioCodec=G.audio.codec);G.video&&G.video.codec&&"encv"!==G.video.codec&&(O.videoCodec=G.video.codec);G.video&&G.audio&&(O.isMuxed=!0);c(a,O);const R=(W,T)=>{B(a,
{data:J,type:O.hasAudio&&!O.isMuxed?"audio":"video"});T&&T.length&&p(a,T);W&&W.length&&u(a,W);z(null,a,{})};Ed({action:"probeMp4StartTime",timescales:a.map.timescales,data:J,transmuxer:a.transmuxer,callback:({data:W,startTime:T})=>{b=W.buffer;a.bytes=J=W;O.hasAudio&&!O.isMuxed&&e(a,"audio","start",T);O.hasVideo&&e(a,"video","start",T);Ed({action:"probeEmsgID3",data:J,transmuxer:a.transmuxer,offset:T,callback:({emsgData:ea,id3Frames:K})=>{b=ea.buffer;a.bytes=J=ea;G.video&&W.byteLength&&a.transmuxer?
Ed({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:a.transmuxer,data:J,timescales:a.map.timescales,trackIds:[G.video.id],callback:ba=>{b=ba.data.buffer;a.bytes=J=ba.data;ba.logs.forEach(function(ta){E(ka(ta,{stream:"mp4CaptionParser"}))});R(ba.captions,K)}}):R(void 0,K)}})}})}else a.transmuxer?("undefined"===typeof a.container&&(a.container=Zf(J)),"ts"!==a.container&&"aac"!==a.container?(c(a,{hasAudio:!1,hasVideo:!1}),z(null,a,{})):vq({segment:a,bytes:b,trackInfoFn:c,timingInfoFn:e,videoSegmentTimingInfoFn:g,
audioSegmentTimingInfoFn:m,id3Fn:p,captionsFn:u,isEndOfTimeline:x,endedTimelineFn:y,dataFn:B,doneFn:z,onTransmuxerLog:E})):z(null,a,{})},Bl=function({id:a,key:b,encryptedBytes:c,decryptionWorker:e},g){const m=u=>{u.data.source===a&&(e.removeEventListener("message",m),u=u.data.decrypted,g(new Uint8Array(u.bytes,u.byteOffset,u.byteLength)))};e.addEventListener("message",m);let p;p=b.bytes.slice?b.bytes.slice():new Uint32Array(Array.prototype.slice.call(b.bytes));e.postMessage(Mk({source:a,encrypted:c,
key:p,iv:b.iv}),[c.buffer,p.buffer])},wq=({decryptionWorker:a,segment:b,trackInfoFn:c,timingInfoFn:e,videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:m,id3Fn:p,captionsFn:u,isEndOfTimeline:x,endedTimelineFn:y,dataFn:B,doneFn:z,onTransmuxerLog:E})=>{Bl({id:b.requestId,key:b.key,encryptedBytes:b.encryptedBytes,decryptionWorker:a},J=>{b.bytes=J;Al({segment:b,bytes:b.bytes,trackInfoFn:c,timingInfoFn:e,videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:m,id3Fn:p,captionsFn:u,isEndOfTimeline:x,endedTimelineFn:y,
dataFn:B,doneFn:z,onTransmuxerLog:E})})},xq=({activeXhrs:a,decryptionWorker:b,trackInfoFn:c,timingInfoFn:e,videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:m,id3Fn:p,captionsFn:u,isEndOfTimeline:x,endedTimelineFn:y,dataFn:B,doneFn:z,onTransmuxerLog:E})=>{let J=0,G=!1;return(O,R)=>{if(!G){if(O)return G=!0,hh(a),z(O,R);J+=1;if(J===a.length){const W=function(){if(R.encryptedBytes)return wq({decryptionWorker:b,segment:R,trackInfoFn:c,timingInfoFn:e,videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:m,
id3Fn:p,captionsFn:u,isEndOfTimeline:x,endedTimelineFn:y,dataFn:B,doneFn:z,onTransmuxerLog:E});Al({segment:R,bytes:R.bytes,trackInfoFn:c,timingInfoFn:e,videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:m,id3Fn:p,captionsFn:u,isEndOfTimeline:x,endedTimelineFn:y,dataFn:B,doneFn:z,onTransmuxerLog:E})};R.endOfAllRequests=Date.now();if(R.map&&R.map.encryptedBytes&&!R.map.bytes)return Bl({decryptionWorker:b,id:R.requestId+"-init",encryptedBytes:R.map.encryptedBytes,key:R.map.key},T=>{R.map.bytes=T;zl(R,
ea=>{if(ea)return hh(a),z(ea,R);W()})});W()}}}},yq=({loadendState:a,abortFn:b})=>c=>{c.target.aborted&&b&&!a.calledAbortFn&&(b(),a.calledAbortFn=!0)},zq=({segment:a,progressFn:b})=>c=>{if(!c.target.aborted){var e=a.stats,g=c.target;g=Date.now()-g.requestTime;g={bandwidth:Infinity,bytesReceived:0,roundTripTime:g||0};g.bytesReceived=c.loaded;g.bandwidth=Math.floor(g.bytesReceived/g.roundTripTime*8E3);a.stats=ka(e,g);!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=
Date.now());return b(c,a)}},Aq=({xhr:a,xhrOptions:b,decryptionWorker:c,segment:e,abortFn:g,progressFn:m,trackInfoFn:p,timingInfoFn:u,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:y,id3Fn:B,captionsFn:z,isEndOfTimeline:E,endedTimelineFn:J,dataFn:G,doneFn:O,onTransmuxerLog:R})=>{const W=[];c=xq({activeXhrs:W,decryptionWorker:c,trackInfoFn:p,timingInfoFn:u,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:y,id3Fn:B,captionsFn:z,isEndOfTimeline:E,endedTimelineFn:J,dataFn:G,doneFn:O,onTransmuxerLog:R});
e.key&&!e.key.bytes&&(R=[e.key],e.map&&!e.map.bytes&&e.map.key&&e.map.key.resolvedUri===e.key.resolvedUri&&R.push(e.map.key),O=ka(b,{uri:e.key.resolvedUri,responseType:"arraybuffer"}),R=yl(e,R,c),O=a(O,R),W.push(O));e.map&&!e.map.bytes&&(!e.map.key||e.key&&e.key.resolvedUri===e.map.key.resolvedUri||(O=ka(b,{uri:e.map.key.resolvedUri,responseType:"arraybuffer"}),R=yl(e,[e.map.key],c),O=a(O,R),W.push(O)),O=ka(b,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:Og(e.map)}),R=tq({segment:e,finishProcessingFn:c}),
O=a(O,R),W.push(O));b=ka(b,{uri:e.part&&e.part.resolvedUri||e.resolvedUri,responseType:"arraybuffer",headers:Og(e)});c=uq({segment:e,finishProcessingFn:c,responseType:b.responseType});a=a(b,c);a.addEventListener("progress",zq({segment:e,progressFn:m,trackInfoFn:p,timingInfoFn:u,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:y,id3Fn:B,captionsFn:z,isEndOfTimeline:E,endedTimelineFn:J,dataFn:G}));W.push(a);const T={};W.forEach(ea=>{ea.addEventListener("loadend",yq({loadendState:T,abortFn:g}))});
return()=>hh(W)},Bq=ob("CodecUtils"),Cl=(a,b)=>{b=b.attributes||{};return a&&a.mediaGroups&&a.mediaGroups.AUDIO&&b.AUDIO&&a.mediaGroups.AUDIO[b.AUDIO]},Te=function(a){const b={};a.forEach(({mediaType:c,type:e,details:g})=>{b[c]=b[c]||[];b[c].push(Gi(`${e}${g}`))});Object.keys(b).forEach(function(c){1<b[c].length?(Bq(`multiple ${c} codecs found as attributes: ${b[c].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),b[c]=null):b[c]=b[c][0]});
return b},Dl=function(a){let b=0;a.audio&&b++;a.video&&b++;return b},Fd=function(a,b){const c=b.attributes||{};var e=b.attributes||{};e=e.CODECS?yb(e.CODECS):void 0;e=Te(e||[]);if(Cl(a,b)&&!e.audio){a:if(Cl(a,b)){b=a.mediaGroups.AUDIO[(b.attributes||{}).AUDIO];for(g in b)if(!b[g].uri&&!b[g].playlists){var g=!0;break a}g=!1}else g=!0;g||(a=Te(an(a,c.AUDIO)||[]),a.audio&&(e.audio=a.audio))}return e},Ue=ob("PlaylistSelector"),El=function(a){if(a&&a.playlist){var b=a.playlist;return JSON.stringify({id:b.id,
bandwidth:a.bandwidth,width:a.width,height:a.height,codecs:b.attributes&&b.attributes.CODECS||""})}},Ve=function(a,b){return a?(a=D.getComputedStyle(a))?a[b]:"":""},Tc=function(a,b){const c=a.slice();a.sort(function(e,g){const m=b(e,g);return 0===m?c.indexOf(e)-c.indexOf(g):m})},jh=function(a,b){let c,e;a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH);c=c||D.Number.MAX_VALUE;b.attributes.BANDWIDTH&&(e=b.attributes.BANDWIDTH);e=e||D.Number.MAX_VALUE;return c-e};let Fl=function(a,b,c,e,g,m){if(a){var p=
{bandwidth:b,width:c,height:e,limitRenditionByPlayerDimensions:g},u=a.playlists;Xa.isAudioOnly(a)&&(u=m.getAudioTrackPlaylists_(),p.audioOnly=!0);var x=u.map(G=>{let O;const R=G.attributes&&G.attributes.RESOLUTION&&G.attributes.RESOLUTION.width,W=G.attributes&&G.attributes.RESOLUTION&&G.attributes.RESOLUTION.height;O=(O=G.attributes&&G.attributes.BANDWIDTH)||D.Number.MAX_VALUE;return{bandwidth:O,width:R,height:W,playlist:G}});Tc(x,(G,O)=>G.bandwidth-O.bandwidth);x=x.filter(G=>!Xa.isIncompatible(G.playlist));
a=x.filter(G=>Xa.isEnabled(G.playlist));a.length||(a=x.filter(G=>!Xa.isDisabled(G.playlist)));var y=a.filter(G=>G.bandwidth*Ga.BANDWIDTH_VARIANCE<b),B=y[y.length-1];u=y.filter(G=>G.bandwidth===B.bandwidth)[0];if(!1===g){var z=u||a[0]||x[0];if(z&&z.playlist){var E="sortedPlaylistReps";u&&(E="bandwidthBestRep");a[0]&&(E="enabledPlaylistReps");Ue(`choosing ${El(z)} using ${E} with options`,p);return z.playlist}Ue("could not choose a playlist with options",p);return null}y=y.filter(G=>G.width&&G.height);
Tc(y,(G,O)=>G.width-O.width);g=y.filter(G=>G.width===c&&G.height===e);B=g[g.length-1];g=g.filter(G=>G.bandwidth===B.bandwidth)[0];if(!g){var J=y.filter(G=>G.width>c||G.height>e);z=J.filter(G=>G.width===J[0].width&&G.height===J[0].height);B=z[z.length-1];z=z.filter(G=>G.bandwidth===B.bandwidth)[0]}m.leastPixelDiffSelector&&(E=y.map(G=>{G.pixelDiff=Math.abs(G.width-c)+Math.abs(G.height-e);return G}),Tc(E,(G,O)=>G.pixelDiff===O.pixelDiff?O.bandwidth-G.bandwidth:G.pixelDiff-O.pixelDiff),E=E[0]);if((m=
E||z||g||u||a[0]||x[0])&&m.playlist)return x="sortedPlaylistReps",E?x="leastPixelDiffRep":z?x="resolutionPlusOneRep":g?x="resolutionBestRep":u?x="bandwidthBestRep":a[0]&&(x="enabledPlaylistReps"),Ue(`choosing ${El(m)} using ${x} with options`,p),m.playlist;Ue("could not choose a playlist with options",p);return null}};const Gl=function(){const a=this.useDevicePixelRatio?D.devicePixelRatio||1:1;return Fl(this.playlists.main,this.systemBandwidth,parseInt(Ve(this.tech_.el(),"width"),10)*a,parseInt(Ve(this.tech_.el(),
"height"),10)*a,this.limitRenditionByPlayerDimensions,this.playlistController_)},Cq=function(a){const {main:b,currentTime:c,bandwidth:e,duration:g,segmentDuration:m,timeUntilRebuffer:p,currentTimeline:u,syncController:x}=a;a=b.playlists.filter(B=>!Xa.isIncompatible(B));var y=a.filter(Xa.isEnabled);y.length||(y=a.filter(B=>!Xa.isDisabled(B)));a=y.filter(Xa.hasAttribute.bind(null,"BANDWIDTH")).map(B=>{var z=x.getSyncPoint(B,g,u,c)?1:2;z=Xa.estimateSegmentRequestTime(m,e,B)*z-p;return{playlist:B,rebufferingImpact:z}});
y=a.filter(B=>0>=B.rebufferingImpact);Tc(y,(B,z)=>jh(z.playlist,B.playlist));if(y.length)return y[0];Tc(a,(B,z)=>B.rebufferingImpact-z.rebufferingImpact);return a[0]||null},Dq=a=>{let b=0,c;a.bytes&&(c=new Uint8Array(a.bytes),a.segments.forEach(e=>{c.set(e,b);b+=e.byteLength}));return c},Eq=function({inbandTextTracks:a,captionArray:b,timestampOffset:c}){if(b){var e=D.WebKitDataCue||D.VTTCue;b.forEach(g=>{const m=g.stream;g.content?g.content.forEach(p=>{const u=new e(g.startTime+c,g.endTime+c,p.text);
u.line=p.line;u.align="left";u.position=p.position;u.positionAlign="line-left";a[m].addCue(u)}):a[m].addCue(new e(g.startTime+c,g.endTime+c,g.text))})}},Fq=function(a){Object.defineProperties(a.frame,{id:{get(){H.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return a.value.key}},value:{get(){H.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return a.value.data}},privateData:{get(){H.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");
return a.value.data}}})},Gq=({inbandTextTracks:a,metadataArray:b,timestampOffset:c,videoDuration:e})=>{if(b){var g=D.WebKitDataCue||D.VTTCue,m=a.metadataTrack_;if(m&&(b.forEach(x=>{const y=x.cueTime+c;!("number"!==typeof y||D.isNaN(y)||0>y)&&Infinity>y&&x.frames&&x.frames.length&&x.frames.forEach(B=>{const z=new g(y,y,B.value||B.url||B.data||"");z.frame=B;z.value=B;Fq(z);m.addCue(z)})}),m.cues&&m.cues.length)){a=m.cues;b=[];for(let x=0;x<a.length;x++)a[x]&&b.push(a[x]);var p=b.reduce((x,y)=>{const B=
x[y.startTime]||[];B.push(y);x[y.startTime]=B;return x},{}),u=Object.keys(p).sort((x,y)=>Number(x)-Number(y));u.forEach((x,y)=>{x=p[x];const B=isFinite(e)?e:0,z=Number(u[y+1])||B;x.forEach(E=>{E.endTime=z})})}}},Hq={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Iq=new Set("id class startDate duration endDate endOnNext startTime endTime processDateRange".split(" ")),
Jq=({inbandTextTracks:a,dateRanges:b})=>{const c=a.metadataTrack_;if(c){var e=D.WebKitDataCue||D.VTTCue;b.forEach(g=>{for(const m of Object.keys(g)){if(Iq.has(m))continue;const p=new e(g.startTime,g.endTime,"");p.id=g.id;p.type="com.apple.quicktime.HLS";p.value={key:Hq[m],data:g[m]};if("scte35Out"===m||"scte35In"===m)p.value.data=(new Uint8Array(p.value.data.match(/[\da-f]{2}/gi))).buffer;c.addCue(p)}g.processDateRange()})}},Hl=(a,b,c)=>{a.metadataTrack_||(a.metadataTrack_=c.addRemoteTextTrack({kind:"metadata",
label:"Timed Metadata"},!1).track,H.browser.IS_ANY_SAFARI||(a.metadataTrack_.inBandMetadataTrackDispatchType=b))},Gd=function(a,b,c){let e,g;if(c&&c.cues)for(e=c.cues.length;e--;)g=c.cues[e],g.startTime>=a&&g.endTime<=b&&c.removeCue(g)},Kq=function(a){const b=a.cues;if(b){var c={};for(let e=b.length-1;0<=e;e--){const g=b[e],m=`${g.startTime}-${g.endTime}-${g.text}`;c[m]?a.removeCue(g):c[m]=g}}},Lq=(a,b,c,e)=>{b=Math.ceil(9E4*(b-e));var g=Math.ceil(9E4*(c-e));c=a.slice();for(e=a.length;e--&&!(a[e].pts<=
g););if(-1===e)return c;for(g=e+1;g--&&!(a[g].pts<=b););g=Math.max(g,0);c.splice(g,e-g+1);return c},Mq=function(a,b){if(!a&&!b||!a&&b||a&&!b)return!1;if(a===b)return!0;const c=Object.keys(a).sort(),e=Object.keys(b).sort();if(c.length!==e.length)return!1;for(let g=0;g<c.length;g++){const m=c[g];if(m!==e[g]||a[m]!==b[m])return!1}return!0},We=1/60,Uc=a=>{const {startOfSegment:b,duration:c,segment:e,part:g,playlist:{mediaSequence:m,id:p,segments:u=[]},mediaIndex:x,partIndex:y,timeline:B}=a,z=u.length-
1;let E="mediaIndex/partIndex increment";a.getMediaInfoForTime?E=`getMediaInfoForTime (${a.getMediaInfoForTime})`:a.isSyncRequest&&(E="getSyncSegmentCandidate (isSyncRequest)");a.independent&&(E+=` with independent ${a.independent}`);const J="number"===typeof y;a=a.segment.uri?"segment":"pre-segment";const G=J?wk({preloadSegment:e})-1:0;return`${a} [${m+x}/${m+z}]`+(J?` part [${y}/${G}]`:"")+` segment start/end [${e.start} => ${e.end}]`+(J?` part start/end [${g.start} => ${g.end}]`:"")+` startOfSegment [${b}]`+
` duration [${c}]`+` timeline [${B}]`+` selected by [${E}]`+` playlist [${p}]`},Nq=({segmentTimeline:a,currentTimeline:b,startOfSegment:c,buffered:e,overrideCheck:g})=>g||a!==b?a<b?c:e.length?e.end(e.length-1):c:null,Il=({timelineChangeController:a,currentTimeline:b,segmentTimeline:c,loaderType:e,audioDisabled:g})=>b===c?!1:"audio"===e?(a=a.lastTimelineChange({type:"main"}),!a||a.to!==c):"main"===e&&g?(a=a.pendingTimelineChange({type:"audio"}))&&a.to===c?!1:!0:!1,Oq=a=>{let b=0;["video","audio"].forEach(function(c){if(c=
a[`${c}TimingInfo`]){var {start:e,end:g}=c,m;"bigint"===typeof e||"bigint"===typeof g?m=D.BigInt(g)-D.BigInt(e):"number"===typeof e&&"number"===typeof g&&(m=g-e);"undefined"!==typeof m&&m>b&&(b=m)}});"bigint"===typeof b&&b<Number.MAX_SAFE_INTEGER&&(b=Number(b));return b},Jl=({segmentDuration:a,maxDuration:b})=>a?Math.round(a)>b+Yb:!1;class kh extends H.EventTarget{constructor(a,b){super();if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");
if(!a.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=a.bandwidth;this.throughput={rate:0,count:0};this.roundTrip=NaN;this.resetStats_();this.partIndex=this.mediaIndex=null;this.hasPlayed_=a.hasPlayed;this.currentTime_=a.currentTime;this.seekable_=a.seekable;this.seeking_=a.seeking;this.duration_=a.duration;this.mediaSource_=a.mediaSource;this.vhs_=a.vhs;this.loaderType_=a.loaderType;this.startingMediaInfo_=this.currentMediaInfo_=void 0;this.segmentMetadataTrack_=a.segmentMetadataTrack;
this.goalBufferLength_=a.goalBufferLength;this.sourceType_=a.sourceType;this.sourceUpdater_=a.sourceUpdater;this.inbandTextTracks_=a.inbandTextTracks;this.state_="INIT";this.timelineChangeController_=a.timelineChangeController;this.shouldSaveSegmentTimingInfo_=!0;this.parse708captions_=a.parse708captions;this.useDtsForTimestampOffset_=a.useDtsForTimestampOffset;this.captionServices_=a.captionServices;this.exactManifestTimings=a.exactManifestTimings;this.addMetadataToTextTrack=a.addMetadataToTextTrack;
this.checkBufferTimeout_=null;this.error_=void 0;this.currentTimeline_=-1;this.xhrOptions_=this.pendingSegment_=null;this.pendingSegments_=[];this.isPendingTimestampOffset_=this.audioDisabled_=!1;this.gopBuffer_=[];this.timeMapping_=0;this.safeAppend_=!1;this.appendInitSegment_={audio:!0,video:!0};this.playlistOfLastInitSegment_={audio:null,video:null};this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_={id3:[],caption:[]};this.waitingOnRemove_=!1;this.activeInitSegmentId_=this.quotaExceededErrorRetryTimeout_=
null;this.initSegments_={};this.cacheEncryptionKeys_=a.cacheEncryptionKeys;this.keyCache_={};this.decrypter_=a.decrypter;this.syncController_=a.syncController;this.syncPoint_={segmentIndex:0,time:0};this.transmuxer_=this.createTransmuxer_();this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate");this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_);this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)});this.fetchAtBuffer_=!1;this.replaceSegmentsUntil_=
-1;this.logger_=ob(`SegmentLoader[${this.loaderType_}]`);Object.defineProperty(this,"state",{get(){return this.state_},set(c){c!==this.state_&&(this.logger_(`${this.state_} -> ${c}`),this.state_=c,this.trigger("statechange"))}});this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()});if("main"===this.loaderType_)this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()});if("audio"===this.loaderType_)this.timelineChangeController_.on("timelinechange",
()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_();this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return gh.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaAppends=this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=
0}dispose(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();this.transmuxer_&&this.transmuxer_.terminate();this.resetStats_();this.checkBufferTimeout_&&D.clearTimeout(this.checkBufferTimeout_);this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_);this.off()}setAudio(a){this.audioDisabled_=!a;a?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"!==this.state?
this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests();this.pendingSegment_=null;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);this.waitingOnRemove_=!1;D.clearTimeout(this.quotaExceededErrorRetryTimeout_);
this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(a){return"APPENDING"!==this.state||this.pendingSegment_?this.pendingSegment_&&this.pendingSegment_.requestId===a?!1:!0:(this.state="READY",!0)}error(a){"undefined"!==typeof a&&(this.logger_("error occurred:",a),this.error_=a);this.pendingSegment_=null;return this.error_}endOfStream(){this.ended_=!0;this.transmuxer_&&gh.reset(this.transmuxer_);this.gopBuffer_.length=0;this.pause();this.trigger("ended")}buffered_(){const a=this.getMediaInfo_();
if(!this.sourceUpdater_||!a)return La();if("main"===this.loaderType_){const {hasAudio:b,hasVideo:c,isMuxed:e}=a;if(c&&b&&!this.audioDisabled_&&!e)return this.sourceUpdater_.buffered();if(c)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(a,b=!1){if(!a)return null;const c=Ee(a);let e=this.initSegments_[c];b&&!e&&a.bytes&&(this.initSegments_[c]=e={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,tracks:a.tracks,timescales:a.timescales});
return e||a}segmentKey(a,b=!1){if(!a)return null;const c=a.resolvedUri;let e=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!e&&a.bytes&&(this.keyCache_[c]=e={resolvedUri:a.resolvedUri,bytes:a.bytes});a={resolvedUri:(e||a).resolvedUri};e&&(a.bytes=e.bytes);return a}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){this.monitorBuffer_();if(this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==
this.state||(this.state="READY")}}init_(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}playlist(a,b={}){if(a){var c=this.playlist_,e=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(a));b=null;c&&(c.id?b=c.id:c.uri&&(b=c.uri));this.logger_(`playlist update [${b} => ${a.id||a.uri}]`);this.trigger("syncinfoupdate");if("INIT"===
this.state&&this.couldBeginLoading_())return this.init_();if(c&&c.uri===a.uri){b=a.mediaSequence-c.mediaSequence;this.logger_(`live window shift [${b}]`);if(null!==this.mediaIndex)if(this.mediaIndex-=b,0>this.mediaIndex)this.partIndex=this.mediaIndex=null;else{var g=this.playlist_.segments[this.mediaIndex];!this.partIndex||g.parts&&g.parts.length&&g.parts[this.partIndex]||(g=this.mediaIndex,this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=
g)}e&&(e.mediaIndex-=b,0>e.mediaIndex?(e.mediaIndex=null,e.partIndex=null):(0<=e.mediaIndex&&(e.segment=a.segments[e.mediaIndex]),0<=e.partIndex&&e.segment.parts&&(e.part=e.segment.parts[e.partIndex])));this.syncController_.saveExpiredSegmentInfo(c,a)}else null!==this.mediaIndex&&(a.endList||"number"!==typeof a.partTargetDuration?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate")}}pause(){this.checkBufferTimeout_&&(D.clearTimeout(this.checkBufferTimeout_),
this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetLoaderProperties(){this.ended_=!1;this.activeInitSegmentId_=null;this.appendInitSegment_={audio:!0,video:!0}}resetEverything(a){this.resetLoaderProperties();this.resetLoader();this.remove(0,Infinity,a);this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1;this.resyncLoader()}resyncLoader(){this.transmuxer_&&
gh.reset(this.transmuxer_);this.syncPoint_=this.partIndex=this.mediaIndex=null;this.isPendingTimestampOffset_=!1;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(a,b,c=()=>{},e=!1){Infinity===b&&(b=this.duration_());if(b<=a)this.logger_("skipping remove because end ${end} is \x3c\x3d start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var g=
1,m=()=>{g--;0===g&&c()};if(e||!this.audioDisabled_)g++,this.sourceUpdater_.removeAudio(a,b,m);if(e||"main"===this.loaderType_)this.gopBuffer_=Lq(this.gopBuffer_,a,b,this.timeMapping_),g++,this.sourceUpdater_.removeVideo(a,b,m);for(const p in this.inbandTextTracks_)Gd(a,b,this.inbandTextTracks_[p]);Gd(a,b,this.segmentMetadataTrack_);m()}else this.logger_("skipping remove because no source updater or starting media info")}monitorBuffer_(){this.checkBufferTimeout_&&D.clearTimeout(this.checkBufferTimeout_);
this.checkBufferTimeout_=D.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&D.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=D.setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(!this.sourceUpdater_.updating()){var a=this.chooseNextRequest_();a&&("number"===typeof a.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,
from:this.currentTimeline_,to:a.timeline})),this.loadSegment_(a))}}isEndOfStream_(a=this.mediaIndex,b=this.playlist_,c=this.partIndex){if(!b||!this.mediaSource_)return!1;const e="number"===typeof a&&b.segments[a];a=a+1===b.segments.length;c=!e||!e.parts||c+1===e.parts.length;return b.endList&&"open"===this.mediaSource_.readyState&&a&&c}chooseNextRequest_(){var a=this.buffered_(),b=uk(a)||0,c=Fg(a,this.currentTime_()),e=!this.hasPlayed_()&&1<=c,g=c>=this.goalBufferLength_();a=this.playlist_.segments;
if(!a.length||e||g)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());e={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(e.isSyncRequest){a:{g=this.currentTimeline_;var m=a||[];const p=[];let u=0;for(let x=0;x<m.length;x++){const y=m[x];if(g===y.timeline&&(p.push(x),u+=y.duration,u>b)){b=x;break a}}b=0===p.length?0:p[p.length-1]}e.mediaIndex=
b}else if(null!==this.mediaIndex)g=a[this.mediaIndex],m="number"===typeof this.partIndex?this.partIndex:-1,e.startOfSegment=g.end?g.end:b,g.parts&&g.parts[m+1]?(e.mediaIndex=this.mediaIndex,e.partIndex=m+1):e.mediaIndex=this.mediaIndex+1;else{const {segmentIndex:p,startTime:u,partIndex:x}=Xa.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?b:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,
startTime:this.syncPoint_.time});e.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${b}`:`currentTime ${this.currentTime_()}`;e.mediaIndex=p;e.startOfSegment=u;e.partIndex=x}g=(b=a[e.mediaIndex])&&"number"===typeof e.partIndex&&b.parts&&b.parts[e.partIndex];if(!b||"number"===typeof e.partIndex&&!g)return null;"number"!==typeof e.partIndex&&b.parts&&(e.partIndex=0,g=b.parts[0]);m=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;
c||!g||m||g.independent||(0===e.partIndex?(c=a[e.mediaIndex-1],(b=c.parts&&c.parts.length&&c.parts[c.parts.length-1])&&b.independent&&(--e.mediaIndex,e.partIndex=c.parts.length-1,e.independent="previous segment")):b.parts[e.partIndex-1].independent&&(--e.partIndex,e.independent="previous part"));c=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return e.mediaIndex>=a.length-1&&c&&!this.seeking_()?null:this.generateSegmentInfo_(e)}generateSegmentInfo_(a){const {independent:b,playlist:c,mediaIndex:e,
startOfSegment:g,isSyncRequest:m,partIndex:p,forceTimestampOffset:u,getMediaInfoForTime:x}=a;var y=c.segments[e];a="number"===typeof p&&y.parts[p];a={requestId:"segment-loader-"+Math.random(),uri:a&&a.resolvedUri||y.resolvedUri,mediaIndex:e,partIndex:a?p:null,isSyncRequest:m,startOfSegment:g,playlist:c,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:y.timeline,duration:a&&a.duration||y.duration,segment:y,part:a,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:x,independent:b};
var B="undefined"!==typeof u?u:this.isPendingTimestampOffset_;a.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:y.timeline,currentTimeline:this.currentTimeline_,startOfSegment:g,buffered:this.buffered_(),overrideCheck:B});y=uk(this.sourceUpdater_.audioBuffered());"number"===typeof y&&(a.audioAppendStart=y-this.sourceUpdater_.audioTimestampOffset());if(this.sourceUpdater_.videoBuffered().length){y=this.gopBuffer_;B=this.currentTime_()-this.sourceUpdater_.videoTimestampOffset();if("undefined"!==
typeof B&&null!==B&&y.length){B=Math.ceil(9E4*(B-this.timeMapping_+3));var z;for(z=0;z<y.length&&!(y[z].pts>B);z++);y=y.slice(z)}else y=[];a.gopsToAlignWith=y}return a}timestampOffsetForSegment_(a){return Nq(a)}earlyAbortWhenNeeded_(a){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))){var b=this.currentTime_(),c=a.bandwidth,e=this.pendingSegment_.duration,g=Xa.estimateSegmentRequestTime(e,c,this.playlist_,
a.bytesReceived);a=fp(this.buffered_(),b,this.vhs_.tech_.playbackRate())-1;g<=a||!(b=Cq({main:this.vhs_.playlists.main,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:e,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_}))||(c=g-a-b.rebufferingImpact,e=.5,a<=Yb&&(e=1),!b.playlist||b.playlist.uri===this.playlist_.uri||c<e||(this.bandwidth=b.playlist.attributes.BANDWIDTH*Ga.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort")))}}handleAbort_(a){this.logger_(`Aborting ${Uc(a)}`);
this.mediaRequestsAborted+=1}handleProgress_(a,b){this.earlyAbortWhenNeeded_(b.stats);this.checkForAbort_(b.requestId)||this.trigger("progress")}handleTrackInfo_(a,b){this.earlyAbortWhenNeeded_(a.stats);this.checkForAbort_(a.requestId)||this.checkForIllegalMediaSwitch(b)||(b=b||{},Mq(this.currentMediaInfo_,b)||(this.appendInitSegment_={audio:!0,video:!0},this.currentMediaInfo_=this.startingMediaInfo_=b,this.logger_("trackinfo update",b),this.trigger("trackinfo")),this.checkForAbort_(a.requestId)||
(this.pendingSegment_.trackInfo=b,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))}handleTimingInfo_(a,b,c,e){this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId)){a=this.pendingSegment_;var g=`${b}TimingInfo`;a[g]=a[g]||{};a[g][c]=e;this.logger_(`timinginfo: ${b} - ${c} - ${e}`);this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}}handleCaptions_(a,b){this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId))if(0===b.length)this.logger_("SegmentLoader received no captions from a caption event");
else if(this.pendingSegment_.hasAppendedData_){var c=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),e={};b.forEach(g=>{e[g.stream]=e[g.stream]||{startTime:Infinity,captions:[],endTime:0};const m=e[g.stream];m.startTime=Math.min(m.startTime,g.startTime+c);m.endTime=Math.max(m.endTime,g.endTime+c);m.captions.push(g)});Object.keys(e).forEach(g=>{const {startTime:m,endTime:p,captions:u}=e[g],x=this.inbandTextTracks_;
this.logger_(`adding cues from ${m} -> ${p} for ${g}`);var y=this.vhs_.tech_;if(!x[g]){y.trigger({type:"usage",name:"vhs-608"});let z=g;/^cc708_/.test(g)&&(z="SERVICE"+g.split("_")[1]);var B=y.textTracks().getTrackById(z);if(B)x[g]=B;else{let E=B=g,J=!1;const G=(y.options_.vhs&&y.options_.vhs.captionServices||{})[z];G&&(B=G.label,E=G.language,J=G.default);x[g]=y.addRemoteTextTrack({kind:"captions",id:z,default:J,label:B,language:E},!1).track}}Gd(m,p,x[g]);Eq({captionArray:u,inbandTextTracks:x,timestampOffset:c})});
this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,a,b))}handleId3_(a,b,c){this.earlyAbortWhenNeeded_(a.stats);this.checkForAbort_(a.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(c,b,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,a,b,c)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(a=>a());this.metadataQueue_.caption.forEach(a=>
a());this.metadataQueue_.id3=[];this.metadataQueue_.caption=[]}processCallQueue_(){const a=this.callQueue_;this.callQueue_=[];a.forEach(b=>b())}processLoadQueue_(){const a=this.loadQueue_;this.loadQueue_=[];a.forEach(b=>b())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const a=this.pendingSegment_;return a?this.getCurrentMediaInfo_()?Il({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,
audioDisabled:this.audioDisabled_})?!1:!0:!0:!1}getCurrentMediaInfo_(a=this.pendingSegment_){return a&&a.trackInfo||this.currentMediaInfo_}getMediaInfo_(a=this.pendingSegment_){return this.getCurrentMediaInfo_(a)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const a=this.pendingSegment_,b=this.getCurrentMediaInfo_();
if(!a||!b)return!1;const {hasAudio:c,hasVideo:e,isMuxed:g}=b;return e&&!a.videoTimingInfo||c&&!this.audioDisabled_&&!g&&!a.audioTimingInfo||Il({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0}handleData_(a,b){this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId))if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())this.callQueue_.push(this.handleData_.bind(this,
a,b));else{var c=this.pendingSegment_;this.setTimeMapping_(c.timeline);this.updateMediaSecondsLoaded_(c.part||c.segment);if("closed"!==this.mediaSource_.readyState){a.map&&(a.map=this.initSegmentForMap(a.map,!0),c.segment.map=a.map);a.key&&this.segmentKey(a.key,!0);c.isFmp4=a.isFmp4;c.timingInfo=c.timingInfo||{};if(c.isFmp4)this.trigger("fmp4"),c.timingInfo.start=c[`${b.type}TimingInfo`].start;else{a=this.getCurrentMediaInfo_();a="main"===this.loaderType_&&a&&a.hasVideo;if(a)var e=c.videoTimingInfo.start;
c.timingInfo.start=this.trueSegmentStart_({currentStart:c.timingInfo.start,playlist:c.playlist,mediaIndex:c.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:e,videoTimingInfo:c.videoTimingInfo,audioTimingInfo:c.audioTimingInfo})}this.updateAppendInitSegmentStatus(c,b.type);this.updateSourceBufferTimestampOffset_(c);if(c.isSyncRequest){this.updateTimingInfoEnd_(c);this.syncController_.saveSegmentTimingInfo({segmentInfo:c,
shouldSaveTimelineMapping:"main"===this.loaderType_});e=this.chooseNextRequest_();if(e.mediaIndex!==c.mediaIndex||e.partIndex!==c.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}c.hasAppendedData_=!0;this.processMetadataQueue_();this.appendData_(c,b)}}}updateAppendInitSegmentStatus(a,b){"main"!==this.loaderType_||"number"!==typeof a.timestampOffset||a.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0});
this.playlistOfLastInitSegment_[b]!==a.playlist&&(this.appendInitSegment_[b]=!0)}getInitSegmentAndUpdateState_({type:a,initSegment:b,map:c,playlist:e}){if(c){const g=Ee(c);if(this.activeInitSegmentId_===g)return null;b=this.initSegmentForMap(c,!0).bytes;this.activeInitSegmentId_=g}return b&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=e,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,b):null}handleQuotaExceededError_({segmentInfo:a,type:b,bytes:c},e){e=this.sourceUpdater_.audioBuffered();
const g=this.sourceUpdater_.videoBuffered();1<e.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+kc(e).join(", "));1<g.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+kc(g).join(", "));const m=e.length?e.start(0):0,p=e.length?e.end(e.length-1):0,u=g.length?g.start(0):0,x=g.length?g.end(g.length-1):0;1>=p-m&&1>=x-u?(this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+`Appended byte length: ${c.byteLength}, `+
`audio buffer: ${kc(e).join(", ")}, `+`video buffer: ${kc(g).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:Infinity}),this.trigger("error")):(this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:a,type:b,bytes:c})),a=this.currentTime_()-1,this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${a}`),this.remove(0,a,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s");
this.waitingOnRemove_=!1;this.quotaExceededErrorRetryTimeout_=D.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue");this.quotaExceededErrorRetryTimeout_=null;this.processCallQueue_()},1E3)},!0))}handleAppendError_({segmentInfo:a,type:b,bytes:c},e){e&&(22===e.code?this.handleQuotaExceededError_({segmentInfo:a,type:b,bytes:c}):(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",e),this.error(`${b} append of ${c.length}b failed for segment `+`#${a.mediaIndex} in playlist ${a.playlist.id}`),
this.trigger("appenderror")))}appendToSourceBuffer_({segmentInfo:a,type:b,initSegment:c,data:e,bytes:g}){g||(g=[e],e=e.byteLength,c&&(g.unshift(c),e+=c.byteLength),g=Dq({bytes:e,segments:g}));this.sourceUpdater_.appendBuffer({segmentInfo:a,type:b,bytes:g},this.handleAppendError_.bind(this,{segmentInfo:a,type:b,bytes:g}))}handleSegmentTimingInfo_(a,b,c){this.pendingSegment_&&b===this.pendingSegment_.requestId&&(b=this.pendingSegment_.segment,a=`${a}TimingInfo`,b[a]||(b[a]={}),b[a].transmuxerPrependedSeconds=
c.prependedContentDuration||0,b[a].transmuxedPresentationStart=c.start.presentation,b[a].transmuxedDecodeStart=c.start.decode,b[a].transmuxedPresentationEnd=c.end.presentation,b[a].transmuxedDecodeEnd=c.end.decode,b[a].baseMediaDecodeTime=c.baseMediaDecodeTime)}appendData_(a,b){const {type:c,data:e}=b;!e||!e.byteLength||"audio"===c&&this.audioDisabled_||(b=this.getInitSegmentAndUpdateState_({type:c,initSegment:b.initSegment,playlist:a.playlist,map:a.isFmp4?a.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:a,
type:c,initSegment:b,data:e}))}loadSegment_(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);"number"===typeof a.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"});this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(a):this.loadQueue_.push(()=>{const b=Rb({},a,{forceTimestampOffset:!0});Rb(a,this.generateSegmentInfo_(b));this.isPendingTimestampOffset_=!1;this.updateTransmuxerAndRequestSegment_(a)})}updateTransmuxerAndRequestSegment_(a){this.shouldUpdateTransmuxerTimestampOffset_(a.timestampOffset)&&
(this.gopBuffer_.length=0,a.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a.timestampOffset}));const b=this.createSimplifiedSegmentObj_(a);var c=this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex);const e=null!==this.mediaIndex,g=a.timeline!==this.currentTimeline_&&0<a.timeline;c=c||e&&g;this.logger_(`Requesting ${Uc(a)}`);b.map&&!b.map.bytes&&(this.logger_("going to request init segment."),
this.appendInitSegment_={video:!0,audio:!0});a.abortRequests=Aq({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:b,abortFn:this.handleAbort_.bind(this,a),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",a.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",a.requestId),captionsFn:this.handleCaptions_.bind(this),
isEndOfTimeline:c,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:m,level:p,stream:u})=>{this.logger_(`${Uc(a)} logged from transmuxer stream ${u} as a ${p}: ${m}`)}})}trimBackBuffer_(a){a=this.seekable_();var b=this.currentTime_(),c=this.playlist_.targetDuration||10;let e=b-Ga.BACK_BUFFER_LENGTH;a.length&&(e=Math.max(e,a.start(0)));a=Math.min(b-
c,e);0<a&&this.remove(0,a)}createSimplifiedSegmentObj_(a){const b=a.segment;var c=a.part;c={resolvedUri:c?c.resolvedUri:b.resolvedUri,byterange:c?c.byterange:b.byterange,requestId:a.requestId,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,part:a.part};const e=a.playlist.segments[a.mediaIndex-1];e&&e.timeline===b.timeline&&(e.videoTimingInfo?c.baseStartTime=e.videoTimingInfo.transmuxedDecodeEnd:e.audioTimingInfo&&(c.baseStartTime=e.audioTimingInfo.transmuxedDecodeEnd));
b.key&&(a=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),c.key=this.segmentKey(b.key),c.key.iv=a);b.map&&(c.map=this.initSegmentForMap(b.map));return c}saveTransferStats_(a){this.mediaRequests+=1;a&&(this.mediaBytesTransferred+=a.bytesReceived,this.mediaTransferDuration+=a.roundTripTime)}saveBandwidthRelatedStats_(a,b){this.pendingSegment_.byteLength=b.bytesReceived;a<We?this.logger_(`Ignoring segment's bandwidth because its duration of ${a}`+` is less than the min to record ${We}`):
(this.bandwidth=b.bandwidth,this.roundTrip=b.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");this.trigger("timeout")}segmentRequestFinished_(a,b,c){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,a,b,c));else if(this.saveTransferStats_(b.stats),this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId)if(a)this.pendingSegment_=null,this.state="READY",-102!==a.code&&(this.pause(),
-101===a.code?this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")));else{a=this.pendingSegment_;this.saveBandwidthRelatedStats_(a.duration,b.stats);a.endOfAllRequests=b.endOfAllRequests;if(c.gopInfo){b=this.gopBuffer_;c=c.gopInfo;if(c.length)if(this.safeAppend_)b=c.slice();else{var e=c[0].pts,g=0;for(g;g<b.length&&!(b[g].pts>=e);g++);b=b.slice(0,g).concat(c)}this.gopBuffer_=b}this.state="APPENDING";this.trigger("appending");this.waitForAppendsToComplete_(a)}}setTimeMapping_(a){a=
this.syncController_.mappingForTimeline(a);null!==a&&(this.timeMapping_=a)}updateMediaSecondsLoaded_(a){this.mediaSecondsLoaded="number"===typeof a.start&&"number"===typeof a.end?this.mediaSecondsLoaded+(a.end-a.start):this.mediaSecondsLoaded+a.duration}shouldUpdateTransmuxerTimestampOffset_(a){return null===a?!1:"main"===this.loaderType_&&a!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&a!==this.sourceUpdater_.audioTimestampOffset()?!0:!1}trueSegmentStart_({currentStart:a,playlist:b,
mediaIndex:c,firstVideoFrameTimeForData:e,currentVideoTimestampOffset:g,useVideoTimingInfo:m,videoTimingInfo:p,audioTimingInfo:u}){if("undefined"!==typeof a)return a;if(!m)return u.start;a=b.segments[c-1];return 0!==c&&a&&"undefined"!==typeof a.start&&a.end===e+g?p.start:e}waitForAppendsToComplete_(a){var b=this.getCurrentMediaInfo_(a);if(b){var {hasAudio:c,hasVideo:e,isMuxed:g}=b;b="main"===this.loaderType_&&e;var m=!this.audioDisabled_&&c&&!g;a.waitingOnAppends=0;a.hasAppendedData_?(b&&a.waitingOnAppends++,
m&&a.waitingOnAppends++,b&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,a)),m&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,a))):(a.timingInfo||"number"!==typeof a.timestampOffset||(this.isPendingTimestampOffset_=!0),a.timingInfo={start:0},a.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(a),this.processMetadataQueue_()),this.checkAppendsDone_(a))}else this.error({message:"No starting media returned, likely due to an unsupported media format.",
playlistExclusionDuration:Infinity}),this.trigger("error")}checkAppendsDone_(a){this.checkForAbort_(a.requestId)||(a.waitingOnAppends--,0===a.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(a){var b=this.getCurrentMediaInfo_();return(a="main"===this.loaderType_&&b&&a?a.hasAudio||a.hasVideo?b.hasVideo&&!a.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":
!b.hasVideo&&a.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)?(this.error({message:a,playlistExclusionDuration:Infinity}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(a){if(null!==a.timestampOffset&&"number"===typeof a.timingInfo.start&&!a.changedTimestampOffset&&"main"===
this.loaderType_){var b=!1;a.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:a.segment.videoTimingInfo,audioTimingInfo:a.segment.audioTimingInfo,timingInfo:a.timingInfo});a.changedTimestampOffset=!0;a.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(a.timestampOffset),b=!0);a.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(a.timestampOffset),b=!0);
b&&this.trigger("timestampoffset")}}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:a,audioTimingInfo:b,timingInfo:c}){return this.useDtsForTimestampOffset_?a&&"number"===typeof a.transmuxedDecodeStart?a.transmuxedDecodeStart:b&&"number"===typeof b.transmuxedDecodeStart?b.transmuxedDecodeStart:c.start:c.start}updateTimingInfoEnd_(a){a.timingInfo=a.timingInfo||{};var b=this.getMediaInfo_();if(b="main"===this.loaderType_&&b&&b.hasVideo&&a.videoTimingInfo?a.videoTimingInfo:a.audioTimingInfo)a.timingInfo.end=
"number"===typeof b.end?b.end:b.start+a.duration}handleAppendsDone_(){this.pendingSegment_&&this.trigger("appendsdone");if(this.pendingSegment_){var a=this.pendingSegment_;this.updateTimingInfoEnd_(a);this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_});if("hls"!==this.sourceType_)var b=null;else{var c=Oq({audioTimingInfo:a.audioTimingInfo,videoTimingInfo:a.videoTimingInfo});if(c){var e=a.playlist.targetDuration;
b=Jl({segmentDuration:c,maxDuration:2*e});var g=Jl({segmentDuration:c,maxDuration:e});c=`Segment with index ${a.mediaIndex} `+`from playlist ${a.playlist.id} `+`has a duration of ${c} `+`when the reported duration is ${a.duration} `+`and the target duration is ${e}. `+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";
b=b||g?{severity:b?"warn":"info",message:c}:null}else b=null}b&&("warn"===b.severity?H.log.warn(b.message):this.logger_(b.message));this.recordThroughput_(a);this.pendingSegment_=null;this.state="READY";if(a.isSyncRequest&&(this.trigger("syncinfoupdate"),!a.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Uc(a)}`);return}this.logger_(`Appended ${Uc(a)}`);this.addSegmentMetadataCue_(a);this.currentTime_()>=this.replaceSegmentsUntil_&&(this.replaceSegmentsUntil_=-1,this.fetchAtBuffer_=
!0);this.currentTimeline_!==a.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:a.timeline}));this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");g=a.segment;b=a.part;g=g.end&&this.currentTime_()-g.end>3*a.playlist.targetDuration;b=b&&b.end&&this.currentTime_()-b.end>3*
a.playlist.partTargetDuration;g||b?(this.logger_(`bad ${g?"segment":"part"} ${Uc(a)}`),this.resetEverything()):(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=a.mediaIndex,this.partIndex=a.partIndex,this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex)&&this.endOfStream(),this.trigger("appended"),a.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}recordThroughput_(a){if(a.duration<
We)this.logger_(`Ignoring segment's throughput because its duration of ${a.duration}`+` is less than the min to record ${We}`);else{var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/c*8E3)-b)/++this.throughput.count}}addSegmentMetadataCue_(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start,e=b.end;if("number"===typeof c&&isFinite(c)&&"number"===typeof e&&isFinite(e)){Gd(c,e,this.segmentMetadataTrack_);var g=D.WebKitDataCue||D.VTTCue;
a={custom:b.custom,dateTimeObject:b.dateTimeObject,dateTimeString:b.dateTimeString,programDateTime:b.programDateTime,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.id,start:c,end:e};b=JSON.stringify(a);c=new g(c,e,b);c.value=a;this.segmentMetadataTrack_.addCue(c)}}}set replaceSegmentsUntil(a){this.logger_(`Replacing currently buffered segments until ${a}`);
this.replaceSegmentsUntil_=a}}const Kl=function(a){return"string"!==typeof a?a:a.replace(/./,b=>b.toUpperCase())},Pq=["video","audio"],lh=(a,b)=>{const c=b[`${a}Buffer`];return c&&c.updating||b.queuePending[a]},Vc=(a,b)=>{if(0!==b.queue.length){var c=0,e=b.queue[c];if("mediaSource"===e.type)b.updating()||"closed"===b.mediaSource.readyState||(b.queue.shift(),e.action(b),e.doneFn&&e.doneFn(),Vc("audio",b),Vc("video",b));else if("mediaSource"!==a&&b.ready()&&"closed"!==b.mediaSource.readyState&&!lh(a,
b)){if(e.type!==a){a:{c=b.queue;for(e=0;e<c.length;e++){const g=c[e];if("mediaSource"===g.type){c=null;break a}if(g.type===a){c=e;break a}}c=null}if(null===c)return;e=b.queue[c]}b.queue.splice(c,1);b.queuePending[a]=e;e.action(a,b);e.doneFn||(b.queuePending[a]=null,Vc(a,b))}}},Ll=(a,b)=>{const c=b[`${a}Buffer`],e=Kl(a);c&&(c.removeEventListener("updateend",b[`on${e}UpdateEnd_`]),c.removeEventListener("error",b[`on${e}Error_`]),b.codecs[a]=null,b[`${a}Buffer`]=null)},Fb=(a,b)=>a&&b&&-1!==Array.prototype.indexOf.call(a.sourceBuffers,
b),fb={appendBuffer:(a,b,c)=>(e,g)=>{const m=g[`${e}Buffer`];if(Fb(g.mediaSource,m)){g.logger_(`Appending segment ${b.mediaIndex}'s ${a.length} bytes to ${e}Buffer`);try{m.appendBuffer(a)}catch(p){g.logger_(`Error with code ${p.code} `+(22===p.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${b.mediaIndex} to ${e}Buffer`),g.queuePending[e]=null,c(p)}}},remove:(a,b)=>(c,e)=>{const g=e[`${c}Buffer`];if(Fb(e.mediaSource,g)){e.logger_(`Removing ${a} to ${b} from ${c}Buffer`);try{g.remove(a,b)}catch(m){e.logger_(`Remove ${a} to ${b} from ${c}Buffer failed`)}}},
timestampOffset:a=>(b,c)=>{const e=c[`${b}Buffer`];Fb(c.mediaSource,e)&&(c.logger_(`Setting ${b}timestampOffset to ${a}`),e.timestampOffset=a)},callback:a=>(b,c)=>{a()},endOfStream:a=>b=>{if("open"===b.mediaSource.readyState){b.logger_(`Calling mediaSource endOfStream(${a||""})`);try{b.mediaSource.endOfStream(a)}catch(c){H.log.warn("Failed to call media source endOfStream",c)}}},duration:a=>b=>{b.logger_(`Setting mediaSource duration to ${a}`);try{b.mediaSource.duration=a}catch(c){H.log.warn("Failed to set media source duration",
c)}},abort:()=>(a,b)=>{if("open"===b.mediaSource.readyState){var c=b[`${a}Buffer`];if(Fb(b.mediaSource,c)){b.logger_(`calling abort on ${a}Buffer`);try{c.abort()}catch(e){H.log.warn(`Failed to abort on ${a}Buffer`,e)}}}},addSourceBuffer:(a,b)=>c=>{const e=Kl(a);var g=id(b);c.logger_(`Adding ${a}Buffer with codec ${b} to mediaSource`);g=c.mediaSource.addSourceBuffer(g);g.addEventListener("updateend",c[`on${e}UpdateEnd_`]);g.addEventListener("error",c[`on${e}Error_`]);c.codecs[a]=b;c[`${a}Buffer`]=
g},removeSourceBuffer:a=>b=>{const c=b[`${a}Buffer`];Ll(a,b);if(Fb(b.mediaSource,c)){b.logger_(`Removing ${a}Buffer with codec ${b.codecs[a]} from mediaSource`);try{b.mediaSource.removeSourceBuffer(c)}catch(e){H.log.warn(`Failed to removeSourceBuffer ${a}Buffer`,e)}}},changeType:a=>(b,c)=>{const e=c[`${b}Buffer`],g=id(a);Fb(c.mediaSource,e)&&c.codecs[b]!==a&&(c.logger_(`changing ${b}Buffer codec from ${c.codecs[b]} to ${a}`),e.changeType(g),c.codecs[b]=a)}},gb=({type:a,sourceUpdater:b,action:c,doneFn:e,
name:g})=>{b.queue.push({type:a,action:c,doneFn:e,name:g});Vc(a,b)},Ml=(a,b)=>c=>{b.queuePending[a]&&(c=b.queuePending[a].doneFn,b.queuePending[a]=null,c&&c(b[`${a}Error_`]));Vc(a,b)};class Nl extends H.EventTarget{constructor(a){super();this.mediaSource=a;this.sourceopenListener_=()=>Vc("mediaSource",this);this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_);this.logger_=ob("SourceUpdater");this.videoTimestampOffset_=this.audioTimestampOffset_=0;this.queue=[];this.queuePending=
{audio:null,video:null};this.delayedAudioAppendQueue_=[];this.videoAppendQueued_=!1;this.codecs={};this.onVideoUpdateEnd_=Ml("video",this);this.onAudioUpdateEnd_=Ml("audio",this);this.onVideoError_=b=>{this.videoError_=b};this.onAudioError_=b=>{this.audioError_=b};this.triggeredReady_=this.initializedEme_=this.createdSourceBuffers_=!1}initializedEme(){this.initializedEme_=!0;this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&
this.hasInitializedAnyEme()}createSourceBuffers(a){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(a),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(a,b){gb({type:"mediaSource",sourceUpdater:this,action:fb.addSourceBuffer(a,b),name:"addSourceBuffer"})}abort(a){gb({type:a,sourceUpdater:this,action:fb.abort(a),name:"abort"})}removeSourceBuffer(a){this.canRemoveSourceBuffer()?
gb({type:"mediaSource",sourceUpdater:this,action:fb.removeSourceBuffer(a),name:"removeSourceBuffer"}):H.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!H.browser.IS_FIREFOX&&D.MediaSource&&D.MediaSource.prototype&&"function"===typeof D.MediaSource.prototype.removeSourceBuffer}static canChangeType(){return D.SourceBuffer&&D.SourceBuffer.prototype&&"function"===typeof D.SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(a,
b){this.canChangeType()?gb({type:a,sourceUpdater:this,action:fb.changeType(b),name:"changeType"}):H.log.error("changeType is not supported!")}addOrChangeSourceBuffers(a){if(!a||"object"!==typeof a||0===Object.keys(a).length)throw Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(a).forEach(b=>{const c=a[b];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(b,c);this.canChangeType()&&this.changeType(b,c)})}appendBuffer(a,b){const {segmentInfo:c,type:e,bytes:g}=a;
this.processedAppend_=!0;"audio"===e&&this.videoBuffer&&!this.videoAppendQueued_?(this.delayedAudioAppendQueue_.push([a,b]),this.logger_(`delayed audio append of ${g.length} until video append`)):(gb({type:e,sourceUpdater:this,action:fb.appendBuffer(g,c||{mediaIndex:-1},b),doneFn:b,name:"appendBuffer"}),"video"===e&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(a=this.delayedAudioAppendQueue_.slice(),this.logger_(`queuing delayed audio ${a.length} appendBuffers`),this.delayedAudioAppendQueue_.length=
0,a.forEach(m=>{this.appendBuffer.apply(this,m)}))))}audioBuffered(){return Fb(this.mediaSource,this.audioBuffer)?this.audioBuffer.buffered?this.audioBuffer.buffered:La():La()}videoBuffered(){return Fb(this.mediaSource,this.videoBuffer)?this.videoBuffer.buffered?this.videoBuffer.buffered:La():La()}buffered(){const a=Fb(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,b=Fb(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return b&&!a?this.audioBuffered():a&&!b?this.videoBuffered():
ep(this.audioBuffered(),this.videoBuffered())}setDuration(a,b=Jb){gb({type:"mediaSource",sourceUpdater:this,action:fb.duration(a),name:"duration",doneFn:b})}endOfStream(a=null,b=Jb){"string"!==typeof a&&(a=void 0);gb({type:"mediaSource",sourceUpdater:this,action:fb.endOfStream(a),name:"endOfStream",doneFn:b})}removeAudio(a,b,c=Jb){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?gb({type:"audio",sourceUpdater:this,action:fb.remove(a,b),doneFn:c,name:"remove"}):c()}removeVideo(a,b,c=Jb){this.videoBuffered().length&&
0!==this.videoBuffered().end(0)?gb({type:"video",sourceUpdater:this,action:fb.remove(a,b),doneFn:c,name:"remove"}):c()}updating(){return lh("audio",this)||lh("video",this)?!0:!1}audioTimestampOffset(a){"undefined"!==typeof a&&this.audioBuffer&&this.audioTimestampOffset_!==a&&(gb({type:"audio",sourceUpdater:this,action:fb.timestampOffset(a),name:"timestampOffset"}),this.audioTimestampOffset_=a);return this.audioTimestampOffset_}videoTimestampOffset(a){"undefined"!==typeof a&&this.videoBuffer&&this.videoTimestampOffset!==
a&&(gb({type:"video",sourceUpdater:this,action:fb.timestampOffset(a),name:"timestampOffset"}),this.videoTimestampOffset_=a);return this.videoTimestampOffset_}audioQueueCallback(a){this.audioBuffer&&gb({type:"audio",sourceUpdater:this,action:fb.callback(a),name:"callback"})}videoQueueCallback(a){this.videoBuffer&&gb({type:"video",sourceUpdater:this,action:fb.callback(a),name:"callback"})}dispose(){this.trigger("dispose");Pq.forEach(a=>{this.abort(a);if(this.canRemoveSourceBuffer())this.removeSourceBuffer(a);
else this[`${a}QueueCallback`](()=>Ll(a,this))});this.videoAppendQueued_=!1;this.delayedAudioAppendQueue_.length=0;this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_);this.off()}}const Ol=new Uint8Array(["\n","\n"].map(a=>a.charCodeAt(0)));class Qq extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class Rq extends kh{constructor(a,b={}){super(a,b);this.subtitlesTrack_=this.mediaSource_=
null;this.loaderType_="subtitle";this.featuresNativeTextTracks_=a.featuresNativeTextTracks;this.loadVttJs=a.loadVttJs;this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return La();const a=this.subtitlesTrack_.cues;return La([[a[0].startTime,a[a.length-1].startTime]])}initSegmentForMap(a,b=!1){if(!a)return null;const c=Ee(a);let e=this.initSegments_[c];b&&!e&&a.bytes&&(b=new Uint8Array(Ol.byteLength+
a.bytes.byteLength),b.set(a.bytes),b.set(Ol,a.bytes.byteLength),this.initSegments_[c]=e={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return e||a}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}track(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}remove(a,
b){Gd(a,b,this.subtitlesTrack_)}fillBuffer_(){const a=this.chooseNextRequest_();a&&(null===this.syncController_.timestampOffsetForTimeline(a.timeline)?(this.syncController_.one("timestampoffset",()=>{this.state="READY";this.paused()||this.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(a))}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(a){for(;a&&a.segment.empty;){if(a.mediaIndex+1>=
a.playlist.segments.length){a=null;break}a=this.generateSegmentInfo_({playlist:a.playlist,mediaIndex:a.mediaIndex+1,startOfSegment:a.startOfSegment+a.duration,isSyncRequest:a.isSyncRequest})}return a}stopForError(a){this.error(a);this.state="READY";this.pause();this.trigger("error")}segmentRequestFinished_(a,b,c){if(this.subtitlesTrack_)if(this.saveTransferStats_(b.stats),this.pendingSegment_)if(a)-101===a.code&&this.handleTimeout_(),-102===a.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=
1,this.stopForError(a);else{var e=this.pendingSegment_;this.saveBandwidthRelatedStats_(e.duration,b.stats);b.key&&this.segmentKey(b.key,!0);this.state="APPENDING";this.trigger("appending");var g=e.segment;g.map&&(g.map.bytes=b.map.bytes);e.bytes=b.bytes;if("function"!==typeof D.WebVTT&&"function"===typeof this.loadVttJs)this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(a,b,c),()=>this.stopForError({message:"Error loading vtt.js"}));else{g.requested=!0;try{this.parseVTTCues_(e)}catch(m){this.stopForError({message:m.message});
return}this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_);e.timingInfo=e.cues.length?{start:e.cues[0].startTime,end:e.cues[e.cues.length-1].endTime}:{start:e.startOfSegment,end:e.startOfSegment+e.duration};e.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=g.duration,e.cues.forEach(m=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new D.VTTCue(m.startTime,
m.endTime,m.text):m)}),Kq(this.subtitlesTrack_),this.handleAppendsDone_())}}else this.state="READY",this.mediaRequestsAborted+=1;else this.state="READY"}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(a){let b=!1;if("function"!==typeof D.WebVTT)throw new Qq;if("function"===typeof D.TextDecoder)var c=new D.TextDecoder("utf8");else c=D.WebVTT.StringDecoder(),b=!0;c=new D.WebVTT.Parser(D,D.vttjs,c);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};c.oncue=a.cues.push.bind(a.cues);c.ontimestampmap=g=>
{a.timestampmap=g};c.onparsingerror=g=>{H.log.warn("Error encountered when parsing cues: "+g.message)};if(a.segment.map){var e=a.segment.map.bytes;b&&(e=decodeURIComponent(escape(String.fromCharCode.apply(null,e))));c.parse(e)}e=a.bytes;b&&(e=decodeURIComponent(escape(String.fromCharCode.apply(null,e))));c.parse(e);c.flush()}updateTimeMapping_(a,b,c){const e=a.segment;if(b)if(a.cues.length){var g=a.timestampmap,m=g.MPEGTS/9E4-g.LOCAL+b.mapping;a.cues.forEach(p=>{p.startTime+=m;p.endTime+=m});c.syncInfo||
(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-e.duration)})}else e.empty=!0}}const Sq=function(a,b,c=0){if(a.segments)for(let g=0;g<a.segments.length;g++){const m=a.segments[g];if(!e)a:{var e=c+m.duration/2;const p=b.cues;for(let u=0;u<p.length;u++){const x=p[u];if(e>=x.adStartTime&&e<=x.adEndTime){e=x;break a}}e=null}if(e){if("cueIn"in m){e.endTime=c;e.adEndTime=c;c+=m.duration;e=null;continue}if(c<e.endTime){c+=m.duration;
continue}e.endTime+=m.duration}else if("cueOut"in m&&(e=new D.VTTCue(c,c+m.duration,m.cueOut),e.adStartTime=c,e.adEndTime=c+parseFloat(m.cueOut),b.addCue(e)),"cueOutCont"in m){const [p,u]=m.cueOutCont.split("/").map(parseFloat);e=new D.VTTCue(c,c+m.duration,"");e.adStartTime=c-p;e.adEndTime=e.adStartTime+u;b.addCue(e)}c+=m.duration}},Pl=[{name:"VOD",run:(a,b,c,e,g)=>Infinity!==c?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(a,b,c,e,g)=>{if(!Object.keys(a.timelineToDatetimeMappings).length)return null;
e=c=null;const m=Hg(b);g=g||0;for(let x=0;x<m.length;x++){const y=m[b.endList||0===g?x:m.length-(x+1)];var p=y.segment,u=a.timelineToDatetimeMappings[p.timeline];if(u&&p.dateTimeObject){u=p.dateTimeObject.getTime()/1E3+u;if(p.parts&&"number"===typeof y.partIndex)for(let B=0;B<y.partIndex;B++)u+=p.parts[B].duration;p=Math.abs(g-u);if(null!==e&&(0===p||e<p))break;e=p;c={time:u,segmentIndex:y.segmentIndex,partIndex:y.partIndex}}}return c}},{name:"Segment",run:(a,b,c,e,g)=>{c=a=null;g=g||0;const m=Hg(b);
for(let u=0;u<m.length;u++){const x=m[b.endList||0===g?u:m.length-(u+1)];var p=x.segment;const y=x.part&&x.part.start||p&&p.start;if(p.timeline===e&&"undefined"!==typeof y){p=Math.abs(g-y);if(null!==c&&c<p)break;if(!a||null===c||c>=p)c=p,a={time:y,segmentIndex:x.segmentIndex,partIndex:x.partIndex}}}return a}},{name:"Discontinuity",run:(a,b,c,e,g)=>{c=null;g=g||0;if(b.discontinuityStarts&&b.discontinuityStarts.length){e=null;for(let m=0;m<b.discontinuityStarts.length;m++){const p=b.discontinuityStarts[m],
u=a.discontinuities[b.discontinuitySequence+m+1];if(u){const x=Math.abs(g-u.time);if(null!==e&&e<x)break;if(!c||null===e||e>=x)e=x,c={time:u.time,segmentIndex:p,partIndex:null}}}}return c}},{name:"Playlist",run:(a,b,c,e,g)=>b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence,partIndex:null}:null}];class Tq extends H.EventTarget{constructor(a){super();this.timelines=[];this.discontinuities=[];this.timelineToDatetimeMappings={};this.logger_=ob("SyncController")}getSyncPoint(a,
b,c,e){a=this.runStrategies_(a,b,c,e);return a.length?this.selectSyncPoint_(a,{key:"time",value:e}):null}getExpiredTime(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=-1);return Math.abs(b.time+td({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:b.segmentIndex,endIndex:0}))}runStrategies_(a,b,c,e){const g=[];for(let m=0;m<Pl.length;m++){const p=
Pl[m],u=p.run(this,a,b,c,e);u&&(u.strategy=p.name,g.push({strategy:p.name,syncPoint:u}))}return g}selectSyncPoint_(a,b){let c=a[0].syncPoint,e=Math.abs(a[0].syncPoint[b.key]-b.value),g=a[0].strategy;for(let m=1;m<a.length;m++){const p=Math.abs(a[m].syncPoint[b.key]-b.value);p<e&&(e=p,c=a[m].syncPoint,g=a[m].strategy)}this.logger_(`syncPoint for [${b.key}: ${b.value}] chosen with strategy`+` [${g}]: [time:${c.time},`+` segmentIndex:${c.segmentIndex}`+("number"===typeof c.partIndex?`,partIndex:${c.partIndex}`:
"")+"]");return c}saveExpiredSegmentInfo(a,b){var c=b.mediaSequence-a.mediaSequence;if(86400<c)H.log.warn(`Not saving expired segment info. Media sequence gap ${c} is too large.`);else for(--c;0<=c;c--){const e=a.segments[c];if(e&&"undefined"!==typeof e.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:e.start};this.logger_(`playlist refresh sync: [time:${b.syncInfo.time},`+` mediaSequence: ${b.syncInfo.mediaSequence}]`);this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(a){this.timelineToDatetimeMappings=
{};if(a.segments&&a.segments.length&&a.segments[0].dateTimeObject){a=a.segments[0];const b=a.dateTimeObject.getTime()/1E3;this.timelineToDatetimeMappings[a.timeline]=-b}}saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:b}){const c=this.calculateSegmentTimeMapping_(a,a.timingInfo,b),e=a.segment;c&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:e.start}));a=e.dateTimeObject;e.discontinuity&&b&&a&&
(this.timelineToDatetimeMappings[e.timeline]=-(a.getTime()/1E3))}timestampOffsetForTimeline(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}mappingForTimeline(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}calculateSegmentTimeMapping_(a,b,c){const e=a.segment,g=a.part;let m=this.timelines[a.timeline];if("number"===typeof a.timestampOffset)m={time:a.startOfSegment,mapping:a.startOfSegment-b.start},c&&(this.timelines[a.timeline]=m,this.trigger("timestampoffset"),
this.logger_(`time mapping for timeline ${a.timeline}: `+`[time: ${m.time}] [mapping: ${m.mapping}]`)),a=a.startOfSegment,b=b.end+m.mapping;else if(m)a=b.start+m.mapping,b=b.end+m.mapping;else return!1;g&&(g.start=a,g.end=b);if(!e.start||a<e.start)e.start=a;e.end=b;return!0}saveDiscontinuitySyncInfo_(a){const b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(let g=0;g<b.discontinuityStarts.length;g++){var e=
b.discontinuityStarts[g];const m=b.discontinuitySequence+g+1,p=e-a.mediaIndex,u=Math.abs(p);if(!this.discontinuities[m]||this.discontinuities[m].accuracy>u)e=0>p?c.start-td({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex,endIndex:e}):c.end+td({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex+1,endIndex:e}),this.discontinuities[m]={time:e,accuracy:u}}}dispose(){this.trigger("dispose");this.off()}}class Uq extends H.EventTarget{constructor(){super();
this.pendingTimelineChanges_={};this.lastTimelineChanges_={}}clearPendingTimelineChange(a){this.pendingTimelineChanges_[a]=null;this.trigger("pendingtimelinechange")}pendingTimelineChange({type:a,from:b,to:c}){"number"===typeof b&&"number"===typeof c&&(this.pendingTimelineChanges_[a]={type:a,from:b,to:c},this.trigger("pendingtimelinechange"));return this.pendingTimelineChanges_[a]}lastTimelineChange({type:a,from:b,to:c}){"number"===typeof b&&"number"===typeof c&&(this.lastTimelineChanges_[a]={type:a,
from:b,to:c},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange"));return this.lastTimelineChanges_[a]}dispose(){this.trigger("dispose");this.pendingTimelineChanges_={};this.lastTimelineChanges_={};this.off()}}const Vq=Uk(Vk(function(){var a=function(){function x(){this.listeners={}}var y=x.prototype;y.on=function(B,z){this.listeners[B]||(this.listeners[B]=[]);this.listeners[B].push(z)};y.off=function(B,z){if(!this.listeners[B])return!1;z=this.listeners[B].indexOf(z);this.listeners[B]=
this.listeners[B].slice(0);this.listeners[B].splice(z,1);return-1<z};y.trigger=function(B){var z=this.listeners[B];if(z)if(2===arguments.length)for(var E=z.length,J=0;J<E;++J)z[J].call(this,arguments[1]);else{E=Array.prototype.slice.call(arguments,1);J=z.length;for(var G=0;G<J;++G)z[G].apply(this,E)}};y.dispose=function(){this.listeners={}};y.pipe=function(B){this.on("data",function(z){B.push(z)})};return x}();let b=null;class c{constructor(x){if(!b){var y=[[[],[],[],[],[]],[[],[],[],[],[]]],B=y[0],
z=y[1],E=B[4],J=z[4],G,O,R;const T=[],ea=[];let K;let ba,ta;for(G=0;256>G;G++)ea[(T[G]=G<<1^283*(G>>7))^G]=G;for(O=R=0;!E[O];O^=K||1,R=ea[R]||1){ba=R^R<<1^R<<2^R<<3^R<<4;ba=ba>>8^ba&255^99;E[O]=ba;J[ba]=O;var W=T[G=T[K=T[O]]];ta=16843009*W^65537*G^257*K^16843008*O;W=257*T[ba]^16843008*ba;for(G=0;4>G;G++)B[G][O]=W=W<<24^W>>>8,z[G][ba]=ta=ta<<24^ta>>>8}for(G=0;5>G;G++)B[G]=B[G].slice(0),z[G]=z[G].slice(0);b=y}this._tables=[[b[0][0].slice(),b[0][1].slice(),b[0][2].slice(),b[0][3].slice(),b[0][4].slice()],
[b[1][0].slice(),b[1][1].slice(),b[1][2].slice(),b[1][3].slice(),b[1][4].slice()]];y=this._tables[0][4];B=this._tables[1];E=x.length;J=1;if(4!==E&&6!==E&&8!==E)throw Error("Invalid aes key size");O=x.slice(0);R=[];this._key=[O,R];for(x=E;x<4*E+28;x++){z=O[x-1];if(0===x%E||8===E&&4===x%E)z=y[z>>>24]<<24^y[z>>16&255]<<16^y[z>>8&255]<<8^y[z&255],0===x%E&&(z=z<<8^z>>>24^J<<24,J=J<<1^283*(J>>7));O[x]=O[x-E]^z}for(E=0;x;E++,x--)z=O[E&3?x:x-4],R[E]=4>=x||4>E?z:B[0][y[z>>>24]]^B[1][y[z>>16&255]]^B[2][y[z>>
8&255]]^B[3][y[z&255]]}decrypt(x,y,B,z,E,J){const G=this._key[1];x^=G[0];z^=G[1];B^=G[2];y^=G[3];let O,R;const W=G.length/4-2;let T,ea=4;var K=this._tables[1];const ba=K[0],ta=K[1],Ea=K[2],V=K[3],Ca=K[4];for(T=0;T<W;T++)K=ba[x>>>24]^ta[z>>16&255]^Ea[B>>8&255]^V[y&255]^G[ea],O=ba[z>>>24]^ta[B>>16&255]^Ea[y>>8&255]^V[x&255]^G[ea+1],R=ba[B>>>24]^ta[y>>16&255]^Ea[x>>8&255]^V[z&255]^G[ea+2],y=ba[y>>>24]^ta[x>>16&255]^Ea[z>>8&255]^V[B&255]^G[ea+3],ea+=4,x=K,z=O,B=R;for(T=0;4>T;T++)E[(3&-T)+J]=Ca[x>>>24]<<
24^Ca[z>>16&255]<<16^Ca[B>>8&255]<<8^Ca[y&255]^G[ea++],K=x,x=z,z=B,B=y,y=K}}class e extends a{constructor(){super(a);this.jobs=[];this.delay=1;this.timeout_=null}processJob_(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}push(x){this.jobs.push(x);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const g=function(x){return x<<24|(x&65280)<<8|(x&16711680)>>8|x>>>24};class m{constructor(x,y,B,z){const E=m.STEP,
J=new Int32Array(x.buffer),G=new Uint8Array(x.byteLength);x=0;this.asyncStream_=new e;this.asyncStream_.push(this.decryptChunk_(J.subarray(x,x+E),y,B,G));for(x=E;x<J.length;x+=E)B=new Uint32Array([g(J[x-4]),g(J[x-3]),g(J[x-2]),g(J[x-1])]),this.asyncStream_.push(this.decryptChunk_(J.subarray(x,x+E),y,B,G));this.asyncStream_.push(function(){z(null,G.subarray(0,G.byteLength-G[G.byteLength-1]))})}static get STEP(){return 32E3}decryptChunk_(x,y,B,z){return function(){const E=new Int32Array(x.buffer,x.byteOffset,
x.byteLength>>2),J=new c(Array.prototype.slice.call(y)),G=new Uint8Array(x.byteLength),O=new Int32Array(G.buffer);let R,W,T,ea,K,ba,ta,Ea,V;R=B[0];W=B[1];T=B[2];ea=B[3];for(V=0;V<E.length;V+=4)K=g(E[V]),ba=g(E[V+1]),ta=g(E[V+2]),Ea=g(E[V+3]),J.decrypt(K,ba,ta,Ea,O,V),O[V]=g(O[V]^R),O[V+1]=g(O[V+1]^W),O[V+2]=g(O[V+2]^T),O[V+3]=g(O[V+3]^ea),R=K,W=ba,T=ta,ea=Ea;z.set(G,x.byteOffset)}}}var p="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:{};p=("undefined"!==typeof window?window:"undefined"!==typeof p?p:"undefined"!==typeof self?self:{}).BigInt||Number;[p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000")];(function(){var x=new Uint16Array([65484]);x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength);return 255===x[0]?"big":204===x[0]?"little":"unknown"})();const u=function(x){const y={};Object.keys(x).forEach(B=>
{const z=x[B];var E="function"===ArrayBuffer.isView?ArrayBuffer.isView(z):z&&z.buffer instanceof ArrayBuffer;y[B]=E?{bytes:z.buffer,byteOffset:z.byteOffset,byteLength:z.byteLength}:z});return y};self.onmessage=function(x){const y=x.data;x=new Uint8Array(y.encrypted.bytes,y.encrypted.byteOffset,y.encrypted.byteLength);const B=new Uint32Array(y.key.bytes,y.key.byteOffset,y.key.byteLength/4),z=new Uint32Array(y.iv.bytes,y.iv.byteOffset,y.iv.byteLength/4);new m(x,B,z,function(E,J){self.postMessage(u({source:y.source,
decrypted:J}),[J.buffer])})}}));var Wq=Tk(Vq);const Xe=(a,b)=>{a.abort();a.pause();b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},Xq=(a,b)=>()=>{const {segmentLoaders:{[a]:c,main:e},mediaTypes:{[a]:g}}=b;var m=g.activeTrack();const p=g.getActiveGroup(),u=g.activePlaylistLoader,x=g.lastGroup_;p&&x&&p.id===x.id||(g.lastGroup_=p,g.lastTrack_=m,Xe(c,g),p&&!p.isMainPlaylist&&(p.playlistLoader?(c.resyncLoader(),m=p.playlistLoader,g.activePlaylistLoader=m,m.load()):
u&&e.resetEverything()))},Yq=(a,b)=>()=>{const {segmentLoaders:{[a]:c},mediaTypes:{[a]:e}}=b;e.lastGroup_=null;c.abort();c.pause()},Zq=(a,b)=>()=>{const {mainPlaylistLoader:c,segmentLoaders:{[a]:e,main:g},mediaTypes:{[a]:m}}=b;var p=m.activeTrack(),u=m.getActiveGroup(),x=m.activePlaylistLoader;const y=m.lastTrack_;if(!y||!p||y.id!==p.id)if(m.lastGroup_=u,m.lastTrack_=p,Xe(e,m),u)if(u.isMainPlaylist)p&&y&&p.id!==y.id&&(u=b.vhs.playlistController_,x=u.selectPlaylist(),u.media()!==x&&(m.logger_(`track change. Switching main audio from ${y.id} to ${p.id}`),
c.pause(),g.resetEverything(),u.fastQualityChange_(x)));else{if("AUDIO"===a){if(!u.playlistLoader){g.setAudio(!0);g.resetEverything();return}e.setAudio(!0);g.setAudio(!1)}x===u.playlistLoader?(p=u.playlistLoader,m.activePlaylistLoader=p,p.load()):(e.track&&e.track(p),e.resetEverything(),p=u.playlistLoader,m.activePlaylistLoader=p,p.load())}},Ye={AUDIO:(a,b)=>()=>{const {segmentLoaders:{[a]:c},mediaTypes:{[a]:e},excludePlaylist:g}=b;Xe(c,e);const m=e.activeTrack();var p=e.activeGroup();p=(p.filter(u=>
u.default)[0]||p[0]).id;p=e.tracks[p];if(m===p)g({error:{message:"Problem encountered loading the default audio track."}});else{H.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const u in e.tracks)e.tracks[u].enabled=e.tracks[u]===p;e.onTrackChanged()}},SUBTITLES:(a,b)=>()=>{const {segmentLoaders:{[a]:c},mediaTypes:{[a]:e}}=b;H.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");Xe(c,e);const g=e.activeTrack();g&&(g.mode=
"disabled");e.onTrackChanged()}},Ql={AUDIO:(a,b,c)=>{if(b){var {tech:e,requestOptions:g,segmentLoaders:{[a]:m}}=c;b.on("loadedmetadata",()=>{const p=b.media();m.playlist(p,g);(!e.paused()||p.endList&&"none"!==e.preload())&&m.load()});b.on("loadedplaylist",()=>{m.playlist(b.media(),g);e.paused()||m.load()});b.on("error",Ye[a](a,c))}},SUBTITLES:(a,b,c)=>{const {tech:e,requestOptions:g,segmentLoaders:{[a]:m},mediaTypes:{[a]:p}}=c;b.on("loadedmetadata",()=>{const u=b.media();m.playlist(u,g);m.track(p.activeTrack());
(!e.paused()||u.endList&&"none"!==e.preload())&&m.load()});b.on("loadedplaylist",()=>{m.playlist(b.media(),g);e.paused()||m.load()});b.on("error",Ye[a](a,c))}},$q={AUDIO:(a,b)=>{const {vhs:c,sourceType:e,segmentLoaders:{[a]:g},requestOptions:m,main:{mediaGroups:p},mediaTypes:{[a]:{groups:u,tracks:x,logger_:y}},mainPlaylistLoader:B}=b,z=ud(B.main);p[a]&&0!==Object.keys(p[a]).length||(p[a]={main:{default:{default:!0}}},z&&(p[a].main.default.playlists=B.main.playlists));for(const G in p[a]){u[G]||(u[G]=
[]);for(const O in p[a][G]){var E=p[a][G][O],J=void 0;z?(y(`AUDIO group '${G}' label '${O}' is a main playlist`),E.isMainPlaylist=!0,J=null):J="vhs-json"===e&&E.playlists?new Rc(E.playlists[0],c,m):E.resolvedUri?new Rc(E.resolvedUri,c,m):E.playlists&&"dash"===e?new Pg(E.playlists[0],c,m,B):null;E=ka({id:O,playlistLoader:J},E);Ql[a](a,E.playlistLoader,b);u[G].push(E);if("undefined"===typeof x[O]){J=H.AudioTrack;let R=E.default?"main":"alternative";E.characteristics&&0<=E.characteristics.indexOf("public.accessibility.describes-video")&&
(R="main-desc");E=new J({id:O,kind:R,enabled:!1,language:E.language,default:E.default,label:O});x[O]=E}}}g.on("error",Ye[a](a,b))},SUBTITLES:(a,b)=>{const {tech:c,vhs:e,sourceType:g,segmentLoaders:{[a]:m},requestOptions:p,main:{mediaGroups:u},mediaTypes:{[a]:{groups:x,tracks:y}},mainPlaylistLoader:B}=b;for(const E in u[a]){x[E]||(x[E]=[]);for(const J in u[a][E]){if(!e.options_.useForcedSubtitles&&u[a][E][J].forced)continue;var z=u[a][E][J];let G;if("hls"===g)G=new Rc(z.resolvedUri,e,p);else if("dash"===
g){if(!z.playlists.filter(O=>Infinity!==O.excludeUntil).length)return;G=new Pg(z.playlists[0],e,p,B)}else"vhs-json"===g&&(G=new Rc(z.playlists?z.playlists[0]:z.resolvedUri,e,p));z=ka({id:J,playlistLoader:G},z);Ql[a](a,z.playlistLoader,b);x[E].push(z);"undefined"===typeof y[J]&&(z=c.addRemoteTextTrack({id:J,kind:"subtitles",default:z.default&&z.autoselect,language:z.language,label:J},!1).track,y[J]=z)}}m.on("error",Ye[a](a,b))},"CLOSED-CAPTIONS":(a,b)=>{const {tech:c,main:{mediaGroups:e},mediaTypes:{[a]:{groups:g,
tracks:m}}}=b;for(const p in e[a]){g[p]||(g[p]=[]);for(const u in e[a][p]){b=e[a][p][u];if(!/^(?:CC|SERVICE)/.test(b.instreamId))continue;const x=c.options_.vhs&&c.options_.vhs.captionServices||{};let y={label:u,language:b.language,instreamId:b.instreamId,default:b.default&&b.autoselect};x[y.instreamId]&&(y=ka(y,x[y.instreamId]));void 0===y.default&&delete y.default;g[p].push(ka({id:u},b));"undefined"===typeof m[u]&&(b=c.addRemoteTextTrack({id:y.instreamId,kind:"captions",default:y.default,language:y.language,
label:y.label},!1).track,m[u]=b)}}}},Rl=(a,b)=>{for(let c=0;c<a.length;c++)if(Kg(b,a[c])||a[c].playlists&&Rl(a[c].playlists,b))return!0;return!1},ar=(a,b)=>c=>{const {mainPlaylistLoader:e,mediaTypes:{[a]:{groups:g}}}=b,m=e.media();if(!m)return null;let p=null;m.attributes[a]&&(p=g[m.attributes[a]]);const u=Object.keys(g);if(!p)if("AUDIO"===a&&1<u.length&&ud(b.main))for(let x=0;x<u.length;x++){const y=g[u[x]];if(Rl(y,m)){p=y;break}}else g.main?p=g.main:1===u.length&&(p=g[u[0]]);return"undefined"===
typeof c?p:null!==c&&p?p.filter(x=>x.id===c.id)[0]||null:null},br={AUDIO:(a,b)=>()=>{const {mediaTypes:{[a]:{tracks:c}}}=b;for(const e in c)if(c[e].enabled)return c[e];return null},SUBTITLES:(a,b)=>()=>{const {mediaTypes:{[a]:{tracks:c}}}=b;for(const e in c)if("showing"===c[e].mode||"hidden"===c[e].mode)return c[e];return null}},cr=(a,{mediaTypes:b})=>()=>{const c=b[a].activeTrack();return c?b[a].activeGroup(c):null},dr=a=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(y=>{$q[y](y,a)});const {mediaTypes:b,
mainPlaylistLoader:c,tech:e,vhs:g,segmentLoaders:{AUDIO:m,main:p}}=a;["AUDIO","SUBTITLES"].forEach(y=>{b[y].activeGroup=ar(y,a);b[y].activeTrack=br[y](y,a);b[y].onGroupChanged=Xq(y,a);b[y].onGroupChanging=Yq(y,a);b[y].onTrackChanged=Zq(y,a);b[y].getActiveGroup=cr(y,a)});var u=b.AUDIO.activeGroup();u&&(u=(u.filter(y=>y.default)[0]||u[0]).id,b.AUDIO.tracks[u].enabled=!0,b.AUDIO.onGroupChanged(),b.AUDIO.onTrackChanged(),b.AUDIO.getActiveGroup().playlistLoader?(p.setAudio(!1),m.setAudio(!0)):p.setAudio(!0));
c.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(y=>b[y].onGroupChanged())});c.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(y=>b[y].onGroupChanging())});const x=()=>{b.AUDIO.onTrackChanged();e.trigger({type:"usage",name:"vhs-audio-change"})};e.audioTracks().addEventListener("change",x);e.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged);g.on("dispose",()=>{e.audioTracks().removeEventListener("change",x);e.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)});
e.clearTracks("audio");for(const y in b.AUDIO.tracks)e.audioTracks().addTrack(b.AUDIO.tracks[y])},er=()=>{const a={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(b=>{a[b]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Jb,activeTrack:Jb,getActiveGroup:Jb,onGroupChanged:Jb,onTrackChanged:Jb,lastTrack_:null,logger_:ob(`MediaGroups[${b}]`)}});return a};let Pb;const fr="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred mediaAppends".split(" "),
gr=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},hr=function({currentPlaylist:a,buffered:b,currentTime:c,nextPlaylist:e,bufferLowWaterLine:g,bufferHighWaterLine:m,duration:p,bufferBasedABR:u,log:x}){if(!e)return H.log.warn("We received no playlist to switch to. Please check your stream."),!1;const y=`allowing switch ${a&&a.id||"null"} -> ${e.id}`;if(!a)return x(`${y} as current playlist is not set`),!0;if(e.id===a.id)return!1;const B=!!Pc(b,c).length;if(!a.endList){if(!B&&
"number"===typeof a.partTargetDuration)return x(`not ${y} as current playlist is live llhls, but currentTime isn't in buffered.`),!1;x(`${y} as current playlist is live`);return!0}b=Fg(b,c);c=u?Ga.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ga.MAX_BUFFER_LOW_WATER_LINE;if(p<c)return x(`${y} as duration < max low water line (${p} < ${c})`),!0;e=e.attributes.BANDWIDTH;a=a.attributes.BANDWIDTH;if(e<a&&(!u||b<m))return g=`${y} as next bandwidth < current bandwidth (${e} < ${a})`,u&&(g+=` and forwardBuffer < bufferHighWaterLine (${b} < ${m})`),
x(g),!0;if((!u||e>a)&&b>=g)return m=`${y} as forwardBuffer >= bufferLowWaterLine (${b} >= ${g})`,u&&(m+=` and next bandwidth > current bandwidth (${e} > ${a})`),x(m),!0;x(`not ${y} as no switching criteria met`);return!1};class ir extends H.EventTarget{constructor(a){super();const {src:b,withCredentials:c,tech:e,bandwidth:g,externVhs:m,useCueTags:p,playlistExclusionDuration:u,enableLowInitialPlaylist:x,sourceType:y,cacheEncryptionKeys:B,bufferBasedABR:z,leastPixelDiffSelector:E,captionServices:J}=
a;if(!b)throw Error("A non-empty playlist URL or JSON manifest string is required");var {maxPlaylistRetries:G}=a;if(null===G||"undefined"===typeof G)G=Infinity;Pb=m;this.bufferBasedABR=!!z;this.leastPixelDiffSelector=!!E;this.withCredentials=c;this.tech_=e;this.vhs_=e.vhs;this.sourceType_=y;this.useCueTags_=p;this.playlistExclusionDuration=u;this.maxPlaylistRetries=G;this.enableLowInitialPlaylist=x;this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=
"");this.requestOptions_={withCredentials:c,maxPlaylistRetries:G,timeout:null};this.on("error",this.pauseLoading);this.mediaTypes_=er();this.mediaSource=new D.MediaSource;this.handleDurationChange_=this.handleDurationChange_.bind(this);this.handleSourceOpen_=this.handleSourceOpen_.bind(this);this.handleSourceEnded_=this.handleSourceEnded_.bind(this);this.mediaSource.addEventListener("durationchange",this.handleDurationChange_);this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_);
this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_);this.seekable_=La();this.hasPlayed_=!1;this.syncController_=new Tq(a);this.segmentMetadataTrack_=e.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;this.decrypter_=new Wq;this.sourceUpdater_=new Nl(this.mediaSource);this.inbandTextTracks_={};this.timelineChangeController_=new Uq;G={vhs:this.vhs_,parse708captions:a.parse708captions,useDtsForTimestampOffset:a.useDtsForTimestampOffset,captionServices:J,mediaSource:this.mediaSource,
currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:g,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:B,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:a.exactManifestTimings,
addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new Pg(b,this.vhs_,ka(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Rc(b,this.vhs_,ka(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)}));this.setupMainPlaylistLoaderListeners_();this.mainSegmentLoader_=new kh(ka(G,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),a);this.audioSegmentLoader_=
new kh(ka(G,{loaderType:"audio"}),a);this.subtitleSegmentLoader_=new Rq(ka(G,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((O,R)=>{function W(){e.off("vttjserror",T);O()}function T(){e.off("vttjsloaded",W);R()}e.one("vttjsloaded",W);e.one("vttjserror",T);e.addWebVttScript_()})}),a);this.setupSegmentLoaderListeners_();this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),
this.tech_.on("play",()=>this.startABRTimer_()));fr.forEach(O=>{this[O+"_"]=gr.bind(this,O)});this.logger_=ob("pc");this.triggeredFmp4Usage=!1;"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null;this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load();this.audioAppendsToLoadedData__=this.mainAppendsToLoadedData__=this.timeToLoadedData__=-1;a="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(a,()=>{const O=Date.now();
this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-O;this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends;this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const a=this.mainAppendsToLoadedData_(),b=this.audioAppendsToLoadedData_();return-1===a||-1===b?-1:a+b}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(a=
"abr"){const b=this.selectPlaylist();b&&this.shouldSwitchToMedia_(b)&&this.switchMedia_(b,a)}switchMedia_(a,b,c){var e=this.media();e=e&&(e.id||e.uri);const g=a.id||a.uri;e&&e!==g&&(this.logger_(`switch media ${e} -> ${g} from ${b}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${b}`}));this.mainPlaylistLoader_.media(a,c)}startABRTimer_(){this.stopABRTimer_();this.abrTimer_=D.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(D.clearInterval(this.abrTimer_),
this.abrTimer_=null)}getAudioTrackPlaylists_(){const a=this.main(),b=a&&a.playlists||[];if(!a||!a.mediaGroups||!a.mediaGroups.AUDIO)return b;const c=a.mediaGroups.AUDIO;var e=Object.keys(c);let g;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)g=this.mediaTypes_.AUDIO.activeTrack();else{e=c.main||e.length&&c[e[0]];for(var m in e)if(e[m].default){g={label:m};break}}if(!g)return b;m=[];for(const p in c)if(c[p][g.label])if(e=c[p][g.label],e.playlists&&e.playlists.length)m.push.apply(m,e.playlists);
else if(e.uri)m.push(e);else if(a.playlists.length)for(e=0;e<a.playlists.length;e++){const u=a.playlists[e];u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===p&&m.push(u)}return m.length?m:b}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const a=this.mainPlaylistLoader_.media(),b=1500*a.targetDuration;Jg(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=b;a.endList&&"none"!==this.tech_.preload()&&
(this.mainSegmentLoader_.playlist(a,this.requestOptions_),this.mainSegmentLoader_.load());dr({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)});this.triggerPresenceUsage_(this.main(),a);this.setupFirstPlay();
if(!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media())this.trigger("selectedinitialmedia");else this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})});this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let a=this.mainPlaylistLoader_.media();if(!a){this.excludeUnsupportedVariants_();let b;this.enableLowInitialPlaylist&&(b=this.selectInitialPlaylist());
b||(b=this.selectPlaylist());if(!b||!this.shouldSwitchToMedia_(b))return;this.initialMedia_=b;this.switchMedia_(this.initialMedia_,"initial");if("vhs-json"!==this.sourceType_||!this.initialMedia_.segments)return;a=this.initialMedia_}this.handleUpdatedMediaPlaylist(a)});this.mainPlaylistLoader_.on("error",()=>{const a=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:a.playlist,error:a})});this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort();this.mainSegmentLoader_.pause()});
this.mainPlaylistLoader_.on("mediachange",()=>{const a=this.mainPlaylistLoader_.media(),b=1500*a.targetDuration;Jg(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=b;this.mainPlaylistLoader_.load();this.mainSegmentLoader_.playlist(a,this.requestOptions_);this.mainSegmentLoader_.load();this.tech_.trigger({type:"mediachange",bubbles:!0})});this.mainPlaylistLoader_.on("playlistunchanged",()=>{const a=this.mainPlaylistLoader_.media();
"playlist-unchanged"!==a.lastExcludeReason_&&this.stuckAtPlaylistEnd_(a)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))});this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})});this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(a){this.useCueTags_&&this.updateAdCues_(a);
this.mainSegmentLoader_.playlist(a,this.requestOptions_);this.updateDuration(!a.endList);this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(a,b){a=a.mediaGroups||{};let c=!0;const e=Object.keys(a.AUDIO);for(const g in a.AUDIO)for(const m in a.AUDIO[g])a.AUDIO[g][m].uri||(c=!1);c&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"});Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"});
Pb.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"vhs-aes"});e.length&&1<Object.keys(a.AUDIO[e[0]]).length&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(a){const b=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,c=this.tech_.currentTime(),e=this.bufferLowWaterLine(),g=this.bufferHighWaterLine(),m=this.tech_.buffered();return hr({buffered:m,currentTime:c,
currentPlaylist:b,nextPlaylist:a,bufferLowWaterLine:e,bufferHighWaterLine:g,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate");this.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()});if(!this.bufferBasedABR)this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")});this.mainSegmentLoader_.on("error",
()=>{const b=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:b.playlist,error:b})});this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_;this.trigger("error")});this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()});this.audioSegmentLoader_.on("appenderror",
()=>{this.error=this.audioSegmentLoader_.error_;this.trigger("error")});this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended");this.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",b=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});const a=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();
const b=this.getCodecsOrExclude_();b&&this.sourceUpdater_.addOrChangeSourceBuffers(b)};this.mainSegmentLoader_.on("trackinfo",a);this.audioSegmentLoader_.on("trackinfo",a);this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("ended",
()=>{this.logger_("audioSegmentLoader ended");this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(a=this.selectPlaylist()){a===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):
(this.switchMedia_(a,"fast-quality"),this.resetMainLoaderReplaceSegments())}resetMainLoaderReplaceSegments(){var a=this.tech_.buffered();a=a.end(a.length-1);this.mainSegmentLoader_.replaceSegmentsUntil=a;this.mainSegmentLoader_.resetLoaderProperties();this.mainSegmentLoader_.resetLoader()}play(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<a.start(0))return this.tech_.setCurrentTime(a.end(a.length-
1))}}setupFirstPlay(){var a=this.mainPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList||a.start){const b=this.seekable();if(!b.length)return!1;const c=b.end(0);let e=c;a.start&&(a=a.start.timeOffset,e=0>a?Math.max(c+a,b.start(0)):Math.min(c,a));this.trigger("firstplay");this.tech_.setCurrentTime(e)}this.hasPlayed_=!0;this.load();return!0}handleSourceOpen_(){this.tryToCreateSourceBuffers_();if(this.tech_.autoplay()){const a=this.tech_.play();"undefined"!==typeof a&&
"function"===typeof a.then&&a.then(null,b=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(this.inbandTextTracks_.metadataTrack_){var a=this.inbandTextTracks_.metadataTrack_.cues;if(a&&a.length){var b=this.duration();a[a.length-1].endTime=isNaN(b)||Infinity===Math.abs(b)?Number.MAX_VALUE:b}}}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let a=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const b=this.mainSegmentLoader_.getCurrentMediaInfo_();
a=!b||b.hasVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}a&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.duration());if(null===b)return!1;a=Pb.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var c=this.tech_.buffered();if(!c.length)return a-b<=Cb;c=c.end(c.length-1);return c-b<=Cb&&a-c<=Cb}excludePlaylist({playlistToExclude:a=this.mainPlaylistLoader_.media(),
error:b={},playlistExclusionDuration:c}){a=a||this.mainPlaylistLoader_.media();c=c||b.playlistExclusionDuration||this.playlistExclusionDuration;if(a){a.playlistErrors_++;var e=this.mainPlaylistLoader_.main.playlists,g=e.filter(De);g=1===g.length&&g[0]===a;if(1===e.length&&Infinity!==c)return H.log.warn(`Problem encountered with playlist ${a.id}. `+"Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(g);if(g){let m=!1;e.forEach(p=>{if(p!==
a){var u=p.excludeUntil;"undefined"!==typeof u&&Infinity!==u&&(m=!0,delete p.excludeUntil)}});m&&(H.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}c=a.playlistErrors_>this.maxPlaylistRetries?Infinity:Date.now()+1E3*c;a.excludeUntil=c;b.reason&&(a.lastExcludeReason_=b.reason);this.tech_.trigger("excludeplaylist");this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});if(c=this.selectPlaylist())return(b.internal?
this.logger_:H.log.warn)(`${b.internal?"Internal problem":"Problem"} encountered with playlist ${a.id}.`+`${b.message?" "+b.message:""} Switching to playlist ${c.id}.`),c.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),b=c.targetDuration/2*1E3||5E3,b="number"===typeof c.lastRequest&&Date.now()-c.lastRequest<=b,
this.switchMedia_(c,"exclude",g||b);this.error="Playback cannot continue. No available working or supported playlists.";this.trigger("error")}else this.error=b,"open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network")}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]);this.stopABRTimer_()}delegateLoaders_(a,b){const c=[],e="all"===a;(e||"main"===a)&&c.push(this.mainPlaylistLoader_);const g=[];(e||"audio"===a)&&g.push("AUDIO");if(e||"subtitle"===
a)g.push("CLOSED-CAPTIONS"),g.push("SUBTITLES");g.forEach(m=>{(m=this.mediaTypes_[m]&&this.mediaTypes_[m].activePlaylistLoader)&&c.push(m)});["main","audio","subtitle"].forEach(m=>{const p=this[`${m}SegmentLoader_`];!p||a!==m&&"all"!==a||c.push(p)});c.forEach(m=>b.forEach(p=>{if("function"===typeof m[p])m[p]()}))}setCurrentTime(a){const b=Pc(this.tech_.buffered(),a);if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.media()||!this.mainPlaylistLoader_.media().segments)return 0;if(b&&b.length)return a;
this.mainSegmentLoader_.resetEverything();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.resetEverything();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.resetEverything();this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const a=this.mainPlaylistLoader_.media();return a?a.endList?this.mediaSource?this.mediaSource.duration:Pb.Playlist.duration(a):Infinity:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let a;if(this.mainPlaylistLoader_){var b=
this.mainPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.duration());if(null!==c){var e=this.mainPlaylistLoader_.main,g=Pb.Playlist.seekable(b,c,Pb.Playlist.liveEdgeDelay(e,b));if(0!==g.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=this.mediaTypes_.AUDIO.activePlaylistLoader.media();c=this.syncController_.getExpiredTime(b,this.duration());if(null===c)return;a=Pb.Playlist.seekable(b,c,Pb.Playlist.liveEdgeDelay(e,b));if(0===a.length)return}if(this.seekable_&&
this.seekable_.length){var m=this.seekable_.end(0);var p=this.seekable_.start(0)}a?a.start(0)>g.end(0)||g.start(0)>a.end(0)?this.seekable_=g:this.seekable_=La([[a.start(0)>g.start(0)?a.start(0):g.start(0),a.end(0)<g.end(0)?a.end(0):g.end(0)]]):this.seekable_=g;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===m&&this.seekable_.start(0)===p||(this.logger_(`seekable updated [${tk(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}}}}}updateDuration(a){this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",
this.updateDuration_),this.updateDuration_=null);if("open"!==this.mediaSource.readyState)this.updateDuration_=this.updateDuration.bind(this,a),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);else if(a)a=this.seekable(),a.length&&(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));else{a=this.tech_.buffered();var b=Pb.Playlist.duration(this.mainPlaylistLoader_.media());0<a.length&&(b=Math.max(b,a.end(a.length-
1)));this.mediaSource.duration!==b&&this.sourceUpdater_.setDuration(b)}}dispose(){this.trigger("dispose");this.decrypter_.terminate();this.mainPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);["AUDIO","SUBTITLES"].forEach(a=>{a=this.mediaTypes_[a].groups;for(const b in a)a[b].forEach(c=>{c.playlistLoader&&c.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();this.sourceUpdater_.dispose();
this.timelineChangeController_.dispose();this.stopABRTimer_();this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_);this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_);this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_);this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_);this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){var a=
!!this.mediaTypes_.AUDIO.activePlaylistLoader;const b=!!this.mainSegmentLoader_.getCurrentMediaInfo_();a=a?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return b&&a?!0:!1}getCodecsOrExclude_(){const a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},b=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();a.video=a.main;var c=Fd(this.main(),b);const e={},g=!!this.mediaTypes_.AUDIO.activePlaylistLoader;a.main.hasVideo&&
(e.video=c.video||a.main.videoCodec||"avc1.4d400d");a.main.isMuxed&&(e.video+=`,${c.audio||a.main.audioCodec||"mp4a.40.2"}`);if(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||g)e.audio=c.audio||a.main.audioCodec||a.audio.audioCodec||"mp4a.40.2",a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4;if(e.audio||e.video){var m={},p;["video","audio"].forEach(function(u){var x;if(x=e.hasOwnProperty(u))x=e[u],x=!(a[u].isFmp4?fe(x):Nf(x));x&&(x=a[u].isFmp4?"browser":"muxer",m[x]=
m[x]||[],m[x].push(e[u]),"audio"===u&&(p=x))});if(g&&p&&b.attributes.AUDIO){const u=b.attributes.AUDIO;this.main().playlists.forEach(x=>{(x.attributes&&x.attributes.AUDIO)===u&&x!==b&&(x.excludeUntil=Infinity)});this.logger_(`excluding audio group ${u} as ${p} does not support codec(s): "${e.audio}"`)}if(Object.keys(m).length)c=Object.keys(m).reduce((u,x)=>{u&&(u+=", ");return u+=`${x} does not support codec(s): "${m[x].join(",")}"`},"")+".",this.excludePlaylist({playlistToExclude:b,error:{internal:!0,
message:c},playlistExclusionDuration:Infinity});else{if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];["video","audio"].forEach(x=>{const y=(yb(this.sourceUpdater_.codecs[x]||"")[0]||{}).type,B=(yb(e[x]||"")[0]||{}).type;y&&B&&y.toLowerCase()!==B.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[x]}" -> "${e[x]}"`)});if(u.length){this.excludePlaylist({playlistToExclude:b,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},
playlistExclusionDuration:Infinity});return}}return e}}else this.excludePlaylist({playlistToExclude:b,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:Infinity})}tryToCreateSourceBuffers_(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var a=this.getCodecsOrExclude_();a&&(this.sourceUpdater_.createSourceBuffers(a),a=[a.video,a.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(a))}}excludeUnsupportedVariants_(){const a=
this.main().playlists,b=[];Object.keys(a).forEach(c=>{c=a[c];if(-1===b.indexOf(c.id)){b.push(c.id);var e=Fd(this.main,c),g=[];!e.audio||Nf(e.audio)||fe(e.audio)||g.push(`audio codec ${e.audio}`);!e.video||Nf(e.video)||fe(e.video)||g.push(`video codec ${e.video}`);e.text&&"stpp.ttml.im1t"===e.text&&g.push(`text codec ${e.text}`);g.length&&(c.excludeUntil=Infinity,this.logger_(`excluding ${c.id} for unsupported: ${g.join(", ")}`))}})}excludeIncompatibleVariants_(a){const b=[],c=this.main().playlists;
a=Te(yb(a));const e=Dl(a),g=a.video&&yb(a.video)[0]||null,m=a.audio&&yb(a.audio)[0]||null;Object.keys(c).forEach(p=>{p=c[p];if(-1===b.indexOf(p.id)&&Infinity!==p.excludeUntil){b.push(p.id);var u=[],x=Fd(this.mainPlaylistLoader_.main,p),y=Dl(x);if(x.audio||x.video)y!==e&&u.push(`codec count "${y}" !== "${e}"`),this.sourceUpdater_.canChangeType()||(y=x.video&&yb(x.video)[0]||null,x=x.audio&&yb(x.audio)[0]||null,y&&g&&y.type.toLowerCase()!==g.type.toLowerCase()&&u.push(`video codec "${y.type}" !== "${g.type}"`),
x&&m&&x.type.toLowerCase()!==m.type.toLowerCase()&&u.push(`audio codec "${x.type}" !== "${m.type}"`)),u.length&&(p.excludeUntil=Infinity,this.logger_(`excluding ${p.id}: ${u.join(" \x26\x26 ")}`))}})}updateAdCues_(a){let b=0;const c=this.seekable();c.length&&(b=c.start(0));Sq(a,this.cueTagsTrack_,b)}goalBufferLength(){const a=this.tech_.currentTime(),b=Ga.GOAL_BUFFER_LENGTH;return Math.min(b+a*Ga.GOAL_BUFFER_LENGTH_RATE,Math.max(b,Ga.MAX_GOAL_BUFFER_LENGTH))}bufferLowWaterLine(){const a=this.tech_.currentTime(),
b=Ga.BUFFER_LOW_WATER_LINE,c=Math.max(b,Ga.MAX_BUFFER_LOW_WATER_LINE),e=Math.max(b,Ga.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(b+a*Ga.BUFFER_LOW_WATER_LINE_RATE,this.bufferBasedABR?e:c)}bufferHighWaterLine(){return Ga.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(a){Hl(this.inbandTextTracks_,"com.apple.streaming",this.tech_);Jq({inbandTextTracks:this.inbandTextTracks_,dateRanges:a})}addMetadataToTextTrack(a,b,c){const e=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():
this.sourceUpdater_.audioTimestampOffset();Hl(this.inbandTextTracks_,a,this.tech_);Gq({inbandTextTracks:this.inbandTextTracks_,metadataArray:b,timestampOffset:e,videoDuration:c})}}const jr=(a,b,c)=>e=>{const g=a.main.playlists[b],m=Ig(g),p=De(g);if("undefined"===typeof e)return p;e?delete g.disabled:g.disabled=!0;e===p||m||(c(),e?a.trigger("renditionenabled"):a.trigger("renditiondisabled"));return e};class kr{constructor(a,b,c){const {playlistController_:e}=a,g=e.fastQualityChange_.bind(e);if(b.attributes){const m=
b.attributes.RESOLUTION;this.width=m&&m.width;this.height=m&&m.height;this.bandwidth=b.attributes.BANDWIDTH;this.frameRate=b.attributes["FRAME-RATE"]}this.codecs=Fd(e.main(),b);this.playlist=b;this.id=c;this.enabled=jr(a.playlists,b.id,g)}}const lr=function(a){a.representations=()=>{var b=a.playlistController_.main();return(b=ud(b)?a.playlistController_.getAudioTrackPlaylists_():b.playlists)?b.filter(c=>!Ig(c)).map((c,e)=>new kr(a,c,c.id)):[]}},Sl=["seeking","seeked","pause","playing","error"];class mr{constructor(a){this.playlistController_=
a.playlistController;this.tech_=a.tech;this.seekable=a.seekable;this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow;this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta;this.media=a.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.lastRecordedTime=null;this.logger_=ob("PlaybackWatcher");this.logger_("initialize");const b=()=>this.monitorCurrentTime_(),c=()=>this.monitorCurrentTime_(),e=()=>this.techWaiting_(),g=()=>this.resetTimeUpdate_(),m=this.playlistController_,
p=["main","subtitle","audio"],u={};p.forEach(y=>{u[y]={reset:()=>this.resetSegmentDownloads_(y),updateend:()=>this.checkSegmentDownloads_(y)};m[`${y}SegmentLoader_`].on("appendsdone",u[y].updateend);m[`${y}SegmentLoader_`].on("playlistupdate",u[y].reset);this.tech_.on(["seeked","seeking"],u[y].reset)});const x=y=>{["main","audio"].forEach(B=>{m[`${B}SegmentLoader_`][y]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=
this.tech_.currentTime(),x("off"))};this.clearSeekingAppendCheck_=()=>x("off");this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_();x("on")};this.tech_.on("seeked",this.clearSeekingAppendCheck_);this.tech_.on("seeking",this.watchForBadSeeking_);this.tech_.on("waiting",e);this.tech_.on(Sl,g);this.tech_.on("canplay",c);this.tech_.one("play",b);this.dispose=()=>{this.clearSeekingAppendCheck_();this.logger_("dispose");this.tech_.off("waiting",e);this.tech_.off(Sl,g);this.tech_.off("canplay",
c);this.tech_.off("play",b);this.tech_.off("seeking",this.watchForBadSeeking_);this.tech_.off("seeked",this.clearSeekingAppendCheck_);p.forEach(y=>{m[`${y}SegmentLoader_`].off("appendsdone",u[y].updateend);m[`${y}SegmentLoader_`].off("playlistupdate",u[y].reset);this.tech_.off(["seeked","seeking"],u[y].reset)});this.checkCurrentTimeTimeout_&&D.clearTimeout(this.checkCurrentTimeTimeout_);this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&D.clearTimeout(this.checkCurrentTimeTimeout_);
this.checkCurrentTimeTimeout_=D.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(a){const b=this.playlistController_[`${a}SegmentLoader_`];0<this[`${a}StalledDownloads_`]&&this.logger_(`resetting possible stalled download count for ${a} loader`);this[`${a}StalledDownloads_`]=0;this[`${a}Buffered_`]=b.buffered_()}checkSegmentDownloads_(a){const b=this.playlistController_,c=b[`${a}SegmentLoader_`],e=c.buffered_(),g=gp(this[`${a}Buffered_`],e);this[`${a}Buffered_`]=e;g?this.resetSegmentDownloads_(a):
(this[`${a}StalledDownloads_`]++,this.logger_(`found #${this[`${a}StalledDownloads_`]} ${a} appends that did not increase buffer (possible stalled download)`,{playlistId:c.playlist_&&c.playlist_.id,buffered:kc(e)}),10>this[`${a}StalledDownloads_`]||(this.logger_(`${a} loader stalled download exclusion`),this.resetSegmentDownloads_(a),this.tech_.trigger({type:"usage",name:`vhs-${a}-download-exclusion`}),"subtitle"!==a&&b.excludePlaylist({error:{message:`Excessive ${a} segment downloading detected.`},
playlistExclusionDuration:Infinity})))}checkCurrentTime_(){if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+Cb>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}resetTimeUpdate_(){this.consecutiveUpdates=
0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;var a=this.seekable();const b=this.tech_.currentTime();var c;this.afterSeekableWindow_(a,b,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(c=a.end(a.length-1));this.beforeSeekableWindow_(a,b)&&(c=a.start(0),c+=c===a.end(0)?0:Cb);if("undefined"!==typeof c)return this.logger_(`Trying to seek outside of seekable at time ${b} with `+`seekable range ${tk(a)}. Seeking to `+`${c}.`),this.tech_.setCurrentTime(c),!0;var e=this.playlistController_.sourceUpdater_;
a=this.tech_.buffered();c=e.audioBuffer?e.audioBuffered():null;var g=e.videoBuffer?e.videoBuffered():null;e=this.media();e=e.partTargetDuration?e.partTargetDuration:2*(e.targetDuration-Yb);c=[c,g];for(g=0;g<c.length;g++)if(c[g]&&Fg(c[g],b)<e)return!1;a=Ce(a,b);if(0===a.length)return!1;c=a.start(0)+Cb;this.logger_(`Buffered region starts (${a.start(0)}) `+` just beyond seek point (${b}). Seeking to ${c}.`);this.tech_.setCurrentTime(c);return!0}waiting_(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),
b=this.tech_.buffered();b=Pc(b,a);b.length&&a+3<=b.end(0)&&(this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.logger_(`Stopped at ${a} while inside a buffered region `+`[${b.start(0)} -> ${b.end(0)}]. Attempting to resume `+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}))}}techWaiting_(){var a=this.seekable();const b=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(a,b))return a=a.end(a.length-
1),this.logger_(`Fell out of live window at time ${b}. Seeking to `+`live point (seekable end) ${a}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0;a=this.tech_.vhs.playlistController_.sourceUpdater_;const c=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:b}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),
!0;a=Ce(c,b);return 0<a.length?(this.logger_(`Stopped at ${b} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(b),!0):!1}afterSeekableWindow_(a,b,c,e=!1){if(!a.length)return!1;let g=a.end(a.length-1)+Cb;const m="number"===typeof c.partTargetDuration;c.endList||!m&&!e||(g=a.end(a.length-1)+3*c.targetDuration);return b>g?!0:!1}beforeSeekableWindow_(a,b){return a.length&&0<a.start(0)&&b<a.start(0)-this.liveRangeSafeTimeDelta?!0:!1}videoUnderflow_({videoBuffered:a,audioBuffered:b,
currentTime:c}){if(a){var e;if(a.length&&b.length){const g=Pc(a,c-3);a=Pc(a,c);b=Pc(b,c);b.length&&!a.length&&g.length&&(e={start:g.end(0),end:b.end(0)})}else Ce(a,c).length||(e=this.gapFromVideoUnderflow_(a,c));return e?(this.logger_(`Encountered a gap in video from ${e.start} to ${e.end}. `+`Seeking to current time ${c}`),!0):!1}}skipTheGap_(a){var b=this.tech_.buffered();const c=this.tech_.currentTime();b=Ce(b,c);this.resetTimeUpdate_();0!==b.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",
c,"scheduled currentTime:",a,"nextRange start:",b.start(0)),this.tech_.setCurrentTime(b.start(0)+Yb),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(a,b){if(2>a.length)a=La();else{var c=[];for(var e=1;e<a.length;e++){var g=a.end(e-1);const m=a.start(e);c.push([g,m])}a=La(c)}for(c=0;c<a.length;c++)if(e=a.start(c),g=a.end(c),4>b-e&&2<b-e)return{start:e,end:g};return null}}const nr={errorInterval:30,getSource(a){const b=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||
this.currentSource();return a(b)}},Tl=function(a,b){let c=0,e=0;const g=ka(nr,b);a.ready(()=>{a.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const m=function(){e&&a.currentTime(e)},p=function(y){null!==y&&void 0!==y&&(e=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",m),a.src(y),a.trigger({type:"usage",name:"vhs-error-reload"}),a.play())},u=function(){if(Date.now()-c<1E3*g.errorInterval)a.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(g.getSource&&
"function"===typeof g.getSource)return c=Date.now(),g.getSource.call(a,p);H.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},x=function(){a.off("loadedmetadata",m);a.off("error",u);a.off("dispose",x)};a.on("error",u);a.on("dispose",x);a.reloadSourceOnError=function(y){x();Tl(a,y)}},or=function(a){Tl(this,a)},ua={PlaylistLoader:Rc,Playlist:Xa,utils:vp,STANDARD_PLAYLIST_SELECTOR:Gl,INITIAL_PLAYLIST_SELECTOR:function(){const a=this.playlists.main.playlists.filter(Xa.isEnabled);
Tc(a,(b,c)=>jh(b,c));return a.filter(b=>!!Fd(this.playlists.main,b).video)[0]||null},lastBandwidthSelector:Gl,movingAverageBandwidthSelector:function(a){let b=-1,c=-1;if(0>a||1<a)throw Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const e=this.useDevicePixelRatio?D.devicePixelRatio||1:1;0>b&&(c=b=this.systemBandwidth);0<this.systemBandwidth&&this.systemBandwidth!==c&&(b=a*this.systemBandwidth+(1-a)*b,c=this.systemBandwidth);return Fl(this.playlists.main,b,parseInt(Ve(this.tech_.el(),
"width"),10)*e,parseInt(Ve(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:jh,comparePlaylistResolution:function(a,b){let c,e;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width);c=c||D.Number.MAX_VALUE;b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(e=b.attributes.RESOLUTION.width);e=e||D.Number.MAX_VALUE;return c===e&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-
b.attributes.BANDWIDTH:c-e},xhr:Lk()};Object.keys(Ga).forEach(a=>{Object.defineProperty(ua,a,{get(){H.log.warn(`using Vhs.${a} is UNSAFE be sure you know what you are doing`);return Ga[a]},set(b){H.log.warn(`using Vhs.${a} is UNSAFE be sure you know what you are doing`);"number"!==typeof b||0>b?H.log.warn(`value of Vhs.${a} must be greater than or equal to 0`):Ga[a]=b}})});const Ul=function(a,b){b=b.media();let c=-1;for(let e=0;e<a.length;e++)if(a[e].id===b.id){c=e;break}a.selectedIndex_=c;a.trigger({selectedIndex:c,
type:"change"})},pr=function(a,b){b.representations().forEach(c=>{a.addQualityLevel(c)});Ul(a,b.playlists)};ua.canPlaySource=function(){return H.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const qr=(a,b)=>a.reduce((c,e)=>{if(!e.contentProtection)return c;const g=b.reduce((m,p)=>{const u=e.contentProtection[p];u&&u.pssh&&(m[p]={pssh:u.pssh});return m},{});Object.keys(g).length&&c.push(g);return c},[]),rr=({player:a,sourceKeySystems:b,audioMedia:c,mainPlaylists:e})=>
{if(!a.eme.initializeMediaKeys)return Promise.resolve();c=c?e.concat([c]):e;const g=[],m=[];qr(c,Object.keys(b)).forEach(p=>{m.push(new Promise((u,x)=>{a.tech_.one("keysessioncreated",u)}));g.push(new Promise((u,x)=>{a.eme.initializeMediaKeys({keySystems:p},y=>{y?x(y):u()})}))});return Promise.race([Promise.all(g),Promise.race(m)])},sr=({player:a,sourceKeySystems:b,media:c,audioMedia:e})=>{if(b){var g={};c&&c.attributes&&c.attributes.CODECS&&(g=Te(yb(c.attributes.CODECS)));e&&e.attributes&&e.attributes.CODECS&&
(g.audio=e.attributes.CODECS);e=id(g.video);g=id(g.audio);var m={};for(const p in b)m[p]={},g&&(m[p].audioContentType=g),e&&(m[p].videoContentType=e),c.contentProtection&&c.contentProtection[p]&&c.contentProtection[p].pssh&&(m[p].pssh=c.contentProtection[p].pssh),"string"===typeof b[p]&&(m[p].url=b[p]);b=ka(b,m)}return b?(a.currentSource().keySystems=b)&&!a.eme?(H.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0:!1},Vl=()=>{if(!D.localStorage)return null;const a=D.localStorage.getItem("videojs-vhs");
if(!a)return null;try{return JSON.parse(a)}catch(b){return null}},tr=a=>0===a.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(a.substring(a.indexOf(",")+1)):a;ua.supportsNativeHls=function(){if(!P||!P.createElement)return!1;const a=P.createElement("video");return H.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(b){return/maybe|probably/i.test(a.canPlayType(b))}):
!1}();var ur=P&&P.createElement&&H.getTech("Html5").isSupported()?/maybe|probably/i.test(P.createElement("video").canPlayType("application/dash+xml")):!1;ua.supportsNativeDash=ur;ua.supportsTypeNatively=a=>"hls"===a?ua.supportsNativeHls:"dash"===a?ua.supportsNativeDash:!1;ua.isSupported=function(){return H.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};ua.xhr.onRequest=function(a){var b=ua.xhr;b._requestCallbackSet||(b._requestCallbackSet=new Set);b._requestCallbackSet.add(a)};
ua.xhr.onResponse=function(a){var b=ua.xhr;b._responseCallbackSet||(b._responseCallbackSet=new Set);b._responseCallbackSet.add(a)};ua.xhr.offRequest=function(a){var b=ua.xhr;b._requestCallbackSet&&(b._requestCallbackSet.delete(a),b._requestCallbackSet.size||delete b._requestCallbackSet)};ua.xhr.offResponse=function(a){var b=ua.xhr;b._responseCallbackSet&&(b._responseCallbackSet.delete(a),b._responseCallbackSet.size||delete b._responseCallbackSet)};const vr=H.getComponent("Component");class Wl extends vr{constructor(a,
b,c){super(b,c.vhs);"number"===typeof c.initialBandwidth&&(this.options_.bandwidth=c.initialBandwidth);this.logger_=ob("VhsHandler");b.options_&&b.options_.playerId&&(this.player_=H.getPlayer(b.options_.playerId));this.tech_=b;this.source_=a;this.stats={};this.ignoreNextSeekingEvent_=!1;this.setOptions_();if(this.options_.overrideNative&&b.overrideNativeAudioTracks&&b.overrideNativeVideoTracks)b.overrideNativeAudioTracks(!0),b.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(b.featuresNativeVideoTracks||
b.featuresNativeAudioTracks))throw Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(P,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],e=>{(e=P.fullscreenElement||P.webkitFullscreenElement||P.mozFullScreenElement||P.msFullscreenElement)&&e.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()});this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?
this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()});this.on(this.tech_,"play",this.play)}setOptions_(){this.options_.withCredentials=this.options_.withCredentials||!1;this.options_.limitRenditionByPlayerDimensions=!1===this.options_.limitRenditionByPlayerDimensions?!1:!0;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1;this.options_.useBandwidthFromLocalStorage=
"undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1;this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1;this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1;this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||
[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1;this.options_.llhls=!1===this.options_.llhls?!1:!0;this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1;"number"!==typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60);if("number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const a=Vl();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}));
a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=Ga.INITIAL_BANDWIDTH);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ga.INITIAL_BANDWIDTH;"withCredentials useDevicePixelRatio limitRenditionByPlayerDimensions bandwidth customTagParsers customTagMappers cacheEncryptionKeys playlistSelector initialPlaylistSelector bufferBasedABR liveRangeSafeTimeDelta llhls useForcedSubtitles useNetworkInformationApi useDtsForTimestampOffset exactManifestTimings leastPixelDiffSelector".split(" ").forEach(a=>
{"undefined"!==typeof this.source_[a]&&(this.options_[a]=this.source_[a])});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(a,b){a&&(this.setOptions_(),this.options_.src=tr(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ua,this.options_.sourceType=Ii(b),this.options_.seekTo=c=>{this.tech_.setCurrentTime(c)},this.playlistController_=new ir(this.options_),a=ka({liveRangeSafeTimeDelta:Cb},
this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_}),this.playbackWatcher_=new mr(a),this.playlistController_.on("error",()=>{const c=H.players[this.tech_.options_.playerId];let e=this.playlistController_.error;"object"!==typeof e||e.code?"string"===typeof e&&(e={message:e,code:3}):e.code=3;c.error(e)}),a=this.options_.bufferBasedABR?ua.movingAverageBandwidthSelector(.55):ua.STANDARD_PLAYLIST_SELECTOR,this.playlistController_.selectPlaylist=
this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.playlistController_.selectInitialPlaylist=ua.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(c){this.playlistController_.selectPlaylist=c.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},
set(c){this.playlistController_.mainSegmentLoader_.throughput.rate=c;this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let c=this.playlistController_.mainSegmentLoader_.bandwidth;var e=D.navigator.connection||D.navigator.mozConnection||D.navigator.webkitConnection;this.options_.useNetworkInformationApi&&e&&(e=1E6*e.downlink,c=1E7<=e&&1E7<=c?Math.max(c,e):e);return c},set(c){this.playlistController_.mainSegmentLoader_.bandwidth=c;this.playlistController_.mainSegmentLoader_.throughput=
{rate:0,count:0}}},systemBandwidth:{get(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set(){H.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},
mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>
this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||
0,enumerable:!0},buffered:{get:()=>kc(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>kc(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>
Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{if(this.options_.useBandwidthFromLocalStorage){var c={bandwidth:this.bandwidth,throughput:Math.round(this.throughput)};if(D.localStorage){var e=Vl();e=e?ka(e,c):c;try{D.localStorage.setItem("videojs-vhs",JSON.stringify(e))}catch(g){}}}}),this.playlistController_.on("selectedinitialmedia",
()=>{lr(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=D.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))}createKeySessions_(){const a=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;
this.logger_("waiting for EME key session creation");rr({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session");this.playlistController_.sourceUpdater_.initializedEme()}).catch(b=>{this.logger_("error while creating EME key session",b);this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions");
this.createKeySessions_()}setupEme_(){var a=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;a=sr({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});this.player_.tech_.on("keystatuschange",b=>{if("output-restricted"===b.status&&(b=this.playlistController_.main())&&b.playlists){var c=[];b.playlists.forEach(e=>{e&&e.attributes&&e.attributes.RESOLUTION&&720<=e.attributes.RESOLUTION.height&&(!e.excludeUntil||Infinity>e.excludeUntil)&&
(e.excludeUntil=Infinity,c.push(e))});c.length&&(H.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...c),this.playlistController_.mainSegmentLoader_.resetEverything(),this.playlistController_.fastQualityChange_())}});this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this);this.player_.tech_.on("waitingforkey",
this.handleWaitingForKey_);a?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const a=H.players[this.tech_.options_.playerId];a&&a.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=a.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{pr(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Ul(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.5.3","mux.js":"7.0.0",
"mpd-parser":"1.1.1","m3u8-parser":"7.1.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return Nl.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(a){this.playlistController_.setCurrentTime(a)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.playlistController_&&this.playlistController_.dispose();this.qualityLevels_&&
this.qualityLevels_.dispose();this.tech_&&this.tech_.vhs&&delete this.tech_.vhs;this.mediaSourceUrl_&&D.URL.revokeObjectURL&&(D.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null);this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_);super.dispose()}convertToProgramTime(a,b){return Ap({playlist:this.playlistController_.media(),time:a,callback:b})}seekToProgramTime(a,b,c=!0,e=2){return Ok({programTime:a,playlist:this.playlistController_.media(),retryCount:e,pauseAfterSeek:c,
seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})}setupXhrHooks_(){this.xhr.onRequest=a=>{var b=this.xhr;b._requestCallbackSet||(b._requestCallbackSet=new Set);b._requestCallbackSet.add(a)};this.xhr.onResponse=a=>{var b=this.xhr;b._responseCallbackSet||(b._responseCallbackSet=new Set);b._responseCallbackSet.add(a)};this.xhr.offRequest=a=>{var b=this.xhr;b._requestCallbackSet&&(b._requestCallbackSet.delete(a),b._requestCallbackSet.size||delete b._requestCallbackSet)};this.xhr.offResponse=
a=>{var b=this.xhr;b._responseCallbackSet&&(b._responseCallbackSet.delete(a),b._responseCallbackSet.size||delete b._responseCallbackSet)};this.player_.trigger("xhr-hooks-ready")}}const Ze={name:"videojs-http-streaming",VERSION:"3.5.3",canHandleSource(a,b={}){b=ka(H.options,b);return Ze.canPlayType(a.type,b)},handleSource(a,b,c={}){c=ka(H.options,c);b.vhs=new Wl(a,b,c);b.vhs.xhr=Lk();b.vhs.setupXhrHooks_();b.vhs.src(a.src,a.type);return b.vhs},canPlayType(a,b){a=Ii(a);if(!a)return"";b=Ze.getOverrideNative(b);
return!ua.supportsTypeNatively(a)||b?"maybe":""},getOverrideNative(a={}){({vhs:a={}}=a);const b=!(H.browser.IS_ANY_SAFARI||H.browser.IS_IOS);({overrideNative:a=b}=a);return a}};fe("avc1.4d400d,mp4a.40.2")&&H.getTech("Html5").registerSourceHandler(Ze,0);H.VhsHandler=Wl;H.VhsSourceHandler=Ze;H.Vhs=ua;H.use||H.registerComponent("Vhs",ua);H.options.vhs=H.options.vhs||{};H.getPlugin&&H.getPlugin("reloadSourceOnError")||H.registerPlugin("reloadSourceOnError",or);let wa=class extends Xl{constructor(){super();
this._defaultConfigs={autoplay:!1,fluid:!1,fullscreen:!1,loop:!1,muted:!1,preload:"auto",responsive:!1,startTime:0};this._prevPlayingState=!1;this.sensorModel=this.element=this.currentMetadata=null;this.state="not-ready";this.waitingTimestamp=null;this._initController=()=>{!this._controller&&this.playerUrl&&(this.element=document.createElement("video"),this._controller=H(this.element,this._defaultConfigs),this._controller.muted(this.muted),this._controller.loop(this.loop),this._controller.playbackRate(this.rate),
this.addHandles([this._controller.ready(this._handleReady),this._controller.on("canplay",this._handleCanPlay),this._controller.on("durationchange",this._handleDurationChange),this._controller.on("ended",this._handleEnded),this._controller.on("error",this._handleError),this._controller.on("loadeddata",this._handleDataLoaded),this._controller.on("loadedmetadata",this._handleLoadedMetadata),this._controller.on("loadstart",this._handleLoadStart),this._controller.on("play",this._handlePlay),this._controller.on("timeupdate",
this._handleTimeUpdate),this._controller.on("waiting",this._handleWaiting)]))};this._handleReady=()=>{this.state="ready"};this._handleCanPlay=()=>{this._prevPlayingState="playing"===this.state;this.state="can-play"};this._handleCueChange=()=>{if(this.subtitleTrack?.activeCues?.length){var a=this.subtitleTrack?.activeCues[0];a=a.text?JSON.parse(a.text):null;if(a?.data?.length){a=a.data[0]?.value??[];var b=new Map;for(const c of a)Array.isArray(c.value)?c.value.forEach(e=>{b.set(e.tagId,e)}):b.set(c.tagId,
c);b.set(Id.VideoMetadataEntryId.EsriVideoWidth,{name:"Video Width",tagId:Id.VideoMetadataEntryId.EsriVideoWidth,value:this._controller.videoWidth()});b.set(Id.VideoMetadataEntryId.EsriVideoHeight,{name:"Video Height",tagId:Id.VideoMetadataEntryId.EsriVideoHeight,value:this._controller.videoHeight()});this.currentMetadata=new Map(b);this.sensorModel=new am({videoMetadata:this.currentMetadata})}}};this._handleDataLoaded=()=>{this.state="data-loaded";this._set("videoWidth",this._controller.videoWidth());
this._set("videoHeight",this._controller.videoHeight())};this._handleDurationChange=()=>this.notifyChange("duration");this._handleEnded=()=>{this.loop?(this.setCurrentTime(0),this.play()):(this._set("ended",!0),this.notifyChange("buffered"),this.notifyChange("currentTime"),this.notifyChange("duration"),this.notifyChange("waiting"),this.state="can-play")};this._handleError=()=>{Yl.getLogger(this).error("video stream error ::",this._controller?.error())};this._handleLoadStart=()=>{this.state="can-play"};
this._handleLoadedMetadata=()=>{this.notifyChange("subtitleTrack");this.notifyChange("buffered")};this._handlePlay=()=>this.notifyChange("ended");this._handleTimeUpdate=()=>{this.notifyChange("currentTime");this.notifyChange("buffered");this.notifyChange("bufferedPercent");this._set("videoWidth",this._controller.videoWidth());this._set("videoHeight",this._controller.videoHeight())};this._handleWaiting=()=>{this.waitingTimestamp=this._controller?.currentTime()}}initialize(){this.addHandles([Hd.watch(()=>
this.playerUrl,a=>{a&&(this._initController(),this._controller.src({type:"application/x-mpegURL",src:this.playerUrl}))},Hd.initial),Hd.watch(()=>this.subtitleTrack,()=>{this.subtitleTrack&&(this.subtitleTrack.mode="showing")})]);this.addHandles(Hd.on(()=>this.subtitleTrack,"cuechange",this._handleCueChange))}destroy(){this._controller&&this._controller.dispose()}get buffered(){return this._controller?.bufferedEnd()??0}get bufferedPercent(){return this._controller?.bufferedPercent()??0}get currentTime(){return this._controller?.currentTime()??
0}get duration(){return this._controller?.duration()??0}get ended(){return this._controller?.ended()??this._get("ended")??!0}set ended(a){this._controller?.ended(a);this._set("ended",a)}get loop(){return this._controller?.loop()??this._get("loop")??!1}set loop(a){this._controller?.loop(a);this._set("loop",a)}get muted(){return this._controller?.muted()??this._get("muted")??!1}set muted(a){this._controller?.muted(a);this._set("muted",a)}get playerUrl(){return this._controller?.src()}set playerUrl(a){this._set("playerUrl",
a)}get playing(){return this.ended?!1:"can-play"===this.state?this._prevPlayingState:"playing"===this.state}get rate(){return this._controller?.playbackRate()??this._get("rate")??1}set rate(a){this._controller?.playbackRate(a);this._set("rate",a)}get started(){return this._controller?.hasStarted()}get subtitleTrack(){const a=this._controller?.textTracks();return a?.length?Array.from(a).find(b=>"subtitles"===b.kind):null}get waiting(){return this.waitingTimestamp?!1:this.waitingTimestamp!==this.currentTime?
(this.waitingTimestamp=null,!1):!0}pause(){this._controller?.pause();this.state="paused"}play(){this._controller?.play();this.state="playing"}reset(){this._controller&&(this.pause(),this.setCurrentTime(0),this._set("ended",!0))}setCurrentTime(a){a=Zl.clamp(a,0,this.duration);this._controller?.currentTime(a);this.notifyChange("currentTime")}};xa.__decorate([za.property()],wa.prototype,"buffered",null);xa.__decorate([za.property()],wa.prototype,"bufferedPercent",null);xa.__decorate([za.property({readOnly:!0})],
wa.prototype,"currentTime",null);xa.__decorate([za.property()],wa.prototype,"currentMetadata",void 0);xa.__decorate([za.property({readOnly:!0})],wa.prototype,"duration",null);xa.__decorate([za.property()],wa.prototype,"element",void 0);xa.__decorate([za.property({readOnly:!0})],wa.prototype,"ended",null);xa.__decorate([za.property()],wa.prototype,"loop",null);xa.__decorate([za.property()],wa.prototype,"muted",null);xa.__decorate([za.property()],wa.prototype,"playerUrl",null);xa.__decorate([za.property({readOnly:!0})],
wa.prototype,"playing",null);xa.__decorate([za.property()],wa.prototype,"rate",null);xa.__decorate([za.property()],wa.prototype,"sensorModel",void 0);xa.__decorate([za.property({readOnly:!0})],wa.prototype,"started",null);xa.__decorate([za.property()],wa.prototype,"state",void 0);xa.__decorate([za.property()],wa.prototype,"subtitleTrack",null);xa.__decorate([za.property({readOnly:!0})],wa.prototype,"videoHeight",void 0);xa.__decorate([za.property({readOnly:!0})],wa.prototype,"videoWidth",void 0);
xa.__decorate([za.property({readOnly:!0})],wa.prototype,"waiting",null);xa.__decorate([za.property()],wa.prototype,"waitingTimestamp",void 0);return wa=xa.__decorate([$l.subclass("esri.layers.video.VideoController")],wa)});