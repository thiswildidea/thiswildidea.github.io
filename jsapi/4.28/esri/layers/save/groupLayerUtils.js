// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define(["exports","./utils","../../portal/support/jsonContext","../../portal/support/portalItemUtils","../../webdoc/support/saveUtils"],function(e,h,k,f,l){function m(a){return{isValid:"group"===a.type,errorMessage:"Layer.type should be 'group'"}}function p(a){return{isValid:f.hasTypeKeyword(a,g),errorMessage:`Layer.portalItem.typeKeywords should have '${g}'`}}function n(a){a=a.layerJSON;return Promise.resolve(a&&Object.keys(a).length?a:null)}async function q(a,b){b.title||(b.title=a.title);f.addTypeKeyword(b,
g)}const g=f.TypeKeyword.GROUP_LAYER_MAP;e.save=async function(a,b){return h.save({layer:a,itemType:"Group Layer",validateLayer:m,validateItem:p,createJSONContext:c=>k.createForGroupLayerItemWrite(c,a),createItemData:n,errorNamePrefix:"group-layer-save",saveResources:async(c,d)=>{a.sourceIsPortalItem||await c.removeAllResources().catch(()=>{});return l.saveResources(a.resourceReferences,d)}},b)};e.saveAs=async function(a,b,c){return h.saveAs({layer:a,itemType:"Group Layer",validateLayer:m,createJSONContext:d=>
k.createForGroupLayerItemWrite(d,a),createItemData:n,errorNamePrefix:"group-layer-save-as",newItem:b,setItemProperties:q,saveResources:(d,r)=>l.saveResources(a.resourceReferences,r)},c)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});