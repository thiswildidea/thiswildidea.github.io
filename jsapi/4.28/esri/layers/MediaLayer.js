// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/ImageElement":function(){define("../../chunks/tslib.es6 ../../request ../../core/Error ../../core/imageUtils ../../core/urlUtils ../../core/uuid ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./MediaElementBase ../../portal/support/resourceExtension ../../chunks/persistableUrlUtils".split(" "),
function(f,E,V,S,A,B,P,p,L,Q,H,w,z,J,x,C){async function y(t){return"string"===typeof t?A.isDataProtocol(t)?A.dataToBlob(t):(await E(t,{responseType:"blob"})).data:new Promise(d=>{if(t instanceof HTMLCanvasElement)var h=t;else{h=t instanceof HTMLImageElement?t.naturalWidth:t.width;var q=t instanceof HTMLImageElement?t.naturalHeight:t.height,u=document.createElement("canvas"),c=u.getContext("2d");u.width=h;u.height=q;t instanceof HTMLImageElement?c.drawImage(t,0,0,t.width,t.height):t instanceof ImageData&&
c.putImageData(t,0,0);h=u}return h.toBlob(d)})}function D(t,d){const h=B.generateUUID();t=`${A.join("media",h)}.${x.getResourceContentExtension({type:"blob",blob:t})}`;return d.resourceFromPath(t)}p=class extends J{constructor(t){super(t);this.image=this.content=this.animationOptions=null;this.type="image";this.image=null}load(){const t=this.image;if("string"===typeof t){var d=S.getImageData(t).then(h=>{this._set("content",h)});this.addResolvingPromise(d)}else t instanceof HTMLImageElement?(d=t.decode().then(()=>
{this._set("content",t)}),this.addResolvingPromise(d)):t?this._set("content",t):this.addResolvingPromise(Promise.reject(new V("image-element:invalid-image-type","Invalid image type",{image:t})));return Promise.resolve(this)}get contentWidth(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalWidth:this.content.width}get contentHeight(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalHeight:this.content.height}readImage(t,
d,h){return C.fromJSON(d.url,h)}writeImage(t,d,h,q){if(null!=t){var u=q?.portalItem,c=q?.resources;if(u&&c){var k="string"!==typeof t||A.isDataProtocol(t)||A.isBlobProtocol(t)?null:t;if(k){if(null==C.itemIdFromResourceUrl(k)){d[h]=k;return}q=C.toJSON(k,{...q,verifyItemRelativeUrls:q?.verifyItemRelativeUrls?{writtenUrls:q.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},C.MarkKeep.NO);if(u&&q&&!A.isAbsolute(q)){c.toKeep.push({resource:u.resourceFromPath(q),compress:!1});d[h]=q;return}}d[h]=
"\x3cpending\x3e";c.pendingOperations.push(y(t).then(v=>{const F=D(v,u);d[h]=F.itemRelativeUrl;c.toAdd.push({resource:F,content:{type:"blob",blob:v},compress:!1,finish:r=>{this.image=r.url}})}))}else"string"===typeof t&&(d[h]=C.toJSON(t,q))}}};f.__decorate([P.property()],p.prototype,"animationOptions",void 0);f.__decorate([P.property({readOnly:!0})],p.prototype,"content",void 0);f.__decorate([P.property({readOnly:!0})],p.prototype,"contentWidth",null);f.__decorate([P.property({readOnly:!0})],p.prototype,
"contentHeight",null);f.__decorate([P.property({json:{name:"url",type:String}})],p.prototype,"image",void 0);f.__decorate([H.reader("image",["url"])],p.prototype,"readImage",null);f.__decorate([z.writer("image")],p.prototype,"writeImage",null);f.__decorate([P.property({readOnly:!0,json:{name:"mediaType"}})],p.prototype,"type",void 0);return p=f.__decorate([w.subclass("esri.layers.support.ImageElement")],p)})},"esri/core/imageUtils":function(){define("require exports ../request ./Error ./promiseUtils ./urlUtils ../support/base64Utils".split(" "),
function(f,E,V,S,A,B,P){function p(z,J,x){x||(H||(H=document.createElement("canvas"),H.width=1,H.height=1),x=H);return x.getContext("2d").createImageData(z,J)}async function L(z,J){z=window.URL.createObjectURL(z);try{const {data:x}=await V(z,{...J,responseType:"image"});return x}catch(x){if(!A.isAbortError(x))throw new S("invalid-image",`Could not fetch requested image at ${z}`);throw x;}finally{window.URL.revokeObjectURL(z)}}async function Q(z,J){const x=B.dataComponents(z);if(x?.isBase64)return{arrayBuffer:P.base64ToArrayBuffer(x.data),
mediaType:x.mediaType};J=await V(z,{responseType:"array-buffer",...J});z=J.data;J=J.getHeader("Content-Type");return{arrayBuffer:z,mediaType:J}}let H=null,w=!0;E.createEmptyImageData=function(z,J,x){if(!z||!J)throw Error("Cannot construct image data without dimensions");if(w)try{return new ImageData(z,J)}catch(C){w=!1}return p(z,J,x)};E.getImageData=async function(z,J){const {arrayBuffer:x,mediaType:C}=await Q(z,J);z="image/png"===C;if("image/gif"===C){const {isAnimatedGIF:y,parseGif:D}=await new Promise((t,
d)=>f(["./image/gif"],t,d));if(y(x))return D(x,J)}if(z){const {isAnimatedPNG:y,parseApng:D}=await new Promise((t,d)=>f(["./image/apng"],t,d));if(y(x))return D(x,J)}z=new Blob([x],{type:C});return L(z,J)};E.wrapImageData=function(z,J,x,C){if(!J||!x)throw Error("Cannot construct image data without dimensions");if(w)try{return new ImageData(z,J,x)}catch(y){w=!1}J=p(J,x,C);J.data.set(z,0);return J};Object.defineProperty(E,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/MediaElementBase":function(){define("../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/Loadable ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./ControlPointsGeoreference ./CornersGeoreference ./ExtentAndRotationGeoreference ./GeoreferenceBase".split(" "),
function(f,E,V,S,A,B,P,p,L,Q,H,w,z,J){B={key:"type",base:J,typeMap:{"control-points":H,corners:w,"extent-and-rotation":z}};E=class extends E.NumericIdentifiableMixin(V.JSONSupportMixin(S)){constructor(x){super(x);this.georeference=null;this.opacity=1}readGeoreference(x){return H.fromJSON(x)}get contentWidth(){return 0}get contentHeight(){return 0}toSource(x){const {georeference:C,contentWidth:y,contentHeight:D}=this;if(null==x||null==C||0===y||0===D)return null;x=C.toSourceNormalized(x);if(null==
x)return null;x.x*=y;x.y*=D;return x}};f.__decorate([A.property({types:B,json:{write:!0}})],E.prototype,"georeference",void 0);f.__decorate([L.reader("georeference")],E.prototype,"readGeoreference",null);f.__decorate([A.property()],E.prototype,"opacity",void 0);return E=f.__decorate([Q.subclass("esri.layers.support.MediaElementBase")],E)})},"esri/layers/support/ControlPointsGeoreference":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/perspectiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../chunks/mat3 ../../chunks/mat3f64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Point ../../geometry/Polygon ../../geometry/projection ../../geometry/SpatialReference ./GeoreferenceBase".split(" "),
function(f,E,V,S,A,B,P,p,L,Q,H,w,z,J,x,C,y,D,t,d,h,q,u){function c(n){return null!=n?.sourcePoint&&null!=n.mapPoint}function k(n,N,T){y.set(n,T.sourcePoint.x,T.sourcePoint.y);y.set(N,T.mapPoint.x,T.mapPoint.y)}function v(n,N,T){k(W,m,N);k(Y,G,T);y.rotate(a,Y,W,l);y.rotate(b,W,Y,l);y.rotate(e,G,m,-l);y.rotate(g,m,G,-l);N=m;T=G;var X=e,I=g;return B.getProjectiveTransform(n,M(K,W,Y,a,b),M(U,N,T,X,I))}function F(n,N,T,X){k(W,m,N);k(Y,G,T);k(a,e,X);y.lerp(b,W,Y,.5);y.rotate(b,a,b,Math.PI);y.lerp(g,m,G,
.5);y.rotate(g,e,g,Math.PI);N=m;T=G;X=e;var I=g;return B.getProjectiveTransform(n,M(K,W,Y,a,b),M(U,N,T,X,I))}function r(n,N,T,X,I){k(W,m,N);k(Y,G,T);k(a,e,X);k(b,g,I);N=m;T=G;X=e;I=g;return B.getProjectiveTransform(n,M(K,W,Y,a,b),M(U,N,T,X,I))}function M(n,N,T,X,I){n[0]=N[0];n[1]=N[1];n[2]=T[0];n[3]=T[1];n[4]=X[0];n[5]=X[1];n[6]=I[0];n[7]=I[1];return n}const R=C.create(),O=D.create();E=class extends E{constructor(){super(...arguments);this.mapPoint=this.sourcePoint=null}};f.__decorate([p.property()],
E.prototype,"sourcePoint",void 0);f.__decorate([p.property({type:t})],E.prototype,"mapPoint",void 0);E=f.__decorate([z.subclass("esri.layers.support.ControlPoint")],E);S=class extends S.JSONSupportMixin(u){constructor(n){super(n);this.controlPoints=null;this.height=0;this.type="control-points";this.width=0}readControlPoints(n,N){const T=q.fromJSON(N.spatialReference),X=C.fromValues(...N.coefficients,1);return n.map(I=>{y.set(O,I.x,I.y);B.transformProjective(O,O,X);return{sourcePoint:I,mapPoint:new t({x:O[0],
y:O[1],spatialReference:T})}})}writeControlPoints(n,N,T,X){null==this.transform?(n=new V("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration.",{layer:X?.layer,georeference:this}),X?.messages?X.messages.push(n):A.getLogger(this).error(n.name,n.message)):null!=n&&c(n[0])&&(N.controlPoints=n.map(I=>{I=I.sourcePoint;return{x:I.x,y:I.y}}),N.spatialReference=n[0].mapPoint.spatialReference.toJSON(),N.coefficients=this.transform.slice(0,8))}get coords(){if(null==
this.controlPoints)return null;const n=this._updateTransform(R);if(null==n||!c(this.controlPoints[0]))return null;var N=this.width,T=this.height,X=this.controlPoints[0].mapPoint.spatialReference;const I=D.fromValues(0,T),aa=D.fromValues(0,0),ba=D.fromValues(N,0);N=D.fromValues(N,T);B.transformProjective(I,I,n);B.transformProjective(aa,aa,n);B.transformProjective(ba,ba,n);B.transformProjective(N,N,n);return new d({rings:[[I,aa,ba,N,I]],spatialReference:X})}set coords(n){if(null!=this.controlPoints&&
c(this.controlPoints[0])){var N=this.controlPoints[0].mapPoint.spatialReference;n=this.projectOrWarn(n,N);if(null!=n){var {width:T,height:X}=this,{rings:[[I,aa,ba,da]]}=n;n={sourcePoint:P.createScreenPoint(0,X),mapPoint:new t({x:I[0],y:I[1],spatialReference:N})};var ca={sourcePoint:P.createScreenPoint(0,0),mapPoint:new t({x:aa[0],y:aa[1],spatialReference:N})},Z={sourcePoint:P.createScreenPoint(T,0),mapPoint:new t({x:ba[0],y:ba[1],spatialReference:N})},ea={sourcePoint:P.createScreenPoint(T,X),mapPoint:new t({x:da[0],
y:da[1],spatialReference:N})};c(n)&&c(ca)&&c(Z)&&c(ea)&&(r(R,n,ca,Z,ea),this.controlPoints=this.controlPoints.map(({sourcePoint:fa})=>{y.set(O,fa.x,fa.y);B.transformProjective(O,O,R);return{sourcePoint:fa,mapPoint:new t({x:O[0],y:O[1],spatialReference:N})}}))}}}get inverseTransform(){return null==this.transform?null:x.invert(C.create(),this.transform)}get transform(){return this._updateTransform()}toMap(n){if(null==n||null==this.transform||null==this.controlPoints||!c(this.controlPoints[0]))return null;
y.set(O,n.x,n.y);n=this.controlPoints[0].mapPoint.spatialReference;B.transformProjective(O,O,this.transform);return new t({x:O[0],y:O[1],spatialReference:n})}toSource(n){if(null==n||null==this.inverseTransform||null==this.controlPoints||!c(this.controlPoints[0]))return null;const N=this.controlPoints[0].mapPoint.spatialReference;n=n.normalize();n=h.projectOrLoad(n,N).geometry;if(null==n)return null;y.set(O,n.x,n.y);B.transformProjective(O,O,this.inverseTransform);return P.createScreenPoint(O[0],O[1])}toSourceNormalized(n){n=
this.toSource(n);null!=n&&(n.x/=this.width,n.y/=this.height);return n}_updateTransform(n){const {controlPoints:N,width:T,height:X}=this;if(!(null!=N&&0<T&&0<X))return null;const [I,aa,ba,da]=N;if(!c(I))return null;var ca=I.mapPoint.spatialReference;const Z=this._projectControlPoint(aa,ca),ea=this._projectControlPoint(ba,ca);ca=this._projectControlPoint(da,ca);if(!(Z.valid&&ea.valid&&ca.valid&&c(Z.controlPoint)))return null;null==n&&(n=C.create());let fa=null;fa=c(ea.controlPoint)&&c(ca.controlPoint)?
r(n,I,Z.controlPoint,ea.controlPoint,ca.controlPoint):c(ea.controlPoint)?F(n,I,Z.controlPoint,ea.controlPoint):v(n,I,Z.controlPoint);return fa.every(ha=>0===ha)?null:fa}_projectControlPoint(n,N){if(!c(n))return{valid:!0,controlPoint:n};const {sourcePoint:T,mapPoint:X}=n,{geometry:I,pending:aa}=h.projectOrLoad(X,N);return aa?{valid:!1,controlPoint:null}:aa||I?{valid:!0,controlPoint:{sourcePoint:T,mapPoint:I}}:(A.getLogger(this).warn("map point could not be projected to the spatial reference",{georeference:this,
controlPoint:n,sourceSpatialReference:X.spatialReference,targetSpatialReference:N}),{valid:!1,controlPoint:null})}};f.__decorate([p.property({type:[E],json:{write:{allowNull:!1,isRequired:!0}}})],S.prototype,"controlPoints",void 0);f.__decorate([w.reader("controlPoints")],S.prototype,"readControlPoints",null);f.__decorate([J.writer("controlPoints")],S.prototype,"writeControlPoints",null);f.__decorate([p.property()],S.prototype,"coords",null);f.__decorate([p.property({json:{write:!0}})],S.prototype,
"height",void 0);f.__decorate([p.property({readOnly:!0})],S.prototype,"inverseTransform",null);f.__decorate([p.property({readOnly:!0})],S.prototype,"transform",null);f.__decorate([p.property({json:{write:!0}})],S.prototype,"width",void 0);S=f.__decorate([z.subclass("esri.layers.support.ControlPointsGeoreference")],S);const W=D.create(),Y=D.create(),a=D.create(),b=D.create(),m=D.create(),G=D.create(),e=D.create(),g=D.create(),l=Math.PI/2,K=Array(8).fill(0),U=Array(8).fill(0);return S})},"esri/core/perspectiveUtils":function(){define("exports ../chunks/mat3 ../chunks/mat3f64 ../chunks/vec2 ../chunks/vec3 ../chunks/vec3f64".split(" "),
function(f,E,V,S,A,B){function P(w,z,J,x,C,y,D,t,d){E.set(w,z,x,y,J,C,D,1,1,1);A.set(p,t,d,1);E.adjoint(L,w);const [h,q,u]=A.transformMat3(p,p,E.transpose(L,L));E.set(L,h,0,0,0,q,0,0,0,u);return E.multiply(w,L,w)}const p=B.create(),L=V.create(),Q=V.create(),H=V.create();f.getProjectiveTransform=function(w,z,J){P(Q,z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7]);P(H,J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7]);E.multiply(w,E.adjoint(Q,Q),H);0!==w[8]&&(w[0]/=w[8],w[1]/=w[8],w[2]/=w[8],w[3]/=w[8],w[4]/=w[8],w[5]/=
w[8],w[6]/=w[8],w[7]/=w[8],w[8]/=w[8]);return w};f.transformProjective=function(w,z,J){A.set(p,z[0],z[1],1);A.transformMat3(p,p,E.transpose(L,J));return 0===p[2]?S.set(w,p[0],p[1]):S.set(w,p[0]/p[2],p[1]/p[2])};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(f,E){function V(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a}function S(a,b){a[0]=b[0];a[1]=b[1];
a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}function A(a,b,m,G,e,g,l,K,U,n){a[0]=b;a[1]=m;a[2]=G;a[3]=e;a[4]=g;a[5]=l;a[6]=K;a[7]=U;a[8]=n;return a}function B(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function P(a,b){if(a===b){const m=b[1],G=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=m;a[5]=b[7];a[6]=G;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a}function p(a,b){const m=
b[0],G=b[1],e=b[2],g=b[3],l=b[4],K=b[5],U=b[6],n=b[7];b=b[8];const N=b*l-K*n,T=-b*g+K*U,X=n*g-l*U;let I=m*N+G*T+e*X;if(!I)return null;I=1/I;a[0]=N*I;a[1]=(-b*G+e*n)*I;a[2]=(K*G-e*l)*I;a[3]=T*I;a[4]=(b*m-e*U)*I;a[5]=(-K*m+e*g)*I;a[6]=X*I;a[7]=(-n*m+G*U)*I;a[8]=(l*m-G*g)*I;return a}function L(a,b){const m=b[0],G=b[1],e=b[2],g=b[3],l=b[4],K=b[5],U=b[6],n=b[7];b=b[8];a[0]=l*b-K*n;a[1]=e*n-G*b;a[2]=G*K-e*l;a[3]=K*U-g*b;a[4]=m*b-e*U;a[5]=e*g-m*K;a[6]=g*n-l*U;a[7]=G*U-m*n;a[8]=m*l-G*g;return a}function Q(a){const b=
a[3],m=a[4],G=a[5],e=a[6],g=a[7],l=a[8];return a[0]*(l*m-G*g)+a[1]*(-l*b+G*e)+a[2]*(g*b-m*e)}function H(a,b,m){const G=b[0],e=b[1],g=b[2],l=b[3],K=b[4],U=b[5],n=b[6],N=b[7];b=b[8];const T=m[0],X=m[1],I=m[2],aa=m[3],ba=m[4],da=m[5],ca=m[6],Z=m[7];m=m[8];a[0]=T*G+X*l+I*n;a[1]=T*e+X*K+I*N;a[2]=T*g+X*U+I*b;a[3]=aa*G+ba*l+da*n;a[4]=aa*e+ba*K+da*N;a[5]=aa*g+ba*U+da*b;a[6]=ca*G+Z*l+m*n;a[7]=ca*e+Z*K+m*N;a[8]=ca*g+Z*U+m*b;return a}function w(a,b,m){const G=b[0],e=b[1],g=b[2],l=b[3],K=b[4],U=b[5],n=b[6],N=
b[7];b=b[8];const T=m[0];m=m[1];a[0]=G;a[1]=e;a[2]=g;a[3]=l;a[4]=K;a[5]=U;a[6]=T*G+m*l+n;a[7]=T*e+m*K+N;a[8]=T*g+m*U+b;return a}function z(a,b,m){const G=b[0],e=b[1],g=b[2],l=b[3],K=b[4],U=b[5],n=b[6],N=b[7];b=b[8];const T=Math.sin(m);m=Math.cos(m);a[0]=m*G+T*l;a[1]=m*e+T*K;a[2]=m*g+T*U;a[3]=m*l-T*G;a[4]=m*K-T*e;a[5]=m*U-T*g;a[6]=n;a[7]=N;a[8]=b;return a}function J(a,b,m){const G=m[0],e=m[1];m=m[2];a[0]=G*b[0];a[1]=G*b[1];a[2]=G*b[2];a[3]=e*b[3];a[4]=e*b[4];a[5]=e*b[5];a[6]=m*b[6];a[7]=m*b[7];a[8]=
m*b[8];return a}function x(a,b,m){const G=m[0];m=m[1];a[0]=G*b[0];a[1]=G*b[1];a[2]=G*b[2];a[3]=m*b[3];a[4]=m*b[4];a[5]=m*b[5];return a}function C(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a}function y(a,b){const m=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=m;a[2]=0;a[3]=-m;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function D(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function t(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=
b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a}function d(a,b){var m=b[0],G=b[1],e=b[2];b=b[3];var g=m+m,l=G+G;const K=e+e;m*=g;const U=G*g;G*=l;const n=e*g,N=e*l;e*=K;g*=b;l*=b;b*=K;a[0]=1-G-e;a[3]=U-b;a[6]=n+l;a[1]=U+b;a[4]=1-m-e;a[7]=N-g;a[2]=n-l;a[5]=N+g;a[8]=1-m-G;return a}function h(a,b){const m=b[0],G=b[1],e=b[2],g=b[4],l=b[5],K=b[6],U=b[8],n=b[9];b=b[10];const N=b*l-K*n,T=-b*g+K*U,X=n*g-l*U;var I=m*N+G*T+e*X;if(!I)return null;I=1/I;a[0]=N*I;a[1]=(-b*G+e*n)*I;a[2]=(K*G-e*l)*I;a[3]=T*I;a[4]=
(b*m-e*U)*I;a[5]=(-K*m+e*g)*I;a[6]=X*I;a[7]=(-n*m+G*U)*I;a[8]=(l*m-G*g)*I;return a}function q(a,b){const m=b[0],G=b[1],e=b[2],g=b[3],l=b[4],K=b[5],U=b[6],n=b[7];var N=b[8],T=b[9],X=b[10],I=b[11];const aa=b[12],ba=b[13],da=b[14];b=b[15];const ca=m*K-G*l,Z=m*U-e*l,ea=m*n-g*l,fa=G*U-e*K,ha=G*n-g*K,ia=e*n-g*U,ja=N*ba-T*aa,ka=N*da-X*aa;N=N*b-I*aa;const la=T*da-X*ba;T=T*b-I*ba;X=X*b-I*da;I=ca*X-Z*T+ea*la+fa*N-ha*ka+ia*ja;if(!I)return null;I=1/I;a[0]=(K*X-U*T+n*la)*I;a[1]=(U*N-l*X-n*ka)*I;a[2]=(l*T-K*N+
n*ja)*I;a[3]=(e*T-G*X-g*la)*I;a[4]=(m*X-e*N+g*ka)*I;a[5]=(G*N-m*T-g*ja)*I;a[6]=(ba*ia-da*ha+b*fa)*I;a[7]=(da*ea-aa*ia-b*Z)*I;a[8]=(aa*ha-ba*ea+b*ca)*I;return a}function u(a,b,m){a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/m;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a}function c(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}function k(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2)}function v(a,b,m){a[0]=b[0]+
m[0];a[1]=b[1]+m[1];a[2]=b[2]+m[2];a[3]=b[3]+m[3];a[4]=b[4]+m[4];a[5]=b[5]+m[5];a[6]=b[6]+m[6];a[7]=b[7]+m[7];a[8]=b[8]+m[8];return a}function F(a,b,m){a[0]=b[0]-m[0];a[1]=b[1]-m[1];a[2]=b[2]-m[2];a[3]=b[3]-m[3];a[4]=b[4]-m[4];a[5]=b[5]-m[5];a[6]=b[6]-m[6];a[7]=b[7]-m[7];a[8]=b[8]-m[8];return a}function r(a,b,m){a[0]=b[0]*m;a[1]=b[1]*m;a[2]=b[2]*m;a[3]=b[3]*m;a[4]=b[4]*m;a[5]=b[5]*m;a[6]=b[6]*m;a[7]=b[7]*m;a[8]=b[8]*m;return a}function M(a,b,m,G){a[0]=b[0]+m[0]*G;a[1]=b[1]+m[1]*G;a[2]=b[2]+m[2]*G;
a[3]=b[3]+m[3]*G;a[4]=b[4]+m[4]*G;a[5]=b[5]+m[5]*G;a[6]=b[6]+m[6]*G;a[7]=b[7]+m[7]*G;a[8]=b[8]+m[8]*G;return a}function R(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]}function O(a,b){const m=a[0],G=a[1],e=a[2],g=a[3],l=a[4],K=a[5],U=a[6],n=a[7];a=a[8];const N=b[0],T=b[1],X=b[2],I=b[3],aa=b[4],ba=b[5],da=b[6],ca=b[7];b=b[8];const Z=E.getEpsilon();return Math.abs(m-N)<=Z*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(G-
T)<=Z*Math.max(1,Math.abs(G),Math.abs(T))&&Math.abs(e-X)<=Z*Math.max(1,Math.abs(e),Math.abs(X))&&Math.abs(g-I)<=Z*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(l-aa)<=Z*Math.max(1,Math.abs(l),Math.abs(aa))&&Math.abs(K-ba)<=Z*Math.max(1,Math.abs(K),Math.abs(ba))&&Math.abs(U-da)<=Z*Math.max(1,Math.abs(U),Math.abs(da))&&Math.abs(n-ca)<=Z*Math.max(1,Math.abs(n),Math.abs(ca))&&Math.abs(a-b)<=Z*Math.max(1,Math.abs(a),Math.abs(b))}function W(a){const b=E.getEpsilon(),m=a[0],G=a[1],e=a[2],g=a[3],l=a[4],K=
a[5],U=a[6],n=a[7];a=a[8];return Math.abs(1-(m*m+g*g+U*U))<=b&&Math.abs(1-(G*G+l*l+n*n))<=b&&Math.abs(1-(e*e+K*K+a*a))<=b}const Y=Object.freeze(Object.defineProperty({__proto__:null,add:v,adjoint:L,copy:S,determinant:Q,equals:O,exactEquals:R,frob:k,fromMat2d:t,fromMat4:V,fromQuat:d,fromRotation:y,fromScaling:D,fromTranslation:C,identity:B,invert:p,isOrthoNormal:W,mul:H,multiply:H,multiplyScalar:r,multiplyScalarAndAdd:M,normalFromMat4:q,normalFromMat4Legacy:h,projection:u,rotate:z,scale:J,scaleByVec2:x,
set:A,str:c,sub:F,subtract:F,translate:w,transpose:P},Symbol.toStringTag,{value:"Module"}));f.add=v;f.adjoint=L;f.copy=S;f.determinant=Q;f.equals=O;f.exactEquals=R;f.frob=k;f.fromMat2d=t;f.fromMat4=V;f.fromQuat=d;f.fromRotation=y;f.fromScaling=D;f.fromTranslation=C;f.identity=B;f.invert=p;f.isOrthoNormal=W;f.mat3=Y;f.mul=H;f.multiply=H;f.multiplyScalar=r;f.multiplyScalarAndAdd=M;f.normalFromMat4=q;f.normalFromMat4Legacy=h;f.projection=u;f.rotate=z;f.scale=J;f.scaleByVec2=x;f.set=A;f.str=c;f.sub=F;
f.subtract=F;f.translate=w;f.transpose=P})},"esri/chunks/mat3f64":function(){define(["exports"],function(f){function E(){return[1,0,0,0,1,0,0,0,1]}function V(P){return[P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],P[8]]}function S(P,p,L,Q,H,w,z,J,x){return[P,p,L,Q,H,w,z,J,x]}function A(P,p){return new Float64Array(P,p,9)}const B=Object.freeze(Object.defineProperty({__proto__:null,clone:V,create:E,createView:A,fromValues:S},Symbol.toStringTag,{value:"Module"}));f.clone=V;f.create=E;f.createView=A;f.fromValues=
S;f.mat3f64=B})},"esri/chunks/vec2":function(){define(["exports","./common"],function(f,E){function V(e,g){e[0]=g[0];e[1]=g[1];return e}function S(e,g,l){e[0]=g;e[1]=l;return e}function A(e,g,l){e[0]=g[0]+l[0];e[1]=g[1]+l[1];return e}function B(e,g,l){e[0]=g[0]-l[0];e[1]=g[1]-l[1];return e}function P(e,g,l){e[0]=g[0]*l[0];e[1]=g[1]*l[1];return e}function p(e,g,l){e[0]=g[0]/l[0];e[1]=g[1]/l[1];return e}function L(e,g){e[0]=Math.ceil(g[0]);e[1]=Math.ceil(g[1]);return e}function Q(e,g){e[0]=Math.floor(g[0]);
e[1]=Math.floor(g[1]);return e}function H(e,g,l){e[0]=Math.min(g[0],l[0]);e[1]=Math.min(g[1],l[1]);return e}function w(e,g,l){e[0]=Math.max(g[0],l[0]);e[1]=Math.max(g[1],l[1]);return e}function z(e,g){e[0]=Math.round(g[0]);e[1]=Math.round(g[1]);return e}function J(e,g,l){e[0]=g[0]*l;e[1]=g[1]*l;return e}function x(e,g,l,K){e[0]=g[0]+l[0]*K;e[1]=g[1]+l[1]*K;return e}function C(e,g){const l=g[0]-e[0];e=g[1]-e[1];return Math.sqrt(l*l+e*e)}function y(e,g){const l=g[0]-e[0];e=g[1]-e[1];return l*l+e*e}
function D(e){const g=e[0];e=e[1];return Math.sqrt(g*g+e*e)}function t(e){const g=e[0];e=e[1];return g*g+e*e}function d(e,g){e[0]=-g[0];e[1]=-g[1];return e}function h(e,g){e[0]=1/g[0];e[1]=1/g[1];return e}function q(e,g){var l=g[0];const K=g[1];l=l*l+K*K;0<l&&(l=1/Math.sqrt(l),e[0]=g[0]*l,e[1]=g[1]*l);return e}function u(e,g){return e[0]*g[0]+e[1]*g[1]}function c(e,g,l){g=g[0]*l[1]-g[1]*l[0];e[0]=e[1]=0;e[2]=g;return e}function k(e,g,l,K){const U=g[0];g=g[1];e[0]=U+K*(l[0]-U);e[1]=g+K*(l[1]-g);return e}
function v(e,g){g=g||1;const l=2*E.RANDOM()*Math.PI;e[0]=Math.cos(l)*g;e[1]=Math.sin(l)*g;return e}function F(e,g,l){const K=g[0];g=g[1];e[0]=l[0]*K+l[2]*g;e[1]=l[1]*K+l[3]*g;return e}function r(e,g,l){const K=g[0];g=g[1];e[0]=l[0]*K+l[2]*g+l[4];e[1]=l[1]*K+l[3]*g+l[5];return e}function M(e,g,l){const K=g[0];g=g[1];e[0]=l[0]*K+l[3]*g+l[6];e[1]=l[1]*K+l[4]*g+l[7];return e}function R(e,g,l){const K=g[0];g=g[1];e[0]=l[0]*K+l[4]*g+l[12];e[1]=l[1]*K+l[5]*g+l[13];return e}function O(e,g,l,K){const U=g[0]-
l[0];g=g[1]-l[1];const n=Math.sin(K);K=Math.cos(K);e[0]=U*K-g*n+l[0];e[1]=U*n+g*K+l[1];return e}function W(e,g){var l=e[0];e=e[1];const K=g[0];g=g[1];let U=l*l+e*e;0<U&&(U=1/Math.sqrt(U));let n=K*K+g*g;0<n&&(n=1/Math.sqrt(n));l=(l*K+e*g)*U*n;return 1<l?0:-1>l?Math.PI:Math.acos(l)}function Y(e){return"vec2("+e[0]+", "+e[1]+")"}function a(e,g){return e[0]===g[0]&&e[1]===g[1]}function b(e,g){const l=e[0];e=e[1];const K=g[0];g=g[1];const U=E.getEpsilon();return Math.abs(l-K)<=U*Math.max(1,Math.abs(l),
Math.abs(K))&&Math.abs(e-g)<=U*Math.max(1,Math.abs(e),Math.abs(g))}function m(e,g,l,K,U){let n=g[0]-l[0];l=g[1]-l[1];U=(K[0]*n+K[1]*l)*(U-1);n=K[0]*U;l=K[1]*U;e[0]=g[0]+n;e[1]=g[1]+l;return e}const G=Object.freeze(Object.defineProperty({__proto__:null,add:A,angle:W,ceil:L,copy:V,cross:c,dist:C,distance:C,div:p,divide:p,dot:u,equals:b,exactEquals:a,floor:Q,inverse:h,len:D,length:D,lerp:k,max:w,min:H,mul:P,multiply:P,negate:d,normalize:q,projectAndScale:m,random:v,rotate:O,round:z,scale:J,scaleAndAdd:x,
set:S,sqrDist:y,sqrLen:t,squaredDistance:y,squaredLength:t,str:Y,sub:B,subtract:B,transformMat2:F,transformMat2d:r,transformMat3:M,transformMat4:R},Symbol.toStringTag,{value:"Module"}));f.add=A;f.angle=W;f.ceil=L;f.copy=V;f.cross=c;f.dist=C;f.distance=C;f.div=p;f.divide=p;f.dot=u;f.equals=b;f.exactEquals=a;f.floor=Q;f.inverse=h;f.len=D;f.length=D;f.lerp=k;f.max=w;f.min=H;f.mul=P;f.multiply=P;f.negate=d;f.normalize=q;f.projectAndScale=m;f.random=v;f.rotate=O;f.round=z;f.scale=J;f.scaleAndAdd=x;f.set=
S;f.sqrDist=y;f.sqrLen=t;f.squaredDistance=y;f.squaredLength=t;f.str=Y;f.sub=B;f.subtract=B;f.transformMat2=F;f.transformMat2d=r;f.transformMat3=M;f.transformMat4=R;f.vec2=G})},"esri/chunks/vec2f64":function(){define(["exports"],function(f){function E(){return[0,0]}function V(C){return[C[0],C[1]]}function S(C,y){return[C,y]}function A(C,y=[0,0]){const D=Math.min(2,C.length);for(let t=0;t<D;++t)y[t]=C[t];return y}function B(C,y){return new Float64Array(C,y,2)}function P(){return[0,0]}function p(){return[1,
1]}function L(){return[1,0]}function Q(){return[0,1]}const H=[0,0],w=[1,1],z=[1,0],J=[0,1],x=Object.freeze(Object.defineProperty({__proto__:null,ONES:w,UNIT_X:z,UNIT_Y:J,ZEROS:H,clone:V,create:E,createView:B,fromArray:A,fromValues:S,ones:p,unitX:L,unitY:Q,zeros:P},Symbol.toStringTag,{value:"Module"}));f.ONES=w;f.UNIT_X=z;f.UNIT_Y=J;f.ZEROS=H;f.clone=V;f.create=E;f.createView=B;f.fromArray=A;f.fromValues=S;f.ones=p;f.unitX=L;f.unitY=Q;f.vec2f64=x;f.zeros=P})},"esri/layers/support/GeoreferenceBase":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/subclass ../../geometry/projection".split(" "),
function(f,E,V,S,A,B,P,p,L){E=class extends E.Clonable{projectOrWarn(Q,H){if(null==Q)return Q;const {geometry:w,pending:z}=L.projectOrLoad(Q,H);return z?null:z||w?w:(V.getLogger(this).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:Q,sourceSpatialReference:Q.spatialReference,targetSpatialReference:H}),null)}};return E=f.__decorate([p.subclass("esri.layers.support.GeoreferenceBase")],E)})},"esri/layers/support/CornersGeoreference":function(){define("../../chunks/tslib.es6 ../../core/perspectiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/mat3f64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Point ../../geometry/Polygon ../../geometry/projection ./GeoreferenceBase".split(" "),
function(f,E,V,S,A,B,P,p,L,Q,H,w,z,J,x){const C=H.create();A=class extends x{constructor(y){super(y);this.topRight=this.topLeft=this.bottomRight=this.bottomLeft=null;this.type="corners"}get coords(){let {topLeft:y,topRight:D,bottomLeft:t,bottomRight:d}=this;if(null==y||null==D||null==t||null==d)return null;const h=y.spatialReference;D=this.projectOrWarn(D,h);t=this.projectOrWarn(t,h);d=this.projectOrWarn(d,h);return null==D||null==t||null==d?null:new z({rings:[[[t.x,t.y],[y.x,y.y],[D.x,D.y],[d.x,
d.y],[t.x,t.y]]],spatialReference:h})}set coords(y){var {topLeft:D}=this;if(null!=D&&(D=D.spatialReference,y=this.projectOrWarn(y,D),null!=y)){var {rings:[[t,d,h,q]]}=y;this.bottomLeft=new w({x:t[0],y:t[1],spatialReference:D});this.topLeft=new w({x:d[0],y:d[1],spatialReference:D});this.topRight=new w({x:h[0],y:h[1],spatialReference:D});this.bottomRight=new w({x:q[0],y:q[1],spatialReference:D})}}toSourceNormalized(y){const {topLeft:D,topRight:t,bottomRight:d,bottomLeft:h}=this;if(null==y||null==D||
null==t||null==d||null==h)return null;const q=D.spatialReference;y=y.normalize();y=J.projectOrLoad(y,q).geometry;if(null==y)return null;Q.set(C,y.x,y.y);y=E.getProjectiveTransform(L.create(),[D.x,D.y,h.x,h.y,t.x,t.y,d.x,d.y],[0,0,0,1,1,0,1,1]);E.transformProjective(C,C,y);return V.createScreenPoint(C[0],C[1])}};f.__decorate([S.property()],A.prototype,"coords",null);f.__decorate([S.property({type:w})],A.prototype,"bottomLeft",void 0);f.__decorate([S.property({type:w})],A.prototype,"bottomRight",void 0);
f.__decorate([S.property({type:w})],A.prototype,"topLeft",void 0);f.__decorate([S.property({type:w})],A.prototype,"topRight",void 0);return A=f.__decorate([p.subclass("esri.layers.support.CornersGeoreference")],A)})},"esri/layers/support/ExtentAndRotationGeoreference":function(){define("../../chunks/tslib.es6 ../../core/mathUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../geometry/Extent ../../geometry/Polygon ../../geometry/projection ./GeoreferenceBase".split(" "),
function(f,E,V,S,A,B,P,p,L,Q,H,w,z){function J(x,C,y){y=L.toRadian(y);const D=Math.cos(y),t=Math.sin(y);return(d,h)=>[D*(d-x)+t*(h-C)+x,D*(h-C)-t*(d-x)+C]}A=class extends z{constructor(x){super(x);this.extent=null;this.rotation=0;this.type="extent-and-rotation"}get coords(){if(null==this.extent)return null;const {xmin:x,ymin:C,xmax:y,ymax:D,spatialReference:t}=this.extent;if(this.rotation){const {x:h,y:q}=this.extent.center;var d=J(h,q,this.rotation);d=[d(x,C),d(x,D),d(y,D),d(y,C)];d.push(d[0])}else d=
[[x,C],[x,D],[y,D],[y,C],[x,C]];return new H({rings:[d],spatialReference:t})}set coords(x){if(null!=x&&null!=this.extent){var C=this.extent.spatialReference;x=this.projectOrWarn(x,C);if(null!=x?.extent){var {rings:[[y,D,t]],extent:{center:{x:d,y:h}}}=x;x=E.rad2deg(Math.PI/2-Math.atan2(D[1]-y[1],D[0]-y[0]));var q=J(d,h,-x),[u,c]=q(y[0],y[1]),[k,v]=q(t[0],t[1]);this.extent=new Q({xmin:u,ymin:c,xmax:k,ymax:v,spatialReference:C});this.rotation=x}}}toSourceNormalized(x){const {extent:C,rotation:y}=this;
if(null==x||null==C)return null;const {xmin:D,ymin:t,xmax:d,ymax:h,center:q,spatialReference:u}=C;x=x.normalize();var c=w.projectOrLoad(x,u).geometry;if(null==c)return null;x=c.x;c=c.y;y&&([x,c]=J(q.x,q.y,-y)(x,c));return V.createScreenPoint(E.scale(x,D,d,0,1),E.scale(c,h,t,0,1))}};f.__decorate([S.property()],A.prototype,"coords",null);f.__decorate([S.property({type:Q})],A.prototype,"extent",void 0);f.__decorate([S.property({type:Number})],A.prototype,"rotation",void 0);return A=f.__decorate([p.subclass("esri.layers.support.ExtentAndRotationGeoreference")],
A)})},"esri/portal/support/resourceExtension":function(){define(["exports","../../core/urlUtils"],function(f,E){const V={},S=V["text/plain"],A={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const B in A)V[A[B]]=B;f.getResourceContentExtension=function(B){"json"===
B.type?B="application/json":"blob"===B.type?B=B.blob.type:(B=E.getPathExtension(B.url),B=A[B]||"text/plain");return V[B]||S};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/LocalMediaElementSource":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/Collection ../../core/collectionUtils ../../core/Evented ../../core/Loadable ../../core/Logger ../../core/Promise ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/intersectsBase ../../geometry/support/spatialReferenceUtils ../graphics/data/BoundsStore ./ImageElement ./MediaElementBase ./MediaElementView ./VideoElement ../../geometry/SpatialReference".split(" "),
function(f,E,V,S,A,B,P,p,L,Q,H,w,z,J,x,C,y,D,t,d,h,q,u,c,k,v){const F=V.ofType({key:"type",defaultKeyValue:"image",base:u,typeMap:{image:q,video:k}});E=class extends B.LoadableMixin(p.EsriPromiseMixin(A.EventedAccessor)){constructor(r){super(r);this._index=new h.BoundsStore;this._elementViewsMap=new Map;this._elementsIndexes=new Map;this._elementsChangedHandler=M=>{for(var R of M.removed){const O=this._elementViewsMap.get(R);this._elementViewsMap.delete(R);this._index.delete(O);this.removeHandles(O);
O.destroy();this.notifyChange("fullExtent")}({spatialReference:R}=this);for(const O of M.added){if(this._elementViewsMap.get(O))continue;const W=new c.MediaElementView({spatialReference:R,element:O});this._elementViewsMap.set(O,W);M=Q.watch(()=>W.coords,()=>this._updateIndexForElement(W,!1));this._updateIndexForElement(W,!0);this.addHandles(M,W)}this._elementsIndexes.clear();this.elements.forEach((O,W)=>this._elementsIndexes.set(O,W));this.emit("refresh")};this.elements=new F}async load(r){L.throwIfAborted(r);
this.spatialReference||(r=this.elements.find(M=>null!=M.georeference?.coords),this._set("spatialReference",r?r.georeference.coords.spatialReference:v.WGS84));this._elementsChangedHandler({added:this.elements.items,removed:[]});this.addHandles(this.elements.on("change",this._elementsChangedHandler));return this}destroy(){this._index.clear();this._elementViewsMap.clear();this._elementsIndexes.clear()}set elements(r){this._set("elements",S.referenceSetter(r,this._get("elements"),F))}get fullExtent(){if("not-loaded"===
this.loadStatus)return null;const r=this._index.fullBounds;return null==r?null:new C({xmin:r[0],ymin:r[1],xmax:r[2],ymax:r[3],spatialReference:this.spatialReference})}set spatialReference(r){"not-loaded"!==this.loadStatus?P.getLogger(this).error("#spatialReference","spatialReference cannot be changed after the source is loaded."):this._set("spatialReference",r)}async queryElements(r,M){await this.load();await y.initializeProjection(r.spatialReference,this.spatialReference,null,M);r=d.equals(r.spatialReference,
this.spatialReference)?r:y.project(r,this.spatialReference);if(!r)return[];r=r.normalize();const R=[];for(const O of r)this._index.forEachInBounds(D.fromExtent(O),({normalizedCoords:W,element:Y})=>{null!=W&&t.extentIntersectsPolygon(O,W)&&R.push(Y)});R.sort((O,W)=>this._elementsIndexes.get(O)-this._elementsIndexes.get(W));return R}_updateIndexForElement(r,M){const R=r.normalizedBounds,O=this._index.has(r),W=null!=R;this._index.delete(r);W&&this._index.set(r,R);this.notifyChange("fullExtent");M||(O!==
W?this.emit("refresh"):this.emit("change",{element:r.element}))}};f.__decorate([H.property()],E.prototype,"elements",null);f.__decorate([H.property({readOnly:!0})],E.prototype,"fullExtent",null);f.__decorate([H.property()],E.prototype,"spatialReference",null);return E=f.__decorate([x.subclass("esri.layers.support.LocalMediaElementSource")],E)})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],
function(f,E,V,S){function A(p,L,Q){B.minX=L[0];B.minY=L[1];B.maxX=L[2];B.maxY=L[3];p.search(B,Q)}const B={minX:0,minY:0,maxX:0,maxY:0};class P{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new V.PooledRBush(9,E("esri-csp-restrictions")?p=>({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const p=Array(this._idByBounds.size);let L=0;this._idByBounds.forEach((Q,
H)=>{p[L++]=H});this._indexInvalid=!1;this._index.clear();this._index.load(p)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(p=>this._idByBounds.has(p))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const p=S.empty();for(const L of this._boundsById.values())L&&(p[0]=Math.min(L[0],p[0]),p[1]=Math.min(L[1],p[1]),p[2]=Math.max(L[2],p[2]),p[3]=Math.max(L[3],p[3]));return p}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=
!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(p){const L=this._boundsById.get(p);this._boundsById.delete(p);L&&(this._idByBounds.delete(L),this._indexInvalid||this._index.remove(L))}forEachInBounds(p,L){this._loadIndex();A(this._index,p,Q=>L(this._idByBounds.get(Q)))}get(p){return this._boundsById.get(p)}has(p){return this._boundsById.has(p)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(p,
L){if(!this._indexInvalid){const Q=this._boundsById.get(p);Q&&(this._index.remove(Q),this._idByBounds.delete(Q))}this._boundsById.set(p,L);L&&(this._idByBounds.set(L,p),this._indexInvalid||(this._boundsToLoad.push(L),5E4<this._boundsToLoad.length&&this._loadIndex()))}}f.BoundsStore=P;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../PooledArray","../../../chunks/quickselect"],function(f,E,V,S){function A(c,
k){B(c,0,c.children.length,k,c)}function B(c,k,v,F,r){r||(r=new q([]));r.minX=Infinity;r.minY=Infinity;r.maxX=-Infinity;r.maxY=-Infinity;for(let M=k,R;M<v;M++)R=c.children[M],P(r,c.leaf?F(R):R);return r}function P(c,k){c.minX=Math.min(c.minX,k.minX);c.minY=Math.min(c.minY,k.minY);c.maxX=Math.max(c.maxX,k.maxX);c.maxY=Math.max(c.maxY,k.maxY)}function p(c,k){return c.minX-k.minX}function L(c,k){return c.minY-k.minY}function Q(c){return(c.maxX-c.minX)*(c.maxY-c.minY)}function H(c){return c.maxX-c.minX+
(c.maxY-c.minY)}function w(c,k){return c.minX<=k.minX&&c.minY<=k.minY&&k.maxX<=c.maxX&&k.maxY<=c.maxY}function z(c,k){return k.minX<=c.maxX&&k.minY<=c.maxY&&k.maxX>=c.minX&&k.maxY>=c.minY}function J(c,k,v,F,r){for(k=[k,v];k.length;){v=k.pop();const M=k.pop();if(v-M<=F)continue;const R=M+Math.ceil((v-M)/F/2)*F;S.quickselect(c,R,M,v,r);k.push(M,R,R,v)}}class x{constructor(c=9,k){this._compareMinX=p;this._compareMinY=L;this._toBBox=v=>v;this._maxEntries=Math.max(4,c||9);this._minEntries=Math.max(2,Math.ceil(.4*
this._maxEntries));k&&("function"===typeof k?this._toBBox=k:this._initFormat(k));this.clear()}destroy(){this.clear();C.prune();y.prune();D.prune();t.prune()}all(c){this._all(this._data,c)}search(c,k){let v=this._data;const F=this._toBBox;if(z(c,v))for(C.clear();v;){for(let r=0,M=v.children.length;r<M;r++){const R=v.children[r],O=v.leaf?F(R):R;z(c,O)&&(v.leaf?k(R):w(c,O)?this._all(R,k):C.push(R))}v=C.pop()}}collides(c){let k=this._data;const v=this._toBBox;if(!z(c,k))return!1;for(C.clear();k;){for(let F=
0,r=k.children.length;F<r;F++){const M=k.children[F],R=k.leaf?v(M):M;if(z(c,R)){if(k.leaf||w(c,R))return!0;C.push(M)}}k=C.pop()}return!1}load(c){if(!c.length)return this;if(c.length<this._minEntries){for(let k=0,v=c.length;k<v;k++)this.insert(c[k]);return this}c=this._build(c.slice(0,c.length),0,c.length-1,0);if(this._data.children.length)if(this._data.height===c.height)this._splitRoot(this._data,c);else{if(this._data.height<c.height){const k=this._data;this._data=c;c=k}this._insert(c,this._data.height-
c.height-1,!0)}else this._data=c;return this}insert(c){c&&this._insert(c,this._data.height-1);return this}clear(){this._data=new q([]);return this}remove(c){if(!c)return this;let k=this._data,v=null,F=0,r=!1,M;const R=this._toBBox(c);D.clear();for(t.clear();k||0<D.length;){k||(k=D.pop(),v=D.data[D.length-1],F=t.pop()??0,r=!0);if(k.leaf&&(M=E.indexOf(k.children,c,k.children.length,k.indexHint),-1!==M)){k.children.splice(M,1);D.push(k);this._condense(D);break}r||k.leaf||!w(k,R)?v?(F++,k=v.children[F],
r=!1):k=null:(D.push(k),t.push(F),F=0,v=k,k=k.children[0])}return this}toJSON(){return this._data}fromJSON(c){this._data=c;return this}_all(c,k){for(y.clear();c;){if(!0===c.leaf)for(const v of c.children)k(v);else y.pushArray(c.children);c=y.pop()??null}}_build(c,k,v,F){var r=v-k+1,M=this._maxEntries;if(r<=M)return c=new q(c.slice(k,v+1)),A(c,this._toBBox),c;F||(F=Math.ceil(Math.log(r)/Math.log(M)),M=Math.ceil(r/M**(F-1)));const R=new u([]);R.height=F;r=Math.ceil(r/M);M=r*Math.ceil(Math.sqrt(M));
for(J(c,k,v,M,this._compareMinX);k<=v;k+=M){const O=Math.min(k+M-1,v);J(c,k,O,r,this._compareMinY);for(let W=k;W<=O;W+=r)R.children.push(this._build(c,W,Math.min(W+r-1,O),F-1))}A(R,this._toBBox);return R}_chooseSubtree(c,k,v,F){for(;;){F.push(k);if(!0===k.leaf||F.length-1===v)break;let r=Infinity,M=Infinity,R=void 0;for(let O=0,W=k.children.length;O<W;O++){const Y=k.children[O],a=Q(Y),b=(Math.max(Y.maxX,c.maxX)-Math.min(Y.minX,c.minX))*(Math.max(Y.maxY,c.maxY)-Math.min(Y.minY,c.minY))-a;b<M?(M=b,
r=a<r?a:r,R=Y):b===M&&a<r&&(r=a,R=Y)}k=R||k.children[0]}return k}_insert(c,k,v){var F=this._toBBox;v=v?c:F(c);D.clear();F=this._chooseSubtree(v,this._data,k,D);F.children.push(c);for(P(F,v);0<=k;)if(D.data[k].children.length>this._maxEntries)this._split(D,k),k--;else break;this._adjustParentBBoxes(v,D,k)}_split(c,k){const v=c.data[k];var F=v.children.length;const r=this._minEntries;this._chooseSplitAxis(v,r,F);(F=this._chooseSplitIndex(v,r,F))?(F=v.children.splice(F,v.children.length-F),F=v.leaf?
new q(F):new u(F),F.height=v.height,A(v,this._toBBox),A(F,this._toBBox),k?c.data[k-1].children.push(F):this._splitRoot(v,F)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}_splitRoot(c,k){this._data=new u([c,k]);this._data.height=c.height+1;A(this._data,this._toBBox)}_chooseSplitIndex(c,k,v){let F,r,M=void 0;F=r=Infinity;for(let O=k;O<=v-k;O++){var R=B(c,0,O,this._toBBox);const W=B(c,O,v,this._toBBox),Y=Math.max(0,Math.min(R.maxX,W.maxX)-Math.max(R.minX,W.minX))*
Math.max(0,Math.min(R.maxY,W.maxY)-Math.max(R.minY,W.minY));R=Q(R)+Q(W);Y<F?(F=Y,M=O,r=R<r?R:r):Y===F&&R<r&&(r=R,M=O)}return M}_chooseSplitAxis(c,k,v){const F=c.leaf?this._compareMinX:p,r=c.leaf?this._compareMinY:L,M=this._allDistMargin(c,k,v,F);k=this._allDistMargin(c,k,v,r);M<k&&c.children.sort(F)}_allDistMargin(c,k,v,F){c.children.sort(F);F=this._toBBox;var r=B(c,0,k,F);const M=B(c,v-k,v,F);let R=H(r)+H(M);for(let O=k;O<v-k;O++){const W=c.children[O];P(r,c.leaf?F(W):W);R+=H(r)}for(v=v-k-1;v>=k;v--)r=
c.children[v],P(M,c.leaf?F(r):r),R+=H(M);return R}_adjustParentBBoxes(c,k,v){for(;0<=v;v--)P(k.data[v],c)}_condense(c){for(let k=c.length-1;0<=k;k--){const v=c.data[k];if(0===v.children.length)if(0<k){const F=c.data[k-1],r=F.children;r.splice(E.indexOf(r,v,r.length,F.indexHint),1)}else this.clear();else A(v,this._toBBox)}}_initFormat(c){const k=["return a"," - b",";"];this._compareMinX=new Function("a","b",k.join(c[0]));this._compareMinY=new Function("a","b",k.join(c[1]));this._toBBox=new Function("a",
"return {minX: a"+c[0]+", minY: a"+c[1]+", maxX: a"+c[2]+", maxY: a"+c[3]+"};")}}const C=new V,y=new V,D=new V,t=new V({deallocator:void 0});class d{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class h extends d{constructor(){super(...arguments);this.height=1;this.indexHint=new E.PositionHint}}class q extends h{constructor(c){super();this.children=c;this.leaf=!0}}class u extends h{constructor(c){super();this.children=c;this.leaf=!1}}f.BBox=d;f.PooledRBush=x;Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(f,E){var V={exports:{}};V.exports;(function(S){(function(A){A=A();void 0!==A&&(S.exports=A)})(function(){function A(p,L,Q,H,w){for(;H>Q;){if(600<H-Q){var z=H-Q+1,J=L-Q+1,x=Math.log(z),C=.5*Math.exp(2*x/3);x=.5*Math.sqrt(x*C*(z-C)/z)*(0>J-z/2?-1:1);A(p,L,Math.max(Q,Math.floor(L-J*C/z+x)),Math.min(H,Math.floor(L+(z-J)*C/z+x)),w)}z=p[L];J=Q;C=H;B(p,Q,L);for(0<w(p[H],z)&&B(p,Q,
H);J<C;){B(p,J,C);J++;for(C--;0>w(p[J],z);)J++;for(;0<w(p[C],z);)C--}0===w(p[Q],z)?B(p,Q,C):(C++,B(p,C,H));C<=L&&(Q=C+1);L<=C&&(H=C-1)}}function B(p,L,Q){var H=p[L];p[L]=p[Q];p[Q]=H}function P(p,L){return p<L?-1:p>L?1:0}return function(p,L,Q,H,w){A(p,L,Q||0,H||p.length-1,w||P)}})})(V);E=E.getDefaultExportFromCjs(V.exports);f.quickselect=E})},"esri/layers/support/MediaElementView":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Polygon ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/normalizeUtilsSync".split(" "),
function(f,E,V,S,A,B,P,p,L,Q,H,w){f.MediaElementView=class extends V{constructor(z){super(z)}get bounds(){const z=this.coords;return null==z?.extent?null:H.fromExtent(z.extent)}get coords(){return Q.projectOrLoad(this.element.georeference?.coords,this.spatialReference).geometry}get normalizedCoords(){return L.fromJSON(w.normalizeCentralMeridianSync(this.coords))}get normalizedBounds(){const z=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=z?H.fromExtent(z):null}};E.__decorate([S.property()],
f.MediaElementView.prototype,"spatialReference",void 0);E.__decorate([S.property()],f.MediaElementView.prototype,"element",void 0);E.__decorate([S.property()],f.MediaElementView.prototype,"bounds",null);E.__decorate([S.property()],f.MediaElementView.prototype,"coords",null);E.__decorate([S.property()],f.MediaElementView.prototype,"normalizedCoords",null);E.__decorate([S.property()],f.MediaElementView.prototype,"normalizedBounds",null);f.MediaElementView=E.__decorate([p.subclass("esri.layers.support.MediaElementView")],
f.MediaElementView);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsSync":function(){define("exports ../../core/JSONSupport ./aaBoundingRect ./boundsUtils ./coordsUtils ./jsonUtils ./normalizeUtilsCommon ./spatialReferenceUtils".split(" "),function(f,E,V,S,A,B,P,p){function L(d,h){if(null==d)return null;var q=d.spatialReference,u=p.getInfo(q);d=E.isSerializable(d)?d.toJSON():d;if(!u)return d;q=p.isWebMercator(q)?102100:4326;const c=P.cutParams[q].maxX,
k=P.cutParams[q].minX;if(B.isPoint(d))return H(d,c,k);if(B.isMultipoint(d))d.points=d.points.map(v=>H(v,c,k));else{if(B.isExtent(d))return Q(d,u);if(B.isPolygon(d)||B.isPolyline(d)){q=S.getBoundsXY(D,d);u=q[0];q=q[2];const v=2*P.offsetMagnitude(u,k)*c;d=0===v?d:P.updatePolyGeometry(d,v);u+=v;q+=v;return q>c?C(d,c,h):u<k?C(d,k,h):d}}return d}function Q(d,h){if(!h)return d;const q=w(d,h).map(u=>u.extent);return 2>q.length?q[0]||d:2<q.length?(d.xmin=h.valid[0],d.xmax=h.valid[1],d):{rings:q.map(u=>[[u.xmin,
u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]])}}function H(d,h,q){if(Array.isArray(d)){var u=d[0];u>h?(q=P.offsetMagnitude(u,h),d[0]=u+-2*q*h):u<q&&(h=P.offsetMagnitude(u,q),d[0]=u+-2*h*q)}else u=d.x,u>h?(q=P.offsetMagnitude(u,h),d.x+=-2*q*h):u<q&&(h=P.offsetMagnitude(u,q),d.x+=-2*h*q);return d}function w(d,h){const q=[],{ymin:u,ymax:c,xmin:k,xmax:v}=d;var F=d.xmax-d.xmin;const [r,M]=h.valid,{x:R,frameId:O}=z(d.xmin,h),{x:W,frameId:Y}=z(d.xmax,h);d=R===W&&0<F;if(F>2*M){F=
{xmin:k<v?R:W,ymin:u,xmax:M,ymax:c};d={xmin:r,ymin:u,xmax:k<v?W:R,ymax:c};h={xmin:0,ymin:u,xmax:M,ymax:c};const a={xmin:r,ymin:u,xmax:0,ymax:c},b=[],m=[];J(F,h)&&b.push(O);J(F,a)&&m.push(O);J(d,h)&&b.push(Y);J(d,a)&&m.push(Y);for(let G=O+1;G<Y;G++)b.push(G),m.push(G);q.push(new y(F,[O]),new y(d,[Y]),new y(h,b),new y(a,m))}else R>W||d?q.push(new y({xmin:R,ymin:u,xmax:M,ymax:c},[O]),new y({xmin:r,ymin:u,xmax:W,ymax:c},[Y])):q.push(new y({xmin:R,ymin:u,xmax:W,ymax:c},[O]));return q}function z(d,h){const [q,
u]=h.valid;h=2*u;var c=0;d>u?(c=Math.ceil(Math.abs(d-u)/h),d-=c*h):d<q&&(c=Math.ceil(Math.abs(d-q)/h),d+=c*h,c=-c);return{x:d,frameId:c}}function J(d,h){const {xmin:q,ymin:u,xmax:c,ymax:k}=h;return x(d,q,u)&&x(d,q,k)&&x(d,c,k)&&x(d,c,u)}function x(d,h,q){return h>=d.xmin&&h<=d.xmax&&q>=d.ymin&&q<=d.ymax?!0:!1}function C(d,h,q=!0){const u=!B.isPolyline(d);u&&A.closeRings(d);if(q)return(new t).cut(d,h);q=u?d.rings:d.paths;const c=u?4:2,k=q.length;h*=-2;for(let v=0;v<k;v++){const F=q[v];if(F&&F.length>=
c){const r=[];for(const M of F)r.push([M[0]+h,M[1]]);q.push(r)}}u?d.rings=q:d.paths=q;return d}class y{constructor(d,h){this.extent=d;this.frameIds=h}}const D=V.create();class t{constructor(){this._linesIn=[];this._linesOut=[]}cut(d,h){this._xCut=h;if(d.rings)this._closed=!0,h=d.rings,this._minPts=4;else if(d.paths)this._closed=!1,h=d.paths,this._minPts=2;else return null;for(var q of h)if(q&&!(q.length<this._minPts)){h=!0;for(const u of q)h?(this.moveTo(u),h=!1):this.lineTo(u);this._closed&&this.close()}this._pushLineIn();
this._pushLineOut();h=[];for(const u of this._linesIn)u&&u.length>=this._minPts&&h.push(u);q=-2*this._xCut;for(const u of this._linesOut)if(u&&u.length>=this._minPts){for(const c of u)c[0]+=q;h.push(u)}this._closed?d.rings=h:d.paths=h;return d}moveTo(d){this._pushLineIn();this._pushLineOut();this._prevSide=this._side(d[0]);this._moveTo(d[0],d[1],this._prevSide);this._firstPt=this._prevPt=d}lineTo(d){const h=this._side(d[0]);if(-1===h*this._prevSide){const q=this._intersect(this._prevPt,d);this._lineTo(this._xCut,
q,0);this._prevSide=0}this._lineTo(d[0],d[1],h);this._prevSide=h;this._prevPt=d}close(){const d=this._firstPt,h=this._prevPt;d[0]===h[0]&&d[1]===h[1]||this.lineTo(d);this._checkClosingPt(this._lineIn);this._checkClosingPt(this._lineOut)}_moveTo(d,h,q){this._closed?(this._lineIn.push([0>=q?d:this._xCut,h]),this._lineOut.push([0<=q?d:this._xCut,h])):(0>=q&&this._lineIn.push([d,h]),0<=q&&this._lineOut.push([d,h]))}_lineTo(d,h,q){this._closed?(this._addPolyVertex(this._lineIn,0>=q?d:this._xCut,h),this._addPolyVertex(this._lineOut,
0<=q?d:this._xCut,h)):0>q?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([d,h])):0<q?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([d,h])):0>this._prevSide?(this._lineIn.push([d,h]),this._lineOut.push([d,h])):0<this._prevSide&&(this._lineOut.push([d,h]),this._lineIn.push([d,h]))}_addPolyVertex(d,h,q){const u=d.length;1<u&&d[u-1][0]===h&&d[u-2][0]===h?d[u-1][1]=q:d.push([h,q])}_checkClosingPt(d){const h=d.length;3<h&&d[0][0]===this._xCut&&d[h-2][0]===this._xCut&&d[1][0]===
this._xCut&&(d[0][1]=d[h-2][1],d.pop())}_side(d){return d<this._xCut?-1:d>this._xCut?1:0}_intersect(d,h){return d[1]+(this._xCut-d[0])/(h[0]-d[0])*(h[1]-d[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn);this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut);this._lineOut=[]}}f.CutVertical=t;f.normalizeCentralMeridianForDisplay=function(d){return L(d,!1)};f.normalizeCentralMeridianSync=
function(d){return L(d,!0)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/VideoElement":function(){define("../../chunks/tslib.es6 ../../core/Error ../../core/events ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./MediaElementBase".split(" "),function(f,E,V,S,A,B,P,p,L,Q){B=class extends Q{constructor(H){super(H);this.autoplay=
!0;this.content=null;this.type="video"}load(){const H=this.video;if("string"===typeof H){const w=document.createElement("video");w.src=H;w.crossOrigin="anonymous";w.autoplay=!0;w.muted=!0;w.loop=!0;this.addResolvingPromise(this._loadVideo(w).then(()=>{this._set("content",w)}))}else H instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(H).then(()=>{this._set("content",H)})):this.addResolvingPromise(Promise.reject(new E("video-element:invalid-video-type","Invalid video type",{video:H})));
return Promise.resolve(this)}get contentWidth(){return this.content?.videoWidth??0}get contentHeight(){return this.content?.videoHeight??0}set video(H){"not-loaded"!==this.loadStatus?S.getLogger(this).error("#video","video cannot be changed after the element is loaded."):this._set("video",H)}_loadVideo(H){return new Promise((w,z)=>{const J=V.once(H,"canplay",()=>{this.removeHandles("canplay");this.autoplay?H.play().then(w,z):w()});this.addHandles(J,"canplay");"anonymous"!==H.crossOrigin&&(H.crossOrigin=
"anonymous",H.src?.includes("blob:")||(H.src=H.src))})}};f.__decorate([A.property()],B.prototype,"autoplay",void 0);f.__decorate([A.property({readOnly:!0})],B.prototype,"content",void 0);f.__decorate([A.property({readOnly:!0})],B.prototype,"contentWidth",null);f.__decorate([A.property({readOnly:!0})],B.prototype,"contentHeight",null);f.__decorate([A.property()],B.prototype,"video",null);return B=f.__decorate([L.subclass("esri.layers.support.VideoElement")],B)})},"*noref":1}});
define("../chunks/tslib.es6 ../core/Collection ../core/Error ../core/Logger ../core/MultiOriginJSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/BlendLayer ./mixins/OperationalLayer ./mixins/ScaleRangeLayer ./support/ImageElement ./support/LocalMediaElementSource ./support/VideoElement".split(" "),function(f,
E,V,S,A,B,P,p,L,Q,H,w,z,J,x,C,y,D,t){function d(h){return"object"===typeof h&&null!=h&&"type"in h}A=class extends J.BlendLayer(C.ScaleRangeLayer(x.OperationalLayer(A.MultiOriginJSONMixin(z)))){constructor(h){super(h);this.copyright=this.effectiveSource=null;this.operationalLayerType="MediaLayer";this.spatialReference=null;this.type="media";this.source=new D}load(h){const q=this.source;if(!q)return this.addResolvingPromise(Promise.reject(new V("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer."))),
Promise.resolve(this);const u=d(q)?new D({elements:new E([q])}):q;this._set("effectiveSource",u);this.spatialReference&&(u.spatialReference=this.spatialReference);h=u.load(h).then(()=>{this.spatialReference=u.spatialReference});this.addResolvingPromise(h);return Promise.resolve(this)}destroy(){this.effectiveSource?.destroy();this.source?.destroy()}get fullExtent(){return this.loaded?this.effectiveSource.fullExtent:null}set source(h){"not-loaded"!==this.loadStatus?S.getLogger(this).error("#source",
"source cannot be changed after the layer is loaded."):this._set("source",h)}castSource(h){return h?Array.isArray(h)?new D({elements:new E(h)}):h instanceof E?new D({elements:h}):h:null}readSource(h,q,u){h="image"===q.mediaType?new y:"video"===q.mediaType?new t:null;h?.read(q,u);return h}writeSource(h,q,u,c){h&&d(h)&&"image"===h.type?h.write(q,c):c?.messages&&c?.messages?.push(new V("media-layer:unsupported-source","source must be an 'ImageElement'"))}};f.__decorate([B.property({readOnly:!0})],A.prototype,
"effectiveSource",void 0);f.__decorate([B.property({type:String})],A.prototype,"copyright",void 0);f.__decorate([B.property({readOnly:!0})],A.prototype,"fullExtent",null);f.__decorate([B.property({type:["MediaLayer"]})],A.prototype,"operationalLayerType",void 0);f.__decorate([B.property({type:["show","hide"]})],A.prototype,"listMode",void 0);f.__decorate([B.property({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1}}})],A.prototype,"source",null);f.__decorate([P.cast("source")],A.prototype,"castSource",
null);f.__decorate([Q.reader("source",["url"])],A.prototype,"readSource",null);f.__decorate([w.writer("source")],A.prototype,"writeSource",null);f.__decorate([B.property()],A.prototype,"spatialReference",void 0);f.__decorate([B.property({readOnly:!0})],A.prototype,"type",void 0);return A=f.__decorate([H.subclass("esri.layers.MediaLayer")],A)});