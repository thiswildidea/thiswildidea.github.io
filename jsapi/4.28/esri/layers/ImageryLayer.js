// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/deprecate ../../core/Error ../../core/lang ../../core/Logger ../../core/reactiveUtils ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/spatialReferenceUtils ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageBitmapUtils ../support/imageryRendererUtils ../support/MosaicRule ../support/MultidimensionalSubset ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterDatasets/multidimensionalUtils ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../core/has ../support/source/DataLayerSource ../../rest/query/executeQueryJSON ../../config ../../kernel ../../core/unitUtils ../../geometry/ellipsoidUtils ../graphics/featureConversionUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtils ../../core/pbf ../../rest/support/FeatureSet ../../rest/support/Query ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../rest/query/executeForIds ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/imageService/fetchRasterInfo ../../rest/imageService/getCatalogItemRasterInfo ../../rest/support/ImageAngleParameters ../../rest/support/ImageAreaParameters ../../rest/support/ImageDistanceParameters ../../rest/support/ImageHeightParameters ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImagePixelLocationParameters ../../rest/support/ImagePointParameters ../../rest/support/ImageSampleParameters ../../views/2d/engine/flow/dataUtils ../../geometry/SpatialReference".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g,p,q,n,e,m,r,a,k,c,h,b,f,t,y,v,w,B,F,I,G,N,z,A,J,R,H,O,M,S,W,X,ba,Y,ca,Z,ea,ha,fa,ka,ia,na,qa,ta,wa,ya,xa,Aa,sa,Ea,Ca,Qa,Ra,Sa,Ta,Ua,Ka,Na,Va,Wa,Xa,Ya,La){function Za(la){return la?(la=JSON.stringify(la).match(/"rasterFunction":"(.*?")/gi)?.map(Ba=>Ba.replace('"rasterFunction":"',"").replace('"',"")))?la.join("/"):null:null}const $a=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),ab=g.ensureRange(p.ensureNumber,{min:0,max:255});l.ArcGISImageService=
la=>{function Ba(E){return E?.path??""}la=class extends la{constructor(){super(...arguments);this._functionRasterInfos={};this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};this._serviceSupportsMosaicRule=this._cachedRendererJson=null;this._rasterAttributeTableFieldPrefix="Raster.";this.adjustAspectRatio=null;this.bandIds=void 0;this.capabilities=null;this.compressionQuality=void 0;this.compressionTolerance=.01;this.fullExtent=this.fields=this.rasterInfo=this.exportImageServiceParameters=
this.definitionExpression=this.defaultMosaicRule=this.copyright=null;this.hasMultidimensions=!1;this.imageMaxWidth=this.imageMaxHeight=4100;this.interpolation=void 0;this.maxScale=this.minScale=0;this.noData=this.multidimensionalSubset=this.multidimensionalInfo=null;this.noDataInterpretation=void 0;this.objectIdField=null;this.geometryType="polygon";this.typeIdField=null;this.types=[];this.pixelFilter=null;this.raster=void 0;this.sourceType=null;this.viewId=void 0;this.url=this.sourceJSON=this.serviceRasterInfo=
this.pixelType=this.spatialReference=this.serviceDataType=this.rasterFunctionInfos=this.symbolizer=null;this.version=void 0}initialize(){this._set("exportImageServiceParameters",new k.ExportImageServiceParameters({layer:this}))}readServiceSupportsMosaicRule(E,V){return this._isMosaicRuleSupported(V)}get _rasterFunctionNamesIndex(){const E=new Map;if(!this.rasterFunctionInfos||null!=this.rasterFunctionInfos&&1>this.rasterFunctionInfos.length)return E;null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.forEach(V=>
{E.set(V.name.toLowerCase().replaceAll(/ /gi,"_"),V.name)});return E}readBandIds(E,V){if(Array.isArray(E)&&0<E.length&&E.every(aa=>"number"===typeof aa))return E}readCapabilities(E,V){return this._readCapabilities(V)}writeCompressionQuality(E,V,aa){null!=E&&"lerc"!==this.format&&(V[aa]=E)}writeCompressionTolerance(E,V,aa){"lerc"===this.format&&null!=E&&(V[aa]=E)}readDefaultMosaicRule(E,V){return this._serviceSupportsMosaicRule?t.fromJSON(V):null}get fieldsIndex(){return this.fields?new h(this.fields):
null}set format(E){E&&$a.has(E.toLowerCase())&&this._set("format",E.toLowerCase())}readFormat(E,V){return"esriImageServiceDataTypeVector-UV"===V.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===V.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"}readMinScale(E,V){return null!=V.minLOD&&null!=V.maxLOD?E:0}readMaxScale(E,V){return null!=V.minLOD&&null!=V.maxLOD?E:0}set mosaicRule(E){E?.mosaicMethod&&(E=t.fromJSON({...E.toJSON(),mosaicMethod:E.mosaicMethod,mosaicOperation:E.mosaicOperation}));
this._set("mosaicRule",E)}readMosaicRule(E,V){return(E=E||V.mosaicRule)?t.fromJSON(E):this._isMosaicRuleSupported(V)?t.fromJSON(V):null}writeMosaicRule(E,V,aa){E=this.mosaicRule;const da=this.definitionExpression;E?da&&da!==E.where&&(E=E.clone(),E.where=da):da&&(E=new t({where:da}));this._isValidCustomizedMosaicRule(E)&&(V[aa]=E.toJSON())}writeNoData(E,V,aa){null!=E&&"number"===typeof E&&(V[aa]=ab(E))}readObjectIdField(E,V){E||(E=V.fields.find(aa=>"esriFieldTypeOID"===aa.type||"oid"===aa.type)?.name);
return E}get parsedUrl(){return d.urlToObject(this.url)}readSourceType(E,V){return this._isMosaicDataset(V)?"mosaic-dataset":"raster-dataset"}set renderer(E){this.loaded&&(E=this._configRenderer(E));this._set("renderer",E)}readRenderer(E,V,aa){E=V?.layerDefinition?.drawingInfo?.renderer;aa=x.read(E,aa);if(null==aa)return null;"vector-field"===aa.type&&V.symbolTileSize&&!E.symbolTileSize&&(aa.symbolTileSize=V.symbolTileSize);f.isSupportedRendererType(aa)||L.getLogger(this).warn("ArcGISImageService",
"Imagery layer doesn't support given renderer type.");return aa}writeRenderer(E,V,aa){V.layerDefinition=V.layerDefinition||{};V.layerDefinition.drawingInfo=V.layerDefinition.drawingInfo||{};V.layerDefinition.drawingInfo.renderer=E.toJSON();"vector-field"===E.type&&(V.symbolTileSize=E.symbolTileSize)}get rasterFields(){const E=this._rasterAttributeTableFieldPrefix;var V=new c({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const aa=new c({name:"Raster.ServicePixelValue",
alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),da=new c({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let ma=this.fields?U.clone(this.fields):[];ma.push(aa);this.capabilities?.operations.supportsQuery&&this.fields&&0<this.fields.length&&ma.push(V);10.4<=this.version&&null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.some(ja=>"none"===ja.name.toLowerCase())&&ma.push(da);null!=this.rasterFunctionInfos&&
this.rasterFunctionInfos.filter(ja=>"none"!==ja.name.toLowerCase()).forEach(ja=>{ma.push(new c({name:"Raster.ServicePixelValue."+ja.name,alias:ja.name,domain:null,editable:!1,length:50,type:"string"}))});this._isVectorDataSet()&&(ma.push(new c({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),ma.push(new c({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));({attributeTable:V}=this.rasterInfo??{});null!=V&&(V=V.fields.filter(ja=>"esriFieldTypeOID"!==
ja.type&&"value"!==ja.name.toLowerCase()).map(ja=>{const ra=U.clone(ja);ra.name=E+ja.name;return ra}),ma=ma.concat(V));return ma}get renderingRule(){Q.deprecatedProperty(L.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});return this.rasterFunction}set renderingRule(E){Q.deprecatedProperty(L.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});this._set("rasterFunction",E)}set rasterFunction(E){E?.rasterFunction&&(E=B.fromJSON({...E.toJSON(),
rasterFunction:E.rasterFunction,rasterFunctionArguments:E.rasterFunctionArguments}));this._set("rasterFunction",E)}readRasterFunction(E,V){E=V.rasterFunctionInfos;return V.renderingRule||E?.length&&"None"!==E[0].name?this._isRFTJson(V.renderingRule)?B.fromJSON({rasterFunctionDefinition:V.renderingRule}):B.fromJSON(V.renderingRule||{rasterFunctionInfos:V.rasterFunctionInfos}):null}readSpatialReference(E,V){return(E=E||V.extent.spatialReference)?La.fromJSON(E):null}readPixelType(E){return w.pixelTypeKebabDict.fromJSON(E)||
E}writePixelType(E,V,aa){if(null==this.serviceRasterInfo||this.pixelType!==this.serviceRasterInfo.pixelType)V[aa]=w.pixelTypeKebabDict.toJSON(E)}readVersion(E,V){(E=V.currentVersion)||(E=V.hasOwnProperty("fields")||V.hasOwnProperty("timeInfo")?10:9.3);return E}applyFilter(E){let V=E;this.pixelFilter&&(V=this._clonePixelData(E),this.pixelFilter(V));return V}async applyRenderer(E,V){var aa=E;const {renderer:da,symbolizer:ma,pixelFilter:ja,bandIds:ra}=this;if(!this._isPicture()&&da&&ma&&!ja){aa=JSON.stringify(this._cachedRendererJson)!==
JSON.stringify(da.toJSON());const oa=this._rasterJobHandler.instance;oa?(aa&&(ma.bind(),await oa.updateSymbolizer(ma,V),this._cachedRendererJson=da.toJSON()),V=await oa.symbolize({bandIds:ra,...E},V),aa={extent:E.extent,pixelBlock:V}):aa={extent:E.extent,pixelBlock:ma.symbolize({bandIds:ra,...E})}}return aa}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&
this._shutdownJobHandler()}async computeAngles(E,V){if(!(await this._fetchCapabilities(V?.signal)).operations.supportsComputeAngles)throw new P("imagery-layer:compute-angles","this operation is not supported on the input image service");E=p.ensureClass(Ra,E).clone();return R.computeAngles(this.url,E,this._getRequestOptions(V))}async computePixelSpaceLocations(E,V){if(!(await this._fetchCapabilities(V?.signal)).operations.supportsComputePixelLocation)throw new P("imagery-layer:compute-pixel-space-locations",
"this operation is not supported on the input image service");E=p.ensureClass(Va,E).clone();return R.computePixelSpaceLocations(this.url,E,this._getRequestOptions(V))}async computeHistograms(E,V){if(!(await this._fetchCapabilities(V?.signal)).operations.supportsComputeHistograms)throw new P("imagery-layer:compute-histograms","this operation is not supported on the input image service");E=p.ensureClass(Ka,E).clone();this._applyMosaicAndRenderingRules(E);return R.computeHistograms(this.url,E,this._getRequestOptions(V))}async computeStatisticsHistograms(E,
V){if(!(await this._fetchCapabilities(V?.signal)).operations.supportsComputeStatisticsHistograms)throw new P("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");E=p.ensureClass(Ka,E).clone();this._applyMosaicAndRenderingRules(E);return R.computeStatisticsHistograms(this.url,E,this._getRequestOptions(V))}async measureHeight(E,V){const aa=await this._fetchCapabilities(V?.signal);if(!("base-and-top"===E.operationType?aa.mensuration.supportsHeightFromBaseAndTop:
"base-and-top-shadow"===E.operationType?aa.mensuration.supportsHeightFromBaseAndTopShadow:aa.mensuration.supportsHeightFromTopAndTopShadow))throw new P("imagery-layer:measure-height","this operation is not supported on the input image service");E=p.ensureClass(Ua,E).clone();this._applyMosaicAndRenderingRules(E);return R.measureHeight(this.url,E,this._getRequestOptions(V))}async measureAreaAndPerimeter(E,V){const aa=await this._fetchCapabilities(V?.signal);if(!aa.mensuration.supportsAreaAndPerimeter||
E.is3D&&!aa.mensuration.supports3D)throw new P("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");E=p.ensureClass(Sa,E).clone();this._applyMosaicAndRenderingRules(E);return R.measureAreaAndPerimeter(this.url,E,this._getRequestOptions(V))}async measureDistanceAndAngle(E,V){const aa=await this._fetchCapabilities(V?.signal);if(!aa.mensuration.supportsDistanceAndAngle||E.is3D&&!aa.mensuration.supports3D)throw new P("imagery-layer:measure-distance-and-angle",
"this operation is not supported on the input image service");E=p.ensureClass(Ta,E).clone();this._applyMosaicAndRenderingRules(E);return R.measureDistanceAndAngle(this.url,E,this._getRequestOptions(V))}async measurePointOrCentroid(E,V){const aa=await this._fetchCapabilities(V?.signal);if(!aa.mensuration.supportsPointOrCentroid||E.is3D&&!aa.mensuration.supports3D)throw new P("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");E=p.ensureClass(Wa,E).clone();
this._applyMosaicAndRenderingRules(E);return R.measurePointOrCentroid(this.url,E,this._getRequestOptions(V))}getField(E){const {fieldsIndex:V}=this;return null!=V?V.get(E):void 0}getFieldDomain(E,V){return(E=this.getField(E))?E.domain:null}async fetchImage(E,V,aa,da={}){if(null==E||null==V||null==aa)throw new P("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){var ma=await this._generateRasterInfo(this.rasterFunction,
{signal:da.signal});ma&&(this.rasterInfo=ma)}ma=this.getExportImageServiceParameters(E,V,aa,da.timeExtent);if(null==ma){if(da.requestAsImageElement&&this._canRequestImageElement(this.format))return E=document.createElement("canvas"),E.width=V,E.height=aa,da.returnImageBitmap?{imageBitmap:await b.createBitmap(E,`${Ba(this.parsedUrl)}/exportImage`,da.signal)}:{imageOrCanvasElement:E};const {bandIds:ra,rasterInfo:oa}=this;da=(ra?.length||oa.bandCount)??0;ma=V*aa;var ja=oa.pixelType;const ua=[];for(let pa=
0;pa<da;pa++)ua.push(v.createEmptyBand(ja,ma));return{pixelData:{pixelBlock:new v({width:V,height:aa,pixels:ua,mask:new Uint8Array(ma),pixelType:ja}),extent:E}}}ja=!!da.requestAsImageElement&&!this.pixelFilter;return this._requestArrayBuffer({imageServiceParameters:ma,imageProps:{extent:E,width:V,height:aa,format:this.format},requestAsImageElement:ja,returnImageBitmap:ja&&!!da.returnImageBitmap,signal:da.signal})}fetchKeyProperties(E){return K(Ba(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=
this.version?E?.rasterFunction:null})}).then(V=>V.data)}fetchRasterAttributeTable(E){return 10.1>this.version?Promise.reject(new P("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):K(Ba(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version?E?.rasterFunction:null})}).then(V=>qa.fromJSON(V.data))}getCatalogItemRasterInfo(E,V){const aa=this._getQueryParams();V={...V,query:aa};return Qa.getCatalogItemRasterInfo(Ba(this.parsedUrl),E,V)}async getCatalogItemICSInfo(E,
V){var {data:aa}=await K(Ba(this.parsedUrl)+"/"+E+"/info/ics",{query:this._getQueryParams(),...V});if(aa=aa?.ics){var da=null;try{da=(await K(Ba(this.parsedUrl)+"/"+E+"/info",{query:this._getQueryParams(),...V})).data.extent}catch{}if(!da||!da.spatialReference)return{ics:aa,icsToPixelTransform:null,icsExtent:null,northDirection:null};var ma=10.7<=this.version?K(Ba(this.parsedUrl)+"/"+E+"/info/icstopixel",{query:this._getQueryParams(),...V}).then(va=>va.data).catch(()=>({})):{},ja=da.spatialReference,
ra={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[da]}),inSR:m.srToRESTValue(ja),outSR:"0:"+E};ra=K(Ba(this.parsedUrl)+"/project",{query:this._getQueryParams(ra),...V}).then(va=>va.data).catch(()=>({}));var oa=(da.xmin+da.xmax)/2,ua=(da.ymax-da.ymin)/6;da=da.ymin+ua;var pa=[];for(let va=0;5>va;va++)pa.push({x:oa,y:da+ua*va});E={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:pa}),inSR:m.srToRESTValue(ja),outSR:"0:"+E};V=K(Ba(this.parsedUrl)+"/project",
{query:this._getQueryParams(E),...V}).then(va=>va.data).catch(()=>({}));E=await Promise.all([ma,ra,V]);V=E[0].ipxf;null==V&&(ma=aa.geodataXform?.xf_0,"topup"===ma?.name?.toLowerCase()&&6===ma?.coefficients?.length&&(V={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:ma.coefficients,cellsizeRatio:0,type:"GeometricXform"}}));if(ma=ca.fromJSON(E[1]?.geometries?.[0]))ma.spatialReference=new La({wkid:0,imageCoordinateSystem:aa});E=E[2].geometries?E[2].geometries.filter(va=>
null!=va?.x&&null!=va.y&&"NaN"!==va.x&&"NaN"!==va.y):[];ra=E.length;if(3>ra)return{ics:aa,icsToPixelTransform:V,icsExtent:ma,northDirection:null};da=ua=oa=ja=0;for(pa=0;pa<ra;pa++)ja+=E[pa].x,oa+=E[pa].y,ua+=E[pa].x*E[pa].x,da+=E[pa].x*E[pa].y;ra=(ra*da-ja*oa)/(ra*ua-ja*ja);ja=0;oa=E[4].x>E[0].x;E=E[4].y>E[0].y;Infinity===ra?ja=E?90:270:0===ra?ja=oa?0:180:0<ra?ja=oa?180*Math.atan(ra)/Math.PI:180*Math.atan(ra)/Math.PI+180:0>ra&&(ja=E?180+180*Math.atan(ra)/Math.PI:360+180*Math.atan(ra)/Math.PI);return{ics:aa,
icsToPixelTransform:V,icsExtent:ma,northDirection:ja}}}async generateRasterInfo(E,V){E=p.ensureClass(B,E);if(this.serviceRasterInfo&&(!E||"none"===E.functionName?.toLowerCase()||this._isVectorFieldResampleFunction(E)))return this.serviceRasterInfo;const aa=Za(E);if(!aa)throw new P("imagery-layer:generate-raster-info","the rendering rule is not supported");if(this._functionRasterInfos[aa])return this._functionRasterInfos[aa];const da=this._getQueryParams();V={...V,query:da};E=Ca.generateRasterInfo(Ba(this.parsedUrl),
E,V);this._functionRasterInfos[aa]=E;try{return await E}catch(ma){throw this._functionRasterInfos[aa]=null,ma;}}getExportImageServiceParameters(E,V,aa,da){E=E.clone().shiftCentralMeridian();const ma=R.getImageSpatialReferenceQueryParameter(E.spatialReference,Ba(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const ja=this.exportImageServiceParameters.toJSON(),{bandIds:ra,noData:oa}=ja;var {renderingRule:ua}=ja,pa=this.rasterFunction?.rasterFunctionDefinition,
va=!this.renderer||"raster-stretch"===this.renderer.type;ra?.length&&this._hasRasterFunction(this.rasterFunction)&&!pa&&va?(pa={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:ra}},"Stretch"===ua.rasterFunction?(pa.rasterFunctionArguments.Raster=ua.rasterFunctionArguments.Raster,ua.rasterFunctionArguments.Raster=pa):"Colormap"===ua.rasterFunction?(va=ua.rasterFunctionArguments.Raster,"Stretch"===va?.rasterFunction?(pa.rasterFunctionArguments.Raster=va.rasterFunctionArguments.Raster,
va.rasterFunctionArguments.Raster=pa):(pa.rasterFunctionArguments.Raster=va,ua.rasterFunctionArguments.Raster=pa)):(pa.rasterFunctionArguments.Raster=ua,ua=pa),ja.bandIds=void 0):ja.bandIds=ra?.join(",");oa instanceof Array&&0<oa.length&&(ja.noData=oa.join(","));da=this._processMultidimensionalIntersection(null,da,this.exportImageServiceParameters.mosaicRule);if(da.isOutSide)return null;ja.mosaicRule=null!=da.mosaicRule?JSON.stringify(da.mosaicRule):null;da=da.timeExtent;ja.renderingRule=this._getRenderingRuleString(B.fromJSON(ua));
ua={};if(null!=da){const {start:za,end:Ga}=da.toJSON();if(za&&Ga&&za===Ga)ua.time=""+za;else if(null!=za||null!=Ga)ua.time=`${null==za?"null":za},${null==Ga?"null":Ga}`}return{bbox:E.xmin+","+E.ymin+","+E.xmax+","+E.ymax,bboxSR:ma,imageSR:ma,size:V+","+aa,...ja,...ua}}async getSamples(E,V){if(!(await this._fetchCapabilities(V?.signal))?.operations.supportsGetSamples)throw new P("imagery-layer:get-samples","getSamples operation is not supported on the input image service");E=p.ensureClass(Xa,E).clone();
const {raster:aa}=this;aa&&null==E.raster&&(E.raster=aa);return R.getSamples(this.url,E,this._getRequestOptions(V))}async identify(E,V){if(!(await this._fetchCapabilities(V?.signal)).operations.supportsIdentify)throw new P("imagery-layer:identify","identify operation is not supported on the input image service");E=p.ensureClass(Na,E).clone();10.91>this.version&&"extent"===E.geometry?.type&&(E.geometry=fa.fromExtent(E.geometry));const aa=this._processMultidimensionalIntersection(E.geometry,E.timeExtent,
E.mosaicRule||this.mosaicRule);if(aa.isOutSide)throw new P("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");E.timeExtent=aa.timeExtent;E.mosaicRule=aa.mosaicRule;const {raster:da,rasterFunction:ma}=this;ma&&null==E.rasterFunction&&(E.rasterFunction=ma);da&&null==E.raster&&(E.raster=da);return R.identify(this.url,E,this._getRequestOptions(V))}createQuery(){const E=new ta;E.outFields=["*"];E.returnGeometry=!0;E.where=this.definitionExpression||
"1\x3d1";return E}async queryRasters(E,V){({query:E,requestOptions:V}=await this._prepareForQuery(E,V));return M.executeQueryJSON(this.url,E,V)}async queryObjectIds(E,V){({query:E,requestOptions:V}=await this._prepareForQuery(E,V));return Aa.executeForIds(this.url,E,V)}async queryRasterCount(E,V){({query:E,requestOptions:V}=await this._prepareForQuery(E,V));return xa.executeForCount(this.url,E,V)}async queryVisibleRasters(E,V){if(!E)throw new P("imagery-layer: query-visible-rasters","missing query parameter");
await this.load();const {pixelSize:aa,returnDomainValues:da,returnTopmostRaster:ma,showNoDataRecords:ja}=V||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let ra=!1;var oa=null,ua=null;const pa=this._rasterFunctionNamesIndex;if(null!=E.outFields&&(ra=E.outFields.some(Fa=>!Fa.toLowerCase().includes("raster.servicepixelvalue")),10.4<=this.version)){ua=E.outFields.filter(Da=>Da.toLowerCase().includes("raster.servicepixelvalue")&&24<Da.length).map(Da=>{Da=Da.slice(25);
return[this._updateRenderingRulesFunctionName(Da,pa),Da]});oa=ua.map(Da=>new B({functionName:Da[0]}));ua=ua.map(Da=>Da[1]);const {rasterFunction:Fa}=this;0===oa.length?Fa?.functionName?(oa.push(Fa),ua.push(Fa.functionName)):oa=null:Fa?.functionName&&!oa.some(Da=>Da.functionName===Fa.functionName)&&(oa.push(Fa),ua.push(Fa.functionName))}const va=null==E.outSpatialReference||E.outSpatialReference.equals(this.spatialReference);var {multidimensionalSubset:za}=this;let Ga=E.timeExtent||this.timeExtent;
if(za){const {isOutside:Fa,intersection:Da}=G.intersectMultimensionalSubset(za,{geometry:E.geometry,timeExtent:E.timeExtent,multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(Fa)throw new P("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");null!=Da?.timeExtent&&(Ga=Da.timeExtent)}za=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,Ga);let Ha=
E.geometry;10.91>this.version&&"extent"===Ha?.type&&(Ha=fa.fromExtent(Ha));oa=this._getQueryParams({geometry:Ha,timeExtent:Ga,mosaicRule:za,rasterFunction:10.4>this.version?this.rasterFunction:null,rasterFunctions:oa,pixelSize:aa,returnCatalogItems:ra,returnGeometry:va,raster:this.raster,maxItemCount:ma?1:null});delete oa.f;oa=new Na(oa);try{await this._generateRasterInfo(this.rasterFunction);const Fa=await R.identify(this.url,oa,{signal:V?.signal,query:{...this.customParameters}}),Da=E.outFields,
bb=null!=Fa.value&&Fa.value.toLowerCase().includes("nodata");if(!ra||va||!Fa?.catalogItems?.features.length||!ja&&bb)return this._processVisibleRastersResponse(Fa,{returnDomainValues:da,templateRRFunctionNames:ua,showNoDataRecords:ja,templateFields:Da});const Ia=this.objectIdField||"ObjectId",Oa=Fa.catalogItems?.features??[],cb=Oa.map(Ja=>Ja.attributes?.[Ia]),db=new ta({objectIds:cb,returnGeometry:!0,outSpatialReference:E.outSpatialReference,outFields:[Ia]}),Pa=await this.queryRasters(db);Pa?.features?.length&&
Pa.features.forEach(Ja=>{Oa.forEach(Ma=>{Ma.attributes[Ia]===Ja.attributes[Ia]&&(Ma.geometry=new fa(Ja.geometry),null!=E.outSpatialReference&&(Ma.geometry.spatialReference=E.outSpatialReference))})});return this._processVisibleRastersResponse(Fa,{returnDomainValues:da,templateRRFunctionNames:ua,showNoDataRecords:ja,templateFields:Da})}catch{throw new P("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");}}async fetchVariableStatisticsHistograms(E,V){var aa=K(Ba(this.parsedUrl)+
"/statistics",{query:this._getQueryParams({variable:E}),signal:V}).then(da=>da.data?.statistics);E=K(Ba(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:E}),signal:V}).then(da=>da.data?.histograms);aa=await Promise.all([aa,E]);aa[0]&&aa[0].forEach(da=>{da.avg=da.mean;da.stddev=da.standardDeviation});return{statistics:aa[0]||null,histograms:aa[1]||null}}async createFlowMesh(E,V){const aa=this._rasterJobHandler.instance;return aa?aa.createFlowMesh(E,V):Ya.createFlowMesh(E.meshType,
E.simulationSettings,E.flowData,null!=V.signal?V.signal:(new AbortController).signal)}getMultidimensionalSubsetVariables(E){return G.getSubsetVariablesFromMdInfo(this.multidimensionalSubset,E??this.serviceRasterInfo.multidimensionalInfo)}async _fetchService(E){await this._fetchServiceInfo(E);this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const V=this.sourceJSON,aa=null!=this.serviceRasterInfo?Promise.resolve(this.serviceRasterInfo):Ca.fetchServiceRasterInfo(Ba(this.parsedUrl),V,{signal:E,
query:this._getQueryParams()}).then(ma=>{this._set("serviceRasterInfo",ma);this._set("multidimensionalInfo",ma.multidimensionalInfo);Ca.patchServiceInfo(ma,V);return ma});E=this._hasRasterFunction(this.rasterFunction)?this._generateRasterInfo(this.rasterFunction,{signal:E}):null;const da=this._getRasterFunctionInfos();return Promise.all([aa,E,da]).then(ma=>{ma[1]?this._set("rasterInfo",ma[1]):this._set("rasterInfo",ma[0]);ma[2]&&this._set("rasterFunctionInfos",ma[2]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&
(this._set("renderer",null),L.getLogger(this).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._set("renderer",this._configRenderer(this.renderer));this.addHandles([T.watch(()=>this.rasterFunction,ja=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this._generateRasterInfo(ja).then(ra=>{ra&&(this.rasterInfo=ra)})})]);({serviceRasterInfo:ma}=this);null!=ma.multidimensionalInfo&&this._updateMultidimensionalDefinition(ma)})}_combineMosaicRuleWithTimeExtent(E,
V){var aa=this.timeInfo,{multidimensionalInfo:da}=this.serviceRasterInfo;if(null==E||null==da||null==V||null==aa?.startField)return E;const {startField:ma}=aa,ja=da.variables.some(pa=>pa.dimensions.some(va=>va.name===ma))?ma:"StdTime";E=E.clone();if("mosaic-dataset"===this.sourceType)return E.multidimensionalDefinition=E.multidimensionalDefinition?.filter(pa=>pa.dimensionName!==ja),this._cleanupMultidimensionalDefinition(E);E.multidimensionalDefinition=E.multidimensionalDefinition||[];aa=E.multidimensionalDefinition.filter(pa=>
pa.dimensionName===ja);da=null!=V.start?V.start.getTime():null;V=null!=V.end?V.end.getTime():null;const ra=null==da||null==V||da===V,oa=ra?[da||V]:[[da,V]],ua=10.8<=this.version;aa.length?aa.forEach(pa=>{pa.dimensionName===ja&&(ua?(pa.dimensionName=null,pa.isSlice=!1,pa.values=[]):(pa.isSlice=ra,pa.values=oa))}):ua||(V=E.multidimensionalDefinition.filter(pa=>null!=pa.variableName&&null==pa.dimensionName),V.length?V.forEach(pa=>{pa.dimensionName=ja;pa.isSlice=ra;pa.values=oa}):E.multidimensionalDefinition.push(new a({variableName:"",
dimensionName:ja,isSlice:ra,values:oa})));return this._cleanupMultidimensionalDefinition(E)}_cleanupMultidimensionalDefinition(E){if(null==E)return null;E.multidimensionalDefinition&&(E.multidimensionalDefinition=E.multidimensionalDefinition.filter(V=>!(!V.variableName&&!V.dimensionName)),0===E.multidimensionalDefinition.length&&(E.multidimensionalDefinition=null));return"mosaic-dataset"!==this.sourceType&&null==E.multidimensionalDefinition?null:E}async _prepareForQuery(E,V){if(!(await this._fetchCapabilities(V?.signal)).operations.supportsQuery)throw new P("imagery-layer:query-rasters",
"query operation is not supported on the input image service");E=null!=E?p.ensureClass(ta,E):this.createQuery();V=this._getRequestOptions(V);this.raster&&(V.query={...V.query,raster:this.raster});return{query:E,requestOptions:V}}async _initJobHandler(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const E=new I;this._rasterJobHandler.connectionPromise=E.initialize().then(()=>{this._rasterJobHandler.instance=E},()=>{});await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&
this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this._cachedRendererJson=null}_isSupportedRenderer(E){const {rasterInfo:V,rasterFunction:aa}=this;return"unique-value"===E.type&&this._hasRasterFunction(aa)&&1===V?.bandCount&&["u8","s8"].includes(V.pixelType)||null!=V&&null!=E&&A.getSupportedRendererTypes(V).includes(E.type)}async _fetchCapabilities(E){if(this.capabilities)return this.capabilities;
await this._fetchServiceInfo(E);return this.capabilities}async _fetchServiceInfo(E){let V=this.sourceJSON;if(!V){const {data:aa,ssl:da}=await K(Ba(this.parsedUrl),{query:this._getQueryParams(),signal:E});this.sourceJSON=V=aa;da&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<V.capabilities?.toLowerCase().split(",").map(aa=>aa.trim()).indexOf("tilesonly"))throw new P("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(V,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(E){return E.serviceSourceType?
"esriImageServiceSourceTypeMosaicDataset"===E.serviceSourceType:0<E.fields?.length}_isMosaicRuleSupported(E){if(!E)return!1;const V=this._isMosaicDataset(E);E=10.71<=E.currentVersion&&E.hasMultidimensions&&!(1<E.fields?.length);return V||E}_isVectorFieldResampleFunction(E){if(null==E)return!1;const {functionName:V,functionArguments:aa}=E;E="resample"===V?.toLowerCase();const da=aa?.ResampleType||aa?.resampleType;return E&&(7===da||10===da)}_isPicture(){return!this.format||this.format.includes("jpg")||
this.format.includes("png")}_configRenderer(E){var V=this._isPicture();const {rasterInfo:aa}=this;if(!V&&!this.pixelFilter||this._isVectorDataSet())!this.bandIds&&3<=aa.bandCount&&(!(V=A.getDefaultBandCombination(aa))||3===aa.bandCount&&0===V[0]&&1===V[1]&&2===V[2]||(this.bandIds=V)),E||(E=A.createDefaultRenderer(aa,{bandIds:this.bandIds,variableName:this.rasterFunction?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName})),V=A.normalizeRendererJSON(E.toJSON()),this.symbolizer?(this.symbolizer.rendererJSON=
V,this.symbolizer.rasterInfo=aa):this.symbolizer=new J({rendererJSON:V,rasterInfo:aa}),this.symbolizer.bind().success||(this.symbolizer=null);return E}_clonePixelData(E){return null==E?E:{extent:E.extent&&E.extent.clone(),pixelBlock:null!=E.pixelBlock?E.pixelBlock.clone():null}}_getQueryParams(E){null!=E?.renderingRule&&"string"!==typeof E.renderingRule&&(E.renderingRule=this._getRenderingRuleString(E.renderingRule));const {raster:V,viewId:aa}=this;return{raster:V,viewId:aa,f:"json",...E,...this.customParameters}}_getRequestOptions(E){return{...E,
query:{...E?.query,...this.customParameters}}}_decodePixelBlock(E,V,aa){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:E,options:V}):N.decode(E,V,aa)}async _getRasterFunctionInfos(E){const V=this.sourceJSON.rasterFunctionInfos;return this.loaded?V:V&&10.3<=this.version?1===V.length&&"none"===V[0].name.toLowerCase()?V:(await K(Ba(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:E})).data?.rasterFunctionInfos:null}_canRequestImageElement(E){return!this.pixelFilter&&
(!E||E.includes("png"))}async _requestArrayBuffer(E){const {imageProps:V,requestAsImageElement:aa,returnImageBitmap:da,signal:ma}=E;if(aa&&this._canRequestImageElement(V.format)){var ja=`${Ba(this.parsedUrl)}/exportImage`;({data:E}=await K(ja,{responseType:da?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...E.imageServiceParameters}),signal:ma}));return E instanceof Blob?{imageBitmap:await b.createBitmap(E,ja,ma),params:V}:{imageOrCanvasElement:E,params:V}}ja=this._initJobHandler();
E=K(Ba(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...E.imageServiceParameters}),signal:ma});E=(await Promise.all([E,ja]))[0].data;var ra=ja=V.format||"jpgpng";"bsq"!==ra&&"bip"!==ra&&(ra=N.getFormat(E));if(!ra)throw new P("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(E)));ra="gif"===ja||"bmp"===ja||ja.includes("png")&&("png"===ra||"jpg"===ra);const oa={signal:ma};return{pixelData:{pixelBlock:await (ra?
N.decode(E,{useCanvas:!0,...V},oa):this._decodePixelBlock(E,{width:V.width,height:V.height,planes:null,pixelType:null,noDataValue:null,format:ja},oa)),extent:V.extent},params:V}}_generateRasterInfo(E,V){return this.generateRasterInfo(E,V).catch(()=>null)}_isValidCustomizedMosaicRule(E){return E&&JSON.stringify(E.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(E){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)&&(E=G.getDefaultMultidimensionalDefinition(E,
{multidimensionalSubset:this.multidimensionalSubset}),null!=E&&0<E.length)){this.mosaicRule=this.mosaicRule||new t;const V=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.rasterFunction&&"none"!==this.rasterFunction.functionName?.toLowerCase()&&E.forEach(aa=>aa.variableName="");E=E.filter(({variableName:aa,dimensionName:da})=>aa&&"*"!==aa||da);!V?.length&&E.length&&(this.mosaicRule.multidimensionalDefinition=E)}}_processVisibleRastersResponse(E,V){V=V||{};const aa=
E.value,{templateRRFunctionNames:da,showNoDataRecords:ma,returnDomainValues:ja,templateFields:ra}=V;V=E.processedValues;var oa=E.catalogItems?.features;let ua=E.properties?.Values?.map(Ha=>Ha.replaceAll(/ /gi,", "))||[];var pa=this.objectIdField||"ObjectId",va="string"===typeof aa&&aa.toLowerCase().includes("nodata");E=[];!aa||oa||va||(oa={},oa[pa]=0,oa=new D(this.fullExtent,null,oa),ua=[aa],oa=[oa]);if(!oa)return[];this._updateResponseFieldNames(oa,ra);va&&!ma&&(oa=[]);for(pa=0;pa<oa.length;pa++){va=
oa[pa];if(null!=aa){var za=ua[pa];var Ga=this.rasterFunction&&V&&0<V.length&&da&&0<da.length&&da.includes(this.rasterFunction.functionName)?V[da.indexOf(this.rasterFunction.functionName)]:aa;if("nodata"===za.toLowerCase()&&!ma)continue;va.attributes["Raster.ItemPixelValue"]=za;va.attributes["Raster.ServicePixelValue"]=Ga;this._updateFeatureWithMagDirValues(va,za);const Ha=this.fields&&0<this.fields.length;Ga=this.rasterFunction&&null!=this.serviceRasterInfo.attributeTable?Ha?za:aa:Ga;this.rasterFunction||
(Ga=Ha?za:aa);this._updateFeatureWithRasterAttributeTableValues(va,Ga)}va.sourceLayer=va.layer=this;ja&&this._updateFeatureWithDomainValues(va);if(da&&V&&da.length===V.length)for(za=0;za<da.length;za++)va.attributes["Raster.ServicePixelValue."+da[za]]=V[za];E.push(oa[pa])}return E}_processMultidimensionalIntersection(E,V,aa){const {multidimensionalSubset:da}=this;if(!da)return aa=this._combineMosaicRuleWithTimeExtent(aa,V),{isOutSide:!1,timeExtent:V,mosaicRule:aa};if(da){const {isOutside:ma,intersection:ja}=
G.intersectMultimensionalSubset(da,{geometry:E,timeExtent:V});if(ma)return{isOutSide:!0,timeExtent:null,mosaicRule:null};null!=ja?.timeExtent&&(V=ja.timeExtent)}aa=this._combineMosaicRuleWithTimeExtent(aa,V);return aa?.multidimensionalDefinition&&({isOutside:E}=G.intersectMultimensionalSubset(da,{multidimensionalDefinition:aa.multidimensionalDefinition}),E)?{isOutSide:!0,timeExtent:null,mosaicRule:null}:{isOutSide:!1,timeExtent:V,mosaicRule:aa}}_updateFeatureWithRasterAttributeTableValues(E,V){const aa=
this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(null!=aa){var {features:da,fields:ma}=aa,ja=ma.map(oa=>oa.name).find(oa=>"value"===oa.toLowerCase());if(ja){var ra=da.filter(oa=>oa.attributes[ja]===(null!=V?parseInt(V,10):null));ra&&ra[0]&&ma.forEach(oa=>{E.attributes[this._rasterAttributeTableFieldPrefix+oa.name]=ra[0].attributes[oa.name]})}}}_updateFeatureWithMagDirValues(E,V){if(this._isVectorDataSet()){var aa=V.split(/,\s*/).map(da=>parseFloat(da));V=aa.map(da=>[da]);aa=
aa.map(da=>({minValue:da,maxValue:da,noDataValue:null}));V=new v({height:1,width:1,pixelType:"f32",pixels:V,statistics:aa});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:V,extent:new ca(0,0,0,0,this.spatialReference)});V="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[V.pixels[0][0],V.pixels[1][0]]:z.uvComponentToVector([V.pixels[0][0],V.pixels[1][0]]);E.attributes["Raster.Magnitude"]=V[0];E.attributes["Raster.Direction"]=V[1]}}_updateFeatureWithDomainValues(E){const V=this.fields&&
this.fields.filter(aa=>aa.domain&&"coded-value"===aa.domain.type);null!=V&&V.forEach(aa=>{const da=E.attributes[aa.name];if(null!=da){const ma=aa.domain.codedValues.find(ja=>ja.code===da);ma&&(E.attributes[aa.name]=ma.name)}})}_updateResponseFieldNames(E,V){if(V&&!(1>V.length)){var aa=this.fieldsIndex;null!=aa&&E.forEach(da=>{if(da?.attributes)for(const ma of V){const ja=aa.get(ma)?.name;ja&&ja!==ma&&(da.attributes[ma]=da.attributes[ja],delete da.attributes[ja])}})}}_getRenderingRuleString(E){if(E){E=
E.toJSON();E=E.rasterFunctionDefinition??E;if(E.thumbnail||E.thumbnailEx)E.thumbnail=E.thumbnailEx=null;return JSON.stringify(E)}return null}_hasRasterFunction(E){return null!=E?.functionName&&"none"!==E.functionName.toLowerCase()}_updateRenderingRulesFunctionName(E,V){if(E&&!(1>E.length)){if("Raw"===E)return E.replace("Raw","None");var aa=E.toLowerCase().replaceAll(/ /gi,"_");return V.has(aa)?V.get(aa):E}}_isRFTJson(E){return E?.name&&E.arguments&&E.function&&E.hasOwnProperty("functionType")}_isVectorDataSet(){return"esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType}_applyMosaicAndRenderingRules(E){const {raster:V,mosaicRule:aa,rasterFunction:da}=this;da&&E instanceof Ka&&null==E.rasterFunction&&(E.rasterFunction=da);aa&&null==E.mosaicRule&&(E.mosaicRule=aa);V&&null==E.raster&&(E.raster=V)}_readCapabilities(E){const V=E.capabilities?E.capabilities.toLowerCase().split(",").map(za=>za.trim()):["image","catalog"],{currentVersion:aa,advancedQueryCapabilities:da,maxRecordCount:ma}=
E,ja=V.includes("image"),ra="esriImageServiceDataTypeElevation"===E.serviceDataType;var oa=!(!E.spatialReference&&!E.extent?.spatialReference);const ua=V.includes("edit");oa=V.includes("mensuration")&&oa;const pa=null==E.mensurationCapabilities?[]:E.mensurationCapabilities.toLowerCase().split(",").map(za=>za.trim()),va=oa&&pa.includes("basic");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:ja,supportsExportImage:ja,supportsIdentify:ja,supportsMeasure:oa,supportsDownload:V.includes("download"),
supportsQuery:V.includes("catalog")&&E.fields&&0<E.fields.length,supportsGetSamples:10.2<=aa&&ja,supportsProject:10.3<=aa&&ja,supportsComputeStatisticsHistograms:10.4<=aa&&ja,supportsQueryBoundary:10.6<=aa&&ja,supportsCalculateVolume:10.7<=aa&&ra,supportsComputePixelLocation:10.7<=aa&&V.includes("catalog"),supportsComputeAngles:10.91<=aa,supportsAdd:ua,supportsDelete:ua,supportsEditing:ua,supportsUpdate:ua,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,
supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:ma,maxRecordCountFactor:void 0,supportsStatistics:!!da?.supportsStatistics,supportsOrderBy:!!da?.supportsOrderBy,supportsDistinct:!!da?.supportsDistinct,supportsPagination:!!da?.supportsPagination,supportsStandardizedQueriesOnly:!!da?.useStandardizedQueries,supportsPercentileStatistics:!!da?.supportsPercentileStatistics,
supportsCentroid:!!da?.supportsReturningGeometryCentroid,supportsDistance:!!da?.supportsQueryWithDistance,supportsExtent:!!da?.supportsReturningQueryExtent,supportsGeometryProperties:!!da?.supportsReturningGeometryProperties,supportsHavingClause:!!da?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,
supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!da?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:va,supportsAreaAndPerimeter:va,supportsPointOrCentroid:va,supportsHeightFromBaseAndTop:oa&&
pa.includes("base-top height"),supportsHeightFromBaseAndTopShadow:oa&&pa.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:oa&&pa.includes("top-top shadow height"),supports3D:oa&&pa.includes("3d")}}}};u.__decorate([g.property({clonable:!1})],la.prototype,"_functionRasterInfos",void 0);u.__decorate([g.property({clonable:!1})],la.prototype,"_rasterJobHandler",void 0);u.__decorate([g.property({clonable:!1})],la.prototype,"_cachedRendererJson",void 0);u.__decorate([g.property({readOnly:!0})],
la.prototype,"_serviceSupportsMosaicRule",void 0);u.__decorate([q.reader("_serviceSupportsMosaicRule",["currentVersion","fields"])],la.prototype,"readServiceSupportsMosaicRule",null);u.__decorate([g.property({readOnly:!0})],la.prototype,"_rasterAttributeTableFieldPrefix",void 0);u.__decorate([g.property({readOnly:!0})],la.prototype,"_rasterFunctionNamesIndex",null);u.__decorate([g.property()],la.prototype,"adjustAspectRatio",void 0);u.__decorate([g.property({type:[p.Integer],json:{write:!0}})],la.prototype,
"bandIds",void 0);u.__decorate([q.reader("bandIds")],la.prototype,"readBandIds",null);u.__decorate([g.property({readOnly:!0,json:{read:!1}})],la.prototype,"capabilities",void 0);u.__decorate([q.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],la.prototype,"readCapabilities",null);u.__decorate([g.property({type:Number})],la.prototype,"compressionQuality",void 0);u.__decorate([e.writer("compressionQuality")],la.prototype,"writeCompressionQuality",null);u.__decorate([g.property({type:Number})],
la.prototype,"compressionTolerance",void 0);u.__decorate([e.writer("compressionTolerance")],la.prototype,"writeCompressionTolerance",null);u.__decorate([g.property({json:{read:{source:"copyrightText"}}})],la.prototype,"copyright",void 0);u.__decorate([g.property({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],la.prototype,"defaultMosaicRule",void 0);u.__decorate([q.reader("defaultMosaicRule",["defaultMosaicMethod"])],la.prototype,"readDefaultMosaicRule",null);u.__decorate([g.property({type:String,
json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],la.prototype,"definitionExpression",void 0);u.__decorate([g.property({readOnly:!0,constructOnly:!0})],la.prototype,"exportImageServiceParameters",void 0);u.__decorate([g.property()],la.prototype,"rasterInfo",void 0);u.__decorate([g.property({readOnly:!0,type:[c]})],la.prototype,"fields",void 0);u.__decorate([g.property({readOnly:!0})],la.prototype,"fieldsIndex",null);u.__decorate([g.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),
json:{write:!0}})],la.prototype,"format",null);u.__decorate([q.reader("service","format",["serviceDataType"])],la.prototype,"readFormat",null);u.__decorate([g.property({type:ca})],la.prototype,"fullExtent",void 0);u.__decorate([g.property({readOnly:!0})],la.prototype,"hasMultidimensions",void 0);u.__decorate([g.property({json:{read:{source:"maxImageHeight"}}})],la.prototype,"imageMaxHeight",void 0);u.__decorate([g.property({json:{read:{source:"maxImageWidth"}}})],la.prototype,"imageMaxWidth",void 0);
u.__decorate([g.property({type:String,json:{type:w.interpolationKebab.jsonValues,read:w.interpolationKebab.read,write:w.interpolationKebab.write}})],la.prototype,"interpolation",void 0);u.__decorate([g.property()],la.prototype,"minScale",void 0);u.__decorate([q.reader("service","minScale")],la.prototype,"readMinScale",null);u.__decorate([g.property()],la.prototype,"maxScale",void 0);u.__decorate([q.reader("service","maxScale")],la.prototype,"readMaxScale",null);u.__decorate([g.property({type:t})],
la.prototype,"mosaicRule",null);u.__decorate([q.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],la.prototype,"readMosaicRule",null);u.__decorate([e.writer("mosaicRule")],la.prototype,"writeMosaicRule",null);u.__decorate([g.property()],la.prototype,"multidimensionalInfo",void 0);u.__decorate([g.property({type:y,json:{write:!0}})],la.prototype,"multidimensionalSubset",void 0);u.__decorate([g.property({json:{type:p.Integer}})],la.prototype,"noData",void 0);u.__decorate([e.writer("noData")],
la.prototype,"writeNoData",null);u.__decorate([g.property({type:String,json:{type:w.noDataInterpretationKebab.jsonValues,read:w.noDataInterpretationKebab.read,write:w.noDataInterpretationKebab.write}})],la.prototype,"noDataInterpretation",void 0);u.__decorate([g.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],la.prototype,"objectIdField",void 0);u.__decorate([q.reader("objectIdField")],la.prototype,"readObjectIdField",null);u.__decorate([g.property({readOnly:!0})],la.prototype,
"geometryType",void 0);u.__decorate([g.property({})],la.prototype,"typeIdField",void 0);u.__decorate([g.property({})],la.prototype,"types",void 0);u.__decorate([g.property({readOnly:!0})],la.prototype,"parsedUrl",null);u.__decorate([g.property({type:Function})],la.prototype,"pixelFilter",void 0);u.__decorate([g.property()],la.prototype,"raster",void 0);u.__decorate([g.property({readOnly:!0})],la.prototype,"sourceType",void 0);u.__decorate([q.reader("sourceType",["serviceSourceType","fields"])],la.prototype,
"readSourceType",null);u.__decorate([g.property()],la.prototype,"viewId",void 0);u.__decorate([g.property({types:x.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:x.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(E){return{enabled:E&&"vector-field"!==E.type&&"flow"!==E.type}}}}}}})],la.prototype,"renderer",null);u.__decorate([q.reader("renderer")],la.prototype,"readRenderer",null);u.__decorate([e.writer("renderer")],
la.prototype,"writeRenderer",null);u.__decorate([g.property({clonable:!1})],la.prototype,"symbolizer",void 0);u.__decorate([g.property(r.opacity)],la.prototype,"opacity",void 0);u.__decorate([g.property({readOnly:!0})],la.prototype,"rasterFields",null);u.__decorate([g.property({constructOnly:!0})],la.prototype,"rasterFunctionInfos",void 0);u.__decorate([g.property({type:B})],la.prototype,"renderingRule",null);u.__decorate([g.property({type:B,json:{name:"renderingRule"}})],la.prototype,"rasterFunction",
null);u.__decorate([q.reader("rasterFunction",["renderingRule","rasterFunctionInfos"])],la.prototype,"readRasterFunction",null);u.__decorate([g.property({readOnly:!0})],la.prototype,"serviceDataType",void 0);u.__decorate([g.property({readOnly:!0,type:La})],la.prototype,"spatialReference",void 0);u.__decorate([q.reader("spatialReference",["spatialReference","extent"])],la.prototype,"readSpatialReference",null);u.__decorate([g.property({json:{type:w.pixelTypeKebabDict.jsonValues}})],la.prototype,"pixelType",
void 0);u.__decorate([q.reader("pixelType")],la.prototype,"readPixelType",null);u.__decorate([e.writer("pixelType")],la.prototype,"writePixelType",null);u.__decorate([g.property({constructOnly:!0,type:F})],la.prototype,"serviceRasterInfo",void 0);u.__decorate([g.property()],la.prototype,"sourceJSON",void 0);u.__decorate([g.property(r.url)],la.prototype,"url",void 0);u.__decorate([g.property({readOnly:!0})],la.prototype,"version",void 0);u.__decorate([q.reader("version",["currentVersion","fields",
"timeInfo"])],la.prototype,"readVersion",null);return la=u.__decorate([n.subclass("esri.layers.mixins.ArcGISImageService")],la)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/FlowRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(l,
u,C,D,x,K,Q,P,U){function L(p,q){if(!p)return null;if("classBreaks"===p.type&&p.classificationMethod){var n=p.authoringInfo||{classificationMethod:""};n.classificationMethod=p.classificationMethod;p.authoringInfo=n}"vectorField"===p.type&&p.visualVariables&&!Array.isArray(p.visualVariables)&&(p.visualVariables=[p.visualVariables]);n=p?g[p.type]||null:null;if(n)return n=new n,n.read(p,q),n;q?.messages&&p&&q.messages.push(new u("renderer:unsupported","Renderers of type '"+(p.type||"unknown")+"' are not supported",
{definition:p,context:q}));return null}const T={key:"type",base:null,typeMap:{"unique-value":P,"class-breaks":C,"raster-colormap":x,"raster-stretch":Q,"vector-field":U,"raster-shaded-relief":K,flow:D}},d={...T,typeMap:{...T.typeMap}};delete d.typeMap["vector-field"];delete d.typeMap.flow;const g={uniqueValue:P,classBreaks:C,rasterStretch:Q,rasterColormap:x,vectorField:U,rasterShadedRelief:K,flowRenderer:D};l.ClassBreaksRenderer=C;l.FlowRenderer=D;l.RasterColormapRenderer=x;l.RasterShadedReliefRenderer=
K;l.RasterStretchRenderer=Q;l.UniqueValueRenderer=P;l.VectorFieldRenderer=U;l.fromJSON=function(p,q){return L(p,q)};l.rasterRendererTypes=T;l.read=L;l.websceneRasterRendererTypes=d;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/FlowRenderer":function(){define("../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./mixins/VisualVariablesMixin ./support/AuthoringInfo ./support/LegendOptions".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g,p){var q;C=new C.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});D=q=class extends d.VisualVariablesMixin(D.JSONSupport){constructor(n){super(n);this.density=.8;this.color=new u([255,255,255,1]);this.maxPathLength=200;this.trailWidth=1.5;this.flowSpeed=10;this.trailLength=100;this.smoothing=0;this.flowRepresentation="flow-from";this.type="flow";this.legendOptions=this.authoringInfo=null;this.trailCap="butt";this.background="none"}clone(){const {density:n,maxPathLength:e,
trailWidth:m,flowSpeed:r,trailLength:a,smoothing:k,flowRepresentation:c,trailCap:h,background:b}=this,f=this.color.clone(),t=(this.visualVariables||[]).map(w=>w.clone()),y=this.authoringInfo?.clone(),v=this.legendOptions?.clone();return new q({density:n,color:f,maxPathLength:e,trailWidth:m,flowSpeed:r,trailLength:a,trailCap:h,background:b,smoothing:k,flowRepresentation:c,visualVariables:t,authoringInfo:y,legendOptions:v})}getSymbol(n,e){}async getSymbolAsync(n,e){}getSymbols(){return[]}};l.__decorate([K.property({type:Number,
json:{write:!0}})],D.prototype,"density",void 0);l.__decorate([K.property({type:u,json:{write:{allowNull:!0}}})],D.prototype,"color",void 0);l.__decorate([K.property({type:Number,cast:x.toPt,json:{write:!0}})],D.prototype,"maxPathLength",void 0);l.__decorate([K.property({type:Number,cast:x.toPt,json:{write:!0}})],D.prototype,"trailWidth",void 0);l.__decorate([K.property({type:Number,json:{write:!0}})],D.prototype,"flowSpeed",void 0);l.__decorate([K.property({type:Number,json:{write:!0}})],D.prototype,
"trailLength",void 0);l.__decorate([K.property({type:Number,cast:x.toPt,json:{write:!1}})],D.prototype,"smoothing",void 0);l.__decorate([K.property({type:C.apiValues,json:{type:C.jsonValues,read:{reader:C.read},write:{writer:C.write}}})],D.prototype,"flowRepresentation",void 0);l.__decorate([L.enumeration({flowRenderer:"flow"})],D.prototype,"type",void 0);l.__decorate([K.property({type:g,json:{write:!0}})],D.prototype,"authoringInfo",void 0);l.__decorate([K.property({type:p.LegendOptions,json:{write:!0}})],
D.prototype,"legendOptions",void 0);l.__decorate([K.property({type:String,json:{write:!0}})],D.prototype,"trailCap",void 0);l.__decorate([K.property({type:String,json:{write:!0}})],D.prototype,"background",void 0);return D=q=l.__decorate([T.subclass("esri.renderers.FlowRenderer")],D)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(l,u,C,D,x,K,Q,P,U,L){var T;u=T=class extends u.JSONSupport{constructor(d){super(d);this.colormapInfos=null;this.type="raster-colormap"}static createFromColormap(d,g){if(!d)return null;const p=5===d[0].length;d=[...d].sort((q,n)=>q[0]-n[0]).map(q=>U.fromJSON({value:q[0],color:p?q.slice(1,5):q.slice(1,4).concat([255]),label:g?g[q[0]]??"":q[0]}));return new T({colormapInfos:d})}static createFromColorramp(d){d=L.convertColorRampToColormap(d);return T.createFromColormap(d)}clone(){return new T({colormapInfos:this.colormapInfos.map(d=>
d.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:d,color:g})=>[d,g.r,g.g,g.b,1<g.a?g.a:255*g.a&255]).sort((d,g)=>d[0]-g[0])}};l.__decorate([C.property({type:[U],json:{write:!0}})],u.prototype,"colormapInfos",void 0);l.__decorate([Q.enumeration({rasterColormap:"raster-colormap"})],u.prototype,"type",void 0);return u=T=l.__decorate([P.subclass("esri.renderers.RasterColormapRenderer")],u)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,u,C,D,x,K,Q,P){C=class extends C.JSONSupport{constructor(){super(...arguments);this.color=this.label=this.value=null}};l.__decorate([D.property({type:Number,json:{write:!0}})],C.prototype,"value",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],C.prototype,"label",void 0);l.__decorate([D.property({type:u,json:{type:[x.Integer],write:!0}})],C.prototype,"color",void 0);return C=l.__decorate([P.subclass("esri.renderers.support.ColormapInfo")],C)})},"esri/renderers/support/colorRampUtils":function(){define(["exports",
"../../Color","../../core/colorUtils","../../core/jsonMap","../../core/JSONSupport"],function(l,u,C,D,x){function K(a,k){if(!a||!k||a.length!==k.length)return!1;for(let c=0;c<a.length;c++)if(a[c]>k[c]+2||a[c]<k[c]-2)return!1;return!0}function Q(a){const k=a.clone();k.fromColor=a.toColor;k.toColor=a.fromColor;k.algorithm=a.algorithm;return k}function P(a){if("multipart"===a.type){a=a.clone();if(!a.colorRamps?.length)return a;a.colorRamps=a.colorRamps.reverse().map(k=>Q(k));return a}return Q(a)}function U(a,
k){if(a){k=k??m;var c=null;"algorithmic"===a.type?k.some(h=>{if(K(a.fromColor.toRgb(),h.fromColor)&&K(a.toColor.toRgb(),h.toColor))return c=h.id,!0}):"multipart"===a.type&&k.some(h=>{const b=a.colorRamps,f=h.colorRamps;if(b&&f&&b.length===f.length&&!f.some((t,y)=>{if(!K(b[y].fromColor.toRgb(),(new u(t.fromColor)).toRgb())||!K(b[y].toColor.toRgb(),(new u(t.toColor)).toRgb()))return!0})){if(c)return!0;c=h.id}});return c}}function L(a,k,c=!1){if(a){var h=U(a,k);null!=h||c||(a=P(a),h=U(a,k));return h}}
function T(a,k=!1){return(a="string"===typeof a?a:L(a,void 0,k))?r.toJSON(a):null}function d(a){a=a||{};const k=a.numColors||256;return{...a,numColors:k,distanceOffset:a.distanceOffset||0,interpolateAlpha:!!a.interpolateAlpha,distanceInterval:a.distanceInterval||1/(k-1),isCustomInterval:null!=a.isCustomInterval?a.isCustomInterval:null!==a.distanceInterval&&a.distanceInterval!==1/(k-1),weights:a.weights}}function g(a,k){let {fromColor:c,toColor:h}=a;c=[...c];h=[...h];3===c.length&&(c=c.concat([255]));
3===h.length&&(h=h.concat([255]));a=a.algorithm||"esriCIELabAlgorithm";var b=d(k);const {numColors:f,distanceOffset:t,isCustomInterval:y,interpolateAlpha:v}=b;if(1===f&&0===t)return[c];if(2===f&&0===t&&!y)return[c,h];var w={r:c[0],g:c[1],b:c[2]};k={r:h[0],g:h[1],b:h[2]};if("esriCIELabAlgorithm"===a){a=C.toLAB(w);k=C.toLAB(k);const {numColors:G,distanceOffset:N,distanceInterval:z,isCustomInterval:A}=b;let {l:J,a:R,b:H}=a;a=(k.l-J)*z;w=(k.a-R)*z;b=(k.b-H)*z;var B=[];if(N){var F=N/z;J+=F*a;R+=F*w;H+=
F*b}for(F=0;F<G-1;F++)B.push({l:J,a:R,b:H}),J+=a,R+=w,H+=b;B.push(A?{l:J,a:R,b:H}:k);k=B}else if("esriHSVAlgorithm"===a){a=C.toHSV(w);k=C.toHSV(k);const {numColors:G,distanceOffset:N,distanceInterval:z,isCustomInterval:A}=b;B=0===a.s;F=0===k.s;w=a.h;b=k.h;B&&!F?w=b:F&&!B&&(k={...k,h:w},b=w);B=Math.abs(b-w);180>B?b=(b-w)*z:(B=360-B,b=w>b?B*z:-B*z);B=(k.s-a.s)*z;F=(k.v-a.v)*z;let {s:J,v:R}=a;a=w;N&&(w=N/z,a=(a+w*b+360)%360,J+=w*B,R+=w*F);w=[];for(var I=0;I<G-1;I++)w.push({h:a,s:J,v:R}),a=(a+b+360)%
360,J+=B,R+=F;w.push(A?{h:a,s:J,v:R}:k);k=w}else{w=C.toLCH(w);k=C.toLCH(k);const {numColors:G,distanceOffset:N,distanceInterval:z,isCustomInterval:A}=b;b=w.h;B=k.h;a=2*Math.PI;b<=B?(F=B-b,b=B-b-a,b=Math.abs(b)<Math.abs(F)?b:F):(F=B+a-b,b=B-b,b=Math.abs(b)<Math.abs(F)?b:F);b*=z;B=(k.l-w.l)*z;F=(k.c-w.c)*z;let {l:J,c:R,h:H}=w;N&&(w=N/z,J+=w*B,R+=w*F,H=(H+w*b+a)%a);w=[];for(I=0;I<G-1;I++)w.push({l:J,c:R,h:H}),J+=B,R+=F,H=(H+b+a)%a;w.push(A?{l:J,c:R,h:H}:k);k=w}a=[];w=c[3]??255;b=((h[3]??255)-w)/(f-1);
for(B=0;B<f;B++){const {r:G,g:N,b:z}=C.toRGB(k[B]);a.push([G,N,z,v?Math.round(w+b*B):255])}return a}function p(a,k){const {numColors:c,interpolateAlpha:h}=d(k);k=k?.weights;({colorRamps:a}=a);if(k){const B=k.reduce((F,I)=>F+I);k=k.map(F=>F/B)}else{k=[];for(var b=0;b<a.length;b++)k[b]=1/a.length}b=[];let f=0,t=0;const y=1/(c-1);let v=!1;for(let B=0;B<a.length;B++){var w=v?0:f*y-t;let F=B===a.length-1?c-1-f:(k[B]-w)/y;v=Math.ceil(F)===F;F=Math.ceil(F);0!==F&&(w/=k[B],w=g(a[B],{numColors:F,interpolateAlpha:h,
distanceOffset:w,distanceInterval:y/k[B]}),f+=w.length,b.push(...w),t+=k[B])}k=[...a[a.length-1].toColor];3===k.length&&k.push(255);b.push(k);return b}function q(a,k){a=x.isSerializable(a)?a.toJSON():a;return"multipart"===a.type?p(a,k):g(a,k)}function n(a){a=C.toHSV(a);return{type:"HsvColor",Hue:a.h,Saturation:a.s,Value:a.v,AlphaValue:255}}function e(a){return{Algorithm:a.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:n(a.fromColor),ToColor:n(a.toColor)}}const m=[{id:"aspect",
type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",
fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",
type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",
type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},
{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,
181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,
118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,
80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",
type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,
250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",
fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",
type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,
204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,
153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",
type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,
167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],r=new D.JSONMap({Aspect:"aspect","Black to White":"black-to-white",
"Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple",
"Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging",
"Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright",
"Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",
Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});l.colorRampDict=r;l.convertColorRampToColormap=function(a,k){a=q(a,k);const c=k?.interpolateAlpha;a.forEach((h,b)=>{h.unshift(b);c||h.pop()});return a};l.convertColorRampToColors=q;l.convertRGBATo32Bit=
function(a){a=a.reverse().map(k=>{k=k.toString(16);return 2>k.length?"0"+k:k});return 4294967295&Number.parseInt(a.join(""),16)};l.getColorRampId=L;l.getColorRampJSON=function(a,k="esriCIELabAlgorithm"){const c=m.find(({id:h})=>h===a);return c?c.colorRamps?{type:"multipart",colorRamps:c.colorRamps.map(h=>({type:"algorithmic",algorithm:k,fromColor:[...h.fromColor],toColor:[...h.toColor]}))}:{type:"algorithmic",algorithm:k,fromColor:[...c.fromColor],toColor:[...c.toColor]}:null};l.getColorRampName=
T;l.getRFxArgColorRampValue=function(a){const k=T(a);return k?"algorithmic"===a.type?{...e(a),Name:k}:a.colorRamps?(a=a.colorRamps.map(e),{type:"MultiPartColorRamp",NumColorRamps:a.length,ArrayOfColorRamp:a,Name:k}):null:null};l.predefinedJsonColorRamps=m;l.rasterColormapNames="random ndvi ndvi2 ndvi3 elevation gray hillshade".split(" ");Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports","../Color","../chunks/vec4","../chunks/vec4f64"],
function(l,u,C,D){function x(e,m){const r=[];let a,k;if(e[0].length!==m.length)throw Error("dimensions do not match");const c=e.length,h=e[0].length;let b=0;for(a=0;a<c;a++){for(k=b=0;k<h;k++)b+=e[a][k]*m[k];r.push(b)}return r}function K(e){e=[e.r/255,e.g/255,e.b/255].map(m=>.04045>=m?m/12.92:((m+.055)/1.055)**2.4);e=x(q,e);return{x:100*e[0],y:100*e[1],z:100*e[2]}}function Q(e){e=x(n,[e.x/100,e.y/100,e.z/100]).map(m=>Math.min(1,Math.max(.0031308>=m?12.92*m:1.055*m**(1/2.4)-.055,0)));return{r:Math.round(255*
e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function P(e){e=[e.x/95.047,e.y/100,e.z/108.883].map(m=>m>(6/29)**3?m**(1/3):1/3*(29/6)**2*m+4/29);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function U(e){const m=e.l;e=[(m+16)/116+e.a/500,(m+16)/116,(m+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*e[0],y:100*e[1],z:108.883*e[2]}}function L(e){if("r"in e&&"g"in e&&"b"in e)return e;if("l"in e&&"c"in e&&"h"in e){var m=e.c,r=e.h;return Q(U({l:e.l,a:m*Math.cos(r),
b:m*Math.sin(r)}))}if("l"in e&&"a"in e&&"b"in e)return Q(U(e));if("x"in e&&"y"in e&&"z"in e)return Q(e);if("h"in e&&"s"in e&&"v"in e){r=(e.h+360)%360/60;m=e.v/100*255;e=e.s/100*m;const a=e*(1-Math.abs(r%2-1));switch(Math.floor(r)){case 0:r={r:e,g:a,b:0};break;case 1:r={r:a,g:e,b:0};break;case 2:r={r:0,g:e,b:a};break;case 3:r={r:0,g:a,b:e};break;case 4:r={r:a,g:0,b:e};break;case 5:case 6:r={r:e,g:0,b:a};break;default:r={r:0,g:0,b:0}}r.r=Math.round(r.r+m-e);r.g=Math.round(r.g+m-e);r.b=Math.round(r.b+
m-e);return r}return e}function T(e){if("h"in e&&"s"in e&&"v"in e)return e;var m=L(e);e=m.r;const r=m.g,a=m.b;m=Math.max(e,r,a);const k=m-Math.min(e,r,a);e=0===k?0:m===e?(r-a)/k%6:m===r?(a-e)/k+2:(e-r)/k+4;0>e&&(e+=6);return{h:60*e,s:100*(0===k?0:k/m),v:100/255*m}}function d(e){return"l"in e&&"a"in e&&"b"in e?e:P(K(L(e)))}function g(e){let {r:m,g:r,b:a,a:k}=e;1>k&&(m=Math.round(k*m+255*(1-k)),r=Math.round(k*r+255*(1-k)),a=Math.round(k*a+255*(1-k)));return new u({r:m,g:r,b:a})}function p(e,m){const {r,
g:a,b:k}=m?.ignoreAlpha?e:g(e);return.2126*r+.7152*a+.0722*k}const q=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],n=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];l.BrightnessThreshold=void 0;(function(e){e[e.Low=160]="Low";e[e.High=225]="High"})(l.BrightnessThreshold||(l.BrightnessThreshold={}));l.colorEquals=function(e,m){return e===m||null!=e&&e.equals(m)};l.colorVectorEquals=function(e,m){return e===m||null!=e&&null!=m&&C.equals(e,m)};l.colorVectorToColorAndOpacity=
function(e){return D.fromValues(e[0],e[1],e[2],3<e.length?e[3]:1)};l.darken=function(e,m){var r=d(e);r.l*=1-m;m=L(r);r=e.clone();r.setColor(m);r.a=e.a;return r};l.desaturate=function(e,m){var r=T(e);r.s*=m;m=L(r);r=e.clone();r.setColor(m);r.a=e.a;return r};l.getColorLuminance=p;l.getColorTheme=function(e){return g(e).isBright?"light":"dark"};l.getContrast=function(e,m=l.BrightnessThreshold.High){return p(e,{ignoreAlpha:!0})>m?new u([0,0,0,e.a]):new u([255,255,255,e.a])};l.multiplyOpacity=function(e,
m){e=e.clone();e.a*=m;return e};l.multiplyOpacityToUnitRGBA=function(e,m){e=u.toUnitRGBA(e);e[3]*=m;return e};l.toHSV=T;l.toLAB=d;l.toLCH=function(e){if(!("l"in e&&"c"in e&&"h"in e)){var m=P(K(L(e)));e=m.l;var r=m.a;const a=m.b;m=Math.sqrt(r*r+a*a);r=Math.atan2(a,r);r=0<r?r:r+2*Math.PI;e={l:e,c:m,h:r}}return e};l.toRGB=L;l.unitRGBAFromColor=function(e){return u.toUnitRGBA(e)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(l,u,C,D,x,K,Q,P,U){var L;u=L=class extends u.JSONSupport{constructor(T){super(T);this.altitude=45;this.azimuth=315;this.colorRamp=null;this.hillshadeType="traditional";this.pixelSizePower=.664;this.pixelSizeFactor=.024;this.scalingType="none";this.type="raster-shaded-relief";this.zFactor=1}readColorRamp(T){return U.fromJSON(T)}clone(){return new L({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,
pixelSizePower:this.pixelSizePower,colorRamp:C.clone(this.colorRamp)})}};l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"altitude",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"azimuth",void 0);l.__decorate([D.property({types:U.types,json:{write:!0}})],u.prototype,"colorRamp",void 0);l.__decorate([Q.reader("colorRamp")],u.prototype,"readColorRamp",null);l.__decorate([D.property({type:["traditional","multi-directional"],json:{write:!0}})],u.prototype,
"hillshadeType",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"pixelSizePower",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"pixelSizeFactor",void 0);l.__decorate([D.property({type:["none","adjusted"],json:{write:!0}})],u.prototype,"scalingType",void 0);l.__decorate([K.enumeration({rasterShadedRelief:"raster-shaded-relief"})],u.prototype,"type",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"zFactor",void 0);
return u=L=l.__decorate([P.subclass("esri.renderers.RasterShadedReliefRenderer")],u)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T){var d;u=d=class extends u.JSONSupport{constructor(g){super(g);this.colorRamp=null;this.dynamicRangeAdjustment=this.computeGamma=!1;this.gamma=[];this.sigmoidStrengthLevel=this.outputMin=this.outputMax=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=null;this.statistics=[];this.histograms=null;this.useGamma=!1;this.stretchType="none";this.type="raster-stretch"}readColorRamp(g){if(g)return T.fromJSON(g)}writeStatistics(g,p,q){g?.length&&(Array.isArray(g[0])||
(g=g.map(n=>[n.min,n.max,n.avg,n.stddev])),p[q]=g)}readStretchType(g,p){g=p.stretchType;"number"===typeof g&&(g=L.stretchTypeFunctionEnum[g]);return L.stretchTypeJSONDict.read(g)}clone(){return new d({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:C.clone(this.statistics),gamma:C.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,
minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:C.clone(this.colorRamp),histograms:C.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};l.__decorate([D.property({types:T.types,json:{write:!0}})],u.prototype,"colorRamp",void 0);l.__decorate([Q.reader("colorRamp")],u.prototype,"readColorRamp",null);l.__decorate([D.property({type:Boolean,json:{write:!0}})],u.prototype,"computeGamma",void 0);l.__decorate([D.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],
u.prototype,"dynamicRangeAdjustment",void 0);l.__decorate([D.property({type:[Number],json:{write:!0}})],u.prototype,"gamma",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"maxPercent",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"minPercent",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"numberOfStandardDeviations",void 0);l.__decorate([D.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],
u.prototype,"outputMax",void 0);l.__decorate([D.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],u.prototype,"outputMin",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"sigmoidStrengthLevel",void 0);l.__decorate([D.property({json:{type:[[Number]],write:!0}})],u.prototype,"statistics",void 0);l.__decorate([D.property()],u.prototype,"histograms",void 0);l.__decorate([U.writer("statistics")],u.prototype,"writeStatistics",null);l.__decorate([D.property({type:Boolean,
json:{write:!0}})],u.prototype,"useGamma",void 0);l.__decorate([D.property({type:L.stretchTypeJSONDict.apiValues,json:{type:L.stretchTypeJSONDict.jsonValues,write:L.stretchTypeJSONDict.write}})],u.prototype,"stretchType",void 0);l.__decorate([Q.reader("stretchType",["stretchType"])],u.prototype,"readStretchType",null);l.__decorate([K.enumeration({rasterStretch:"raster-stretch"})],u.prototype,"type",void 0);return u=d=l.__decorate([P.subclass("esri.renderers.RasterStretchRenderer")],u)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports",
"../../core/jsonMap"],function(l,u){u=new u.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});l.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};l.stretchTypeJSONDict=u;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../geometry/Point ../symbols/PictureMarkerSymbol".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g,p,q,n,e,m,r,a,k,c,h,b,f,t){var y;const v=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);C=new K.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
K=new K.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});Q=y=class extends e.VisualVariablesMixin(Q.JSONSupport){constructor(w){super(w);this.attributeField="Magnitude";this.flowRepresentation="flow-from";this.rotationType="arithmetic";this.style="single-arrow";this.symbolTileSize=50;this.type="vector-field"}readInputUnit(w,B){return v.has(w)?q.unitKebabDict.fromJSON(w):null}readOutputUnit(w,B){return v.has(w)?q.unitKebabDict.fromJSON(w):null}get styleRenderer(){const w=this.attributeField,B=this._createStyleRenderer(this.style);
B.field=w;return B}get sizeVariables(){const w=[];if(this.visualVariables)for(var B of this.visualVariables)"size"===B.type&&w.push(B);0===w.length&&(B=new a({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(B):this._set("visualVariables",[B]),w.push(B));return w}get rotationVariables(){const w=[];if(this.visualVariables)for(var B of this.visualVariables)"rotation"===B.type&&w.push(B);0===w.length&&(B=new r({field:"Direction",
rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(B):this._set("visualVariables",[B]),w.push(B));return w}clone(){return new y({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:P.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(w,B=!1,F=[]){const I=[];var G=q.getUnitConversionFactor(this.inputUnit,
this.outputUnit),N=this.rotationVariables[0]?.rotationType||this.rotationType;B=B?q.convertVectorFieldData(w.pixelBlock,"vector-uv",N,G):q.convertVectorFieldUnit(w.pixelBlock,"vector-magdir",G);if(null==B)return I;w=w.extent;G=null!=B.mask&&0<B.mask.length;N=0;const z=(w.xmax-w.xmin)/B.width,A=(w.ymax-w.ymin)/B.height;for(let R=0;R<B.height;R++)for(let H=0;H<B.width;H++,N++){let O=new f({x:w.xmin+H*z+z/2,y:w.ymax-R*A-A/2,spatialReference:w.spatialReference});O=(await p.normalizeCentralMeridian(O))[0];
var J=F.some(M=>M.intersects(O));G&&!B.mask[N]||J||(J=new D({geometry:{type:"point",x:O.x,y:O.y,spatialReference:w.spatialReference},attributes:{Magnitude:B.pixels[0][N],Direction:B.pixels[1][N]}}),J.symbol=this._getVisualVariablesAppliedSymbol(J),I.push(J))}return I}getSymbol(w,B){}async getSymbolAsync(w,B){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(w){return new h({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",
outline:new c({width:0}),size:20,color:w||new u([0,92,230])})}_getVisualVariablesAppliedSymbol(w){if(w){var B=this.styleRenderer?.getSymbol(w)?.clone(),F=this.sizeVariables,I=this.rotationVariables;F&&F.length&&this.sizeVariables.forEach(G=>b.applySizesToSymbol(B,k.getAllSizes([G],w)));I&&I.length&&(w.attributes.Direction+="flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(G=>b.applyRotationToSymbol(B,k.getRotationAngle(G,
w),G.axis)));return B}}_createStyleRenderer(w){let B={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(w){case "single-arrow":B=this._createSingleArrowRenderer();break;case "beaufort-kn":B=this._createBeaufortKnotsRenderer();break;case "beaufort-m":B=this._createBeaufortMeterRenderer();break;case "beaufort-ft":B=this._createBeaufortFeetRenderer();break;case "beaufort-mi":B=this._createBeaufortMilesRenderer();break;case "beaufort-km":B=this._createBeaufortKilometersRenderer();break;
case "ocean-current-m":B=this._createCurrentMeterRenderer();break;case "ocean-current-kn":B=this._createCurrentKnotsRenderer();break;case "simple-scalar":B=this._createSimpleScalarRenderer();break;case "wind-barb":B=this._createWindBarbsRenderer();break;case "classified-arrow":B=this._createClassifiedArrowRenderer()}return new n(B)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const w=this._getDefaultSymbol(new u([214,47,39])),B=this._getClassBreaks([0,
1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:w,classBreakInfos:B}}_createBeaufortMeterRenderer(){const w=this._getDefaultSymbol(new u([214,47,39])),B=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,
220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:w,classBreakInfos:B}}_createBeaufortFeetRenderer(){const w=this._getDefaultSymbol(new u([214,47,39]));var B=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];B=B.map(F=>3.28084*F);B=this._getClassBreaks(B,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:w,classBreakInfos:B}}_createBeaufortMilesRenderer(){const w=
this._getDefaultSymbol(new u([214,47,39]));var B=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];B=B.map(F=>2.23694*F);B=this._getClassBreaks(B,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:w,classBreakInfos:B}}_createBeaufortKilometersRenderer(){const w=this._getDefaultSymbol(new u([214,47,39]));var B=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,
32.7];B=B.map(F=>3.6*F);B=this._getClassBreaks(B,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:w,classBreakInfos:B}}_createCurrentMeterRenderer(){const w=this._getDefaultSymbol(new u([177,177,177])),B=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:w,classBreakInfos:B}}_createCurrentKnotsRenderer(){const w=
this._getDefaultSymbol(new u([177,177,177])),B=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:w,classBreakInfos:B}}_createClassifiedArrowRenderer(){const w=this._getDefaultSymbol(new u([56,168,0]));var B=[0,1E-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const F=this.sizeVariables[0].minDataValue,I=this.sizeVariables[0].maxDataValue;if(F&&I){const G=(I-F)/5;B=
Array.from(Array(6).keys()).map(N=>F+G*N)}}B=this._getClassBreaks(B,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:w,classBreakInfos:B}}_createSimpleScalarRenderer(){return{defaultSymbol:t.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const w=Array.from(Array(31).keys()).map(G=>5*G),B=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],F=t.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),I=w.map((G,N)=>{if(N!==w.length-1)if(0===N)var z={minValue:G,maxValue:w[N+1],symbol:F};else z=t.fromJSON({type:"esriPMS",imageData:B[N].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),z={minValue:G,maxValue:w[N+1],symbol:z};return new m(z)});return{defaultSymbol:F,classBreakInfos:I}}_getClassBreaks(w,B){return B.map((F,I)=>new m({minValue:w[I],maxValue:w[I+1],symbol:this._getDefaultSymbol(new u(F))}))}};l.__decorate([U.property({type:String,
json:{write:!0}})],Q.prototype,"attributeField",void 0);l.__decorate([U.property({type:K.apiValues,json:{type:K.jsonValues,read:{reader:K.read},write:{writer:K.write}}})],Q.prototype,"flowRepresentation",void 0);l.__decorate([U.property({type:["geographic","arithmetic"],json:{write:!0}})],Q.prototype,"rotationType",void 0);l.__decorate([U.property({type:C.apiValues,json:{type:C.jsonValues,read:{reader:C.read},write:{writer:C.write}}})],Q.prototype,"style",void 0);l.__decorate([U.property({json:{write:!0}})],
Q.prototype,"symbolTileSize",void 0);l.__decorate([U.property({type:q.unitKebabDict.apiValues,json:{type:q.unitKebabDict.jsonValues,write:{writer:q.unitKebabDict.write}}})],Q.prototype,"inputUnit",void 0);l.__decorate([d.reader("inputUnit")],Q.prototype,"readInputUnit",null);l.__decorate([U.property({type:q.unitKebabDict.apiValues,json:{type:q.unitKebabDict.jsonValues,read:{reader:q.unitKebabDict.read},write:{writer:q.unitKebabDict.write}}})],Q.prototype,"outputUnit",void 0);l.__decorate([d.reader("outputUnit")],
Q.prototype,"readOutputUnit",null);l.__decorate([T.enumeration({vectorField:"vector-field"})],Q.prototype,"type",void 0);l.__decorate([U.property({type:n})],Q.prototype,"styleRenderer",null);l.__decorate([U.property({type:a})],Q.prototype,"sizeVariables",null);l.__decorate([U.property({type:r})],Q.prototype,"rotationVariables",null);return Q=y=l.__decorate([g.subclass("esri.renderers.VectorFieldRenderer")],Q)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap",
"../PixelBlock","./pixelUtils"],function(l,u,C,D){function x(b,f){return n.get(b)/n.get(f)||1}function K(b,f="geographic"){const [t,y]=b;b=Math.sqrt(t*t+y*y);let v=Math.atan2(y,t)*e;v=(360+v)%360;"geographic"===f&&(v=(450-v)%360);return[b,v]}function Q(b,f="geographic"){let t=b[1];"geographic"===f&&(t=(450-t)%360);t%=360;b=b[0];return[b*Math.cos(t/e),b*Math.sin(t/e)]}function P(b,f,t="geographic",y=1){if(!D.isValidPixelBlock(b))return b;const {pixels:v,width:w,height:B}=b;var F=w*B;const I=v[0],G=
v[1],N=b.pixelType.startsWith("f")?b.pixelType:"f32",z=C.createEmptyBand(N,F);F=C.createEmptyBand(N,F);let A=0;for(let J=0;J<B;J++)for(let R=0;R<w;R++)"vector-uv"===f?([z[A],F[A]]=K([I[A],G[A]],t),z[A]*=y):([z[A],F[A]]=Q([I[A],G[A]],t),z[A]*=y,F[A]*=y),A++;b=new C({pixelType:N,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:[z,F]});b.updateStatistics();return b}function U(b=0,f=0,t=Math.PI,y=!0){y&&(t=(2*Math.PI-t)%(2*Math.PI));y=y?-1:1;
const v=-7*y,w=-2*y,B=-16*y,[F,I]=T(0,f+13*y,t,21.75),[G,N]=T(b-5.5,f+v,t,21.75),[z,A]=T(b+5.5,f+v,t,21.75),[J,R]=T(b-1.5,f+w,t,21.75),[H,O]=T(b+1.5,f+w,t,21.75),[M,S]=T(b-1.5,f+B,t,21.75),[W,X]=T(b+1.5,f+B,t,21.75);return[F,I,G,N,J,R,H,O,z,A,M,S,W,X]}function L(b=0,f=Math.PI,t=!0){t&&(f=(2*Math.PI-f)%(2*Math.PI));var y=t?-1:1,v=5*y;const w=20*y,B=25*y;y*=2;const F=t?1:-1;t=5*F;let [I,G]=[0+t,0-w],[N,z]=[I+2*F,G],[A,J]=[N-0*F,z+y],[R,H]=[0-t,0-B],[O,M]=[R+0*F,H-y],S=Math.ceil(b/5),W=Math.floor(S/
10);S-=8*W;b=[];const X=[];for(let ia=0;ia<S/2;ia++,W--){0>=W&&1===S%2&&ia===(S-1)/2&&(R=0,O=R+0*F,H=(H+G)/2,M=H-y);const [na,qa]=T(R,H,f,45);if(0<W){const [ta,wa]=T(N,H,f,45),[ya,xa]=T(I,G,f,45);b.push(ta);b.push(wa);b.push(na);b.push(qa);b.push(ya);b.push(xa)}else{const [ta,wa]=T(N,z,f,45),[ya,xa]=T(A,J,f,45),[Aa,sa]=T(O,M,f,45);X.push(na);X.push(qa);X.push(Aa);X.push(sa);X.push(ya);X.push(xa);X.push(ta);X.push(wa)}H+=v;G+=v;z+=v;J+=v;M+=v}const [ba,Y]=T(0+t,0+w,f,45);v=7*F;const [ca,Z]=T(0+v,0+
w,f,45),[ea,ha]=T(0+t,0-B,f,45),[fa,ka]=T(0+v,0-B,f,45);return{pennants:b,barbs:X,shaft:[ba,Y,ca,Z,ea,ha,fa,ka]}}function T(b,f,t,y=1){return[Math.sqrt(b*b+f*f)/y,(2*Math.PI+(2*Math.PI+Math.atan2(f,b))%(2*Math.PI)-t)%(2*Math.PI)]}function d(b,f,t,y){t=x(y||"knots",t);for(y=1;y<f.length;y++)if(y===f.length-1){if(b<f[y]*t)break}else if(b<=f[y]*t)break;return Math.min(y-1,f.length-2)}function g(b,f,t,y,v){let w=0;switch(f){case "beaufort_kn":w=d(b,a,"knots",t);break;case "beaufort_km":w=d(b,a,"kilometer-per-hour",
t);break;case "beaufort_ft":w=d(b,a,"feet-per-second",t);break;case "beaufort_m":w=d(b,a,"meter-per-second",t);break;case "classified_arrow":w=d(b,v??[],y,t);break;case "ocean_current_m":w=d(b,k,"meter-per-second",t);break;case "ocean_current_kn":w=d(b,c,"knots",t)}return w}function p(b,f){const {style:t,inputUnit:y,outputUnit:v,breakValues:w}=f,B=m.fromJSON(y),F=m.fromJSON(v);let I=0,G=0;const {width:N,height:z,mask:A}=b,J=b.pixels[0];b=b.pixels[1];var R=null!=A?A.filter(M=>0<M).length:N*z;const H=
new Float32Array(42*R);R=new Uint32Array(15*R);f=f.invertDirection?U(0,0,0,!1):r;for(let M=0;M<z;M++)for(let S=0;S<N;S++){var O=M*N+S;if(!A||A[M*N+S]){const W=(b[O]+360)%360/180*Math.PI,X=g(J[O],t,B,F,w);for(let ba=0;ba<f.length;ba+=2)H[I++]=(S+.5)/N,H[I++]=(M+.5)/z,H[I++]=f[ba],H[I++]=f[ba+1]+W,H[I++]=X,H[I++]=J[O];O=7*(I/42-1);R[G++]=O;R[G++]=O+1;R[G++]=O+2;R[G++]=O+0;R[G++]=O+4;R[G++]=O+3;R[G++]=O+0;R[G++]=O+2;R[G++]=O+3;R[G++]=O+2;R[G++]=O+5;R[G++]=O+3;R[G++]=O+5;R[G++]=O+6;R[G++]=O+3}}return{vertexData:H,
indexData:R}}function q(b,f){let t=0,y=0;const {width:v,height:w,mask:B}=b;b=b.pixels[0];const F=[],I=[];var G=m.fromJSON(f.inputUnit);G=x(G,"knots");f="wind_speed"===f.style?5:Number.MAX_VALUE;for(let z=0;z<w;z++)for(let A=0;A<v;A++){var N=b[z*v+A]*G;if((!B||B[z*v+A])&&N<f){for(let J=0;4>J;J++)F[t++]=(A+.5)/v,F[t++]=(z+.5)/w,F[t++]=2>J?-.5:.5,F[t++]=0===J%2?-.5:.5,F[t++]=0,F[t++]=N;N=4*(t/24-1);I[y++]=N;I[y++]=N+1;I[y++]=N+2;I[y++]=N+1;I[y++]=N+2;I[y++]=N+3}}return{vertexData:new Float32Array(F),
indexData:new Uint32Array(I)}}const n=new Map;n.set("meter-per-second",1);n.set("kilometer-per-hour",.277778);n.set("knots",.514444);n.set("feet-per-second",.3048);n.set("mile-per-hour",.44704);const e=180/Math.PI,m=new u.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),r=U(0,0,0),a=[0,1,3,6,10,16,21,27,33,40,47,55,63],k=[0,.5,1,1.5,2],c=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],
h=[];l.convertToLocalDirections=function(b,f,t,y="geographic"){if(!D.isValidPixelBlock(b)||null==t)return b;b="vector-magdir"===f?b.clone():P(b,f);const v=b.pixels[1];for(let w=0;w<v.length;w++)v[w]="geographic"===y?(v[w]+t[w]+270)%360:(v[w]+360-t[w])%360;return"vector-magdir"===f?b:P(b,"vector-magdir")};l.convertVectorFieldData=P;l.convertVectorFieldUnit=function(b,f,t=1){if(1===t||!D.isValidPixelBlock(b))return b;b=b.clone();const {pixels:y,width:v,height:w}=b,B=y[0],F=y[1];let I=0;for(let G=0;G<
w;G++)for(let N=0;N<v;N++)"vector-uv"===f?(B[I]*=t,F[I]*=t):B[I]*=t,I++;b.updateStatistics();return b};l.createVFMesh=function(b,f){if("simple_scalar"===f.style)f=q(b,f);else if("wind_speed"===f.style){if(0===h.length)for(var t=0;30>t;t++)h.push(L(5*t,0,!f.invertDirection));f=m.fromJSON(f.inputUnit);f=x(f,"knots");const {width:B,height:F,mask:I}=b;t=b.pixels[0];b=b.pixels[1];const G=[],N=[];let z=0,A=0;for(let J=0;J<F;J++)for(let R=0;R<B;R++){var y=J*B+R,v=t[y]*f;if((!I||I[J*B+R])&&5<=v){const H=
(b[y]+360)%360/180*Math.PI,{pennants:O,barbs:M,shaft:S}=h[Math.min(Math.floor(v/5),29)];if(0===O.length+M.length)continue;y=G.length/6;const W=(R+.5)/B,X=(J+.5)/F;for(var w=0;w<O.length;w+=2)G[z++]=W,G[z++]=X,G[z++]=O[w],G[z++]=O[w+1]+H,G[z++]=0,G[z++]=v;for(w=0;w<M.length;w+=2)G[z++]=W,G[z++]=X,G[z++]=M[w],G[z++]=M[w+1]+H,G[z++]=0,G[z++]=v;for(w=0;w<S.length;w+=2)G[z++]=W,G[z++]=X,G[z++]=S[w],G[z++]=S[w+1]+H,G[z++]=0,G[z++]=v;for(v=0;v<O.length/6;v++)N[A++]=y,N[A++]=y+1,N[A++]=y+2,y+=3;for(v=0;v<
M.length/8;v++)N[A++]=y,N[A++]=y+1,N[A++]=y+2,N[A++]=y+1,N[A++]=y+2,N[A++]=y+3,y+=4;N[A++]=y+0;N[A++]=y+1;N[A++]=y+2;N[A++]=y+1;N[A++]=y+3;N[A++]=y+2;y+=4}}f={vertexData:new Float32Array(G),indexData:new Uint32Array(N)}}else f=p(b,f);return f};l.createVFMeshScalar=q;l.getUnitConversionFactor=x;l.sampleVectorField=function(b,f,t,y=[0,0],v=.5){const {width:w,height:B,mask:F}=b,[I,G]=b.pixels,[N,z]=y;b=Math.round((w-N)/t);y=Math.round((B-z)/t);var A=b*y;const J=new Float32Array(A),R=new Float32Array(A);
A=new Uint8Array(A);f="vector-uv"===f;for(let O=0;O<y;O++)for(let M=0;M<b;M++){let S=0;const W=O*b+M,X=Math.max(0,O*t+z),ba=Math.max(0,M*t+N),Y=Math.min(B,X+t),ca=Math.min(w,ba+t);for(let Z=X;Z<Y;Z++)for(let ea=ba;ea<ca;ea++){var H=Z*w+ea;if(!F||F[H]){S++;H=f?[I[H],G[H]]:[I[H],(360+G[H])%360];const [ha,fa]=f?H:Q(H);J[W]+=ha;R[W]+=fa}}if(S>=(Y-X)*(ca-ba)*(1-v)){A[W]=1;const [Z,ea]=K([J[W]/S,R[W]/S]);J[W]=Z;R[W]=ea}else A[W]=0,J[W]=0,R[W]=0}t=new C({width:b,height:y,pixels:[J,R],mask:A});t.updateStatistics();
return t};l.snapImageToSymbolTile=function(b,f,t,y,v){if(null==v||!v.spatialReference.equals(b.spatialReference))return{extent:b,width:Math.round(f/y),height:Math.round(t/y),resolution:b.width/f};const w=v.xmin;v=v.ymax;f=(b.xmax-b.xmin)/f*y;t=(b.ymax-b.ymin)/t*y;b.xmin=w+Math.floor((b.xmin-w)/f)*f;b.xmax=w+Math.ceil((b.xmax-w)/f)*f;b.ymin=v+Math.floor((b.ymin-v)/t)*t;b.ymax=v+Math.ceil((b.ymax-v)/t)*t;return{extent:b,width:Math.round(b.width/f),height:Math.round(b.height/t),resolution:(f+t)/2}};
l.unitKebabDict=m;l.uvComponentToVector=K;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics ./rasterFormats/pixelRangeUtils".split(" "),function(l,u,C,D,x,K,Q,P,U,L){var T;C=T=class extends C.JSONSupport{static createEmptyBand(d,
g){return new (T.getPixelArrayConstructor(d))(g)}static getPixelArrayConstructor(d){let g;switch(d){case "u1":case "u2":case "u4":case "u8":g=Uint8Array;break;case "u16":g=Uint16Array;break;case "u32":g=Uint32Array;break;case "s8":g=Int8Array;break;case "s16":g=Int16Array;break;case "s32":g=Int32Array;break;case "f32":g=Float32Array;break;case "f64":g=Float64Array;break;case "c64":case "c128":case "unknown":g=Float32Array}return g}constructor(d){super(d);this.height=this.width=null;this.pixelType=
"f32";this.mask=this.validPixelCount=null;this.premultiplyAlpha=this.maskIsAlpha=!1;this.statistics=null;this.depthCount=1}castPixelType(d){if(!d)return"f32";d=d.toLowerCase();["u1","u2","u4"].includes(d)?d="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(d)||(d="f32");return d}getPlaneCount(){return this.pixels?.length}addData(d){if(!d.pixels||d.pixels.length!==this.width*this.height)throw new u("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");
this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(d.pixels);this.statistics.push(d.statistics??new U.SimpleBandStatistics)}getAsRGBA(){const d=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(d);break;default:this._fillFrom8Bit(d)}return new Uint8ClampedArray(d)}getAsRGBAFloat(){const d=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(d);
return d}updateStatistics(){if(this.pixels){this.statistics=this.pixels.map(p=>this._calculateBandStatistics(p,this.mask));var d=this.mask,g=0;if(null!=d)for(let p=0;p<d.length;p++)d[p]&&g++;else g=this.width*this.height;this.validPixelCount=g}}clamp(d){if(d&&"f64"!==d&&"f32"!==d&&this.pixels){var [g,p]=L.getPixelValueRange(d),q=this.pixels,n=this.width*this.height,e=q.length,m=[];for(let c=0;c<e;c++){var r=T.createEmptyBand(d,n);var a=q[c];for(let h=0;h<n;h++){var k=a[h];r[h]=k>p?p:k<g?g:k}m.push(r)}this.pixels=
m;this.pixelType=d}}extractBands(d){const {pixels:g,statistics:p}=this;if(null==d||0===d.length||!g||0===g.length)return this;var q=g.length,n=d.some(c=>c>=g.length),e=q===d.length&&!d.some((c,h)=>c!==h);if(n||e)return this;q=this.bandMasks?.length===q?d.map(c=>this.bandMasks[c]):void 0;let {mask:m,validPixelCount:r}=this;const {width:a,height:k}=this;if(q){if(1===q.length)m=q[0];else for(n=a*k,m=(new Uint8Array(n)).fill(255),e=0;e<q.length;e++){const c=q[e];for(let h=0;h<n;h++)c[h]||(m[h]=0)}r=m.filter(c=>
!!c).length}return new T({pixelType:this.pixelType,width:a,height:k,mask:m,bandMasks:q,validPixelCount:r,maskIsAlpha:this.maskIsAlpha,pixels:d.map(c=>g[c]),statistics:p&&d.map(c=>p[c])})}clone(){const d=new T({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});null!=this.mask&&(d.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));this.bandMasks&&(d.bandMasks=this.bandMasks.map(q=>new Uint8Array(q)));
let g;const p=T.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){d.pixels=[];const q=!!this.pixels[0].slice;for(g=0;g<this.pixels.length;g++)d.pixels[g]=q?this.pixels[g].slice(0,this.pixels[g].length):new p(this.pixels[g])}if(this.statistics)for(d.statistics=[],g=0;g<this.statistics.length;g++)d.statistics[g]=D.clone(this.statistics[g]);d.premultiplyAlpha=this.premultiplyAlpha;return d}_fillFrom8Bit(d){const {mask:g,maskIsAlpha:p,premultiplyAlpha:q,pixels:n}=this;if(d&&
n?.length){var e,m;var r=e=m=n[0];3<=n.length?(e=n[1],m=n[2]):2===n.length&&(e=n[1]);var a=new Uint32Array(d),k=this.width*this.height;if(r.length!==k)x.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(null!=g&&g.length===k)if(p)for(d=0;d<k;d++){const c=g[d];if(c){const h=c/255;a[d]=q?c<<24|m[d]*h<<16|e[d]*h<<8|r[d]*h:c<<24|m[d]<<16|e[d]<<8|r[d]}}else for(d=0;d<k;d++)g[d]&&(a[d]=-16777216|m[d]<<16|e[d]<<8|r[d]);else for(d=0;d<k;d++)a[d]=-16777216|
m[d]<<16|e[d]<<8|r[d]}else x.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}_fillFromNon8Bit(d){const {pixels:g,mask:p,statistics:q}=this;if(d&&g?.length){var n=this.pixelType,e=1,m=0;e=1;if(q&&0<q.length){for(var r of q)null!=r.minValue&&(m=Math.min(m,r.minValue)),null!=r.maxValue&&null!=r.minValue&&(e=Math.max(e,r.maxValue-r.minValue));e=255/e}else e=255,"s8"===n?(m=-128,e=127):"u16"===n?e=65535:"s16"===n?(m=-32768,e=32767):"u32"===n?e=4294967295:
"s32"===n?(m=-2147483648,e=2147483647):"f32"===n?(m=-3.4*1E39,e=3.4*1E39):"f64"===n&&(m=-Number.MAX_VALUE,e=Number.MAX_VALUE),e=255/(e-m);d=new Uint32Array(d);n=this.width*this.height;var a,k,c;r=a=k=g[0];if(r.length!==n)return x.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=g.length)if(a=g[1],3<=g.length&&(k=g[2]),null!=p&&p.length===n)for(c=0;c<n;c++)p[c]&&(d[c]=-16777216|(k[c]-m)*e<<16|(a[c]-m)*e<<8|(r[c]-m)*e);else for(c=0;c<n;c++)d[c]=-16777216|
(k[c]-m)*e<<16|(a[c]-m)*e<<8|(r[c]-m)*e;else if(null!=p&&p.length===n)for(c=0;c<n;c++)a=(r[c]-m)*e,p[c]&&(d[c]=-16777216|a<<16|a<<8|a);else for(c=0;c<n;c++)a=(r[c]-m)*e,d[c]=-16777216|a<<16|a<<8|a}else x.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}_fillFrom32Bit(d){const {pixels:g,mask:p}=this;if(!d||!g?.length)return x.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let q,n,e,m;q=n=e=g[0];
3<=g.length?(n=g[1],e=g[2]):2===g.length&&(n=g[1]);const r=this.width*this.height;if(q.length!==r)return x.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let a=0;if(null!=p&&p.length===r)for(m=0;m<r;m++)d[a++]=q[m],d[a++]=n[m],d[a++]=e[m],d[a++]=p[m]&1;else for(m=0;m<r;m++)d[a++]=q[m],d[a++]=n[m],d[a++]=e[m],d[a++]=1}_calculateBandStatistics(d,g){let p=Infinity,q=-Infinity;const n=d.length;let e,m=0;if(null!=g)for(e=0;e<n;e++)g[e]&&(m=d[e],p=m<p?
m:p,q=m>q?m:q);else for(e=0;e<n;e++)m=d[e],p=m<p?m:p,q=m>q?m:q;return new U.SimpleBandStatistics(p,q)}};l.__decorate([K.property({json:{write:!0}})],C.prototype,"width",void 0);l.__decorate([K.property({json:{write:!0}})],C.prototype,"height",void 0);l.__decorate([K.property({json:{write:!0}})],C.prototype,"pixelType",void 0);l.__decorate([Q.cast("pixelType")],C.prototype,"castPixelType",null);l.__decorate([K.property({json:{write:!0}})],C.prototype,"validPixelCount",void 0);l.__decorate([K.property({json:{write:!0}})],
C.prototype,"mask",void 0);l.__decorate([K.property({json:{write:!0}})],C.prototype,"maskIsAlpha",void 0);l.__decorate([K.property({json:{write:!0}})],C.prototype,"pixels",void 0);l.__decorate([K.property()],C.prototype,"premultiplyAlpha",void 0);l.__decorate([K.property({json:{write:!0}})],C.prototype,"statistics",void 0);l.__decorate([K.property({json:{write:!0}})],C.prototype,"depthCount",void 0);l.__decorate([K.property({json:{write:!0}})],C.prototype,"noDataValues",void 0);l.__decorate([K.property({json:{write:!0}})],
C.prototype,"bandMasks",void 0);return C=T=l.__decorate([P.subclass("esri.layers.support.PixelBlock")],C)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports"],function(l){class u{constructor(C=null,D=null,x=null){this.minValue=C;this.maxValue=D;this.noDataValue=x}}l.SimpleBandStatistics=u;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/pixelRangeUtils":function(){define(["exports"],function(l){function u(D){return C[D]??[-3.4028234663852886E38,
3.4028234663852886E38]}const C={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4028234663852886E38,3.4028234663852886E38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};l.convertNoDataToMask=function(D,x,K){if(!(D.depthCount&&1<D.depthCount)){var {pixels:Q,statistics:P,pixelType:U}=D,L=Q[0].length,T=D.bandMasks??[];L=D.mask??(new Uint8Array(L)).fill(255);var d="f32"===U||
"f64"===U,g=u(U),p=!1;for(let e=0;e<Q.length;e++){const m="number"===typeof x?x:x[e];if(null==m)continue;var q=P?.[e]?.maxValue??g[1];if((P?.[e]?.minValue??g[0])>m+Number.EPSILON||q<m-Number.EPSILON)continue;q=T[e]||L.slice();const r=Q[e];var n=K?.customFloatTolerance;if(d&&0!==n){n||(n=9.999999E37<=Math.abs(m)?2E-7*Math.abs(m):"f32"===U?2**-23:Number.EPSILON);for(let a=0;a<r.length;a++)q[a]&&Math.abs(r[a]-m)<n&&(r[a]=0,q[a]=0,L[a]=0,p=!0)}else for(n=0;n<r.length;n++)q[n]&&r[n]===m&&(r[n]=0,q[n]=
0,L[n]=0,p=!0);T[e]=q}p&&(D.bandMasks=D.bandMasks||1<D.pixels.length?T:null,D.mask=L);p&&"updateStatistics"in D&&D.updateStatistics()}};l.getPixelValueRange=u;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock","../rasterFormats/pixelRangeUtils"],function(l,u,C){function D(a){return null!=a&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length}function x(a,k,c,h,b){const f=
a.length;b=u.createEmptyBand(b,f);if(k)for(let t=0;t<f;t++)k[t]&&(b[t]=c[a[t]-h]);else for(k=0;k<f;k++)b[k]=c[a[k]-h];return b}function K(a,k,c,h){const b=null!=c&&2<=c.length?new Set(c):null;c=1===c?.length?c[0]:null;const f=!!k?.length;for(let t=0;t<a.length;t++)if(h[t]){const y=a[t];if(f){let v=!1;for(let w=0;w<k.length;w+=2)if(y>=k[w]&&y<=k[w+1]){v=!0;break}v||(h[t]=0)}h[t]&&(y===c||b?.has(y))&&(h[t]=0)}}function Q(a,k){const c=a[0].length;for(let h=0;h<c;h++)if(k[h]){let b=!1;for(let f=0;f<a.length;f++)if(a[f][h]){b=
!0;break}b||(k[h]=0)}}function P(a,k){const c=a[0].length;for(let h=0;h<c;h++)if(k[h]){let b=!1;for(let f=0;f<a.length;f++)if(0===a[f][h]){b=!0;break}b&&(k[h]=0)}}function U(a,k,c,h,b,f,t,y){return{xmin:b<=c*a?0:b<c*a+a?b-c*a:a,ymin:f<=h*k?0:f<h*k+k?f-h*k:k,xmax:b+t<=c*a?0:b+t<c*a+a?b+t-c*a:a,ymax:f+y<=h*k?0:f+y<h*k+k?f+y-h*k:k}}function L(a,k,c,h,b,f){const {width:t,height:y}=c.block,{x:v,y:w}=c.offset,{width:B,height:F}=c.mosaic;c=U(t,y,h,b,v,w,B,F);let I=0;var G=0;if(f){var N=f.hasGCSSShiftTransform?
360:f.halfWorldWidth??0,z=t*f.resolutionX;const A=f.startX+h*z;A<N&&A+z>N?G=f.rightPadding:A>=N&&(I=f.leftMargin-f.rightPadding,G=0)}c.xmax-=G;if("number"===typeof k)for(f=c.ymin;f<c.ymax;f++)for(G=(b*y+f-w)*B+(h*t-v)+I,N=c.xmin;N<c.xmax;N++)a[G+N]=k;else for(f=c.ymin;f<c.ymax;f++)for(G=(b*y+f-w)*B+(h*t-v)+I,N=f*t,z=c.xmin;z<c.xmax;z++)a[G+z]=k[N+z]}function T(a,k,c={}){const {clipOffset:h,clipSize:b,alignmentInfo:f,blockWidths:t}=c;if(t)return d(a,k,{blockWidths:t});var y=a.find(H=>D(H));if(null==
y)return null;c=b?b.width:k.width;const v=b?b.height:k.height;var w=y.width,B=y.height;const F=k.width/w,I=k.height/B;k={offset:h||{x:0,y:0},mosaic:b||k,block:{width:w,height:B}};w=y.pixelType;var G=u.getPixelArrayConstructor(w);y=y.pixels.length;B=[];for(var N=0;N<y;N++){var z=new G(c*v);for(var A=0;A<I;A++)for(var J=0;J<F;J++){var R=a[A*F+J];D(R)&&(R=R.pixels[N],L(z,R,k,J,A,f))}B.push(z)}G=a.some(H=>null==H||null!=H.mask&&0<H.mask.length);z=a.some(H=>H?.bandMasks&&1<H.bandMasks.length);G=G?new Uint8Array(c*
v):void 0;z=z?[]:void 0;if(G){for(N=0;N<I;N++)for(A=0;A<F;A++)J=a[N*F+A],R=null!=J?J.mask:null,null!=R?L(G,R,k,A,N,f):J?L(G,255,k,A,N,f):L(G,0,k,A,N,f);if(z)for(N=0;N<y;N++){A=new Uint8Array(c*v);for(J=0;J<I;J++)for(R=0;R<F;R++){const H=a[J*F+R],O=H?.bandMasks?.[N]??H?.mask;null!=O?L(A,O,k,R,J,f):H?L(A,255,k,R,J,f):L(A,0,k,R,J,f)}z.push(A)}}a=new u({width:c,height:v,pixels:B,pixelType:w,bandMasks:z,mask:G});a.updateStatistics();return a}function d(a,k,c){const h=a.find(A=>null!=A);if(null==h)return null;
var b=a.some(A=>null!=A?!!A.mask:!0);const {width:f,height:t}=k;k=b?new Uint8Array(f*t):null;({blockWidths:c}=c);const y=[],v=h.getPlaneCount(),w=u.getPixelArrayConstructor(h.pixelType);if(b)for(let A=0,J=0;A<a.length;J+=c[A],A++)if(b=a[A],D(b)){var B=b.mask;for(var F=0;F<t;F++)for(var I=0;I<c[A];I++)k[F*f+I+J]=null==B?255:B[F*b.width+I]}B=(b=a.some(A=>A?.bandMasks&&1<A.bandMasks.length))?[]:void 0;F=f*t;for(I=0;I<v;I++){const A=new w(F),J=b?new Uint8Array(F):void 0;for(let R=0,H=0;R<a.length;H+=
c[R],R++){const O=a[R];if(D(O)){var G=O.pixels[I];if(null!=G){for(var N=0;N<t;N++)for(var z=0;z<c[R];z++)A[N*f+z+H]=G[N*O.width+z];if(J)for(G=O.bandMasks?.[I]??O.mask,N=0;N<t;N++)for(z=0;z<c[R];z++)J[N*f+z+H]=G?G[N*O.width+z]:255}}}y.push(A);B&&J&&B.push(J)}a=new u({width:f,height:t,mask:k,bandMasks:B,pixels:y,pixelType:h.pixelType});a.updateStatistics();return a}function g(a){if(!D(a))return null;const k=a.clone(),{width:c,height:h,pixels:b}=a;var f=b[0];const t=k.pixels[0];a=a.mask;for(let w=2;w<
h-1;w++){const B=new Map;for(var y=w-2;y<w+2;y++)for(var v=0;4>v;v++){const F=y*c+v;n(B,f[F],a?a[F]:1)}t[w*c]=p(B);t[w*c+1]=t[w*c+2]=t[w*c];for(y=3;y<c-1;y++)v=(w-2)*c+y+1,n(B,f[v],a?a[v]:1),v=(w-1)*c+y+1,n(B,f[v],a?a[v]:1),v=w*c+y+1,n(B,f[v],a?a[v]:1),v=(w+1)*c+y+1,n(B,f[v],a?a[v]:1),v=(w-2)*c+y-3,q(B,f[v],a?a[v]:1),v=(w-1)*c+y-3,q(B,f[v],a?a[v]:1),v=w*c+y-3,q(B,f[v],a?a[v]:1),v=(w+1)*c+y-3,q(B,f[v],a?a[v]:1),t[w*c+y]=p(B);t[w*c+y+1]=t[w*c+y]}for(f=0;f<c;f++)t[f]=t[c+f]=t[2*c+f],t[(h-1)*c+f]=t[(h-
2)*c+f];k.updateStatistics();return k}function p(a){if(0===a.size)return 0;let k=0,c=-1,h=0;const b=a.keys();let f=b.next();for(;!f.done;)h=a.get(f.value),h>k&&(c=f.value,k=h),f=b.next();return c}function q(a,k,c){0!==c&&(c=a.get(k),1===c?a.delete(k):a.set(k,c-1))}function n(a,k,c){0!==c&&a.set(k,a.has(k)?a.get(k)+1:1)}function e(a,k,c){let {x:h,y:b}=k;const {width:f,height:t}=c;if(0===h&&0===b&&t===a.height&&f===a.width)return a;const {width:y,height:v}=a;k=Math.max(0,b);const w=Math.max(0,h),B=
Math.min(h+f,y),F=Math.min(b+t,v);if(0>B||0>F||!D(a))return null;h=Math.max(0,-h);b=Math.max(0,-b);var {pixels:I}=a,G=f*t,N=I.length;const z=[];for(var A=0;A<N;A++){var J=I[A],R=u.createEmptyBand(a.pixelType,G);for(let H=k;H<F;H++){const O=H*y;let M=(H+b-k)*f+h;for(let S=w;S<B;S++)R[M++]=J[O+S]}z.push(R)}I=new Uint8Array(G);G=a.mask;for(N=k;N<F;N++)for(A=N*y,J=(N+b-k)*f+h,R=w;R<B;R++)I[J++]=G?G[A+R]:1;a=new u({width:c.width,height:c.height,pixelType:a.pixelType,pixels:z,mask:I});a.updateStatistics();
return a}function m(a,k=!0){if(!D(a))return null;const {pixels:c,width:h,height:b,mask:f,pixelType:t}=a;a=[];const y=Math.round(h/2),v=Math.round(b/2),w=b-1,B=h-1;for(var F=0;F<c.length;F++){var I=c[F],G=u.createEmptyBand(t,y*v),N=0;for(var z=0;z<b;z+=2)for(var A=0;A<h;A+=2){var J=I[z*h+A];if(k){var R=A===B?J:I[z*h+A+1];const H=z===w?J:I[z*h+A+h],O=A===B?H:z===w?R:I[z*h+A+h+1];G[N++]=(J+R+H+O)/4}else G[N++]=J}a.push(G)}F=null;if(null!=f)for(F=new Uint8Array(y*v),I=0,G=0;G<b;G+=2)for(N=0;N<h;N+=2)z=
f[G*h+N],k?(A=N===B?z:f[G*h+N+1],J=G===w?z:f[G*h+N+h],R=N===B?J:G===w?A:f[G*h+N+h+1],F[I++]=z*A*J*R?1:0):F[I++]=z;return new u({width:y,height:v,pixelType:t,pixels:a,mask:F})}function r(a,k,c,h,b=0){const {width:f,height:t}=a,{width:y,height:v}=k;a=h.cols;h=h.rows;k=Math.ceil(y/a-.1/a);const w=Math.ceil(v/h-.1/h);let B,F,I,G,N;const z=k*a;var A=z*w*h;const J=new Float32Array(A),R=new Float32Array(A),H=new Uint32Array(A),O=new Uint32Array(A);let M=0,S,W;for(let Y=0;Y<w;Y++)for(let ca=0;ca<k;ca++){var X=
12*(Y*k+ca);A=c[X];B=c[X+1];F=c[X+2];I=c[X+3];G=c[X+4];N=c[X+5];for(var ba=0;ba<h;ba++){M=(Y*h+ba)*z+ca*a;W=(ba+.5)/h;for(let Z=0;Z<ba;Z++)S=(Z+.5)/a,J[M+Z]=(A*S+B*W+F)*f+b,R[M+Z]=(I*S+G*W+N)*t+b,H[M+Z]=Math.floor(J[M+Z]),O[M+Z]=Math.floor(R[M+Z])}X+=6;A=c[X];B=c[X+1];F=c[X+2];I=c[X+3];G=c[X+4];N=c[X+5];for(X=0;X<h;X++)for(M=(Y*h+X)*z+ca*a,W=(X+.5)/h,ba=X;ba<a;ba++)S=(ba+.5)/a,J[M+ba]=(A*S+B*W+F)*f+b,R[M+ba]=(I*S+G*W+N)*t+b,H[M+ba]=Math.floor(J[M+ba]),O[M+ba]=Math.floor(R[M+ba])}return{offsets_x:J,
offsets_y:R,offsets_xi:H,offsets_yi:O,gridWidth:z}}l.NoDataInterpretation=void 0;(function(a){a[a.matchAny=0]="matchAny";a[a.matchAll=1]="matchAll"})(l.NoDataInterpretation||(l.NoDataInterpretation={}));l.MissingBandAction=void 0;(function(a){a[a.bestMatch=0]="bestMatch";a[a.fail=1]="fail"})(l.MissingBandAction||(l.MissingBandAction={}));l.approximateTransform=function(a,k,c,h,b="nearest"){if(!D(a))return null;"majority"===b&&(a=g(a));const {pixels:f,mask:t,bandMasks:y,pixelType:v}=a,w=a.width;var B=
a.height;const F=u.getPixelArrayConstructor(v),I=f.length,{width:G,height:N}=k;a=!1;for(var z=0;z<c.length;z+=3)-1===c[z]&&-1===c[z+1]&&-1===c[z+2]&&(a=!0);const {offsets_x:A,offsets_y:J,offsets_xi:R,offsets_yi:H,gridWidth:O}=r({width:w,height:B},k,c,h,"majority"===b?.5:0);let M;k=(W,X,ba,Y)=>{const ca=W instanceof Float32Array||W instanceof Float64Array?0:.5;for(let Z=0;Z<N;Z++){M=Z*O;for(let ea=0;ea<G;ea++){if(0>A[M]||0>J[M])W[Z*G+ea]=0;else if(Y)W[Z*G+ea]=X[R[M]+H[M]*w];else{const ha=Math.floor(A[M]),
fa=Math.floor(J[M]),ka=Math.ceil(A[M]),ia=Math.ceil(J[M]),na=A[M]-ha,qa=J[M]-fa;W[Z*G+ea]=!ba||ba[ha+fa*w]&&ba[ka+fa*w]&&ba[ha+ia*w]&&ba[ka+ia*w]?(1-qa)*((1-na)*X[ha+fa*w]+na*X[ka+fa*w])+qa*((1-na)*X[ha+ia*w]+na*X[ka+ia*w])+ca:X[R[M]+H[M]*w]}M++}}};c=[];h=y?.length===I;B=[];for(z=0;z<I;z++){if(h){var S=new Uint8Array(G*N);k(S,y[z],y[z],!0);B.push(S)}S=new F(G*N);k(S,f[z],h?y[z]:t,"nearest"===b||"majority"===b);c.push(S)}b=new u({width:G,height:N,pixelType:v,pixels:c,bandMasks:h?B:void 0});if(null!=
t)b.mask=new Uint8Array(G*N),k(b.mask,t,t,!0);else if(a)for(b.mask=new Uint8Array(G*N),a=0;a<G*N;a++)b.mask[a]=0>A[a]||0>J[a]?0:1;b.updateStatistics();return b};l.clip=e;l.colorize=function(a,k){if(!D(a)||!k||!k.indexedColormap&&!k.indexed2DColormap)return a;const c=a.clone();var h=c.pixels;let b=c.mask;const f=c.width*c.height;if(1!==h.length)return a;const {indexedColormap:t,indexed2DColormap:y,offset:v,alphaSpecified:w}=k;a=0;h=h[0];k=new Uint8Array(h.length);const B=new Uint8Array(h.length),F=
new Uint8Array(h.length);var I=0;if(t){const G=t.length-1;if(null!=b)for(a=0;a<f;a++)b[a]&&(I=4*(h[a]-v),I<v||I>G?b[a]=0:(k[a]=t[I],B[a]=t[I+1],F[a]=t[I+2],b[a]=t[I+3]));else{b=new Uint8Array(f);for(a=0;a<f;a++)I=4*(h[a]-v),I<v||I>G?b[a]=0:(k[a]=t[I],B[a]=t[I+1],F[a]=t[I+2],b[a]=t[I+3]);c.mask=b}}else if(y)if(null!=b)for(a=0;a<f;a++)b[a]&&(I=y[h[a]],k[a]=I[0],B[a]=I[1],F[a]=I[2],b[a]=I[3]);else{b=new Uint8Array(f);for(a=0;a<f;a++)I=y[h[a]],k[a]=I[0],B[a]=I[1],F[a]=I[2],b[a]=I[3];c.mask=b}c.pixels=
[k,B,F];c.statistics=null;c.pixelType="u8";c.maskIsAlpha=w;return c};l.compositeBands=function(a){if(!a?.length||a.some(v=>!D(v)))return null;if(1===a.length)return a[0]?.clone()??null;const {width:k,height:c,pixelType:h}=a[0];if(a.some(v=>v.width!==k||v.height!==c))return null;const b=a.map(({mask:v})=>v).filter(v=>null!=v);let f=null;b.length&&(f=new Uint8Array(k*c),f.set(b[0]),1<b.length&&P(b.slice(1),f));const t=[];a.forEach(({pixels:v})=>t.push(...v));const y=[];a.map(({statistics:v})=>v).filter(v=>
v?.length).forEach(v=>y.push(...v));return new u({pixelType:h,width:k,height:c,mask:f,pixels:t,statistics:y.length?y:null})};l.createColormapLUT=function(a){if(a){var k=a.colormap;if(k&&0!==k.length){k=k.sort((w,B)=>w[0]-B[0]);var c=0;0>k[0][0]&&(c=k[0][0]);var h=Math.max(256,k[k.length-1][0]-c+1),b=new Uint8Array(4*h),f=[],t=0,y=0,v=5===k[0].length;if(65536<h)return k.forEach(w=>{f[w[0]-c]=v?w.slice(1):w.slice(1).concat([255])}),{indexed2DColormap:f,offset:c,alphaSpecified:v};if(a.fillUnspecified)for(a=
k[y],t=a[0]-c;t<h;t++)b[4*t]=a[1],b[4*t+1]=a[2],b[4*t+2]=a[3],b[4*t+3]=v?a[4]:255,t===a[0]-c&&(a=y===k.length-1?a:k[++y]);else for(t=0;t<k.length;t++)a=k[t],y=4*(a[0]-c),b[y]=a[1],b[y+1]=a[2],b[y+2]=a[3],b[y+3]=v?a[4]:255;return{indexedColormap:b,offset:c,alphaSpecified:v}}}};l.createMaskLUT=function(a,k,c){if("u8"!==a&&"s8"!==a&&"u16"!==a&&"s16"!==a)return null;var h=a.includes("16")?65536:256;a=a.includes("s")?-h/2:0;h=new Uint8Array(h);if(k)for(let f=0;f<k.length;f++){var b=Math.ceil(k[2*f]-a);
const t=Math.floor(k[2*f+1]-a);for(;b<=t;b++)h[b]=255}else h.fill(255);if(c)for(k=0;k<c.length;k++)h[c[k]-a]=0;return{lut:h,offset:a}};l.createRemapLUT=function(a){const {srcPixelType:k,inputRanges:c,outputValues:h,allowUnmatched:b,noDataRanges:f,isLastInputRangeInclusive:t,outputPixelType:y}=a;if("u8"!==k&&"s8"!==k&&"u16"!==k&&"s16"!==k)return null;var v=k.includes("16")?65536:256;a=k.includes("s")?-v/2:0;const w=u.createEmptyBand(y,v);v=new Uint8Array(v);b&&v.fill(255);const [B,F]=C.getPixelValueRange(y);
if(c?.length&&h?.length){var I=c.map(A=>A-1E-6);I[0]=c[0];t&&(I[I.length-1]=c[c.length-1]);for(var G=0;G<I.length;G++){var N=h[G]>F?F:h[G]<B?B:h[G],z=Math.ceil(I[2*G]-a);const A=Math.floor(I[2*G+1]-a);for(;z<=A;z++)w[z]=N,v[z]=255}}if(f?.length)for(I=0;I<f.length;I++)for(N=Math.ceil(f[2*I]-a),G=Math.floor(f[2*I+1]-a);N<=G;N++)v[N]=0;return{lut:w,offset:a,mask:v}};l.extractBands=function(a,k){return k?.length&&D(a)?a.extractBands(k):a};l.getClipBounds=U;l.getLocalArithmeticNorthRotations=function(a,
k){const {coefficients:c,spacing:h}=k,{offsets_x:b,offsets_y:f,gridWidth:t}=r(a,a,c,{rows:h[0],cols:h[1]}),{width:y,height:v}=a;a=new Float32Array(y*v);k=180/Math.PI;for(let F=0;F<v;F++)for(let I=0;I<y;I++){var w=F*t+I,B=0===F?w:w-t;const G=F===v-1?w:w+t;w=b[B]-b[G];B=f[G]-f[B];isNaN(w)||isNaN(B)?a[F*y+I]=90:(B=Math.atan2(B,w)*k,B=(360+B)%360,a[F*y+I]=B)}return a};l.interpolateOffsets=r;l.isValidPixelBlock=D;l.lookupBandValues=x;l.lookupPixels=function(a,k){if(!D(a))return null;const {pixels:c,mask:h}=
a,b=c.length;let f=k.lut;const {offset:t}=k;f&&1===f[0].length&&(f=c.map(()=>f));const y=[];k=k.outputPixelType||"u8";for(let v=0;v<b;v++){const w=x(c[v],h,f[v],t||0,k);y.push(w)}a=new u({width:a.width,height:a.height,pixels:y,mask:h,pixelType:k});a.updateStatistics();return a};l.mask=function(a,k){if(!D(a))return null;const {width:c,height:h,pixels:b}=a;var f=c*h;const t=new Uint8Array(f);a.mask?t.set(a.mask):t.fill(255);a=b.length;const {includedRanges:y,noDataValues:v,outputPixelType:w,matchAll:B,
lookups:F}=k;if(F){f=[];for(k=0;k<a;k++){var I=F[k];I=x(b[k],t,I.lut,I.offset||0,"u8");f.push(I)}1===f.length?t.set(f[0]):B?Q(f,t):P(f,t)}else if(B){k=[];for(I=0;I<a;I++){const G=new Uint8Array(f);G.set(t);K(b[I],y?.slice(2*I,2*I+2),v?.[I],G);k.push(G)}1===k.length?t.set(k[0]):Q(k,t)}else for(f=0;f<a;f++)K(b[f],y?.slice(2*f,2*f+2),v?.[f],t);return new u({width:c,height:h,pixelType:w,pixels:b,mask:t})};l.maxMapSizeGpu=6;l.mosaic=T;l.mosaicPixelData=function(a,k){if(!a||0===a.length)return null;var c=
a.find(F=>F.pixelBlock);if(null==c?.pixelBlock)return null;var h=(c.extent.xmax-c.extent.xmin)/c.pixelBlock.width;const b=(c.extent.ymax-c.extent.ymin)/c.pixelBlock.height,f=.01*Math.min(h,b),t=a.sort((F,I)=>Math.abs(F.extent.ymax-I.extent.ymax)>f?I.extent.ymax-F.extent.ymax:Math.abs(F.extent.xmin-I.extent.xmin)>f?F.extent.xmin-I.extent.xmin:0);var y=Math.min.apply(null,t.map(F=>F.extent.xmin));const v=Math.min.apply(null,t.map(F=>F.extent.ymin)),w=Math.max.apply(null,t.map(F=>F.extent.xmax)),B=Math.max.apply(null,
t.map(F=>F.extent.ymax));a={x:Math.round((k.xmin-y)/h),y:Math.round((B-k.ymax)/b)};y={width:Math.round((w-y)/h),height:Math.round((B-v)/b)};h={width:Math.round((k.xmax-k.xmin)/h),height:Math.round((k.ymax-k.ymin)/b)};if(Math.round(y.width/c.pixelBlock.width)*Math.round(y.height/c.pixelBlock.height)!==t.length||0>a.x||0>a.y||y.width<h.width||y.height<h.height)return null;c=t.map(F=>F.pixelBlock);c=T(c,y,{clipOffset:a,clipSize:h});return{extent:k,pixelBlock:c}};l.remap=function(a,k){if(!D(a))return null;
const {width:c,height:h}=a,{inputRanges:b,outputValues:f,outputPixelType:t,noDataRanges:y,allowUnmatched:v,isLastInputRangeInclusive:w}=k;k=a.pixels[0];const B=u.createEmptyBand(t,k.length),F=a.mask,I=new Uint8Array(c*h);F?I.set(F):I.fill(255);const G=a.pixelType.startsWith("f")?1E-6:0;a=b.map(M=>M-G);a[0]=b[0];a[a.length-1]=b[b.length-1]+(w?1E-6:0);var N=b.length/2;const [z,A]=C.getPixelValueRange(t);for(var J=0;J<h;J++)for(var R=0;R<c;R++){var H=J*c+R;if(I[H]){var O=k[H];let M=!1;for(let S=N-1;0<=
S;S--)if(O===a[2*S]||O>a[2*S]&&O<a[2*S+1]){B[H]=f[S];M=!0;break}M||(v?B[H]=O>A?A:O<z?z:O:I[H]=0)}}if(a=y?.length)for(N=0;N<h;N++)for(J=0;J<c;J++)if(R=N*c+J,!F||F[R])for(H=k[R],O=0;O<a;O+=2)if(H>=y[O]&&H<=y[O+1]){B[R]=0;I[R]=0;break}return new u({width:c,height:h,pixelType:t,pixels:[B],mask:I})};l.remapColor=function(a,k){if(!D(a))return null;a=a.clone();var {pixels:c}=a;const h=a.width*a.height,b=k.length,f=Math.floor(b/2),t=k[Math.floor(f)];c=c[0];let y,v,w,B,F,I,G=!1;const N=new Uint8Array(h),z=
new Uint8Array(h),A=new Uint8Array(h);let J=a.mask;const R=4===k[0].mappedColor.length;J||(J=new Uint8Array(h),J.fill(R?255:1),a.mask=J);for(F=0;F<h;F++)if(J[F]){y=c[F];G=!1;I=f;v=t;w=0;for(B=b-1;1<B-w;){if(y===v.value){G=!0;break}y>v.value?w=I:B=I;I=Math.floor((w+B)/2);v=k[Math.floor(I)]}G||(y===k[w].value?(v=k[w],G=!0):y===k[B].value?(v=k[B],G=!0):y<k[w].value?(G=!1,v=null):y>k[w].value&&(y<k[B].value?(v=k[w],G=!0):B===b-1?(G=!1,v=null):(v=k[B],G=!0)));G?(N[F]=v.mappedColor[0],z[F]=v.mappedColor[1],
A[F]=v.mappedColor[2],J[F]=v.mappedColor[3]):N[F]=z[F]=A[F]=J[F]=0}a.pixels=[N,z,A];a.mask=J;a.pixelType="u8";a.maskIsAlpha=R;return a};l.resampleByMajority=g;l.setValidBoundary=function(a,k,c){if(!D(a))return null;const {width:h,height:b}=a,f=k.x;k=k.y;const t=c.width+f;c=c.height+k;if(0>f||0>k||t>h||c>b||0===f&&0===k&&t===h&&c===b)return a;a.mask||(a.mask=new Uint8Array(h*b));const y=a.mask;for(let v=0;v<b;v++){const w=v*h;for(let B=0;B<h;B++)y[w+B]=v<k||v>=c||B<f||B>=t?0:1}a.updateStatistics();
return a};l.split=function(a,k,c){if(!D(a))return null;const {width:h,height:b}=k;let {width:f,height:t}=a;const y=new Map,v={x:0,y:0};c=null==c?1:1+c;for(let w=0;w<c;w++){const B=Math.ceil(f/h),F=Math.ceil(t/b);for(let I=0;I<F;I++){v.y=I*b;for(let G=0;G<B;G++){v.x=G*h;const N=e(a,v,k);y.set(`${w}/${I}/${G}`,N)}}w<c-1&&(a=m(a));f=Math.round(f/2);t=Math.round(t/2)}return y};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./cimSymbolUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d){function g(b){b=b.symbolLayers;if(!b)return null;let f=null;b.forEach(t=>{"object"===t.type&&t.resource?.href||(f="water"===t.type?t.color:t.material?t.material.color:null)});return f?new C(f):null}function p(b,f){if(null==f||null==b)return b;b=b.toRgba();b[3]*=f;return new C(b)}function q(b,f,t){if(b=b.symbolLayers){var y=v=>{f=f??v??(null!=t?h:null);return p(f,t)};b.forEach(v=>{if("object"!==v.type||!v.resource?.href||f)if("water"===v.type)v.color=y(v.color);else{const w=
y(null!=v.material?v.material.color:null);null==v.material?v.material=new d.Symbol3DMaterial({color:w}):v.material.color=w;null!=t&&"outline"in v&&null!=v.outline?.color&&(v.outline.color=p(v.outline.color,t))}})}}async function n(b,f){(b=b.symbolLayers)&&await x.forEach(b,async t=>e(t,f))}async function e(b,f){switch(b.type){case "extrude":b.size="number"===typeof f[2]?f[2]:0;break;case "icon":case "line":case "text":f=m(f);null!=f&&(b.size=f);break;case "path":const t=a(f,P.ONES,[b.width,void 0,
b.height]);b.width=c(f[0],b.width,1,t);b.height=c(f[2],b.height,1,t);break;case "object":await r(b,f)}}function m(b){for(const f of b)if("number"===typeof f)return f;return null}async function r(b,f){const {resourceSize:t,symbolSize:y}=await k(b),v=a(f,t,y);b.width=c(f[0],y[0],t[0],v);b.depth=c(f[1],y[1],t[1],v);b.height=c(f[2],y[2],t[2],v)}function a(b,f,t){for(let y=0;3>y;y++){const v=b[y];switch(v){case "symbol-value":return b=t[y],null!=b?b/f[y]:1;case "proportional":break;default:if(v&&f[y])return v/
f[y]}}return 1}async function k(b){var {computeObjectLayerResourceSize:f}=await new Promise((F,I)=>l(["./symbolLayerUtils"],F,I));f=await f(b,10);const {width:t,height:y,depth:v}=b;b=[t,v,y];let w=1;for(var B=0;3>B;B++){const F=b[B];if(null!=F){w=F/f[B];break}}for(B=0;3>B;B++)null==b[B]&&(b[B]=f[B]*w);return{resourceSize:f,symbolSize:b}}function c(b,f,t,y){switch(b){case "proportional":return t*y;case "symbol-value":return null!=f?f:t;default:return b}}const h=new C("white");u.applyColorToSymbol=
function(b,f,t){if(b&&(f||null!=t))if(f&&(f=new C(f)),D.isSymbol3D(b))q(b,f,t);else if(D.isSymbol2D(b)){if(f=f??b.color)b.color=p(f,t);null!=t&&"outline"in b&&b.outline?.color&&(b.outline.color=p(b.outline.color,t))}};u.applyOpacityToColor=p;u.applyRotationToSymbol=function(b,f,t){b&&null!=f&&(D.isSymbol3D(b)?(b=b.symbolLayers)&&b.forEach(y=>{if(y&&"object"===y.type)switch(t){case "tilt":y.tilt=f;break;case "roll":y.roll=f;break;default:y.heading=f}}):!D.isSymbol2D(b)||"simple-marker"!==b.type&&"picture-marker"!==
b.type&&"text"!==b.type||(b.angle=f))};u.applySizesToSymbol=async function(b,f){if(b&&f){if(D.isSymbol3D(b))return n(b,f);if(D.isSymbol2D(b)&&(f=m(f),null!=f))switch(b.type){case "simple-marker":b.size=f;break;case "picture-marker":const t=b.width/b.height;1<t?(b.width=f,b.height=f*t):(b.width=f*t,b.height=f);break;case "simple-line":b.width=f;break;case "text":b.font.size=f}}};u.fetchWebStyleSymbol=async function(b,f){const t=await b.fetchSymbol(f);return t?t:b.fetchCIMSymbol(f)};u.getCSSFilterFromEffectList=
function(b){if(!b)return null;b=b.effects.filter(f=>"bloom"!==f.type).map(f=>f.toJSON());return U.effectFunctionsFromJSON(b)};u.getColorFromSymbol=function(b,f){if(!b)return null;let t=null;D.isSymbol3D(b)?t=g(b):D.isSymbol2D(b)&&(t="cim"===b.type?L.getCIMSymbolColor(b):b.color?new C(b.color):null);return t?p(t,f):null};u.getIconHref=function(b){return b.resource?.href??""};u.getSymbolOutlineSize=function(b){return b?D.isSymbol3D(b)?(b=(b=b.symbolLayers?.at(-1))&&"outline"in b?b?.outline?.size:void 0,
null!=b?b:0):Q.px2pt(T.getStroke(b)?.width):0};u.isVolumetricSymbol=function(b){if(null==b||!("symbolLayers"in b)||null==b.symbolLayers)return!1;switch(b.type){case "point-3d":return b.symbolLayers.some(f=>"object"===f.type);case "line-3d":return b.symbolLayers.some(f=>"path"===f.type);case "polygon-3d":return b.symbolLayers.some(f=>"object"===f.type||"extrude"===f.type);default:return!1}};u.symbolHasExtrudeSymbolLayer=function(b){return null!=b&&"polygon-3d"===b.type&&b.symbolLayers.some(f=>"extrude"===
f.type)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(l,u,C){function D(d){d=C.toCIMSymbolJSON(d);if("CIMTextSymbol"===d?.type)return d.height??0;let g=0;if(d?.symbolLayers)for(const p of d.symbolLayers)C.isCIMMarker(p)&&null!=p.size&&p.size>g?g=p.size:C.isCIMStroke(p)&&null!=p.width&&p.width>g?g=p.width:C.isCIMFill(p);return g}function x(d,g,p,q){if(d)if("CIMTextSymbol"===
d.type)null!=d.height&&(d.height*=g);else{if(p&&d.effects)for(const n of d.effects)P(n,g);if(d.symbolLayers)for(const n of d.symbolLayers)switch(n.type){case "CIMPictureMarker":case "CIMVectorMarker":K(n,g,q);break;case "CIMPictureStroke":case "CIMSolidStroke":!q?.preserveOutlineWidth&&n.width&&(n.width*=g);break;case "CIMPictureFill":n.height&&(n.height*=g);n.offsetX&&(n.offsetX*=g);n.offsetY&&(n.offsetY*=g);break;case "CIMHatchFill":x(n.lineSymbol,g,!0,{...q,preserveOutlineWidth:!1}),n.offsetX&&
(n.offsetX*=g),n.offsetY&&(n.offsetY*=g),n.separation&&(n.separation*=g)}}}function K(d,g,p){if(d&&(d.markerPlacement&&Q(d.markerPlacement,g),d.offsetX&&(d.offsetX*=g),d.offsetY&&(d.offsetY*=g),d.anchorPoint&&"Absolute"===d.anchorPointUnits&&(d.anchorPoint={x:d.anchorPoint.x*g,y:d.anchorPoint.y*g}),d.size=null!=d.size?d.size*g:0,"CIMVectorMarker"===d.type&&d.markerGraphics))for(const q of d.markerGraphics)d.scaleSymbolsProportionally||x(q.symbol,g,!0,p)}function Q(d,g){C.isCIMMarkerStrokePlacement(d)&&
d.offset&&(d.offset*=g);switch(d.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":d.customEndingOffset&&(d.customEndingOffset*=g);d.offsetAlongLine&&(d.offsetAlongLine*=g);if(d.placementTemplate&&d.placementTemplate.length){var p=d.placementTemplate.map(q=>q*g);d.placementTemplate=p}break;case "CIMMarkerPlacementAlongLineVariableSize":d.maxRandomOffset&&(d.maxRandomOffset*=g);d.placementTemplate&&d.placementTemplate.length&&(p=d.placementTemplate.map(q=>
q*g),d.placementTemplate=p);break;case "CIMMarkerPlacementOnLine":d.startPointOffset&&(d.startPointOffset*=g);break;case "CIMMarkerPlacementAtExtremities":d.offsetAlongLine&&(d.offsetAlongLine*=g);break;case "CIMMarkerPlacementAtRatioPositions":d.beginPosition&&(d.beginPosition*=g);d.endPosition&&(d.endPosition*=g);break;case "CIMMarkerPlacementPolygonCenter":d.offsetX&&(d.offsetX*=g);d.offsetY&&(d.offsetY*=g);break;case "CIMMarkerPlacementInsidePolygon":d.offsetX&&(d.offsetX*=g),d.offsetY&&(d.offsetY*=
g),d.stepX&&(d.stepX*=g),d.stepY&&(d.stepY*=g)}}function P(d,g){switch(d.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":d.width&&(d.width*=g);break;case "CIMGeometricEffectBuffer":d.size&&(d.size*=g);break;case "CIMGeometricEffectCut":d.beginCut&&(d.beginCut*=g);d.endCut&&(d.endCut*=g);d.middleCut&&(d.middleCut*=g);break;case "CIMGeometricEffectDashes":d.customEndingOffset&&(d.customEndingOffset*=g);d.offsetAlongLine&&(d.offsetAlongLine*=g);if(d.dashTemplate&&d.dashTemplate.length){const p=
d.dashTemplate.map(q=>q*g);d.dashTemplate=p}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":d.length&&(d.length*=g);break;case "CIMGeometricEffectMove":d.offsetX&&(d.offsetX*=g);d.offsetY&&(d.offsetY*=g);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":d.offset&&(d.offset*=g);break;case "CIMGeometricEffectRegularPolygon":d.radius&&(d.radius*=g);break;case "CIMGeometricEffectTaperedPolygon":d.fromWidth&&(d.fromWidth*=
g);d.length&&(d.length*=g);d.toWidth&&(d.toWidth*=g);break;case "CIMGeometricEffectWave":d.amplitude&&(d.amplitude*=g),d.period&&(d.period*=g)}}function U(d,g){if(d){var p="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===d.type;if(p?.symbolLayers)for(const q of p.symbolLayers)if(!(q.colorLocked||d&&(C.isCIMStroke(q)||C.isCIMMarker(q)&&q.markerPlacement&&C.isCIMMarkerStrokePlacement(q.markerPlacement))))switch(q.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":q.tintColor&&
L(g,q.tintColor);break;case "CIMVectorMarker":q.markerGraphics?.forEach(n=>{U(n.symbol,g)});break;case "CIMSolidStroke":case "CIMSolidFill":L(g,q.color);break;case "CIMHatchFill":U(q.lineSymbol,g)}}}function L(d,g){for(const p of d)if(p.join(".")===g.join("."))return;d.push(g)}function T(d,g,p){if(d){var q="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===q?.type;if(q?.symbolLayers)for(const n of q.symbolLayers)if(!n.colorLocked){if(d)if(p){if({layersToColor:q}=p,(C.isCIMStroke(n)||C.isCIMMarker(n)&&
n.markerPlacement&&C.isCIMMarkerStrokePlacement(n.markerPlacement))&&"fill"===q||C.isCIMFill(n)&&"outline"===q)continue}else if(C.isCIMStroke(n)||C.isCIMMarker(n)&&n.markerPlacement&&C.isCIMMarkerStrokePlacement(n.markerPlacement))continue;q=g.toArray();switch(n.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":n.tintColor=q;break;case "CIMVectorMarker":n.markerGraphics?.forEach(e=>{T(e.symbol,g,p)});break;case "CIMSolidStroke":case "CIMSolidFill":n.color=q;break;case "CIMHatchFill":T(n.lineSymbol,
g,p)}}}}l.applyCIMSymbolColor=function(d,g,p){g instanceof u||(g=new u(g));(d=C.toCIMSymbolJSON(d))&&T(d,g,p)};l.applyCIMSymbolRotation=function(d,g,p=!1){d=C.toCIMSymbolJSON(d);p&&0!==g&&(g=360-g);if("CIMTextSymbol"===d?.type)d.angle=g;else if("CIMPointSymbol"===d?.type&&d.symbolLayers){p=g-(d.angle||0);for(const q of d.symbolLayers)if(C.isCIMMarker(q)){let n=q.rotation||0;n=q.rotateClockwise?n-p:n+p;q.rotation=n}d.angle=g}};l.getCIMSymbolColor=function(d){d=C.toCIMSymbolJSON(d);const g=[];U(d,g);
return g.length?new u(C.fromCIMColor(g[0])):null};l.getCIMSymbolRotation=function(d,g=!1){d=C.toCIMSymbolJSON(d);return"CIMTextSymbol"===d?.type||"CIMPointSymbol"===d?.type?(d=d.angle,null!=d&&0!==d&&g?360-d:d??0):0};l.getCIMSymbolSize=D;l.getCIMSymbolType=function(d){d=C.toCIMSymbolJSON(d);if(!d)return null;switch(d.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";
case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};l.scaleCIMMarker=K;l.scaleCIMSymbol=x;l.scaleCIMSymbolTo=function(d,g,p){if(d){var q=C.toCIMSymbolJSON(d);d=D(d);if(0===d){if(q)if("CIMTextSymbol"===q.type)q.height=g;else if(q.symbolLayers)for(const n of q.symbolLayers)switch(n.type){case "CIMPictureMarker":case "CIMVectorMarker":n.size=g;break;case "CIMPictureStroke":case "CIMSolidStroke":n.width=g}}else x(q,g/d,!1,p)}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/symbols/cim/utils":function(){define(["require","exports"],function(l,u){function C(d){return"function"===typeof d}function D(d){let g=d.length;for(;g--;)if(!" /-,\n".includes(d.charAt(g)))return!1;return!0}function x(d,g){const p=[];var q=0;let n=-1;do n=d.indexOf("[",q),n>=q&&(n>q&&(q=d.substr(q,n-q),p.push([q,null,D(q)])),q=n+1,n=d.indexOf("]",q),n>=q&&(n>q&&(q=d.substr(q,n-q),(q=g[q])&&p.push([null,q,!1])),q=n+1));while(-1!==n);q<d.length-1&&(d=d.substr(q),p.push([d,null,D(d)]));return p}
function K(d,g,p){let q="",n=null;for(const e of g){const [m,r,a]=e;if(m)a?n=m:(n&&(q+=n,n=null),q+=m);else if(g=d.attributes[r])n&&(q+=n,n=null),q+=g}return Q(q,p)}function Q(d,g){"string"!==typeof d&&(d=String(d));switch(g){case "LowerCase":return d.toLowerCase();case "Allcaps":return d.toUpperCase();default:return d}}function P(d){return d?{r:d[0],g:d[1],b:d[2],a:d[3]/255}:{r:0,g:0,b:0,a:0}}function U(d){if(!d)return null;switch(d.type){case "CIMPolygonSymbol":if(d.symbolLayers)for(const g of d.symbolLayers)if(d=
U(g),null!=d)return d;break;case "CIMTextSymbol":return U(d.symbol);case "CIMSolidFill":return d.color}}function L(d){if(d)switch(d.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(d=d.symbolLayers)for(const g of d)if(d=L(g),null!=d)return d;break;case "CIMTextSymbol":return L(d.symbol);case "CIMSolidStroke":return d.color}}function T(d){if(d)switch(d.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(d.symbolLayers)for(const g of d.symbolLayers)if(d=T(g),void 0!==d)return d;break;case "CIMTextSymbol":return T(d.symbol);
case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return d.width}}u.adjustTextCase=Q;u.analyzeTextParts=x;u.assignTextValuesFromFeature=K;u.attributesToFields=function(d){return(d?Object.keys(d):[]).map(g=>({name:g,alias:g,type:"string"===typeof d[g]?"esriFieldTypeString":"esriFieldTypeDouble"}))};u.colorToArray=function(d){return[d.r,d.g,d.b,d.a]};u.createLabelOverrideFunction=function(d,g,p){const q=x(g,d);return n=>K(n,q,p)};u.evaluateValueOrFunction=function(d,g,p,q){return C(d)?
d(g,p,q):d};u.fromCIMColor=P;u.fromCIMFontDecoration=function(d){return d.underline?"underline":d.strikethrough?"line-through":"none"};u.fromCIMFontStyle=function(d){let g="normal",p="normal";d&&(d=d.toLowerCase(),d.includes("italic")?g="italic":d.includes("oblique")&&(g="oblique"),d.includes("bold")?p="bold":d.includes("light")&&(p="lighter"));return{style:g,weight:p}};u.fromCIMHorizontalAlignment=function(d){switch(d){default:return"left";case "Right":return"right";case "Center":return"center";
case "Justify":return"center"}};u.fromCIMVerticalAlignment=function(d){switch(d){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};u.getFillColor=U;u.getFontStyle=function(d){if(!d)return"normal";switch(d.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};u.getFontWeight=function(d){if(!d)return"normal";switch(d.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";
default:return"normal"}};u.getStrokeColor=L;u.getStrokeWidth=T;u.getTintColor=d=>d.tintColor?P(d.tintColor):{r:255,g:255,b:255,a:1};u.getValue=(d,g=0)=>null==d||isNaN(d)?g:d;u.importGeometryEngine=function(){return new Promise((d,g)=>l(["../../geometry/geometryEngineJSON"],d,g))};u.isCIMFill=function(d){return null!=d&&("CIMGradientFill"===d.type||"CIMHatchFill"===d.type||"CIMPictureFill"===d.type||"CIMSolidFill"===d.type||"CIMWaterFill"===d.type)};u.isCIMMarker=function(d){return"CIMVectorMarker"===
d.type||"CIMPictureMarker"===d.type||"CIMBarChartMarker"===d.type||"CIMCharacterMarker"===d.type||"CIMPieChartMarker"===d.type||"CIMStackedBarChartMarker"===d.type};u.isCIMMarkerStrokePlacement=function(d){return null!=d&&("CIMMarkerPlacementAlongLineRandomSize"===d.type||"CIMMarkerPlacementAlongLineSameSize"===d.type||"CIMMarkerPlacementAlongLineVariableSize"===d.type||"CIMMarkerPlacementAtExtremities"===d.type||"CIMMarkerPlacementAtMeasuredUnits"===d.type||"CIMMarkerPlacementAtRatioPositions"===
d.type||"CIMMarkerPlacementOnLine"===d.type||"CIMMarkerPlacementOnVertices"===d.type)};u.isCIMStroke=function(d){return"CIMGradientStroke"===d.type||"CIMPictureStroke"===d.type||"CIMSolidStroke"===d.type};u.isFeatureValueFn=C;u.isGeometryEngineRequired=d=>{if(!d)return!1;for(const g of d)switch(g.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};u.isSVGImage=d=>d.includes("data:image/svg+xml");u.mapCIMSymbolToGeometryType=function(d){if(!d)return null;
switch(d.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};u.resampleHermite=function(d,g,p,q,n,e,m=!0){const r=g/n;p/=e;const a=Math.ceil(r/2),k=Math.ceil(p/2);for(let b=0;b<e;b++)for(let f=0;f<n;f++){const t=4*(f+(m?e-b-1:b)*n);var c=0;let y=0,v=0,w=0,B=0,F=0,I=0;const G=(b+.5)*p;for(let N=Math.floor(b*p);N<(b+1)*p;N++){var h=Math.abs(G-(N+.5))/k;const z=
(f+.5)*r;h*=h;for(let A=Math.floor(f*r);A<(f+1)*r;A++){let J=Math.abs(z-(A+.5))/a;c=Math.sqrt(h+J*J);-1<=c&&1>=c&&(c=2*c*c*c-3*c*c+1,0<c&&(J=4*(A+N*g),I+=c*d[J+3],v+=c,255>d[J+3]&&(c=c*d[J+3]/250),w+=c*d[J],B+=c*d[J+1],F+=c*d[J+2],y+=c))}}q[t]=w/y;q[t+1]=B/y;q[t+2]=F/y;q[t+3]=I/v}};u.toCIMSymbolJSON=function(d){return d.data?.symbol??null};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/LRUCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(l,u,C,D,x,K,Q){function P(T){if(!T)return null;let d=null;switch(T.type){case "simple-fill":case "picture-fill":case "simple-marker":d=P(T.outline);break;case "simple-line":const g=K.pt2px(T.width);null!=T.style&&"none"!==T.style&&0!==g&&(d={color:T.color,style:L(T.style),width:g,cap:T.cap,join:"miter"===T.join?K.pt2px(T.miterLimit):T.join});break;default:d=null}return d}const U=new x.LRUCache(1E3),L=(()=>{const T={};return d=>{if(T[d])return T[d];const g=d.replaceAll("-","");return T[d]=
g}})();C=new C([128,128,128]);l.defaultThematicColor=C;l.dekebabifyLineStyle=L;l.getFill=function(T){const d=T.style;let g=null;if(T)switch(T.type){case "simple-marker":"cross"!==d&&"x"!==d&&(g=T.color);break;case "simple-fill":"solid"===d?g=T.color:"none"!==d&&(g={type:"pattern",x:0,y:0,src:u.getAssetUrl(`esri/symbols/patterns/${d}.png`),width:5,height:5});break;case "picture-fill":g={type:"pattern",src:T.url,width:K.pt2px(T.width)*T.xscale,height:K.pt2px(T.height)*T.yscale,x:K.pt2px(T.xoffset),
y:K.pt2px(T.yoffset)};break;case "text":g=T.color;break;case "cim":g=Q.getCIMSymbolColor(T)}return g};l.getPatternUrlWithColor=function(T,d){const g=T+"-"+d;return void 0!==U.get(g)?Promise.resolve(U.get(g)):D(T,{responseType:"image"}).then(p=>{p=p.data;const q=p.naturalWidth,n=p.naturalHeight,e=document.createElement("canvas");e.width=q;e.height=n;const m=e.getContext("2d");m.fillStyle=d;m.fillRect(0,0,q,n);m.globalCompositeOperation="destination-in";m.drawImage(p,0,0);p=e.toDataURL();U.put(g,p);
return p})};l.getStroke=P;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(l,u,C,D,x,K){var Q;u=Q=class extends u.JSONSupport{constructor(P){super(P);this.dimensionName=this.variableName=null;this.values=[];this.isSlice=
!1}clone(){return new Q({variableName:this.variableName,dimensionName:this.dimensionName,values:C.clone(this.values),isSlice:this.isSlice})}};l.__decorate([D.property({type:String,json:{write:!0}})],u.prototype,"variableName",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],u.prototype,"dimensionName",void 0);l.__decorate([D.property({type:x.types.array(x.types.oneOf([x.types.native(Number),x.types.array(x.types.native(Number))])),json:{write:!0}})],u.prototype,"values",void 0);l.__decorate([D.property({type:Boolean,
json:{write:!0}})],u.prototype,"isSlice",void 0);return u=Q=l.__decorate([K.subclass("esri.layers.support.DimensionalDefinition")],u)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g){l.ExportImageServiceParameters=class extends C.JSONSupport{constructor(){super(...arguments);this.layer=null;this.pixelType=this.compression=void 0;this.lercVersion=2}get adjustAspectRatio(){return this.layer.adjustAspectRatio}writeAdjustAspectRatio(p,q,n){10.3>this.layer.version||(q[n]=p)}get bandIds(){return this.layer.bandIds}get compressionQuality(){return this.layer.compressionQuality}writeCompressionQuality(p,q,n){this.format&&this.format.toLowerCase().includes("jpg")&&
null!=p&&(q[n]=p)}get compressionTolerance(){return this.layer.compressionTolerance}writeCompressionTolerance(p,q,n){"lerc"===this.format&&null!=p&&(q[n]=p)}get format(){return"vector-field"===this.layer.renderer?.type?"lerc":this.layer.format}get interpolation(){return this.layer.interpolation}get noData(){return this.layer.noData}get noDataInterpretation(){return this.layer.noDataInterpretation}writeLercVersion(p,q,n){"lerc"===this.format&&10.5<=this.layer.version&&(q[n]=p)}get version(){const p=
this.layer;p.commitProperty("bandIds");p.commitProperty("format");p.commitProperty("compressionQuality");p.commitProperty("compressionTolerance");p.commitProperty("interpolation");p.commitProperty("noData");p.commitProperty("noDataInterpretation");p.commitProperty("mosaicRule");p.commitProperty("rasterFunction");p.commitProperty("adjustAspectRatio");p.commitProperty("pixelFilter");p.commitProperty("definitionExpression");p.commitProperty("multidimensionalSubset");return(this._get("version")||0)+1}set version(p){this._set("version",
p)}get mosaicRule(){var p=this.layer;let q=p.mosaicRule;p=p.definitionExpression;q?p&&p!==q.where&&(q=q.clone(),q.where=p):p&&(q=new T({where:p}));return q}get rasterFunction(){const p=this.layer;let {rasterFunction:q}=p;const n=p.pixelFilter,e=!p.format||p.format.includes("jpg")||p.format.includes("png");q=this._addResampleRasterFunction(q);const m=p.multidimensionalSubset?.areaOfInterest;m&&(q=this._addClipFunction(q,m));e&&!n&&"vector-field"!==p.renderer?.type&&(q=this.combineRendererWithRenderingRule(q));
return q}combineRendererWithRenderingRule(p){const q=this.layer,{rasterInfo:n,renderer:e}=q;p=p||q.rasterFunction;return e&&L.isSupportedRendererType(e)?L.combineRenderingRules(L.convertRendererToRenderingRule(e,{rasterAttributeTable:n.attributeTable,pixelType:n.pixelType,dataType:n.dataType,bandNames:n.bandInfos.map(({name:m})=>m),convertColorRampToColormap:10.6>q.version,convertToRFT:!!p?.rasterFunctionDefinition,bandCount:n.bandCount}),p):p}_addResampleRasterFunction(p){if("vector-field"!==this.layer.renderer?.type||
"Resample"===p?.functionName)return p;let q=new g({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,InputCellSize:this.layer.serviceRasterInfo.pixelSize}});q=p?.rasterFunctionDefinition?new g({rasterFunctionDefinition:L.convertRenderingRuleToRFT(q)}):q;return L.combineRenderingRules(q,p)}_addClipFunction(p,q){q=new g({functionName:"Clip",functionArguments:{ClippingGeometry:q.toJSON(),ClippingType:1}});return L.combineRenderingRules(q,
p)}};u.__decorate([D.property()],l.ExportImageServiceParameters.prototype,"layer",void 0);u.__decorate([D.property({json:{write:!0}})],l.ExportImageServiceParameters.prototype,"adjustAspectRatio",null);u.__decorate([U.writer("adjustAspectRatio")],l.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);u.__decorate([D.property({json:{write:!0}})],l.ExportImageServiceParameters.prototype,"bandIds",null);u.__decorate([D.property({json:{write:!0}})],l.ExportImageServiceParameters.prototype,
"compression",void 0);u.__decorate([D.property({json:{write:!0}})],l.ExportImageServiceParameters.prototype,"compressionQuality",null);u.__decorate([U.writer("compressionQuality")],l.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);u.__decorate([D.property({json:{write:!0}})],l.ExportImageServiceParameters.prototype,"compressionTolerance",null);u.__decorate([U.writer("compressionTolerance")],l.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);u.__decorate([D.property({json:{write:!0}})],
l.ExportImageServiceParameters.prototype,"format",null);u.__decorate([D.property({type:String,json:{read:{reader:d.interpolationKebab.read},write:{writer:d.interpolationKebab.write}}})],l.ExportImageServiceParameters.prototype,"interpolation",null);u.__decorate([D.property({json:{write:!0}})],l.ExportImageServiceParameters.prototype,"noData",null);u.__decorate([D.property({type:String,json:{read:{reader:d.noDataInterpretationKebab.read},write:{writer:d.noDataInterpretationKebab.write}}})],l.ExportImageServiceParameters.prototype,
"noDataInterpretation",null);u.__decorate([D.property({json:{write:!0}})],l.ExportImageServiceParameters.prototype,"pixelType",void 0);u.__decorate([D.property({json:{write:!0}})],l.ExportImageServiceParameters.prototype,"lercVersion",void 0);u.__decorate([U.writer("lercVersion")],l.ExportImageServiceParameters.prototype,"writeLercVersion",null);u.__decorate([D.property({type:Number})],l.ExportImageServiceParameters.prototype,"version",null);u.__decorate([D.property({json:{write:!0}})],l.ExportImageServiceParameters.prototype,
"mosaicRule",null);u.__decorate([D.property({json:{write:!0,name:"renderingRule"}})],l.ExportImageServiceParameters.prototype,"rasterFunction",null);l.ExportImageServiceParameters=u.__decorate([P.subclass("esri.layers.mixins.ExportImageServiceParameters")],l.ExportImageServiceParameters);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ./RasterFunction ./rasterFormats/pixelRangeUtils ./rasterFunctions/rasterFunctionSchema ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),
function(l,u,C,D,x,K,Q,P){function U(b,f){for(const t in b)"raster"===t.toLowerCase()&&("RasterFunctionVariable"===b[t].type?(b[t]=f.rasterFunctionDefinition,b[t].type="RasterFunctionTemplate"):"RasterFunctionTemplate"===b[t].type&&U(b[t].arguments,f))}function L(b){const f=u.clone(x.schema[b.functionName+"Function"]);b=b.functionArguments;for(const t in b)"raster"===t.toLowerCase()?(f.arguments[t]=L(b[t]),f.arguments[t].type="RasterFunctionTemplate"):"colormap"===t.toLowerCase()?(f.arguments[t].value=
r(b[t]),f.arguments.ColorSchemeType.value=0):f.arguments[t].value=b[t];return f}function T(b){const f=b?.Raster??b?.raster;return f&&"esri.layers.support.RasterFunction"===f.declaredClass?T(f.functionArguments):b}function d(b,f){const t=new C;t.functionName="VectorFieldRenderer";const {dataType:y,bandNames:v}=f,w="vector-uv"===y;let B;if(v&&2===v.length){var F=v.map(z=>z.toLowerCase());B=F.indexOf("magnitude");F=F.indexOf("direction")}if(-1===B||null===B)B=0,F=1;const I="arithmetic"===b.rotationType?
1:2,G="flow-from"===b.flowRepresentation?0:1,N=b.visualVariables?b.visualVariables.find(z=>"Magnitude"===z.field):new P;b={magnitudeBandID:B,directionBandID:F,isUVComponents:w,referenceSystem:I,massFlowAngleRepresentation:G,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:k[b.style.toLowerCase().replace("-","_")],minimumMagnitude:N.minDataValue,maximumMagnitude:N.maxDataValue,minimumSymbolSize:N.minSize,maximumSymbolSize:N.maxSize};t.functionArguments=b;b=
L(t);return f.convertToRFT?C.fromJSON({rasterFunctionDefinition:b}):t}function g(b,f){const t=f.convertToRFT,y=new C;y.functionName="Stretch";var v=h[Q.stretchTypeJSONDict.toJSON(b.stretchType)],w=m(b.statistics??[]);w={StretchType:v,Statistics:w,DRA:b.dynamicRangeAdjustment,UseGamma:b.useGamma,Gamma:b.gamma,ComputeGamma:b.computeGamma};null!=b.outputMin&&(w.Min=b.outputMin);null!=b.outputMax&&(w.Max=b.outputMax);v===h.standardDeviation?(w.NumberOfStandardDeviations=b.numberOfStandardDeviations,y.outputPixelType=
"u8"):v===h.percentClip?(w.MinPercent=b.minPercent,w.MaxPercent=b.maxPercent,y.outputPixelType="u8"):v===h.minMax?y.outputPixelType="u8":v===h.sigmoid&&(w.SigmoidStrengthLevel=b.sigmoidStrengthLevel);y.functionArguments=w;y.variableName="Raster";if(b.colorRamp){w=b.colorRamp;v=new C;if(t)v.functionArguments={ColorRamp:K.getRFxArgColorRampValue(w)};else{const B=K.getColorRampName(w,!0);B?v.functionArguments={colorRampName:B}:!f.convertColorRampToColormap||"algorithmic"!==w.type&&"multipart"!==w.type?
(b=b.colorRamp.toJSON(),"algorithmic"===b.type?b.algorithm=b.algorithm||"esriCIELabAlgorithm":"multipart"===b.type&&b.colorRamps?.length&&b.colorRamps.forEach(F=>F.algorithm=F.algorithm||"esriCIELabAlgorithm"),v.functionArguments={colorRamp:b}):v.functionArguments={Colormap:K.convertColorRampToColormap(w)}}v.variableName="Raster";v.functionName="Colormap";v.functionArguments.Raster=y;return t?new C({rasterFunctionDefinition:L(v)}):v}return t?new C({rasterFunctionDefinition:L(y)}):y}function p(b,f){const t=
[],y=[],v=[],w=[],{pixelType:B,rasterAttributeTable:F}=f,I=null==F?null:F.features,G=n(F);if(G&&I&&Array.isArray(I)&&b.classBreakInfos){b.classBreakInfos.forEach((J,R)=>{const H=J.symbol?.color;let O;H?.a&&null!=J.minValue&&null!=J.maxValue&&I.forEach(M=>{null!=J.minValue&&null!=J.maxValue&&(O=M.attributes[b.field],(O>=J.minValue&&O<J.maxValue||R===b.classBreakInfos.length-1&&O>=J.minValue)&&w.push([M.attributes[G],H.r,H.g,H.b]))})});var N=B?q(w,B):w,z=new C;z.functionName="Colormap";z.functionArguments=
{};z.functionArguments.Colormap=N;z.variableName="Raster";return f.convertToRFT?new C({rasterFunctionDefinition:L(z)}):z}b.classBreakInfos.forEach((J,R)=>{if(null!=J.minValue&&null!=J.maxValue){var H=J.symbol&&J.symbol.color;H?.a?(0===R?t.push(J.minValue,J.maxValue+1E-4):t.push(J.minValue+1E-4,J.maxValue+1E-4),y.push(R),w.push([R,H.r,H.g,H.b])):v.push(J.minValue,J.maxValue)}});N=B?q(w,B):w;z=new C;z.functionName="Remap";z.functionArguments={InputRanges:t,OutputValues:y,NoDataRanges:v};z.variableName=
"Raster";const A=new C;A.functionName="Colormap";A.functionArguments={Colormap:N,Raster:z};return f.convertToRFT?new C({rasterFunctionDefinition:L(A)}):A}function q(b,f){(f=a.has(f)?D.getPixelValueRange(f):null)&&b.push([Math.floor(f[0]-1),0,0,0],[Math.ceil(f[1]+1),0,0,0]);return b}function n(b){if(null!=b)return{fields:b}=b,b?.find(f=>f?.name&&"value"===f.name.toLowerCase())?.name}function e(b,f){const t=[],{pixelType:y,rasterAttributeTable:v}=f;var w=null==v?null:v.features;const B=n(v),F=b.defaultSymbol?.color?.toRgb();
var I=b.uniqueValueInfos;if(I)if(!w)for(b=0;b<I.length;b++){var G=I[b];w=G.symbol?.color;G=+G.value;if(w?.a){if(isNaN(G))return null;t.push([G,w.r,w.g,w.b])}}else if(B){const N=new Map;I.forEach(A=>{const J=A.value;A=A.symbol?.color;null!=J&&A?.a&&N.set(String(J),A.toRgb())});const z=b.field;w.forEach(({attributes:A})=>{const J=A[B];(A=N.get(String(A[z])))?t.push([J,...A]):F&&t.push([J,...F])})}I=y?q(t,y):t;b=new C;b.functionName="Colormap";b.functionArguments={};b.functionArguments.Colormap=I;b.variableName=
"Raster";return f.convertToRFT?new C({rasterFunctionDefinition:L(b)}):b}function m(b){const f=[];b?.forEach(t=>{Array.isArray(t)?f.push(t):null!=t.min&&null!=t.max&&f.push([t.min,t.max,t.avg||0,t.stddev||0])});return f}function r(b){const f=[],t=[];b.forEach(y=>{f.push(y[0]);t.push(K.convertRGBATo32Bit([...y.slice(1),255]))});return{type:"RasterColormap",values:f,colors:t}}const a=new Set("u1 u2 u4 u8 s8 u16 s16".split(" ")),k={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",
beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},c=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),h={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};l.combineRenderingRules=function(b,f){if(!b||!f)return u.clone(b||f);b=u.clone(b);if(b.functionDefinition&&f.rasterFunctionDefinition){const t=
f.rasterFunctionDefinition;if(t.thumbnail||t.thumbnailEx)t.thumbnail=t.thumbnailEx=void 0;U(b.functionDefinition.arguments,f);b.rasterFunctionDefinition=b.functionDefinition.toJSON()}else"none"!==f.functionName?.toLowerCase()&&(T(b.functionArguments).Raster=f);return b};l.convertRendererToRenderingRule=function(b,f){f=f||{};switch(b.type){case "raster-stretch":return g(b,f);case "class-breaks":return p(b,f);case "unique-value":return e(b,f);case "raster-colormap":var t=f;(f=b.extractColormap())&&
0!==f.length?({pixelType:b}=t,b=b?q(f,b):f,f=new C,f.functionName="Colormap",f.functionArguments={},f.functionArguments.Colormap=b,b=t.convertToRFT?new C({rasterFunctionDefinition:L(f)}):f):b=null;return b;case "vector-field":return d(b,f);case "raster-shaded-relief":t=f.convertToRFT;if("elevation"!==f.dataType&&("generic"!==f.dataType||1!==f.bandCount||"s16"!==f.pixelType&&"s32"!==f.pixelType&&"f32"!==f.pixelType&&"f64"!==f.pixelType))b=new C;else{f=new C;f.functionName="Hillshade";var y="traditional"===
b.hillshadeType?0:1,v="none"===b.scalingType?1:3,w={HillshadeType:y,SlopeType:v,ZFactor:b.zFactor};0===y&&(w.Azimuth=b.azimuth,w.Altitude=b.altitude);3===v&&(w.PSPower=b.pixelSizePower,w.PSZFactor=b.pixelSizeFactor);f.functionArguments=w;f.variableName="Raster";b.colorRamp&&(f.functionName="ShadedRelief",t?w.ColorRamp=K.getRFxArgColorRampValue(b.colorRamp):w.Colormap=K.convertColorRampToColormap(b.colorRamp));b=t?new C({rasterFunctionDefinition:L(f)}):f}return b;case "flow":throw Error("Unsupported rendering rule.");
}};l.convertRenderingRuleToRFT=L;l.isSupportedRendererType=function(b){return c.has(b.type)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./RasterFunctionTemplate".split(" "),
function(l,u,C,D,x,K,Q,P,U,L){var T;const d=new Set(["raster","raster2","dem","fillraster"]),g=new Set(["rasters"]),p=m=>m?.rasterFunction?e.fromJSON(m):m,q=m=>m&&m instanceof e?m.toJSON():m,n=m=>m?.functionName&&!m.declaredClass?new e(m):m;x={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:L}},json:{write:!0,name:"rasterFunctionDefinition"}};let e=T=class extends u.JSONSupport{constructor(m){super(m);this.functionName=null;this.outputPixelType="unknown";this.functionDefinition=this.variableName=
null}set functionArguments(m){if(m){const r=Object.keys(m);if(r.some(a=>{var k;if(k=d.has(a.toLowerCase()))a=m[a],k=a?.functionName&&!a.declaredClass;return k})||r.some(a=>g.has(a.toLowerCase())&&Array.isArray(m[a])&&m[a].some(k=>k?.functionName&&!k.declaredClass))){m=C.clone(m);for(const a of r)d.has(a.toLowerCase())?m[a]=n(m[a]):g.has(a.toLowerCase())&&Array.isArray(m[a])&&(m[a]=m[a].map(k=>n(k)))}}this._set("functionArguments",m)}readFunctionArguments(m){if(null==m)var r=null;else{m=C.clone(m);
var a={};for(r of Object.keys(m))d.has(r.toLowerCase())?a[r]=p(m[r]):g.has(r.toLowerCase())&&Array.isArray(m[r])?a[r]=m[r].map(p):a[r]=m[r];r=a}return r}writeFunctionArguments(m,r,a){const k={};for(const c of Object.keys(m))d.has(c.toLowerCase())?k[c]=q(m[c]):g.has(c.toLowerCase())&&Array.isArray(m[c])?k[c]=m[c].map(q):k[c]=q(m[c]);r[a]=k}readFunctionName(m,r){m=r.rasterFunctionInfos;const a=r.name;return a?a:m?.length&&"None"!==m[0].name?m[0].name:r.rasterFunctionDefinition?r.rasterFunctionDefinition.name:
r.rasterFunction}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(m){this.functionDefinition=m?L.fromJSON(m):null}clone(){return new T({functionName:this.functionName,functionArguments:C.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:C.clone(this.rasterFunctionDefinition)})}};l.__decorate([D.property({json:{type:Object,name:"rasterFunctionArguments"}})],e.prototype,"functionArguments",
null);l.__decorate([Q.reader("functionArguments")],e.prototype,"readFunctionArguments",null);l.__decorate([U.writer("functionArguments")],e.prototype,"writeFunctionArguments",null);l.__decorate([D.property({json:{type:String,write:{target:"rasterFunction"}}})],e.prototype,"functionName",void 0);l.__decorate([Q.reader("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],e.prototype,"readFunctionName",null);l.__decorate([K.enumeration({C128:"c128",C64:"c64",F32:"f32",
F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),D.property({json:{default:"unknown"}})],e.prototype,"outputPixelType",void 0);l.__decorate([D.property({type:String,json:{read:!0,write:!0}})],e.prototype,"variableName",void 0);l.__decorate([D.property()],e.prototype,"rasterFunctionDefinition",null);l.__decorate([D.property(x)],e.prototype,"functionDefinition",void 0);return e=T=l.__decorate([P.subclass("esri.layers.support.RasterFunction")],
e)})},"esri/layers/support/RasterFunctionTemplate":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./RasterFunctionInfo ./RasterFunctionProperties".split(" "),function(l,u,C,D,x,K,Q,P,U,L){u=new u.JSONMap({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});C=class extends C.JSONSupport{constructor(){super(...arguments);
this.functionType="mosaic";this.type="RasterFunctionTemplate"}};l.__decorate([D.property({type:[String],json:{write:!0}})],C.prototype,"aliases",void 0);l.__decorate([D.property({type:Object,json:{write:!0}})],C.prototype,"arguments",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],C.prototype,"description",void 0);l.__decorate([D.property({type:U,json:{write:!0,name:"function"}})],C.prototype,"functionInfo",void 0);l.__decorate([D.property({type:u.apiValues,json:{type:[0,1,2],read:u.read,
write:u.write}})],C.prototype,"functionType",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],C.prototype,"group",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],C.prototype,"help",void 0);l.__decorate([D.property({type:Number,json:{type:x.Integer,write:!0,name:"_object_id"}})],C.prototype,"id",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],C.prototype,"name",void 0);l.__decorate([D.property({type:String,json:{write:!0,name:"definition"}})],C.prototype,
"queryDefinition",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],C.prototype,"tag",void 0);l.__decorate([D.property({type:L,json:{write:!0}})],C.prototype,"properties",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],C.prototype,"thumbnail",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],C.prototype,"thumbnailEx",void 0);l.__decorate([D.property({json:{type:["RasterFunctionTemplate"],write:!0}})],C.prototype,"type",void 0);return C=l.__decorate([P.subclass("esri.layers.support.RasterFunctionTemplate")],
C)})},"esri/layers/support/RasterFunctionInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./rasterEnums".split(" "),function(l,u,C,D,x,K,Q,P){u=class extends u.JSONSupport{constructor(){super(...arguments);this.pixelType="unknown"}};l.__decorate([C.property({type:String,json:{write:!0}})],u.prototype,"name",void 0);
l.__decorate([C.property({type:String,json:{write:!0}})],u.prototype,"description",void 0);l.__decorate([C.property({type:D.Integer,json:{type:D.Integer,write:!0,name:"_object_id"}})],u.prototype,"id",void 0);l.__decorate([C.property({type:String,json:{type:P.pixelTypeKebabDict.jsonValues,read:P.pixelTypeKebabDict.read,write:P.pixelTypeKebabDict.write}})],u.prototype,"pixelType",void 0);l.__decorate([C.property({type:String,json:{write:!0}})],u.prototype,"type",void 0);return u=l.__decorate([Q.subclass("esri.layers.support.RasterFunctionInfo")],
u)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(l,u){const C=u.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),D=u.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});u=u.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});l.interpolationKebab=C;l.noDataInterpretationKebab=
D;l.pixelTypeKebabDict=u;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/RasterFunctionProperties":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./RasterFunctionVariable".split(" "),function(l,u,C,D,x,K,Q,P){x={key:"type",base:null,typeMap:{RasterFunctionVariable:P}};u=class extends u.JSONSupport{};
l.__decorate([C.property({types:x,json:{types:x,name:"MatchVariable"}})],u.prototype,"matchVariable",void 0);l.__decorate([C.property({types:x,json:{types:x,name:"UnionDimension"}})],u.prototype,"unionDimension",void 0);l.__decorate([C.property({type:Number,json:{type:D.Integer,write:!0,name:"_object_id"}})],u.prototype,"id",void 0);l.__decorate([C.property({type:String,json:{write:!0}})],u.prototype,"type",void 0);return u=l.__decorate([Q.subclass("esri.layers.support.RasterFunctionProperties")],
u)})},"esri/layers/support/RasterFunctionVariable":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(l,u,C,D,x,K,Q){u=class extends u.JSONSupport{constructor(){super(...arguments);this.isPublic=this.isDataset=!1;this.type="RasterFunctionVariable"}};l.__decorate([C.property({type:String,json:{write:!0}})],
u.prototype,"name",void 0);l.__decorate([C.property({type:Number,json:{type:D.Integer,write:!0,name:"_object_id"}})],u.prototype,"id",void 0);l.__decorate([C.property({type:Boolean,json:{write:!0}})],u.prototype,"isDataset",void 0);l.__decorate([C.property({type:Boolean,json:{write:!0}})],u.prototype,"isPublic",void 0);l.__decorate([C.property({json:{write:!0}})],u.prototype,"value",void 0);l.__decorate([C.property({type:String,json:{write:!0}})],u.prototype,"type",void 0);return u=l.__decorate([Q.subclass("esri.layers.support.RasterFunctionVariable")],
u)})},"esri/layers/support/rasterFunctions/rasterFunctionSchema":function(){define(["exports"],function(l){l.schema={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",
type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,
isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,
isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",
name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},
UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},
InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},
functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,
type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",
description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",
isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},
SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},
functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",
isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},
PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",
isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/MosaicRule":function(){define("../../chunks/tslib.es6 ../../core/deprecate ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g,p,q){var n;const e=C.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),m=C.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});C=n=class extends D.JSONSupport{constructor(r){super(r);this.ascending=!0;this.where=
this.viewpoint=this.sortValue=this.sortField=this.operation=this.objectIds=this.multidimensionalDefinition=this.method=this.lockRasterIds=this.itemRasterFunction=null}readAscending(r,a){return null!=a.ascending?a.ascending:null!=a.sortAscending?a.sortAscending:!0}get itemRenderingRule(){u.deprecatedProperty(K.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0});return this._get("itemRasterFunction")}set itemRenderingRule(r){u.deprecatedProperty(K.getLogger(this),
"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0});this._set("itemRasterFunction",r)}readMethod(r,a){r=a.mosaicMethod||a.defaultMosaicMethod;switch(r?r.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":r="esriMosaicAttribute";break;case "lockraster":r="esriMosaicLockRaster";break;case "center":r="esriMosaicCenter";break;case "northwest":r="esriMosaicNorthwest";break;case "nadir":r="esriMosaicNadir";break;case "viewpoint":r="esriMosaicViewpoint";
break;case "seamline":r="esriMosaicSeamline";break;case "none":r="esriMosaicNone";break;default:r="esriMosaicNone"}return m.fromJSON(r)}writeMultidimensionalDefinition(r,a,k){null!=r&&(r=r.filter(({variableName:c,dimensionName:h})=>c&&"*"!==c||h),r.length&&(a[k]=r.map(c=>c.toJSON())))}readOperation(r,a){r=a.mosaicOperation;a=a.mosaicOperator?.toLowerCase();a=r||(a?e.toJSON(a):null);return e.fromJSON(a)||"first"}castSortValue(r){return null==r||"string"===typeof r||"number"===typeof r?r:`${r}`}clone(){return new n({ascending:this.ascending,
itemRasterFunction:x.clone(this.itemRasterFunction),lockRasterIds:x.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:x.clone(this.multidimensionalDefinition),objectIds:x.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:x.clone(this.viewpoint),where:this.where})}};l.__decorate([Q.property({type:Boolean,json:{write:!0}})],C.prototype,"ascending",void 0);l.__decorate([U.reader("ascending",["ascending","sortAscending"])],
C.prototype,"readAscending",null);l.__decorate([Q.property({type:q,json:{name:"itemRenderingRule",write:!0}})],C.prototype,"itemRasterFunction",void 0);l.__decorate([Q.property({type:q})],C.prototype,"itemRenderingRule",null);l.__decorate([Q.property({type:[d.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],C.prototype,"lockRasterIds",void 0);l.__decorate([Q.property({type:String,json:{type:m.jsonValues,write:{target:"mosaicMethod",writer:m.write}}})],C.prototype,
"method",void 0);l.__decorate([U.reader("method",["mosaicMethod","defaultMosaicMethod"])],C.prototype,"readMethod",null);l.__decorate([Q.property({type:[p],json:{write:!0}})],C.prototype,"multidimensionalDefinition",void 0);l.__decorate([T.writer("multidimensionalDefinition")],C.prototype,"writeMultidimensionalDefinition",null);l.__decorate([Q.property({type:[d.Integer],json:{name:"fids",write:!0}})],C.prototype,"objectIds",void 0);l.__decorate([Q.property({json:{type:e.jsonValues,read:{reader:e.read},
write:{target:"mosaicOperation",writer:e.write}}})],C.prototype,"operation",void 0);l.__decorate([U.reader("operation",["mosaicOperation","mosaicOperator"])],C.prototype,"readOperation",null);l.__decorate([Q.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],C.prototype,"sortField",void 0);l.__decorate([Q.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],C.prototype,
"sortValue",void 0);l.__decorate([P.cast("sortValue")],C.prototype,"castSortValue",null);l.__decorate([Q.property({type:g,json:{write:!0}})],C.prototype,"viewpoint",void 0);l.__decorate([Q.property({type:String,json:{write:!0}})],C.prototype,"where",void 0);return C=n=l.__decorate([L.subclass("esri.layers.support.MosaicRule")],C)})},"esri/layers/support/imageBitmapUtils":function(){define(["exports","../../core/Error","../../core/promiseUtils"],function(l,u,C){l.createBitmap=async function(D,x,K){let Q;
try{Q=await createImageBitmap(D)}catch(P){throw new u("request:server",`Unable to load ${x}`,{url:x,error:P});}C.throwIfAborted(K);return Q};l.createTileBitmap=async function(D,x,K,Q,P){let U;try{U=await createImageBitmap(D)}catch(L){throw new u("request:server",`Unable to load tile ${x}/${K}/${Q}`,{error:L,level:x,row:K,col:Q});}C.throwIfAborted(P);return U};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/MultidimensionalSubset":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Polygon ../../geometry/support/jsonUtils ./DimensionalDefinition ../../geometry/Geometry".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g){var p;u={base:g,key:"type",typeMap:{extent:U,polygon:L}};C=p=class extends C.JSONSupport{constructor(q){super(q);this.subsetDefinitions=this.areaOfInterest=null}get dimensions(){var {subsetDefinitions:q}=this;if(null==q||0===q.length)return[];const n=new Map;q.forEach(e=>{if(e.dimensionName){if(Array.isArray(e.values[0])){var m=e.values;var r=m[0][0];m=m[e.values.length-1][1]}else m=e.values,r=m[0],m=m[e.values.length-1];n.has(e.dimensionName)?(e=n.get(e.dimensionName),
e[0]=Math.min(r,e[0]),e[1]=Math.max(m,e[1])):n.set(e.dimensionName,[r,m])}});q=[];for(const e of n)q.push({name:e[0],extent:e[1]});return q}get variables(){const {subsetDefinitions:q}=this;if(null==q||0===q.length)return[];const n=new Set;q.forEach(e=>{e.variableName&&n.add(e.variableName)});return[...n]}clone(){const q=this.subsetDefinitions?.map(e=>e.clone()),n=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new p({areaOfInterest:n,subsetDefinitions:q})}};l.__decorate([D.property({types:u,
json:{read:T.fromJSON,write:!0}})],C.prototype,"areaOfInterest",void 0);l.__decorate([D.property({readOnly:!0})],C.prototype,"dimensions",null);l.__decorate([D.property({readOnly:!0})],C.prototype,"variables",null);l.__decorate([D.property({type:[d],json:{write:!0}})],C.prototype,"subsetDefinitions",void 0);return C=p=l.__decorate([P.subclass("esri.layers.support.MultidimensionalSubset")],C)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterBandInfo ./RasterSensorInfo ./RasterStorageInfo".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T){var d;u=d=class extends u.JSONSupport{constructor(g){super(g);this.extent=this.colormap=this.bandCount=this.attributeTable=null;this.format=void 0;this.histograms=this.width=this.height=null;this.keyProperties={};this.pixelType=this.pixelSize=this.noDataValue=this.multidimensionalInfo=null;this.isPseudoSpatialReference=!1;this.transform=this.storageInfo=this.statistics=this.spatialReference=null}get bandInfos(){var g=this.keyProperties.BandProperties,{bandCount:p}=
this;if(!g?.length||g.length<p){g=[];for(let q=1;q<=p;q++)g.push(new U({name:"band_"+q}));return g}p=g.map(q=>U.fromJSON(q));for(g=0;g<p.length;g++)p[g].name=p[g].name||"band_"+(g+1);return p}get dataType(){const g=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===g?"standard-time":g}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(g){g&&this._set("nativeExtent",g)}get nativePixelSize(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;
const g=this.nativeExtent;return{x:g.width/this.width,y:g.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return L.fromJSON(this.keyProperties)}clone(){return new d({attributeTable:C.clone(this.attributeTable),bandCount:this.bandCount,colormap:C.clone(this.colormap),extent:C.clone(this.extent),nativePixelSize:C.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:C.clone(this.histograms),
keyProperties:C.clone(this.keyProperties),multidimensionalInfo:C.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:C.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:C.clone(this.spatialReference),statistics:C.clone(this.statistics),storageInfo:C.clone(this.storageInfo),transform:C.clone(this.transform)})}};l.__decorate([D.property({json:{write:!0}})],u.prototype,"attributeTable",void 0);l.__decorate([D.property({json:{write:!0}})],
u.prototype,"bandCount",void 0);l.__decorate([D.property({readOnly:!0})],u.prototype,"bandInfos",null);l.__decorate([D.property({json:{write:!0}})],u.prototype,"colormap",void 0);l.__decorate([D.property({type:String,readOnly:!0})],u.prototype,"dataType",null);l.__decorate([D.property({type:Q,json:{write:!0}})],u.prototype,"extent",void 0);l.__decorate([D.property({type:Q,json:{write:!0}})],u.prototype,"nativeExtent",null);l.__decorate([D.property({json:{write:!0}})],u.prototype,"nativePixelSize",
null);l.__decorate([D.property({json:{write:!0}})],u.prototype,"format",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"height",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"width",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"hasMultidimensionalTranspose",null);l.__decorate([D.property({json:{write:!0}})],u.prototype,"histograms",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"keyProperties",void 0);l.__decorate([D.property({json:{write:!0}})],
u.prototype,"multidimensionalInfo",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"noDataValue",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"pixelSize",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"pixelType",void 0);l.__decorate([D.property()],u.prototype,"isPseudoSpatialReference",void 0);l.__decorate([D.property({readOnly:!0})],u.prototype,"sensorInfo",null);l.__decorate([D.property({type:P,json:{write:!0}})],u.prototype,"spatialReference",
void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"statistics",void 0);l.__decorate([D.property({type:T,json:{write:!0}})],u.prototype,"storageInfo",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"transform",void 0);return u=d=l.__decorate([K.subclass("esri.layers.support.RasterInfo")],u)})},"esri/layers/support/RasterBandInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,u,C,D,x,K,Q){function P(L){L=Number(L);return isNaN(L)?void 0:L}var U;u=U=class extends u.JSONSupport{constructor(){super(...arguments);this.name=null;this.solarIrradiance=this.reflectanceGain=this.reflectanceBias=this.radianceGain=this.radianceBias=this.maxWavelength=this.minWavelength=void 0}clone(){return new U({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,
reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};l.__decorate([C.property({json:{name:"BandName",write:!0}})],u.prototype,"name",void 0);l.__decorate([C.property({json:{name:"WavelengthMin",read:{reader:P},write:!0}})],u.prototype,"minWavelength",void 0);l.__decorate([C.property({json:{name:"WavelengthMax",read:{reader:P},write:!0}})],u.prototype,"maxWavelength",void 0);l.__decorate([C.property({json:{name:"RadianceBias",read:{reader:P},write:!0}})],u.prototype,"radianceBias",
void 0);l.__decorate([C.property({json:{name:"RadianceGain",read:{reader:P},write:!0}})],u.prototype,"radianceGain",void 0);l.__decorate([C.property({json:{name:"ReflectanceBias",read:{reader:P},write:!0}})],u.prototype,"reflectanceBias",void 0);l.__decorate([C.property({json:{name:"ReflectanceGain",read:{reader:P},write:!0}})],u.prototype,"reflectanceGain",void 0);l.__decorate([C.property({json:{name:"SolarIrradiance",read:{reader:P},write:!0}})],u.prototype,"solarIrradiance",void 0);return u=U=
l.__decorate([Q.subclass("esri.layers.support.RasterBandInfo")],u)})},"esri/layers/support/RasterSensorInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(l,u,C,D,x,K,Q,P,U){function L(d){d=Number(d);return isNaN(d)?
void 0:d}var T;u=T=class extends u.JSONSupport{constructor(){super(...arguments);this.productName=this.cloudCover=this.acquisitionDate=void 0;this.sensorName=null;this.sunElevation=this.sunAzimuth=this.sensorElevation=this.sensorAzimuth=void 0}readAcquisitionDate(d){return new Date(d)}writeAcquisitionDate(d,g){g.AcquisitionDate=d.getTime()}clone(){return new T({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,
sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};l.__decorate([C.property({json:{name:"AcquisitionDate",write:!0}})],u.prototype,"acquisitionDate",void 0);l.__decorate([Q.reader("acquisitionDate")],u.prototype,"readAcquisitionDate",null);l.__decorate([U.writer("acquisitionDate")],u.prototype,"writeAcquisitionDate",null);l.__decorate([C.property({json:{name:"CloudCover",read:{reader:L},write:!0}})],u.prototype,"cloudCover",void 0);l.__decorate([C.property({json:{name:"ProductName",
write:!0}})],u.prototype,"productName",void 0);l.__decorate([C.property({json:{name:"SensorName",write:!0}})],u.prototype,"sensorName",void 0);l.__decorate([C.property({json:{name:"SensorAzimuth",read:{reader:L},write:!0}})],u.prototype,"sensorAzimuth",void 0);l.__decorate([C.property({json:{name:"SensorElevation",read:{reader:L},write:!0}})],u.prototype,"sensorElevation",void 0);l.__decorate([C.property({json:{name:"SunAzimuth",read:{reader:L},write:!0}})],u.prototype,"sunAzimuth",void 0);l.__decorate([C.property({json:{name:"SunElevation",
read:{reader:L},write:!0}})],u.prototype,"sunElevation",void 0);return u=T=l.__decorate([P.subclass("esri.layers.support.RasterSensorInfo")],u)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),function(l,u,C,D,x,K,Q){var P;u=P=class extends u.JSONSupport{constructor(){super(...arguments);
this.blockHeight=this.blockWidth=void 0;this.maximumPyramidLevel=this.firstPyramidLevel=this.origin=this.compression=null;this.pyramidScalingFactor=2;this.pyramidBlockHeight=this.pyramidBlockWidth=null;this.isVirtualTileInfo=!1;this.blockBoundary=this.transposeInfo=this.tileInfo=null}clone(){return new P({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:C.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,
pyramidResolutions:C.clone(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:C.clone(this.tileInfo),transposeInfo:C.clone(this.transposeInfo),blockBoundary:C.clone(this.blockBoundary)})}};l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"blockWidth",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,
"blockHeight",void 0);l.__decorate([D.property({type:String,json:{write:!0}})],u.prototype,"compression",void 0);l.__decorate([D.property({type:Q,json:{write:!0}})],u.prototype,"origin",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"firstPyramidLevel",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"maximumPyramidLevel",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"pyramidResolutions",void 0);l.__decorate([D.property({type:Number,
json:{write:!0}})],u.prototype,"pyramidScalingFactor",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"pyramidBlockWidth",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"pyramidBlockHeight",void 0);l.__decorate([D.property({type:Boolean,json:{write:!0}})],u.prototype,"isVirtualTileInfo",void 0);l.__decorate([D.property({json:{write:!0}})],u.prototype,"tileInfo",void 0);l.__decorate([D.property()],u.prototype,"transposeInfo",void 0);l.__decorate([D.property()],
u.prototype,"blockBoundary",void 0);return u=P=l.__decorate([K.subclass("esri.layers.support.RasterStorageInfo")],u)})},"esri/layers/support/RasterJobHandler":function(){define(["../../core/Error","../../core/workers/workers","./PixelBlock"],function(l,u,C){class D{constructor(){this._workerThread=null;this._destroyed=!1}async initialize(){const x=await u.open("RasterWorker");this._destroyed?x.close():this._workerThread=x}destroy(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),
this._workerThread=null)}async convertVectorFieldData(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");return(x=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:x.pixelBlock.toJSON(),type:x.dataType},K))?new C(x):null}computeStatisticsHistograms(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:x.pixelBlock.toJSON()},
K)}async decode(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");return(x=await this._workerThread.invoke("decode",x,K))?new C(x):null}async symbolize(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");x={extent:x.extent?.toJSON(),pixelBlock:x.pixelBlock?.toJSON(),simpleStretchParams:x.simpleStretchParams,bandIds:x.bandIds};return(K=await this._workerThread.invoke("symbolize",x,K))?
new C(K):null}async updateSymbolizer(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");const Q=x?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:x.toJSON(),histograms:Q},K))}async updateRasterFunction(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:x.toJSON()},
K))}async process(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");return(x=await this._workerThread.invoke("process",{extent:x.extent?.toJSON(),primaryPixelSizes:x.primaryPixelSizes?.map(Q=>null!=Q?Q.toJSON():null),primaryPixelBlocks:x.primaryPixelBlocks.map(Q=>null!=Q?Q.toJSON():null),primaryRasterIds:x.primaryRasterIds},K))?new C(x):null}async stretch(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");
if(!x?.pixelBlock)return null;x={srcPixelBlock:x.pixelBlock.toJSON(),stretchParams:x.stretchParams};return(K=await this._workerThread.invoke("stretch",x,K))?new C(K):null}async split(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");if(!x?.pixelBlock)return null;x={srcPixelBlock:x.pixelBlock.toJSON(),tileSize:x.tileSize,maximumPyramidLevel:x.maximumPyramidLevel};const Q=await this._workerThread.invoke("split",x,K);Q&&Q.forEach((P,U)=>{Q.set(U,
P?C.fromJSON(P):null)});return Q}async estimateStatisticsHistograms(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");if(!x?.pixelBlock)return null;x={srcPixelBlock:x.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",x,K)}async mosaicAndTransform(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");if(!x?.srcPixelBlocks?.length)return{pixelBlock:null};
x={...x,srcPixelBlocks:x.srcPixelBlocks.map(Q=>null!=Q?Q.toJSON():null)};K=await this._workerThread.invoke("mosaicAndTransform",x,K);return{pixelBlock:K.pixelBlock?new C(K.pixelBlock):null,localNorthDirections:K.localNorthDirections}}async createFlowMesh(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");const Q={buffer:x.flowData.data.buffer,maskBuffer:x.flowData.mask.buffer,width:x.flowData.width,height:x.flowData.height},{meshType:P,simulationSettings:U}=
x;x=await this._workerThread.invoke("createFlowMesh",{meshType:P,flowData:Q,simulationSettings:U},{...K,transferList:[Q.buffer,Q.maskBuffer]});return{vertexData:new Float32Array(x.vertexBuffer),indexData:new Uint32Array(x.indexBuffer)}}getProjectionOffsetGrid(x,K){if(!this._workerThread)throw new l("raster-jobhandler:no-connection","no available worker connection");const Q=null!=x.datumTransformation?x.datumTransformation.steps.map(U=>({wkid:U.wkid,wkt:U.wkt,isInverse:U.isInverse})):null,P=null!=
x.rasterTransform?x.rasterTransform.toJSON():null;x={projectedExtent:x.projectedExtent.toJSON(),srcBufferExtent:x.srcBufferExtent.toJSON(),pixelSize:x.pixelSize,hasWrapAround:x.hasWrapAround,spacing:x.spacing,datumTransformationSteps:Q,rasterTransform:P,isAdaptive:x.isAdaptive,includeGCSGrid:x.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",x,K)}}return D})},"esri/layers/support/rasterDatasets/multidimensionalUtils":function(){define(["exports","../../../core/arrayUtils",
"../DimensionalDefinition"],function(l,u,C){function D(p,q,n){const e=q.shift();0===n.length&&n.push({sliceId:-1,multidimensionalDefinition:[]});const m=n.length;for(let r=0;r<m;r++){const a=n.shift().multidimensionalDefinition;e.values?.forEach(k=>{n.push({sliceId:-1,multidimensionalDefinition:[...a,{variableName:p,dimensionName:e.name,values:[k]}]})})}q.length&&D(p,q,n)}function x(p,q){return Array.isArray(p)?q[0]===q[1]?p[0]===q[0]||p[1]===q[0]:p[0]>=q[0]&&p[0]<=q[1]&&p[1]>=q[0]&&p[1]<=q[1]:p>=
q[0]&&p<=q[1]}function K(p,q){return p[0]<=q[0]&&p[1]>=q[0]||p[0]<=q[1]&&p[1]>=q[1]||p[0]>=q[0]&&p[1]<=q[1]}function Q(p){return 1===p.length?[p[0],p[0]]:[p[0],p[p.length-1]]}function P(p,q,n){if(!q?.subsetDefinitions?.length)return p;if(n){const {variables:m}=q;if(m.length&&!m.includes(n))return null;q=q.subsetDefinitions.find(r=>r.dimensionName===p.name&&r.variableName===n);if(!q?.values?.length)return p;q=Q(q.values)}else q=q.dimensions.find(({name:m})=>m===p.name)?.extent;const e=q;if(!e?.length)return p;
q=p.values.filter(m=>x(m,e));return{...p,extent:[...e],values:q}}function U(p,q,n){if(!q?.subsetDefinitions?.length)return!1;const {variables:e}=q;if(e.length&&p.some(({variableName:m})=>m&&!e.includes(m)))return!0;for(let m=0;m<p.length;m++){const r=p[m],a=q.subsetDefinitions.find(k=>(""===r.variableName||k.variableName===r.variableName)&&k.dimensionName===r.dimensionName);if(a?.values.length){const k=Q(a.values);if(!r.isSlice&&2===r.values.length&&!Array.isArray(r.values[0])&&r.values[0]!==r.values[1]&&
n){if(!K(r.values,k))return!0}else if(r.values.some(c=>!x(c,k)))return!0}}return!1}function L(p,q){var n=p.dimensions.find(({name:a})=>"StdTime"===a);if(null==n||null==q.start&&null==q.end)return q;q=q.clone();const {start:e,end:m}=q.toJSON(),r=e===m?[e]:null!=e&&null!=m?[e,m]:[e??m];if(2===r.length&&n?.extent.length&&(r[0]=Math.max(r[0],n.extent[0]),r[1]=Math.min(r[1],n.extent[1]??n.extent[0]),r[1]<r[0]))return null;n=new C({variableName:"",dimensionName:"StdTime",isSlice:1===r.length,values:r});
if(U([n],p,!0))return null;q.start=new Date(r[0]);q.end=new Date(r[1]??r[0]);return q}function T(p,q={}){const {multidimensionalInfo:n,keyProperties:e}=p;if(null==n)return null;const {variableName:m,multidimensionalSubset:r,multidimensionalDefinition:a}=q;p=null!=a?a[0]?.variableName:null;const k=m||p||e?.DefaultVariable;({variables:p}=n);r?.variables?.length&&(p=p.filter(({name:c})=>r.variables.includes(c)));return k?p.find(({name:c})=>c===k)??p[0]:p[0]}function d(p,q){var {values:n}=q;if(n?.length){q=
Array.isArray(n[0]);var e=Array.isArray(p);return q!==e?-1:q&&e?n.findIndex(r=>r[0]===p[0]&&r[1]===p[1]):n.indexOf(p)}({extent:e}=q);if(Array.isArray(p)||p<e[0]||p>e[1])return-1;n=q.interval||1;if("ISO8601"!==q.unit)return Math.round((p-e[0])/n);e=e[0];let m=-1;switch(q.intervalUnit?.toLowerCase()||"seconds"){case "seconds":m=Math.round((p-e)/1E3/n);break;case "minutes":m=Math.round((p-e)/6E4/n);break;case "hours":m=Math.round((p-e)/36E5/n);break;case "days":m=Math.round((p-e)/864E5/n);break;case "months":q=
(new Date(p)).getUTCFullYear()-(new Date(e)).getUTCFullYear();n=(new Date(e)).getUTCMonth();e=(new Date(p)).getUTCMonth();m=0===q?e-n:e+11-n+12*(q-1);break;case "years":m=Math.round(((new Date(p)).getUTCFullYear()-(new Date(e)).getUTCFullYear())/n);break;case "decades":m=Math.round(((new Date(p)).getUTCFullYear()-(new Date(e)).getUTCFullYear())/10/n)}return m}function g(p){var q=p.values?.length;if(q)return q;const {extent:n,unit:e}=p;q=p.interval||1;var m=n?n[1]-n[0]:0;if("ISO8601"!==e)return Math.round(m/
q);switch(p.intervalUnit?.toLowerCase()??"seconds"){case "seconds":q=Math.round(m/1E3/q);break;case "minutes":q=Math.round(m/6E4/q);break;case "hours":q=Math.round(m/36E5/q);break;case "days":q=Math.round(m/864E5/q);break;case "months":p=(new Date(n[1])).getUTCFullYear()-(new Date(n[0])).getUTCFullYear();q=(new Date(n[0])).getUTCMonth();m=(new Date(n[1])).getUTCMonth();q=0===p?m-q+1:m+11-q+12*(p-1)+1;break;case "years":q=Math.round(((new Date(n[1])).getUTCFullYear()-(new Date(n[0])).getUTCFullYear())/
q);break;case "decades":q=Math.round(((new Date(n[1])).getUTCFullYear()-(new Date(n[0])).getUTCFullYear())/10/q);break;default:q=0}return q}l.createSlices=function(p,q){const n=[];let e=0;(q?p.variables.filter(m=>m.name.toLowerCase()===q.toLowerCase()):[...p.variables].sort((m,r)=>m.name>r.name?1:-1)).forEach(m=>{const r=[],a=[...m.dimensions].sort((k,c)=>k.name>c.name?-1:1);D(m.name,a,r);r.forEach(k=>{n.push({...k,sliceId:e++})})});return n};l.getDefaultMultidimensionalDefinition=function(p,q={}){var n=
T(p,q);if(!n)return null;p=[];const {dimensions:e,name:m}=n;if(0===e.length)return[new C({variableName:m,dimensionName:"",values:[],isSlice:!0})];for(n=0;n<e.length;n++){const r=P(e[n],q.multidimensionalSubset,m);if(!r)return null;const {values:a,extent:k}=r;let c=a?.[0]??k[0];"stdz"===r.name.toLowerCase()&&!r.hasRanges&&Math.abs(k[1])<=Math.abs(k[0])&&(c=a?.length?a[a.length-1]:k[1]);p.push(new C({variableName:m,dimensionName:r.name,values:[c],isSlice:q.useRangeForRangedDimensionInfo?!!r.hasRanges:
!0}))}return p};l.getDefaultVariablInfo=T;l.getSliceIds=function(p,q,n){let e=p;q&&(q=[...q].sort((m,r)=>m.dimensionName<r.dimensionName?-1:1),q.forEach(({dimensionName:m,values:r,isSlice:a})=>{r.length&&(e=e.filter(k=>{k=k.multidimensionalDefinition.find(h=>h.dimensionName===m);if(null==k)return!1;const c=k.values[0];return"number"===typeof c?"number"===typeof r[0]?r.includes(c):r.some(h=>h[0]<=c&&h[1]>=c):"number"===typeof r[0]?r.some(h=>c[0]<=h&&c[1]>=h):a?r.some(h=>h[0]===c[0]&&h[0]===c[1]):r.some(h=>
h[0]>=c[0]&&h[0]<=c[1]||h[1]>=c[0]&&h[1]<=c[1]||h[0]<c[0]&&h[1]>c[1])}))}));if(e.length&&null!=n?.start&&null!=n.end){const m=n.start.getTime(),r=n.end.getTime(),a=e[0].multidimensionalDefinition.findIndex(k=>"StdTime"===k.dimensionName);-1<a&&(e=e.filter(k=>{k=k.multidimensionalDefinition[a].values[0];return m<=k&&r>=k}))}return e.map(m=>m.sliceId)};l.getSliceIndex=function(p,q){let n=0;var e=p[0].variableName;q=[...q.variables].sort((r,a)=>r.name>a.name?1:-1);for(var m=0;m<q.length;m++){const r=
q[m],a=[...r.dimensions].sort((k,c)=>k.name>c.name?-1:1);if(r.name!==e)n+=a.map(k=>g(k)).reduce((k,c)=>k*c);else{e=a.map(k=>g(k));q=a.length;for(let k=0;k<q;k++){m=p.find(c=>c.dimensionName===a[k].name);if(null==m)return null;m=d(m.values[0],a[k]);if(-1===m)return null;e.shift();n=k===q-1?n+m:n+m*e.reduce((c,h)=>c*h)}break}}return n};l.getSubsetVariablesFromMdInfo=function(p,q){if(null==q||null==p)return null;q=q.variables.map(n=>({...n}));p?.variables?.length&&(q=q.filter(({name:n})=>p.variables.includes(n)),
q.forEach(n=>{n.dimensions=n.dimensions.map(e=>P(e,p,n.name)).filter(u.isSome)}));return q};l.hasExcludedVariableOrDimension=U;l.intersectMultimensionalSubset=function(p,q){if(null==p)return{isOutside:!1};const {geometry:n,timeExtent:e,multidimensionalDefinition:m}=q;q=null;if(null!=e&&(q=L(p,e),null==q))return{isOutside:!0};const {areaOfInterest:r}=p;if(r&&n){const a="point"===n.type?n:"extent"===n.type?n.center:"polygon"===n.type?n.centroid:null;if(a&&!r.contains(a))return{isOutside:!0}}return null!=
m&&m.length&&U(m,p,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:n,timeExtent:q,multidimensionalDefinition:m}}};l.isMultiSliceOrRangeDefinition=function(p){return p?.length?p.some(q=>{if(null==q.values)return!0;const n=q.values.length;return 0===n||1<n||!q.isSlice&&Array.isArray(q.values[0])}):!1};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ./pixelRangeUtils ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g){async function p(v,w){if(!g.isPlatformLittleEndian)throw new u("rasterCoded:decode","lerc decoder is not supported on big endian platform");await Q.load();const {offset:B}=w,{width:F,height:I,pixelType:G,statistics:N,depthCount:z,noDataValues:A,bandMasks:J,pixels:R,mask:H}=Q.decode(v,{inputOffset:B,returnInterleaved:w.returnInterleaved});v=new D({width:F,height:I,pixelType:G.toLowerCase(),pixels:R,mask:H,statistics:N,bandMasks:J,depthCount:z,noDataValues:A});N?.length||
v.updateStatistics();return v}async function q(v,w){v=await d.decode(v,{...w,noDataValue:null});C.assertIsSome(v);v=new D({width:v.width,height:v.height,pixels:v.pixels,pixelType:v.pixelType.toLowerCase(),mask:v.mask,bandMasks:v.bandMasks,statistics:null});v.updateStatistics();return v}async function n(v,w){v=await d.decodeTileOrStrip(v,w.customOptions);v=new D({width:v.width,height:v.height,pixels:v.pixels,pixelType:v.pixelType.toLowerCase(),mask:v.mask,statistics:null});v.updateStatistics();return v}
function e(v,w){const B=w.pixelType||"u8",F=D.getPixelArrayConstructor(B),I="u8"===B?v:new F(v.buffer),G=[],N=w.planes||1;if(1===N)G.push(I);else for(let z=0;z<N;z++){const A=(w.width||1)*(w.height||v.length),J=new F(A);for(let R=0;R<A;R++)J[R]=I[R*N+z];G.push(J)}v=new D({width:w.width||1,height:w.height||v.length,pixels:G,pixelType:B,statistics:null});v.updateStatistics();return v}function m(v,w){v=(new L.Zlib(new Uint8Array(v))).getBytes();return e(v,w)}function r(v,w){v=P.decode(v,w.offset,w.eof,
!w.isInputBigEndian);return e(v,w)}function a(v,w){v=K.decode(v,w.hasNoZlibMask??void 0);v=new D({width:v.width,height:v.height,pixels:v.pixels,pixelType:"U8",mask:v.mask,statistics:null});v.updateStatistics();return v}function k(v,w){v=new Uint8Array(v);v=new t(v);const {width:B,height:F}=w;w=B*F;v=v.decode();let I=0;var G=0;let N;G=new Uint8Array(w);for(I=0;I<w;I++)G[I]=v[4*I+3];const z=new D({width:B,height:F,pixels:[],pixelType:"U8",mask:G,statistics:[]});for(I=0;3>I;I++){N=new Uint8Array(w);
for(G=0;G<w;G++)N[G]=v[4*G+I];z.addData({pixels:N})}z.updateStatistics();return z}async function c(v,w,B,F){v=await (new x).decode(v,{applyJpegMask:!1,format:w,...B},F);v=new D(v);v.updateStatistics();return v}function h(v){if(null==v)throw new u("rasterCodec:decode","parameter encodeddata is required.");v=new Uint8Array(v,0,10);let w="";255===v[0]&&216===v[1]?w="jpg":137===v[0]&&80===v[1]&&78===v[2]&&71===v[3]?w="png":67===v[0]&&110===v[1]&&116===v[2]&&90===v[3]&&73===v[4]&&109===v[5]&&97===v[6]&&
103===v[7]&&101===v[8]&&32===v[9]?w="lerc":76===v[0]&&101===v[1]&&114===v[2]&&99===v[3]&&50===v[4]&&32===v[5]?w="lerc2":73===v[0]&&73===v[1]&&42===v[2]&&0===v[3]||77===v[0]&&77===v[1]&&0===v[2]&&42===v[3]||73===v[0]&&73===v[1]&&43===v[2]&&0===v[3]||77===v[0]&&77===v[1]&&0===v[2]&&43===v[3]?w="tiff":71===v[0]&&73===v[1]&&70===v[2]?w="gif":66===v[0]&&77===v[1]?w="bmp":String.fromCharCode.apply(null,v).toLowerCase().includes("error")&&(w="error");return w}function b(v){let w=null;switch(v){case "lerc":case "lerc2":w=
p;break;case "jpg":w=a;break;case "png":w=k;break;case "bsq":case "bip":w=(B,F)=>{var I=F.pixelType,G=null;let N=null;switch(I?I.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":N=255;G=Uint8Array;break;case "u16":N=N||65535;G=Uint16Array;break;case "u32":N=N||2**32-1;G=Uint32Array;break;case "s8":N=N||-128;G=Int8Array;break;case "s16":N=N||-32768;G=Int16Array;break;case "s32":N=N||-(2**31);G=Int32Array;break;default:G=Float32Array}({pixelTypeCtor:I}={pixelTypeCtor:G,noDataValue:N});G=
T.decode;B=G(B,{width:F.width,height:F.height,pixelType:I,format:v});F=new D({width:F.width,height:F.height,pixels:B.pixels,pixelType:F.pixelType,mask:B.mask,statistics:null});F.updateStatistics();return F};break;case "tiff":w=q;break;case "deflate":w=m;break;case "lzw":w=r;break;case "error":w=()=>{throw new u("rasterCodec:decode","input data contains error");};break;default:w=()=>{throw new u("rasterCodec:decode","unsupported raster format");}}return w}function f(v,w=1){if(v){var {pixels:B,width:F,
height:I,mask:G}=v;if(B&&0!==B.length){var N=B.length,z=F-1,A=I-1,J=[],R,H,O=null,M=D.getPixelArrayConstructor(v.pixelType);if(0===w){for(w=0;w<N;w++){var S=B[w];var W=new M(z*A);for(R=0;R<A;R++){var X=R*F;for(H=0;H<z;H++)W[R*z+H]=S[X+H]}J.push(W)}if(null!=G)for(O=new Uint8Array(z*A),R=0;R<A;R++)for(X=R*F,H=0;H<z;H++)O[R*z+H]=G[X+H]}else{for(w=0;w<N;w++){S=B[w];W=new M(z*A);for(R=0;R<A;R++)for(X=R*F,H=0;H<z;H++)W[R*z+H]=(S[X+H]+S[X+H+1]+S[X+F+H]+S[X+F+H+1])/4;J.push(W)}if(G)for(O=new Uint8Array(z*
A),R=0;R<A;R++)for(X=R*F,H=0;H<z;H++)O[R*z+H]=Math.min.apply(null,[G[X+H],G[X+H+1],G[X+F+H],G[X+F+H+1]])}v.width=z;v.height=A;v.mask=O;v.pixels=J}}}var t=function(v){function w(G){var N,z;this.data=G;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(z=null;;){var A=this.readUInt32();var J=G=void 0;G=[];for(J=0;4>J;++J)G.push(String.fromCharCode(this.data[this.pos++]));G=G.join("");switch(G){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();
this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(A);break;case "fcTL":z&&this.animation.frames.push(z);this.pos+=4;z={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};
G=this.readUInt16();A=this.readUInt16()||100;z.delay=1E3*G/A;z.disposeOp=this.data[this.pos++];z.blendOp=this.data[this.pos++];z.data=[];break;case "IDAT":case "fdAT":"fdAT"===G&&(this.pos+=4,A-=4);G=(null!=z?z.data:void 0)||this.imgData;for(J=0;0<=A?J<A:J>A;0<=A?++J:--J)G.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(A);A=255-this.transparency.indexed.length;if(0<A)for(G=0;0<=A?G<A:G>A;0<=A?++G:--G)this.transparency.indexed.push(255);
break;case 0:this.transparency.grayscale=this.read(A)[0];break;case 2:this.transparency.rgb=this.read(A)}break;case "tEXt":J=this.read(A);A=J.indexOf(0);G=String.fromCharCode.apply(String,J.slice(0,A));this.text[G]=String.fromCharCode.apply(String,J.slice(A+1));break;case "IEND":z&&this.animation.frames.push(z);a:{switch(this.colorType){case 0:case 3:case 4:z=1;break a;case 2:case 6:z=3;break a}z=void 0}this.colors=z;this.hasAlphaChannel=4===(N=this.colorType)||6===N;N=this.colors+(this.hasAlphaChannel?
1:0);this.pixelBitlength=this.bits*N;a:{switch(this.colors){case 1:N="DeviceGray";break a;case 3:N="DeviceRGB";break a}N=void 0}this.colorSpace=N;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=A}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var B;w.load=function(G,N,z){"function"===typeof N&&(z=N);var A=new XMLHttpRequest;A.open("GET",G,!0);A.responseType="arraybuffer";A.onload=function(){var J=new Uint8Array(A.response||A.mozResponseArrayBuffer);
J=new w(J);"function"===typeof(null!=N?N.getContext:void 0)&&J.render(N);return"function"===typeof z?z(J):void 0};return A.send(null)};w.prototype.read=function(G){var N;var z=[];for(N=0;0<=G?N<G:N>G;0<=G?++N:--N)z.push(this.data[this.pos++]);return z};w.prototype.readUInt32=function(){var G=this.data[this.pos++]<<24;var N=this.data[this.pos++]<<16;var z=this.data[this.pos++]<<8;var A=this.data[this.pos++];return G|N|z|A};w.prototype.readUInt16=function(){var G=this.data[this.pos++]<<8;var N=this.data[this.pos++];
return G|N};w.prototype.decodePixels=function(G){var N,z,A,J,R,H,O,M;null==G&&(G=this.imgData);if(0===G.length)return new Uint8Array(0);G=new L.Zlib(G);G=G.getBytes();var S=this.pixelBitlength/8;var W=S*this.width;var X=new Uint8Array(W*this.height);var ba=G.length;for(z=J=R=0;J<ba;){switch(G[J++]){case 0:for(A=N=0;N<W;A=N+=1)X[z++]=G[J++];break;case 1:for(A=H=0;H<W;A=H+=1){N=G[J++];var Y=A<S?0:X[z-S];X[z++]=(N+Y)%256}break;case 2:for(A=Y=0;Y<W;A=Y+=1){N=G[J++];var ca=(A-A%S)/S;H=R&&X[(R-1)*W+ca*
S+A%S];X[z++]=(H+N)%256}break;case 3:for(A=M=0;M<W;A=M+=1)N=G[J++],ca=(A-A%S)/S,Y=A<S?0:X[z-S],H=R&&X[(R-1)*W+ca*S+A%S],X[z++]=(N+Math.floor((Y+H)/2))%256;break;case 4:for(A=M=0;M<W;A=M+=1){N=G[J++];ca=(A-A%S)/S;Y=A<S?0:X[z-S];0===R?H=O=0:(H=X[(R-1)*W+ca*S+A%S],O=ca&&X[(R-1)*W+(ca-1)*S+A%S]);var Z=Y+H-O;A=Math.abs(Z-Y);ca=Math.abs(Z-H);Z=Math.abs(Z-O);Y=A<=ca&&A<=Z?Y:ca<=Z?H:O;X[z++]=(N+Y)%256}break;default:throw Error("Invalid filter algorithm: "+G[J-1]);}R++}return X};w.prototype.decodePalette=
function(){var G,N,z,A;var J=this.palette;var R=this.transparency.indexed||[];var H=new Uint8Array((R.length||0)+J.length);var O=0;J.length;var M=N=G=0;for(z=J.length;N<z;M=N+=3)H[O++]=J[M],H[O++]=J[M+1],H[O++]=J[M+2],H[O++]=null!=(A=R[G++])?A:255;return H};w.prototype.copyToImageData=function(G,N){var z,A;var J=this.colors;var R=null;var H=this.hasAlphaChannel;this.palette.length&&(R=null!=(z=this._decodedPalette)?z:this._decodedPalette=this.decodePalette(),J=4,H=!0);G=G.data||G;var O=G.length;var M=
R||N;z=A=0;if(1===J)for(;z<O;)J=R?4*N[z/4]:A,A=M[J++],G[z++]=A,G[z++]=A,G[z++]=A,G[z++]=H?M[J++]:this.transparency.grayscale&&this.transparency.grayscale===A?0:255,A=J;else for(;z<O;)J=R?4*N[z/4]:A,G[z++]=M[J++],G[z++]=M[J++],G[z++]=M[J++],G[z++]=H?M[J++]:this.transparency.rgb&&this.transparency.rgb[1]===M[J-3]&&this.transparency.rgb[3]===M[J-2]&&this.transparency.rgb[5]===M[J-1]?0:255,A=J};w.prototype.decode=function(){var G=new Uint8Array(this.width*this.height*4);this.copyToImageData(G,this.decodePixels());
return G};var F=(B=v.document&&v.document.createElement("canvas"))&&B.getContext("2d");var I=function(G){F.width=G.width;F.height=G.height;F.clearRect(0,0,G.width,G.height);F.putImageData(G,0,0);G=new Image;G.src=B.toDataURL();return G};w.prototype.decodeFrames=function(G){var N,z;if(this.animation){var A=this.animation.frames;var J=[];var R=N=0;for(z=A.length;N<z;R=++N){R=A[R];var H=G.createImageData(R.width,R.height);var O=this.decodePixels(new Uint8Array(R.data));this.copyToImageData(H,O);R.imageData=
H;J.push(R.image=I(H))}return J}};w.prototype.renderFrame=function(G,N){var z=this.animation.frames;var A=z[N];z=z[N-1];0===N&&G.clearRect(0,0,this.width,this.height);1===(null!=z?z.disposeOp:void 0)?G.clearRect(z.xOffset,z.yOffset,z.width,z.height):2===(null!=z?z.disposeOp:void 0)&&G.putImageData(z.imageData,z.xOffset,z.yOffset);0===A.blendOp&&G.clearRect(A.xOffset,A.yOffset,A.width,A.height);return G.drawImage(A.image,A.xOffset,A.yOffset)};w.prototype.animate=function(G){var N,z=this;var A=0;var J=
this.animation;var R=J.numFrames;var H=J.frames;var O=J.numPlays;return(N=function(){var M=A++%R;var S=H[M];z.renderFrame(G,M);if(1<R&&A/R<O)return z.animation._timeout=setTimeout(N,S.delay)})()};w.prototype.stopAnimation=function(){var G;return clearTimeout(null!=(G=this.animation)?G._timeout:void 0)};w.prototype.render=function(G){G._png&&G._png.stopAnimation();G._png=this;G.width=this.width;G.height=this.height;G=G.getContext("2d");if(this.animation)return this.decodeFrames(G),this.animate(G);
var N=G.createImageData(this.width,this.height);this.copyToImageData(N,this.decodePixels());return G.putImageData(N,0,0)};return w}(self);const y=new Set(["jpg","png","bmp","gif"]);l.decode=async function(v,w={},B){if(null==v)throw new u("rasterCodec:decode","missing encodeddata parameter.");let F=w.format?.toLowerCase();if(!("bsq"!==F&&"bip"!==F||null!=w.width&&null!=w.height))throw new u("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===F&&w.customOptions)return n(v,
w);if(!F||"bsq"!==F&&"bip"!==F&&"deflate"!==F&&"lzw"!==F)F=h(v);if(w.useCanvas&&y.has(F))return c(v,F,w,B);B=b(F);w.isPoint&&(w={...w},null!=w.width&&w.width++,null!=w.height&&w.height++);v=await B(v,w);if(!v)return v;"jpg"!==F&&null!=w.noDataValue&&1===v.depthCount&&U.convertNoDataToMask(v,w.noDataValue,{customFloatTolerance:w.tolerance});w.isPoint&&f(v);return v};l.getFormat=function(v){v=h(v);"lerc2"===v?v="lerc":"error"===v&&(v="");return v};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(l,u,C){class D{constructor(x){this._ctx=this._canvas=null;x&&(this._canvas=x.canvas,this._ctx=x.ctx||x.canvas&&x.canvas.getContext("2d"))}decode(x,K,Q){if(!x||10>x.byteLength)throw new l("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:P=0,height:U=0,format:L}=K;const {applyJpegMask:T}=K;if(T&&(!P||!U))throw new l("imagecanvasdecoder: decode",
"image width and height are needed to apply jpeg mask directly to canvas");return new Promise((d,g)=>{let p=null;"jpg"===L&&T&&(p=D._getMask(x,{width:P,height:U}));const q=new Blob([new Uint8Array(x)],{type:"jpg"==="image/"+L?"jpeg":L}),n=URL.createObjectURL(q),e=new Image;let m;e.src=n;e.onload=()=>{URL.revokeObjectURL(n);if(u.isAborted(Q))g(u.createAbortError());else{P=e.width;U=e.height;if(this._canvas&&this._ctx){if(this._canvas.width!==P||this._canvas.height!==U)this._canvas.width=P,this._canvas.height=
U;this._ctx.clearRect(0,0,P,U)}else this._canvas=document.createElement("canvas"),this._canvas.width=P,this._canvas.height=U,this._ctx=this._canvas.getContext("2d");this._ctx.drawImage(e,0,0);var r=this._ctx.getImageData(0,0,P,U);m=r.data;var a;if(K.renderOnCanvas){if(p)for(a=0;a<p.length;a++)m[4*a+3]=p[a]?255:0;this._ctx.putImageData(r,0,0);d(null)}else{r=P*U;var k=new Uint8Array(r),c=new Uint8Array(r),h=new Uint8Array(r);if(p)for(a=0;a<r;a++)k[a]=m[4*a],c[a]=m[4*a+1],h[a]=m[4*a+2];else for(p=new Uint8Array(r),
a=0;a<r;a++)k[a]=m[4*a],c[a]=m[4*a+1],h[a]=m[4*a+2],p[a]=m[4*a+3];d({width:P,height:U,pixels:[k,c,h],mask:p,pixelType:"u8"})}}};e.onerror=()=>{URL.revokeObjectURL(n);g("cannot load image")}})}static _getMask(x,K){let Q=null;try{var P=new Uint8Array(x);x=0;var U=P.length-2;for(x=Math.ceil(P.length/2);x<U&&(255!==P[x]||217!==P[x+1]);x++);x+=2;if(x<P.length-1){const L=(new C.Zlib(P.subarray(x))).getBytes();Q=new Uint8Array(K.width*K.height);K=0;for(P=0;P<L.length;P++)for(U=7;0<=U;U--)Q[K++]=L[P]>>U&
1}}catch(L){}return Q}}return D})},"esri/chunks/Zlib":function(){define(["exports","./_commonjsHelpers"],function(l,u){var C={exports:{}};C.exports;(function(D){(function(x){x=x();void 0!==x&&(D.exports=x)})(function(){var x=function(){function K(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}K.prototype={ensureBuffer:function(Q){var P=this.buffer,U=P?P.byteLength:0;if(Q<U)return P;for(var L=512;L<Q;)L<<=1;Q=new Uint8Array(L);for(L=0;L<U;++L)Q[L]=P[L];return this.buffer=Q},getByte:function(){for(var Q=
this.pos;this.bufferLength<=Q;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(Q){var P=this.pos;if(Q){this.ensureBuffer(P+Q);for(Q=P+Q;!this.eof&&this.bufferLength<Q;)this.readBlock();var U=this.bufferLength;Q>U&&(Q=U)}else{for(;!this.eof;)this.readBlock();Q=this.bufferLength}this.pos=Q;return this.buffer.subarray(P,Q)},lookChar:function(){for(var Q=this.pos;this.bufferLength<=Q;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},
getChar:function(){for(var Q=this.pos;this.bufferLength<=Q;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(Q,P,U){for(var L=Q+P;this.bufferLength<=L&&!this.eof;)this.readBlock();return new Stream(this.buffer,Q,P,U)},skip:function(Q){Q||(Q=1);this.pos+=Q},reset:function(){this.pos=0}};return K}();return function(){function K(g){throw Error(g);}function Q(g){var p=0,q=g[p++],n=g[p++];-1!=q&&-1!=n||K("Invalid header in flate stream");
8!=(q&15)&&K("Unknown compression method in flate stream");0!=((q<<8)+n)%31&&K("Bad FCHECK in flate stream");n&32&&K("FDICT bit set in flate stream");this.bytes=g;this.bytesPos=p;this.codeBuf=this.codeSize=0;x.call(this)}if(!self||!self.Uint32Array)return null;var P=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,
258,258,258]),L=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),T=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,
524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,
524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,
524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,
524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,
524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,
524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,
524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],d=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,
327707,327687,327703,327695,0]),5];Q.prototype=Object.create(x.prototype);Q.prototype.getBits=function(g){for(var p=this.codeSize,q=this.codeBuf,n=this.bytes,e=this.bytesPos,m;p<g;)"undefined"==typeof(m=n[e++])&&K("Bad encoding in flate stream"),q|=m<<p,p+=8;this.codeBuf=q>>g;this.codeSize=p-=g;this.bytesPos=e;return q&(1<<g)-1};Q.prototype.getCode=function(g){var p=g[0],q=g[1];g=this.codeSize;for(var n=this.codeBuf,e=this.bytes,m=this.bytesPos;g<q;){var r;"undefined"==typeof(r=e[m++])&&K("Bad encoding in flate stream");
n|=r<<g;g+=8}q=p[n&(1<<q)-1];p=q>>16;q&=65535;(0==g||g<p||0==p)&&K("Bad encoding in flate stream");this.codeBuf=n>>p;this.codeSize=g-p;this.bytesPos=m;return q};Q.prototype.generateHuffmanTable=function(g){for(var p=g.length,q=0,n=0;n<p;++n)g[n]>q&&(q=g[n]);for(var e=1<<q,m=new Uint32Array(e),r=1,a=0,k=2;r<=q;++r,a<<=1,k<<=1)for(var c=0;c<p;++c)if(g[c]==r){var h=0,b=a;for(n=0;n<r;++n)h=h<<1|b&1,b>>=1;for(n=h;n<e;n+=k)m[n]=r<<16|c;++a}return[m,q]};Q.prototype.readBlock=function(){function g(h,b,f,
t,y){for(h=h.getBits(f)+t;0<h--;)b[a++]=y}var p=this.getBits(3);p&1&&(this.eof=!0);p>>=1;if(0==p){var q=this.bytes,n=this.bytesPos,e;"undefined"==typeof(e=q[n++])&&K("Bad block header in flate stream");var m=e;"undefined"==typeof(e=q[n++])&&K("Bad block header in flate stream");m|=e<<8;"undefined"==typeof(e=q[n++])&&K("Bad block header in flate stream");p=e;"undefined"==typeof(e=q[n++])&&K("Bad block header in flate stream");(p|e<<8)!=(~m&65535)&&K("Bad uncompressed block length in flate stream");
this.codeSize=this.codeBuf=0;e=this.bufferLength;p=this.ensureBuffer(e+m);this.bufferLength=m=e+m;for(var r=e;r<m;++r){if("undefined"==typeof(e=q[n++])){this.eof=!0;break}p[r]=e}this.bytesPos=n}else{if(1==p)n=T,e=d;else if(2==p){p=this.getBits(5)+257;e=this.getBits(5)+1;q=this.getBits(4)+4;n=Array(P.length);for(var a=0;a<q;)n[P[a++]]=this.getBits(3);n=this.generateHuffmanTable(n);a=q=0;e=p+e;for(m=Array(e);a<e;)r=this.getCode(n),16==r?g(this,m,2,3,q):17==r?g(this,m,3,3,q=0):18==r?g(this,m,7,11,q=
0):m[a++]=q=r;n=this.generateHuffmanTable(m.slice(0,p));e=this.generateHuffmanTable(m.slice(p,e))}else K("Unknown block type in flate stream");m=(p=this.buffer)?p.length:0;for(r=this.bufferLength;;){var k=this.getCode(n);if(256>k)r+1>=m&&(p=this.ensureBuffer(r+1),m=p.length),p[r++]=k;else{if(256==k){this.bufferLength=r;break}k-=257;k=U[k];var c=k>>16;0<c&&(c=this.getBits(c));q=(k&65535)+c;k=this.getCode(e);k=L[k];c=k>>16;0<c&&(c=this.getBits(c));k=(k&65535)+c;r+q>=m&&(p=this.ensureBuffer(r+q),m=p.length);
for(c=0;c<q;++c,++r)p[r]=p[r-k]}}}};return Q}()})})(C);u=u.getDefaultExportFromCjs(C.exports);l.Zlib=u})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg","../../../chunks/Zlib"],function(l,u){class C{static decode(D,x=!1){const K=new Uint8Array(D);D=new l.JpegImage;D.parse(K);const {width:Q,height:P,numComponents:U,eof:L}=D,T=D.getData(Q,P,!0),d=Q*P;D=null;let g=0,p=0,q=0;if(!x&&L<K.length-1)try{var n=(new u.Zlib(K.subarray(L))).getBytes();D=new Uint8Array(d);
for(g=x=0;g<n.length;g++)for(q=7;0<=q;q--)D[x++]=n[g]>>q&1}catch{}if(1===U&&T.length===Q*P)n=new Uint8Array(T.buffer),n=[n,n,n];else{n=[];for(g=0;3>g;g++)n.push(new Uint8Array(d));for(p=q=0;p<d;p++)for(g=0;3>g;g++)n[g][p]=T[q++]}return{width:Q,height:P,pixels:n,mask:D}}}return C})},"esri/chunks/Jpg":function(){define(["exports","./_commonjsHelpers"],function(l,u){var C={exports:{}};C.exports;(function(D){(function(x){x=x();void 0!==x&&(D.exports=x)})(function(){var x=function(){function K(Q){this.message=
"JPEG error: "+Q}K.prototype=Error();K.prototype.name="JpegError";return K.constructor=K}();return function(){function K(){this.decodeTransform=null;this.colorTransform=-1}function Q(d,g){for(var p=0,q=[],n,e,m=16;0<m&&!d[m-1];)m--;q.push({children:[],index:0});var r=q[0],a;for(n=0;n<m;n++){for(e=0;e<d[n];e++){r=q.pop();for(r.children[r.index]=g[p];0<r.index;)r=q.pop();r.index++;for(q.push(r);q.length<=n;)q.push(a={children:[],index:0}),r.children[r.index]=a.children,r=a;p++}n+1<m&&(q.push(a={children:[],
index:0}),r.children[r.index]=a.children,r=a)}return q[0].children}function P(d,g,p,q,n,e,m,r,a){function k(){if(0<G)return G--,I>>G&1;I=d[g++];if(255===I){var ca=d[g++];if(ca)throw new x("unexpected marker "+(I<<8|ca).toString(16));}G=7;return I>>>7}function c(ca){for(;;){ca=ca[k()];if("number"===typeof ca)return ca;if("object"!==typeof ca)throw new x("invalid huffman sequence");}}function h(ca){for(var Z=0;0<ca;)Z=Z<<1|k(),ca--;return Z}function b(ca){if(1===ca)return 1===k()?1:-1;var Z=h(ca);return Z>=
1<<ca-1?Z:Z+(-1<<ca)+1}function f(ca,Z){var ea=c(ca.huffmanTableDC);ea=0===ea?0:b(ea);ca.blockData[Z]=ca.pred+=ea;for(ea=1;64>ea;){var ha=c(ca.huffmanTableAC),fa=ha&15;ha>>=4;if(0===fa){if(15>ha)break;ea+=16}else ea+=ha,ca.blockData[Z+T[ea]]=b(fa),ea++}}function t(ca,Z){var ea=c(ca.huffmanTableDC);ea=0===ea?0:b(ea)<<a;ca.blockData[Z]=ca.pred+=ea}function y(ca,Z){ca.blockData[Z]|=k()<<a}function v(ca,Z){if(0<N)N--;else for(var ea=e;ea<=m;){var ha=c(ca.huffmanTableAC),fa=ha&15;ha>>=4;if(0===fa){if(15>
ha){N=h(ha)+(1<<ha)-1;break}ea+=16}else ea+=ha,ca.blockData[Z+T[ea]]=b(fa)*(1<<a),ea++}}function w(ca,Z){for(var ea=e,ha=0,fa;ea<=m;){fa=T[ea];switch(z){case 0:ha=c(ca.huffmanTableAC);fa=ha&15;ha>>=4;if(0===fa)15>ha?(N=h(ha)+(1<<ha),z=4):(ha=16,z=1);else{if(1!==fa)throw new x("invalid ACn encoding");A=b(fa);z=ha?2:3}continue;case 1:case 2:ca.blockData[Z+fa]?ca.blockData[Z+fa]+=k()<<a:(ha--,0===ha&&(z=2===z?3:0));break;case 3:ca.blockData[Z+fa]?ca.blockData[Z+fa]+=k()<<a:(ca.blockData[Z+fa]=A<<a,z=
0);break;case 4:ca.blockData[Z+fa]&&(ca.blockData[Z+fa]+=k()<<a)}ea++}4===z&&(N--,0===N&&(z=0))}var B=p.mcusPerLine,F=g,I=0,G=0,N=0,z=0,A,J=q.length,R,H,O,M;r=p.progressive?0===e?0===r?t:y:0===r?v:w:f;var S=0;p=1===J?q[0].blocksPerLine*q[0].blocksPerColumn:B*p.mcusPerColumn;for(var W,X;S<p;){var ba=n?Math.min(p-S,n):p;for(R=0;R<J;R++)q[R].pred=0;N=0;if(1===J){var Y=q[0];for(M=0;M<ba;M++)r(Y,64*((Y.blocksPerLine+1)*(S/Y.blocksPerLine|0)+S%Y.blocksPerLine)),S++}else for(M=0;M<ba;M++){for(R=0;R<J;R++)for(Y=
q[R],W=Y.h,X=Y.v,H=0;H<X;H++)for(O=0;O<W;O++)r(Y,64*((Y.blocksPerLine+1)*((S/B|0)*Y.v+H)+(S%B*Y.h+O)));S++}G=0;(Y=L(d,g))&&Y.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+Y.invalid),g=Y.offset);Y=Y&&Y.marker;if(!Y||65280>=Y)throw new x("marker was not found");if(65488<=Y&&65495>=Y)g+=2;else break}(Y=L(d,g))&&Y.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+Y.invalid),g=Y.offset);return g-F}function U(d,g){d=g.blocksPerLine;for(var p=g.blocksPerColumn,
q=new Int16Array(64),n=0;n<p;n++)for(var e=0;e<d;e++){var m=void 0,r=void 0,a=void 0,k=void 0,c=void 0,h=void 0,b=void 0,f=void 0,t=c=h=k=r=m=void 0,y=void 0,v=void 0,w=void 0,B=64*((g.blocksPerLine+1)*n+e),F=q,I=g.quantizationTable,G=g.blockData;if(!I)throw new x("missing required Quantization Table.");for(var N=0;64>N;N+=8)m=G[B+N],f=G[B+N+1],b=G[B+N+2],h=G[B+N+3],c=G[B+N+4],k=G[B+N+5],a=G[B+N+6],r=G[B+N+7],m*=I[N],0===(f|b|h|c|k|a|r)?(m=5793*m+512>>10,F[N]=m,F[N+1]=m,F[N+2]=m,F[N+3]=m,F[N+4]=m,
F[N+5]=m,F[N+6]=m,F[N+7]=m):(f*=I[N+1],b*=I[N+2],h*=I[N+3],c*=I[N+4],k*=I[N+5],a*=I[N+6],r*=I[N+7],w=5793*m+128>>8,v=5793*c+128>>8,y=b,t=a,c=2896*(f-r)+128>>8,r=2896*(f+r)+128>>8,h<<=4,k<<=4,w=w+v+1>>1,v=w-v,m=3784*y+1567*t+128>>8,y=1567*y-3784*t+128>>8,t=m,c=c+k+1>>1,k=c-k,r=r+h+1>>1,h=r-h,w=w+t+1>>1,t=w-t,v=v+y+1>>1,y=v-y,m=2276*c+3406*r+2048>>12,c=3406*c-2276*r+2048>>12,r=m,m=799*h+4017*k+2048>>12,h=4017*h-799*k+2048>>12,k=m,F[N]=w+r,F[N+7]=w-r,F[N+1]=v+k,F[N+6]=v-k,F[N+2]=y+h,F[N+5]=y-h,F[N+3]=
t+c,F[N+4]=t-c);for(I=0;8>I;++I)m=F[I],f=F[I+8],b=F[I+16],h=F[I+24],c=F[I+32],k=F[I+40],a=F[I+48],r=F[I+56],0===(f|b|h|c|k|a|r)?(m=5793*m+8192>>14,m=-2040>m?0:2024<=m?255:m+2056>>4,G[B+I]=m,G[B+I+8]=m,G[B+I+16]=m,G[B+I+24]=m,G[B+I+32]=m,G[B+I+40]=m,G[B+I+48]=m,G[B+I+56]=m):(w=5793*m+2048>>12,v=5793*c+2048>>12,y=b,t=a,c=2896*(f-r)+2048>>12,r=2896*(f+r)+2048>>12,w=(w+v+1>>1)+4112,v=w-v,m=3784*y+1567*t+2048>>12,y=1567*y-3784*t+2048>>12,t=m,c=c+k+1>>1,k=c-k,r=r+h+1>>1,h=r-h,w=w+t+1>>1,t=w-t,v=v+y+1>>
1,y=v-y,m=2276*c+3406*r+2048>>12,c=3406*c-2276*r+2048>>12,r=m,m=799*h+4017*k+2048>>12,h=4017*h-799*k+2048>>12,k=m,m=w+r,r=w-r,f=v+k,a=v-k,b=y+h,k=y-h,h=t+c,c=t-c,m=16>m?0:4080<=m?255:m>>4,f=16>f?0:4080<=f?255:f>>4,b=16>b?0:4080<=b?255:b>>4,h=16>h?0:4080<=h?255:h>>4,c=16>c?0:4080<=c?255:c>>4,k=16>k?0:4080<=k?255:k>>4,a=16>a?0:4080<=a?255:a>>4,r=16>r?0:4080<=r?255:r>>4,G[B+I]=m,G[B+I+8]=f,G[B+I+16]=b,G[B+I+24]=h,G[B+I+32]=c,G[B+I+40]=k,G[B+I+48]=a,G[B+I+56]=r)}return g.blockData}function L(d,g,p){var q=
d.length-1;p=p<g?p:g;if(g>=q)return null;var n=d[g]<<8|d[g+1];if(65472<=n&&65534>=n)return{invalid:null,marker:n,offset:g};for(g=d[p]<<8|d[p+1];!(65472<=g&&65534>=g);){if(++p>=q)return null;g=d[p]<<8|d[p+1]}return{invalid:n.toString(16),marker:g,offset:p}}if(!self||!self.Uint8ClampedArray)return null;var T=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,
63]);K.prototype={parse:function(d){function g(){var I=d[n]<<8|d[n+1];n+=2;return I}function p(){var I=g();I=n+I-2;var G=L(d,I,n);G&&G.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+G.invalid),I=G.offset);I=d.subarray(n,I);n+=I.length;return I}function q(I){for(var G=Math.ceil(I.samplesPerLine/8/I.maxH),N=Math.ceil(I.scanLines/8/I.maxV),z=0;z<I.components.length;z++){F=I.components[z];var A=Math.ceil(Math.ceil(I.samplesPerLine/8)*F.h/I.maxH),J=Math.ceil(Math.ceil(I.scanLines/
8)*F.v/I.maxV);F.blockData=new Int16Array(64*N*F.v*(G*F.h+1));F.blocksPerLine=A;F.blocksPerColumn=J}I.mcusPerLine=G;I.mcusPerColumn=N}var n=0,e=null,m=null,r=[],a=[],k=[],c=g();if(65496!==c)throw new x("SOI not found");for(c=g();65497!==c;){switch(c){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var h=p();65504===c&&74===h[0]&&70===h[1]&&73===h[2]&&70===h[3]&&
0===h[4]&&(e={version:{major:h[5],minor:h[6]},densityUnits:h[7],xDensity:h[8]<<8|h[9],yDensity:h[10]<<8|h[11],thumbWidth:h[12],thumbHeight:h[13],thumbData:h.subarray(14,14+3*h[12]*h[13])});65518===c&&65===h[0]&&100===h[1]&&111===h[2]&&98===h[3]&&101===h[4]&&(m={version:h[5]<<8|h[6],flags0:h[7]<<8|h[8],flags1:h[9]<<8|h[10],transformCode:h[11]});break;case 65499:c=g()+n-2;for(var b;n<c;){var f=d[n++],t=new Uint16Array(64);if(0===f>>4)for(h=0;64>h;h++)b=T[h],t[b]=d[n++];else if(1===f>>4)for(h=0;64>h;h++)b=
T[h],t[b]=g();else throw new x("DQT - invalid table spec");r[f&15]=t}break;case 65472:case 65473:case 65474:if(y)throw new x("Only single frame JPEGs supported");g();var y={};y.extended=65473===c;y.progressive=65474===c;y.precision=d[n++];y.scanLines=g();y.samplesPerLine=g();y.components=[];y.componentIds={};h=d[n++];for(c=t=f=0;c<h;c++){b=d[n];var v=d[n+1]>>4;var w=d[n+1]&15;f<v&&(f=v);t<w&&(t=w);v=y.components.push({h:v,v:w,quantizationId:d[n+2],quantizationTable:null});y.componentIds[b]=v-1;n+=
3}y.maxH=f;y.maxV=t;q(y);break;case 65476:b=g();for(c=2;c<b;){f=d[n++];t=new Uint8Array(16);for(h=v=0;16>h;h++,n++)v+=t[h]=d[n];w=new Uint8Array(v);for(h=0;h<v;h++,n++)w[h]=d[n];c+=17+v;(0===f>>4?k:a)[f&15]=Q(t,w)}break;case 65501:g();var B=g();break;case 65498:g();b=d[n++];h=[];for(c=0;c<b;c++){f=y.componentIds[d[n++]];var F=y.components[f];f=d[n++];F.huffmanTableDC=k[f>>4];F.huffmanTableAC=a[f&15];h.push(F)}c=d[n++];b=d[n++];f=d[n++];c=P(d,n,y,h,B,c,b,f>>4,f&15);n+=c;break;case 65535:255!==d[n]&&
n--;break;default:if(255===d[n-3]&&192<=d[n-2]&&254>=d[n-2])n-=3;else throw new x("unknown marker "+c.toString(16));}c=g()}this.width=y.samplesPerLine;this.height=y.scanLines;this.jfif=e;this.eof=n;this.adobe=m;this.components=[];for(c=0;c<y.components.length;c++){F=y.components[c];if(e=r[F.quantizationId])F.quantizationTable=e;this.components.push({output:U(y,F),scaleX:F.h/y.maxH,scaleY:F.v/y.maxV,blocksPerLine:F.blocksPerLine,blocksPerColumn:F.blocksPerColumn})}this.numComponents=this.components.length},
_getLinearizedBlockData:function(d,g){var p=this.width/d,q=this.height/g,n,e,m=0,r=this.components.length,a=d*g*r,k=new Uint8ClampedArray(a),c=new Uint32Array(d);for(e=0;e<r;e++){var h=this.components[e];var b=h.scaleX*p;var f=h.scaleY*q;m=e;var t=h.output;var y=h.blocksPerLine+1<<3;for(n=0;n<d;n++)h=0|n*b,c[n]=(h&4294967288)<<3|h&7;for(b=0;b<g;b++)for(h=0|b*f,h=y*(h&4294967288)|(h&7)<<3,n=0;n<d;n++)k[m]=t[h+c[n]],m+=r}if(g=this.decodeTransform)for(e=0;e<a;)for(d=h=0;h<r;h++,e++,d+=2)k[e]=(k[e]*g[d]>>
8)+g[d+1];return k},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(d){for(var g,p,q,n=0,e=d.length;n<e;n+=3)g=d[n],p=d[n+1],q=d[n+2],d[n]=g-179.456+1.402*q,d[n+1]=g+135.459-.344*p-.714*q,d[n+2]=g-226.816+1.772*p;return d},_convertYcckToRgb:function(d){for(var g,p,q,n,e=0,m=0,r=d.length;m<r;m+=4)g=d[m],p=d[m+1],q=d[m+2],n=d[m+3],d[e++]=-122.67195406894+p*(-6.60635669420364E-5*
p+4.37130475926232E-4*q-5.4080610064599E-5*g+4.8449797120281E-4*n-.154362151871126)+q*(-9.57964378445773E-4*q+8.17076911346625E-4*g-.00477271405408747*n+1.53380253221734)+g*(9.61250184130688E-4*g-.00266257332283933*n+.48357088451265)+n*(-3.36197177618394E-4*n+.484791561490776),d[e++]=107.268039397724+p*(2.19927104525741E-5*p-6.40992018297945E-4*q+6.59397001245577E-4*g+4.26105652938837E-4*n-.176491792462875)+q*(-7.78269941513683E-4*q+.00130872261408275*g+7.70482631801132E-4*n-.151051492775562)+g*(.00126935368114843*
g-.00265090189010898*n+.25802910206845)+n*(-3.18913117588328E-4*n-.213742400323665),d[e++]=-20.810012546947+p*(-5.70115196973677E-4*p-2.63409051004589E-5*q+.0020741088115012*g-.00288260236853442*n+.814272968359295)+q*(-1.53496057440975E-5*q-1.32689043961446E-4*g+5.60833691242812E-4*n-.195152027534049)+g*(.00174418132927582*g-.00255243321439347*n+.116935020465145)+n*(-3.43531996510555E-4*n+.24165260232407);return d},_convertYcckToCmyk:function(d){for(var g,p,q,n=0,e=d.length;n<e;n+=4)g=d[n],p=d[n+
1],q=d[n+2],d[n]=434.456-g-1.402*q,d[n+1]=119.541-g+.344*p+.714*q,d[n+2]=481.816-g-1.772*p;return d},_convertCmykToRgb:function(d){for(var g,p,q,n,e=0,m=1/255,r=0,a=d.length;r<a;r+=4)g=d[r]*m,p=d[r+1]*m,q=d[r+2]*m,n=d[r+3]*m,d[e++]=255+g*(-4.387332384609988*g+54.48615194189176*p+18.82290502165302*q+212.25662451639585*n-285.2331026137004)+p*(1.7149763477362134*p-5.6096736904047315*q-17.873870861415444*n-5.497006427196366)+q*(-2.5217340131683033*q-21.248923337353073*n+17.5119270841813)-n*(21.86122147463605*
n+189.48180835922747),d[e++]=255+g*(8.841041422036149*g+60.118027045597366*p+6.871425592049007*q+31.159100130055922*n-79.2970844816548)+p*(-15.310361306967817*p+17.575251261109482*q+131.35250912493976*n-190.9453302588951)+q*(4.444339102852739*q+9.8632861493405*n-24.86741582555878)-n*(20.737325471181034*n+187.80453709719578),d[e++]=255+g*(.8842522430003296*g+8.078677503112928*p+30.89978309703729*q-.23883238689178934*n-14.183576799673286)+p*(10.49593273432072*p+63.02378494754052*q+50.606957656360734*
n-112.23884253719248)+q*(.03296041114873217*q+115.60384449646641*n-193.58209356861505)-n*(22.33816807309886*n+180.12613974708367);return d},getData:function(d,g,p){if(4<this.numComponents)throw new x("Unsupported color mode");d=this._getLinearizedBlockData(d,g);if(1===this.numComponents&&p){p=d.length;g=new Uint8ClampedArray(3*p);for(var q=0,n=0;n<p;n++){var e=d[n];g[q++]=e;g[q++]=e;g[q++]=e}return g}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(d);if(4===
this.numComponents){if(this._isColorConversionNeeded())return p?this._convertYcckToRgb(d):this._convertYcckToCmyk(d);if(p)return this._convertCmykToRgb(d)}return d}};return K}()})})(C);u=u.getDefaultExportFromCjs(C.exports);l.JpegImage=u})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(l,u,C){function D(L,T,d){d.set(L.slice(T,T+d.length))}function x(L){const {_malloc:T,_free:d,_lerc_getBlobInfo:g,_lerc_getDataRanges:p,_lerc_decode_4D:q,
asm:n}=L;let e;const m=Object.values(n).find(a=>a&&"buffer"in a&&a.buffer===L.HEAPU8.buffer),r=a=>{a=a.map(h=>(h>>3<<3)+16);var k=a.reduce((h,b)=>h+b),c=T(k);e=new Uint8Array(m.buffer);k=a[0];a[0]=c;for(c=1;c<a.length;c++){const h=a[c];a[c]=a[c-1]+k;k=h}return a};U.getBlobInfo=a=>{var k=new Uint8Array(48),c=new Uint8Array(24);const [h,b,f]=r([a.length,k.length,c.length]);e.set(a,h);e.set(k,b);e.set(c,f);var t=g(h,a.length,b,f,12,3);if(t)throw d(h),Error(`lerc-getBlobInfo: error code is ${t}`);e=new Uint8Array(m.buffer);
D(e,b,k);D(e,f,c);k=new Uint32Array(k.buffer);var y=new Float64Array(c.buffer);const [v,w,,B,F,I,G,N,z,A,J]=k;c={version:v,depthCount:A,width:B,height:F,validPixelCount:G,bandCount:I,blobSize:N,maskCount:z,dataType:w,minValue:y[0],maxValue:y[1],maxZerror:y[2],statistics:[],bandCountWithNoData:J};if(J&&1<A)return d(h),c;if(1===A&&1===I)return d(h),c.statistics.push({minValue:y[0],maxValue:y[1]}),c;t=A*I*8;var R=new Uint8Array(t),H=new Uint8Array(t);k=h;var O=y=0;let M=!1;e.byteLength<h+2*t?(d(h),M=
!0,[k,y,O]=r([a.length,t,t]),e.set(a,k)):[y,O]=r([t,t]);e.set(R,y);e.set(H,O);if(t=p(k,a.length,A,I,y,O))throw d(k),M||d(y),Error(`lerc-getDataRanges: error code is ${t}`);e=new Uint8Array(m.buffer);D(e,y,R);D(e,O,H);a=new Float64Array(R.buffer);t=new Float64Array(H.buffer);H=c.statistics;for(R=0;R<I;R++)if(1<A){O=a.slice(R*A,(R+1)*A);const S=t.slice(R*A,(R+1)*A),W=Math.min.apply(null,O),X=Math.max.apply(null,S);H.push({minValue:W,maxValue:X,depthStats:{minValues:O,maxValues:S}})}else H.push({minValue:a[R],
maxValue:t[R]});d(k);M||d(y);return c};U.decode=(a,k)=>{const {maskCount:c,depthCount:h,bandCount:b,width:f,height:t,dataType:y,bandCountWithNoData:v}=k;var w=K[y],B=f*t;k=new Uint8Array(B*b);w=new Uint8Array(B*h*b*w.size);B=new Uint8Array(b);var F=new Uint8Array(8*b);const [I,G,N,z,A]=r([a.length,k.length,w.length,B.length,F.length]);e.set(a,I);e.set(k,G);e.set(w,N);e.set(B,z);e.set(F,A);if(a=q(I,a.length,c,G,h,f,t,b,y,N,z,A))throw d(I),Error(`lerc-decode: error code is ${a}`);e=new Uint8Array(m.buffer);
D(e,N,w);D(e,G,k);a=null;if(v){D(e,z,B);D(e,A,F);a=[];F=new Float64Array(F.buffer);for(let J=0;J<B.length;J++)a.push(B[J]?F[J]:null)}d(I);return{data:w,maskData:k,noDataValues:a}}}const K=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",
size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let Q=null,P=!1;const U={getBlobInfo:null,decode:null};u.decode=function(L,T={}){var d=T.inputOffset??0;L=L instanceof Uint8Array?L.subarray(d):new Uint8Array(L,d);d=U.getBlobInfo(L);const {data:g,maskData:p,noDataValues:q}=U.decode(L,d),{width:n,height:e,bandCount:m,
depthCount:r,dataType:a,maskCount:k,statistics:c}=d;var h=K[a],b=new h.ctor(g.buffer);L=[];d=[];const f=n*e;var t=f*r;for(var y=0;y<m;y++){var v=b.subarray(y*t,(y+1)*t);if(T.returnInterleaved)L.push(v);else{a:{var w=f,B=r;if(2>B)break a;const F=new h.ctor(w*B);for(let I=0,G=0;I<w;I++)for(let N=0,z=I;N<B;N++,z+=w)F[z]=v[G++];v=F}L.push(v)}d.push(p.subarray(y*t,(y+1)*t))}b=0===k?null:1===k?d[0]:new Uint8Array(f);if(1<k)for(b.set(d[0]),t=1;t<d.length;t++)for(y=d[t],v=0;v<f;v++)b[v]&=y[v];({noDataValue:T}=
T);t=null!=T&&h.range[0]<=T&&h.range[1]>=T;if(0<k&&t)for(t=0;t<m;t++)for(y=L[t],v=d[t]||b,w=0;w<f;w++)0===v[w]&&(y[w]=T);({pixelType:h}=h);return{width:n,height:e,bandCount:m,pixelType:h,depthCount:r,statistics:c,pixels:L,mask:b,bandMasks:k===m&&1<m?d:null,noDataValues:q}};u.getBlobInfo=function(L,T={}){L=L instanceof Uint8Array?L.subarray(T.inputOffset??0):new Uint8Array(L,T.inputOffset??0);return U.getBlobInfo(L)};u.isLoaded=function(){return P};u.load=function(){return Q?Q:Q=(new Promise((L,T)=>
l(["../../../chunks/lerc-wasm"],L,T))).then(L=>L.lercWasm).then(({default:L})=>L({locateFile:T=>C.getAssetUrl(`esri/layers/support/rasterFormats/${T}`)})).then(L=>{x(L);P=!0})};u.pixelTypeInfoMap=K;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(l){function u(K,Q,P,U=!0){if(0!==Q%4||0!==P%4){var L=new ArrayBuffer(4*Math.ceil(P/4));L=new Uint8Array(L);K=new Uint8Array(K,Q,P);if(U)for(U=0;U<L.length;U+=4)L[U]=
K[U+3],L[U+1]=K[U+2],L[U+2]=K[U+1],L[U+3]=K[U];else L.set(K);return new Uint32Array(L.buffer)}if(U){U=new Uint8Array(K,Q,P);L=new Uint8Array(U.length);for(K=0;K<L.length;K+=4)L[K]=U[K+3],L[K+1]=U[K+2],L[K+2]=U[K+1],L[K+3]=U[K];return new Uint32Array(L.buffer)}return new Uint32Array(K,Q,P/4)}function C(){const K=[];for(let Q=0;257>=Q;Q++)K[Q]=[Q];return K}function D(K,Q){for(let P=0;P<Q.length;P++)K.push(Q[P])}const x=new Set;x.add(511);x.add(1023);x.add(2047);x.add(4095);x.add(8191);l.decode=function(K,
Q,P,U=!0){K=u(K,Q,P,U);Q=9;U=C();let L=32,T=U.length,d=[],g=1,p=K[0],q=0;const n=K.length;P=8*(4*n-P);const e=[];for(;null!=p;){if(L>=Q)L-=Q,q=p>>>32-Q,p<<=Q;else{q=p>>>32-L;p=K[g++];var m=Q-L;L=32-m;q=(q<<m)+(p>>>L);p<<=m}if(257===q)break;if(256===q)Q=9,U=C(),T=U.length,d=[];else{m=U[q];if(null==m){if(q>U.length)throw Error("data integrity issue: code does not exist on code page");d.push(d[0]);U[T++]=d.slice();D(e,d)}else D(e,m),d.push(m[0]),1<d.length&&(U[T++]=d.slice()),d=m.slice();x.has(T)&&Q++;
0===L&&(p=K[g++],L=32);if(g>n||g===n&&L<=P)break}}return new Uint8Array(e)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const l=C=>{let D=1;switch(C){case Uint8Array:case Int8Array:D=1;break;case Uint16Array:case Int16Array:D=2;break;case Uint32Array:case Int32Array:case Float32Array:D=4;break;case Float64Array:D=8}return D};class u{static decode(C,D){var x=D.pixelType;const K=[],Q=D.width*D.height;var P=Math.floor(C.byteLength/
(D.width*D.height*l(D.pixelType)));const {bandIds:U,format:L}=D;D=U?.length||Math.floor(C.byteLength/(D.width*D.height*l(D.pixelType)));var T=C.byteLength-C.byteLength%(Q*l(x)),d=new x(C,0,Q*P);let g,p,q,n,e=null;if("bip"===L)for(g=0;g<D;g++){q=new x(Q);n=U?U[g]:g;for(p=0;p<Q;p++)q[p]=d[p*P+n];K.push(q)}else if("bsq"===L)for(g=0;g<D;g++)n=U?U[g]:g,K.push(d.subarray(n*Q,(n+1)*Q));if(T<C.byteLength-1)if(C=C.slice(T),8*C.byteLength<Q)e=null;else{C=new Uint8Array(C,0,Math.ceil(Q/8));x=new Uint8Array(Q);
for(T=d=T=D=P=0;T<C.length-1;T++)for(D=C[T],d=7;0<=d;d--)x[P++]=D>>d&1;for(d=7;P<Q-1;)D=C[C.length-1],x[P++]=D>>d&1,d--;e=x}return{pixels:K,mask:e}}}return u})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),function(l,u,C,D,x,K,Q,P,U){function L(z,A){let J="unknown";3===z?J=64===A?"f64":"f32":1===z?1===A?J="u1":2===A?J="u2":4===A?J="u4":
8>=A?J="u8":16>=A?J="u16":32>=A&&(J="u32"):2===z&&(8>=A?J="s8":16>=A?J="s16":32>=A&&(J="s32"));return J}function T(z){let A=null;switch(z?z.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":A=Uint8Array;break;case "u16":A=Uint16Array;break;case "u32":A=Uint32Array;break;case "s8":A=Int8Array;break;case "s16":A=Int16Array;break;case "s32":A=Int32Array;break;case "f64":A=Float64Array;break;default:A=Float32Array}return A}function d(z,A){return{x:A[0]*z.x+A[1]*z.y+A[2],y:A[3]*z.x+A[4]*z.y+
A[5]}}function g(z,A){return z.get(A)?.values?.[0]}function p(z,A,J,R=0,H=Q.tiffTags,O=4){var M=8===O;const S=M?t(new DataView(z,J,8),0,A):(new DataView(z,J,2)).getUint16(0,A),W=4+2*O;var X=M?8:2;M=X+S*W;if(J+M>z.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:M};const ba=J+M+4<=z.byteLength?y(new DataView(z,J+M,8===O?8:4),0,A,8===O):null;J+=X;X=new Map;let Y,ca,Z,ea=0,ha=0;for(let ka=0;ka<S;ka++){var fa=new DataView(z,J+W*ka,W);Y=fa.getUint16(0,A);Z=fa.getUint16(2,A);ca=Q.getTagName(Y,
H);const ia=[];2===O?(ea=fa.getUint16(4,A),ha=fa.getUint16(6,A)):4===O?(ea=fa.getUint32(4,A),ha=fa.getUint32(8,A)):8===O&&(ea=y(fa,4,A,!0),ha=y(fa,12,A,!0),ia.push(fa.getUint32(12,A)),ia.push(fa.getUint32(16,A)));fa={id:Y,type:Z,valueCount:ea,valueOffset:ha,valueOffsets:ia,values:null};a(z,A,fa,R,!1,O);X.set(ca,fa)}return{success:!0,ifd:X,nextIFD:ba,requiredBufferSize:M}}function q(z,A){if(1!==A&&2!==A&&4!==A)return z;const J=new Uint8Array(z),R=8/A;z=new Uint8Array(z.byteLength*R);let H=0;const O=
2**A-1;for(let M=0;M<J.length;M++){const S=J[M];for(let W=0;W<R;W++)z[H++]=S<<A*W>>>8-A&O}return z.buffer}function n(z,A,J){const R=new C.JpegImage;R.parse(z);R.colorTransform=6===J?-1:0;z=R.getData(R.width,R.height,1!==A&&4!==A);return new Uint8Array(z.buffer)}function e(z){z=(new U.Zlib(z)).getBytes();var A=new ArrayBuffer(z.length);A=new Uint8Array(A);A.set(z);return A}async function m(z,A,J,R,H){var O=P.isPlatformLittleEndian===A,M=g(J,"BITSPERSAMPLE"),S=g(J,"SAMPLESPERPIXEL")??1,W=g(J,"PHOTOMETRICINTERPRETATION"),
X=g(J,"SAMPLEFORMAT")??1,ba=L(X,M),Y=g(J,"COMPRESSION")??1,ca=T(ba);if(34887===Y)return await D.load(),D.decode(z,{inputOffset:R}).pixels[0];if(1===Y)W=z.slice(R,R+H),A=new Uint8Array(W);else if(8===Y||32946===Y)A=new Uint8Array(z,R,H),A=e(A),W=A.buffer;else if(6===Y)A=new Uint8Array(z,R,H),A=n(A,S,W),W=A.buffer;else if(7===Y){const Z=J.get("JPEGTABLES").values,ea=Z.length-2;A=new Uint8Array(ea+H-2);for(let ha=0;ha<ea;ha++)A[ha]=Z[ha];z=new Uint8Array(z,R+2,H-2);for(R=0;R<z.length;R++)A[ea+R]=z[R];
A=n(A,S,W);W=A.buffer}else if(5===Y)A=x.decode(z,R,H,A),W=A.buffer;else throw Error("tiff-decode: unsupport compression "+Y);W=q(W,M);if("u8"!==ba&&"s8"!==ba&&!O)switch(W=new ArrayBuffer(A.length),O=new Uint8Array(W),ba){case "u16":case "s16":for(ba=0;ba<A.length;ba+=2)O[ba]=A[ba+1],O[ba+1]=A[ba];break;case "u32":case "s32":case "f32":for(ba=0;ba<A.length;ba+=4)O[ba]=A[ba+3],O[ba+1]=A[ba+2],O[ba+2]=A[ba+1],O[ba+3]=A[ba]}M=new ca(W);O=g(J,"PREDICTOR")??1;ba=g(J,"TILEWIDTH");A=g(J,"TILELENGTH");if(1<
O&&(5===Y||8===Y||32946===Y)&&ba&&A){Y=c(J);ca=new ca(M.length);ca.set(M);J=3===X&&3===O;Y=Y?1:S;S=J?4:1;X=ba*S*Y;J&&(ca=new Uint8Array(ca.buffer));for(O=0;O<A;O++)for(M=O*X,W=Y;W<X;W++)ca[M+W]+=ca[M+W-Y];if(J){J=new Uint8Array(ca.length);Y*=ba;for(ba=0;ba<A;ba++)for(O=ba*X,M=0;M<Y;M++)for(W=0;W<S;W++)J[O+M*S+W]=ca[O+M+(S-W-1)*Y];M=new Float32Array(J.buffer)}else M=ca}return M}async function r(z,A,J){const R=J.get("TILEOFFSETS")?.values;if(void 0===R)return null;const H=J.get("TILEBYTECOUNTS")?.values,
{width:O,height:M,pixelType:S,tileWidth:W,tileHeight:X}=k([J]);var ba=c(J,A);const Y=g(J,"SAMPLESPERPIXEL")||A.planes;var ca=O*M,Z=g(J,"BITSPERSAMPLE"),ea=34887===(g(J,"COMPRESSION")??1),ha=T(S);const fa=[];for(var ka=0;ka<Y;ka++)fa.push(new ha(ca));let ia,na,qa,ta,wa,ya,xa,Aa,sa;ha=Math.ceil(O/W);ca=(new Uint8Array(ca)).fill(255);ka=!1;if(0===Z%8)if(ea&&ba&&1<Y)for(ba=Math.round(R.length/Y),Z=0;Z<ba;Z++){var Ea=Math.floor(Z/ha)*X;qa=Z%ha*W;ta=Ea*O+qa;for(ea=0;ea<Y;ea++){var Ca=Z*Y+ea;0===H[Ca]?(Ca=
null,ka=!0):Ca=await m(z,A.littleEndian,J,R[Ca],H[Ca]);ya=0;wa=ta;Aa=Math.min(W,O-qa);xa=Math.min(X,M-Ea);sa=fa[ea];for(ia=0;ia<xa;ia++)for(wa=ta+ia*O,ya=ia*W,na=0;na<Aa;na++,wa++,ya++)Ca?sa[wa]=Ca[ya]:ca[wa]=0}}else for(Z=0;Z<R.length;Z++)for(Ea=Math.floor(Z/ha)*X,qa=Z%ha*W,ta=Ea*O+qa,0===H[Z]?(Ca=null,ka=!0):Ca=await m(z,A.littleEndian,J,R[Z],H[Z]),ya=0,wa=ta,Aa=Math.min(W,O-qa),xa=Math.min(X,M-Ea),Ea=0;Ea<Y;Ea++)if(sa=fa[Ea],ba||ea)for(ia=0;ia<xa;ia++)for(wa=ta+ia*O,ya=W*X*Ea+ia*W,na=0;na<Aa;na++,
wa++,ya++)Ca?sa[wa]=Ca[ya]:ca[wa]=0;else for(ia=0;ia<xa;ia++)for(wa=ta+ia*O,ya=ia*W*Y+Ea,na=0;na<Aa;na++,wa++,ya+=Y)Ca?sa[wa]=Ca[ya]:ca[wa]=0;return{width:O,height:M,pixelType:S,pixels:fa,mask:ka?ca:void 0}}function a(z,A,J,R=0,H=!1,O=4){if(J.values)return!0;var M=J.type,S=J.valueCount,W=J.valueOffset;let X=[];var ba=F[M],Y=8*ba,ca=S*ba,Z=S*F[M]*8,ea=8===O?64:32;O=J.valueOffsets;if(Z>ea&&ca>(H?z.byteLength:z?z.byteLength-W+R:0))return J.offlineOffsetSize=[W,ca],J.values=null,!1;if(Z<=ea)if(A||(32>=
ea?W>>>=32-Z:(z=O?.length?O[0]:W>>>0,A=O?.length?O[1]:Math.round((W-z)/4294967296),32>=Z?(W=z>>>32-Z,O[0]=W):(W=z*2**(32-Z)+(A>>>32-Z),O[0]=z,O[1]=A>>>32-Z))),1===S&&Y===ea)X=[W];else if(64===ea)for(z=O?.length?O[0]:W>>>0,W=O?.length?O[1]:Math.round((W-z)/4294967296),A=z,ba=32,z=1;z<=S;z++)ca=32-Y*z%32,ba<Y?(ca=A<<ca>>>32-ba,Z=W<<32-ba>>>32-ba,A=W,X.push(ca+Z*2**(Y-ba)),ba-=32-(Y-ba)):(X.push(A<<ca>>>32-Y),ba-=Y),0===ba&&(ba=32,A=W);else for(z=1;z<=S;z++)X.push(W<<32-Y*z>>>32-Y);else for(W-=R,H&&
(W=0),S=W;S<W+ca;S+=ba){switch(M){case 1:Y=(new DataView(z,S,1)).getUint8(0);break;case 2:Y=(new DataView(z,S,1)).getUint8(0);break;case 3:Y=(new DataView(z,S,2)).getUint16(0,A);break;case 4:case 13:Y=(new DataView(z,S,4)).getUint32(0,A);break;case 5:Y=(new DataView(z,S,4)).getUint32(0,A)/(new DataView(z,S+4,4)).getUint32(0,A);break;case 6:Y=(new DataView(z,S,1)).getInt8(0);break;case 7:Y=(new DataView(z,S,1)).getUint8(0);break;case 8:Y=(new DataView(z,S,2)).getInt16(0,A);break;case 9:Y=(new DataView(z,
S,4)).getInt32(0,A);break;case 10:Y=(new DataView(z,S,4)).getInt32(0,A)/(new DataView(z,S+4,4)).getInt32(0,A);break;case 11:Y=(new DataView(z,S,4)).getFloat32(0,A);break;case 12:Y=(new DataView(z,S,8)).getFloat64(0,A);break;case 16:case 18:Y=t(new DataView(z,S,8),0,A);break;case 17:O=new DataView(z,S,8);Z=(Y=A)?O.getInt32(0,Y):O.getUint32(0,Y);O=Y?O.getUint32(4,Y):O.getInt32(4,Y);ea=0<=(Y?Z:O)?1:-1;Y?Z*=ea:O*=ea;Y=ea*(Y?4294967296*O+Z:4294967296*Z+O);break;default:Y=null}X.push(Y)}if(2===M){M="";
W=X;X=[];for(z=0;z<W.length;z++)0===W[z]&&""!==M?(X.push(M),M=""):M+=String.fromCharCode(W[z]);""===M&&0!==X.length||X.push(M)}J.values=X;return!0}function k(z){var A=z[0];const J=g(A,"TILEWIDTH"),R=g(A,"TILELENGTH"),H=g(A,"IMAGEWIDTH"),O=g(A,"IMAGELENGTH");var M=g(A,"BITSPERSAMPLE");const S=g(A,"SAMPLESPERPIXEL");var W=g(A,"SAMPLEFORMAT")??1;const X=L(W,M),ba=c(A);var Y=A.get("GDAL_NODATA")?.values;let ca=null;Y?.length&&(ca=Y.map(sa=>parseFloat(sa)),ca.some(sa=>isNaN(sa))&&(ca=null));var Z=g(A,
"COMPRESSION")??1;switch(Z){case 1:Y="NONE";break;case 2:case 3:case 4:case 32771:Y="CCITT";break;case 5:Y="LZW";break;case 6:case 7:Y="JPEG";break;case 32773:Y="PACKBITS";break;case 8:case 32946:Y="DEFLATE";break;case 34712:Y="JPEG2000";break;case 34887:Y="LERC";break;default:Y=String(Z)}let ea=!0,ha="";I.has(Z)||(ea=!1,ha+="unsupported tag compression "+Z);3<W&&(ea=!1,ha+="unsupported tag sampleFormat "+W);1!==M&&2!==M&&4!==M&&0!==M%8&&(ea=!1,ha+="unsupported tag bitsPerSample "+M);M=A.get("GEOASCIIPARAMS")?.values?.[0];
if(M){var fa=(fa=M.split("|").find(sa=>sa.includes("ESRI PE String \x3d ")))?fa.replace("ESRI PE String \x3d ",""):"";fa=fa.startsWith("COMPD_CS")||fa.startsWith("PROJCS")||fa.startsWith("GEOGCS")?{wkid:null,wkt:fa}:null}W=A.get("GEOTIEPOINTS")?.values;M=A.get("GEOPIXELSCALE")?.values;Z=A.get("GEOTRANSMATRIX")?.values;var ka=A.has("GEOKEYDIRECTORY")?A.get("GEOKEYDIRECTORY").data:null,ia=!1;A=!1;if(ka){ia=2===g(ka,"GTRasterTypeGeoKey");var na=g(ka,"GTModelTypeGeoKey");2===na?(ka=g(ka,"GeographicTypeGeoKey"),
1024<=ka&&32766>=ka&&(fa={wkid:ka}),fa||32767!==ka||(A=!0,fa={wkid:4326})):1===na&&(ka=g(ka,"ProjectedCSTypeGeoKey"),1024<=ka&&32766>=ka&&(fa={wkid:ka}))}let qa;M&&W&&6<=W.length?(qa=[M[0],0,W[3]-W[0]*M[0],0,-Math.abs(M[1]),W[4]-W[1]*M[1]],ia&&(qa[2]-=.5*qa[0]+.5*qa[1],qa[5]-=.5*qa[3]+.5*qa[4])):Z&&16===Z.length&&(qa=ia?[Z[0],Z[1],Z[3]-.5*Z[0],Z[4],Z[5],Z[7]-.5*Z[5]]:[Z[0],Z[1],Z[3],Z[4],Z[5],Z[7]]);if(qa){W=[{x:0,y:O},{x:0,y:0},{x:H,y:O},{x:H,y:0}];ka=ia=Number.POSITIVE_INFINITY;let sa=na=Number.NEGATIVE_INFINITY;
for(let Ea=0;Ea<W.length;Ea++)Z=d(W[Ea],qa),ia=Z.x>ia?ia:Z.x,na=Z.x<na?na:Z.x,ka=Z.y>ka?ka:Z.y,sa=Z.y<sa?sa:Z.y;W={xmin:ia,xmax:na,ymin:ka,ymax:sa,spatialReference:fa}}else W={xmin:-.5,ymin:.5-O,xmax:H-.5,ymax:.5,spatialReference:fa};A&&(400<W.xmax-W.xmin||361<Math.max(Math.abs(W.xmin),Math.abs(W.xmax)))&&(fa=null,W.spatialReference=null);fa=h(z);let ta;let wa,ya;if(0<fa.length){wa=Math.round(Math.log(H/g(fa[0],"IMAGEWIDTH"))/Math.LN2);var xa=fa[fa.length-1];ya=Math.round(Math.log(H/g(xa,"IMAGEWIDTH"))/
Math.LN2);ta=g(xa,"TILEWIDTH");xa=g(xa,"TILELENGTH")}ta=null!=ya&&0<ya?ta||J:null;xa=null!=ya&&0<ya?xa||R:null;let Aa;J&&(Aa=[{maxCol:Math.ceil(H/J)-1,maxRow:Math.ceil(O/R)-1,minRow:0,minCol:0}],fa.forEach(sa=>{Aa.push({maxCol:Math.ceil(g(sa,"IMAGEWIDTH")/g(sa,"TILEWIDTH"))-1,maxRow:Math.ceil(g(sa,"IMAGELENGTH")/g(sa,"TILELENGTH"))-1,minRow:0,minCol:0})}));Z=z[0].get("GDAL_METADATA")?.values?.[0];Z=N(Z);ha+=" "+B({width:H,height:O,tileWidth:J,tileHeight:R,planes:S,ifds:z});z=b(z).length===fa.length+
1;return{width:H,height:O,tileWidth:J,tileHeight:R,planes:S,isBSQ:ba,pixelType:X,compression:Y,noData:ca,hasMaskBand:z,isSupported:ea,message:ha,extent:W,isPseudoGeographic:A,affine:M?null:qa,firstPyramidLevel:wa,maximumPyramidLevel:ya,pyramidBlockWidth:ta,pyramidBlockHeight:xa,tileBoundary:Aa,metadata:Z}}function c(z,A){return(z=z.get("PLANARCONFIGURATION")?.values)?2===z[0]:A?A.isBSQ:!1}function h(z){return z.filter(A=>1===g(A,"NEWSUBFILETYPE"))}function b(z){return z.filter(A=>{const J=4===((g(A,
"NEWSUBFILETYPE")??0)&4);A=4===g(A,"PHOTOMETRICINTERPRETATION");return J&&A})}function f(z){const {littleEndian:A,isBigTiff:J,firstIFDPos:R}=v(z);var H=R;const O=[];do if(H=w(z,A,H,0,Q.tiffTags,J?8:4),H.success)O.push(H.ifd),H=H.nextIFD;else break;while(0<H);z=k(O);H=h(O);const M=b(O);return{...z,littleEndian:A,isBigTiff:J,ifds:O,pyramidIFDs:H,maskIFDs:M}}function t(z,A,J){const R=z.getUint32(A,J);z=z.getUint32(A+4,J);return J?4294967296*z+R:4294967296*R+z}function y(z,A,J,R){return R?t(z,A,J):z.getUint32(A,
J)}function v(z){var A=new DataView(z,0,16),J=A.getUint16(0,!1);z=null;if(18761===J)z=!0;else if(19789===J)z=!1;else throw Error("unexpected endianess byte");var R=A.getUint16(2,z);if(42!==R&&43!==R)throw Error("unexpected tiff identifier");J=4;if(R=43===R){const H=A.getUint16(J,z);J+=2;if(8!==H)throw Error("unsupported bigtiff version");if(0!==A.getUint16(J,z))throw Error("unsupported bigtiff version");J+=2}A=y(A,J,z,R);return{littleEndian:z,isBigTiff:R,firstIFDPos:A}}function w(z,A,J,R=0,H=Q.tiffTags,
O=4){J=p(z,A,J,R,H,O);let M;const S=J.ifd;S&&(Q.ifdTags.forEach((W,X)=>{S.has(X)&&(M=S.get(X),M.data=p(z,A,M.valueOffset-R,R,W).ifd)}),S.has("GEOKEYDIRECTORY")&&(M=S.get("GEOKEYDIRECTORY"),(H=M.values)&&4<H.length&&(H=H[0]+"."+H[1]+"."+H[2],M.data=p(z,A,M.valueOffset+6-R,R,Q.geoKeys,2).ifd,M.data&&M.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[H]}))),S.has("XMP")&&(M=S.get("XMP"),H=M.values,"number"===typeof H[0]&&7===M.type&&(M.values=[u.bytesToUTF8(new Uint8Array(H))])));
return J}function B(z){const {width:A,height:J,tileHeight:R,tileWidth:H}=z,O=z.planes,M=H?H*R:A*J;z=g(z.ifds[0],"BITSPERSAMPLE");let S="";M*O>2**30/(8<z?z/8:1)&&(S=H?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return S}const F=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],I=new Set([1,5,6,7,8,34712,34887]),G=(z,A,J)=>{if(!(z&&0<z.length&&A&&J))return null;let R,H,O;const M=z[0].length,S=z.length,W=new Uint8Array(M);for(let ba=0;ba<
S;ba++)if(R=z[ba],H=A[ba],O=J[ba],0===ba)for(var X=0;X<M;X++)W[X]=R[X]<H||R[X]>O?0:1;else for(X=0;X<M;X++)W[X]&&(W[X]=R[X]<H||R[X]>O?0:1);return W},N=z=>{if(!z)return null;var A=z.match(/<Item(.*?)Item>/gi);if(!A||0===A.length)return null;z=new Map;var J;for(var R=0;R<A.length;R++){var H=A[R];var O=H.slice(6,H.indexOf("\x3e"));var M=H.indexOf("sample\x3d");-1<M&&(J=H.slice(M+8,H.indexOf('"',M+8)));M=H.indexOf("name\x3d");-1<M&&(O=H.slice(M+6,H.indexOf('"',M+6)));O&&(H=H.slice(H.indexOf("\x3e")+1,
H.indexOf("\x3c/Item\x3e")).trim(),null!=J?z.has(O)?z.get(O)[J]=H:z.set(O,[H]):z.set(O,H));J=null}A=z.get("STATISTICS_MINIMUM");O=z.get("STATISTICS_MAXIMUM");R=z.get("STATISTICS_MEAN");H=z.get("STATISTICS_STDDEV");J=null;if(A&&O)for(J=[],M=0;M<A.length;M++)J.push({min:parseFloat(A[M]),max:parseFloat(O[M]),avg:R&&parseFloat(R[M]),stddev:H&&parseFloat(H[M])});O=z.get("BandName");R=z.get("WavelengthMin");H=z.get("WavelengthMax");A=null;if(O)for(A=[],M=0;M<O.length;M++)A.push({BandName:O[M],WavelengthMin:R&&
parseFloat(R[M]),WavelengthMax:H&&parseFloat(H[M])});O=z.get("DataType");return{statistics:J,bandProperties:A,dataType:O,rawMetadata:z}};l.decode=async function(z,A={}){var J=A.pyramidLevel||0,R=A.headerInfo||f(z);const {ifds:H,noData:O}=R;if(0===H.length)throw Error("no valid image file directory");var M=B(R);if(M)throw M;M=null;var S=-1===J?H[H.length-1]:H[J];A=O??A.noDataValue;if(R.tileWidth)M=await r(z,R,S);else{{const ya=P.isPlatformLittleEndian===R.littleEndian,xa=S.get("STRIPOFFSETS")?.values;
if(void 0===xa)M=null;else{var {width:W,height:X,pixelType:ba}=k([S]);J=g(S,"SAMPLESPERPIXEL")||R.planes;var Y=g(S,"PHOTOMETRICINTERPRETATION");M=W*X;var ca=g(S,"BITSPERSAMPLE"),Z=T(ba),ea=new Z(M*J),ha=S.get("STRIPBYTECOUNTS")?.values,fa=g(S,"ROWSPERSTRIP"),ka=g(S,"COMPRESSION")??1;var ia=fa;if(0===ca%8)for(S=0;S<xa.length;S++){var na=S*fa*W*J;ia=(S+1)*fa>X?X-S*fa:fa;if("u8"===ba||"s8"===ba||ya)if(8===ka||32946===ka){var qa=new Uint8Array(z,xa[S],ha[S]);qa=e(qa);var ta=qa.buffer}else 6===ka?(qa=
new Uint8Array(z,xa[S],ha[S]),qa=n(qa,J,Y),ta=qa.buffer):5===ka?(qa=x.decode(z,xa[S],ha[S],R.littleEndian),ta=qa.buffer):(ha[S]!==ia*W*J*ca/8&&console.log("strip byte counts is different than expected"),ta=z.slice(xa[S],xa[S]+ha[S]));else{if(6===ka||8===ka||32946===ka){qa=new Uint8Array(z,xa[S],ha[S]);var wa=e(qa);ta=wa.buffer}else ha[S]!==ia*W*J*ca/8&&console.log("strip byte counts is different than expected"),ta=new ArrayBuffer(ha[S]),qa=new Uint8Array(z,xa[S],ha[S]),wa=new Uint8Array(ta);switch(ba){case "u16":case "s16":for(ia=
0;ia<qa.length;ia+=2)wa[ia]=qa[ia+1],wa[ia+1]=qa[ia];break;case "u32":case "s32":case "f32":for(ia=0;ia<qa.length;ia+=4)wa[ia]=qa[ia+3],wa[ia+1]=qa[ia+2],wa[ia+2]=qa[ia+1],wa[ia+3]=qa[ia]}}ta=q(ta,ca);ia=new Z(ta);ea.set(ia,na)}Y=[];if(1===J)Y.push(ea);else for(S=0;S<J;S++){R=new Z(M);for(z=0;z<M;z++)R[z]=ea[z*J+S];Y.push(R)}M={width:W,height:X,pixelType:ba,pixels:Y}}}}if(!M)return M;null!=A&&K.convertNoDataToMask(M,A);return M};l.decodeTileOrStrip=async function(z,A){const {headerInfo:J,ifd:R,offsets:H,
sizes:O}=A;var M=[];for(var S=0;S<H.length;S++){0===O[S]?1:0;var W=await m(z,J.littleEndian,R,H[S],O[S]||z.byteLength);M.push(W)}var X=c(R,J);z=g(R,"BITSPERSAMPLE");S=g(R,"SAMPLEFORMAT")??1;S=L(S,z);var ba=g(R,"SAMPLESPERPIXEL")||J.planes;const Y=T(S);W=g(R,"TILEWIDTH");const ca=g(R,"TILELENGTH");var Z=g(R,"COMPRESSION")??1;const ea=W*ca;z=[];let ha=M[0];const fa=34887===Z;for(let ka=0;ka<ba;ka++){Z=new Y(ea);if(M.length===ba)ha=M[ka],ha.length===ea&&(Z=ha);else if(ha.length)if(X||fa)Z=ha.length===
ea?ha:ha.slice(ea*ka,ea*(ka+1));else for(let ia=0;ia<ea;ia++)Z[ia]=ha[ia*ba+ka];z.push(Z)}M=J.noData?J.noData[0]:A.noDataValue;X=(ba=J.metadata?J.metadata.statistics:null)?ba.map(ka=>ka.min):null;ba=ba?ba.map(ka=>ka.max):null;S={pixelType:S,width:W,height:ca,pixels:z,noDataValue:M};null!=M?K.convertNoDataToMask(S,M):X&&ba&&A.applyMinMaxConstraint&&(S.mask=G(z,X,ba));return S};l.getImageInfo=k;l.getMaskIFDs=b;l.getPyramidIFDs=h;l.isBSQConfig=c;l.parseFieldValues=a;l.parseHeader=f;l.parseIFD=w;l.parseSignature=
v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(l){l.bytesToUTF8=function(u,C){let D=0,x="",K=0,Q=0;const P=u.length;for(;D<P;)if(Q=u[D++],K=Q>>4,8>K?K=1:15===K?(K=4,Q=(Q&7)<<18|(u[D++]&63)<<12|(u[D++]&63)<<6|u[D++]&63):14===K?(K=3,Q=(Q&15)<<12|(u[D++]&63)<<6|u[D++]&63):(K=2,Q=(Q&31)<<6|u[D++]&63),0!==Q||C)x+=String.fromCharCode(Q);return x};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const l=(()=>{const x=[];x[254]="NEWSUBFILETYPE";x[255]="SUBFILETYPE";x[256]="IMAGEWIDTH";x[257]="IMAGELENGTH";x[258]="BITSPERSAMPLE";x[259]="COMPRESSION";x[262]="PHOTOMETRICINTERPRETATION";x[263]="THRESHHOLDING";x[264]="CELLWIDTH";x[265]="CELLLENGTH";x[266]="FILLORDER";x[269]="DOCUMENTNAME";x[270]="IMAGEDESCRIPTION";x[271]="MAKE";x[272]="MODEL";x[273]="STRIPOFFSETS";x[274]="ORIENTATION";x[277]="SAMPLESPERPIXEL";x[278]="ROWSPERSTRIP";
x[279]="STRIPBYTECOUNTS";x[280]="MINSAMPLEVALUE";x[281]="MAXSAMPLEVALUE";x[282]="XRESOLUTION";x[283]="YRESOLUTION";x[284]="PLANARCONFIGURATION";x[285]="PAGENAME";x[286]="XPOSITION";x[287]="YPOSITION";x[288]="FREEOFFSETS";x[289]="FREEBYTECOUNTS";x[290]="GRAYRESPONSEUNIT";x[291]="GRAYRESPONSECURVE";x[292]="T4OPTIONS";x[293]="T6OPTIONS";x[296]="RESOLUTIONUNIT";x[297]="PAGENUMBER";x[300]="COLORRESPONSEUNIT";x[301]="TRANSFERFUNCTION";x[305]="SOFTWARE";x[306]="DATETIME";x[315]="ARTIST";x[316]="HOSTCOMPUTER";
x[317]="PREDICTOR";x[318]="WHITEPOINT";x[319]="PRIMARYCHROMATICITIES";x[320]="COLORMAP";x[321]="HALFTONEHINTS";x[322]="TILEWIDTH";x[323]="TILELENGTH";x[324]="TILEOFFSETS";x[325]="TILEBYTECOUNTS";x[326]="BADFAXLINES";x[327]="CLEANFAXDATA";x[328]="CONSECUTIVEBADFAXLINES";x[330]="SUBIFD";x[332]="INKSET";x[333]="INKNAMES";x[334]="NUMBEROFINKS";x[336]="DOTRANGE";x[337]="TARGETPRINTER";x[338]="EXTRASAMPLES";x[339]="SAMPLEFORMAT";x[340]="SMINSAMPLEVALUE";x[341]="SMAXSAMPLEVALUE";x[342]="TRANSFERRANGE";x[347]=
"JPEGTABLES";x[512]="JPEGPROC";x[513]="JPEGIFOFFSET";x[514]="JPEGIFBYTECOUNT";x[515]="JPEGRESTARTINTERVAL";x[517]="JPEGLOSSLESSPREDICTORS";x[518]="JPEGPOINTTRANSFORM";x[519]="JPEGQTABLES";x[520]="JPEGDCTABLES";x[521]="JPEGACTABLES";x[529]="YCBCRCOEFFICIENTS";x[530]="YCBCRSUBSAMPLING";x[531]="YCBCRPOSITIONING";x[532]="REFERENCEBLACKWHITE";x[700]="XMP";x[33550]="GEOPIXELSCALE";x[33922]="GEOTIEPOINTS";x[33432]="COPYRIGHT";x[42112]="GDAL_METADATA";x[42113]="GDAL_NODATA";x[50844]="RPCCOEFFICIENT";x[34264]=
"GEOTRANSMATRIX";x[34735]="GEOKEYDIRECTORY";x[34736]="GEODOUBLEPARAMS";x[34737]="GEOASCIIPARAMS";x[34665]="EXIFIFD";x[34853]="GPSIFD";x[40965]="INTEROPERABILITYIFD";return x})(),u=(()=>{const x=l.slice();x[36864]="ExifVersion";x[40960]="FlashpixVersion";x[40961]="ColorSpace";x[42240]="Gamma";x[37121]="ComponentsConfiguration";x[37122]="CompressedBitsPerPixel";x[40962]="PixelXDimension";x[40963]="PixelYDimension";x[37500]="MakerNote";x[37510]="UserComment";x[40964]="RelatedSoundFile";x[36867]="DateTimeOriginal";
x[36868]="DateTimeDigitized";x[36880]="OffsetTime";x[36881]="OffsetTimeOriginal";x[36882]="OffsetTimeDigitized";x[37520]="SubSecTime";x[37521]="SubSecTimeOriginal";x[37522]="SubSecTimeDigitized";x[37888]="Temperature";x[37889]="Humidity";x[37890]="Pressure";x[37891]="WaterDepth";x[37892]="Acceleration";x[37893]="CameraElevationAngle";x[42016]="ImageUniqueID";x[42032]="CameraOwnerName";x[42033]="BodySerialNumber";x[42034]="LensSpecification";x[42035]="LensMake";x[42036]="LensModel";x[42037]="LensSerialNumber";
x[33434]="ExposureTime";x[33437]="FNumber";x[34850]="ExposureProgram";x[34852]="SpectralSensitivity";x[34855]="PhotographicSensitivity";x[34856]="OECF";x[34864]="SensitivityType";x[34865]="StandardOutputSensitivity";x[34866]="RecommendedExposureIndex";x[34867]="ISOSpeed";x[34868]="ISOSpeedLatitudeyyy";x[34869]="ISOSpeedLatitudezzz";x[37377]="ShutterSpeedValue";x[37378]="ApertureValue";x[37379]="BrightnessValue";x[37380]="ExposureBiasValue";x[37381]="MaxApertureValue";x[37382]="SubjectDistance";x[37383]=
"MeteringMode";x[37384]="LightSource";x[37385]="Flash";x[37386]="FocalLength";x[37396]="SubjectArea";x[41483]="FlashEnergy";x[41484]="SpatialFrequencyResponse";x[41486]="FocalPlaneXResolution";x[41487]="FocalPlaneYResolution";x[41488]="FocalPlaneResolutionUnit";x[41492]="SubjectLocation";x[41493]="ExposureIndex";x[41495]="SensingMethod";x[41728]="FileSource";x[41729]="SceneType";x[41730]="CFAPattern";x[41985]="CustomRendered";x[41986]="ExposureMode";x[41987]="WhiteBalance";x[41988]="DigitalZoomRatio";
x[41989]="FocalLengthIn35mmFilm";x[41990]="SceneCaptureType";x[41991]="GainControl";x[41992]="Contrast";x[41993]="Saturation";x[41994]="Sharpness";x[41995]="DeviceSettingDescription";x[41996]="SubjectDistanceRange";return x})(),C=(()=>{const x=[];x[1024]="GTModelTypeGeoKey";x[1025]="GTRasterTypeGeoKey";x[1026]="GTCitationGeoKey";x[2048]="GeographicTypeGeoKey";x[2049]="GeogCitationGeoKey";x[2050]="GeogGeodeticDatumGeoKey";x[2051]="GeogPrimeMeridianGeoKey";x[2052]="GeogLinearUnitsGeoKey";x[2053]="GeogLinearUnitSizeGeoKey";
x[2054]="GeogAngularUnitsGeoKey";x[2055]="GeogAngularUnitSizeGeoKey";x[2056]="GeogEllipsoidGeoKey";x[2057]="GeogSemiMajorAxisGeoKey";x[2058]="GeogSemiMinorAxisGeoKey";x[2059]="GeogInvFlatteningGeoKey";x[2061]="GeogPrimeMeridianLongGeoKey";x[2060]="GeogAzimuthUnitsGeoKey";x[3072]="ProjectedCSTypeGeoKey";x[3073]="PCSCitationGeoKey";x[3074]="ProjectionGeoKey";x[3075]="ProjCoordTransGeoKey";x[3076]="ProjLinearUnitsGeoKey";x[3077]="ProjLinearUnitSizeGeoKey";x[3078]="ProjStdParallel1GeoKey";x[3079]="ProjStdParallel2GeoKey";
x[3080]="ProjNatOriginLongGeoKey";x[3081]="ProjNatOriginLatGeoKey";x[3082]="ProjFalseEastingGeoKey";x[3083]="ProjFalseNorthingGeoKey";x[3084]="ProjFalseOriginLongGeoKey";x[3085]="ProjFalseOriginLatGeoKey";x[3086]="ProjFalseOriginEastingGeoKey";x[3087]="ProjFalseOriginNorthingGeoKey";x[3088]="ProjCenterLongGeoKey";x[3090]="ProjCenterEastingGeoKey";x[3091]="ProjCenterNorthingGeoKey";x[3092]="ProjScaleAtNatOriginGeoKey";x[3093]="ProjScaleAtCenterGeoKey";x[3094]="ProjAzimuthAngleGeoKey";x[3095]="ProjStraightVertPoleLongGeoKey";
x[4096]="VerticalCSTypeGeoKey";x[4097]="VerticalCitationGeoKey";x[4098]="VerticalDatumGeoKey";x[4099]="VerticalUnitsGeoKey";return x})(),D=new Map;D.set("EXIFIFD",u);D.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{tiffTags:l,ifdTags:D,geoKeys:C,getTagName:(x,K)=>{K=(K||l)[x];void 0===K&&(K="unknown"+String(x));return K}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(l){const u=new ArrayBuffer(4),C=new Uint8Array(u);(new Uint32Array(u))[0]=1;l.isPlatformLittleEndian=1===C[0];Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/unitUtils ../../layers/support/Field ../FlowRenderer ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./rasterRendererChecks ./UniqueValueInfo ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g,p,q,n,e,m,r,a){function k(H,O){H=c(H,O?.variableName);const {bandCount:M}=H;let {bandIds:S,stretchType:W}=O||{};S?.some(Z=>Z>=M)&&(S=null);let X=H.statistics,ba=H.histograms;1<M?(S=S?.length?S:h(H),X=null==X?null:S?.map(Z=>X[Z]),ba=null==ba?null:S?.map(Z=>ba[Z])):S=[0];null==W&&(W=f(H));let Y=!1;switch(W){case "none":Y=!1;break;case "percent-clip":Y=!ba?.length;break;default:Y=!X?.length}var {dataType:ca}=H;ca=1===S?.length&&J.has(ca)?z:null;ca=new q({stretchType:W,
dynamicRangeAdjustment:Y,colorRamp:ca,outputMin:0,outputMax:255,gamma:1===S?.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===W?ca.maxPercent=ca.minPercent=.25:"standard-deviation"===W&&(ca.numberOfStandardDeviations=2);if(!Y&&(null!=H.multidimensionalInfo||O?.includeStatisticsInStretch))if("percent-clip"===W)ca.histograms=ba;else if("min-max"===W||"standard-deviation"===W)ca.statistics=X;return ca}function c(H,O){var {multidimensionalInfo:M}=H;if(!O||!M)return H;M=M.variables.find(S=>S.name===O);
if(!M)return H;H=H.clone();if(M){const {statistics:S,histograms:W}=M;S?.length&&(H.statistics=S.map(X=>({min:X.min,max:X.max,avg:X.avg,stddev:X.stddev})));W?.length&&(H.histograms=W)}return H}function h(H){const O=H.bandCount;if(1===O)return null;if(2===O)return[0];({bandInfos:H}=H);let M;if(H.length===O){const {red:S,green:W,blue:X,nir:ba}=b(H);null!=S&&null!=W&&null!=X?M=[S,W,X]:null!=ba&&null!=S&&null!=W&&(M=[ba,S,W])}!M&&3<=O&&(M=[0,1,2]);return M}function b(H){const O={};for(let W=0;W<H.length;W++){var M=
H[W],S=M.name.toLowerCase();"red"===S?O.red=W:"green"===S?O.green=W:"blue"===S?O.blue=W:"nearinfrared"===S||"nearinfrared_1"===S||"nir"===S?O.nir=W:M.maxWavelength&&M.minWavelength&&(S=M.minWavelength,M=M.maxWavelength,null==O.blue&&410<=S&&480>=S&&480<=M&&540>=M?O.blue=W:null==O.green&&490<=S&&560>=S&&560<=M&&610>=M?O.green=W:null==O.red&&595<=S&&670>=S&&660<=M&&730>=M?O.red=W:null==O.nir&&700<=S&&860>=S&&800<=M&&950>=M&&(O.nir=W))}return O}function f(H){let O="percent-clip";const {pixelType:M,dataType:S,
histograms:W,statistics:X,multidimensionalInfo:ba}=H;H=J.has(S)||"generic"===S&&null!=ba;"u8"!==M||"processed"!==S&&null!=W&&null!=X?"u8"===M||"elevation"===S||H?O="min-max":null!=W?O="percent-clip":null!=X&&(O="min-max"):O="none";return O}function t(H,O,M,S){if(!L.isUVRendererSupported(H,O))return null;const {attributeTable:W,statistics:X}=H,ba=y(W,O),Y=w(W,"red"),ca=w(W,"green"),Z=w(W,"blue");H=new Q;const ea=[],ha=new Set,fa=!!(Y&&ca&&Z);if(null!=W)W.features.forEach(ka=>{var ia=ka.attributes[ba.name];
ha.has(ka.attributes[ba.name])||null==ia||(ha.add(ia),ia=!fa||"single"!==Y.type&&"double"!==Y.type||"single"!==ca.type&&"double"!==ca.type||"single"!==Z.type&&"double"!==Z.type||W.features.some(na=>1<na.attributes[Y.name]||1<na.attributes[ca.name]||1<na.attributes[Z.name])?1:255,ea.push(new T({value:ka.attributes[ba.name],label:ka.attributes[ba.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:fa?new u([ka.attributes[Y.name]*ia,ka.attributes[ca.name]*ia,ka.attributes[Z.name]*ia,
1]):new u([0,0,0,0])}})))});else if(X?.[0])for(O=X[0].min;O<=X[0].max;O++)ea.push(new T({value:O,label:O.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new u([0,0,0,0])}}));ea.sort((ka,ia)=>ka.value&&"string"===typeof ka.value.valueOf()?0:ka.value>ia.value?1:-1);if(!fa){const ka=U.convertColorRampToColormap(A,{numColors:ea.length});ea.forEach((ia,na)=>ia.symbol.color=new u(ka[na].slice(1,4)));H.colorRamp=A}if(M||S){const ka=M||U.convertColorRampToColormap(S,{numColors:ea.length}).map(ia=>
ia.slice(1));ea.forEach((ia,na)=>ia.symbol.color=new u(ka[na]));H.colorRamp=S}return new n({field:ba.name,uniqueValueInfos:ea,authoringInfo:H})}function y(H,O,M){let S;null!=H?(S=O?H.fields.find(W=>O.toLowerCase()===W.name.toLowerCase()):v(H.fields),S||(M||(S=H.fields.find(W=>"string"===W.type)),S||(S=w(H,"value")))):S=new x({name:"value"});return S}function v(H){let O;for(let M=0;M<H.length;M++){const S=H[M].name.toLowerCase();if("string"===H[M].type){if(S.startsWith("class")){O=H[M];break}null==
O&&(S.endsWith("name")||S.endsWith("type"))&&(O=H[M])}}return O}function w(H,O){return null==H?null:H.fields.find(M=>M.name.toLowerCase()===O)}function B(H){if(!L.isColormapRendererSupported(H))return null;let O;const {attributeTable:M,colormap:S}=H;if(null!=M){const W=w(M,"value"),X=y(M,null,!0);"string"===X.type&&(O={},M.features.forEach(ba=>{ba=ba.attributes;O[ba[W.name]]=X?ba[X.name]:ba[W.name]}))}return e.createFromColormap(S,O)}function F(H,O,M){let S=0,W=0;null!=H.attributeTable?(H=H.attributeTable,
S=W=H.features[0].attributes[O.name],H.features.forEach(X=>{X=X.attributes[O.name];X<S&&(S=X);X>W&&(W=X)})):null!=H.histograms&&(H=H.histograms,S=H[0].min,W=H[0].max);return(W-S)/M}function I(H){if(!L.isVectorFieldRendererSupported(H))return null;if(null!=H.statistics&&H.statistics.length&&("vector-magdir"===H.dataType||"vector-uv"===H.dataType)){const {minMagnitude:M,maxMagnitude:S}=N(H.dataType,H.statistics);var O=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:M,maxDataValue:S}]}H=
null!=H.multidimensionalInfo?R.get(H.multidimensionalInfo.variables[0].unit):null;O=new a({visualVariables:O,inputUnit:H,rotationType:"geographic"});O.visualVariables=[...O.sizeVariables,...O.rotationVariables];return O}function G(H){return{color:H.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function N(H,O){if("vector-magdir"===H)H=O[0].min,O=O[0].max;else{const M=O[0].min,S=O[0].max,W=O[1].min;O=O[1].max;H=0;O=Math.max(Math.abs(M),Math.abs(W),Math.abs(S),Math.abs(O))}return{minMagnitude:H,
maxMagnitude:O}}const z=p.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),A=p.fromJSON(U.predefinedJsonColorRamps[0]),J=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),R=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);
l.createClassBreaksRenderer=function(H,O){H=c(H,O?.variableName);const {attributeTable:M}=H;if(!L.isClassBreaksSupported(H))return null;const S=null!=H.histograms?H.histograms[0]:null,W=null!=O?.numClasses&&isFinite(O?.numClasses)?O.numClasses:5,X=new Q({classificationMethod:O?.classificationMethod,colorRamp:O?.colorRamp});let ba=O?.field||"value";const Y=[],ca=[],Z=null!=M,ea=Z&&M.fields.find(na=>"count"===na.name.toLowerCase()),ha=Z?M.fields.find(na=>na.name.toLowerCase()===ba.toLowerCase()):void 0;
if(ha&&Z){ba=ha.name;const na=M.features.length;let qa=0;M.features.forEach(ta=>qa+=(ea?ta.attributes[ea.name]:50)/na);M.features.forEach(ta=>{const wa=ta.attributes[ha.name];ta=ea?ta.attributes[ea.name]:50;if(0<ta){ca.push(ta);ta=Math.max(1,Math.round(ta/na/qa*1E3));for(let ya=0;ya<ta;ya++)Y.push(wa)}})}else{var {pixelType:fa}=H;const na=(S.max-S.min)/S.size,qa=(fa=fa.includes("s")||fa.includes("u"))&&1===na?Math.floor(S.min+.5):S.min,ta=fa&&1===na?Math.floor(S.max-.5):S.max,wa=S.size;let ya=0,xa;
S.counts.forEach(Aa=>ya+=Aa/wa);S.counts.forEach((Aa,sa)=>{if(0<Aa)for(ca.push(Aa),Aa=Math.max(1,Math.round(Aa/wa/ya*1E3)),xa=Z?M.features[sa].attributes[ha.name]:0===sa?qa:sa===wa-1?ta:S.min+na*(sa+.5),sa=0;sa<Aa;sa++)Y.push(xa)})}fa=O?.classificationMethod||"natural-breaks";let ka=O?.definedInterval;"defined-interval"!==fa||ka||(ka=F(H,ha,W));H=g.createGenerateRendererClassBreaks({values:Y,valueFrequency:ca,normalizationTotal:null,definition:new d({classificationMethod:fa,breakCount:W,definedInterval:ka})});
let ia=O?.colors;ia||(O=O?.colorRamp||z,X.colorRamp=O,ia=U.convertColorRampToColormap(O,{numColors:H.classBreaks.length,interpolateAlpha:!0}).map(na=>na.slice(1)));O=H.classBreaks.map((na,qa)=>new P({minValue:na.minValue,maxValue:na.maxValue,label:na.label,symbol:{type:"simple-fill",color:ia[qa]}}));return new r({field:ba,classBreakInfos:O,authoringInfo:X})};l.createColormapRenderer=B;l.createDefaultRenderer=function(H,O){const {attributeTable:M,colormap:S}=H;if(L.isVectorFieldRendererSupported(H)){var W=
I(H);if(null!=W)return W}return null!=S&&(W=B(H),null!=W)||null!=M&&(W=t(H),null!=W)?W:k(H,O)};l.createFlowRenderer=function(H){if(!L.isFlowRendererSupported(H))return null;let O;if(null!=H.statistics&&0<H.statistics.length&&("vector-magdir"===H.dataType||"vector-uv"===H.dataType)){const {minMagnitude:M,maxMagnitude:S}=N(H.dataType,H.statistics);O=[{type:"color",field:"Magnitude",stops:[{value:M,color:"#1020C0"},{value:S,color:"#C02010"}]}]}return new K({visualVariables:O})};l.createShadedReliefRenderer=
function(H,O="traditional"){if(!L.isShadedReliefRendererSupported(H))return null;({extent:H}=H);H=H.width*D.getMetersPerUnitForSR(H.spatialReference);return new m({hillshadeType:O,scalingType:5E6<H?"adjusted":"none"})};l.createStretchRenderer=k;l.createUVRenderer=t;l.createVectorFieldRenderer=I;l.estimateMagnitudeRange=N;l.getBandNames=function(H,O){const M=H.bandInfos.map(({name:S})=>S);return O?.length?O.map(S=>M[S]):M};l.getClassField=y;l.getDefaultBandCombination=h;l.getDefaultInterpolation=function(H,
O,M){const S=["nearest","bilinear","cubic","majority"].find(W=>W===M?.toLowerCase());return"Map"===O?S??"bilinear":"standard-time"===H.dataType?S??"nearest":"thematic"===H.dataType||H.attributeTable||H.colormap?"nearest"===S||"majority"===S?S:"nearest":S??"bilinear"};l.getDefinedInterval=F;l.getField=w;l.getSupportedRendererTypes=function(H,O=!1){const M=["raster-stretch"];L.isColormapRendererSupported(H,O)&&M.push("raster-colormap");L.isUVRendererSupported(H)&&M.push("unique-value");L.isClassBreaksSupported(H,
O)&&M.push("class-breaks");L.isShadedReliefRendererSupported(H)&&M.push("raster-shaded-relief");L.isVectorFieldRendererSupported(H)&&M.push("vector-field");L.isFlowRendererSupported(H)&&M.push("flow");return M};l.getVariableRasterInfo=c;l.getWellKnownBandIndexes=b;l.normalizeRendererJSON=function(H){if("uniqueValue"===H.type){var O=H.uniqueValueInfos;O?.[0].symbol?.symbolLayers?.length&&(H.uniqueValueInfos=O?.map(M=>({value:M.value,label:M.label,symbol:M.symbol?G(M.symbol):null})));return H}"classBreaks"===
H.type&&(O=H.classBreakInfos,O[0].symbol?.symbolLayers?.length&&(H.classBreakInfos=O.map(M=>({classMinValue:M.classMinValue,classMaxValue:M.classMaxValue,label:M.label,symbol:M.symbol?G(M.symbol):null}))));return H};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/rasterRendererChecks":function(){define(["exports"],function(l){function u(C){return["u8","s8"].includes(C.pixelType)&&null!=C.statistics?.[0]?.min&&null!=C.statistics[0]?.max&&1===C.bandCount}l.isClassBreaksSupported=
function(C,D=!1){const {attributeTable:x,bandCount:K}=C;return 1===K&&(!D||null!=x||null!=C.histograms)};l.isColormapRendererSupported=function(C,D=!1){const {bandCount:x,colormap:K,pixelType:Q}=C;return 1===x&&(!!K?.length||!D&&"u8"===Q)};l.isFlowRendererSupported=function(C){({dataType:C}=C);return"vector-uv"===C||"vector-magdir"===C};l.isShadedReliefRendererSupported=function(C){const {bandCount:D,dataType:x,pixelType:K}=C;return"elevation"===x||"generic"===x&&1===D&&("s16"===K||"s32"===K||"f32"===
K||"f64"===K)};l.isSingleBand8BitRasterWithStats=u;l.isUVRendererSupported=function(C,D){const {attributeTable:x,bandCount:K}=C;return null==x&&u(C)?!0:null==x||1<K||D&&null==x.fields.find(Q=>Q.name.toLowerCase()===D.toLowerCase())?!1:!0};l.isVectorFieldRendererSupported=function(C){({dataType:C}=C);return"vector-uv"===C||"vector-magdir"===C};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,u,C,D,x,K,Q,P,U){x=new u.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});u=new u.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});C=class extends C.JSONSupport{constructor(L){super(L);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(L){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",L)}set definedInterval(L){"defined-interval"===this.classificationMethod&&this._set("definedInterval",L)}};l.__decorate([P.enumeration({classBreaksDef:"class-breaks-definition"})],C.prototype,"type",void 0);l.__decorate([D.property({json:{write:!0}})],C.prototype,
"breakCount",void 0);l.__decorate([D.property({json:{write:!0}})],C.prototype,"classificationField",void 0);l.__decorate([D.property({type:String,json:{read:x.read,write:x.write}})],C.prototype,"classificationMethod",void 0);l.__decorate([D.property({json:{write:!0}})],C.prototype,"normalizationField",void 0);l.__decorate([D.property({json:{read:u.read,write:u.write}})],C.prototype,"normalizationType",void 0);l.__decorate([D.property({value:null,json:{write:!0}})],C.prototype,"standardDeviationInterval",
null);l.__decorate([D.property({value:null,json:{write:!0}})],C.prototype,"definedInterval",null);return C=l.__decorate([U.subclass("esri.rest.support.ClassBreaksDefinition")],C)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(l,u){function C(g){var p=g.definition;const {classificationMethod:q,normalizationType:n,definedInterval:e}=p;p=p.breakCount??1;const m=[];var r=g.values;if(0===r.length)return[];r=r.sort((f,t)=>f-t);var a=r[0],k=r[r.length-
1];if("equal-interval"===q)if(r.length>=p){r=(k-a)/p;g=a;for(var c=1;c<p;c++){var h=Number((a+c*r).toFixed(6));m.push({minValue:g,maxValue:h,label:D(g,h,n)});g=h}m.push({minValue:g,maxValue:k,label:D(g,k,n)})}else r.forEach(f=>{m.push({minValue:f,maxValue:f,label:D(f,f,n)})});else if("natural-breaks"===q){r=x(r);g=K(r.uniqueValues,g.valueFrequency||r.valueFrequency,p);for(c=1;c<p;c++)r.uniqueValues.length>c&&(h=Number(r.uniqueValues[g[c]].toFixed(6)),m.push({minValue:a,maxValue:h,label:D(a,h,n)}),
a=h);m.push({minValue:a,maxValue:k,label:D(a,k,n)})}else if("quantile"===q)if(r.length>=p&&a!==k){g=Math.ceil(r.length/p);c=0;for(h=1;h<p;h++){var b=g+c-1;b>r.length&&(b=r.length-1);0>b&&(b=0);m.push({minValue:a,maxValue:r[b],label:D(a,r[b],n)});a=r[b];c+=g;g=Math.ceil((r.length-c)/(p-h))}m.push({minValue:a,maxValue:k,label:D(a,k,n)})}else for(p=-1,k=0;k<r.length;k++)a=r[k],a!==p&&(p=a,m.push({minValue:p,maxValue:a,label:D(p,a,n)}),p=a);else if("standard-deviation"===q)if(g=U(r),c=L(r,g),0===c)m.push({minValue:r[0],
maxValue:r[0],label:D(r[0],r[0],n)});else{r=P(a,k,p,g,c)*c;c=0;for(h=p;1<=h;h--)b=Number((g-(h-.5)*r).toFixed(6)),m.push({minValue:a,maxValue:b,label:D(a,b,n)}),a=b,c++;h=Number((g+.5*r).toFixed(6));m.push({minValue:a,maxValue:h,label:D(a,h,n)});a=h;c++;for(b=1;b<=p;b++)h=c===2*p?k:Number((g+(b+.5)*r).toFixed(6)),m.push({minValue:a,maxValue:h,label:D(a,h,n)}),a=h,c++}else if("defined-interval"===q){if(!e)return m;p=r[0];k=r[r.length-1];r=Math.ceil((k-p)/e);a=p;for(g=1;g<r;g++)c=Number((p+g*e).toFixed(6)),
m.push({minValue:a,maxValue:c,label:D(a,c,n)}),a=c;m.push({minValue:a,maxValue:k,label:D(a,k,n)})}return m}function D(g,p,q){let n=null;return n=g===p?q&&"percent-of-total"===q?g+"%":g.toString():q&&"percent-of-total"===q?g+"% - "+p+"%":g+" - "+p}function x(g){const p=[],q=[];let n=Number.MIN_VALUE,e=1,m=-1;for(let r=0;r<g.length;r++){const a=g[r];a===n?(e++,q[m]=e):null!==a&&(p.push(a),n=a,e=1,q.push(e),m++)}return{uniqueValues:p,valueFrequency:q}}function K(g,p,q){var n=g.length;const e=[];q>n&&
(q=n);for(var m=0;m<q;m++)e.push(Math.round(m*n/q-1));e.push(n-1);m=Q(e,g,p,q);n=m.mean;m=m.sdcm;var r=q,a=0,k=0;let c=0,h=0,b=!0;for(let t=0;2>t&&b;t++){0===t&&(b=!1);for(var f=0;f<r-1;f++)for(;e[f+1]+1!==e[f+2];)if(e[f+1]+=1,a=T(f,e,g,p),c=a.sbMean,a=a.sbSdcm,k=T(f+1,e,g,p),h=k.sbMean,k=k.sbSdcm,a+k<m[f]+m[f+1])m[f]=a,m[f+1]=k,n[f]=c,n[f+1]=h,b=!0;else{--e[f+1];break}for(f=r-1;0<f;f--)for(;e[f]!==e[f-1]+1;)if(--e[f],a=T(f-1,e,g,p),c=a.sbMean,a=a.sbSdcm,k=T(f,e,g,p),h=k.sbMean,k=k.sbSdcm,a+k<m[f-
1]+m[f])m[f-1]=a,m[f]=k,n[f-1]=c,n[f]=h,b=!0;else{e[f]+=1;break}}b&&(m=Q(e,g,p,q));return e}function Q(g,p,q,n){let e=[];var m=[],r=[];let a=0;const k=[],c=[];for(var h=0;h<n;h++){var b=T(h,g,p,q);k.push(b.sbMean);c.push(b.sbSdcm);a+=c[h]}b=a;for(h=!0;h||a<b;){h=!1;e=[];for(m=0;m<n;m++)e.push(g[m]);for(r=0;r<n;r++)for(b=g[r]+1;b<=g[r+1];b++)if(m=p[b],0<r&&b!==g[r+1]&&Math.abs(m-k[r])>Math.abs(m-k[r-1]))g[r]=b;else if(r<n-1&&g[r]!==b-1&&Math.abs(m-k[r])>Math.abs(m-k[r+1])){g[r+1]=b-1;break}b=a;a=0;
m=[];r=[];for(let f=0;f<n;f++){m.push(k[f]);r.push(c[f]);const t=T(f,g,p,q);k[f]=t.sbMean;c[f]=t.sbSdcm;a+=c[f]}}if(a>b){for(p=0;p<n;p++)g[p]=e[p],k[p]=m[p],c[p]=r[p];a=b}return{mean:k,sdcm:c}}function P(g,p,q,n,e){g=Math.max(n-g,p-n)/e/q;return 1<=g?1:.5<=g?.5:.25}function U(g){let p=0;for(let q=0;q<g.length;q++)p+=g[q];return p/=g.length}function L(g,p){let q=0;for(let n=0;n<g.length;n++){const e=g[n];q+=(e-p)*(e-p)}q/=g.length;return Math.sqrt(q)}function T(g,p,q,n){var e=0,m=0;for(var r=p[g]+
1;r<=p[g+1];r++){const a=n[r];e+=q[r]*a;m+=a}0>=m&&d.warn("Exception in Natural Breaks calculation");e/=m;m=0;for(r=p[g]+1;r<=p[g+1];r++)m+=n[r]*(q[r]-e)**2;return{sbMean:e,sbSdcm:m}}const d=u.getLogger("esri.rest.support.generateRendererUtils");l.createGenerateRendererClassBreaks=function(g){const {normalizationTotal:p}=g;return{classBreaks:C(g),normalizationTotal:p}};l.createGenerateRendererUniqueValues=function(g){g=x(g);const p=[],q=g.uniqueValues.length;for(let n=0;n<q;n++){const e=g.uniqueValues[n];
p.push({value:e,count:g.valueFrequency[n],label:e.toString()})}return{uniqueValues:p}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils ./rasterRendererChecks".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g,p,q){function n(e){return T.isValidPixelBlock(e)&&0!==e.validPixelCount}C=class extends C.JSONSupport{constructor(e){super(e)}bind(){const {rendererJSON:e}=this;if(!e)return{success:!1};this.lookup={rendererJSON:{}};let m;switch(e.type){case "uniqueValue":m=this._updateUVRenderer(e);break;case "rasterColormap":m=this._updateColormapRenderer(e);break;case "rasterStretch":m=this._updateStretchRenderer(e);break;case "classBreaks":m=this._updateClassBreaksRenderer(e);
break;case "rasterShadedRelief":m=this._updateShadedReliefRenderer(e);break;case "vectorField":m=this._updateVectorFieldRenderer();break;case "flowRenderer":m=this._updateFlowRenderer()}return m}symbolize(e){let m=e?.pixelBlock;if(!n(m))return m;if(e.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(m,e.simpleStretchParams);try{3<m.pixels.length&&(m=m.extractBands([0,1,2]));let r;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":r=this._symbolizeColormap(m);
break;case "classBreaks":r=this._symbolizeClassBreaks(m);break;case "rasterStretch":r=this._symbolizeStretch(m,e.bandIds);break;case "rasterShadedRelief":const a=e.extent;r=this._symbolizeShadedRelief(m,{isGCS:a.spatialReference.isGeographic,resolution:{x:(a.xmax-a.xmin)/m.width,y:(a.ymax-a.ymin)/m.height}})}return r}catch(r){return D.getLogger(this).error("symbolize",r.message),m}}simpleStretch(e,m){if(!n(e))return e;try{return 3<e.pixels.length&&(e=e.extractBands([0,1,2])),d.stretch(e,{...m,isRenderer:!0})}catch(r){return D.getLogger(this).error("symbolize",
r.message),e}}generateWebGLParameters(e){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:c,offset:h}=this.lookup.colormapLut||{};return{colormap:c,colormapOffset:h,type:"lut"}}const {pixelBlock:m,isGCS:r,resolution:a,bandIds:k}=e;({rendererJSON:e}=this);return"rasterStretch"===e.type?this._generateStretchWebGLParams(m,e,k):"rasterShadedRelief"===e.type?this._generateShadedReliefWebGLParams(e,r,a??void 0):"vectorField"===e.type?this._generateVectorFieldWebGLParams(e):
null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const m=this.rendererJSON.colorRamp;if(e)return JSON.stringify(m)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(e){return this._isLUTChanged()&&!this.bind().success?e:T.colorize(e,this.lookup.colormapLut)}_symbolizeClassBreaks(e){const {canUseIndexedLUT:m}=
this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?e:m?T.colorize(e,this.lookup.colormapLut):T.remapColor(e,this.lookup.remapLut??[])}_symbolizeStretch(e,m){const {rasterInfo:r}=this,{pixelType:a,bandCount:k}=r,c=this.rendererJSON;var h=["u8","u16","s8","s16"].includes(a);let b;var {dra:f}=c;({gamma:t}=this.lookup);if("histogramEqualization"===c.stretchType){h=f?null:this.lookup?.histogramLut;m=d.getStretchCutoff(c,{rasterInfo:r,pixelBlock:e,bandIds:m,returnHistogramLut:!h});
var t=d.stretch(e,{...m,gamma:t,isRenderer:!0});t=T.lookupPixels(t,{lut:f?m.histogramLut:h,offset:0})}else if(h){if(f)f=d.getStretchCutoff(c,{rasterInfo:r,pixelBlock:e,bandIds:m}),b=d.createStretchLUT({pixelType:a,...f,gamma:t,rounding:"floor"});else{if(this._isLUTChanged()&&!this.bind().success)return e;b=this.lookup?this.lookup.stretchLut:null}if(!b)return e;1<k&&null!=m&&m.length===e?.pixels.length&&b?.lut.length===k&&(b={lut:m.map(y=>b.lut[y]),offset:b.offset});t=T.lookupPixels(e,b)}else f=d.getStretchCutoff(c,
{rasterInfo:r,pixelBlock:e,bandIds:m}),t=d.stretch(e,{...f,gamma:t,isRenderer:!0});if(c.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;t=T.colorize(t,this.lookup?.colormapLut)}return t}_symbolizeShadedRelief(e,m){var r=this.rendererJSON;m=g.hillshade(e,{...r,...m});if(!r.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return m;r=this.lookup?this.lookup.hsvMap:null;if(!r)return m;g.tintHillshade(m,e,r,this.rasterInfo.statistics?.[0]??{min:0,max:8E3});return m}_isVectorFieldData(){const {bandCount:e,
dataType:m}=this.rasterInfo;return 2===e&&("vector-magdir"===m||"vector-uv"===m)}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(e){const {bandCount:m,
attributeTable:r,pixelType:a}=this.rasterInfo,k=e.field1;if(!k)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const c=e.defaultSymbol;var h=1===m&&["u8","s8"].includes(a);if(!q.isUVRendererSupported(this.rasterInfo,k)&&!h)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const b=[];if(null!=r){const f=r.fields.find(t=>"value"===t.name.toLowerCase());if(!f)return{success:!1,
error:"Unsupported data; the data's raster attribute table does not have a value field."};r.features.forEach(t=>{const y=e.uniqueValueInfos?.find(v=>String(v.value)===String(t.attributes[k]))?.symbol?.color;y?b.push([t.attributes[f.name]].concat(y)):c&&b.push([t.attributes[f.name]].concat(c.color))})}else{if("value"!==k.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};e.uniqueValueInfos?.forEach(f=>
{const t=f?.symbol?.color;t?b.push([parseInt(""+f.value,10)].concat(t)):c&&b.push([parseInt(""+f.value,10)].concat(c?.color))})}if(0===b.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};h=T.createColormapLUT({colormap:b});this.lookup={rendererJSON:e,colormapLut:h};this.canRenderInWebGL=this._isColormapSupportedByWebGL(h?.indexedColormap);return{success:!0}}_updateColormapRenderer(e){if(!q.isColormapRendererSupported(this.rasterInfo))return{success:!1,
error:"Unsupported data; the data source does not have a colormap."};var m=e.colormapInfos.map(r=>[r.value].concat(r.color)).sort((r,a)=>r[0]-a[0]);if(!m||0===m.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};m=T.createColormapLUT({colormap:m});this.lookup={rendererJSON:e,colormapLut:m};this.canRenderInWebGL=this._isColormapSupportedByWebGL(m?.indexedColormap);return{success:!0}}_updateShadedReliefRenderer(e){if(!q.isShadedReliefRendererSupported(this.rasterInfo))return{success:!1,
error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(e.colorRamp){var m=p.convertColorRampToColormap(e.colorRamp,{interpolateAlpha:!0});m=T.createColormapLUT({colormap:m});const r=[],a=m.indexedColormap;for(let k=0;k<a.length;k+=4){const c=u.toHSV({r:a[k],g:a[k+1],b:a[k+2]});r.push([c.h/60,c.s/100,255*c.v/100])}this.lookup={rendererJSON:e,colormapLut:m,hsvMap:r}}else this.lookup=null;this.canRenderInWebGL=!0;
return{success:!0}}_analyzeClassBreaks(e){const {attributeTable:m,pixelType:r}=this.rasterInfo,a=null!=m?m.fields.find(h=>"value"===h.name.toLowerCase()):null,k=null!=m?m.fields.find(h=>h.name.toLowerCase()===e.field.toLowerCase()):null,c=null!=a&&null!==k;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(r)||c,tableValueField:a,tableBreakField:k}}_updateClassBreaksRenderer(e){var {attributeTable:m}=this.rasterInfo;const {canUseIndexedLUT:r,tableValueField:a,tableBreakField:k}=this._analyzeClassBreaks(e);
var c=e.classBreakInfos;if(!c?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};c=c.sort((y,v)=>y.classMaxValue-v.classMaxValue);var h=c[c.length-1],b=e.minValue;if(!r){var f=[];for(var t=0;t<c.length;t++)f.push({value:c[t].classMinValue??b,mappedColor:c[t].symbol.color}),b=c[t].classMaxValue;f.push({value:h.classMaxValue,mappedColor:h.symbol.color});this.lookup={rendererJSON:e,remapLut:f};this.canRenderInWebGL=!1;return{success:!0}}f=
[];if(null!=m&&null!=a&&null!==k&&a!==k){h=a.name;const y=k.name,v=c[c.length-1],{classMaxValue:w}=v;b=e.minValue;for(t of m.features){m=t.attributes[h];const B=t.attributes[y],F=B===w?v:B<b?null:c.find(({classMaxValue:I})=>I>B);F&&f.push([m].concat(F.symbol.color))}}else{b=Math.floor(e.minValue);for(t=0;t<c.length;t++){for(m=c[t];b<m.classMaxValue;b++)f.push([b].concat(m.symbol.color));b=Math.ceil(m.classMaxValue)}h.classMaxValue===b&&f.push([h.classMaxValue].concat(h.symbol.color))}c=T.createColormapLUT({colormap:f,
fillUnspecified:!1});this.lookup={rendererJSON:e,colormapLut:c};this.canRenderInWebGL=this._isColormapSupportedByWebGL(c?.indexedColormap);return{success:!0}}_isColormapSupportedByWebGL(e){return!!e?.length&&16384>=e.length}_isHistogramRequired(e){return"percentClip"===e||"histogramEqualization"===e}_isValidRasterStatistics(e){return null!=e&&0<e.length&&null!=e[0].min&&null!=e[0].max}_updateStretchRenderer(e){let {stretchType:m,dra:r}=e;if(!("none"===m||e.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
r))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var a=e.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(e.stretchType)||a?.length||r||(m="minMax");const {computeGamma:k,useGamma:c,colorRamp:h}=e;let {gamma:b}=e;c&&k&&!b?.length&&(b=d.computeGammaValues(this.rasterInfo.pixelType,e.statistics?.length?e.statistics:this.rasterInfo.statistics));var f=this.rasterInfo.pixelType;const t=!r&&["u8","u16",
"s8","s16"].includes(f);"histogramEqualization"===m?(f=a.map(y=>d.createHistogramEqualizationLUT(y)),this.lookup={rendererJSON:e,histogramLut:f}):t&&(a=d.getStretchCutoff(e,{rasterInfo:this.rasterInfo}),f=d.createStretchLUT({pixelType:f,...a,gamma:c?b:null,rounding:"floor"}),this.lookup={rendererJSON:e,stretchLut:f});h&&!this._isStretchColorRampNoop(h)&&(f=p.convertColorRampToColormap(h,{interpolateAlpha:!0}),this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=T.createColormapLUT({colormap:f}),
this.lookup.rendererJSON=e);this.lookup.gamma=c&&b?.length?b:null;this.canRenderInWebGL=!0;return{success:!0}}_isStretchColorRampNoop(e){return"algorithmic"===e.type&&["0,0,0,255","0,0,0"].includes(e.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(e.toColor.join(","))}_generateStretchWebGLParams(e,m,r){let a=null,k=null;var c=this.lookup?.colormapLut;m.colorRamp&&c&&(a=c.indexedColormap,k=c.offset);"histogramEqualization"===m.stretchType&&(m={...m,stretchType:"minMax"});({gamma:c}=
this.lookup);const h=!!(m.useGamma&&c&&c.some(F=>1!==F)),{minCutOff:b,maxCutOff:f,outMin:t,outMax:y}=d.getStretchCutoff(m,{rasterInfo:this.rasterInfo,pixelBlock:e,bandIds:r});var v=0;null!=e&&(v=e.getPlaneCount(),2===v&&(e=e.clone(),e.statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));({bandCount:e}=this.rasterInfo);r=Math.min(3,r?.length||v||e,e);e=new Float32Array(r);v=a||h?1:255;let w;for(w=0;w<b.length;w++)e[w]=f[w]===b[w]?0:(y-t)/(f[w]-b[w])/v;const B=new Float32Array(r);if(h&&c)for(w=0;w<
r;w++)B[w]=1<c[w]?2<c[w]?6.5+(c[w]-2)**2.5:6.5+100*(2-c[w])**4:1;return{bandCount:r,outMin:t/v,outMax:y/v,minCutOff:b,maxCutOff:f,factor:e,useGamma:h,gamma:h?c:[1,1,1],gammaCorrection:h?B:[1,1,1],colormap:a,colormapOffset:k,stretchType:m.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(e,m=!1,r={x:0,y:0}){let a=null,k=null;const c=this.lookup?.colormapLut;e.colorRamp&&c&&(a=c.indexedColormap,k=c.offset);m=g.calculateHillshadeParams({...e,isGCS:m,resolution:r});r=this.rasterInfo.statistics?.[0];
return{...m,minValue:r?.min??0,maxValue:r?.max??8E3,hillshadeType:"traditional"===e.hillshadeType?0:1,type:"hillshade",colormap:a,colormapOffset:k}}_generateVectorFieldWebGLParams(e){const {style:m,inputUnit:r,outputUnit:a,visualVariables:k,symbolTileSize:c,flowRepresentation:h}=e;let b;var f=this.rasterInfo.statistics?.[0].min??0,t=this.rasterInfo.statistics?.[0].max??50,y=k?.find(B=>"sizeInfo"===B.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:t,maxSize:.8*c,minDataValue:f,minSize:.2*c},
v=y.minDataValue??f,w=y.maxDataValue??t;t=null!=y.maxSize&&null!=y.minSize?[y.minSize/c,y.maxSize/c]:[.2,.8];"wind_speed"===m&&(t[0]=t[1]=(t[0]+t[1])/2);f=null!=v&&null!=w?[v,w]:null;if("classified_arrow"===m)if(null!=v&&null!=w&&null!=y)for(b=[],v=(y.maxDataValue-y.minDataValue)/5,w=0;6>w;w++)b.push(y.minDataValue+v*w);else b=[0,1E-6,3.5,7,10.5,14];y="flow_to"===h===("ocean_current_kn"===m||"ocean_current_m"===m)?0:Math.PI;v=k?.find(B=>"rotationInfo"===B.type);return{breakValues:b,dataRange:f,inputUnit:r,
outputUnit:a,symbolTileSize:c,symbolPercentRange:t,style:m||"single_arrow",rotation:y,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":v?.rotationType||e.rotationType,type:"vectorField"}}};l.__decorate([x.property({json:{write:!0}})],C.prototype,"rendererJSON",void 0);l.__decorate([x.property({type:L,json:{write:!0}})],C.prototype,"rasterInfo",void 0);l.__decorate([x.property({json:{write:!0}})],C.prototype,"lookup",void 0);l.__decorate([x.property()],
C.prototype,"canRenderInWebGL",void 0);return C=l.__decorate([U.subclass("esri.renderers.support.RasterSymbolizer")],C)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils","../../../renderers/support/stretchRendererUtils"],function(l,u,C,D,x){function K(g,p=256){p=Math.min(p,256);const {size:q,counts:n}=g;g=new Uint8Array(q);var e=n.reduce((c,h)=>c+h/p,0);let m=0;var r=0;let a=0,k=e;for(let c=0;c<
q;c++)if(a+=n[c],!(c<q-1&&a+n[c+1]<k)){for(;m<p-1&&k<a;)m++,k+=e;for(;r<=c;r++)g[r]=m;r=c+1}for(e=r;e<q;e++)g[e]=p-1;return g}function Q(g,p){g=Math.min(Math.max(g,-100),100);p=Math.min(Math.max(p??0,-100),100);let q=0,n=0;const e=new Uint8Array(256);for(q=0;256>q;q++)0<g&&100>g?n=(200*q-25500+510*p)/(2*(100-g))+128:0>=g&&-100<g?n=(200*q-25500+510*p)*(100+g)/2E4+128:100===g?(n=200*q-25500+256*(100-g)+510*p,n=0<n?255:0):-100===g&&(n=128),e[q]=255<n?255:0>n?0:n;return e}function P(g,p,q,n){let e=Infinity,
m=-Infinity;var r=0,a=0,k=0,c=0;const h=g.length;var b=new Map,f=[];for(let t=0;t<h;t++){const y=g[t];if(!p||p[t]){f.push(y);const v=(b.get(y)??0)+1;b.set(y,v);v>c&&(c=v,k=y);e=y<e?y:e;m=y>m?y:m;r+=y;a++}}if(0===a)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};r/=a;c=0;for(b=0;b<h;b++)if(!p||p[b])c+=(g[b]-r)**2;b=p?p.filter(t=>t).length:h;c=1>=b?0:Math.sqrt(c/(b-1));f.sort((t,y)=>t-y);b=a>>>1;k={min:e,max:m,avg:r,stddev:c,mode:k,median:a%2?f[Math.floor(b)]:(f[b-1]+
f[b])/2};if(!n)return{statistics:k,histogram:null};if(["u8","s8","u4","u2","u1"].includes(q)){a=m-e+1;q=new Uint32Array(a);for(n=0;n<h;n++)p&&!p[n]||q[g[n]-e]++;return{statistics:k,histogram:{min:e-.5,max:m+.5,size:a,counts:q}}}q=new Uint32Array(256);n=(m-e)/256;if(0===n)return{statistics:k,histogram:{min:e,max:m,size:1,counts:(new Uint32Array(1)).fill(a)}};a=new Uint32Array(257);for(f=0;f<h;f++)p&&!p[f]||a[Math.floor((g[f]-e)/n)]++;for(g=0;255>g;g++)q[g]=a[g];q[255]=a[255]+a[256];return{statistics:k,
histogram:{min:e,max:m,size:256,counts:q}}}function U(g){if(!g?.pixels?.length)return null;const {pixels:p,mask:q,bandMasks:n,pixelType:e}=g,m=g.width*g.height,r=p.length;let a,k;let c;var h;const b=[],f=[];for(c=0;c<r;c++){var t=new Uint32Array(256);var y=p[c];var v=n?.[c]??q;if("u8"===e)if(a=-.5,k=255.5,v)for(h=0;h<m;h++)v[h]&&t[y[h]]++;else for(h=0;h<m;h++)t[y[h]]++;else{h=!1;g.statistics||(g.updateStatistics(),h=!0);var w=g.statistics;a=w[c].minValue;k=w[c].maxValue;var B=(k-a)/256;if(0===B)for(!w||
g.validPixelCount||h||g.updateStatistics(),B=(g.validPixelCount||g.width*g.height)/256,h=0;256>h;h++)t[h]=Math.round(B*(h+1))-Math.round(B*h);else{w=new Uint32Array(257);for(h=0;h<m;h++)v&&!v[h]||w[Math.floor((y[h]-a)/B)]++;for(h=0;255>h;h++)t[h]=w[h];t[255]=w[255]+w[256]}}b.push({min:a,max:k,size:256,counts:t});for(h=v=y=B=0;256>h;h++)B+=t[h],y+=h*t[h];y/=B;for(h=0;256>h;h++)v+=t[h]*(h-y)**2;h=Math.sqrt(v/(B-1));B=(k-a)/256;t=(y+.5)*B+a;B*=h;f.push({min:a,max:k,avg:t,stddev:B})}return{statistics:f,
histograms:b}}function L(g,p){if(null==p||0===p.length)return g;const q=Math.max.apply(null,p),{minCutOff:n,maxCutOff:e,outMin:m,outMax:r,histogramLut:a}=g;return n.length===p.length||n.length<=q?g:{minCutOff:p.map(k=>n[k]),maxCutOff:p.map(k=>e[k]),histogramLut:a?p.map(k=>a[k]):null,outMin:m,outMax:r}}function T(g,p){const q=new Float32Array(g);for(let n=0;n<g;n++)q[n]=1<p[n]?2<p[n]?6.5+(p[n]-2)**2.5:6.5+100*(2-p[n])**4:1;return q}const d=[.299,.587,.114];l.computeGammaCorrection=T;l.computeGammaValues=
function(g,p,q){const n=[];for(let k=0;k<p.length;k++){var e=0,m=0,r=0;"min"in p[k]?{min:e,max:m,avg:r}=p[k]:[e,m,r]=p[k];r=r??0;"u8"!==g&&(r=255*(r-e)/(m-e));q&&(r*=d[k]);e=n;m=e.push;if(0>=r||255<=r)r=1;else{var a=0;150!==r&&(a=150>=r?45*Math.cos(.01047*r):17*Math.sin(.021*r));a=Math.log((r+a)/255);0===a?r=1:(r=Math.log(r/255)/a,r=isNaN(r)?1:Math.min(9.9,Math.max(.01,r)))}m.call(e,r)}return n};l.computeStatisticsHistograms=function(g){const {pixels:p,mask:q,pixelType:n,bandMasks:e}=g;var m=p.map((r,
a)=>P(r,e?.[a]??q,n,!0));g=m.map(({statistics:r})=>r);m=m.map(({histogram:r})=>r);return{statistics:g,histograms:m}};l.createContrastBrightnessLUT=Q;l.createHistogramEqualizationLUT=K;l.createStretchLUT=function(g){const {minCutOff:p,maxCutOff:q,gamma:n,pixelType:e,rounding:m}=g,r=g.outMin||0,a=g.outMax||255;if(!["u8","u16","s8","s16"].includes(e))return null;const k=p.length;let c,h,b=0;"s8"===e?b=-127:"s16"===e&&(b=-32767);let f=256;["u16","s16"].includes(e)&&(f=65536);var t=[],y=[];const v=a-r;
for(c=0;c<k;c++)y[c]=q[c]-p[c],t[c]=0===y[c]?0:v/y[c];let w;const B=[];let F,I;if(n&&n.length>=k)for(t=T(k,n),c=0;c<k;c++){I=[];for(h=0;h<f;h++)if(0===y[c])I[h]=r;else{var G=h+b;w=(G-p[c])/y[c];F=1;1<n[c]&&(F-=(1/v)**(w*t[c]));G<q[c]&&G>p[c]?(G=F*v*w**(1/n[c])+r,I[h]="floor"===m?Math.floor(G):"round"===m?Math.round(G):G):I[h]=G>=q[c]?a:r}B[c]=I}else for(c=0;c<k;c++){I=[];for(h=0;h<f;h++)G=h+b,G<=p[c]?I[h]=r:G>=q[c]?I[h]=a:(y=(G-p[c])*t[c]+r,I[h]="floor"===m?Math.floor(y):"round"===m?Math.round(y):
y);B[c]=I}if(null!=g.contrastOffset)for(g=Q(g.contrastOffset,g.brightnessOffset),c=0;c<k;c++)for(I=B[c],h=0;h<f;h++)I[h]=g[I[h]];return{lut:B,offset:b}};l.estimateStatisticsFromHistograms=function(g){const p=[];for(let m=0;m<g.length;m++){const {min:r,max:a,size:k,counts:c}=g[m];let h=0;var q=0;for(var n=0;n<k;n++)h+=c[n],q+=n*c[n];q/=h;n=0;for(var e=0;e<k;e++)n+=c[e]*(e-q)**2;e=(a-r)/k;p.push({min:r,max:a,avg:(q+.5)*e+r,stddev:Math.sqrt(n/(h-1))*e})}return p};l.estimateStatisticsHistograms=U;l.getStretchCutoff=
function(g,p){const {pixelBlock:q,bandIds:n,returnHistogramLut:e,rasterInfo:m}=p;var r=null;p=null;var a=g.stretchType;"number"===typeof a&&(a=x.stretchTypeFunctionEnum[a]);g.dra?"minMax"===a&&q?.statistics?r=q.statistics.map(G=>[G.minValue,G.maxValue,0,0]):(p=U(q),r=null!=p?p.statistics:null,p=null!=p?p.histograms:null):(r=g.statistics?.length?g.statistics:m.statistics,p="histograms"in g?g.histograms:void 0,p||(p=m.histograms));"percentClip"!==a&&"histogramEqualization"!==a||p?.length||(a="minMax");
var k=r?.length||p?.length||m.bandCount;const c=[],h=[];let b,f,t;r&&!Array.isArray(r[0])&&(r=r.map(G=>[G.min,G.max,G.avg,G.stddev]));const [y,v]=D.getPixelValueRange(m.pixelType);if(!r?.length){r=[];for(f=0;f<k;f++)r.push([y,v,1,1]);"standardDeviation"===a&&(a="minMax")}switch(a){case "none":for(f=0;f<k;f++)c[f]=y,h[f]=v;break;case "minMax":for(f=0;f<k;f++){var w=r[f];c[f]=w[0];h[f]=w[1]}break;case "standardDeviation":({numberOfStandardDeviations:w=2}=g);for(f=0;f<k;f++){var B=r[f];c[f]=B[2]-w*B[3];
h[f]=B[2]+w*B[3];c[f]<B[0]&&(c[f]=B[0]);h[f]>B[1]&&(h[f]=B[1])}break;case "histogramEqualization":u.assertIsSome(p);for(f=0;f<k;f++)c[f]=p[f].min,h[f]=p[f].max;break;case "percentClip":u.assertIsSome(p);for(f=0;f<p.length;f++){r=p[f];B=new Uint32Array(r.size);var F=[...r.counts];20<=F.length&&(F[0]=F[1]=F[2]=F[F.length-1]=F[F.length-2]=0);w=0;k=(r.max-r.min)/r.size;b=-.5===r.min&&1===k?.5:0;for(t=0;t<r.size;t++)w+=F[t],B[t]=w;F=(g.minPercent||0)*w/100;c[f]=r.min+b;for(t=0;t<r.size;t++)if(B[t]>F){c[f]=
r.min+k*(t+b);break}F=(1-(g.maxPercent||0)/100)*w;h[f]=r.max+b;for(t=r.size-2;0<=t;t--)if(B[t]<F){h[f]=r.min+k*(t+2-b);break}h[f]<c[f]&&(r=c[f],c[f]=h[f],h[f]=r)}break;default:for(f=0;f<k;f++)w=r[f],c[f]=w[0],h[f]=w[1]}let I;"histogramEqualization"===a?(u.assertIsSome(p),a=p[0].size||256,g=0,e&&(I=p.map(G=>K(G)))):(a=g.max||255,g=g.min||0);return L({minCutOff:c,maxCutOff:h,outMax:a,outMin:g,histogramLut:I},n)};l.stretch=function(g,p){if(!g?.pixels?.length)return g;const {mask:q,bandMasks:n,width:e,
height:m,pixels:r}=g,{minCutOff:a,maxCutOff:k,gamma:c}=p;var h=p.outMin||0;const b=p.outMax||255,f=e*m,t=p.outputPixelType||"u8";g=g.pixels.map(()=>C.createEmptyBand(t,f));const y=g.length;var v=b-h,w=[],B=[];for(var F=0;F<y;F++)B[F]=k[F]-a[F],w[F]=0===B[F]?0:v/B[F];F=t.startsWith("u")||t.startsWith("s");p=!!p.isRenderer;if(c&&c.length>=y){w=T(y,c);for(var I=0;I<y;I++){var G=n?.[I]??q;for(let z=0;z<f;z++)if(null==G||G[z]){if(0===B[I]){g[I][z]=h;continue}var N=r[I][z];const A=(N-a[I])/B[I];let J=1;
1<c[I]&&(J-=(1/v)**(A*w[I]));N<k[I]&&N>a[I]?(N=J*v*A**(1/c[I])+h,g[I][z]=p?Math.floor(N):F?Math.round(N):N):g[I][z]=N>=k[I]?b:h}}}else for(v=0;v<y;v++)for(B=n?.[v]??q,I=0;I<f;I++)if(null==B||B[I])G=r[v][I],G<k[v]&&G>a[v]?(G=(G-a[v])*w[v]+h,g[v][I]=p?Math.floor(G):F?Math.round(G):G):g[v][I]=G>=k[v]?b:h;h=new C({width:e,height:m,mask:q,bandMasks:n,pixels:g,pixelType:t});h.updateStatistics();return h};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports",
"../PixelBlock","./pixelUtils"],function(l,u,C){function D(P){let {altitude:U,azimuth:L}=P;const {hillshadeType:T,pixelSizePower:d=1,pixelSizeFactor:g=1,scalingType:p,isGCS:q,resolution:n}=P;var e="multi-directional"===T?2*P.zFactor:P.zFactor;const {x:m,y:r}=n;P=e/(8*m);var a=e/(8*r);q&&.001<e&&(P/=Q,a/=Q);"adjusted"===p&&(q?(P=m*Q,a=r*Q,P=(e+P**d*g)/(8*P),a=(e+a**d*g)/(8*a)):(P=(e+m**d*g)/(8*m),a=(e+r**d*g)/(8*r)));var k=(90-U)*Math.PI/180;e=Math.cos(k);let c=(360-L+90)*Math.PI/180,h=Math.sin(k)*
Math.cos(c);k=Math.sin(k)*Math.sin(c);const b=[315,270,225,360,180,0],f=[60,60,60,60,60,90];var t=new Float32Array([3,5,3,2,1,4]);const y=t.reduce((I,G)=>I+G);t=t.map(I=>I/y);const v="multi-directional"===T?b.length:1,w=new Float32Array(6),B=new Float32Array(6),F=new Float32Array(6);if("multi-directional"===T)for(let I=0;I<v;I++)U=f[I],L=b[I],k=(90-U)*Math.PI/180,e=Math.cos(k),c=(360-L+90)*Math.PI/180,h=Math.sin(k)*Math.cos(c),k=Math.sin(k)*Math.sin(c),w[I]=e,B[I]=h,F[I]=k;else w.fill(e),B.fill(h),
F.fill(k);return{resolution:n,factor:[P,a],sinZcosA:h,sinZsinA:k,cosZ:e,sinZcosAs:B,sinZsinAs:F,cosZs:w,weights:t,hillshadeType:["traditional","multi-directional"].indexOf(T)}}function x(P,U){const {width:L,height:T}=P;var d=L*T;const g=new Uint8Array(d),p=null!=P.mask;let q;if(p){q=new Uint8Array(P.mask);for(var n=0;n<q.length;n++)q[n]&&(g[n]=1,q[n]=1)}P=P.pixels[0];n=new Float32Array(d);const e=new Float32Array(d);let m=0;if(U){({resolution:r}=U);var r=r?(r.x+r.y)/2:1;m=200*U.zFactor/(r*r);r=new Float32Array(d)}U=
U?.curvatureType;let a;let k;for(d=1;d<T-1;d++){const w=d*L;for(let B=1;B<L-1;B++){const F=w+B;if(!q||0!==q[F]){if(q){if(7>q[F-L-1]+q[F-L]+q[F-L+1]+q[F-1]+q[F+1]+q[F+L-1]+q[F+L]+q[F+L+1]){g[F]=0;continue}var c=q[F-L-1]?P[F-L-1]:P[F];var h=q[F-L]?P[F-L]:P[F];var b=q[F-L+1]?P[F-L+1]:P[F];var f=q[F-1]?P[F-1]:P[F];var t=q[F+1]?P[F+1]:P[F];a=q[F+L-1]?P[F+L-1]:P[F];var y=q[F+L]?P[F+L]:P[F];k=q[F+L+1]?P[F+L+1]:P[F]}else c=P[F-L-1],h=P[F-L],b=P[F-L+1],f=P[F-1],t=P[F+1],a=P[F+L-1],y=P[F+L],k=P[F+L+1];n[F]=
b+t+t+k-(c+f+f+a);e[F]=a+y+y+k-(c+h+h+b);if(null!=r){var v=P[F];const I=.5*(f+t)-v;v=.5*(h+y)-v;"standard"===U?r[F]=-m*(I+v):(c=(-c+b+a-k)/4,f=(-f+t)/2,h=(h-y)/2,y=f*f,t=h*h,(b=y+t)&&(r[F]="profile"===U?m*(I*y+v*t+c*f*h)/b:-m*(I*t+v*y-c*f*h)/b))}}}}return{outMask:p?g:null,dzxs:n,dzys:e,curvatures:r}}function K(P,U,L){for(var T=0;T<L;T++)P[T*U]=P[T*U+1],P[(T+1)*U-1]=P[(T+1)*U-2];for(T=1;T<U-1;T++)P[T]=P[T+U],P[T+(L-1)*U]=P[T+(L-2)*U]}const Q=1/111E3;l.aspect=function(P,U={}){if(!C.isValidPixelBlock(P))return P;
var {resolution:L}=U;U=L?1/L.x:1;L=L?1/L.y:1;const {dzxs:T,dzys:d,outMask:g}=x(P),{width:p,height:q}=P,n=new Float32Array(p*q);for(let m=1;m<q-1;m++){const r=m*p;for(let a=1;a<p-1;a++){var e=r+a;if(!g||g[e]){const k=T[e]*U;e=d[e]*L;let c=-1;if(0!==k||0!==e)c=90-57.29578*Math.atan2(e,-k),0>c&&(c+=360),360===c?c=0:360<c&&(c%=360);n[r+a]=c}}}K(n,p,q);return new u({width:p,height:q,pixels:[n],mask:g,pixelType:"f32",validPixelCount:P.validPixelCount,statistics:[{minValue:-1,maxValue:360}]})};l.calculateHillshadeParams=
D;l.curvature=function(P,U){if(!C.isValidPixelBlock(P))return P;const {curvatures:L,outMask:T}=x(P,U),{width:d,height:g}=P;K(L,d,g);P=new u({width:d,height:g,pixels:[L],mask:T,pixelType:"f32",validPixelCount:P.validPixelCount});P.updateStatistics();return P};l.gcsFactor=Q;l.hillshade=function(P,U){if(!C.isValidPixelBlock(P))return P;const {factor:L,sinZcosA:T,sinZsinA:d,cosZ:g,sinZcosAs:p,sinZsinAs:q,cosZs:n,weights:e}=D(U),[m,r]=L;U="traditional"===U.hillshadeType;const {width:a,height:k}=P,c=new Uint8Array(a*
k),{dzxs:h,dzys:b,outMask:f}=x(P);for(let y=1;y<k-1;y++){const v=y*a;for(let w=1;w<a-1;w++){const B=v+w;if(!f||f[B]){var t=h[B]*m;const F=b[B]*r,I=Math.sqrt(1+t*t+F*F);let G=0;if(U)t=255*(g+d*F-T*t)/I,0>t&&(t=0),G=t;else{const N=q.length;for(let z=0;z<N;z++){let A=255*(n[z]+q[z]*F-p[z]*t)/I;0>A&&(A=0);G+=A*e[z]}}c[B]=G&255}}}K(c,a,k);return new u({width:a,height:k,pixels:[c],mask:f,pixelType:"u8",validPixelCount:P.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};l.slope=function(P,U){if(!C.isValidPixelBlock(P))return P;
var L=U.zFactor,T=U.pixelSizePower??1,d=U.pixelSizeFactor??1;const g=U.slopeType;var p=U.isGCS;const {x:q,y:n}=U.resolution;U=L/(8*q);let e=L/(8*n);p&&1E-4>Math.abs(L-1)&&(U/=Q,e/=Q);"adjusted"===g&&(U=(L+q**T*d)/(8*q),e=(L+n**T*d)/(8*n));const {dzxs:m,dzys:r,outMask:a}=x(P),{width:k,height:c}=P;L=new Float32Array(k*c);for(T=1;T<c-1;T++)for(d=T*k,p=1;p<k-1;p++){var h=d+p;if(!a||a[h]){var b=m[h]*U;h=r[h]*e;b=Math.sqrt(b*b+h*h);L[d+p]="percent-rise"===g?100*b:57.2957795*Math.atan(b)}}K(L,k,c);P=new u({width:k,
height:c,pixels:[L],mask:a,pixelType:"f32",validPixelCount:P.validPixelCount});P.updateStatistics();return P};l.tintHillshade=function(P,U,L,T){if(C.isValidPixelBlock(P)&&C.isValidPixelBlock(U)){var {min:d,max:g}=T;T=P.pixels[0];var {pixels:p,mask:q}=U;U=p[0];var n=255.00001/(g-d),e=new Uint8ClampedArray(U.length),m=new Uint8ClampedArray(U.length),r=new Uint8ClampedArray(U.length),a=L.length-1;for(let h=0;h<U.length;h++){if(q&&0===q[h])continue;var k=Math.floor((U[h]-d)*n);const [b,f]=L[0>k?0:k>a?
a:k];var c=T[h];k=c*f;const t=k*(1-Math.abs(b%2-1));c-=k;switch(Math.floor(b)){case 0:e[h]=k+c;m[h]=t+c;r[h]=c;break;case 1:e[h]=t+c;m[h]=k+c;r[h]=c;break;case 2:e[h]=c;m[h]=k+c;r[h]=t+c;break;case 3:e[h]=c;m[h]=t+c;r[h]=k+c;break;case 4:e[h]=t+c;m[h]=c;r[h]=k+c;break;case 5:case 6:e[h]=k+c,m[h]=c,r[h]=t+c}}P.pixels=[e,m,r];P.updateStatistics()}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService":function(){define("exports ../geometry ../request ../geometry/support/normalizeUtils ../geometry/support/spatialReferenceUtils ./utils ./support/ImageAngleResult ./support/ImageAreaResult ./support/ImageDistanceResult ./support/ImageHeightResult ./support/ImageIdentifyResult ./support/ImagePixelLocationResult ./support/ImagePointResult ./support/ImageSampleResult ../geometry/SpatialReference".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g,p,q){function n(c){const h=c?.time;if(h&&(null!=h.start||null!=h.end)){const b=[];null!=h.start&&b.push(h.start);null==h.end||b.includes(h.end)||b.push(h.end);c.time=b.join(",")}}async function e(c,h,b){c=K.parseUrl(c);var f=await D.normalizeCentralMeridian(h.geometry?[h.geometry]:[]);h=h.toJSON();n(h);f=f?.[0];null!=f&&(h.geometry=f.toJSON());c=K.encode({...c.query,f:"json",...h});return K.asValidOptions(c,b)}async function m(c,h,b,f){c=K.parseUrl(c);b=await D.normalizeCentralMeridian(b);
h=h.toJSON();null!=b[0]&&(h.fromGeometry=JSON.stringify(r(b[0])));null!=b[1]&&(h.toGeometry=JSON.stringify(r(b[1])));h=K.encode({...c.query,f:"json",...h});f=K.asValidOptions(h,f);({data:f}=await C(c.path+"/measure",f));return f}function r(c){const h=c.toJSON();c.spatialReference?.imageCoordinateSystem&&(h.spatialReference=a(c.spatialReference));return h}function a(c){const {imageCoordinateSystem:h}=c;if(h){const {id:b,referenceServiceName:f}=h;return null!=b?f?{icsid:b,icsns:f}:{icsid:b}:{ics:h}}return c.toJSON()}
function k(c,h){if(!c.imageCoordinateSystem)return x.srToRESTValue(c);c=a(c);const {icsid:b,icsns:f}=c;return null==b||null!=f&&!h?.toLowerCase().includes("/"+f.toLowerCase()+"/")?JSON.stringify(c):`0:${b}`}l.computeAngles=async function(c,h,b){var f=h.toJSON();null!=f.angleName&&(f.angleName=f.angleName.join(","));h?.point?.spatialReference?.imageCoordinateSystem&&(f.point.spatialReference=a(h.point.spatialReference));h?.spatialReference?.imageCoordinateSystem&&(f.spatialReference=k(h.spatialReference));
c=K.parseUrl(c);f=K.encode({...c.query,f:"json",...f});b=K.asValidOptions(f,b);({data:b}=await C(`${c.path}/computeAngles`,b));b.spatialReference=b.spatialReference?null!=b.spatialReference.geodataXform?new q({wkid:0,imageCoordinateSystem:b.spatialReference}):q.fromJSON(b.spatialReference):null;"NaN"===b.north&&(b.north=null);"NaN"===b.up&&(b.up=null);return new Q(b)};l.computeHistograms=async function(c,h,b){h=await e(c,h,b);c=K.parseUrl(c);({data:c}=await C(`${c.path}/computeHistograms`,h));return{histograms:c.histograms}};
l.computePixelSpaceLocations=async function(c,h,b){var f=h.toJSON();({geometries:h}=h);if(h)for(let t=0;t<h.length;t++)h[t].spatialReference?.imageCoordinateSystem&&(f.geometries.geometries[t].spatialReference=a(h[t].spatialReference));c=K.parseUrl(c);f=K.encode({...c.query,f:"json",...f});b=K.asValidOptions(f,b);({data:b}=await C(`${c.path}/computePixelLocation`,b));return d.fromJSON(b)};l.computeStatisticsHistograms=async function(c,h,b){h=await e(c,h,b);c=K.parseUrl(c);({data:c}=await C(`${c.path}/computeStatisticsHistograms`,
h));({statistics:h}=c);h?.length&&h.forEach(f=>{f.avg=f.mean;f.stddev=f.standardDeviation});return{statistics:h,histograms:c.histograms}};l.getImageSpatialReferenceJSON=a;l.getImageSpatialReferenceQueryParameter=k;l.getSamples=async function(c,h,b){var f=h.toJSON();n(f);f.outFields?.length&&(f.outFields=f.outFields.join(","));h=(await D.normalizeCentralMeridian(h.geometry))?.[0];null!=h&&(f.geometry=h.toJSON());c=K.parseUrl(c);f=K.encode({...c.query,f:"json",...f});b=K.asValidOptions(f,b);({data:b}=
await C(`${c.path}/getSamples`,b));b=b?.samples?.map(t=>{const y="NaN"===t.value||""===t.value?null:t.value.split(" ").map(v=>Number(v));return{...t,pixelValue:y}});return p.fromJSON({samples:b})};l.identify=async function(c,h,b){const f=K.parseUrl(c);return D.normalizeCentralMeridian(h.geometry?[h.geometry]:[]).then(t=>{var y=h.toJSON();t=t?.[0];null!=t&&(y.geometry=JSON.stringify(t.toJSON()));y=K.encode({...f.query,f:"json",...y});y=K.asValidOptions(y,b);return C(f.path+"/identify",y)}).then(t=>
T.fromJSON(t.data))};l.measureAreaAndPerimeter=async function(c,h,b){c=await m(c,h,[h.geometry],b);return P.fromJSON(c)};l.measureDistanceAndAngle=async function(c,h,b){c=await m(c,h,[h.fromGeometry,h.toGeometry],b);return U.fromJSON(c)};l.measureHeight=async function(c,h,b){c=await m(c,h,[h.fromGeometry,h.toGeometry],b);return L.fromJSON(c)};l.measurePointOrCentroid=async function(c,h,b){c=await m(c,h,[h.geometry],b);return g.fromJSON(c)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/support/ImageAngleResult":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),function(l,u,C,D,x,K,Q,P,U){u=class extends C.JSONSupport{constructor(L){super(L);this.spatialReference=this.up=this.north=null}};l.__decorate([D.property({type:Number,json:{write:!0}})],
u.prototype,"north",void 0);l.__decorate([D.property({type:Number,json:{write:!0}})],u.prototype,"up",void 0);l.__decorate([D.property({type:U,json:{write:!0}})],u.prototype,"spatialReference",void 0);return u=l.__decorate([P.subclass("esri.rest.support.ImageAngleResult")],u)})},"esri/rest/support/ImageAreaResult":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),
function(l,u,C,D,x,K,Q){C=class extends Q.BaseImageMeasureResult{constructor(){super(...arguments);this.perimeter=this.area=null}};l.__decorate([u.property({type:Q.ImageMeasureResultAreaValue,json:{read:!0,write:!0}})],C.prototype,"area",void 0);l.__decorate([u.property({type:Q.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],C.prototype,"perimeter",void 0);return C=l.__decorate([K.subclass("esri.rest.support.ImageAreaResult")],C)})},"esri/rest/support/BaseImageMeasureResult":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,u,C,D,x,K,Q,P,U){K=class extends C.JSONSupport{constructor(){super(...arguments);this.uncertainty=this.displayValue=this.value=null}};u.__decorate([x.property({type:Number,json:{read:!0,write:!0}})],K.prototype,"value",void 0);u.__decorate([x.property({type:String,json:{read:!0,write:!0}})],K.prototype,"displayValue",void 0);u.__decorate([x.property({type:Number,json:{read:!0,write:!0}})],K.prototype,"uncertainty",void 0);K=u.__decorate([U.subclass("esri.rest.support.ImageMeasureResultValue")],
K);l.ImageMeasureResultLengthValue=class extends K{constructor(){super(...arguments);this.unit=null}};u.__decorate([x.property({type:String,json:{read:D.lengthUnitsJSONMap.read,write:D.lengthUnitsJSONMap.write}})],l.ImageMeasureResultLengthValue.prototype,"unit",void 0);l.ImageMeasureResultLengthValue=u.__decorate([U.subclass("esri.rest.support.ImageMeasureResultLengthValue")],l.ImageMeasureResultLengthValue);l.ImageMeasureResultAreaValue=class extends K{constructor(){super(...arguments);this.unit=
null}};u.__decorate([x.property({type:String,json:{read:D.areaUnitsJSONMap.read,write:D.areaUnitsJSONMap.write}})],l.ImageMeasureResultAreaValue.prototype,"unit",void 0);l.ImageMeasureResultAreaValue=u.__decorate([U.subclass("esri.rest.support.ImageMeasureResultAreaValue")],l.ImageMeasureResultAreaValue);l.ImageMeasureResultAngleValue=class extends K{constructor(){super(...arguments);this.unit=null}};u.__decorate([x.property({type:String,json:{read:D.angleUnitsJSONMap.read,write:D.angleUnitsJSONMap.write}})],
l.ImageMeasureResultAngleValue.prototype,"unit",void 0);l.ImageMeasureResultAngleValue=u.__decorate([U.subclass("esri.rest.support.ImageMeasureResultAngleValue")],l.ImageMeasureResultAngleValue);l.BaseImageMeasureResult=class extends C.JSONSupport{constructor(){super(...arguments);this.sensorName=this.name=null}};u.__decorate([x.property({type:String,json:{read:!0,write:!0}})],l.BaseImageMeasureResult.prototype,"name",void 0);u.__decorate([x.property({type:String,json:{read:!0,write:!0}})],l.BaseImageMeasureResult.prototype,
"sensorName",void 0);l.BaseImageMeasureResult=u.__decorate([U.subclass("esri.rest.support.BaseImageMeasureResult")],l.BaseImageMeasureResult);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageDistanceResult":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),function(l,
u,C,D,x,K,Q){C=class extends Q.BaseImageMeasureResult{constructor(){super(...arguments);this.elevationAngle=this.azimuthAngle=this.distance=null}};l.__decorate([u.property({type:Q.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],C.prototype,"distance",void 0);l.__decorate([u.property({type:Q.ImageMeasureResultAngleValue,json:{read:!0,write:!0}})],C.prototype,"azimuthAngle",void 0);l.__decorate([u.property({type:Q.ImageMeasureResultAngleValue,json:{read:!0,write:!0}})],C.prototype,"elevationAngle",
void 0);return C=l.__decorate([K.subclass("esri.rest.support.ImageDistanceResult")],C)})},"esri/rest/support/ImageHeightResult":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),function(l,u,C,D,x,K,Q){C=class extends Q.BaseImageMeasureResult{constructor(){super(...arguments);this.height=null}};l.__decorate([u.property({type:Q.ImageMeasureResultLengthValue,
json:{read:!0,write:!0}})],C.prototype,"height",void 0);return C=l.__decorate([K.subclass("esri.rest.support.ImageHeightResult")],C)})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),function(l,u,C,D,x,K,Q,P,U){u=class extends u.JSONSupport{constructor(){super(...arguments);
this.value=this.properties=this.processedValues=this.objectId=this.name=this.location=this.catalogItems=this.catalogItemVisibilities=null}};l.__decorate([C.property({json:{write:!0}})],u.prototype,"catalogItemVisibilities",void 0);l.__decorate([C.property({type:U,json:{write:!0}})],u.prototype,"catalogItems",void 0);l.__decorate([C.property({type:P,json:{write:!0}})],u.prototype,"location",void 0);l.__decorate([C.property({json:{write:!0}})],u.prototype,"name",void 0);l.__decorate([C.property({json:{write:!0}})],
u.prototype,"objectId",void 0);l.__decorate([C.property({json:{write:!0}})],u.prototype,"processedValues",void 0);l.__decorate([C.property({json:{write:!0}})],u.prototype,"properties",void 0);l.__decorate([C.property({json:{write:!0}})],u.prototype,"value",void 0);return u=l.__decorate([Q.subclass("esri.rest.support.ImageIdentifyResult")],u)})},"esri/rest/support/ImagePixelLocationResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,u,C,D,x,K,Q){u=class extends u.JSONSupport{constructor(){super(...arguments);this.geometries=null}};l.__decorate([C.property({json:{write:!0}})],u.prototype,"geometries",void 0);return u=l.__decorate([Q.subclass("esri.rest.support.ImagePixelLocationResult")],u)})},"esri/rest/support/ImagePointResult":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult ../../geometry/Point".split(" "),
function(l,u,C,D,x,K,Q,P,U){u=class extends P.BaseImageMeasureResult{constructor(){super(...arguments);this.point=null}};l.__decorate([C.property({type:U,json:{name:"point.value",read:!0,write:!0}})],u.prototype,"point",void 0);return u=l.__decorate([Q.subclass("esri.rest.support.ImagePointResult")],u)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),
function(l,u,C,D,x,K,Q,P){u=class extends u.JSONSupport{constructor(){super(...arguments);this.samples=null}};l.__decorate([C.property({type:[P],json:{write:!0}})],u.prototype,"samples",void 0);return u=l.__decorate([Q.subclass("esri.rest.support.ImageSampleResult")],u)})},"esri/rest/support/ImageSample":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(l,u,C,D,x,K,Q,P){u=class extends u.JSONSupport{constructor(){super(...arguments);this.pixelValue=this.resolution=this.rasterId=this.locationId=this.location=this.attributes=null}};l.__decorate([C.property({json:{write:!0}})],u.prototype,"attributes",void 0);l.__decorate([C.property({type:P,json:{write:!0}})],u.prototype,"location",void 0);l.__decorate([C.property({json:{write:!0}})],u.prototype,"locationId",void 0);l.__decorate([C.property({json:{write:!0}})],u.prototype,"rasterId",void 0);
l.__decorate([C.property({json:{write:!0}})],u.prototype,"resolution",void 0);l.__decorate([C.property({json:{write:!0}})],u.prototype,"pixelValue",void 0);return u=l.__decorate([Q.subclass("esri.rest.support.ImageSample")],u)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),
function(l,u,C,D,x,K,Q,P){var U;const L={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};u=U=class extends u.JSONSupport{constructor(T){super(T);this.url=this.size=this.parentObjectId=this.parentGlobalId=this.name=this.keywords=this.globalId=this.id=this.exifInfo=this.contentType=null}get orientationInfo(){var {exifInfo:T}=
this;T=P.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:T});return L[T]||null}clone(){return new U({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};l.__decorate([C.property({type:String})],u.prototype,"contentType",void 0);l.__decorate([C.property()],u.prototype,"exifInfo",void 0);l.__decorate([C.property({readOnly:!0})],
u.prototype,"orientationInfo",null);l.__decorate([C.property({type:D.Integer})],u.prototype,"id",void 0);l.__decorate([C.property({type:String})],u.prototype,"globalId",void 0);l.__decorate([C.property({type:String})],u.prototype,"keywords",void 0);l.__decorate([C.property({type:String})],u.prototype,"name",void 0);l.__decorate([C.property({json:{read:!1}})],u.prototype,"parentGlobalId",void 0);l.__decorate([C.property({json:{read:!1}})],u.prototype,"parentObjectId",void 0);l.__decorate([C.property({type:D.Integer})],
u.prototype,"size",void 0);l.__decorate([C.property({json:{read:!1}})],u.prototype,"url",void 0);return u=U=l.__decorate([Q.subclass("esri.layers.support.AttachmentInfo")],u)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(l){function u(C){const {tagName:D,tags:x}=C;return x&&D?x.find(K=>K.name===D)?.value||null:null}l.getExifValue=function(C){const {exifInfo:D,exifName:x,tagName:K}=C;return D&&x&&K?(C=D.find(Q=>Q.name===x))?u({tagName:K,tags:C.tags}):null:null};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/fetchRasterInfo":function(){define("exports ../../request ../../geometry/Extent ../../geometry/Point ../../geometry/SpatialReference ../../layers/support/RasterInfo ../utils ../support/FeatureSet".split(" "),function(l,u,C,D,x,K,Q,P){async function U(L,T,d){L=Q.parseUrl(L);const {rasterFunction:g,sourceJSON:p}=T||{};T=g?JSON.stringify(g.rasterFunctionDefinition||g):null;T=Q.encode({...L.query,renderingRule:T,f:"json"});T=Q.asValidOptions(T,
d);L=L.path;d=p||await u(L,T).then(f=>f.data);var q=d.hasRasterAttributeTable?u(`${L}/rasterAttributeTable`,T):null,n=d.hasColormap?u(`${L}/colormap`,T):null,e=d.hasHistograms?u(`${L}/histograms`,T):null,m=10.3<=d.currentVersion?u(`${L}/keyProperties`,T):null;L=d.hasMultidimensions?u(`${L}/multidimensionalInfo`,T):null;q=await Promise.allSettled([q,n,e,m,L]);L=null;if(d.minValues&&d.minValues.length===d.bandCount)for(L=[],T=0;T<d.minValues.length;T++)L.push({min:d.minValues[T],max:d.maxValues[T],
avg:d.meanValues[T],stddev:d.stdvValues[T]});n=C.fromJSON(d.extent);T=Math.ceil(n.width/d.pixelSizeX-.1);n=Math.ceil(n.height/d.pixelSizeY-.1);e=x.fromJSON(d.spatialReference||d.extent.spatialReference);m="fulfilled"===q[0].status?q[0].value?.data:null;m=m?.features?.length?P.fromJSON(m):null;var r="fulfilled"===q[1].status?q[1].value?.data.colormap:null;r=r?.length?r:null;var a="fulfilled"===q[2].status?q[2].value?.data.histograms:null;a=a?.[0]?.counts?.length?a:null;const k="fulfilled"===q[3].status?
q[3].value?.data??{}:{};q="fulfilled"===q[4].status?q[4].value?.data.multidimensionalInfo:null;(q=q?.variables?.length?q:null)&&q.variables.forEach(f=>{f.statistics?.length&&f.statistics.forEach(t=>{t.avg=t.mean;t.stddev=t.standardDeviation})});const {defaultVariable:c,serviceDataType:h}=d;c&&c!==k.DefaultVariable&&(k.DefaultVariable=c);h?.includes("esriImageServiceDataTypeVector")&&!h.includes(k.DataType)&&(k.DataType=h.replace("esriImageServiceDataType",""));let b=d.noDataValue;d.noDataValues?.length&&
d.noDataValues.some(f=>f!==b)&&(b=d.noDataValues);return new K({width:T,height:n,bandCount:d.bandCount,extent:C.fromJSON(d.extent),spatialReference:e,pixelSize:new D({x:d.pixelSizeX,y:d.pixelSizeY,spatialReference:e}),pixelType:d.pixelType.toLowerCase(),statistics:L,attributeTable:m,colormap:r,histograms:a,keyProperties:k,noDataValue:b,multidimensionalInfo:q})}l.fetchServiceRasterInfo=function(L,T,d){return U(L,{sourceJSON:T},d)};l.generateRasterInfo=function(L,T,d){return U(L,{rasterFunction:T},
d)};l.patchServiceInfo=function(L,T){L.attributeTable||(T.hasRasterAttributeTable=!1);L.histograms||(T.hasHistograms=!1);L.colormap||(T.hasColormap=!1);L.multidimensionalInfo||(T.hasMultidimensions=!1)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/getCatalogItemRasterInfo":function(){define("exports ../../request ../../geometry/Extent ../../geometry/Point ../../layers/support/RasterInfo ../../layers/support/RasterStorageInfo ../utils".split(" "),function(l,
u,C,D,x,K,Q){l.getCatalogItemRasterInfo=async function(P,U,L){P=Q.parseUrl(P);var T=Q.encode({...P?.query,f:"json"});L=Q.asValidOptions(T,L);P=`${P?.path}/${U}/info`;U=u(`${P}`,L);L=u(`${P}/keyProperties`,L);L=await Promise.allSettled([U,L]);U="fulfilled"===L[0].status?L[0].value.data:null;L="fulfilled"===L[1].status?L[1].value.data:null;P=null;U.statistics?.length&&(P=U.statistics.map(m=>({min:m[0],max:m[1],avg:m[2],stddev:m[3]})));T=C.fromJSON(U.extent);const d=Math.ceil(T.width/U.pixelSizeX-.1),
g=Math.ceil(T.height/U.pixelSizeY-.1),p=T.spatialReference,q=new D({x:U.pixelSizeX,y:U.pixelSizeY,spatialReference:p}),n=U.histograms?.length?U.histograms:null,e=new K({origin:U.origin,blockWidth:U.blockWidth,blockHeight:U.blockHeight,firstPyramidLevel:U.firstPyramidLevel,maximumPyramidLevel:U.maxPyramidLevel});return new x({width:d,height:g,bandCount:U.bandCount,extent:T,spatialReference:p,pixelSize:q,pixelType:U.pixelType.toLowerCase(),statistics:P,histograms:n,keyProperties:L,storageInfo:e})};
Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageAngleParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference".split(" "),function(l,u,C,D,x,K,Q,P,U){var L;u=L=class extends C.JSONSupport{constructor(T){super(T);this.rasterId=
this.spatialReference=this.point=this.angleNames=null}clone(){return new L(D.clone({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};l.__decorate([x.property({type:[String],json:{name:"angleName",write:!0}})],u.prototype,"angleNames",void 0);l.__decorate([x.property({type:P,json:{write:!0}})],u.prototype,"point",void 0);l.__decorate([x.property({type:U,json:{write:!0}})],u.prototype,"spatialReference",void 0);l.__decorate([x.property({type:K.Integer,
json:{write:!0}})],u.prototype,"rasterId",void 0);return u=L=l.__decorate([Q.subclass("esri.rest.support.ImageAngleParameters")],u)})},"esri/rest/support/ImageAreaParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),
function(l,u,C,D,x,K,Q,P,U,L){var T;K=T=class extends L.BaseImageMeasureParameters{constructor(){super(...arguments);this.type="area-perimeter";this.geometry=null;this.is3D=!1;this.linearUnit="meters";this.areaUnit="square-meters"}writeGeometry(d,g,p){null!=d&&(g.geometryType=U.getJsonType(d),g[p]=d.toJSON())}get measureOperation(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}clone(){return new T(C.clone({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,
mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};l.__decorate([x.property({types:u.geometryTypes,json:{name:"fromGeometry",read:!0,write:!0}})],K.prototype,"geometry",void 0);l.__decorate([P.writer("geometry")],K.prototype,"writeGeometry",null);l.__decorate([x.property({type:L.measureOperationJSONMap.apiValues,json:{write:L.measureOperationJSONMap.write}})],K.prototype,"measureOperation",null);l.__decorate([x.property({json:{read:!0}})],K.prototype,"is3D",void 0);l.__decorate([x.property({type:String,
json:{read:D.lengthUnitsJSONMap.read,write:D.lengthUnitsJSONMap.write}})],K.prototype,"linearUnit",void 0);l.__decorate([x.property({type:String,json:{read:D.areaUnitsJSONMap.read,write:D.areaUnitsJSONMap.write}})],K.prototype,"areaUnit",void 0);return K=T=l.__decorate([Q.subclass("esri.rest.support.ImageAreaParameters")],K)})},"esri/rest/support/BaseImageMeasureParameters":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/MosaicRule ../../geometry/Point".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d){C=new D.JSONMap({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",
esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});l.BaseImageMeasureParameters=class extends x.JSONSupport{constructor(){super(...arguments);this.pixelSize=this.mosaicRule=this.measureOperation=this.type=null;this.raster=void 0}};u.__decorate([K.property()],l.BaseImageMeasureParameters.prototype,"type",void 0);u.__decorate([K.property({type:C.apiValues,json:{read:C.read,write:C.write}})],l.BaseImageMeasureParameters.prototype,"measureOperation",void 0);u.__decorate([K.property({type:T,json:{write:!0}})],
l.BaseImageMeasureParameters.prototype,"mosaicRule",void 0);u.__decorate([K.property({type:d,json:{write:!0}})],l.BaseImageMeasureParameters.prototype,"pixelSize",void 0);u.__decorate([K.property({json:{write:!0}})],l.BaseImageMeasureParameters.prototype,"raster",void 0);l.BaseImageMeasureParameters=u.__decorate([L.subclass("esri.rest.support.BaseImageMeasureParameters")],l.BaseImageMeasureParameters);l.measureOperationJSONMap=C;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageDistanceParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T){var d;u=d=class extends L.BaseImageMeasureParameters{constructor(){super(...arguments);this.type="distance-angle";this.toGeometry=this.fromGeometry=null;this.is3D=!1;this.linearUnit="meters";this.angularUnit="degrees"}writeFromGeometry(g,p,q){null!=g&&(p.geometryType=U.getJsonType(g),p[q]=g.toJSON())}get measureOperation(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}clone(){return new d(C.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,
is3D:this.is3D,linearUnit:this.linearUnit,angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};l.__decorate([x.property({type:T,json:{read:!0,write:!0}})],u.prototype,"fromGeometry",void 0);l.__decorate([P.writer("fromGeometry")],u.prototype,"writeFromGeometry",null);l.__decorate([x.property({type:T,json:{read:!0,write:!0}})],u.prototype,"toGeometry",void 0);l.__decorate([x.property({type:L.measureOperationJSONMap.apiValues,json:{write:L.measureOperationJSONMap.write}})],
u.prototype,"measureOperation",null);l.__decorate([x.property({json:{read:!0}})],u.prototype,"is3D",void 0);l.__decorate([x.property({type:String,json:{read:D.lengthUnitsJSONMap.read,write:D.lengthUnitsJSONMap.write}})],u.prototype,"linearUnit",void 0);l.__decorate([x.property({type:String,json:{read:D.angleUnitsJSONMap.read,write:D.angleUnitsJSONMap.write}})],u.prototype,"angularUnit",void 0);return u=d=l.__decorate([Q.subclass("esri.rest.support.ImageDistanceParameters")],u)})},"esri/rest/support/ImageHeightParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T){var d;u=d=class extends L.BaseImageMeasureParameters{constructor(){super(...arguments);this.type="height";this.toGeometry=this.fromGeometry=null;this.operationType="base-and-top";this.linearUnit="meters"}writeFromGeometry(g,p,q){null!=g&&(p.geometryType=U.getJsonType(g),p[q]=g.toJSON())}get measureOperation(){return this.operationType}clone(){return new d(C.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,
mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};l.__decorate([x.property({type:T,json:{read:!0}})],u.prototype,"fromGeometry",void 0);l.__decorate([P.writer("fromGeometry")],u.prototype,"writeFromGeometry",null);l.__decorate([x.property({type:T,json:{read:!0,write:!0}})],u.prototype,"toGeometry",void 0);l.__decorate([x.property({type:L.measureOperationJSONMap.apiValues,json:{write:L.measureOperationJSONMap.write}})],u.prototype,"measureOperation",null);l.__decorate([x.property({json:{read:!0}})],
u.prototype,"operationType",void 0);l.__decorate([x.property({type:String,json:{read:D.lengthUnitsJSONMap.read,write:D.lengthUnitsJSONMap.write}})],u.prototype,"linearUnit",void 0);return u=d=l.__decorate([Q.subclass("esri.rest.support.ImageHeightParameters")],u)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/deprecate ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g,p,q){var n;x=n=class extends x.JSONSupport{constructor(){super(...arguments);this.pixelSize=this.rasterFunction=this.mosaicRule=this.geometry=null;this.raster=void 0;this.timeExtent=null}writeGeometry(e,m,r){null!=e&&(m.geometryType=d.getJsonType(e),m[r]=e.toJSON())}get renderingRule(){D.deprecatedProperty(Q.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});return this._get("rasterFunction")}set renderingRule(e){D.deprecatedProperty(Q.getLogger(this),
"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});this._set("rasterFunction",e)}clone(){return new n(K.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};l.__decorate([P.property({types:u.geometryTypes,json:{read:d.fromJSON}})],x.prototype,"geometry",void 0);l.__decorate([T.writer("geometry")],x.prototype,"writeGeometry",null);l.__decorate([P.property({type:g,
json:{write:!0}})],x.prototype,"mosaicRule",void 0);l.__decorate([P.property({type:p})],x.prototype,"renderingRule",null);l.__decorate([P.property({type:p,json:{write:!0,name:"renderingRule"}})],x.prototype,"rasterFunction",void 0);l.__decorate([P.property({type:q,json:{write:!0}})],x.prototype,"pixelSize",void 0);l.__decorate([P.property({json:{write:!0}})],x.prototype,"raster",void 0);l.__decorate([P.property({type:C,json:{read:{source:"time"},write:{target:"time"}}})],x.prototype,"timeExtent",
void 0);return x=n=l.__decorate([L.subclass("esri.rest.support.ImageHistogramParameters")],x)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/tslib.es6 ../../TimeExtent ../../core/deprecate ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(l,u,C,D,x,K,Q,P,U,L,T,d,g,p){var q;D=q=class extends D.JSONSupport{constructor(){super(...arguments);this.pixelSize=this.rasterFunctions=this.geometry=null;this.returnPixelValues=this.returnCatalogItems=this.returnGeometry=!0;this.timeExtent=this.maxItemCount=null;this.viewId=this.raster=void 0;this.processAsMultidimensional=!1}writeGeometry(n,e,m){null!=n&&(e.geometryType=d.getJsonType(n),e[m]=JSON.stringify(n.toJSON()))}set mosaicRule(n){n?.mosaicMethod&&(n=g.fromJSON({...n.toJSON(),mosaicMethod:n.mosaicMethod,
mosaicOperation:n.mosaicOperation}));this._set("mosaicRule",n)}writeMosaicRule(n,e,m){null!=n&&(e[m]=JSON.stringify(n.toJSON()))}get renderingRule(){C.deprecatedProperty(K.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});return this._get("rasterFunction")}set renderingRule(n){C.deprecatedProperty(K.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});this._set("rasterFunction",n)}get renderingRules(){C.deprecatedProperty(K.getLogger(this),
"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0});return this._get("rasterFunctions")}set renderingRules(n){C.deprecatedProperty(K.getLogger(this),"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0});this._set("rasterFunctions",n)}set rasterFunction(n){n?.rasterFunction&&(n=p.fromJSON({...n.toJSON(),rasterFunction:n.rasterFunction,rasterFunctionArguments:n.rasterFunctionArguments}));this._set("rasterFunction",n)}writeRasterFunction(n,e,m){null!=n&&
(e[m]=JSON.stringify(n.toJSON()));n.rasterFunctionDefinition&&(e[m]=JSON.stringify(n.rasterFunctionDefinition))}writeRasterFunctions(n,e,m){null!=n&&(e[m]=JSON.stringify(n.map(r=>r.rasterFunctionDefinition||r.toJSON())))}writePixelSize(n,e,m){null!=n&&(e[m]=JSON.stringify(n))}writeTimeExtent(n,e,m){if(null!=n){const r=null!=n.start?n.start.getTime():null;n=null!=n.end?n.end.getTime():null;e[m]=null!=r?null!=n?`${r},${n}`:`${r}`:null}}clone(){return new q(x.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,
rasterFunction:this.rasterFunction,rasterFunctions:this.rasterFunctions,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};l.__decorate([Q.property({json:{write:!0}})],D.prototype,"geometry",void 0);l.__decorate([L.writer("geometry")],D.prototype,"writeGeometry",
null);l.__decorate([Q.property({type:g,json:{write:!0}})],D.prototype,"mosaicRule",null);l.__decorate([L.writer("mosaicRule")],D.prototype,"writeMosaicRule",null);l.__decorate([Q.property({type:p})],D.prototype,"renderingRule",null);l.__decorate([Q.property({type:[p]})],D.prototype,"renderingRules",null);l.__decorate([Q.property({type:p,json:{write:!0,name:"renderingRule"}})],D.prototype,"rasterFunction",null);l.__decorate([L.writer("rasterFunction")],D.prototype,"writeRasterFunction",null);l.__decorate([Q.property({type:[p],
json:{write:!0,name:"renderingRules"}})],D.prototype,"rasterFunctions",void 0);l.__decorate([L.writer("rasterFunctions")],D.prototype,"writeRasterFunctions",null);l.__decorate([Q.property({type:T,json:{write:!0}})],D.prototype,"pixelSize",void 0);l.__decorate([L.writer("pixelSize")],D.prototype,"writePixelSize",null);l.__decorate([Q.property({type:Boolean,json:{write:!0}})],D.prototype,"returnGeometry",void 0);l.__decorate([Q.property({type:Boolean,json:{write:!0}})],D.prototype,"returnCatalogItems",
void 0);l.__decorate([Q.property({type:Boolean,json:{write:!0}})],D.prototype,"returnPixelValues",void 0);l.__decorate([Q.property({type:Number,json:{write:!0}})],D.prototype,"maxItemCount",void 0);l.__decorate([Q.property({type:u,json:{write:{target:"time"}}})],D.prototype,"timeExtent",void 0);l.__decorate([L.writer("timeExtent")],D.prototype,"writeTimeExtent",null);l.__decorate([Q.property({json:{write:!0}})],D.prototype,"raster",void 0);l.__decorate([Q.property({json:{write:!0}})],D.prototype,
"viewId",void 0);l.__decorate([Q.property({type:Boolean,json:{write:!0}})],D.prototype,"processAsMultidimensional",void 0);return D=q=l.__decorate([U.subclass("esri.rest.support.ImageIdentifyParameters")],D)})},"esri/rest/support/ImagePixelLocationParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),
function(l,u,C,D,x,K,Q,P,U,L){var T;u=T=class extends C.JSONSupport{constructor(){super(...arguments);this.rasterId=this.geometries=null}writeGeometry(d,g,p){g.geometries={geometryType:"esriGeometryPoint",geometries:d.map(q=>q.toJSON())}}clone(){return new T({geometries:this.geometries?.map(d=>d.clone())??[],rasterId:this.rasterId})}};l.__decorate([D.property({type:[L],json:{write:!0}})],u.prototype,"geometries",void 0);l.__decorate([U.writer("geometries")],u.prototype,"writeGeometry",null);l.__decorate([D.property({type:x.Integer,
json:{write:!0}})],u.prototype,"rasterId",void 0);return u=T=l.__decorate([P.subclass("esri.rest.support.ImagePixelLocationParameters")],u)})},"esri/rest/support/ImagePointParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),
function(l,u,C,D,x,K,Q,P,U){var L;x=L=class extends U.BaseImageMeasureParameters{constructor(){super(...arguments);this.type="point";this.geometry=null;this.is3D=!1}writeGeometry(T,d,g){null!=T&&(d.geometryType=P.getJsonType(T),d[g]=T.toJSON())}get measureOperation(){const {is3D:T,geometry:d}=this;return"point"===d.type?T?"point-3D":"point":T?"centroid-3D":"centroid"}clone(){return new L(C.clone({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};
l.__decorate([D.property({types:u.geometryTypes,json:{name:"fromGeometry",read:P.fromJSON}})],x.prototype,"geometry",void 0);l.__decorate([Q.writer("geometry")],x.prototype,"writeGeometry",null);l.__decorate([D.property({type:U.measureOperationJSONMap.apiValues,json:{read:U.measureOperationJSONMap.read,write:U.measureOperationJSONMap.write}})],x.prototype,"measureOperation",null);l.__decorate([D.property({json:{read:!0}})],x.prototype,"is3D",void 0);return x=L=l.__decorate([K.subclass("esri.rest.support.ImagePointParameters")],
x)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Multipoint ../../geometry/Point".split(" "),function(l,
u,C,D,x,K,Q,P,U,L,T,d,g,p){var q;D=q=class extends D.JSONSupport{constructor(){super(...arguments);this.geometry=null;this.interpolation="nearest";this.pixelSize=this.outFields=this.mosaicRule=null;this.returnFirstValueOnly=!0;this.timeExtent=this.sliceId=this.sampleCount=this.sampleDistance=null}writeGeometry(n,e,m){null!=n&&(e.geometryType=L.getJsonType(n),e[m]=n.toJSON())}set locations(n){if(n?.length){const e=new g({spatialReference:n[0].spatialReference});e.points=n.map(m=>[m.x,m.y]);this._set("locations",
n);this.geometry=e}}clone(){return new q(x.clone({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};l.__decorate([K.property({types:u.geometryTypes,json:{read:L.fromJSON}})],D.prototype,"geometry",void 0);l.__decorate([U.writer("geometry")],
D.prototype,"writeGeometry",null);l.__decorate([K.property()],D.prototype,"locations",null);l.__decorate([K.property({type:String,json:{type:d.interpolationKebab.jsonValues,read:d.interpolationKebab.read,write:d.interpolationKebab.write}})],D.prototype,"interpolation",void 0);l.__decorate([K.property({type:T,json:{write:!0}})],D.prototype,"mosaicRule",void 0);l.__decorate([K.property({type:[String],json:{write:!0}})],D.prototype,"outFields",void 0);l.__decorate([K.property({type:p,json:{write:!0}})],
D.prototype,"pixelSize",void 0);l.__decorate([K.property({type:String,json:{write:!0}})],D.prototype,"raster",void 0);l.__decorate([K.property({type:Boolean,json:{write:!0}})],D.prototype,"returnFirstValueOnly",void 0);l.__decorate([K.property({type:Number,json:{write:!0}})],D.prototype,"sampleDistance",void 0);l.__decorate([K.property({type:Number,json:{write:!0}})],D.prototype,"sampleCount",void 0);l.__decorate([K.property({type:Number,json:{write:!0}})],D.prototype,"sliceId",void 0);l.__decorate([K.property({type:C,
json:{read:{source:"time"},write:{target:"time"}}})],D.prototype,"timeExtent",void 0);return D=q=l.__decorate([P.subclass("esri.rest.support.ImageSampleParameters")],D)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),function(l,u,C,D,x,K,Q,
P,U){function L(a,k){const c=g(k.data,k.width,k.height,a.smoothing);return a.interpolate?(h,b)=>{const f=Math.floor(h),t=Math.floor(b);if(0>f||f>=k.width||0>t||t>=k.height)return[0,0];h-=f;b-=t;const y=f<k.width-1?f+1:f,v=t<k.height-1?t+1:t;return[(c[2*(t*k.width+f)]*(1-b)+c[2*(v*k.width+f)]*b)*(1-h)+(c[2*(t*k.width+y)]*(1-b)+c[2*(v*k.width+y)]*b)*h,(c[2*(t*k.width+f)+1]*(1-b)+c[2*(v*k.width+f)+1]*b)*(1-h)+(c[2*(t*k.width+y)+1]*(1-b)+c[2*(v*k.width+y)+1]*b)*h]}:(h,b)=>{h=Math.round(h);b=Math.round(b);
return 0>h||h>=k.width||0>b||b>=k.height?[0,0]:[c[2*(b*k.width+h)],c[2*(b*k.width+h)+1]]}}function T(a,k,c,h,b,f,t,y,v){const w=[];let B=0,[F,I]=k(c,h);F*=a.velocityScale;I*=a.velocityScale;w.push({x:c,y:h,t:B,speed:Math.sqrt(F*F+I*I)});for(let z=0;z<a.verticesPerLine;z++){let [A,J]=k(c,h);A*=a.velocityScale;J*=a.velocityScale;const R=Math.sqrt(A*A+J*J);if(R<a.minSpeedThreshold)break;const H=A/R,O=J/R;c+=H*a.segmentLength;h+=O*a.segmentLength;B+=a.segmentLength/R;if(Math.acos(H*G+O*N)>a.maxTurnAngle)break;
if(a.collisions){var G=Math.round(c*v);var N=Math.round(h*v);if(0>G||G>t-1||0>N||N>y-1)break;const M=f[N*t+G];if(-1!==M&&M!==b)break;f[N*t+G]=b}w.push({x:c,y:h,t:B,speed:R});G=H;N=O}return w}function d(a,k,c,h){const b=[],f=new Q,t=1/Math.max(a.lineCollisionWidth,1),y=Math.round(c*t),v=Math.round(h*t),w=new Int32Array(y*v);for(var B=0;B<w.length;B++)w[B]=-1;B=[];for(let F=0;F<h;F+=a.lineSpacing)for(let I=0;I<c;I+=a.lineSpacing)B.push({x:I,y:F,sort:f.getFloat()});B.sort((F,I)=>F.sort-I.sort);for(const {x:F,
y:I}of B)f.getFloat()<a.density&&(c=T(a,k,F,I,b.length,w,y,v,t),2>c.length||b.push(c));return b}function g(a,k,c,h){if(0===h)return a;const b=Math.round(3*h),f=Array(2*b+1);var t=0;for(var y=-b;y<=b;y++){var v=Math.exp(-y*y/(h*h));f[y+b]=v;t+=v}for(h=-b;h<=b;h++)f[h+b]/=t;t=new Float32Array(a.length);for(h=0;h<c;h++)for(y=0;y<k;y++){var w=v=0;for(var B=-b;B<=b;B++)if(!(0>y+B||y+B>=k)){var F=f[B+b];v+=F*a[2*(h*k+(y+B))];w+=F*a[2*(h*k+(y+B))+1]}t[2*(h*k+y)]=v;t[2*(h*k+y)+1]=w}a=new Float32Array(a.length);
for(h=0;h<k;h++)for(y=0;y<c;y++){w=v=0;for(B=-b;B<=b;B++)0>y+B||y+B>=c||(F=f[B+b],v+=F*t[2*((y+B)*k+h)],w+=F*t[2*((y+B)*k+h)+1]);a[2*(y*k+h)]=v;a[2*(y*k+h)+1]=w}return a}function p(a,k){const c=new Q;var h=a.reduce((y,v)=>y+v.length,0);h=new Float32Array(4*h);const b=Array(a.length);let f=0,t=0;for(const y of a){a=f;for(const v of y)h[4*f]=v.x,h[4*f+1]=v.y,h[4*f+2]=v.t,h[4*f+3]=v.speed,f++;b[t++]={startVertex:a,numberOfVertices:y.length,totalTime:y[y.length-1].t,timeSeed:k?c.getFloat():0}}return{lineVertices:h,
lineDescriptors:b}}function q(a,k){function c(G,N,z,A,J,R,H,O){const M=9*v;let S=0;y[M+S++]=G;y[M+S++]=N;y[M+S++]=1;y[M+S++]=z;y[M+S++]=R;y[M+S++]=H;y[M+S++]=A/2;y[M+S++]=J/2;y[M+S++]=O;v++;y[M+S++]=G;y[M+S++]=N;y[M+S++]=-1;y[M+S++]=z;y[M+S++]=R;y[M+S++]=H;y[M+S++]=-A/2;y[M+S++]=-J/2;y[M+S++]=O;v++}const {lineVertices:h,lineDescriptors:b}=a;var f=a=0;for(var t of b)a+=2*t.numberOfVertices,f+=6*(t.numberOfVertices-1);const y=new Float32Array(9*a);t=new Uint32Array(f);let v=0;a=0;for(const G of b){const {totalTime:N,
timeSeed:z}=G;let A=f=null,J=null;var w=null,B=null,F=null;for(let R=0;R<G.numberOfVertices;R++){w=h[4*(G.startVertex+R)];const H=h[4*(G.startVertex+R)+1],O=h[4*(G.startVertex+R)+2],M=h[4*(G.startVertex+R)+3];let S=null,W=null;var I=null;let X=null;0<R&&(S=w-f,W=H-A,I=Math.sqrt(S*S+W*W),S/=I,W/=I,1<R?(B=S+B,F=W+F,I=Math.sqrt(B*B+F*F),B/=I,F/=I,I=Math.min(1/(B*S+F*W),k),B*=I,F*=I,I=-F,X=B):(I=-W,X=S),null!==I&&null!==X&&(c(f,A,J,I,X,N,z,M),t[a++]=v-2,t[a++]=v,t[a++]=v-1,t[a++]=v,t[a++]=v+1,t[a++]=
v-1));f=w;A=H;J=O;B=S;F=W;w=M}c(f,A,J,-F,B,N,z,w)}return{vertexData:y,indexData:t}}function n(a){function k(Y,ca){var Z=O+S,ea=M+W,ha=Math.sqrt(Z*Z+ea*ea);Z/=ha;ea/=ha;var fa=O*Z+M*ea,ka=S+X,ia=W+ba;ha=Math.sqrt(ka*ka+ia*ia);ka/=ha;ia/=ha;var na=S*ka+W*ia;ha=I;var qa=G,ta=N,wa=z;ea=-(ea/fa);Z/=fa;fa=A;var ya=J,xa=R,Aa=H;ia=-(ia/na);ka/=na;na=16*B;let sa=0;for(const Ea of[1,2])for(const Ca of[1,2,3,4])v[na+sa++]=ha,v[na+sa++]=qa,v[na+sa++]=ta,v[na+sa++]=wa,v[na+sa++]=fa,v[na+sa++]=ya,v[na+sa++]=xa,
v[na+sa++]=Aa,v[na+sa++]=Ea,v[na+sa++]=Ca,v[na+sa++]=Y,v[na+sa++]=ca,v[na+sa++]=ea/2,v[na+sa++]=Z/2,v[na+sa++]=ia/2,v[na+sa++]=ka/2,B++;w[F++]=B-8;w[F++]=B-7;w[F++]=B-6;w[F++]=B-7;w[F++]=B-5;w[F++]=B-6;w[F++]=B-4;w[F++]=B-3;w[F++]=B-2;w[F++]=B-3;w[F++]=B-1;w[F++]=B-2}function c(Y,ca,Z,ea,ha,fa){O=S;M=W;S=X;W=ba;null==O&&null==M&&(O=S,M=W);if(null!=A&&null!=J){X=Y-A;ba=ca-J;const ka=Math.sqrt(X*X+ba*ba);X/=ka;ba/=ka}null!=O&&null!=M&&k(ha,fa);I=A;G=J;N=R;z=H;A=Y;J=ca;R=Z;H=ea}function h(Y,ca){O=S;
M=W;S=X;W=ba;null==O&&null==M&&(O=S,M=W);null!=O&&null!=M&&k(Y,ca)}const {lineVertices:b,lineDescriptors:f}=a;let t=a=0;for(var y of f){const Y=y.numberOfVertices-1;a+=8*Y;t+=12*Y}const v=new Float32Array(16*a),w=new Uint32Array(t);let B=0,F=0,I,G,N,z,A,J,R,H,O,M,S,W,X,ba;for(const Y of f){ba=X=W=S=M=O=H=R=J=A=z=N=G=I=null;const {totalTime:ca,timeSeed:Z}=Y;for(y=0;y<Y.numberOfVertices;y++)c(b[4*(Y.startVertex+y)],b[4*(Y.startVertex+y)+1],b[4*(Y.startVertex+y)+2],b[4*(Y.startVertex+y)+3],ca,Z);h(ca,
Z)}return{vertexData:v,indexData:w}}function e(a,k){const c=k.pixels,{width:h,height:b}=k,f=new Float32Array(h*b*2),t=k.mask||new Uint8Array(h*b*2);k.mask||t.fill(255);if("vector-uv"===a)for(a=0;a<h*b;a++)f[2*a]=c[0][a],f[2*a+1]=-c[1][a];else if("vector-magdir"===a)for(a=0;a<h*b;a++){k=c[0][a];const y=x.deg2rad(c[1][a]),v=Math.sin(y-Math.PI/2);f[2*a]=Math.cos(y-Math.PI/2)*k;f[2*a+1]=v*k}return{data:f,mask:t,width:h,height:b}}async function m(a,k,c,h,b,f){const t={requestProjectedLocalDirections:!0,
signal:f};null!=b&&(t.timeExtent=b);if("imagery"===a.type)return await a.load({signal:f}),b=a.rasterInfo.dataType,a=await a.fetchImage(k,c,h,t),null==a?.pixelData?.pixelBlock?{data:new Float32Array(c*h*2),mask:new Uint8Array(c*h),width:c,height:h}:e(b,a.pixelData.pixelBlock);await a.load({signal:f});b=a.rasterInfo.dataType;a=await a.fetchPixels(k,c,h,t);return null==a?.pixelBlock?{data:new Float32Array(c*h*2),mask:new Uint8Array(c*h),width:c,height:h}:e(b,a.pixelBlock)}const r=D.getLogger("esri.views.2d.engine.flow.dataUtils");
l.createAnimatedLinesData=p;l.createFlowMesh=async function(a,k,c,h){const b=performance.now();var f=L(k,c);const t=performance.now();c=d(k,f,c.width,c.height);k=performance.now();f=p(c,!0);c=performance.now();a="Streamlines"===a?q(f,10):n(f);f=performance.now();C("esri-2d-profiler")&&(r.info("I.1","_createFlowFieldFromData (ms)",Math.round(t-b)),r.info("I.2","_getStreamlines (ms)",Math.round(k-t)),r.info("I.3","createAnimatedLinesData (ms)",Math.round(c-k)),r.info("I.4","create{Streamlines|Particles}Mesh (ms)",
Math.round(f-c)),r.info("I.5","createFlowMesh (ms)",Math.round(f-b)),r.info("I.6","Mesh size (bytes)",a.vertexData.buffer.byteLength+a.indexData.buffer.byteLength));await Promise.resolve();K.throwIfAborted(h);return a};l.createParticlesMesh=n;l.createStreamlinesMesh=q;l.loadImagery=async function(a,k,c,h,b,f){const t=performance.now();var y=P.getInfo(k.spatialReference);if(!y)return c=await m(a,k,c,h,b,f),C("esri-2d-profiler")&&r.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-
t)),C("esri-2d-profiler")&&r.info("I.9","Number of parts",1),c;const [v,w]=y.valid,B=Math.ceil(k.width/(w-v)),F=k.width/B,I=Math.round(c/B);let G=k.xmin;const N=[];y=performance.now();for(let z=0;z<B;z++){const A=new U({xmin:G,xmax:G+F,ymin:k.ymin,ymax:k.ymax,spatialReference:k.spatialReference});N.push(m(a,A,I,h,b,f));G+=F}a=await Promise.all(N);C("esri-2d-profiler")&&r.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-y));C("esri-2d-profiler")&&r.info("I.9","Number of parts",
a.length);h={data:new Float32Array(c*h*2),mask:new Uint8Array(c*h),width:c,height:h};k=0;for(const z of a){for(a=0;a<z.height;a++)for(b=0;b<z.width;b++)k+b>=c||(h.data[2*(a*c+k+b)]=z.data[2*(a*z.width+b)],h.data[2*(a*c+k+b)+1]=z.data[2*(a*z.width+b)+1],h.mask[a*c+k+b]=z.mask[a*z.width+b]);k+=z.width}C("esri-2d-profiler")&&r.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-t));return h};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ../chunks/tslib.es6 ../PopupTemplate ../core/Clonable ../core/Error ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/versionUtils ../support/popupUtils ../webdoc/interfaces".split(" "),function(l,
u,C,D,x,K,Q,P,U,L,T,d,g,p,q,n,e,m,r,a,k,c,h,b,f,t,y){D=class extends e.BlendLayer(h.TemporalLayer(c.ScaleRangeLayer(r.OperationalLayer(a.PortalLayer(q.ArcGISImageService(k.RefreshableLayer(m.CustomParametersMixin(n.ArcGISService(K.MultiOriginJSONMixin(D.ClonableMixin(p))))))))))){constructor(...v){super(...v);this.isReference=null;this.operationalLayerType="ArcGISImageServiceLayer";this.popupEnabled=!0;this.popupTemplate=null;this.type="imagery";this._debouncedSaveOperations=Q.debounce(async(w,B,
F)=>{const {save:I,saveAs:G}=await new Promise((N,z)=>l(["./save/imageryUtils"],N,z));switch(w){case y.SaveOperationType.SAVE:return I(this,B);case y.SaveOperationType.SAVE_AS:return G(this,F,B)}})}normalizeCtorArgs(v,w){return"string"===typeof v?{url:v,...w}:v}load(v){const w=null!=v?v.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},v).catch(Q.throwIfAbortError).then(()=>this._fetchService(w)));return Promise.resolve(this)}get legendEnabled(){return this._isPreviewLayer?
!1:this._get("legendEnabled")??!0}set legendEnabled(v){this._set("legendEnabled",v)}get listMode(){return this._isPreviewLayer?"hide":this._get("listMode")}set listMode(v){this._set("listMode",v)}writeOperationalLayerType(v,w,B){w[B]="vector-field"===this.renderer?.type?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}get _isPreviewLayer(){return!(!this.raster||!this.url?.toLowerCase().includes("/rasterrendering/imageserver"))}createPopupTemplate(v){const w=
this.rasterFields,B=this.title,F=new Set;var I=!1;let G=!1;this.capabilities&&(I=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length,G="esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType);const N=new Set;I&&N.add("raster.itempixelvalue");for(const z of w)I=z.name.toLowerCase(),N.has(I)||I.includes("raster.servicepixelvalue.")||F.add(z.name);G&&F.add("raster.magnitude").add("raster.direction");v=t.createPopupTemplate({fields:w,
title:B},{...v,visibleFieldNames:F});v?.fieldInfos&&this.rasterInfo?.pixelType.startsWith("f")&&v.fieldInfos.forEach(({format:z,fieldName:A})=>{z&&/^raster\.(item|service)pixelvalue/i.test(A)&&(z.places=2)});return v}queryFeatures(v,w){return this.queryRasters(v,w).then(B=>{if(B?.features)for(const F of B.features)F.layer=F.sourceLayer=this;return B})}queryFeatureCount(v,w){return this.queryRasterCount(v,w)}redraw(){this.emit("redraw")}async save(v){return this._debouncedSaveOperations(y.SaveOperationType.SAVE,
v)}async saveAs(v,w){return this._debouncedSaveOperations(y.SaveOperationType.SAVE_AS,w,v)}serviceSupportsSpatialReference(v){return f.serviceSupportsSpatialReference(this,v)}write(v,w){if(!this._isPreviewLayer)return super.write(v,w);w?.messages&&w.messages.push(new x("layer:unsupported",`Imagery preview layer (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${`${w.origin}/${w.layerContainerType||"operational-layers"}`}'`,{layer:this}));return null}};
u.__decorate([P.property(b.legendEnabled)],D.prototype,"legendEnabled",null);u.__decorate([P.property({type:["show","hide"]})],D.prototype,"listMode",null);u.__decorate([P.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],D.prototype,"isReference",void 0);u.__decorate([P.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],
D.prototype,"operationalLayerType",void 0);u.__decorate([g.writer("web-map","operationalLayerType")],D.prototype,"writeOperationalLayerType",null);u.__decorate([P.property(b.popupEnabled)],D.prototype,"popupEnabled",void 0);u.__decorate([P.property({type:C,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],D.prototype,"popupTemplate",void 0);u.__decorate([P.property({readOnly:!0})],D.prototype,"defaultPopupTemplate",null);u.__decorate([P.property({readOnly:!0,json:{read:!1}})],D.prototype,
"type",void 0);u.__decorate([P.property({readOnly:!0})],D.prototype,"_isPreviewLayer",null);return D=u.__decorate([d.subclass("esri.layers.ImageryLayer")],D)});