// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("../chunks/tslib.es6 ../core/handleUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../widgets/Widget ../widgets/support/widget ../widgets/support/jsxFactory ../widgets/support/decorators/messageBundle".split(" "),function(I,ya,za,L,aa,ha,Sa,Aa,B,Ba,D,Ca){function ia(t,r){var d=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);
r&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable}));d.push.apply(d,a)}return d}function ja(t){for(var r=1;r<arguments.length;r++){var d=null!=arguments[r]?arguments[r]:{};r%2?ia(Object(d),!0).forEach(function(a){var c=d[a];a:if("object"===typeof a&&null!==a){var f=a[Symbol.toPrimitive];if(void 0!==f){a=f.call(a,"string");if("object"!==typeof a)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}a="symbol"===typeof a?a:String(a);
a in t?Object.defineProperty(t,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[a]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(d)):ia(Object(d)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(d,a))})}return t}aa='input:not([inert]) select:not([inert]) textarea:not([inert]) a[href]:not([inert]) button:not([inert]) [tabindex]:not(slot):not([inert]) audio[controls]:not([inert]) video[controls]:not([inert]) [contenteditable]:not([contenteditable\x3d"false"]):not([inert]) details\x3esummary:first-of-type:not([inert]) details:not([inert])'.split(" ");
var T=aa.join(","),F=(ha="undefined"===typeof Element)?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,U=!ha&&Element.prototype.getRootNode?function(t){var r;return null===t||void 0===t?void 0:null===(r=t.getRootNode)||void 0===r?void 0:r.call(t)}:function(t){return null===t||void 0===t?void 0:t.ownerDocument},V=function a(r,d){var c;void 0===d&&(d=!0);var f=null===r||void 0===r?void 0:null===(c=r.getAttribute)||void 0===c?void 0:
c.call(r,"inert");return""===f||"true"===f||d&&r&&a(r.parentNode)},ka=function(r,d,a){if(V(r))return[];var c=Array.prototype.slice.apply(r.querySelectorAll(T));d&&F.call(r,T)&&c.unshift(r);return c=c.filter(a)},la=function f(d,a,c){for(var h=[],g=Array.from(d);g.length;){var k=g.shift();if(!V(k,!1))if("SLOT"===k.tagName){var n=k.assignedElements();n=f(n.length?n:k.children,!0,c);c.flatten?h.push.apply(h,n):h.push({scopeParent:k,candidates:n})}else{F.call(k,T)&&c.filter(k)&&(a||!d.includes(k))&&h.push(k);
n=k.shadowRoot||"function"===typeof c.getShadowRoot&&c.getShadowRoot(k);var q=!V(n,!1)&&(!c.shadowRootFilter||c.shadowRootFilter(k));n&&q?(n=f(!0===n?k.children:n.children,!0,c),c.flatten?h.push.apply(h,n):h.push({scopeParent:k,candidates:n})):g.unshift.apply(g,k.children)}}return h},G=function(d){if(!d)throw Error("No node provided");if(0>d.tabIndex){var a;if(!(a=/^(AUDIO|VIDEO|DETAILS)$/.test(d.tagName))){var c;a=null===d||void 0===d?void 0:null===(c=d.getAttribute)||void 0===c?void 0:c.call(d,
"contenteditable");a=""===a||"true"===a}if(a&&isNaN(parseInt(d.getAttribute("tabindex"),10)))return 0}return d.tabIndex},Da=function(d,a){return d.tabIndex===a.tabIndex?d.documentOrder-a.documentOrder:d.tabIndex-a.tabIndex},Ea=function(d){return"DETAILS"===d.tagName&&Array.prototype.slice.apply(d.children).some(function(a){return"SUMMARY"===a.tagName})},Fa=function(d,a){for(var c=0;c<d.length;c++)if(d[c].checked&&d[c].form===a)return d[c]},Ga=function(d){if(!d.name)return!0;var a=d.form||U(d),c=function(h){return a.querySelectorAll('input[type\x3d"radio"][name\x3d"'+
h+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)var f=c(window.CSS.escape(d.name));else try{f=c(d.name)}catch(h){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",h.message),!1}c=Fa(f,d.form);return!c||c===d},ma=function(d){d=d.getBoundingClientRect();var a=d.height;return 0===d.width&&0===a},Ha=function(d,a){var c=a.displayCheck;
a=a.getShadowRoot;if("hidden"===getComputedStyle(d).visibility)return!0;var f=F.call(d,"details\x3esummary:first-of-type")?d.parentElement:d;if(F.call(f,"details:not([open]) *"))return!0;if(!c||"full"===c||"legacy-full"===c){if("function"===typeof a){for(f=d;d;){var h=d.parentElement,g=U(d);if(h&&!h.shadowRoot&&!0===a(h))return ma(d);d=d.assignedSlot?d.assignedSlot:h||g===d.ownerDocument?h:g.host}d=f}a=d;var k;f=a&&U(a);h=null===(k=f)||void 0===k?void 0:k.host;k=!1;if(f&&f!==a){var n,q,v;for(k=!!(null!==
(n=h)&&void 0!==n&&null!==(q=n.ownerDocument)&&void 0!==q&&q.contains(h)||null!==a&&void 0!==a&&null!==(v=a.ownerDocument)&&void 0!==v&&v.contains(a));!k&&h;){var u,x,y;f=U(h);h=null===(u=f)||void 0===u?void 0:u.host;k=!(null===(x=h)||void 0===x||null===(y=x.ownerDocument)||void 0===y||!y.contains(h))}}if(k)return!d.getClientRects().length;if("legacy-full"!==c)return!0}else if("non-zero-area"===c)return ma(d);return!1},W=function(d,a){var c;(c=a.disabled||V(a))||(c="INPUT"===a.tagName&&"hidden"===
a.type);if(!(d=c||Ha(a,d)||Ea(a)))a:{if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(a.tagName))for(d=a.parentElement;d;){if("FIELDSET"===d.tagName&&d.disabled){for(c=0;c<d.children.length;c++){var f=d.children.item(c);if("LEGEND"===f.tagName){d=F.call(d,"fieldset[disabled] *")?!0:!f.contains(a);break a}}d=!0;break a}d=d.parentElement}d=!1}return d?!1:!0},ba=function(d,a){return"INPUT"===a.tagName&&"radio"===a.type&&!Ga(a)||0>G(a)||!W(d,a)?!1:!0},Ia=function(d){d=parseInt(d.getAttribute("tabindex"),10);
return isNaN(d)||0<=d?!0:!1},Ja=function c(a){var f=[],h=[];a.forEach(function(g,k){var n=!!g.scopeParent,q=n?g.scopeParent:g;var v=G(q);v=0>v&&n&&isNaN(parseInt(q.getAttribute("tabindex"),10))?0:v;var u=n?c(g.candidates):q;0===v?n?f.push.apply(f,u):f.push(q):h.push({documentOrder:k,tabIndex:v,item:g,isScope:n,content:u})});return h.sort(Da).reduce(function(g,k){k.isScope?g.push.apply(g,k.content):g.push(k.content);return g},[]).concat(f)},Ka=function(a,c){c=c||{};a=c.getShadowRoot?la([a],c.includeContainer,
{filter:ba.bind(null,c),flatten:!1,getShadowRoot:c.getShadowRoot,shadowRootFilter:Ia}):ka(a,c.includeContainer,ba.bind(null,c));return Ja(a)},La=function(a,c){c=c||{};return c.getShadowRoot?la([a],c.includeContainer,{filter:W.bind(null,c),flatten:!0,getShadowRoot:c.getShadowRoot}):ka(a,c.includeContainer,W.bind(null,c))},J=function(a,c){c=c||{};if(!a)throw Error("No node provided");return!1===F.call(a,T)?!1:ba(c,a)},Ma=aa.concat("iframe").join(","),ca=function(a,c){c=c||{};if(!a)throw Error("No node provided");
return!1===F.call(a,Ma)?!1:W(c,a)},na={activateTrap:function(a,c){if(0<a.length){var f=a[a.length-1];f!==c&&f.pause()}f=a.indexOf(c);-1!==f&&a.splice(f,1);a.push(c)},deactivateTrap:function(a,c){c=a.indexOf(c);-1!==c&&a.splice(c,1);0<a.length&&a[a.length-1].unpause()}},M=function(a){return"Tab"===(null===a||void 0===a?void 0:a.key)||9===(null===a||void 0===a?void 0:a.keyCode)},Na=function(a){return M(a)&&!a.shiftKey},Oa=function(a){return M(a)&&a.shiftKey},oa=function(a,c){var f=-1;a.every(function(h,
g){return c(h)?(f=g,!1):!0});return f},N=function(a){for(var c=arguments.length,f=Array(1<c?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return"function"===typeof a?a.apply(void 0,f):a},X=function(a){return a.target.shadowRoot&&"function"===typeof a.composedPath?a.composedPath()[0]:a.target},Pa=[],Ra=function(a,c){var f=(null===c||void 0===c?void 0:c.document)||document,h=(null===c||void 0===c?void 0:c.trapStack)||Pa,g=ja({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Na,
isKeyBackward:Oa},c),k=[],n=[],q=[],v=null,u=null,x=!1,y=!1,da=void 0,Y=void 0,z=function(p,b,e){return p&&void 0!==p[b]?p[b]:g[e||b]},K=function(p,b){var e="function"===typeof(null===b||void 0===b?void 0:b.composedPath)?b.composedPath():void 0;return n.findIndex(function(l){var m=l.container;l=l.tabbableNodes;return m.contains(p)||(null===e||void 0===e?void 0:e.includes(m))||l.find(function(w){return w===p})})},O=function(p){var b=g[p];if("function"===typeof b){for(var e=arguments.length,l=Array(1<
e?e-1:0),m=1;m<e;m++)l[m-1]=arguments[m];b=b.apply(void 0,l)}!0===b&&(b=void 0);if(!b){if(void 0===b||!1===b)return b;throw Error("`".concat(p,"` was specified but was not a node, or did not return a node"));}e=b;if("string"===typeof b&&(e=f.querySelector(b),!e))throw Error("`".concat(p,"` as selector refers to no known node"));return e},P=function(){var p=O("initialFocus");if(!1===p)return!1;void 0!==p&&ca(p,g.tabbableOptions)||(p=0<=K(f.activeElement)?f.activeElement:(p=q[0])&&p.firstTabbableNode||
O("fallbackFocus"));if(!p)throw Error("Your focus-trap needs to have at least one focusable element");return p},R=function(){n=k.map(function(p){var b=Ka(p,g.tabbableOptions),e=La(p,g.tabbableOptions),l=0<b.length?b[0]:void 0,m=0<b.length?b[b.length-1]:void 0,w=e.find(function(C){return J(C)}),A=e.slice().reverse().find(function(C){return J(C)}),Q=!!b.find(function(C){return 0<G(C)});return{container:p,tabbableNodes:b,focusableNodes:e,posTabIndexesFound:Q,firstTabbableNode:l,lastTabbableNode:m,firstDomTabbableNode:w,
lastDomTabbableNode:A,nextTabbableNode:function(C){var pa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,qa=b.indexOf(C);return 0>qa?pa?e.slice(e.indexOf(C)+1).find(function(ea){return J(ea)}):e.slice(0,e.indexOf(C)).reverse().find(function(ea){return J(ea)}):b[qa+(pa?1:-1)]}}});q=n.filter(function(p){return 0<p.tabbableNodes.length});if(0>=q.length&&!O("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(n.find(function(p){return p.posTabIndexesFound})&&
1<n.length)throw Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.");},H=function e(b){!1!==b&&b!==f.activeElement&&(b&&b.focus?(b.focus({preventScroll:!!g.preventScroll}),u=b,b.tagName&&"input"===b.tagName.toLowerCase()&&"function"===typeof b.select&&b.select()):e(P()))},ra=function(b){var e=O("setReturnFocus",b);return e?e:!1===e?!1:b},sa=function(b){var e=b.target,
l=b.event;b=b.isBackward;var m=void 0===b?!1:b;e=e||X(l);R();b=null;if(0<q.length){var w=K(e,l),A=0<=w?n[w]:void 0;0>w?b=m?q[q.length-1].lastTabbableNode:q[0].firstTabbableNode:m?(m=oa(q,function(Q){return e===Q.firstTabbableNode}),0>m&&(A.container===e||ca(e,g.tabbableOptions)&&!J(e,g.tabbableOptions)&&!A.nextTabbableNode(e,!1))&&(m=w),0<=m?(l=q[0===m?q.length-1:m-1],b=0<=G(e)?l.lastTabbableNode:l.lastDomTabbableNode):M(l)||(b=A.nextTabbableNode(e,!1))):(m=oa(q,function(Q){return e===Q.lastTabbableNode}),
0>m&&(A.container===e||ca(e,g.tabbableOptions)&&!J(e,g.tabbableOptions)&&!A.nextTabbableNode(e))&&(m=w),0<=m?(l=q[m===q.length-1?0:m+1],b=0<=G(e)?l.firstTabbableNode:l.firstDomTabbableNode):M(l)||(b=A.nextTabbableNode(e)))}else b=O("fallbackFocus");return b},Z=function(b){var e=X(b);0<=K(e,b)||(N(g.clickOutsideDeactivates,b)?E.deactivate({returnFocus:g.returnFocusOnDeactivate}):N(g.allowOutsideClick,b)||b.preventDefault())},ta=function(b){var e=X(b),l=0<=K(e,b);if(l||e instanceof Document)l&&(u=e);
else{b.stopImmediatePropagation();b=!0;if(u)if(0<G(u)){if(e=K(u),e=n[e].tabbableNodes,0<e.length&&(l=e.findIndex(function(w){return w===u}),0<=l))if(g.isKeyForward(Y)){if(l+1<e.length){var m=e[l+1];b=!1}}else 0<=l-1&&(m=e[l-1],b=!1)}else n.some(function(w){return w.tabbableNodes.some(function(A){return 0<G(A)})})||(b=!1);else b=!1;b&&(m=sa({target:u,isBackward:g.isKeyBackward(Y)}));m?H(m):H(u||P())}Y=void 0},Qa=function(b){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;Y=b;if(e=sa({event:b,
isBackward:e}))M(b)&&b.preventDefault(),H(e)},ua=function(b){"Escape"!==(null===b||void 0===b?void 0:b.key)&&"Esc"!==(null===b||void 0===b?void 0:b.key)&&27!==(null===b||void 0===b?void 0:b.keyCode)||!1===N(g.escapeDeactivates,b)?(g.isKeyForward(b)||g.isKeyBackward(b))&&Qa(b,g.isKeyBackward(b)):(b.preventDefault(),E.deactivate())},va=function(b){var e=X(b);0<=K(e,b)||N(g.clickOutsideDeactivates,b)||N(g.allowOutsideClick,b)||(b.preventDefault(),b.stopImmediatePropagation())},wa=function(){if(x)return na.activateTrap(h,
E),da=g.delayInitialFocus?setTimeout(function(){H(P())},0):H(P()),f.addEventListener("focusin",ta,!0),f.addEventListener("mousedown",Z,{capture:!0,passive:!1}),f.addEventListener("touchstart",Z,{capture:!0,passive:!1}),f.addEventListener("click",va,{capture:!0,passive:!1}),f.addEventListener("keydown",ua,{capture:!0,passive:!1}),E},xa=function(){if(x)return f.removeEventListener("focusin",ta,!0),f.removeEventListener("mousedown",Z,!0),f.removeEventListener("touchstart",Z,!0),f.removeEventListener("click",
va,!0),f.removeEventListener("keydown",ua,!0),E};c=function(b){b.some(function(e){return Array.from(e.removedNodes).some(function(l){return l===u})})&&H(P())};var fa="undefined"!==typeof window&&"MutationObserver"in window?new MutationObserver(c):void 0,S=function(){fa&&(fa.disconnect(),x&&!y&&k.map(function(b){fa.observe(b,{subtree:!0,childList:!0})}))};var E={get active(){return x},get paused(){return y},activate:function(b){if(x)return this;var e=z(b,"onActivate"),l=z(b,"onPostActivate"),m=z(b,
"checkCanFocusTrap");m||R();x=!0;y=!1;v=f.activeElement;null===e||void 0===e||e();b=function(){m&&R();wa();S();null===l||void 0===l||l()};if(m)return m(k.concat()).then(b,b),this;b();return this},deactivate:function(b){if(!x)return this;var e=ja({onDeactivate:g.onDeactivate,onPostDeactivate:g.onPostDeactivate,checkCanReturnFocus:g.checkCanReturnFocus},b);clearTimeout(da);da=void 0;xa();y=x=!1;S();na.deactivateTrap(h,E);var l=z(e,"onDeactivate"),m=z(e,"onPostDeactivate");b=z(e,"checkCanReturnFocus");
var w=z(e,"returnFocus","returnFocusOnDeactivate");null===l||void 0===l||l();e=function(){setTimeout(function(){w&&H(ra(v));null===m||void 0===m||m()},0)};if(w&&b)return b(ra(v)).then(e,e),this;e();return this},pause:function(b){if(y||!x)return this;var e=z(b,"onPause");b=z(b,"onPostPause");y=!0;null===e||void 0===e||e();xa();S();null===b||void 0===b||b();return this},unpause:function(b){if(!y||!x)return this;var e=z(b,"onUnpause");b=z(b,"onPostUnpause");y=!1;null===e||void 0===e||e();R();wa();S();
null===b||void 0===b||b();return this},updateContainerElements:function(b){k=[].concat(b).filter(Boolean).map(function(e){return"string"===typeof e?f.querySelector(e):e});x&&R();S();return this}};E.updateContainerElements(a);return E};B=class extends B{constructor(a,c){super(a,c);this.container=document.createElement("div");this.content=null;this.open=!1;this._focusTrap=null;this._close=()=>{this.open=!1};document.body.appendChild(this.container);this.addHandles(za.watch(()=>this.open,()=>this._toggleFocusTrap()))}destroy(){this._destroyFocusTrap()}get title(){return this.messages?.auth.signIn}render(){var a=
this.id;const {open:c,content:f,title:h,messages:g}=this;var k=c&&!!f;const n={["esri-identity-modal--open"]:k,["esri-identity-modal--closed"]:!k},q=D.tsx("button",{"aria-label":g.close,bind:this,class:"esri-identity-modal__close-button",onclick:this._close,title:g.close,type:"button"},D.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})),v=`${a}_title`;a=`${a}_content`;const u=h?D.tsx("h1",{class:"esri-identity-modal__title",id:v},h):null;k=k?D.tsx("div",{afterCreate:this._createFocusTrap,
"aria-describedby":a,"aria-labelledby":v,bind:this,class:"esri-identity-modal__dialog",role:"dialog"},q,u,this._renderContent(a)):null;return D.tsx("div",{class:this.classes("esri-identity-modal",n),tabIndex:-1},k)}_destroyFocusTrap(){this._focusTrap?.deactivate({onDeactivate:()=>{}});this._focusTrap=null}_toggleFocusTrap(){const {_focusTrap:a,open:c}=this;a&&(c?a.activate():a.deactivate())}_createFocusTrap(a){this._destroyFocusTrap();const c=requestAnimationFrame(()=>{this._focusTrap=Ra(a,{initialFocus:"input",
onDeactivate:this._close});this._toggleFocusTrap()});this.addHandles(ya.makeHandle(()=>cancelAnimationFrame(c)))}_renderContent(a){const c=this.content;return"string"===typeof c?D.tsx("div",{class:"esri-identity-modal__content",id:a,innerHTML:c}):Ba.isWidget(c)?D.tsx("div",{class:"esri-identity-modal__content",id:a},c.render()):c instanceof HTMLElement?D.tsx("div",{afterCreate:this._attachToNode,bind:c,class:"esri-identity-modal__content",id:a}):null}_attachToNode(a){a.appendChild(this)}};I.__decorate([L.property({readOnly:!0})],
B.prototype,"container",void 0);I.__decorate([L.property()],B.prototype,"content",void 0);I.__decorate([L.property()],B.prototype,"open",void 0);I.__decorate([L.property(),Ca.messageBundle("esri/t9n/common")],B.prototype,"messages",void 0);I.__decorate([L.property()],B.prototype,"title",null);return B=I.__decorate([Aa.subclass("esri.identity.IdentityModal")],B)});