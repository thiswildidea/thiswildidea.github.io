// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(h,c,b,k,l,g,e,m,r,t,n){b=class extends b{constructor(a){super(a);this.portalItem=null}normalizeCtorArgs(a){return a?.portalItem&&a.path?{...a,path:this._normalizePath(a.path,a.portalItem)}:a}set path(a){null!=a&&g.isAbsolute(a)?
l.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",a)}_castPath(a){return this._normalizePath(a,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(a="json",d){const f=
this.cdnUrl;if(null==f)throw new k("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(f,{responseType:a,query:{token:this.portalItem.apiKey},signal:d?.signal})}async update(a,d){const {addOrUpdateResource:f}=await new Promise((p,q)=>h(["./support/resourceUtils"],p,q));return f(this,"update",a,d)}hasPath(){return null!=this.path}_normalizePath(a,d){if(null==a)return a;a=a.replace(/^\/+/,"");null!=d&&g.isAbsolute(a)&&(a=
g.makeRelative(a,d.itemUrl));return a?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}};c.__decorate([e.property()],b.prototype,"portalItem",void 0);c.__decorate([e.property({type:String,value:null})],b.prototype,"path",null);c.__decorate([m.cast("path")],b.prototype,"_castPath",null);c.__decorate([e.property({type:String,readOnly:!0})],b.prototype,"url",null);c.__decorate([e.property({type:String,readOnly:!0})],b.prototype,"cdnUrl",null);c.__decorate([e.property({type:String,readOnly:!0})],
b.prototype,"itemRelativeUrl",null);return b=c.__decorate([n.subclass("esri.portal.PortalItemResource")],b)});