// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(b,a){b.updateOrigins=function(h){h?.writtenProperties&&h.writtenProperties.forEach(({target:k,propName:r,newOrigin:p})=>{a.isMultiOriginJSONMixin(k)&&p&&k.originOf(r)!==p&&k.updateOrigin(r,p)})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(b){b.isMultiOriginJSONMixin=function(a){return a&&
"getAtOrigin"in a&&"originOf"in a};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/MapFloorInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(b,a,h,k,r,p,e,f,m,u){a=class extends a.JSONSupport{constructor(l){super(l);
this.siteLayer=this.facilityLayer=this.levelLayer=null}};b.__decorate([h.property({type:m,json:{write:!0}})],a.prototype,"levelLayer",void 0);b.__decorate([h.property({type:f,json:{write:!0}})],a.prototype,"facilityLayer",void 0);b.__decorate([h.property({type:u,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=b.__decorate([e.subclass("esri.support.MapFloorInfo")],a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e){a=class extends a.JSONSupport{constructor(f){super(f);this.sublayerId=this.siteIdField=this.nameField=this.layerId=this.facilityIdField=null}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,
"siteIdField",void 0);b.__decorate([h.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([e.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e){a=class extends a.JSONSupport{constructor(f){super(f);this.verticalOrderField=this.sublayerId=this.shortNameField=this.longNameField=this.levelNumberField=this.levelIdField=this.layerId=this.facilityIdField=null}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"levelIdField",
void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"levelNumberField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"longNameField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"shortNameField",void 0);b.__decorate([h.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);b.__decorate([h.property({type:String,
json:{write:!0}})],a.prototype,"verticalOrderField",void 0);return a=b.__decorate([e.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,k,r,p,e){a=class extends a.JSONSupport{constructor(f){super(f);this.sublayerId=
this.siteIdField=this.nameField=this.layerId=null}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([h.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=
b.__decorate([e.subclass("esri.layers.support.SiteLayerInfo")],a)})},"esri/support/tagSymbols":function(){define(["exports"],function(b){const a=Symbol("WebScene");b.WebSceneTag=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(b,a){b.createCopyError=function(){return new a("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};b.createSchemaValidationError=
function(h){return new a("webscene:schema-validation","Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:h})};b.schemaValidationErrorName="webscene:schema-validation";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports","../../geometry/support/SupportedGCSWkids","../ViewingMode"],function(b,a,h){b.isSpatialReferenceSupported=function(k,r){return null==
k?!1:null==r?!0:r===h.ViewingMode.Local?k.isGeographic?k.isWGS84||k.wkid===a.SupportedGCSWkids.CGCS2000:!0:k.isWebMercator||k.isWGS84||k.wkid===a.SupportedGCSWkids.CGCS2000||k.wkid===a.SupportedGCSWkids.GCSMARS2000||k.wkid===a.SupportedGCSWkids.GCSMARS2000_SPHERE||k.wkid===a.SupportedGCSWkids.GCSMOON2000};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/saveAPIKeyUtils":function(){define(["exports","../config","../core/Error","../support/apiKeyUtils"],function(b,a,h,k){b.validateSaveAPIKey=
function(r){if(a.apiKey&&k.supportsApiKey(r.portal.url))throw new h("save-api-key-utils:api-key-not-supported",`Saving is not supported on ${r.portal.url} when using an api key`);};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../core/asyncUtils ../../core/Error ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),function(b,a,h,k,r,p){async function e(l,t,F=null){if(t?.resources){var z=
t.portalItem===l.portalItem?new Set(l.paths):new Set;l.paths.length=0;l.portalItem=t.portalItem;var G=new Set(t.resources.toKeep.map(B=>B.resource.path)),H=new Set,J=[];G.forEach(B=>{z.delete(B);l.paths.push(B)});for(const B of t.resources.toUpdate)if(z.delete(B.resource.path),G.has(B.resource.path)||H.has(B.resource.path)){const {resource:aa,content:U,finish:W,error:N}=B,R=p.getSiblingOfSameTypeI(aa,r.generateUUID());l.paths.push(R.path);J.push(m({resource:R,content:U,compress:B.compress,finish:W,
error:N},F))}else l.paths.push(B.resource.path),J.push(u(B,F)),H.add(B.resource.path);for(const B of t.resources.toAdd)l.paths.push(B.resource.path),z.has(B.resource.path)?z.delete(B.resource.path):J.push(m(B,F));if(0===J.length)return z;t=await k.allSettledErrors(J);k.throwIfAborted(F);if(0<t.length)throw new h("save:resources","Failed to save one or more resources",{errors:t});return z}}async function f(l,t,F=null){if(l&&t.portalItem){var z=[];for(const G of l)l=t.portalItem.resourceFromPath(G),
z.push(l.portalItem.removeResource(l,F));await k.eachAlways(z)}}async function m(l,t){t={...(null!=t?t:{}),compress:l.compress};t=await a.result(l.resource.portalItem.addResource(l.resource,await p.contentToBlob(l.content),t));if(!0===t.ok)l.finish?.(l.resource);else throw l.error?.(t.error),t.error;}async function u(l,t){t=await a.result(l.resource.update(await p.contentToBlob(l.content),t));if(!0===t.ok)l.finish?.(l.resource);else throw l.error?.(t.error),t.error;}b.beforeSave=async function(l){const t=
[];for(const F of l.allLayers)"beforeSave"in F&&"function"===typeof F.beforeSave&&(l=F.beforeSave())&&t.push(l);await Promise.allSettled(t)};b.saveResources=async function(l,t,F=null){l=await e(l,t,F);await f(l,t,F)};b.updateItemWithResources=async function(l,t,F,z,G=null){F=await e(F,z,G);await l.update({data:t});await f(F,z,G)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/resourceUtils":function(){define(["exports","../../request","../../core/Error","../../core/urlUtils"],
function(b,a,h,k){function r(e){const f=e.lastIndexOf("/");return-1===f?[".",e]:[e.slice(0,f),e.slice(f+1)]}function p(e){{const t=k.getPathExtension(e);e=null==t?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}const [f,m]=e,[u,l]=r(f);return[u,l,m]}b.addOrUpdateResource=async function(e,f,m,u){if(!e.hasPath())throw new h(`portal-item-resource-${f}:invalid-path`,"Resource does not have a valid path");const l=e.portalItem;await l.load(u);f=k.join(l.userItemUrl,"add"===f?"addResources":"updateResources");
const [t,F]=r(e.path),z=new FormData;t&&"."!==t&&z.append("resourcesPrefix",t);null!=u&&u.compress&&z.append("compress","true");z.append("fileName",F);z.append("file",m,F);z.append("f","json");u?.access&&z.append("access",u.access);await l.portal.request(f,{method:"post",body:z,signal:u?.signal});return e};b.contentToBlob=async function(e){return"blob"===e.type?e.blob:"json"===e.type?new Blob([e.jsonString],{type:"application/json"}):(await a(e.url,{responseType:"blob"})).data};b.fetchResources=async function(e,
f={},m){await e.load(m);const u=k.join(e.itemUrl,"resources"),{start:l=1,num:t=10,sortOrder:F="asc",sortField:z="created"}=f;f=await e.portal.request(u,{query:{start:l,num:t,sortOrder:F,sortField:z,token:e.apiKey},signal:m?.signal});return{total:f.total,nextStart:f.nextStart,resources:f.resources.map(({created:G,size:H,resource:J})=>({created:new Date(G),size:H,resource:e.resourceFromPath(J)}))}};b.getSiblingOfSameType=function(e,f){if(!e.hasPath())return null;const [m,,u]=p(e.path);return e.portalItem.resourceFromPath(k.join(m,
f+u))};b.getSiblingOfSameTypeI=function(e,f){if(!e.hasPath())return null;const [m,,u]=p(e.path);return e.portalItem.resourceFromPath(k.join(m,f+u))};b.removeAllResources=async function(e,f){await e.load(f);const m=k.join(e.userItemUrl,"removeResources");return e.portal.request(m,{method:"post",query:{deleteAll:!0},signal:f?.signal})};b.removeResource=async function(e,f,m){if(!f.hasPath())throw new h("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(m);
const u=k.join(e.userItemUrl,"removeResources");await e.portal.request(u,{method:"post",query:{resource:f.path},signal:m?.signal});f.portalItem=null};b.splitPrefixFileNameAndExtension=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(b){const a={width:600,height:400};b.getOptimalThumbnailSize=function(h,k){k=k||a;let {width:r,height:p}=k;k=r/p;1.5>k?p=r/1.5:1.5<k&&(r=1.5*p);r>h.width&&(p*=h.width/r,r=h.width);
p>h.height&&(r*=h.height/p,p=h.height);return{width:Math.round(r),height:Math.round(p)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),function(b,a,h,k,r,p,e,f){var m;a=m=class extends a.JSONSupport{constructor(u){super(u);
this.viewing=null}clone(){return new m({viewing:this.viewing?this.viewing.clone():null})}};b.__decorate([h.property({type:f,json:{write:!0}})],a.prototype,"viewing",void 0);return a=m=b.__decorate([e.subclass("esri.webscene.ApplicationProperties")],a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(b,a,h,k,r,p,e){var f;a=f=class extends a.JSONSupport{constructor(m){super(m);this.search=null}clone(){return new f(h.clone({search:this.search}))}};b.__decorate([k.property({type:e,json:{write:!0}})],a.prototype,"search",void 0);return a=f=b.__decorate([p.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(b,a,h,k,r,p,e,f,m,u,l,t){var F;const z=a.ofType(l),G=a.ofType(t);a=F=class extends h.JSONSupport{constructor(H){super(H);this.enabled=this.addressSearchEnabled=!0;this.hintText=null;this.layers=new z;this.tables=new G}readAddressSearchEnabled(H){return!H}writeAddressSearchEnabled(H,J,B){J[B]=!H}clone(){return new F(k.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};b.__decorate([r.property({type:Boolean,
nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);b.__decorate([e.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);b.__decorate([m.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);b.__decorate([r.property({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,
write:!0}}}})],a.prototype,"enabled",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);b.__decorate([r.property({type:z,json:{write:{overridePolicy:u.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);b.__decorate([r.property({type:G,json:{read:!0,write:{overridePolicy:u.writeNonEmptyCollectionPolicy}}})],a.prototype,"tables",void 0);return a=F=b.__decorate([f.subclass("esri.webdoc.applicationProperties.Search")],
a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(b){b.writeNonEmptyCollectionPolicy=function(a){return{enabled:!!a?.length}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(b,a,h,k,r,p,e){var f;a=f=class extends a.JSONSupport{constructor(m){super(m);this.subLayer=this.id=this.field=null}clone(){return new f(h.clone({field:this.field,id:this.id,subLayer:this.subLayer}))}};b.__decorate([k.property({type:e,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([k.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);b.__decorate([k.property({type:r.Integer,json:{write:!0}})],a.prototype,"subLayer",void 0);return a=f=b.__decorate([p.subclass("esri.webdoc.applicationProperties.SearchLayer")],
a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),function(b,a,h,k,r,p,e,f,m){var u;a=u=class extends a.JSONSupport{constructor(l){super(l);this.exactMatch=!1;this.type=
this.name=null}clone(){return new u({exactMatch:this.exactMatch,type:this.type,name:this.name})}};b.__decorate([h.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([e.enumeration(m.kebabDict)],a.prototype,"type",void 0);return a=u=b.__decorate([f.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),
function(b,a,h,k,r,p,e){var f;a=f=class extends a.JSONSupport{constructor(m){super(m);this.id=this.field=null}clone(){return new f(h.clone({field:this.field,id:this.id}))}};b.__decorate([k.property({type:e,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([k.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=f=b.__decorate([p.subclass("esri.webdoc.applicationProperties.SearchTable")],a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(b,a,h,k,r,p,e,f,m){var u;a=u=class extends a.JSONSupport{constructor(l){super(l);this.exactMatch=!1;this.type=this.name=null}clone(){return new u({exactMatch:this.exactMatch,type:this.type,name:this.name})}};b.__decorate([h.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([e.enumeration(m.kebabDict)],a.prototype,"type",void 0);return a=u=b.__decorate([f.subclass("esri.webdoc.applicationProperties.SearchTableField")],
a)})},"esri/webscene/Environment":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../views/3d/environment/SunnyWeather ../views/3d/environment/weather ./lightingTypes ./SunLighting ./VirtualLighting ./background/utils".split(" "),function(b,a,h,k,r,p,e,f,m,u,l,t,F){var z;const G=k.getLogger("esri.webscene.Environment");k=(H,J,B)=>({enabled:!B||
!B.isPresentation});a=z=class extends a.JSONSupport{constructor(H){super(H);this.lighting=new l;this.background=null;this.starsEnabled=this.atmosphereEnabled=!0}set weather(H){m.validateWeatherType(H?.type,G)&&this._set("weather",H)}clone(){return new z(this.cloneConstructProperties())}cloneConstructProperties(){return{lighting:this.lighting&&"virtual"===this.lighting.type?t.prototype.clone.call(this.lighting):l.prototype.clone.call(this.lighting),background:h.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,
starsEnabled:this.starsEnabled,weather:this.weather.clone()}}};b.__decorate([r.property({types:u.lightingTypes,nonNullable:!0,json:{write:!0}})],a.prototype,"lighting",void 0);b.__decorate([r.property(F.backgroundProperty)],a.prototype,"background",void 0);b.__decorate([r.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:k}}})],a.prototype,"atmosphereEnabled",void 0);b.__decorate([r.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:k}}})],a.prototype,"starsEnabled",
void 0);b.__decorate([r.property({types:m.weatherTypes,nonNullable:!0,json:{write:!0},value:new f})],a.prototype,"weather",null);return a=z=b.__decorate([e.subclass("esri.webscene.Environment")],a)})},"esri/views/3d/environment/SunnyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e,f){var m;a=m=class extends a.JSONSupport{constructor(u){super(u);this.type="sunny";this.cloudCover=.5}clone(){return new m({cloudCover:this.cloudCover})}};b.__decorate([e.enumeration({sunny:"sunny"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);return a=m=b.__decorate([f.subclass("esri.views.3d.environment.SunnyWeather")],a)})},"esri/views/3d/environment/weather":function(){define("exports ./CloudyWeather ./FoggyWeather ./RainyWeather ./SnowyWeather ./SunnyWeather".split(" "),
function(b,a,h,k,r,p){a={key:"type",base:p,typeMap:{sunny:p,cloudy:a,rainy:k,snowy:r,foggy:h}};const e=Object.keys(a.typeMap);b.cloudsHeight=1E5;b.validateWeatherType=function(f,m){return e.includes(f)?!0:(m.error(`"${f}" is not a valid weather type`),!1)};b.weatherHeightLimit=1E4;b.weatherTypes=a;b.weatherTypesArray=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/environment/CloudyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e,f){var m;a=m=class extends a.JSONSupport{constructor(u){super(u);this.type="cloudy";this.cloudCover=.5}clone(){return new m({cloudCover:this.cloudCover})}};b.__decorate([e.enumeration({cloudy:"cloudy"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);return a=m=b.__decorate([f.subclass("esri.views.3d.environment.CloudyWeather")],a)})},"esri/views/3d/environment/FoggyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e,f){var m;a=m=class extends a.JSONSupport{constructor(u){super(u);this.type="foggy";this.fogStrength=.5}clone(){return new m({fogStrength:this.fogStrength})}};b.__decorate([e.enumeration({foggy:"foggy"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"fogStrength",void 0);return a=m=b.__decorate([f.subclass("esri.views.3d.environment.FoggyWeather")],a)})},"esri/views/3d/environment/RainyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e,f){var m;a=m=class extends a.JSONSupport{constructor(u){super(u);this.type="rainy";this.precipitation=this.cloudCover=.5}clone(){return new m({cloudCover:this.cloudCover,precipitation:this.precipitation})}};b.__decorate([e.enumeration({rainy:"rainy"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},
json:{write:!0}})],a.prototype,"precipitation",void 0);return a=m=b.__decorate([f.subclass("esri.views.3d.environment.RainyWeather")],a)})},"esri/views/3d/environment/SnowyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e,f){var m;a=m=class extends a.JSONSupport{constructor(u){super(u);this.type="snowy";this.precipitation=this.cloudCover=.5;this.snowCover="disabled"}clone(){return new m({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};b.__decorate([e.enumeration({snowy:"snowy"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);b.__decorate([h.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"precipitation",void 0);b.__decorate([h.property({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],a.prototype,"snowCover",void 0);return a=m=b.__decorate([f.subclass("esri.views.3d.environment.SnowyWeather")],a)})},"esri/webscene/lightingTypes":function(){define(["exports","./SunLighting","./VirtualLighting"],function(b,a,h){b.lightingTypes={key:"type",defaultKeyValue:"sun",base:null,typeMap:{sun:a,virtual:h}};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/webscene/SunLighting":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),function(b,a,h,k,r,p,e,f,m){var u;a=u=class extends a.JSONSupport{constructor(l){super(l);this.type="sun";this.date=null;this.directShadowsEnabled=
!1;this.displayUTCOffset=null}readDate(l,t){return null!=t.datetime&&new Date(t.datetime)||null}writeDate(l,t,F){t[F]=l.getTime()}readDirectShadowsEnabled(l,t){return!!t.directShadows}writedirectShadowsEnabled(l,t,F){l&&(t[F]=l)}writeDisplayUTCOffset(l,t){null!=l&&(t.displayUTCOffset=l)}clone(){return new u(this.cloneConstructProperties())}cloneConstructProperties(){const l={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=
this.date&&(l.date=new Date(this.date.getTime()));return l}};b.__decorate([h.property({readOnly:!0,type:["sun"],json:{write:!0}})],a.prototype,"type",void 0);b.__decorate([h.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],a.prototype,"date",void 0);b.__decorate([e.reader("date",["datetime"])],a.prototype,"readDate",null);b.__decorate([m.writer("date")],a.prototype,"writeDate",null);b.__decorate([h.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],a.prototype,
"directShadowsEnabled",void 0);b.__decorate([e.reader("directShadowsEnabled",["directShadows"])],a.prototype,"readDirectShadowsEnabled",null);b.__decorate([m.writer("directShadowsEnabled")],a.prototype,"writedirectShadowsEnabled",null);b.__decorate([h.property({type:Number,json:{write:!0}})],a.prototype,"displayUTCOffset",void 0);b.__decorate([m.writer("displayUTCOffset")],a.prototype,"writeDisplayUTCOffset",null);return a=u=b.__decorate([f.subclass("esri.webscene.SunLighting")],a)})},"esri/webscene/VirtualLighting":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e){var f;a=f=class extends a.JSONSupport{constructor(m){super(m);this.type="virtual";this.directShadowsEnabled=!1}clone(){return new f(this.cloneConstructProperties())}cloneConstructProperties(){return{directShadowsEnabled:this.directShadowsEnabled}}};b.__decorate([h.property({readOnly:!0,type:["virtual"],json:{write:!0}})],a.prototype,"type",void 0);b.__decorate([h.property({type:Boolean,json:{default:!1,name:"directShadows",write:!0}})],a.prototype,"directShadowsEnabled",void 0);
return a=f=b.__decorate([e.subclass("esri.webscene.VirtualLighting")],a)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(b,a,h){a={base:a,key:"type",typeMap:{color:h}};a={types:a,json:{read:function(k){return(r,p,e)=>{if(!r)return r;for(const f in k.typeMap)if(r.type===f)return p=new k.typeMap[f],p.read(r,e),p}}(a),write:{overridePolicy:(k,r,p)=>({enabled:!p||!p.isPresentation})}}};b.backgroundProperty=a;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/webscene/background/Background":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,k,r,p,e){a=class extends a.JSONSupport{constructor(f){super(f)}clone(){}};b.__decorate([h.property({readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0);return a=b.__decorate([e.subclass("esri.webscene.background.Background")],
a)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),function(b,a,h,k,r,p,e,f,m,u){var l;k={...m.colorAndTransparencyProperty,nonNullable:!0};u=l=class extends u{constructor(t){super(t);
this.type="color";this.color=new a([0,0,0,1])}clone(){return new l(this.cloneProperties())}cloneProperties(){return{color:this.color.clone()}}};b.__decorate([e.enumeration({color:"color"},{readOnly:!0})],u.prototype,"type",void 0);b.__decorate([h.property(k)],u.prototype,"color",void 0);return u=l=b.__decorate([f.subclass("esri.webscene.background.ColorBackground")],u)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ./Environment".split(" "),
function(b,a,h,k,r,p,e,f,m,u){var l;h=l=class extends h.JSONSupport{constructor(t){super(t);this.environment=new u;this.viewpoint=this.spatialReference=null}set viewingMode(t){this._set("viewingMode",t)}clone(){return new l({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})}};b.__decorate([k.property({type:u,json:{write:{isRequired:!0}}})],h.prototype,"environment",
void 0);b.__decorate([k.property({type:m})],h.prototype,"spatialReference",void 0);b.__decorate([k.property({type:["local","global"]})],h.prototype,"viewingMode",null);b.__decorate([k.property({type:a,json:{write:{isRequired:!0}}})],h.prototype,"viewpoint",void 0);return h=l=b.__decorate([f.subclass("esri.webscene.InitialViewProperties")],h)})},"esri/webscene/Presentation":function(){define("../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(b,a,h,k,r,p,e,f,m,u){const l=a.ofType(u);a=class extends k.JSONSupport{constructor(t){super(t);this.slides=new l}destroy(){this.slides.forEach(t=>t.destroy());this.slides.removeAll()}set slides(t){t&&(t=t.filter(F=>!!F.viewpoint));this._set("slides",h.referenceSetter(t,this._get("slides"),l))}clone(){return new this.constructor({slides:this.slides.clone()})}};b.__decorate([r.property({type:l,nonNullable:!0,json:{write:!0}}),p.cast(h.castForReferenceSetter)],a.prototype,"slides",null);return a=
b.__decorate([m.subclass("esri.webscene.Presentation")],a)})},"esri/webscene/Slide":function(){define("require ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec3 ../chunks/vec3f64 ../layers/Layer ../support/basemapUtils ../views/support/Scheduler ../webdoc/support/SlideThumbnail ./SunLighting ./VirtualLighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(b,a,h,k,r,p,e,f,m,u,l,t,F,z,G,H,J,B,aa,U,W,N,R,fa,S,y,Y,L,T,n,v,x){function M(g){if("building-scene"===g.type||"map-image"===g.type)return g.allSublayers.toArray()}function O(g){if(g=M(g))return g.filter(w=>w.visible).map(w=>w.id)}function la(g,w){g=w-g;43200<g&&(g-=86400);-43200>g&&(g+=86400);return g}let na=0;const ha=p.ofType(v.SlideVisibleLayer);f=class extends f.JSONSupport{constructor(g){super(g);this.id=Date.now().toString(16)+"-slide-"+na++;this.title=new x;this.description=new L;
this.hidden=!1;this.thumbnail=new S.SlideThumbnail;this.ground=this.basemap=this.viewpoint=null;this.environment=new T.SlideEnvironment;this.visibleLayers=new ha}destroy(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail=l.destroyMaybe(this.thumbnail);this.thumbnail=this.title=this.description=null}castTitle(g){return"string"===typeof g?new x({text:g}):aa.ensureType(x,g)}castDescription(g){return"string"===typeof g?new L({text:g}):aa.ensureType(L,g)}castThumbnail(g){return"string"===
typeof g?new S.SlideThumbnail({url:g}):aa.ensureType(S.SlideThumbnail,g)}castBasemap(g){return R.ensureType(g)}set visibleLayers(g){this._set("visibleLayers",e.referenceSetter(g,this._get("visibleLayers"),ha))}castVisibleLayers(g){return g&&"function"===typeof g.map?g.map(w=>{if("string"===typeof w)return{id:w};if(w instanceof N){const D=O(w);return{id:w.id,sublayerIds:D}}if(w.id)return{id:w.id,sublayerIds:"sublayerIds"in w?w.sublayerIds:void 0};m.getLogger(this).warn('Invalid visible layer, expected { id }, Layer or "id"');
return w}):null}clone(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap?.clone()||null,ground:this.ground?.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null,hidden:this.hidden})}async _updateVisibleLayersFrom(g){const w=[];await Promise.allSettled(this._getLayers(g.map).map(D=>
g.whenLayerView(D).then(I=>{if(I.visible){const K=O(D);w.push(new v.SlideVisibleLayer({id:I.layer.id,sublayerIds:K}))}})).toArray());this.visibleLayers.removeAll();this.visibleLayers.addMany(w)}updateFrom(g,w){const D={format:"png",quality:80,width:120,height:75,disableDecorations:!0,...w?.screenshot};return g.when(()=>{this.viewpoint=g.viewpoint.clone();this.environment.lighting="virtual"===g.environment.lighting.type?Y.prototype.clone.apply(g.environment.lighting):y.prototype.clone.apply(g.environment.lighting);
this.environment.weather=g.environment.weather.clone();this.basemap=g.map.basemap&&g.map.basemap.clone()||null;this.ground=g.map.ground?n.fromGround(g.map.ground):null;return this._updateVisibleLayersFrom(g)}).then(()=>g.takeScreenshot(D)).then(I=>{this.thumbnail=new S.SlideThumbnail({url:I.dataUrl});return this})}async applyTo(g,w){null!=this._applyToController&&this._applyToController.abort();let D=new AbortController;this._applyToController=D;const I=t.onAbortOrThrow(w,()=>D?.abort()),K=g.resourceController.scheduler.registerTask(fa.TaskPriority.SLIDE);
let ba=!1;const V={animate:!0,...w,signal:this._applyToController.signal};w=await r.result(g.addUpdatingPromise((async()=>{await Promise.all([K.schedule(async()=>ba=await this._setViewpointOfInterest(g,V)),K.schedule(()=>this._applyBasemap(g,V),V.signal)]);await this._loadLayersWithSublayerVisibility(g);await Promise.all([K.schedule(()=>this._applyLayerVisibility(g),V.signal),K.schedule(()=>this._applyGround(g),V.signal),K.schedule(()=>this._applyViewpoint(g,V),V.signal)]);await K.schedule(()=>g.environment.weather=
this.environment.weather.clone())})()));ba&&(g.contentCamera=null);K.remove();this._applyToController===D&&(this._applyToController=null);D=null;I?.remove();if(!1===w.ok)throw w.error;return this}async _applyBasemap(g,w){if(this.basemap){try{await this.basemap.load(w)}catch(D){if(t.isAbortError(D))throw D;}g.map.basemap=R.clonePreservingTiledLayers(this.basemap,g.map.basemap)}}_applyGround(g){this.ground&&(g.map.ground=this.ground.cloneAndApplyTo(g.map.ground))}_getLayers(g){const w=new p;this._collectLayers(g,
w);this._collectLayers(g.ground,w);return w}_collectLayers(g,w){g.layers.forEach(D=>{D.persistenceEnabled&&(w.add(D),"layers"in D&&this._collectLayers(D,w))})}async _loadLayersWithSublayerVisibility(g){this.visibleLayers&&await Promise.allSettled(this._getLayers(g.map).items.map(w=>this.visibleLayers.find(D=>D.id===w.id)?.sublayerIds?w.load():null))}_applyLayerVisibility(g){this.visibleLayers&&this._getLayers(g.map).forEach(w=>{var D=this.visibleLayers.find(K=>K.id===w.id);w.visible=null!=D;const I=
D?.sublayerIds;D=M(w);I&&D&&D.forEach(K=>K.visible=I.includes(K.id))})}async _setViewpointOfInterest(g,w){if(g.state.fixedContentCamera||!this.viewpoint||w?.ignoreViewpoint||!w?.useDestinationCamera)return!1;({toCameraAsync:w}=await new Promise((D,I)=>b(["../views/3d/support/viewpointUtils"],D,I)));w=await w(g,this.viewpoint);g.contentCamera=w;return null!=w}async _applyViewpoint(g,w){this._applyCachedCameraTrackingEnabled(g);if(this.viewpoint&&!w.ignoreViewpoint){null!=this.viewpoint.camera&&(this.viewpoint.camera.fov=
g.camera.fov);const D=this.environment.lighting;if(w.animate&&"sun"===D.type&&D.date)return this._animateToLighting(g,w);w.animate&&(g.environment.applyLighting(D.clone()),await g.goTo(this.viewpoint,w));g.viewpoint=this.viewpoint}g.environment.applyLighting(this.environment.lighting.clone())}async _animateToLighting(g,w){let D=null;"virtual"!==g.environment.lighting.type&&"virtual"!==this.environment.lighting.type&&("global"===g.viewingMode&&(D=this._animateLightingWithCamera(g,g.environment.lighting,
this.environment.lighting)),g.environment.cachedCameraTrackingEnabled=g.environment.lighting.cameraTrackingEnabled,g.environment.lighting.cameraTrackingEnabled=!1);g.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;"virtual"===this.environment.lighting.type||"virtual"===g.environment.lighting.type?(g.environment.applyLighting(this.environment.lighting.clone()),"virtual"!==g.environment.lighting.type&&(g.environment.cachedCameraTrackingEnabled=g.environment.lighting.cameraTrackingEnabled,
g.environment.lighting.cameraTrackingEnabled=!1)):null!=this.environment.lighting.displayUTCOffset&&(g.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return g.goTo(this.viewpoint,w).then(()=>{this._applyCachedCameraTrackingEnabled(g);g.environment.applyLighting(this.environment.lighting.clone())}).catch(I=>{null==g.animation&&this._applyCachedCameraTrackingEnabled(g);throw I;}).finally(()=>{l.removeMaybe(D)})}_applyCachedCameraTrackingEnabled(g){null!=g.environment.cachedCameraTrackingEnabled&&
(g.environment.lighting.cameraTrackingEnabled=g.environment.cachedCameraTrackingEnabled,g.environment.cachedCameraTrackingEnabled=null)}_getTime(g){const w=g.getTime();g=3600*g.getUTCHours()+60*g.getUTCMinutes()+g.getUTCSeconds();return[w,g]}_setTime(g,w,D){g.setTime(w);g.setUTCHours(D/3600);g.setUTCMinutes(D%3600/60);g.setUTCSeconds(D%3600%60);return g}_animateLightingWithCamera(g,w,D){const [I,K]=this._getTime(new Date(w.date.toString())),[ba,V]=this._getTime(D.date),oa=la(K,V),da=g.renderCoordsHelper,
ca=W.create();da.toRenderCoords(g.camera.position,ca);const ia=W.create(),ja=W.create();null!=this.viewpoint.camera&&da.toRenderCoords(this.viewpoint.camera.position,ia);const ea=new Date;return F.when(()=>g.camera,Z=>{da.toRenderCoords(Z.position,ja);var P=U.squaredDistance(ca,ja);const ma=U.squaredDistance(ia,ja);Z=0;0!==P+ma&&(Z=P/(P+ma));P=I+(ba-I)*Z;Z=u.moduloPositive(K+oa*Z,86400);w.date=this._setTime(ea,P,Z)})}static createFrom(g,w){return(new this).updateFrom(g,w)}};a.__decorate([z.property({type:String,
json:{write:{isRequired:!0}}})],f.prototype,"id",void 0);a.__decorate([z.property({type:x,json:{default:()=>new x({text:""}),write:{isRequired:!0}}})],f.prototype,"title",void 0);a.__decorate([G.cast("title")],f.prototype,"castTitle",null);a.__decorate([z.property({type:L,json:{write:{overridePolicy(g){return{enabled:!(!g||!g.text)}}}}})],f.prototype,"description",void 0);a.__decorate([G.cast("description")],f.prototype,"castDescription",null);a.__decorate([z.property({type:Boolean,nonNullable:!0,
json:{write:!0,default:!1}})],f.prototype,"hidden",void 0);a.__decorate([z.property({type:S.SlideThumbnail,json:{default:()=>new S.SlideThumbnail({url:""}),write:{isRequired:!0}}})],f.prototype,"thumbnail",void 0);a.__decorate([G.cast("thumbnail")],f.prototype,"castThumbnail",null);a.__decorate([z.property({type:k,nonNullable:!0,json:{write:{isRequired:!0}}})],f.prototype,"viewpoint",void 0);a.__decorate([z.property({type:h,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],f.prototype,"basemap",
void 0);a.__decorate([G.cast("basemap")],f.prototype,"castBasemap",null);a.__decorate([z.property({type:n,json:{write:!0}})],f.prototype,"ground",void 0);a.__decorate([z.property({type:ha,json:{write:{isRequired:!0}}})],f.prototype,"visibleLayers",null);a.__decorate([G.cast("visibleLayers")],f.prototype,"castVisibleLayers",null);a.__decorate([z.property({type:T.SlideEnvironment,json:{write:!0}})],f.prototype,"environment",void 0);return f=a.__decorate([B.subclass("esri.webscene.Slide")],f)})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(b,a,h,k,r,p,e,f,m,u,l,t,F,z){function G(y){return H.has(y)?H.get(y):"number"===typeof y?y:1}b.Task=void 0;(function(y){y[y.YIELD=1]="YIELD"})(b.Task||(b.Task={}));b.TaskPriority=void 0;(function(y){y.RESOURCE_CONTROLLER_IMMEDIATE="immediate";y.RESOURCE_CONTROLLER="schedule";y.SLIDE="slide";y.STREAM_DATA_LOADER="stream loader";y.ELEVATION_QUERY="elevation query";y.TERRAIN_SURFACE="terrain";y.SURFACE_GEOMETRY_UPDATES="surface geometry updates";y.LOD_RENDERER="LoD renderer";y.GRAPHICS_CORE=
"Graphics3D";y.I3S_CONTROLLER="I3S";y.POINT_CLOUD_LAYER="point cloud";y.FEATURE_TILE_FETCHER="feature fetcher";y.OVERLAY="overlay";y.STAGE="stage";y.GRAPHICS_DECONFLICTOR="graphics deconflictor";y.FILTER_VISIBILITY="Graphics3D filter visibility";y.SCALE_VISIBILITY="Graphics3D scale visibility";y.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";y.POINT_OF_INTEREST_FREQUENT="POI frequent";y.POINT_OF_INTEREST_INFREQUENT="POI infrequent";y.LABELER="labeler";y.FEATURE_QUERY_ENGINE="feature query";y.FEATURE_TILE_TREE=
"feature tile tree";y.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";y.ELEVATION_ALIGNMENT="elevation alignment";y.TEXT_TEXTURE_ATLAS="text texture atlas";y.TEXTURE_UNLOAD="texture unload";y.LINE_OF_SIGHT_TOOL="line of sight tool";y.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";y.ELEVATION_PROFILE="elevation profile";y.SNAPPING="snapping";y.SHADOW_ACCUMULATOR="shadow accumulator";y.CLOUDS_GENERATOR="clouds generator";y[y.NONE=0]="NONE";y[y.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||
(b.TaskPriority={}));const H=new Map([[b.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[b.TaskPriority.RESOURCE_CONTROLLER,4],[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.LOD_RENDERER,2],[b.TaskPriority.GRAPHICS_CORE,2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.OVERLAY,
4],[b.TaskPriority.STAGE,4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.CLOUDS_GENERATOR,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,30]]),J=l.Milliseconds(6.5),B=l.Milliseconds(1),aa=l.Milliseconds(30),U=l.Milliseconds(1E3/30),W=l.Milliseconds(100);var N;(function(y){class Y{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(n=>n.needsUpdate)}constructor(){this._updating=u.signal(!0);this._microTaskQueued=
!1;this._frameNumber=0;this.performanceInfo={total:new p("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new T;this._state=z.RenderState.INTERACTING;this._tasks=new e;this._runQueue=new e;this._load=0;this._idleStateCallbacks=new e;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=m.watch(()=>F.SCHEDULER_LOG_SLOW_TASKS,v=>this._debug=v,m.initial);for(const v of Object.keys(b.TaskPriority))this.performanceInfo.tasks.set(b.TaskPriority[v],new p(b.TaskPriority[v]));
const n=this;this._test={FRAME_SAFETY_BUDGET:J,INTERACTING_BUDGET:U,IDLE_BUDGET:W,get availableBudget(){return n._budget.budget},usedBudget:0,getBudget:()=>n._budget,setBudget:v=>n._budget=v,updateTask:v=>this._updateTask(v),getState:v=>this._getState(v),getRuntime:v=>this._getRuntime(v),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(n=>n.remove());this._tasks.clear();r.removeMaybe(this._debugHandle);
this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(n){this._updatingChanged();n&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(n,v){const x=G(n);v=new L(this,n,v,x);this._tasks.push(v);this._updatingChanged();this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new p(n));return v}registerIdleStateCallbacks(n,
v){const x={idleBegin:n,idleEnd:v};this._idleStateCallbacks.push(x);this.state===z.RenderState.IDLE&&this._idleUpdatesStartFired&&x.idleBegin();const M=this;return{remove:()=>this._removeIdleStateCallbacks(x),set idleBegin(O){M._idleUpdatesStartFired&&(x.idleEnd(),M._state===z.RenderState.IDLE&&O());x.idleBegin=O},set idleEnd(O){x.idleEnd=O}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==z.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=
!1,this._idleStateCallbacks.forAll(v=>v.idleEnd())))}get state(){return this._state}updateBudget(n){this._test.usedBudget=0;++this._frameNumber;let v=J,x=n.frameDuration,M=B;switch(this.state){case z.RenderState.IDLE:v=l.Milliseconds(0);x=l.Milliseconds(Math.max(W,n.frameDuration));M=aa;break;case z.RenderState.INTERACTING:x=l.Milliseconds(Math.max(U,n.frameDuration))}x=l.Milliseconds(x-n.elapsedFrameTime-v);if(this.state!==z.RenderState.IDLE&&x<B&&!this._forceTask)return this._forceTask=!0,!1;x=
l.Milliseconds(Math.max(x,M));this._budget.reset(x,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case z.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin()));this._runIdle();break;case z.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(l.Milliseconds(0),
this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd();this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n);this._runQueue.removeUnordered(n);this._updatingChanged()}_updateTask(n){this._tasks.forAll(v=>{v.name===n&&v.setPriority(n)})}_getState(n){if(this._runQueue.some(x=>x.name===n))return b.TaskState.SCHEDULED;let v=b.TaskState.IDLE;this._tasks.forAll(x=>{x.name===n&&x.needsUpdate&&(1>=x.schedulePriority?
v=b.TaskState.READY:v!==b.TaskState.READY&&(v=b.TaskState.WAITING))});return v}_getRuntime(n){let v=0;this._tasks.forAll(x=>{x.name===n&&(v+=x.runtime)});return v}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;this._tasks.forAll(x=>{x.needsUpdate&&n.set(x.name,(n.get(x.name)||0)+1)});if(0===n.size)return null;let v="";n.forEach((x,M)=>{v=1<x?v+` ${x}x ${M}`:v+` ${M}`});return v}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=
this._tasks.reduce((v,x)=>x.needsUpdate?++v:v,0);this._load=.9*this._load+n*(1-.9)}_schedule(){this._runQueue.filterInPlace(n=>{if(n.needsUpdate)return!0;n.schedulePriority=n.basePriority;return!1});for(this._tasks.forAll(n=>{0===n.basePriority&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)});0===this._runQueue.length;){let n=!1;this._tasks.forAll(v=>{if(v.needsUpdate&&0!==v.schedulePriority&&0!==v.basePriority&&v.blockFrame!==this._frameNumber)switch(n=
!0,v.schedulePriority){case 1:v.schedulePriority=0;this._runQueue.push(v);break;default:--v.schedulePriority}});if(!n)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var v=this._budget.now();const x=this._runQueue.pop();this._budget.resetProgress();try{x.task.runTask(this._budget)===b.Task.YIELD&&(x.blockFrame=this._frameNumber)}catch(M){k.getLogger("esri.views.support.Scheduler").error(`Exception in task "${x.name}"`,
M),x.blockFrame=this._frameNumber}!this._budget.hasProgressed&&x.blockFrame!==this._frameNumber&&x.needsUpdate&&(x.blockFrame=this._frameNumber);x.schedulePriority=x.basePriority;v=this._budget.now()-v;x.runtime+=v;this._frameTaskTimes.set(x.priority,this._frameTaskTimes.get(x.priority)+v);this._debug&&v>2*this._budget.budget&&console.log("Task",x.name,"used",v,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-n);
return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((v,x)=>this.performanceInfo.tasks.get(x).record(v));this.performanceInfo.total.record(n)}get test(){return this._test}}y.Scheduler=Y;class L{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,
v,x,M){this._scheduler=n;this.name=v;this._basePriority=M;this.runtime=this.blockFrame=0;this._queue=new t.PromiseQueue;this._handles=new a;this.schedulePriority=this._basePriority;this._task=u.signal(null!=x?x:this._queue);this._handles.add(m.when(()=>this.task.running,O=>n.taskRunningChanged(O)))}remove(){this.processQueue(R);this._scheduler.removeTask(this);this.schedule=S.schedule;this.reschedule=S.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){this.name=
n;n=G(n);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=n;this._basePriority=n}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,v,x){return this._queue.push(n,v,x)}reschedule(n,v,x){return this._queue.unshift(n,v,x)}processQueue(n){this._queue.runTask(n)}}class T{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=z.RenderState.IDLE;
this._progressed=this._done=!1;this._enabled=!0}run(n){if(this.done)return!1;!0===n()&&this.madeProgress();return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n,v){this._begin=this.now();this._budget=n;this._state=v;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,
0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=this._progressed=!1}get hasProgressed(){return this._progressed}}y.Budget=T})(N||(N={}));b.TaskState=void 0;(function(y){y.SCHEDULED="s";y.READY="r";y.WAITING="w";y.IDLE="i"})(b.TaskState||(b.TaskState={}));const R=(()=>{const y=new N.Budget;y.enabled=!1;return y})();class fa{remove(){}processQueue(){}schedule(y,Y,L){try{if(f.isAborted(Y)){const T=f.createAbortError();return L?Promise.resolve(L(T)):
Promise.reject(T)}return f.when(y(R))}catch(T){return Promise.reject(T)}}reschedule(y,Y,L){return this.schedule(y,Y,L)}}const S=new fa;b.ImmediateTask=S;b.getTaskPriority=G;b.newScheduler=function(){return new N.Scheduler};b.noBudget=R;b.taskPriorities=H;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal"],function(b,a,h){class k{constructor(){this._tasks=[];this._running=h.signal(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(p){for(;!p.done&&
this._process(p);)p.madeProgress()}push(p,e,f){this._running.value=!0;return new Promise((m,u)=>this._tasks.push(new r(m,u,p,e,f)))}unshift(p,e,f){this._running.value=!0;return new Promise((m,u)=>this._tasks.unshift(new r(m,u,p,e,f)))}_process(p){if(0===this._tasks.length)return!1;const e=this._tasks.shift();try{const f=a.isAborted(e.signal);if(f&&!e.abortCallback)e.reject(a.createAbortError());else{const m=f?e.abortCallback?.(a.createAbortError()):e.callback(p);a.isPromiseLike(m)?m.then(e.resolve,
e.reject):e.resolve(m)}}catch(f){e.reject(f)}this._running.value=0<this._tasks.length;return!0}cancelAll(){const p=a.createAbortError();for(const e of this._tasks)if(e.abortCallback){const f=e.abortCallback(p);e.resolve(f)}else e.reject(p);this._tasks.length=0;this._running.value=!1}}class r{constructor(p,e,f,m,u){this.resolve=p;this.reject=e;this.callback=f;this.signal=m;this.abortCallback=u}}b.PromiseQueue=k;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e){a=class extends a{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=!1}};b.__decorate([h.property()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([h.property()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);a=b.__decorate([e.subclass("esri.views.support.DebugFlags")],a);return new a})},"esri/views/support/RenderState":function(){define(["exports"],function(b){b.RenderState=
void 0;var a=b.RenderState||(b.RenderState={});a[a.ANIMATING=0]="ANIMATING";a[a.INTERACTING=1]="INTERACTING";a[a.IDLE=2]="IDLE";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,k,r,
p,e,f){var m;b.SlideThumbnail=m=class extends h.JSONSupport{constructor(){super(...arguments);this.url=""}destroy(){this.url=""}clone(){return new m({url:this.url})}};a.__decorate([k.property({type:String,json:{write:{isRequired:!0}}})],b.SlideThumbnail.prototype,"url",void 0);b.SlideThumbnail=m=a.__decorate([f.subclass("esri.webdoc.support.SlideThumbnail")],b.SlideThumbnail);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Description":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e){var f;a=f=class extends a.JSONSupport{constructor(){super(...arguments);this.text=""}clone(){return new f({text:this.text})}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);return a=f=b.__decorate([e.subclass("esri.webscene.support.Description")],a)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ../lightingTypes ../SunLighting".split(" "),
function(b,a,h,k,r,p,e,f,m,u,l){var t;b.SlideEnvironment=t=class extends h.JSONSupport{constructor(){super(...arguments);this.lighting=new l;this.weather=new f}clone(){return new t({lighting:k.clone(this.lighting),weather:k.clone(this.weather)})}};a.__decorate([r.property({types:u.lightingTypes,json:{write:!0}})],b.SlideEnvironment.prototype,"lighting",void 0);a.__decorate([r.property({types:m.weatherTypes,json:{write:!0}})],b.SlideEnvironment.prototype,"weather",void 0);b.SlideEnvironment=t=a.__decorate([e.subclass("esri.webscene.Environment")],
b.SlideEnvironment);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),function(b,a,h,k,r,p,e,f,m){var u;h=u=class extends h.JSONSupport{constructor(){super(...arguments);
this.opacity=null}clone(){return new u({opacity:this.opacity})}cloneAndApplyTo(l){if(null==this.opacity)return l;l=l?.clone()??new a;l.opacity=this.opacity;return l}static fromGround(l){return new u({opacity:l.opacity})}};b.__decorate([k.property({type:Number,json:{type:r.Integer,read:{reader:m.transparencyToOpacity,source:"transparency"},write:{writer:(l,t)=>{t.transparency=m.opacityToTransparency(l)},target:"transparency"}}})],h.prototype,"opacity",void 0);return h=u=b.__decorate([f.subclass("esri.webscene.support.SlideGround")],
h)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,k,r,p,e){var f;b.SlideVisibleLayer=f=class extends h.JSONSupport{constructor(m){super(m);this.id="";this.sublayerIds=null}clone(){return new f({id:this.id,sublayerIds:k.clone(this.sublayerIds)})}};a.__decorate([r.property({type:String,
json:{write:!0}})],b.SlideVisibleLayer.prototype,"id",void 0);a.__decorate([r.property({type:[p.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],b.SlideVisibleLayer.prototype,"sublayerIds",void 0);b.SlideVisibleLayer=f=a.__decorate([e.subclass("esri.webscene.support.SlideVisibleLayer")],b.SlideVisibleLayer);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Title":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e){var f;a=f=class extends a.JSONSupport{constructor(){super(...arguments);this.text=""}clone(){return new f({text:this.text})}};b.__decorate([h.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"text",void 0);return a=f=b.__decorate([e.subclass("esri.webscene.support.Title")],a)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,k,r,p,e){var f;a=f=class extends a.JSONSupport{constructor(m){super(m)}clone(){return new f({name:this.name,path:this.path,title:this.title})}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"path",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=f=b.__decorate([e.subclass("esri.webscene.TransportationNetwork")],a)})},"esri/webscene/Version":function(){define(["exports",
"../core/Version"],function(b,a){class h extends a.Version{constructor(k,r){super(k,r,"webscene")}get supportsGround(){return this.since(1,8)}get supportsVisibleElevationLayersInSlides(){return this.lessThan(1,8)}}b.Version=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/schemaValidatorLoader":function(){define(["exports"],function(b){let a=null;b.getLoader=function(){return a};b.registerLoader=function(h){a=h};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"*noref":1}});
define("require ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./portal/support/portalItemUtils ./support/basemapUtils ./support/MapFloorInfo ./support/tagSymbols ./support/webSceneUtils ./views/ViewingMode ./views/support/spatialReferenceSupport ./webdoc/interfaces ./webdoc/saveAPIKeyUtils ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version ./webscene/support/schemaValidatorLoader".split(" "),function(b,
a,h,k,r,p,e,f,m,u,l,t,F,z,G,H,J,B,aa,U,W,N,R,fa,S,y,Y,L,T,n,v,x,M,O,la,na,ha,g,w,D,I,K,ba,V,oa,da,ca,ia,ja,ea,Z){const P=new ea.Version(1,32);k=class extends m.LoadableMixin(z.EsriPromiseMixin(F.MultiOriginJSONMixin(k))){constructor(c){super(c);this[ma]=!0;this._layersIdGCTimeoutId=void 0;this.clippingArea=this.applicationProperties=this._updateFromPromise=null;this.clippingEnabled=!1;this.floorInfo=null;this.heightModelInfo=void 0;this.transportationNetworks=this.sourceVersion=null;this.presentation=
new ia;this.initialViewProperties=new ca;this.resourceInfo=this.portalItem=null;this._debouncedSaveOperations=G.debounce(async(d,q,A)=>{switch(d){case I.SaveOperationType.SAVE:return this._saveImpl(q);case I.SaveOperationType.SAVE_AS:return this._saveAsImpl(A,q)}});this._resourceReferences={portalItem:null,paths:[]};this.authoringAppVersion=this.authoringApp=null;this._isAuthoringAppVersionSetByUser=this._isAuthoringAppSetByUser=!1}initialize(){this.when().catch(c=>{l.getLogger(this).error("#load()",
"Failed to load web scene",c)});if(this.resourceInfo){let c;try{c=this._validateJSON(this.resourceInfo)}catch(d){this.addResolvingPromise(Promise.reject(d));return}this.read(c);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this.addHandles(H.on(()=>this.allLayers,"change",()=>this._scheduleLayersIdGC()))}destroy(){this._unscheduleLayersIdGC();this.presentation&&this.presentation.destroy();this.portalItem=t.destroyMaybe(this.portalItem)}writeClippingArea(c,
d){d.clippingArea||(d.clippingArea={});d.clippingArea.geometry=c.toJSON()}readClippingEnabled(c,d){return d.clippingArea?!!d.clippingArea.clip:!1}writeClippingEnabled(c,d){this.clippingArea&&(d.clippingArea||(d.clippingArea={}),d.clippingArea.clip=c)}writeLayers(c,d,q,A){d[q]=this._layersToJSON(c,"operational-layers",A)}readSourceVersion(c,d){const [q,A]=d.version.split(".");return new ea.Version(parseInt(q,10),parseInt(A,10))}writeSourceVersion(c,d,q){d[q]=`${P.major}.${P.minor}`}writeTables(c,d,
q,A){c=this._layersToJSON(c,"tables",A);c.length&&(d[q]=c)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl??null}set thumbnailUrl(c){c?this._override("thumbnailUrl",c):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}set authoringApp(c){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",c)}writeAuthoringApp(c,d){d.authoringApp=c&&this._isAuthoringAppSetByUser?c:"ArcGIS API for JavaScript"}set authoringAppVersion(c){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",
c)}writeAuthoringAppVersion(c,d){d.authoringAppVersion=c&&this._isAuthoringAppVersionSetByUser?c:h.version}writeGround(c,d,q,A){d[q]=c?c.write({},A):{transparency:0,layers:[]}}readInitialViewProperties(c,d){c={};d.initialState?.environment&&(c.environment=da.fromJSON(d.initialState.environment));c.spatialReference=d.spatialReference?L.fromJSON(d.spatialReference):L.WebMercator;c.viewingMode=d.viewingMode??"global";d.initialState?.viewpoint&&(c.viewpoint=r.fromJSON(d.initialState.viewpoint));return new ca(c)}get spatialReference(){return this.initialViewProperties?.spatialReference??
L.WebMercator}get viewingMode(){return this.initialViewProperties?.viewingMode??"global"}load(c){const d=this.ground;this.addResolvingPromise(this._loadFromSource().then(()=>{d&&d!==this.ground&&d.destroy()}));return Promise.resolve(this)}loadAll(){return u.loadAll(this,c=>{const d=this.presentation&&this.presentation.slides;c(this.ground,this.basemap,this.layers,d&&d.map(q=>q.basemap),this.tables)})}read(c,d){d={...d,origin:"web-scene"};const q=this._isAuthoringAppVersionSetByUser,A=this._isAuthoringAppSetByUser;
fa.readLoadable(this,c,E=>super.read(c,E),d);A||(this._isAuthoringAppSetByUser=!1);q||(this._isAuthoringAppVersionSetByUser=!1);if(c.baseMap&&Array.isArray(c.baseMap.elevationLayers)&&(this.sourceVersion?.supportsVisibleElevationLayersInSlides??!1)){d=c.baseMap.elevationLayers.map(Q=>({id:Q.id}));const E=this.presentation.slides,C=(Q,ka)=>Q.visibleLayers.some(pa=>pa.id===ka),X=d.filter(Q=>!E.some(ka=>C(ka,Q.id)));E.forEach(Q=>{Q.visibleLayers.addMany(X)})}}_writeBasemapElevationLayers(c){const d=
c.ground?.layers;!c.baseMap&&d?.length&&(c.baseMap={title:"Basemap",baseMapLayers:[]});c.baseMap&&(c.baseMap.elevationLayers=f.clone(d))}_layersToJSON(c,d,q){const A={...q,layerContainerType:d};return c.map(E=>this._verifyWritableLayer(E,q)?E.write({},A):null).filter(E=>!!E).toArray()}_verifyWritableLayer(c,d){return c.persistenceEnabled?"write"in c?!0:(d?.messages&&d.messages.push(new e("layer:unsupported",`Layers (${c.title}, ${c.id}) of type '${c.declaredClass}' cannot be persisted in web scenes`,
{layer:c})),!1):!1}write(c,d){if("loaded"!==this.loadStatus)throw d=new e("webscene:not-loaded","Web scene must be loaded before it can be serialized"),l.getLogger(this).error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),d;this._runLayersIdGC();var q=!d?.messages;d={messages:[],...d,origin:"web-scene"};c=super.write(c,d);if(q&&(d=d.messages?.filter(A=>"web-document-write:property-required"===A.name)??[],d.length))throw q=new e("web-document:property-required",
"One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:d}),l.getLogger(this).error("#toJSON()","One or more properties that are required in the webscene JSON are missing",d),q;this._writeBasemapElevationLayers(c);return c}async save(c){return this._debouncedSaveOperations(I.SaveOperationType.SAVE,c)}async _saveImpl(c){if(!this.portalItem)throw new e("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene");
K.validateSaveAPIKey(this.portalItem);if("Web Scene"!==this.portalItem?.type)throw new e("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"');const d=this._updateFromPromise;await this._ensureLoadBeforeSave();const q=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl?J.urlToObject(this.portalItem.itemUrl):null,messages:[],portal:this.portalItem.portal??x.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],
toUpdate:[],toKeep:[],pendingOperations:[]}}),A=this.write({},q);await Promise.all(q.resources.pendingOperations);await this._verifySave(A,q,c);this._updateTypeKeywords(this.portalItem);await ba.updateItemWithResources(this.portalItem,A,this._resourceReferences,q,null);R.updateOrigins(q);d&&await d;await this._saveThumbnail();return this.portalItem}async saveAs(c,d){return this._debouncedSaveOperations(I.SaveOperationType.SAVE_AS,d,c)}async _saveAsImpl(c,d){c=M.from(c);if(!c)throw new e("webscene:portal-item-required",
"saveAs requires a portal item to save to");K.validateSaveAPIKey(c);c.id&&(c=c.clone(),c.id=null);const q=c.portal||x.getDefault();await this._ensureLoadBeforeSave();c.type="Web Scene";c.portal=q;const A=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:q,portalItem:c,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),E=this.write({},A);await Promise.all(A.resources.pendingOperations);await this._verifySaveAs(E,
A,d);const C=this.thumbnailUrl,X=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(c);await q.signIn();if(!q.user)throw new e("webscene:user-not-signed-in","saveAs requires a user to be signed in to the portal");await q.user.addItem({item:c,folder:d?.folder,data:E});await ba.saveResources(this._resourceReferences,A,null);this.portalItem=c;F.MultiOriginJSONSupport.prototype.read.call(this,{version:E.version,authoringApp:E.authoringApp,authoringAppVersion:E.authoringAppVersion},{name:"web-scene",
ignoreDefaults:!0,url:c.itemUrl?J.urlToObject(c.itemUrl):void 0});R.updateOrigins(A);C&&(this.thumbnailUrl=X?J.addQueryParameter(C,"w","8192"):C);A.portalItem=c;await this._saveThumbnail();return c}async _saveThumbnail(){this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}_verifySave(c,d,q,A=!1){if(!v.isEarth(this.spatialReference))return Promise.reject(new e("webscene:unsupported-spatial-reference",
"Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));let E=d.messages?.filter(C=>"error"===C.type).map(C=>new e(C.name,C.message,C.details))??[];d.blockedRelativeUrls&&(E=E.concat(d.blockedRelativeUrls.map(C=>new e("url:unsupported",`Relative url '${C}' is not supported in Web Scene`))));q&&q.ignoreUnsupported&&(E=E.filter(C=>"layer:unsupported"!==C.name&&"symbol:unsupported"!==C.name&&"symbol-layer:unsupported"!==C.name&&"property:unsupported"!==C.name&&"url:unsupported"!==
C.name&&"scenemodification:unsupported"!==C.name));q?.requiredPropertyChecksDisabled&&(E=E.filter(C=>"web-document-write:property-required"!==C.name));d=!!q?.strictSchemaValidationEnabled;q=Z.getLoader();return(d&&q?q().then(C=>{C=C.validate(c);if(0<C.length){const X=`webscene did not validate:\n${C.join("\n")}`;l.getLogger(this).error(`${A?"saveAs":"save"}(): ${X}`)}return C.map(X=>new e("webscene:schema-validation",X))}).then(C=>{if(0<C.length)throw g.createSchemaValidationError(C.concat(E));return E}):
Promise.resolve(E)).then(C=>{if(0<C.length)throw new e("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:C});})}_verifySaveAs(c,d,q){return this.canNotSaveAs(d)?Promise.reject(g.createCopyError()):this._verifySave(c,d,q,!0)}verifySaveAs(c){const d=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),q=this.write({},d);return this._verifySaveAs(q,d,c)}canNotSaveAs(c){c||(c=this._enableVerifyItemRelativeUrls({origin:"web-scene",
messages:[]}),this.write({},c));return 0<(c.verifyItemRelativeUrls?.writtenUrls?.length??0)}async updateFrom(c,d={}){this._updateFromPromise=c=this._updateFrom(c,d);await c;this._updateFromPromise===c&&(this._updateFromPromise=null)}async _updateFrom(c,d={}){await c.whenReady();!d.environmentExcluded&&c.environment&&(this.initialViewProperties.environment=da.prototype.clone.apply(c.environment));!d.viewpointExcluded&&c.viewpoint&&(this.initialViewProperties.viewpoint=c.viewpoint.clone());this.initialViewProperties.spatialReference=
c.spatialReference.clone();this.initialViewProperties.viewingMode=c.viewingMode;null!=c.clippingArea?c.clippingArea!==this.clippingArea&&(this.clippingArea=c.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;c.heightModelInfo&&(this.heightModelInfo=c.heightModelInfo.clone());if(c.map===this)for(const q of c.allLayerViews)"visible"in q&&"visible"in q.layer&&q._isOverridden("visible")&&(q.layer.visible=q.visible);(!1===d.thumbnailExcluded||null==d.thumbnailExcluded&&!d.viewpointExcluded)&&
await this._updateFromThumbnail(c,d.thumbnailSize??void 0)}async _updateFromThumbnail(c,d){d=V.getOptimalThumbnailSize(c,d);this.thumbnailUrl=(await c.takeScreenshot({format:"jpg",width:d.width,height:d.height,disableDecorations:!0})).dataUrl}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem?.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()}_readAndLoadFromJSON(c,d){c=this._validateJSON(c);this.read(c,d);return this._loadFromJSON(c,
d)}_extractOperationalLayers(c){const d=[];if(!this.sourceVersion?.supportsGround&&c.baseMap&&Array.isArray(c.baseMap.elevationLayers))for(const E of c.baseMap.elevationLayers)d.push(E);const q=[],A=E=>{E.layers&&(E.layers=E.layers.filter(A));return"ArcGISTiledElevationServiceLayer"===E.layerType?(this.sourceVersion?.supportsGround||q.push(E),!1):!0};return{operationalLayers:c.operationalLayers?c.operationalLayers.filter(A):[],operationalElevationLayers:q,basemapElevationLayers:d}}async _loadFromJSON(c,
d){const q=new p;await this._validateSpatialReference();await this._validateHeightModelInfo();const {populateOperationalLayers:A}=await new Promise((ka,pa)=>b(["./layers/support/layersCreator"],ka,pa)),{operationalLayers:E,operationalElevationLayers:C,basemapElevationLayers:X}=this._extractOperationalLayers(c),Q=[];d={context:{...d,layerContainerType:"operational-layers"}};this.portalItem&&(d.context.portal=this.portalItem.portal||x.getDefault());0<X.length&&Q.push(A(this.ground.layers,X,{...d,context:{...d.context,
layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<C.length&&Q.push(A(q,C,{...d,context:{...d.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));E&&0<E.length&&Q.push(A(this.layers,E,d));c.tables?.length&&Q.push(A(this.tables,c.tables,{...d,context:{...d.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"}));await Promise.allSettled(Q);await this._loadObjectsWithLayers();this.ground.layers.addMany(q)}async _ensureLoadBeforeSave(){await this.load();
await this._loadObjectsWithLayers();const c=[];var d=[...this.allLayers.items];for(const {basemap:q}of this.presentation.slides.items)q&&(d.push(...q.baseLayers.items),d.push(...q.referenceLayers.items));for(const q of d)"beforeSave"in q&&"function"===typeof q.beforeSave&&(d=q.beforeSave())&&c.push(d);await Promise.allSettled(c)}async _loadObjectsWithLayers(){const c=[];this.ground&&c.push(this.ground.load());this.basemap&&c.push(this.basemap.load());this.presentation.slides.forEach(d=>{d.basemap&&
c.push(d.basemap.load())});await Promise.allSettled(c)}async _loadFromItem(c){await c.load().catch(A=>{throw new e("webscene:load-portal-item","Failed to load portal item",{error:A});});if("Web Scene"!==c.type)throw new e("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:c.type});const d=await c.fetchData();this.resourceInfo=d;const q={origin:"web-scene",url:J.urlToObject(c.itemUrl),portal:c.portal||x.getDefault(),portalItem:c,readResourcePaths:[]};await this._readAndLoadFromJSON(d,
q);this._resourceReferences={portalItem:c,paths:q.readResourcePaths??[]}}_validateSpatialReference(){const c=this.initialViewProperties,d=this._sceneSpatialReference;let q=void 0;if("local"!==c.viewingMode){if(!D.isSpatialReferenceSupported(d,w.ViewingMode.Global))return Promise.reject(new e("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:d,viewingMode:c.viewingMode}));
q=C=>!C||Y.canProjectWithoutEngine(C,d)}else{if(!D.isSpatialReferenceSupported(d,w.ViewingMode.Local))return Promise.reject(new e("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:d,viewingMode:c.viewingMode}));q=C=>!C||C.equals(d)}const A=C=>C?.camera?.position.spatialReference??C?.targetGeometry?.spatialReference;var E=A(c.viewpoint);return E&&!q(E)?Promise.reject(new e("webscene:incompatible-camera-spatial-reference",
"Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:E,sceneSpatialReference:d,viewingMode:c.viewingMode})):(E=this.presentation.slides.find(C=>!q(A(C.viewpoint))))?(E=A(E.viewpoint),Promise.reject(new e("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",
{slideSpatialReference:E,sceneSpatialReference:d,viewingMode:c.viewingMode}))):Promise.resolve()}_validateHeightModelInfo(){const c=T.validateWebSceneError(this.heightModelInfo,this._sceneSpatialReference);return c?Promise.reject(c):Promise.resolve()}_validateJSON(c){const d=ea.Version.parse(c.version||"","webscene");P.validate(d);c.version=`${d.major}.${d.minor}`;1===d.major&&2>=d.minor&&(c.spatialReference=L.WebMercator.toJSON());return c}_updateTypeKeywords(c){O.toggleTypeKeword(c,O.TypeKeyword.LOCAL_SCENE,
"local"===this.initialViewProperties.viewingMode);O.toggleTypeKeword(c,O.TypeKeyword.DEVELOPER_BASEMAP,la.hasDeveloperBasemapLayer(this.basemap)||this.presentation.slides.some(({basemap:d})=>!!d&&la.hasDeveloperBasemapLayer(d)));c.typeKeywords&&(c.typeKeywords=c.typeKeywords.filter((d,q,A)=>A.indexOf(d)===q))}get _sceneSpatialReference(){return this.initialViewProperties.spatialReference||L.WebMercator}get _verifyItemRelativeRootPath(){return this.portalItem?.itemUrl?J.urlToObject(this.portalItem.itemUrl).path:
null}_enableVerifyItemRelativeUrls(c){const d=this._verifyItemRelativeRootPath;d&&(c.verifyItemRelativeUrls={rootPath:d,writtenUrls:[]});return c}_unscheduleLayersIdGC(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)}_scheduleLayersIdGC(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)}_runLayersIdGC(){this._unscheduleLayersIdGC();var c=this.applicationProperties?.viewing?.search;
const d=q=>this.allLayers.some(A=>A.id===q&&A.persistenceEnabled);c&&c.layers&&(c.layers=c.layers.filter(q=>d(q.id)));(c=this.presentation&&this.presentation.slides)&&c.forEach(q=>{q.visibleLayers&&(q.visibleLayers=q.visibleLayers.filter(A=>d(A.id)))})}static fromJSON(c){if(!c)throw new e("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:c})}};var ma=ha.WebSceneTag;k.version=`${P.major}.${P.minor}`;a.__decorate([B.property({type:oa,json:{write:!0}})],
k.prototype,"applicationProperties",void 0);a.__decorate([B.property({type:S,json:{read:{source:"clippingArea.geometry",reader:n.fromJSON},write:{target:"clippingArea.geometry"}}})],k.prototype,"clippingArea",void 0);a.__decorate([N.writer("clippingArea")],k.prototype,"writeClippingArea",null);a.__decorate([B.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],k.prototype,"clippingEnabled",void 0);a.__decorate([U.reader("clippingEnabled",["clippingArea"])],k.prototype,"readClippingEnabled",
null);a.__decorate([N.writer("clippingEnabled")],k.prototype,"writeClippingEnabled",null);a.__decorate([B.property({type:na,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],k.prototype,"floorInfo",void 0);a.__decorate([B.property({type:y,json:{write:!0}})],k.prototype,"heightModelInfo",void 0);a.__decorate([B.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],k.prototype,"layers",void 0);a.__decorate([N.writer("layers")],k.prototype,"writeLayers",null);a.__decorate([B.property({readOnly:!0,
type:ea.Version,json:{type:(()=>{const c=[],d=P.major;for(let q=8;q<=P.minor;q++)c.push(`${d}.${q}`);return c})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],k.prototype,"sourceVersion",void 0);a.__decorate([U.reader("sourceVersion",["version"])],k.prototype,"readSourceVersion",null);a.__decorate([N.writer("sourceVersion")],k.prototype,"writeSourceVersion",null);a.__decorate([B.property({json:{read:!1,write:{enabled:!0,
ignoreOrigin:!0}}})],k.prototype,"tables",void 0);a.__decorate([N.writer("tables")],k.prototype,"writeTables",null);a.__decorate([B.property()],k.prototype,"thumbnailUrl",null);a.__decorate([B.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],k.prototype,"authoringApp",null);a.__decorate([N.writer("authoringApp")],k.prototype,"writeAuthoringApp",null);a.__decorate([B.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],k.prototype,"authoringAppVersion",
null);a.__decorate([N.writer("authoringAppVersion")],k.prototype,"writeAuthoringAppVersion",null);a.__decorate([B.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],k.prototype,"ground",void 0);a.__decorate([N.writer("ground")],k.prototype,"writeGround",null);a.__decorate([B.property({type:p.ofType(ja),json:{write:!0}})],k.prototype,"transportationNetworks",void 0);a.__decorate([B.property({type:ia,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(c,d,q,A)=>{c.slides&&
0<c.slides.length&&(d.presentation=c.write({},{...A,isPresentation:!0}))}}}})],k.prototype,"presentation",void 0);a.__decorate([B.property({type:ca,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new ca({viewingMode:"global",spatialReference:L.WebMercator})}})],k.prototype,"initialViewProperties",void 0);a.__decorate([U.reader("initialViewProperties",["initialState.environment","initialState.viewpoint","spatialReference","viewingMode"])],k.prototype,"readInitialViewProperties",
null);a.__decorate([B.property({type:L,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],k.prototype,"spatialReference",null);a.__decorate([B.property({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],k.prototype,"viewingMode",null);a.__decorate([B.property({type:M})],k.prototype,"portalItem",void 0);a.__decorate([B.property()],k.prototype,"resourceInfo",void 0);return k=a.__decorate([W.subclass("esri.WebScene")],k)});