// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../core/Error ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../layers/support/commonProperties ../../rest/support/Query ./support/popupUtils".split(" "),function(c,l,e,y,z,A,p,m,q,r,t){return a=>{a=class extends a{constructor(){super(...arguments);this.view=null}async fetchPopupFeatures(d,k){const {layer:f}=this;if(!d)throw new l("imagerylayerview:fetchPopupFeatures",
"Nothing to fetch without area",{layer:f});var {popupEnabled:b}=f;const g=t.getFetchPopupTemplate(f,k);if(!b||null==g)throw new l("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:b,popupTemplate:g});const u=await g.getRequiredFields();b=new r;b.timeExtent=this.timeExtent;b.geometry=d;b.outFields=u;b.outSpatialReference=d.spatialReference;const {resolution:h,spatialReference:n}=this.view;d="2d"===this.view.type?new m(h,h,n):new m(.5*h,.5*h,n);const {returnTopmostRaster:v,
showNoDataRecords:w}=g.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1};return f.queryVisibleRasters(b,{returnDomainValues:!0,returnTopmostRaster:v,pixelSize:d,showNoDataRecords:w,signal:null!=k?k.signal:null}).then(x=>x)}canResume(){return!super.canResume()||this.timeExtent?.isEmpty?!1:!0}};c.__decorate([e.property()],a.prototype,"layer",void 0);c.__decorate([e.property()],a.prototype,"suspended",void 0);c.__decorate([e.property(q.combinedViewLayerTimeExtentProperty)],a.prototype,"timeExtent",
void 0);c.__decorate([e.property()],a.prototype,"view",void 0);return a=c.__decorate([p.subclass("esri.views.layers.ImageryLayerView")],a)}});