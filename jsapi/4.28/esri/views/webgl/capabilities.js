// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define(["exports","./contextUtils"],function(e,d){function f(a){switch(a){case d.ContextType.WEBGL1:return l();case d.ContextType.WEBGL2:return m()}}function l(){if(!g){{const a=new q,b=n(d.ContextType.WEBGL1,a);null!=b&&(a.supportsElementIndexUint=null!==b.getExtension("OES_element_index_uint"),a.supportsStandardDerivatives=null!==b.getExtension("OES_standard_derivatives"),a.supportsInstancedArrays=null!==b.getExtension("ANGLE_instanced_arrays"),a.supportsTextureFloat=null!==b.getExtension("OES_texture_float"),
a.supportsTextureHalfFloat=null!==b.getExtension("OES_texture_half_float"),a.supportsColorBufferFloat=null!==b.getExtension("WEBGL_color_buffer_float"),a.supportsColorBufferFloatBlend=null!==b.getExtension("EXT_float_blend"),a.supportsColorBufferHalfFloat=null!==b.getExtension("EXT_color_buffer_half_float"));g=a}}return g}function m(){if(!h){{const a=new r,b=n(d.ContextType.WEBGL2,a);null!=b&&(a.supportsColorBufferFloat=null!==b.getExtension("EXT_color_buffer_float"),a.supportsColorBufferFloatBlend=
null!==b.getExtension("EXT_float_blend"),a.supportsColorBufferHalfFloat=a.supportsColorBufferFloat||null!==b.getExtension("EXT_color_buffer_half_float"));h=a}}return h}function n(a,b){if(a===d.ContextType.WEBGL1&&"undefined"===typeof WebGLRenderingContext||a===d.ContextType.WEBGL2&&"undefined"===typeof WebGL2RenderingContext)return null;const k=document.createElement("canvas");if(!k)return null;let c=d.createContext(k,a,{failIfMajorPerformanceCaveat:!0});null==c&&(c=d.createContext(k,a),null!=c&&
(b.majorPerformanceCaveat=!0));if(null==c)return c;if(a===d.ContextType.WEBGL1){if(a=c.getParameter(c.VERSION)?.match(/^WebGL\s+([\d.]*)/))a=parseFloat(a[1]),b.available=.94<=a}else b.available=!0;b.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE);b.supportsVertexShaderSamplers=0<c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(a=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT))b.supportsHighPrecisionFragment=0<a.precision;return c}let g,h;class p{constructor(){this.majorPerformanceCaveat=
this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}}class q extends p{constructor(){super(...arguments);this.type=d.ContextType.WEBGL1}}class r extends p{constructor(){super(...arguments);this.type=
d.ContextType.WEBGL2;this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=!0}}e.getWebGL1Capabilities=l;e.getWebGL2Capabilities=m;e.getWebGLCapabilities=function(a){for(a=d.getContextTypes(a);1<a.length;){const b=f(a.shift());if(b.available)return b}return f(a.shift())};e.getWebGLVersionCapabilities=f;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});