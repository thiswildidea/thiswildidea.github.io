// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define(["../../../core/ByteSizeUnit","../layers/support/MemoryManagedLayerView","./LayerPerformanceInfo","../terrain/terrainUtils"],function(c,d,e,f){class g{constructor(a){this.usedMemory=this.totalMemory=0;this.quality=1;this.edgesMemory=this.terrainMemory=this.load=0;this.layerPerformanceInfos=[];this.fboMemory=this.cachedMemory=0;if(null!=a.resourceController){const b=a.resourceController.memoryController;this.totalMemory=(b.maxMemory??0)*c.ByteSizeUnit.MEGABYTES;this.usedMemory=Math.round(b.usedMemory*
this.totalMemory);this.quality=a.quality;this.load=a.resourceController.scheduler.load;this.cachedMemory=b.usedCacheMemory}this.terrainMemory=a.basemapTerrain?.usedMemory??0;this.edgesMemory=a?._stage?.renderer?.edgeView?.usedMemory??0;this.fboMemory=a?._stage?.renderer?.memoryInfo?.fbos??0;a.allLayerViews.items.forEach(b=>{(d.isMemoryManagedLayerView(b)||f.isSurfaceLayerView(b))&&this.layerPerformanceInfos.push(new e(b,a))});this.layerPerformanceInfos.sort((b,h)=>h.memory-b.memory)}}return g});