// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/chunks/quat":function(){define("exports ./mat3f64 ./quatf64 ./vec3f64 ./common ./vec3 ./vec4".split(" "),function(a,b,l,r,y,B,d){function f(h){h[0]=0;h[1]=0;h[2]=0;h[3]=1;return h}function g(h,e,m){m*=.5;const v=Math.sin(m);h[0]=v*e[0];h[1]=v*e[1];h[2]=v*e[2];h[3]=Math.cos(m);return h}function C(h,e){const m=2*Math.acos(e[3]),v=Math.sin(m/2);v>y.getEpsilon()?(h[0]=e[0]/v,h[1]=e[1]/v,h[2]=e[2]/v):(h[0]=1,h[1]=0,h[2]=0);return m}function k(h,e,m){const v=e[0],E=e[1],I=e[2];e=e[3];
const M=m[0],W=m[1],X=m[2];m=m[3];h[0]=v*m+e*M+E*X-I*W;h[1]=E*m+e*W+I*M-v*X;h[2]=I*m+e*X+v*W-E*M;h[3]=e*m-v*M-E*W-I*X;return h}function c(h,e,m){m*=.5;const v=e[0],E=e[1],I=e[2];e=e[3];const M=Math.sin(m);m=Math.cos(m);h[0]=v*m+e*M;h[1]=E*m+I*M;h[2]=I*m-E*M;h[3]=e*m-v*M;return h}function q(h,e,m){m*=.5;const v=e[0],E=e[1],I=e[2];e=e[3];const M=Math.sin(m);m=Math.cos(m);h[0]=v*m-I*M;h[1]=E*m+e*M;h[2]=I*m+v*M;h[3]=e*m-E*M;return h}function u(h,e,m){m*=.5;const v=e[0],E=e[1],I=e[2];e=e[3];const M=Math.sin(m);
m=Math.cos(m);h[0]=v*m+E*M;h[1]=E*m-v*M;h[2]=I*m+e*M;h[3]=e*m-I*M;return h}function A(h,e){const m=e[0],v=e[1];e=e[2];h[0]=m;h[1]=v;h[2]=e;h[3]=Math.sqrt(Math.abs(1-m*m-v*v-e*e));return h}function x(h,e,m,v){const E=e[0],I=e[1],M=e[2];e=e[3];let W=m[0],X=m[1],Z=m[2];m=m[3];let aa;let ba;var V=E*W+I*X+M*Z+e*m;0>V&&(V=-V,W=-W,X=-X,Z=-Z,m=-m);1-V>y.getEpsilon()?(aa=Math.acos(V),ba=Math.sin(aa),V=Math.sin((1-v)*aa)/ba,v=Math.sin(v*aa)/ba):V=1-v;h[0]=V*E+v*W;h[1]=V*I+v*X;h[2]=V*M+v*Z;h[3]=V*e+v*m;return h}
function w(h){var e=y.RANDOM,m=e();const v=e();e=e();const E=Math.sqrt(1-m);m=Math.sqrt(m);h[0]=E*Math.sin(2*Math.PI*v);h[1]=E*Math.cos(2*Math.PI*v);h[2]=m*Math.sin(2*Math.PI*e);h[3]=m*Math.cos(2*Math.PI*e);return h}function t(h,e){const m=e[0],v=e[1],E=e[2];e=e[3];var I=m*m+v*v+E*E+e*e;I=I?1/I:0;h[0]=-m*I;h[1]=-v*I;h[2]=-E*I;h[3]=e*I;return h}function F(h,e){h[0]=-e[0];h[1]=-e[1];h[2]=-e[2];h[3]=e[3];return h}function D(h,e){var m=e[0]+e[4]+e[8];if(0<m)m=Math.sqrt(m+1),h[3]=.5*m,m=.5/m,h[0]=(e[5]-
e[7])*m,h[1]=(e[6]-e[2])*m,h[2]=(e[1]-e[3])*m;else{let v=0;e[4]>e[0]&&(v=1);e[8]>e[3*v+v]&&(v=2);const E=(v+1)%3,I=(v+2)%3;m=Math.sqrt(e[3*v+v]-e[3*E+E]-e[3*I+I]+1);h[v]=.5*m;m=.5/m;h[3]=(e[3*E+I]-e[3*I+E])*m;h[E]=(e[3*E+v]+e[3*v+E])*m;h[I]=(e[3*I+v]+e[3*v+I])*m}return h}function K(h,e,m,v){var E=.5*Math.PI/180;e*=E;m*=E;v*=E;E=Math.sin(e);e=Math.cos(e);const I=Math.sin(m);m=Math.cos(m);const M=Math.sin(v);v=Math.cos(v);h[0]=E*m*v-e*I*M;h[1]=e*I*v+E*m*M;h[2]=e*m*M-E*I*v;h[3]=e*m*v+E*I*M;return h}
function G(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function n(h,e,m){const v=B.dot(e,m);if(-.999999>v)return B.cross(P,R,e),1E-6>B.len(P)&&B.cross(P,ea,e),B.normalize(P,P),g(h,P,Math.PI),h;if(.999999<v)return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h;B.cross(P,e,m);h[0]=P[0];h[1]=P[1];h[2]=P[2];h[3]=1+v;return Y(h,h)}function p(h,e,m,v,E,I){x(ca,e,E,I);x(da,m,v,I);x(h,ca,da,2*I*(1-I));return h}function z(h,e,m,v){const E=fa;E[0]=m[0];E[3]=m[1];E[6]=m[2];E[1]=v[0];E[4]=v[1];E[7]=v[2];E[2]=-e[0];
E[5]=-e[1];E[8]=-e[2];return Y(h,D(h,E))}const H=d.copy,L=d.set,N=d.add,J=d.scale,Q=d.dot,S=d.lerp,T=d.length,U=d.squaredLength,Y=d.normalize,O=d.exactEquals;d=d.equals;const P=r.create(),R=r.fromValues(1,0,0),ea=r.fromValues(0,1,0),ca=l.create(),da=l.create(),fa=b.create();b=Object.freeze(Object.defineProperty({__proto__:null,add:N,calculateW:A,conjugate:F,copy:H,dot:Q,equals:d,exactEquals:O,fromEuler:K,fromMat3:D,getAxisAngle:C,identity:f,invert:t,len:T,length:T,lerp:S,mul:k,multiply:k,normalize:Y,
random:w,rotateX:c,rotateY:q,rotateZ:u,rotationTo:n,scale:J,set:L,setAxes:z,setAxisAngle:g,slerp:x,sqlerp:p,sqrLen:U,squaredLength:U,str:G},Symbol.toStringTag,{value:"Module"}));a.add=N;a.calculateW=A;a.conjugate=F;a.copy=H;a.dot=Q;a.equals=d;a.exactEquals=O;a.fromEuler=K;a.fromMat3=D;a.getAxisAngle=C;a.identity=f;a.invert=t;a.len=T;a.length=T;a.lerp=S;a.mul=k;a.multiply=k;a.normalize=Y;a.quat=b;a.random=w;a.rotateX=c;a.rotateY=q;a.rotateZ=u;a.rotationTo=n;a.scale=J;a.set=L;a.setAxes=z;a.setAxisAngle=
g;a.slerp=x;a.sqlerp=p;a.sqrLen=U;a.squaredLength=U;a.str=G})},"esri/chunks/mat3f64":function(){define(["exports"],function(a){function b(){return[1,0,0,0,1,0,0,0,1]}function l(d){return[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8]]}function r(d,f,g,C,k,c,q,u,A){return[d,f,g,C,k,c,q,u,A]}function y(d,f){return new Float64Array(d,f,9)}const B=Object.freeze(Object.defineProperty({__proto__:null,clone:l,create:b,createView:y,fromValues:r},Symbol.toStringTag,{value:"Module"}));a.clone=l;a.create=b;a.createView=
y;a.fromValues=r;a.mat3f64=B})},"esri/chunks/quatf64":function(){define(["exports"],function(a){function b(){return[0,0,0,1]}function l(f){return[f[0],f[1],f[2],f[3]]}function r(f,g,C,k){return[f,g,C,k]}function y(f,g){return new Float64Array(f,g,4)}const B=b(),d=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:B,clone:l,create:b,createView:y,fromValues:r},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=B;a.clone=l;a.create=b;a.createView=y;a.fromValues=r;a.quatf64=d})},"esri/chunks/vec3f32":function(){define(["exports"],
function(a){function b(){return new Float32Array(3)}function l(w){const t=new Float32Array(3);t[0]=w[0];t[1]=w[1];t[2]=w[2];return t}function r(w,t,F){const D=new Float32Array(3);D[0]=w;D[1]=t;D[2]=F;return D}function y(w,t){return new Float32Array(w,t,3)}function B(){return b()}function d(){return r(1,1,1)}function f(){return r(1,0,0)}function g(){return r(0,1,0)}function C(){return r(0,0,1)}const k=b(),c=d(),q=f(),u=g(),A=C(),x=Object.freeze(Object.defineProperty({__proto__:null,ONES:c,UNIT_X:q,
UNIT_Y:u,UNIT_Z:A,ZEROS:k,clone:l,create:b,createView:y,fromValues:r,ones:d,unitX:f,unitY:g,unitZ:C,zeros:B},Symbol.toStringTag,{value:"Module"}));a.ONES=c;a.UNIT_X=q;a.UNIT_Y=u;a.UNIT_Z=A;a.ZEROS=k;a.clone=l;a.create=b;a.createView=y;a.fromValues=r;a.ones=d;a.unitX=f;a.unitY=g;a.unitZ=C;a.vec3f32=x;a.zeros=B})},"esri/views/3d/layers/i3s/PointCloudWorkerUtil":function(){define("exports ../../../../core/has ../../../../renderers/PointCloudClassBreaksRenderer ../../../../renderers/PointCloudStretchRenderer ../../../../renderers/PointCloudUniqueValueRenderer ./I3SBinaryReader ./LEPCC".split(" "),
function(a,b,l,r,y,B,d){function f(k,c){const q=new Float64Array(c);for(let u=0;u<c;u++)q[u]=k[3*u+2];return q}function g(k){switch(k){default:case null:case "none":return c=>c;case "low-four-bit":return c=>c&15;case "high-four-bit":return c=>(c&240)>>4;case "absolute-value":return c=>Math.abs(c);case "modulo-ten":return c=>c%10}}function C(k){let c=0;for(const q of k||[])c|=1<<q;return c}a.elevationFromPositions=f;a.evaluateRenderer=function(k,c,q,u){const {rendererJSON:A,isRGBRenderer:x}=k;var w=
k=null;if(c&&x)k=c;else if(c&&"pointCloudUniqueValueRenderer"===A?.type){w=y.fromJSON(A);var t=w.colorUniqueValueInfos;k=new Uint8Array(3*u);var F=g(w.fieldTransformType);for(var D=0;D<u;D++){var K=(F?F(c[D]):c[D])+"";for(var G=0;G<t.length;G++)if(t[G].values.includes(K)){k[3*D]=t[G].color.r;k[3*D+1]=t[G].color.g;k[3*D+2]=t[G].color.b;break}}}else if(c&&"pointCloudStretchRenderer"===A?.type)for(w=r.fromJSON(A),t=w.stops,k=new Uint8Array(3*u),F=g(w.fieldTransformType),D=0;D<u;D++)if(K=F?F(c[D]):c[D],
G=t.length-1,K<t[0].value)k[3*D]=t[0].color.r,k[3*D+1]=t[0].color.g,k[3*D+2]=t[0].color.b;else if(K>=t[G].value)k[3*D]=t[G].color.r,k[3*D+1]=t[G].color.g,k[3*D+2]=t[G].color.b;else for(G=1;G<t.length;G++){if(K<t[G].value){K=(K-t[G-1].value)/(t[G].value-t[G-1].value);k[3*D]=t[G].color.r*K+t[G-1].color.r*(1-K);k[3*D+1]=t[G].color.g*K+t[G-1].color.g*(1-K);k[3*D+2]=t[G].color.b*K+t[G-1].color.b*(1-K);break}}else if(c&&"pointCloudClassBreaksRenderer"===A?.type)for(w=l.fromJSON(A),t=w.colorClassBreakInfos,
k=new Uint8Array(3*u),F=g(w.fieldTransformType),D=0;D<u;D++)for(K=F?F(c[D]):c[D],G=0;G<t.length;G++){if(K>=t[G].minValue&&K<=t[G].maxValue){k[3*D]=t[G].color.r;k[3*D+1]=t[G].color.g;k[3*D+2]=t[G].color.b;break}}else k=(new Uint8Array(3*u)).fill(255);if(q&&w?.colorModulation)for(c=w.colorModulation.minValue,w=w.colorModulation.maxValue,t=0;t<u;t++)F=q[t],F=F>=w?1:F<=c?.3:.3+.7*(F-c)/(w-c),k[3*t]*=F,k[3*t+1]*=F,k[3*t+2]*=F;return k};a.filterInPlace=function(k,c,q,u,A){const x=k.length/3;let w=0;for(let n=
0;n<x;n++){let p=!0;for(let z=0;z<u.length&&p;z++){var {filterJSON:t}=u[z],F=A[z].values[n];switch(t.type){case "pointCloudValueFilter":var D="exclude"===t.mode;t.values.includes(F)===D&&(p=!1);break;case "pointCloudBitfieldFilter":D=C(t.requiredSetBits);t=C(t.requiredClearBits);if((F&D)!==D||0!==(F&t))p=!1;break;case "pointCloudReturnFilter":var K=F&15,G=F>>>4&15;F=1<G;D=1===K;K=K===G;G=!1;for(const H of t.includedReturns)if("last"===H&&K||"firstOfMany"===H&&D&&F||"lastOfMany"===H&&K&&F||"single"===
H&&!F){G=!0;break}G||(p=!1)}}p&&(q[w]=n,k[3*w]=k[3*n],k[3*w+1]=k[3*n+1],k[3*w+2]=k[3*n+2],c[3*w]=c[3*n],c[3*w+1]=c[3*n+1],c[3*w+2]=c[3*n+2],w++)}return w};a.getAttributeValues=function(k,c,q){return k?.attributeInfo.useElevation?c?f(c,q):null:k?.attributeInfo.storageInfo?B.readBinaryAttribute(k.attributeInfo.storageInfo,k.buffer,q):null};a.readGeometry=function(k,c){if(null==k.encoding||""===k.encoding){k=B.createGeometryIndexFromSchema(c,k);if(null==k.vertexAttributes.position)return;c=B.createTypedView(c,
k.vertexAttributes.position);var q=k.header.fields;k=[q.offsetX,q.offsetY,q.offsetZ];q=[q.scaleX,q.scaleY,q.scaleZ];const u=c.length/3,A=new Float64Array(3*u);for(let x=0;x<u;x++)A[3*x]=c[3*x]*q[0]+k[0],A[3*x+1]=c[3*x+1]*q[1]+k[1],A[3*x+2]=c[3*x+2]*q[2]+k[2];return A}if("lepcc-xyz"===k.encoding)return d.decodeXYZ(c).result};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/PointCloudClassBreaksRenderer":function(){define("../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./PointCloudRenderer ./support/LegendOptions ./support/pointCloud/ColorClassBreakInfo".split(" "),
function(a,b,l,r,y,B,d,f,g){var C;r=C=class extends d{constructor(k){super(k);this.type="point-cloud-class-breaks";this.colorClassBreakInfos=this.fieldTransformType=this.legendOptions=this.field=null}clone(){return new C({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:b.clone(this.colorClassBreakInfos),legendOptions:b.clone(this.legendOptions)})}};a.__decorate([y.enumeration({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],r.prototype,
"type",void 0);a.__decorate([l.property({json:{write:!0},type:String})],r.prototype,"field",void 0);a.__decorate([l.property({type:f.LegendOptions,json:{write:!0}})],r.prototype,"legendOptions",void 0);a.__decorate([l.property({type:d.fieldTransformTypeKebabDict.apiValues,json:{type:d.fieldTransformTypeKebabDict.jsonValues,read:d.fieldTransformTypeKebabDict.read,write:d.fieldTransformTypeKebabDict.write}})],r.prototype,"fieldTransformType",void 0);a.__decorate([l.property({type:[g],json:{write:!0}})],
r.prototype,"colorClassBreakInfos",void 0);return r=C=a.__decorate([B.subclass("esri.renderers.PointCloudClassBreaksRenderer")],r)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(a,b,l){a.enumeration=function(r,y={}){r=r instanceof b.JSONMap?r:new b.JSONMap(r,y);r={type:y?.ignoreUnknown??!0?r.apiValues:String,json:{type:r.jsonValues,read:y?.readOnly?!1:{reader:r.read},write:{writer:r.write}}};void 0!==y?.readOnly&&(r.readOnly=
!!y.readOnly);void 0!==y?.default&&(r.json.default=y.default);void 0!==y?.name&&(r.json.name=y.name);void 0!==y?.nonNullable&&(r.nonNullable=y.nonNullable);return l.property(r)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/PointCloudRenderer":function(){define("../chunks/tslib.es6 ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./support/pointCloud/ColorModulation ./support/pointCloud/pointSizeAlgorithmTypeUtils".split(" "),
function(a,b,l,r,y,B,d,f,g){B=b.strict()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});l=class extends l.JSONSupport{constructor(C){super(C);this.type=void 0;this.colorModulation=this.pointSizeAlgorithm=null;this.pointsPerInch=10}clone(){console.warn(".clone() is not implemented for "+this.declaredClass);return null}cloneProperties(){return{pointSizeAlgorithm:r.clone(this.pointSizeAlgorithm),
colorModulation:r.clone(this.colorModulation),pointsPerInch:r.clone(this.pointsPerInch)}}};a.__decorate([y.property({type:B.apiValues,readOnly:!0,nonNullable:!0,json:{type:B.jsonValues,read:!1,write:B.write}})],l.prototype,"type",void 0);a.__decorate([y.property({types:g.pointSizeAlgorithmTypes,json:{write:!0}})],l.prototype,"pointSizeAlgorithm",void 0);a.__decorate([y.property({type:f,json:{write:!0}})],l.prototype,"colorModulation",void 0);a.__decorate([y.property({json:{write:!0},nonNullable:!0,
type:Number})],l.prototype,"pointsPerInch",void 0);l=a.__decorate([d.subclass("esri.renderers.PointCloudRenderer")],l);(l||(l={})).fieldTransformTypeKebabDict=new b.JSONMap({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});return l})},"esri/renderers/support/pointCloud/ColorModulation":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,l,r,y,B,d){var f;b=f=class extends b.JSONSupport{constructor(){super(...arguments);this.field=null;this.minValue=0;this.maxValue=255}clone(){return new f({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);a.__decorate([l.property({type:Number,nonNullable:!0,json:{write:!0}})],b.prototype,"minValue",void 0);a.__decorate([l.property({type:Number,nonNullable:!0,json:{write:!0}})],b.prototype,
"maxValue",void 0);return b=f=a.__decorate([d.subclass("esri.renderers.support.pointCloud.ColorModulation")],b)})},"esri/renderers/support/pointCloud/pointSizeAlgorithmTypeUtils":function(){define(["exports","./PointSizeAlgorithm","./PointSizeFixedSizeAlgorithm","./PointSizeSplatAlgorithm"],function(a,b,l,r){a.pointSizeAlgorithmTypes={key:"type",base:b,typeMap:{"fixed-size":l,splat:r}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/pointCloud/PointSizeAlgorithm":function(){define("../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,l,r,y,B,d,f){b=new b.JSONMap({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});l=class extends l.JSONSupport{};a.__decorate([r.property({type:b.apiValues,readOnly:!0,nonNullable:!0,json:{type:b.jsonValues,read:!1,write:b.write}})],l.prototype,"type",void 0);return l=a.__decorate([f.subclass("esri.renderers.support.pointCloud.PointSizeAlgorithm")],l)})},"esri/renderers/support/pointCloud/PointSizeFixedSizeAlgorithm":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./PointSizeAlgorithm".split(" "),
function(a,b,l,r,y,B,d,f){var g;l=g=class extends f{constructor(){super(...arguments);this.type="fixed-size";this.size=0;this.useRealWorldSymbolSizes=null}clone(){return new g({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};a.__decorate([B.enumeration({pointCloudFixedSizeAlgorithm:"fixed-size"})],l.prototype,"type",void 0);a.__decorate([b.property({type:Number,nonNullable:!0,json:{write:!0}})],l.prototype,"size",void 0);a.__decorate([b.property({type:Boolean,json:{write:!0}})],
l.prototype,"useRealWorldSymbolSizes",void 0);return l=g=a.__decorate([d.subclass("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],l)})},"esri/renderers/support/pointCloud/PointSizeSplatAlgorithm":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./PointSizeAlgorithm".split(" "),
function(a,b,l,r,y,B,d,f){var g;l=g=class extends f{constructor(){super(...arguments);this.type="splat";this.scaleFactor=1}clone(){return new g({scaleFactor:this.scaleFactor})}};a.__decorate([B.enumeration({pointCloudSplatAlgorithm:"splat"})],l.prototype,"type",void 0);a.__decorate([b.property({type:Number,value:1,nonNullable:!0,json:{write:!0}})],l.prototype,"scaleFactor",void 0);return l=g=a.__decorate([d.subclass("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],l)})},"esri/renderers/support/LegendOptions":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,l,r,y,B,d,f){var g;a.LegendOptions=g=class extends l.JSONSupport{constructor(){super(...arguments);this.title=null}clone(){return new g({title:this.title})}};b.__decorate([r.property({type:String,json:{write:!0}})],a.LegendOptions.prototype,"title",void 0);a.LegendOptions=g=b.__decorate([f.subclass("esri.renderers.support.LegendOptions")],a.LegendOptions);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/pointCloud/ColorClassBreakInfo":function(){define("../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,l,r,y,B,d){var f;l=f=class extends l.JSONSupport{constructor(){super(...arguments);this.label=this.description=null;this.maxValue=this.minValue=0;this.color=null}clone(){return new f({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:r.clone(this.color)})}};a.__decorate([y.property({type:String,json:{write:!0}})],l.prototype,"description",void 0);a.__decorate([y.property({type:String,json:{write:!0}})],l.prototype,"label",void 0);a.__decorate([y.property({type:Number,
json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],l.prototype,"minValue",void 0);a.__decorate([y.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],l.prototype,"maxValue",void 0);a.__decorate([y.property({type:b,json:{type:[B.Integer],write:!0}})],l.prototype,"color",void 0);return l=f=a.__decorate([d.subclass("esri.renderers.support.pointCloud.ColorClassBreakInfo")],l)})},"esri/renderers/PointCloudStretchRenderer":function(){define("../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./PointCloudRenderer ./support/LegendOptions ./visualVariables/support/ColorStop".split(" "),
function(a,b,l,r,y,B,d,f,g){var C;r=C=class extends d{constructor(k){super(k);this.type="point-cloud-stretch";this.stops=this.fieldTransformType=this.legendOptions=this.field=null}clone(){return new C({...this.cloneProperties(),field:b.clone(this.field),fieldTransformType:b.clone(this.fieldTransformType),stops:b.clone(this.stops),legendOptions:b.clone(this.legendOptions)})}};a.__decorate([y.enumeration({pointCloudStretchRenderer:"point-cloud-stretch"})],r.prototype,"type",void 0);a.__decorate([l.property({json:{write:!0},
type:String})],r.prototype,"field",void 0);a.__decorate([l.property({type:f.LegendOptions,json:{write:!0}})],r.prototype,"legendOptions",void 0);a.__decorate([l.property({type:d.fieldTransformTypeKebabDict.apiValues,json:{type:d.fieldTransformTypeKebabDict.jsonValues,read:d.fieldTransformTypeKebabDict.read,write:d.fieldTransformTypeKebabDict.write}})],r.prototype,"fieldTransformType",void 0);a.__decorate([l.property({type:[g],json:{write:!0}})],r.prototype,"stops",void 0);return r=C=a.__decorate([B.subclass("esri.renderers.PointCloudStretchRenderer")],
r)})},"esri/renderers/visualVariables/support/ColorStop":function(){define("../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer".split(" "),function(a,b,l,r,y,B,d,f,g){var C;l=C=class extends l.JSONSupport{constructor(k){super(k);this.value=this.label=this.color=
null}writeValue(k,c,q){c[q]=null==k?0:k}clone(){return new C({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};a.__decorate([r.property({type:b,json:{type:[y.Integer],write:!0}})],l.prototype,"color",void 0);a.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"label",void 0);a.__decorate([r.property({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],l.prototype,"value",void 0);a.__decorate([g.writer("value")],l.prototype,"writeValue",null);return l=C=
a.__decorate([f.subclass("esri.renderers.visualVariables.support.ColorStop")],l)})},"esri/renderers/PointCloudUniqueValueRenderer":function(){define("../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./PointCloudRenderer ./support/LegendOptions ./support/pointCloud/ColorUniqueValueInfo".split(" "),function(a,b,l,r,y,B,d,f,g){var C;r=C=class extends d{constructor(k){super(k);
this.type="point-cloud-unique-value";this.legendOptions=this.colorUniqueValueInfos=this.fieldTransformType=this.field=null}clone(){return new C({...this.cloneProperties(),field:b.clone(this.field),fieldTransformType:b.clone(this.fieldTransformType),colorUniqueValueInfos:b.clone(this.colorUniqueValueInfos),legendOptions:b.clone(this.legendOptions)})}};a.__decorate([y.enumeration({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],r.prototype,"type",void 0);a.__decorate([l.property({json:{write:!0},
type:String})],r.prototype,"field",void 0);a.__decorate([l.property({type:d.fieldTransformTypeKebabDict.apiValues,json:{type:d.fieldTransformTypeKebabDict.jsonValues,read:d.fieldTransformTypeKebabDict.read,write:d.fieldTransformTypeKebabDict.write}})],r.prototype,"fieldTransformType",void 0);a.__decorate([l.property({type:[g],json:{write:!0}})],r.prototype,"colorUniqueValueInfos",void 0);a.__decorate([l.property({type:f.LegendOptions,json:{write:!0}})],r.prototype,"legendOptions",void 0);return r=
C=a.__decorate([B.subclass("esri.renderers.PointCloudUniqueValueRenderer")],r)})},"esri/renderers/support/pointCloud/ColorUniqueValueInfo":function(){define("../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,l,r,y,B,d){var f;l=f=class extends l.JSONSupport{constructor(){super(...arguments);this.color=
this.values=this.label=this.description=null}clone(){return new f({description:this.description,label:this.label,values:r.clone(this.values),color:r.clone(this.color)})}};a.__decorate([y.property({type:String,json:{write:!0}})],l.prototype,"description",void 0);a.__decorate([y.property({type:String,json:{write:!0}})],l.prototype,"label",void 0);a.__decorate([y.property({type:[String],json:{write:!0}})],l.prototype,"values",void 0);a.__decorate([y.property({type:b,json:{type:[B.Integer],write:!0}})],
l.prototype,"color",void 0);return l=f=a.__decorate([d.subclass("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],l)})},"esri/views/3d/layers/i3s/I3SBinaryReader":function(){define("exports ../../../../core/Error ../../../../core/lang ../../../../core/Logger ./LEPCC ../../webgl-engine/lib/VertexAttribute".split(" "),function(a,b,l,r,y,B){function d(n,p){const z={byteOffset:0,byteCount:0,fields:Object.create(null)};let H=0;for(let L=0;L<p.length;L++){const N=p[L],J=N.valueType||N.type;z.fields[N.property]=
(0,G[J])(n,H);H+=K[J].BYTES_PER_ELEMENT}z.byteCount=H;return z}function f(n,p,z){return g(n,p,z).map(H=>(H=H?Date.parse(H):null)&&!Number.isNaN(H)?H:null)}function g(n,p,z){const H=[];let L,N=0,J;for(J=0;J<n;J+=1){L=p[J];if(0<L){var Q=H,S=Q.push,T=z,U=N,Y=L-1;let P="",R=0;for(;R<Y;){var O=T[U+R];if(128>O)P+=String.fromCharCode(O),R++;else if(192<=O&&224>O){if(R+1>=Y)throw new b("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");P+=String.fromCharCode((O&31)<<6|T[U+R+1]&
63);R+=2}else if(224<=O&&240>O){if(R+2>=Y)throw new b("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");P+=String.fromCharCode((O&15)<<12|(T[U+R+1]&63)<<6|T[U+R+2]&63);R+=3}else if(240<=O&&248>O){if(R+3>=Y)throw new b("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");O=(O&7)<<18|(T[U+R+1]&63)<<12|(T[U+R+2]&63)<<6|T[U+R+3]&63;P=65536<=O?P+String.fromCharCode((O-65536>>10)+55296,(O&1023)+56320):P+String.fromCharCode(O);R+=4}else throw new b("utf8-decode-error",
"UTF-8 Decode failed. Invalid multi byte sequence.");}S.call(Q,P);if(0!==z[N+L-1])throw new b("string-array-error","Invalid string array: missing null termination.");}else H.push(null);N+=L}return H}function C(n,p){return new K[p.valueType](n,p.byteOffset,p.count*p.valuesPerElement)}function k(n,p){return new Uint8Array(n,p.byteOffset,p.byteCount)}function c(n,p,z){n=null!=p.header?d(n,p.header):{byteOffset:0,byteCount:0,fields:{count:z}};z={header:n,byteOffset:n.byteCount,byteCount:0,entries:Object.create(null)};
let H=n.byteCount;for(let L=0;L<p.ordering.length;L++){const N=p.ordering[L],J=l.clone(p[N]);J.count=n.fields.count??0;if("String"===J.valueType){J.byteOffset=H;J.byteCount=n.fields[N+"ByteCount"];if("UTF-8"!==J.encoding)throw new b("unsupported-encoding","Unsupported String encoding.",{encoding:J.encoding});if(J.timeEncoding&&"ECMA_ISO8601"!==J.timeEncoding)throw new b("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:J.timeEncoding});}else if(w(J.valueType)){const Q=t(J.valueType);
H+=0!==H%Q?Q-H%Q:0;J.byteOffset=H;J.byteCount=Q*J.valuesPerElement*J.count}else throw new b("unsupported-value-type","Unsupported binary valueType",{valueType:J.valueType});H+=J.byteCount??0;z.entries[N]=J}z.byteCount=H-z.byteOffset;return z}function q(n,p,z){p!==n&&F.error(`Invalid ${z} buffer size\n expected: ${n}, actual: ${p})`);if(p<n)throw new b("buffer-too-small","Binary buffer is too small",{expectedSize:n,actualSize:p});}function u(n){return{isDraco:!1,isLegacy:!1,color:null!=n.color,normal:null!=
n.normal,uv0:null!=n.uv0,uvRegion:null!=n.uvRegion,featureIndex:null!=n.faceRange&&null!=n.featureId}}function A(n){const p={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const z of n.ordering)if(n.vertexAttributes[z])switch(z){case "normal":p.normal=!0;break;case "color":p.color=!0;break;case "uv0":p.uv0=!0;break;case "region":p.uvRegion=!0}n.featureAttributes&&n.featureAttributeOrder&&(p.featureIndex=!0);return p}function x(n){const p={isDraco:!0,isLegacy:!1,
color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const z of n)switch(z){case "normal":p.normal=!0;break;case "uv0":p.uv0=!0;break;case "color":p.color=!0;break;case "uv-region":p.uvRegion=!0;break;case "feature-index":p.featureIndex=!0}return p}function w(n){return K.hasOwnProperty(n)}function t(n){return w(n)?K[n].BYTES_PER_ELEMENT:0}const F=r.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader"),D={position:B.VertexAttribute.POSITION,normal:B.VertexAttribute.NORMAL,color:B.VertexAttribute.COLOR,
uv0:B.VertexAttribute.UV0,region:B.VertexAttribute.UVREGION},K={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},G={Float32:(n,p)=>(new DataView(n,0)).getFloat32(p,!0),Float64:(n,p)=>(new DataView(n,0)).getFloat64(p,!0),UInt8:(n,p)=>(new DataView(n,0)).getUint8(p),Int8:(n,p)=>(new DataView(n,0)).getInt8(p),UInt16:(n,p)=>(new DataView(n,0)).getUint16(p,!0),Int16:(n,p)=>(new DataView(n,0)).getInt16(p,!0),
UInt32:(n,p)=>(new DataView(n,0)).getUint32(p,!0),Int32:(n,p)=>(new DataView(n,0)).getInt32(p,!0)};a.createAttributeDataIndex=c;a.createGeometryDescriptor=function(n,p){return n&&n.compressedAttributes&&"draco"===n.compressedAttributes.encoding?x(n.compressedAttributes.attributes):n?u(n):A(p)};a.createGeometryDescriptorForDraco=x;a.createGeometryDescriptorFromDefinition=u;a.createGeometryDescriptorFromSchema=A;a.createGeometryIndexFromSchema=function(n,p){var z=d(n,p&&p.header);let H=z.byteCount;
const L={isDraco:!1,header:z,byteOffset:z.byteCount,byteCount:0,vertexAttributes:{}};z=z.fields;var N=null!=z.vertexCount?z.vertexCount:z.count;for(var J of p.ordering){if(!p.vertexAttributes[J])continue;const S={...p.vertexAttributes[J],byteOffset:H,count:N};L.vertexAttributes[D[J]||"_"+J]=S;H+=t(S.valueType)*S.valuesPerElement*N}J=z.faceCount;if(p.faces&&J){L.faces={};for(var Q of p.ordering)p.faces[Q]&&(N={...p.faces[Q],byteOffset:H,count:J},L.faces[Q]=N,H+=t(N.valueType)*N.valuesPerElement*J)}Q=
z.featureCount;if(p.featureAttributes&&p.featureAttributeOrder&&Q){L.featureAttributes={};for(const S of p.featureAttributeOrder)p.featureAttributes[S]&&(z={...p.featureAttributes[S],byteOffset:H,count:Q},L.featureAttributes[S]=z,J="UInt64"===z.valueType?8:t(z.valueType),H+=J*z.valuesPerElement*Q)}q(H,n.byteLength,"geometry");L.byteCount=H-L.byteOffset;return L};a.createRawView=k;a.createTypedView=C;a.getBytesPerValue=t;a.isValueType=w;a.readBinaryAttribute=function(n,p,z){if("lepcc-rgb"===n.encoding)return y.decodeRGB(p);
if("lepcc-intensity"===n.encoding)return y.decodeIntensity(p);if(null!=n.encoding&&""!==n.encoding)throw new b("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");n["attributeByteCounts "]&&!n.attributeByteCounts&&(F.warn("Warning: Trailing space in 'attributeByteCounts '."),n.attributeByteCounts=n["attributeByteCounts "]);"ObjectIds"===n.ordering[0]&&n.hasOwnProperty("objectIds")&&(F.warn("Warning: Case error in objectIds"),n.ordering[0]="objectIds");z=c(p,n,z);q(z.byteOffset+
z.byteCount,p.byteLength,"attribute");if(n=z.entries.attributeValues||z.entries.objectIds){if("String"===n.valueType){z=z.entries.attributeByteCounts;const H=C(p,z);p=k(p,n);return n.timeEncoding?f(z.count,H,p):g(z.count,H,p)}return C(p,n)}throw new b("bad-attribute-storage-info","Bad attributeStorageInfo specification.");};a.readDateStringArray=f;a.readHeader=d;a.readStringArray=g;a.valueType2ArrayBufferReader=G;a.valueType2TypedArrayClassMap=K;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/layers/i3s/LEPCC":function(){define(["exports","../../../../core/Error"],function(a,b){function l(d,f,g){return{identifier:String.fromCharCode.apply(null,new Uint8Array(d,g+B.identifierOffset,B.identifierLength)),version:f.getUint16(g+B.versionOffset,!0),checksum:f.getUint32(g+B.checksumOffset,!0)}}function r(d,f,g){const C=[];f=y(d,f,C);const k=[];for(let c=0;c<C.length;c++){k.length=0;f=y(d,f,k);for(let q=0;q<k.length;q++)g.push(k[q]+C[c])}return f}function y(d,f,g){var C=new DataView(d,
f),k=C.getUint8(0);const c=k&31;var q=!!(k&32),u=(k&192)>>6;k=0;if(0===u)k=C.getUint32(1,!0),f+=5;else if(1===u)k=C.getUint16(1,!0),f+=3;else if(2===u)k=C.getUint8(1),f+=2;else throw new b("lepcc-decode-error","Bad count type");if(q)throw new b("lepcc-decode-error","LUT not implemented");d=new Uint8Array(d,f,Math.ceil(k*c/8));u=q=C=0;const A=-1>>>32-c;for(let x=0;x<k;x++){for(;q<c;)C|=d[u]<<q,q+=8,u+=1;g[x]=C&A;C>>>=c;q-=c;32<q+c&&(C|=d[u-1]>>8-q)}return f+u}const B={identifierOffset:0,identifierLength:10,
versionOffset:10,checksumOffset:12,byteCount:16};a.decodeIntensity=function(d){const f=new DataView(d,0);var g=0;const {identifier:C,version:k}=l(d,f,g);g+=B.byteCount;if("Intensity "!==C)throw new b("lepcc-decode-error","Bad identifier");if(1<k)throw new b("lepcc-decode-error","Unknown version");var c=g;var q=f.getUint32(c+0,!0);var u=f.getUint32(c+4,!0);var A=f.getUint32(c+8,!0);var x=f.getUint16(c+12,!0);var w=f.getUint8(c+14);f.getUint8(c+15);g+=16;if(u*2**32+q!==d.byteLength)throw new b("lepcc-decode-error",
"Bad size");q=new Uint16Array(A);if(8===w){if(A+g!==d.byteLength)throw new b("lepcc-decode-error","Bad size");d=new Uint8Array(d,g,A);for(g=0;g<A;g++)q[g]=d[g]*x}else if(16===w){if(2*A+g!==d.byteLength)throw new b("lepcc-decode-error","Bad size");d=new Uint16Array(d,g,A);for(g=0;g<A;g++)q[g]=d[g]*x}else{w=[];if(y(d,g,w)!==d.byteLength)throw new b("lepcc-decode-error","Bad size");for(d=0;d<A;d++)q[d]=w[d]*x}return q};a.decodeRGB=function(d){var f=new DataView(d,0),g=0;const {identifier:C,version:k}=
l(d,f,g);g+=B.byteCount;if("ClusterRGB"!==C)throw new b("lepcc-decode-error","Bad identifier");if(1<k)throw new b("lepcc-decode-error","Unknown version");var c=g;var q=f.getUint32(c+0,!0);var u=f.getUint32(c+4,!0);var A=f.getUint32(c+8,!0);var x=f.getUint16(c+12,!0);var w=f.getUint8(c+14);c=f.getUint8(c+15);g+=16;if(u*2**32+q!==d.byteLength)throw new b("lepcc-decode-error","Bad size");if((2===w||1===w)&&0===c){if(3*x+A+g!==d.byteLength||256<x)throw new b("lepcc-decode-error","Bad count");f=new Uint8Array(d,
g,3*x);g=new Uint8Array(d,g+3*x,A);d=new Uint8Array(3*A);for(x=0;x<A;x++)q=g[x],d[3*x]=f[3*q],d[3*x+1]=f[3*q+1],d[3*x+2]=f[3*q+2];return d}if(0===w&&0===c){if(3*A+g!==d.byteLength||0!==x)throw new b("lepcc-decode-error","Bad count");return(new Uint8Array(d,g)).slice()}if(2>=w&&1===c){if(g+3!==d.byteLength||1!==x)throw new b("lepcc-decode-error","Bad count");d=f.getUint8(g);x=f.getUint8(g+1);g=f.getUint8(g+2);f=new Uint8Array(3*A);for(q=0;q<A;q++)f[3*q]=d,f[3*q+1]=x,f[3*q+2]=g;return f}throw new b("lepcc-decode-error",
"Bad method "+w+","+c);};a.decodeXYZ=function(d){var f=new DataView(d,0),g=0;const {identifier:C,version:k}=l(d,f,g);g+=B.byteCount;if("LEPCC     "!==C)throw new b("lepcc-decode-error","Bad identifier");if(1<k)throw new b("lepcc-decode-error","Unknown version");var c=g;var q=f.getUint32(c+0,!0);var u=f.getUint32(c+4,!0);var A=f.getFloat64(c+8,!0);var x=f.getFloat64(c+16,!0);var w=f.getFloat64(c+24,!0);var t=f.getFloat64(c+32,!0);var F=f.getFloat64(c+40,!0);var D=f.getFloat64(c+48,!0);var K=f.getFloat64(c+
56,!0);var G=f.getFloat64(c+64,!0);var n=f.getFloat64(c+72,!0);var p=f.getUint32(c+80,!0);f.getUint32(c+84,!0);g+=88;if(u*2**32+q!==d.byteLength)throw new b("lepcc-decode-error","Bad size");q=new Float64Array(3*p);u=[];p=[];f=[];c=[];g=r(d,g,u);g=r(d,g,p);g=r(d,g,f);g=r(d,g,c);if(g!==d.byteLength)throw new b("lepcc-decode-error","Bad length");g=d=0;for(let z=0;z<u.length;z++){g+=u[z];let H=0;for(let L=0;L<p[z];L++){H+=f[d];const N=c[d];q[3*d]=Math.min(t,A+2*K*H);q[3*d+1]=Math.min(F,x+2*G*g);q[3*d+
2]=Math.min(D,w+2*n*N);d++}}return{errorX:K,errorY:G,errorZ:n,result:q}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],function(a){a.VertexAttribute=void 0;(function(b){b.POSITION="position";b.NORMAL="normal";b.NORMALCOMPRESSED="normalCompressed";b.UV0="uv0";b.AUXPOS1="auxpos1";b.AUXPOS2="auxpos2";b.COLOR="color";b.SYMBOLCOLOR="symbolColor";b.SIZE="size";b.TANGENT="tangent";b.OFFSET="offset";b.PERSPECTIVEDIVIDE=
"perspectiveDivide";b.SUBDIVISIONFACTOR="subdivisionFactor";b.COLORFEATUREATTRIBUTE="colorFeatureAttribute";b.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";b.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";b.DISTANCETOSTART="distanceToStart";b.UVMAPSPACE="uvMapSpace";b.BOUNDINGRECT="boundingRect";b.UVREGION="uvRegion";b.PROFILERIGHT="profileRight";b.PROFILEUP="profileUp";b.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";b.FEATUREVALUE="featureValue";b.INSTANCEMODELORIGINHI="instanceModelOriginHi";
b.INSTANCEMODELORIGINLO="instanceModelOriginLo";b.INSTANCEMODEL="instanceModel";b.INSTANCEMODELNORMAL="instanceModelNormal";b.INSTANCECOLOR="instanceColor";b.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute";b.LOCALTRANSFORM="localTransform";b.GLOBALTRANSFORM="globalTransform";b.BOUNDINGSPHERE="boundingSphere";b.MODELORIGIN="modelOrigin";b.MODELSCALEFACTORS="modelScaleFactors";b.FEATUREATTRIBUTE="featureAttribute";b.STATE="state";b.LODLEVEL="lodLevel";b.POSITION0="position0";b.POSITION1="position1";
b.NORMALA="normalA";b.NORMALB="normalB";b.COMPONENTINDEX="componentIndex";b.VARIANTOFFSET="variantOffset";b.VARIANTSTROKE="variantStroke";b.VARIANTEXTENSION="variantExtension";b.SIDENESS="sideness";b.START="start";b.END="end";b.UP="up";b.EXTRUDE="extrude";b.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor";b.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})(a.VertexAttribute||(a.VertexAttribute={}));a.affectsGeometry=function(b){return b===a.VertexAttribute.POSITION};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../core/arrayUtils ../../../core/typedArrayUtil ../../../chunks/quat ../../../chunks/quatf64 ../../../chunks/vec3 ../../../chunks/vec3f32 ../../../geometry/SpatialReference ../../../geometry/projection/projectBuffer ./i3s/PointCloudWorkerUtil".split(" "),function(a,b,l,r,y,B,d,f,g){class C{transform(c){c=this._transform(c);const q=[c.points.buffer,c.rgb.buffer];null!=c.pointIdFilterMap&&q.push(c.pointIdFilterMap.buffer);for(const u of c.attributes)"buffer"in u.values&&b.isArrayBuffer(u.values.buffer)&&
u.values.buffer!==c.rgb.buffer&&q.push(u.values.buffer);return Promise.resolve({result:c,transferList:q})}_transform(c){const q=g.readGeometry(c.schema,c.geometryBuffer);let u=q.length/3,A=null;const x=[];var w=g.getAttributeValues(c.primaryAttributeData,q,u);null!=c.primaryAttributeData&&w&&x.push({attributeInfo:c.primaryAttributeData.attributeInfo,values:w});var t=g.getAttributeValues(c.modulationAttributeData,q,u);null!=c.modulationAttributeData&&t&&x.push({attributeInfo:c.modulationAttributeData.attributeInfo,
values:t});w=g.evaluateRenderer(c.rendererInfo,w,t,u);c.filterInfo&&0<c.filterInfo.length&&null!=c.filterAttributesData&&(t=c.filterAttributesData.filter(a.isSome).map(D=>{const K=g.getAttributeValues(D,q,u);D={attributeInfo:D.attributeInfo,values:K};x.push(D);return D}),A=new Uint32Array(u),u=g.filterInPlace(q,w,A,c.filterInfo,t));for(var F of c.userAttributesData)t=g.getAttributeValues(F,q,u),x.push({attributeInfo:F.attributeInfo,values:t});3*u<w.length&&(w=new Uint8Array(w.buffer.slice(0,3*u)));
this._applyElevationOffsetInPlace(q,u,c.elevationOffset);F=this._transformCoordinates(q,u,c.obb,d.fromJSON(c.inSR),d.fromJSON(c.outSR));return{obb:c.obb,points:F,rgb:w,attributes:x,pointIdFilterMap:A}}_transformCoordinates(c,q,u,A,x){if(!f.projectBuffer(c,A,0,c,x,0,q))throw Error("Can't reproject");A=B.fromValues(u.center[0],u.center[1],u.center[2]);x=B.create();const w=B.create();l.conjugate(k,u.quaternion);const t=new Float32Array(3*q);for(let F=0;F<q;F++)x[0]=c[3*F]-A[0],x[1]=c[3*F+1]-A[1],x[2]=
c[3*F+2]-A[2],y.transformQuat(w,x,k),u.halfSize[0]=Math.max(u.halfSize[0],Math.abs(w[0])),u.halfSize[1]=Math.max(u.halfSize[1],Math.abs(w[1])),u.halfSize[2]=Math.max(u.halfSize[2],Math.abs(w[2])),t[3*F]=x[0],t[3*F+1]=x[1],t[3*F+2]=x[2];return t}_applyElevationOffsetInPlace(c,q,u){if(0!==u)for(let A=0;A<q;A++)c[3*A+2]+=u}}const k=r.create();return function(){return new C}});