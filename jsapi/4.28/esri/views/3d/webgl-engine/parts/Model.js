// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../../../chunks/mat4f64 ../lib/ContentObjectType ../lib/GridLocalOriginFactory ../lib/ModelDirtySet ../lib/RenderGeometry ../lib/Util ../lib/WebGLLayer".split(" "),function(d,f,k,l,v,w,x,m,n,p,q,r,t,e,g){d.Model=class extends k{constructor(){super(...arguments);
this.dirtySet=new r({model:this});this._content=new Map;this._originFactory=new q.GridLocalOriginFactory(null)}getObject(a){return this._content.get(a)}add(a){const b=a.id;e.assert(!this._content.has(b),"Model/Stage already contains object to be added");this._content.set(b,a);g.isWebGLLayer(a)&&this.dirtySet.layerAdded(a)}remove(a){if(!this._content.has(a.id))return!1;this._content.delete(a.id);g.isWebGLLayer(a)&&this.dirtySet.layerRemoved(a);return!0}addMany(a){for(const b of a)b&&(e.assert(!this._content.has(b.id),
"Model/Stage already contains object to be added"),this._content.set(b.id,b))}removeMany(a){for(const b of a)b&&(e.assert(this._content.has(b.id),"Model/Stage doesn't contain object to be removed"),this._content.delete(b.id))}has(a){return this._content.has(a.id)}forEachOfType(a,b){this._content.forEach(c=>{c.type===a&&b(c)})}getRenderGeometry(a,b){const c=new t.RenderGeometry(b,{castShadow:a.castShadow,objectShaderTransformation:a.shaderTransformation});c.transformation=a.getCombinedStaticTransformation(b,
h);({localOrigin:a}=b);c.localOrigin=null!=a?a:this._originFactory.getOrigin(c.boundingSphere);return c}updateRenderGeometryTransformation(a,b,c){if(null==a)return!1;c.transformation=a.getCombinedStaticTransformation(b,h);a=this._originFactory.getOrigin(c.boundingSphere);return c.localOrigin!==a}getStats(){const a={},b=Array.from(this._content.values());for(let c=0;c<p.ContentObjectType.COUNT;++c)a[c]=b.filter(u=>u.type===c).length;return{contentTypes:a,dirtySet:this.dirtySet.formatDebugInfo()}}get test(){return{content:Array.from(this._content.values())}}};
f.__decorate([l.property({constructOnly:!0})],d.Model.prototype,"dirtySet",void 0);d.Model=f.__decorate([m.subclass("esri.views.3d.webgl-engine.parts.Model")],d.Model);const h=n.create();Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});