// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/VertexAttribute ../shaders/MeasurementArrowTechnique".split(" "),function(x,b,m,y,J,A,K,B,C,f,D){class L extends B.Material{constructor(a){super(a,new E);this._configuration=new D.MeasurementArrowTechniqueConfiguration}getConfiguration(a,d){this._configuration.polygonOffsetEnabled=
this.parameters.polygonOffset;this._configuration.transparent=this._transparent;this._configuration.transparencyPassType=d.transparencyPassType;return this._configuration}intersect(){}produces(a,d){return d===A.ShaderOutput.Color||d===A.ShaderOutput.Alpha?a===(this._transparent?C.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:C.RenderSlot.OPAQUE_MATERIAL):!1}createGLMaterial(a){return new M(a)}createBufferWriter(){return new N}get _transparent(){const {parameters:a}=this;return 1>a.outlineColor[3]||
1>a.stripeEvenColor[3]||1>a.stripeOddColor[3]}}class M extends K{beginSlot(a){return this.ensureTechnique(D.MeasurementArrowTechnique,a)}}class E extends B.MaterialParameters{constructor(){super(...arguments);this.width=32;this.outlineSize=.2;this.outlineColor=y.fromValues(1,.5,0,1);this.stripeEvenColor=y.fromValues(1,1,1,1);this.stripeOddColor=y.fromValues(1,.5,0,1);this.stripeLength=1;this.polygonOffset=!1}}const O=J.newLayout().vec3f(f.VertexAttribute.POSITION).vec3f(f.VertexAttribute.NORMAL).vec2f(f.VertexAttribute.UV0).f32(f.VertexAttribute.AUXPOS1),
g=m.create(),n=m.create(),q=m.create(),h=m.create(),r=m.create();class N{constructor(){this.vertexBufferLayout=O}elementCount(a){return 2*(a.attributes.get(f.VertexAttribute.POSITION).indices.length/2+1)}write(a,d,e,t,F){const {data:k,indices:G}=e.attributes.get(f.VertexAttribute.POSITION),z=e.attributes.get(f.VertexAttribute.NORMAL).data;e=k.length/3;G&&G.length!==2*(e-1)&&console.warn("MeasurementArrowMaterial does not support indices");const H=t.position,I=t.normal,u=t.uv0;let v=0;for(let l=0;l<
e;++l){var c=3*l;b.set(g,k[c],k[c+1],k[c+2]);l<e-1&&(c=3*(l+1),b.set(n,k[c],k[c+1],k[c+2]),b.set(r,z[c],z[c+1],z[c+2]),b.normalize(r,r),b.subtract(q,n,g),b.normalize(q,q),b.cross(h,r,q),b.normalize(h,h));c=b.distance(g,n);a&&d&&(b.transformMat4(g,g,a),b.transformMat4(n,n,a),b.transformMat4(h,h,d));const p=F+2*l,w=p+1;H.setVec(p,g);H.setVec(w,g);I.setVec(p,h);I.setVec(w,h);u.set(p,0,v);u.set(p,1,-1);u.set(w,0,v);u.set(w,1,1);l<e-1&&(v+=c)}a=t.auxpos1;for(d=0;d<2*e;++d)a.set(F+d,v)}}x.MeasurementArrowMaterial=
L;x.Parameters=E;Object.defineProperty(x,Symbol.toStringTag,{value:"Module"})});