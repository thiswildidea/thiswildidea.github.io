// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/3d/support/buffer/workerHelper":function(){define(["exports","./InterleavedLayout"],function(f,g){f.packInterleavedBuffer=function(q,b){b.push(q.buffer);return{buffer:q.buffer,layout:new g.PackedLayout(q.layout)}};f.unpackInterleavedBuffer=function(q){return(new g.InterleavedLayout(q.layout)).createView(q.buffer)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports","../../../../geometry/support/buffer/BufferView",
"../../../../geometry/support/buffer/types","../../webgl-engine/lib/Util"],function(f,g,q,b){class e{constructor(c,k){this.layout=c;this.buffer="number"===typeof k?new ArrayBuffer(k*c.stride):k;for(const h of c.fields.keys())k=c.fields.get(h),this[h]=new k.constructor(this.buffer,k.offset,this.stride)}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(c,k){return(c=this[c])&&c.elementCount===k.ElementCount&&
c.elementType===k.ElementType?c:null}slice(c,k){return new e(this.layout,this.buffer.slice(c*this.stride,k*this.stride))}copyFrom(c,k=0,h=0,r=c.count){const y=this.stride;0===y%4?(c=new Uint32Array(c.buffer,k*y,r*y/4),(new Uint32Array(this.buffer,h*y,r*y/4)).set(c)):(c=new Uint8Array(c.buffer,k*y,r*y),(new Uint8Array(this.buffer,h*y,r*y)).set(c));return this}get usedMemory(){return this.byteLength}dispose(){}}class p{constructor(c=null){this._lastAligned=this._stride=0;this._fields=new Map;c&&(this._stride=
c.stride,c.fields.forEach(k=>this._fields.set(k[0],{...k[1],constructor:v.get(k[1].constructor)})))}vec2f(c,k){this._appendField(c,g.BufferViewVec2f,k);return this}vec2f64(c,k){this._appendField(c,g.BufferViewVec2f64,k);return this}vec3f(c,k){this._appendField(c,g.BufferViewVec3f,k);return this}vec3f64(c,k){this._appendField(c,g.BufferViewVec3f64,k);return this}vec4f(c,k){this._appendField(c,g.BufferViewVec4f,k);return this}vec4f64(c,k){this._appendField(c,g.BufferViewVec4f64,k);return this}mat3f(c,
k){this._appendField(c,g.BufferViewMat3f,k);return this}mat3f64(c,k){this._appendField(c,g.BufferViewMat3f64,k);return this}mat4f(c,k){this._appendField(c,g.BufferViewMat4f,k);return this}mat4f64(c,k){this._appendField(c,g.BufferViewMat4f64,k);return this}vec4u8(c,k){this._appendField(c,g.BufferViewVec4u8,k);return this}f32(c,k){this._appendField(c,g.BufferViewFloat,k);return this}f64(c,k){this._appendField(c,g.BufferViewFloat64,k);return this}u8(c,k){this._appendField(c,g.BufferViewUint8,k);return this}u16(c,
k){this._appendField(c,g.BufferViewUint16,k);return this}i8(c,k){this._appendField(c,g.BufferViewInt8,k);return this}vec2i8(c,k){this._appendField(c,g.BufferViewVec2i8,k);return this}vec2i16(c,k){this._appendField(c,g.BufferViewVec2i16,k);return this}vec2u8(c,k){this._appendField(c,g.BufferViewVec2u8,k);return this}vec4u16(c,k){this._appendField(c,g.BufferViewVec4u16,k);return this}u32(c,k){this._appendField(c,g.BufferViewUint32,k);return this}_appendField(c,k,h){if(this._fields.has(c))b.assert(!1,
`${c} already added to vertex buffer layout`);else{var r=k.ElementCount*q.elementTypeSize(k.ElementType),y=this._stride;this._stride+=r;this._fields.set(c,{size:r,constructor:k,offset:y,optional:h})}}createBuffer(c){return new e(this,c)}createView(c){return new e(this,c)}clone(){const c=new p;c._stride=this._stride;c._fields=new Map;this._fields.forEach((k,h)=>c._fields.set(h,k));c.BufferType=this.BufferType;return c}get stride(){if(this._lastAligned!==this._fields.size){let c=1;this._fields.forEach(k=>
c=Math.max(c,q.elementTypeSize(k.constructor.ElementType)));this._stride=Math.floor((this._stride+c-1)/c)*c;this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}}class t{constructor(c){this.fields=[];c.fields.forEach((k,h)=>{var r=k.constructor;this.fields.push([h,{...k,constructor:`${r.ElementType}_${r.ElementCount}`}])});this.stride=c.stride}}const m=[g.BufferViewFloat,g.BufferViewVec2f,g.BufferViewVec3f,g.BufferViewVec4f,g.BufferViewMat3f,g.BufferViewMat4f,g.BufferViewFloat64,
g.BufferViewVec2f64,g.BufferViewVec3f64,g.BufferViewVec4f64,g.BufferViewMat3f64,g.BufferViewMat4f64,g.BufferViewUint8,g.BufferViewVec2u8,g.BufferViewVec3u8,g.BufferViewVec4u8,g.BufferViewUint16,g.BufferViewVec2u16,g.BufferViewVec3u16,g.BufferViewVec4u16,g.BufferViewUint32,g.BufferViewVec2u32,g.BufferViewVec3u32,g.BufferViewVec4u32,g.BufferViewInt8,g.BufferViewVec2i8,g.BufferViewVec3i8,g.BufferViewVec4i8,g.BufferViewInt16,g.BufferViewVec2i16,g.BufferViewVec3i16,g.BufferViewVec4i16,g.BufferViewInt32,
g.BufferViewVec2i32,g.BufferViewVec3i32,g.BufferViewVec4i32],v=new Map;m.forEach(c=>v.set(`${c.ElementType}_${c.ElementCount}`,c));f.InterleavedBuffer=e;f.InterleavedLayout=p;f.PackedLayout=t;f.newLayout=function(){return new p};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/BufferView":function(){define("exports ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(f,g,q,b,e,p,t){class m extends b.BufferViewScalarImpl{constructor(a,
d=0,C,D){super(Float32Array,a,d,C,D);this.elementType="f32"}static fromTypedArray(a,d){return new m(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}m.ElementType="f32";class v extends e.BufferViewVec2Impl{constructor(a,d=0,C,D){super(Float32Array,a,d,C,D);this.elementType="f32"}slice(a,d){return this.sliceBuffer(v,a,d)}static fromTypedArray(a,d){return new v(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}v.ElementType="f32";class c extends p.BufferViewVec3Impl{constructor(a,d=0,C,D){super(Float32Array,
a,d,C,D);this.elementType="f32"}slice(a,d){return this.sliceBuffer(c,a,d)}static fromTypedArray(a,d){return new c(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}c.ElementType="f32";class k extends t.BufferViewVec4Impl{constructor(a,d=0,C,D){super(Float32Array,a,d,C,D);this.elementType="f32"}slice(a,d){return this.sliceBuffer(k,a,d)}static fromTypedArray(a,d){return new k(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}k.ElementType="f32";class h extends g.BufferViewMat3Impl{constructor(a,
d=0,C,D){super(Float32Array,a,d,C,D);this.elementType="f32"}slice(a,d){return this.sliceBuffer(h,a,d)}static fromTypedArray(a,d){return new h(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}h.ElementType="f32";class r extends g.BufferViewMat3Impl{constructor(a,d=0,C,D){super(Float64Array,a,d,C,D);this.elementType="f64"}slice(a,d){return this.sliceBuffer(r,a,d)}static fromTypedArray(a,d){return new r(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}r.ElementType="f64";class y extends q.BufferViewMat4Impl{constructor(a,
d=0,C,D){super(Float32Array,a,d,C,D);this.elementType="f32"}slice(a,d){return this.sliceBuffer(y,a,d)}static fromTypedArray(a,d){return new y(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}y.ElementType="f32";class B extends q.BufferViewMat4Impl{constructor(a,d=0,C,D){super(Float64Array,a,d,C,D);this.elementType="f64"}slice(a,d){return this.sliceBuffer(B,a,d)}static fromTypedArray(a,d){return new B(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}B.ElementType="f64";class u extends b.BufferViewScalarImpl{constructor(a,
d=0,C,D){super(Float64Array,a,d,C,D);this.elementType="f64"}slice(a,d){return this.sliceBuffer(u,a,d)}static fromTypedArray(a,d){return new u(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}u.ElementType="f64";class z extends e.BufferViewVec2Impl{constructor(a,d=0,C,D){super(Float64Array,a,d,C,D);this.elementType="f64"}slice(a,d){return this.sliceBuffer(z,a,d)}static fromTypedArray(a,d){return new z(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}z.ElementType="f64";class w extends p.BufferViewVec3Impl{constructor(a,
d=0,C,D){super(Float64Array,a,d,C,D);this.elementType="f64"}slice(a,d){return this.sliceBuffer(w,a,d)}static fromTypedArray(a,d){return new w(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}w.ElementType="f64";class A extends t.BufferViewVec4Impl{constructor(a,d=0,C,D){super(Float64Array,a,d,C,D);this.elementType="f64"}slice(a,d){return this.sliceBuffer(A,a,d)}static fromTypedArray(a,d){return new A(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}A.ElementType="f64";class G extends b.BufferViewScalarImpl{constructor(a,
d=0,C,D){super(Uint8Array,a,d,C,D);this.elementType="u8"}slice(a,d){return this.sliceBuffer(G,a,d)}static fromTypedArray(a,d){return new G(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}G.ElementType="u8";class E extends e.BufferViewVec2Impl{constructor(a,d=0,C,D){super(Uint8Array,a,d,C,D);this.elementType="u8"}slice(a,d){return this.sliceBuffer(E,a,d)}static fromTypedArray(a,d){return new E(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}E.ElementType="u8";class K extends p.BufferViewVec3Impl{constructor(a,
d=0,C,D){super(Uint8Array,a,d,C,D);this.elementType="u8"}slice(a,d){return this.sliceBuffer(K,a,d)}static fromTypedArray(a,d){return new K(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}K.ElementType="u8";class H extends t.BufferViewVec4Impl{constructor(a,d=0,C,D){super(Uint8Array,a,d,C,D);this.elementType="u8"}slice(a,d){return this.sliceBuffer(H,a,d)}static fromTypedArray(a,d){return new H(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}H.ElementType="u8";class J extends b.BufferViewScalarImpl{constructor(a,
d=0,C,D){super(Uint16Array,a,d,C,D);this.elementType="u16"}slice(a,d){return this.sliceBuffer(J,a,d)}static fromTypedArray(a,d){return new J(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}J.ElementType="u16";class N extends e.BufferViewVec2Impl{constructor(a,d=0,C,D){super(Uint16Array,a,d,C,D);this.elementType="u16"}slice(a,d){return this.sliceBuffer(N,a,d)}static fromTypedArray(a,d){return new N(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}N.ElementType="u16";class L extends p.BufferViewVec3Impl{constructor(a,
d=0,C,D){super(Uint16Array,a,d,C,D);this.elementType="u16"}slice(a,d){return this.sliceBuffer(L,a,d)}static fromTypedArray(a,d){return new L(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}L.ElementType="u16";class O extends t.BufferViewVec4Impl{constructor(a,d=0,C,D){super(Uint16Array,a,d,C,D);this.elementType="u16"}slice(a,d){return this.sliceBuffer(O,a,d)}static fromTypedArray(a,d){return new O(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}O.ElementType="u16";class P extends b.BufferViewScalarImpl{constructor(a,
d=0,C,D){super(Uint32Array,a,d,C,D);this.elementType="u32"}slice(a,d){return this.sliceBuffer(P,a,d)}static fromTypedArray(a,d){return new P(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}P.ElementType="u32";class S extends e.BufferViewVec2Impl{constructor(a,d=0,C,D){super(Uint32Array,a,d,C,D);this.elementType="u32"}slice(a,d){return this.sliceBuffer(S,a,d)}static fromTypedArray(a,d){return new S(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}S.ElementType="u32";class R extends p.BufferViewVec3Impl{constructor(a,
d=0,C,D){super(Uint32Array,a,d,C,D);this.elementType="u32"}slice(a,d){return this.sliceBuffer(R,a,d)}static fromTypedArray(a,d){return new R(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}R.ElementType="u32";class U extends t.BufferViewVec4Impl{constructor(a,d=0,C,D){super(Uint32Array,a,d,C,D);this.elementType="u32"}slice(a,d){return this.sliceBuffer(U,a,d)}static fromTypedArray(a,d){return new U(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}U.ElementType="u32";class V extends b.BufferViewScalarImpl{constructor(a,
d=0,C,D){super(Int8Array,a,d,C,D);this.elementType="i8"}slice(a,d){return this.sliceBuffer(V,a,d)}static fromTypedArray(a,d){return new V(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}V.ElementType="i8";class W extends e.BufferViewVec2Impl{constructor(a,d=0,C,D){super(Int8Array,a,d,C,D);this.elementType="i8"}slice(a,d){return this.sliceBuffer(W,a,d)}static fromTypedArray(a,d){return new W(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}W.ElementType="i8";class T extends p.BufferViewVec3Impl{constructor(a,
d=0,C,D){super(Int8Array,a,d,C,D);this.elementType="i8"}slice(a,d){return this.sliceBuffer(T,a,d)}static fromTypedArray(a,d){return new T(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}T.ElementType="i8";class X extends t.BufferViewVec4Impl{constructor(a,d=0,C,D){super(Int8Array,a,d,C,D);this.elementType="i8"}slice(a,d){return this.sliceBuffer(X,a,d)}static fromTypedArray(a,d){return new X(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}X.ElementType="i8";class Y extends b.BufferViewScalarImpl{constructor(a,
d=0,C,D){super(Int16Array,a,d,C,D);this.elementType="i16"}slice(a,d){return this.sliceBuffer(Y,a,d)}static fromTypedArray(a,d){return new Y(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}Y.ElementType="i16";class Q extends e.BufferViewVec2Impl{constructor(a,d=0,C,D){super(Int16Array,a,d,C,D);this.elementType="i16"}slice(a,d){return this.sliceBuffer(Q,a,d)}static fromTypedArray(a,d){return new Q(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}Q.ElementType="i16";class l extends p.BufferViewVec3Impl{constructor(a,
d=0,C,D){super(Int16Array,a,d,C,D);this.elementType="i16"}slice(a,d){return this.sliceBuffer(l,a,d)}static fromTypedArray(a,d){return new l(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}l.ElementType="i16";class n extends t.BufferViewVec4Impl{constructor(a,d=0,C,D){super(Int16Array,a,d,C,D);this.elementType="i16"}slice(a,d){return this.sliceBuffer(n,a,d)}static fromTypedArray(a,d){return new n(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}n.ElementType="i16";class x extends b.BufferViewScalarImpl{constructor(a,
d=0,C,D){super(Int32Array,a,d,C,D);this.elementType="i32"}slice(a,d){return this.sliceBuffer(x,a,d)}static fromTypedArray(a,d){return new x(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}x.ElementType="i32";class F extends e.BufferViewVec2Impl{constructor(a,d=0,C,D){super(Int32Array,a,d,C,D);this.elementType="i32"}slice(a,d){return this.sliceBuffer(F,a,d)}static fromTypedArray(a,d){return new F(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}F.ElementType="i32";class I extends p.BufferViewVec3Impl{constructor(a,
d=0,C,D){super(Int32Array,a,d,C,D);this.elementType="i32"}slice(a,d){return this.sliceBuffer(I,a,d)}static fromTypedArray(a,d){return new I(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}I.ElementType="i32";class M extends t.BufferViewVec4Impl{constructor(a,d=0,C,D){super(Int32Array,a,d,C,D);this.elementType="i32"}slice(a,d){return this.sliceBuffer(M,a,d)}static fromTypedArray(a,d){return new M(a.buffer,a.byteOffset,d,a.byteOffset+a.byteLength)}}M.ElementType="i32";f.BufferViewFloat=m;f.BufferViewFloat64=
u;f.BufferViewInt16=Y;f.BufferViewInt32=x;f.BufferViewInt8=V;f.BufferViewMat3f=h;f.BufferViewMat3f64=r;f.BufferViewMat4f=y;f.BufferViewMat4f64=B;f.BufferViewUint16=J;f.BufferViewUint32=P;f.BufferViewUint8=G;f.BufferViewVec2f=v;f.BufferViewVec2f64=z;f.BufferViewVec2i16=Q;f.BufferViewVec2i32=F;f.BufferViewVec2i8=W;f.BufferViewVec2u16=N;f.BufferViewVec2u32=S;f.BufferViewVec2u8=E;f.BufferViewVec3f=c;f.BufferViewVec3f64=w;f.BufferViewVec3i16=l;f.BufferViewVec3i32=I;f.BufferViewVec3i8=T;f.BufferViewVec3u16=
L;f.BufferViewVec3u32=R;f.BufferViewVec3u8=K;f.BufferViewVec4f=k;f.BufferViewVec4f64=A;f.BufferViewVec4i16=n;f.BufferViewVec4i32=M;f.BufferViewVec4i8=X;f.BufferViewVec4u16=O;f.BufferViewVec4u32=U;f.BufferViewVec4u8=H;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports"],function(f){class g{constructor(q,b,e=0,p,t){this.TypedArrayConstructor=q;this.elementCount=9;q=this.TypedArrayConstructor;void 0===p&&(p=9*q.BYTES_PER_ELEMENT);
const m=0===b.byteLength?0:e;this.typedBuffer=null==t?new q(b,m):new q(b,m,(t-e)/q.BYTES_PER_ELEMENT);this.typedBufferStride=p/q.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(q,b,e=this.count-b){b=this.typedBuffer.byteOffset+b*this.stride;return new q(this.buffer,b,this.stride,b+e*this.stride)}getMat(q,b){q*=this.typedBufferStride;for(let e=0;9>e;e++)b[e]=this.typedBuffer[q++];
return b}setMat(q,b){q*=this.typedBufferStride;for(let e=0;9>e;e++)this.typedBuffer[q++]=b[e]}get(q,b){return this.typedBuffer[q*this.typedBufferStride+b]}set(q,b,e){this.typedBuffer[q*this.typedBufferStride+b]=e}copyFrom(q,b,e){const p=this.typedBuffer,t=b.typedBuffer;q*=this.typedBufferStride;b=e*b.typedBufferStride;for(e=0;9>e;++e)p[q++]=t[b++]}get buffer(){return this.typedBuffer.buffer}}g.ElementCount=9;f.BufferViewMat3Impl=g;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports"],
function(f){class g{constructor(q,b,e=0,p,t){this.TypedArrayConstructor=q;this.elementCount=16;q=this.TypedArrayConstructor;void 0===p&&(p=16*q.BYTES_PER_ELEMENT);const m=0===b.byteLength?0:e;this.typedBuffer=null==t?new q(b,m):new q(b,m,(t-e)/q.BYTES_PER_ELEMENT);this.typedBufferStride=p/q.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(q,b,e=this.count-b){b=this.typedBuffer.byteOffset+
b*this.stride;return new q(this.buffer,b,this.stride,b+e*this.stride)}getMat(q,b){q*=this.typedBufferStride;for(let e=0;16>e;e++)b[e]=this.typedBuffer[q++];return b}setMat(q,b){q*=this.typedBufferStride;for(let e=0;16>e;e++)this.typedBuffer[q++]=b[e]}get(q,b){return this.typedBuffer[q*this.typedBufferStride+b]}set(q,b,e){this.typedBuffer[q*this.typedBufferStride+b]=e}copyFrom(q,b,e){const p=this.typedBuffer,t=b.typedBuffer;q*=this.typedBufferStride;b=e*b.typedBufferStride;for(e=0;16>e;++e)p[q++]=
t[b++]}get buffer(){return this.typedBuffer.buffer}}g.ElementCount=16;f.BufferViewMat4Impl=g;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports"],function(f){class g{constructor(q,b,e=0,p,t){this.TypedArrayConstructor=q;this.elementCount=1;q=this.TypedArrayConstructor;void 0===p&&(p=q.BYTES_PER_ELEMENT);const m=0===b.byteLength?0:e;this.typedBuffer=null==t?new q(b,m):new q(b,m,(t-e)/q.BYTES_PER_ELEMENT);this.stride=
p;this.typedBufferStride=p/q.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(q,b,e=this.count-b){b=this.typedBuffer.byteOffset+b*this.stride;return new q(this.buffer,b,this.stride,b+e*this.stride)}get(q){return this.typedBuffer[q*this.typedBufferStride]}set(q,b){this.typedBuffer[q*this.typedBufferStride]=b}get buffer(){return this.typedBuffer.buffer}}g.ElementCount=1;f.BufferViewScalarImpl=g;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports","../../../../chunks/vec2"],function(f,g){class q{constructor(b,e,p=0,t,m){this.TypedArrayConstructor=b;this.elementCount=2;b=this.TypedArrayConstructor;void 0===t&&(t=2*b.BYTES_PER_ELEMENT);const v=0===e.byteLength?0:p;this.typedBuffer=null==m?new b(e,v):new b(e,v,(m-p)/b.BYTES_PER_ELEMENT);this.typedBufferStride=t/b.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*
this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(b,e,p=this.count-e){e=this.typedBuffer.byteOffset+e*this.stride;return new b(this.buffer,e,this.stride,e+p*this.stride)}getVec(b,e){b*=this.typedBufferStride;return g.set(e,this.typedBuffer[b],this.typedBuffer[b+1])}setVec(b,e){b*=this.typedBufferStride;this.typedBuffer[b++]=e[0];this.typedBuffer[b]=e[1]}get(b,e){return this.typedBuffer[b*this.typedBufferStride+e]}set(b,e,p){this.typedBuffer[b*this.typedBufferStride+e]=p}setValues(b,e,p){b*=
this.typedBufferStride;this.typedBuffer[b++]=e;this.typedBuffer[b]=p}copyFrom(b,e,p){const t=this.typedBuffer,m=e.typedBuffer;b*=this.typedBufferStride;e=p*e.typedBufferStride;t[b++]=m[e++];t[b]=m[e]}get buffer(){return this.typedBuffer.buffer}}q.ElementCount=2;f.BufferViewVec2Impl=q;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(f,g){function q(l,n){l[0]=n[0];l[1]=n[1];return l}function b(l,n,x){l[0]=n;l[1]=x;return l}
function e(l,n,x){l[0]=n[0]+x[0];l[1]=n[1]+x[1];return l}function p(l,n,x){l[0]=n[0]-x[0];l[1]=n[1]-x[1];return l}function t(l,n,x){l[0]=n[0]*x[0];l[1]=n[1]*x[1];return l}function m(l,n,x){l[0]=n[0]/x[0];l[1]=n[1]/x[1];return l}function v(l,n){l[0]=Math.ceil(n[0]);l[1]=Math.ceil(n[1]);return l}function c(l,n){l[0]=Math.floor(n[0]);l[1]=Math.floor(n[1]);return l}function k(l,n,x){l[0]=Math.min(n[0],x[0]);l[1]=Math.min(n[1],x[1]);return l}function h(l,n,x){l[0]=Math.max(n[0],x[0]);l[1]=Math.max(n[1],
x[1]);return l}function r(l,n){l[0]=Math.round(n[0]);l[1]=Math.round(n[1]);return l}function y(l,n,x){l[0]=n[0]*x;l[1]=n[1]*x;return l}function B(l,n,x,F){l[0]=n[0]+x[0]*F;l[1]=n[1]+x[1]*F;return l}function u(l,n){const x=n[0]-l[0];l=n[1]-l[1];return Math.sqrt(x*x+l*l)}function z(l,n){const x=n[0]-l[0];l=n[1]-l[1];return x*x+l*l}function w(l){const n=l[0];l=l[1];return Math.sqrt(n*n+l*l)}function A(l){const n=l[0];l=l[1];return n*n+l*l}function G(l,n){l[0]=-n[0];l[1]=-n[1];return l}function E(l,n){l[0]=
1/n[0];l[1]=1/n[1];return l}function K(l,n){var x=n[0];const F=n[1];x=x*x+F*F;0<x&&(x=1/Math.sqrt(x),l[0]=n[0]*x,l[1]=n[1]*x);return l}function H(l,n){return l[0]*n[0]+l[1]*n[1]}function J(l,n,x){n=n[0]*x[1]-n[1]*x[0];l[0]=l[1]=0;l[2]=n;return l}function N(l,n,x,F){const I=n[0];n=n[1];l[0]=I+F*(x[0]-I);l[1]=n+F*(x[1]-n);return l}function L(l,n){n=n||1;const x=2*g.RANDOM()*Math.PI;l[0]=Math.cos(x)*n;l[1]=Math.sin(x)*n;return l}function O(l,n,x){const F=n[0];n=n[1];l[0]=x[0]*F+x[2]*n;l[1]=x[1]*F+x[3]*
n;return l}function P(l,n,x){const F=n[0];n=n[1];l[0]=x[0]*F+x[2]*n+x[4];l[1]=x[1]*F+x[3]*n+x[5];return l}function S(l,n,x){const F=n[0];n=n[1];l[0]=x[0]*F+x[3]*n+x[6];l[1]=x[1]*F+x[4]*n+x[7];return l}function R(l,n,x){const F=n[0];n=n[1];l[0]=x[0]*F+x[4]*n+x[12];l[1]=x[1]*F+x[5]*n+x[13];return l}function U(l,n,x,F){const I=n[0]-x[0];n=n[1]-x[1];const M=Math.sin(F);F=Math.cos(F);l[0]=I*F-n*M+x[0];l[1]=I*M+n*F+x[1];return l}function V(l,n){var x=l[0];l=l[1];const F=n[0];n=n[1];let I=x*x+l*l;0<I&&(I=
1/Math.sqrt(I));let M=F*F+n*n;0<M&&(M=1/Math.sqrt(M));x=(x*F+l*n)*I*M;return 1<x?0:-1>x?Math.PI:Math.acos(x)}function W(l){return"vec2("+l[0]+", "+l[1]+")"}function T(l,n){return l[0]===n[0]&&l[1]===n[1]}function X(l,n){const x=l[0];l=l[1];const F=n[0];n=n[1];const I=g.getEpsilon();return Math.abs(x-F)<=I*Math.max(1,Math.abs(x),Math.abs(F))&&Math.abs(l-n)<=I*Math.max(1,Math.abs(l),Math.abs(n))}function Y(l,n,x,F,I){let M=n[0]-x[0];x=n[1]-x[1];I=(F[0]*M+F[1]*x)*(I-1);M=F[0]*I;x=F[1]*I;l[0]=n[0]+M;
l[1]=n[1]+x;return l}const Q=Object.freeze(Object.defineProperty({__proto__:null,add:e,angle:V,ceil:v,copy:q,cross:J,dist:u,distance:u,div:m,divide:m,dot:H,equals:X,exactEquals:T,floor:c,inverse:E,len:w,length:w,lerp:N,max:h,min:k,mul:t,multiply:t,negate:G,normalize:K,projectAndScale:Y,random:L,rotate:U,round:r,scale:y,scaleAndAdd:B,set:b,sqrDist:z,sqrLen:A,squaredDistance:z,squaredLength:A,str:W,sub:p,subtract:p,transformMat2:O,transformMat2d:P,transformMat3:S,transformMat4:R},Symbol.toStringTag,
{value:"Module"}));f.add=e;f.angle=V;f.ceil=v;f.copy=q;f.cross=J;f.dist=u;f.distance=u;f.div=m;f.divide=m;f.dot=H;f.equals=X;f.exactEquals=T;f.floor=c;f.inverse=E;f.len=w;f.length=w;f.lerp=N;f.max=h;f.min=k;f.mul=t;f.multiply=t;f.negate=G;f.normalize=K;f.projectAndScale=Y;f.random=L;f.rotate=U;f.round=r;f.scale=y;f.scaleAndAdd=B;f.set=b;f.sqrDist=z;f.sqrLen=A;f.squaredDistance=z;f.squaredLength=A;f.str=W;f.sub=p;f.subtract=p;f.transformMat2=O;f.transformMat2d=P;f.transformMat3=S;f.transformMat4=R;
f.vec2=Q})},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports","../../../../chunks/vec3"],function(f,g){class q{constructor(b,e,p=0,t,m){this.TypedArrayConstructor=b;this.elementCount=3;b=this.TypedArrayConstructor;void 0===t&&(t=3*b.BYTES_PER_ELEMENT);const v=0===e.byteLength?0:p;this.typedBuffer=null==m?new b(e,v):new b(e,v,(m-p)/b.BYTES_PER_ELEMENT);this.typedBufferStride=t/b.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=
this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(b,e,p=this.count-e){e=this.typedBuffer.byteOffset+e*this.stride;return new b(this.buffer,e,this.stride,e+p*this.stride)}getVec(b,e){b*=this.typedBufferStride;return g.set(e,this.typedBuffer[b],this.typedBuffer[b+1],this.typedBuffer[b+2])}setVec(b,e){b*=this.typedBufferStride;this.typedBuffer[b++]=e[0];this.typedBuffer[b++]=e[1];this.typedBuffer[b]=e[2]}get(b,e){return this.typedBuffer[b*this.typedBufferStride+e]}set(b,
e,p){this.typedBuffer[b*this.typedBufferStride+e]=p}setValues(b,e,p,t){b*=this.typedBufferStride;this.typedBuffer[b++]=e;this.typedBuffer[b++]=p;this.typedBuffer[b]=t}copyFrom(b,e,p){const t=this.typedBuffer,m=e.typedBuffer;b*=this.typedBufferStride;e=p*e.typedBufferStride;t[b++]=m[e++];t[b++]=m[e++];t[b]=m[e]}get buffer(){return this.typedBuffer.buffer}}q.ElementCount=3;f.BufferViewVec3Impl=q;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports",
"../../../../chunks/vec4"],function(f,g){class q{constructor(b,e,p=0,t,m){this.TypedArrayConstructor=b;this.start=p;this.elementCount=4;b=this.TypedArrayConstructor;void 0===t&&(t=4*b.BYTES_PER_ELEMENT);const v=0===e.byteLength?0:p;this.typedBuffer=null==m?new b(e,v):new b(e,v,(m-p)/b.BYTES_PER_ELEMENT);this.typedBufferStride=t/b.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(b,
e,p=this.count-e){e=this.typedBuffer.byteOffset+e*this.stride;return new b(this.buffer,e,this.stride,e+p*this.stride)}getVec(b,e){b*=this.typedBufferStride;return g.set(e,this.typedBuffer[b++],this.typedBuffer[b++],this.typedBuffer[b++],this.typedBuffer[b])}setVec(b,e){b*=this.typedBufferStride;this.typedBuffer[b++]=e[0];this.typedBuffer[b++]=e[1];this.typedBuffer[b++]=e[2];this.typedBuffer[b]=e[3]}get(b,e){return this.typedBuffer[b*this.typedBufferStride+e]}set(b,e,p){this.typedBuffer[b*this.typedBufferStride+
e]=p}setValues(b,e,p,t,m){b*=this.typedBufferStride;this.typedBuffer[b++]=e;this.typedBuffer[b++]=p;this.typedBuffer[b++]=t;this.typedBuffer[b]=m}copyFrom(b,e,p){const t=this.typedBuffer,m=e.typedBuffer;b*=this.typedBufferStride;e=p*e.typedBufferStride;t[b++]=m[e++];t[b++]=m[e++];t[b++]=m[e++];t[b]=m[e]}get buffer(){return this.typedBuffer.buffer}}q.ElementCount=4;f.BufferViewVec4Impl=q;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/types":function(){define(["exports"],
function(f){f.elementTypeSize=function(g){switch(g){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};f.isInteger=function(g){switch(g){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1}};f.isSigned=function(g){switch(g){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};f.maximumValue=
function(g){switch(g){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../chunks/vec2f64","../../../../chunks/vec4","../../../../chunks/vec4f64"],function(f,g,q,b){function e(m,v){if(!m)throw v=v||"Assertion",
new t(`${v} at ${Error(v).stack}`);}const p=b.create();class t{constructor(m){this.message=m}toString(){return`AssertException: ${this.message}`}}f.assert=e;f.isTranslationMatrix=function(m){return 1===m[0]&&0===m[1]&&0===m[2]&&0===m[3]&&0===m[4]&&1===m[5]&&0===m[6]&&0===m[7]&&0===m[8]&&0===m[9]&&1===m[10]&&0===m[11]&&1===m[15]};f.logWithBase=function(m,v){return Math.log(m)/Math.log(v)};f.project=function(m,v,c,k,h){p[0]=m[0];p[1]=m[1];p[2]=m[2];p[3]=1;q.transformMat4(p,p,v);2<h.length&&(h[2]=-p[2]);
q.transformMat4(p,p,c);e(0!==p[3]);h[0]=p[0]/p[3];h[1]=p[1]/p[3];h[2]=p[2]/p[3];h[0]=(.5*h[0]+.5)*k[2]+k[0];h[1]=(.5*h[1]+.5)*k[3]+k[1]};f.rayBoxTest=function(m,v,c,k){let h,r=(c[0]-m[0])/v[0],y=(k[0]-m[0])/v[0];r>y&&(h=r,r=y,y=h);let B=(c[1]-m[1])/v[1],u=(k[1]-m[1])/v[1];B>u&&(h=B,B=u,u=h);if(r>u||B>y)return!1;B>r&&(r=B);u<y&&(y=u);c=(c[2]-m[2])/v[2];m=(k[2]-m[2])/v[2];c>m&&(h=c,c=m,m=h);if(r>m||c>y)return!1;m<y&&(y=m);return 0>y?!1:!0};f.rayRay2D=function(m,v,c,k,h,r=g.create()){const y=(k[h]-c[h])*
(v[0]-m[0])-(k[0]-c[0])*(v[h]-m[h]);if(0===y)return!1;c=((k[0]-c[0])*(m[h]-c[h])-(k[h]-c[h])*(m[0]-c[0]))/y;r[0]=m[0]+c*(v[0]-m[0]);r[1]=m[h]+c*(v[h]-m[h]);return!0};f.setMatrixTranslation3=function(m,v,c,k){m[12]=v;m[13]=c;m[14]=k};f.verify=function(m,v){m||console.warn("Verify failed: "+(v||"")+"\n"+Error("verify").stack)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec2f64":function(){define(["exports"],function(f){function g(){return[0,0]}function q(u){return[u[0],
u[1]]}function b(u,z){return[u,z]}function e(u,z=[0,0]){const w=Math.min(2,u.length);for(let A=0;A<w;++A)z[A]=u[A];return z}function p(u,z){return new Float64Array(u,z,2)}function t(){return[0,0]}function m(){return[1,1]}function v(){return[1,0]}function c(){return[0,1]}const k=[0,0],h=[1,1],r=[1,0],y=[0,1],B=Object.freeze(Object.defineProperty({__proto__:null,ONES:h,UNIT_X:r,UNIT_Y:y,ZEROS:k,clone:q,create:g,createView:p,fromArray:e,fromValues:b,ones:m,unitX:v,unitY:c,zeros:t},Symbol.toStringTag,
{value:"Module"}));f.ONES=h;f.UNIT_X=r;f.UNIT_Y=y;f.ZEROS=k;f.clone=q;f.create=g;f.createView=p;f.fromArray=e;f.fromValues=b;f.ones=m;f.unitX=v;f.unitY=c;f.vec2f64=B;f.zeros=t})},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout","../VertexAttribute"],function(f,g,q,b){const e=q.newLayout().vec3f(b.VertexAttribute.POSITION).u16(b.VertexAttribute.COMPONENTINDEX),p=q.newLayout().vec2u8(b.VertexAttribute.SIDENESS);
g=g.glLayout(p);const t=q.newLayout().vec3f(b.VertexAttribute.POSITION0).vec3f(b.VertexAttribute.POSITION1).vec3f(b.VertexAttribute.NORMAL).u16(b.VertexAttribute.COMPONENTINDEX).u8(b.VertexAttribute.VARIANTOFFSET,{glNormalized:!0}).u8(b.VertexAttribute.VARIANTSTROKE).u8(b.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0});q=q.newLayout().vec3f(b.VertexAttribute.POSITION0).vec3f(b.VertexAttribute.POSITION1).vec3f(b.VertexAttribute.NORMALA).vec3f(b.VertexAttribute.NORMALB).u16(b.VertexAttribute.COMPONENTINDEX).u8(b.VertexAttribute.VARIANTOFFSET,
{glNormalized:!0}).u8(b.VertexAttribute.VARIANTSTROKE).u8(b.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0});b=new Map([[b.VertexAttribute.POSITION0,0],[b.VertexAttribute.POSITION1,1],[b.VertexAttribute.COMPONENTINDEX,2],[b.VertexAttribute.VARIANTOFFSET,3],[b.VertexAttribute.VARIANTSTROKE,4],[b.VertexAttribute.VARIANTEXTENSION,5],[b.VertexAttribute.NORMAL,6],[b.VertexAttribute.NORMALA,6],[b.VertexAttribute.NORMALB,7],[b.VertexAttribute.SIDENESS,8]]);f.EdgeInputBufferLayout=e;f.EdgeShaderAttributeLocations=
b;f.RegularEdgeInstancesLayout=t;f.SilhouetteEdgeInstancesLayout=q;f.VertexLayout=p;f.glVertexLayout=g;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/buffer/glUtil":function(){define(["exports","../../../webgl/enums","../../../webgl/VertexElementDescriptor"],function(f,g,q){const b={u8:g.DataType.UNSIGNED_BYTE,u16:g.DataType.UNSIGNED_SHORT,u32:g.DataType.UNSIGNED_INT,i8:g.DataType.BYTE,i16:g.DataType.SHORT,i32:g.DataType.INT,f32:g.DataType.FLOAT};f.glLayout=
function(e,p=0){const t=e.stride;return Array.from(e.fields.keys()).map(m=>{const v=e.fields.get(m),c=v.constructor.ElementCount;var k=b[v.constructor.ElementType];if(!k)throw Error("BufferType not supported in WebGL");return new q.VertexElementDescriptor(m,c,k,v.offset,t,!(!v.optional||!v.optional.glNormalized),p)})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],function(f){f.VertexAttribute=void 0;(function(g){g.POSITION=
"position";g.NORMAL="normal";g.NORMALCOMPRESSED="normalCompressed";g.UV0="uv0";g.AUXPOS1="auxpos1";g.AUXPOS2="auxpos2";g.COLOR="color";g.SYMBOLCOLOR="symbolColor";g.SIZE="size";g.TANGENT="tangent";g.OFFSET="offset";g.PERSPECTIVEDIVIDE="perspectiveDivide";g.SUBDIVISIONFACTOR="subdivisionFactor";g.COLORFEATUREATTRIBUTE="colorFeatureAttribute";g.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";g.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";g.DISTANCETOSTART="distanceToStart";g.UVMAPSPACE="uvMapSpace";
g.BOUNDINGRECT="boundingRect";g.UVREGION="uvRegion";g.PROFILERIGHT="profileRight";g.PROFILEUP="profileUp";g.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";g.FEATUREVALUE="featureValue";g.INSTANCEMODELORIGINHI="instanceModelOriginHi";g.INSTANCEMODELORIGINLO="instanceModelOriginLo";g.INSTANCEMODEL="instanceModel";g.INSTANCEMODELNORMAL="instanceModelNormal";g.INSTANCECOLOR="instanceColor";g.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute";g.LOCALTRANSFORM="localTransform";g.GLOBALTRANSFORM="globalTransform";
g.BOUNDINGSPHERE="boundingSphere";g.MODELORIGIN="modelOrigin";g.MODELSCALEFACTORS="modelScaleFactors";g.FEATUREATTRIBUTE="featureAttribute";g.STATE="state";g.LODLEVEL="lodLevel";g.POSITION0="position0";g.POSITION1="position1";g.NORMALA="normalA";g.NORMALB="normalB";g.COMPONENTINDEX="componentIndex";g.VARIANTOFFSET="variantOffset";g.VARIANTSTROKE="variantStroke";g.VARIANTEXTENSION="variantExtension";g.SIDENESS="sideness";g.START="start";g.END="end";g.UP="up";g.EXTRUDE="extrude";g.OBJECTANDLAYERIDCOLOR=
"objectAndLayerIdColor";g.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})(f.VertexAttribute||(f.VertexAttribute={}));f.affectsGeometry=function(g){return g===f.VertexAttribute.POSITION};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define(["exports","../../../../../core/arrayUtils","../../../../../core/mathUtils","../../../../../chunks/vec3","../../../../../chunks/vec3f64"],function(f,g,q,
b,e){function p(h,r){const y=q.acosClamped(h.cosAngle),B=v.fwd,u=v.ortho;b.direction(B,h.position1,h.position0);h=0<b.dot(b.cross(u,h.faceNormal0,h.faceNormal1),B)?-1:1;return y*h>r}function t(h){const r=h.faces.length/3,y=h.faces;h=h.neighbors;var B=0;for(var u=0;u<r;u++){var z=h[3*u+1],w=h[3*u+2],A=y[3*u],G=y[3*u+1],E=y[3*u+2];B+=-1===h[3*u]||A<G?1:0;B+=-1===z||G<E?1:0;B+=-1===w||E<A?1:0}B=new Int32Array(4*B);u=0;for(z=0;z<r;z++){w=h[3*z];A=h[3*z+1];G=h[3*z+2];E=y[3*z];const K=y[3*z+1],H=y[3*z+
2];if(-1===w||E<K)B[u++]=E,B[u++]=K,B[u++]=z,B[u++]=w;if(-1===A||K<H)B[u++]=K,B[u++]=H,B[u++]=z,B[u++]=A;if(-1===G||H<E)B[u++]=H,B[u++]=E,B[u++]=z,B[u++]=G}return B}function m(h){const r=h.faces.length/3,y=h.vertices.position;h=h.faces;const B=c.v0,u=c.v1,z=c.v2,w=new Float32Array(3*r);for(let A=0;A<r;A++){const G=h[3*A+1],E=h[3*A+2];y.getVec(h[3*A],B);y.getVec(G,u);y.getVec(E,z);b.subtract(u,u,B);b.subtract(z,z,B);b.cross(B,u,z);b.normalize(B,B);w[3*A]=B[0];w[3*A+1]=B[1];w[3*A+2]=B[2]}return w}f.EdgeType=
void 0;(function(h){h[h.SOLID=0]="SOLID";h[h.SKETCH=1]="SKETCH"})(f.EdgeType||(f.EdgeType={}));const v={edge:{position0:e.create(),position1:e.create(),faceNormal0:e.create(),faceNormal1:e.create(),componentIndex:0,cosAngle:0},ortho:e.create(),fwd:e.create()},c={v0:e.create(),v1:e.create(),v2:e.create()},k={anglePlanar:4,angleSignificantEdge:35};f.extractEdges=function(h,r,y,B=k){const u=h.vertices.position;var z=h.vertices.componentIndex,w=q.deg2rad(B.anglePlanar);B=q.deg2rad(B.angleSignificantEdge);
const A=Math.cos(B),G=Math.cos(w),E=v.edge,K=E.position0,H=E.position1,J=E.faceNormal0,N=E.faceNormal1,L=m(h),O=t(h),P=O.length/4;h=r.allocate(P);B=0;const S=y.allocate(P);let R=0,U=0,V=0;const W=g.range(0,P),T=new Float32Array(P);T.forEach((l,n,x)=>{u.getVec(O[4*n],K);u.getVec(O[4*n+1],H);x[n]=b.distance(K,H)});W.sort((l,n)=>T[n]-T[l]);const X=[],Y=[];for(let l=0;l<P;l++){var Q=W[l];const n=T[Q],x=O[4*Q],F=O[4*Q+1],I=O[4*Q+2];Q=O[4*Q+3];const M=-1===Q;u.getVec(x,K);u.getVec(F,H);if(M)b.set(J,L[3*
I],L[3*I+1],L[3*I+2]),b.copy(N,J),E.componentIndex=z.get(x),E.cosAngle=b.dot(J,N);else{b.set(J,L[3*I],L[3*I+1],L[3*I+2]);b.set(N,L[3*Q],L[3*Q+1],L[3*Q+2]);E.componentIndex=z.get(x);E.cosAngle=b.dot(J,N);if(E.cosAngle>G)continue;-.9999>E.cosAngle&&b.copy(N,J)}U+=n;V++;M||E.cosAngle<A?(r.write(h,B++,E),X.push(n)):p(E,w)&&(y.write(S,R++,E),Y.push(n))}z=new Float32Array(X.reverse());w=new Float32Array(Y.reverse());return{regular:{instancesData:r.trim(h,B),lodInfo:{lengths:z}},silhouette:{instancesData:y.trim(S,
R),lodInfo:{lengths:w}},averageEdgeLength:U/V}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeProcessing":function(){define("exports ../../../../../geometry/support/meshUtils/deduplicate ../../../support/meshProcessing ../../../support/buffer/InterleavedLayout ../VertexAttribute ./bufferLayouts ./edgeBufferWriters ./edgePreprocessing".split(" "),function(f,g,q,b,e,p,t,m){function v(r,y,B,u){if(y)return y=q.computeNeighbors(B,u,r.count),
new c(B,u,y,r);r=g.deduplicate(r.buffer,r.stride/4,{originalIndices:B,originalIndicesLength:u});u=q.computeNeighbors(r.indices,u,r.uniqueCount);return{faces:r.indices,facesLength:r.indices.length,neighbors:u,vertices:p.EdgeInputBufferLayout.createView(r.buffer)}}class c{constructor(r,y,B,u){this.faces=r;this.facesLength=y;this.neighbors=B;this.vertices=u}}const k=new t.RegularEdgeBufferWriter,h=new t.SilhouetteEdgeBufferWriter;t=b.newLayout().vec3f(e.VertexAttribute.POSITION0).vec3f(e.VertexAttribute.POSITION1);
b=b.newLayout().vec3f(e.VertexAttribute.POSITION0).vec3f(e.VertexAttribute.POSITION1).u16(e.VertexAttribute.COMPONENTINDEX);f.extract=function(r){const y=v(r.data,r.skipDeduplicate,r.indices,r.indicesLength);k.updateSettings(r.writerSettings);h.updateSettings(r.writerSettings);return m.extractEdges(y,k,h)};f.extractComponentsEdgeLocationsLayout=b;f.extractEdgeInformation=v;f.extractEdgeLocationsLayout=t;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/meshUtils/deduplicate":function(){define(["exports",
"../../../core/mathUtils","../Indices"],function(f,g,q){let b=null;f.deduplicate=function(e,p,t){var m=Array.isArray(e),v=m?e.length/p:e.byteLength/(4*p),c=m?e:new Uint32Array(e,0,v*p),k=t?.minReduction??0;const h=(e=t?.originalIndices||null)?e.length:0;var r=t?.componentOffsets||null;t=0;if(r)for(var y=0;y<r.length-1;y++){var B=r[y+1]-r[y];B>t&&(t=B)}else t=v;var u=Math.floor(1.1*t)+1;if(null==b||b.length<2*u)b=new Uint32Array(g.nextHighestPowerOfTwo(2*u));for(t=0;t<2*u;t++)b[t]=0;t=0;const z=(B=
!!r&&!!e)?h:v;y=q.newIndexArray(v);var w=new Uint32Array(h),A=0!==k?Math.ceil(7.84*1.96/(k*k)*k*(1-k)):z,G=1,E=r?r[1]:z;for(let L=0;L<z;L++){if(L===A){var K=1-t/L;if(K+1.96*Math.sqrt(K*(1-K)/L)<k)return null;A*=2}if(L===E){for(E=0;E<2*u;E++)b[E]=0;if(e)for(E=r[G-1];E<r[G];E++)w[E]=y[e[E]];E=r[++G]}K=B?e[L]:L;const O=K*p;var H=0;for(var J=0;J<p;J++)H=c[O+J]+H|0,H=H+(H<<11)+(H>>>2)|0;H>>>=0;J=H%u;let P=t;for(;0!==b[2*J+1];){if(b[2*J]===H){const S=b[2*J+1]-1;var N=S*p;a:{for(let R=0;R<p;R++)if(c[O+R]!==
c[N+R]){N=!1;break a}N=!0}if(N){P=y[S];break}}J++;J>=u&&(J-=u)}P===t&&(b[2*J]=H,b[2*J+1]=K+1,t++);y[K]=P}if(0!==k&&1-t/v<k)return null;if(B){for(v=r[G-1];v<w.length;v++)w[v]=y[e[v]];y=q.compactIndices(w)}m=m?Array(t):new Uint32Array(t*p);t=0;for(A=0;A<z;A++)if(y[A]===t){v=c;k=(B?e[A]:A)*p;r=m;u=t*p;w=p;for(G=0;G<w;G++)r[u+G]=v[k+G];t++}if(e&&!B){p=new Uint32Array(h);for(c=0;c<p.length;c++)p[c]=y[e[c]];y=q.compactIndices(p)}return{buffer:Array.isArray(m)?m:m.buffer,indices:y,uniqueCount:t}};Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/Indices":function(){define(["exports","../../core/typedArrayUtil"],function(f,g){function q(c){let k=!0;for(const h of c){if(65536<=h)return g.isArray(c)?new Uint32Array(c):c;256<=h&&(k=!1)}return k?new Uint8Array(c):new Uint16Array(c)}function b(c){if(1===c)return t;if(c<g.nativeArrayMaxSize)return Array.from(new Uint16Array(m.buffer,0,c));if(c<m.length)return new Uint16Array(m.buffer,0,c);if(c>p.length){p=new Uint32Array(Math.max(2*
p.length,c));for(let k=0;k<p.length;k++)p[k]=k}return new Uint32Array(p.buffer,0,c)}function e(c){if(1===c)return t;if(c<g.nativeArrayMaxSize)return Array(c).fill(0);c>v.length&&(v=new Uint8Array(Math.max(2*v.length,c)));return new Uint8Array(v.buffer,0,c)}let p=(()=>{const c=new Uint32Array(131072);for(let k=0;k<c.length;++k)c[k]=k;return c})();const t=[0],m=(()=>{const c=new Uint16Array(65536);for(let k=0;k<c.length;++k)c[k]=k;return c})();let v=new Uint8Array(65536);f.compactIndices=function(c){if(g.isArray(c)){if(c.length<
g.nativeArrayMaxSize)return c}else if(c.length<g.nativeArrayMaxSize)return Array.from(c);let k=!0,h=!0;c.some((r,y)=>{k=k&&0===r;h=h&&r===y;return!k&&!h});return k?e(c.length):h?b(c.length):g.isArray(c)||c.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?q(c):c};f.getContinuousIndexArray=b;f.getZeroIndexArray=e;f.newIndexArray=function(c){return c<=g.nativeArrayMaxSize?Array(c):65536>=c?new Uint16Array(c):new Uint32Array(c)};f.newIntArray=function(c){return c<=g.nativeArrayMaxSize?Array(c):new Uint32Array(c)};
Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/meshProcessing":function(){define(["exports"],function(f){f.computeNeighbors=function(g,q,b){q/=3;const e=new Uint32Array(b+1),p=new Uint32Array(b+1);var t=(u,z)=>{u<z?e[u+1]++:p[z+1]++};for(var m=0;m<q;m++){var v=g[3*m],c=g[3*m+1],k=g[3*m+2];t(v,c);t(c,k);t(k,v)}m=t=0;for(v=0;v<b;v++)c=e[v+1],k=p[v+1],e[v+1]=t,p[v+1]=m,t+=c,m+=k;const h=new Uint32Array(6*q),r=e[b];t=(u,z,w)=>{u<z?(u=e[u+1]++,h[2*u]=z,h[2*u+1]=
w):(z=p[z+1]++,h[2*r+2*z]=u,h[2*r+2*z+1]=w)};for(m=0;m<q;m++)v=g[3*m],c=g[3*m+1],k=g[3*m+2],t(v,c,m),t(c,k,m),t(k,v,m);t=(u,z)=>{const w=2*u;u=z-u;for(z=1;z<u;z++){const A=h[w+2*z],G=h[w+2*z+1];let E=z-1;for(E;0<=E&&h[w+2*E]>A;E--)h[w+2*E+2]=h[w+2*E],h[w+2*E+3]=h[w+2*E+1];h[w+2*E+2]=A;h[w+2*E+3]=G}};for(m=0;m<b;m++)t(e[m],e[m+1]),t(r+p[m],r+p[m+1]);const y=new Int32Array(3*q),B=(u,z)=>u===g[3*z]?0:u===g[3*z+1]?1:u===g[3*z+2]?2:-1;q=(u,z)=>{u=B(u,z);y[3*z+u]=-1};t=(u,z,w,A)=>{u=B(u,z);y[3*z+u]=A;w=
B(w,A);y[3*A+w]=z};for(m=0;m<b;m++){v=e[m];c=e[m+1];k=p[m];const u=p[m+1];for(;v<c&&k<u;){const z=h[2*v],w=h[2*r+2*k];z===w?(t(m,h[2*v+1],w,h[2*r+2*k+1]),v++,k++):z<w?(q(m,h[2*v+1]),v++):(q(w,h[2*r+2*k+1]),k++)}for(;v<c;)q(m,h[2*v+1]),v++;for(;k<u;)q(h[2*r+2*k],h[2*r+2*k+1]),k++}return y};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define("exports ../../../../../core/RandomLCG ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../support/buffer/glUtil ./bufferLayouts".split(" "),
function(f,g,q,b,e,p){function t(w){const A=k;A[0]=w.position0[0];A[1]=w.position0[1];A[2]=w.position0[2];A[3]=w.position1[0];A[4]=w.position1[1];A[5]=w.position1[2];r[0]=5381;for(w=0;w<h.length;w++)r[0]=31*r[0]+h[w];return r[0]}function m(w){const A=k;A[0]=v(w.position0[0]);A[1]=v(w.position0[1]);A[2]=v(w.position0[2]);A[3]=v(w.position1[0]);A[4]=v(w.position1[1]);A[5]=v(w.position1[2]);r[0]=5381;for(w=0;w<h.length;w++)r[0]=31*r[0]+h[w];return r[0]}function v(w){return Math.round(1E4*w)/1E4}class c{updateSettings(w){this.settings=
w;this._edgeHashFunction=w.reducedPrecision?m:t}write(w,A,G){var E=this._edgeHashFunction(G);z.seed=E;E=z.getIntRange(0,255);const K=z.getIntRange(0,this.settings.variants-1);var H=z.getFloat();H=-(1-Math.min(H/.7,1))+Math.max(0,H-.7)/(1-.7);H=255*(Math.abs(H)**1.2*(0>H?-1:1)*.5+.5);w.position0.setVec(A,G.position0);w.position1.setVec(A,G.position1);w.componentIndex.set(A,G.componentIndex);w.variantOffset.set(A,E);w.variantStroke.set(A,K);w.variantExtension.set(A,H)}trim(w,A){return w.slice(0,A)}}
const k=new Float32Array(6),h=new Uint32Array(k.buffer),r=new Uint32Array(1);class y{constructor(){this._commonWriter=new c}updateSettings(w){this._commonWriter.updateSettings(w)}allocate(w){return p.RegularEdgeInstancesLayout.createBuffer(w)}write(w,A,G){this._commonWriter.write(w,A,G);q.add(u,G.faceNormal0,G.faceNormal1);q.normalize(u,u);w.normal.setVec(A,u)}trim(w,A){return this._commonWriter.trim(w,A)}}y.Layout=p.RegularEdgeInstancesLayout;y.glLayout=e.glLayout(p.RegularEdgeInstancesLayout,1);
class B{constructor(){this._commonWriter=new c}updateSettings(w){this._commonWriter.updateSettings(w)}allocate(w){return p.SilhouetteEdgeInstancesLayout.createBuffer(w)}write(w,A,G){this._commonWriter.write(w,A,G);w.normalA.setVec(A,G.faceNormal0);w.normalB.setVec(A,G.faceNormal1)}trim(w,A){return this._commonWriter.trim(w,A)}}B.Layout=p.SilhouetteEdgeInstancesLayout;B.glLayout=e.glLayout(p.SilhouetteEdgeInstancesLayout,1);const u=b.create(),z=new g;f.CommonBufferWriter=c;f.RegularEdgeBufferWriter=
y;f.SilhouetteEdgeBufferWriter=B;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define(["../../../support/buffer/workerHelper","./bufferLayouts","./edgePreprocessing","./edgeProcessing"],function(f,g,q,b){function e(h){return{data:g.EdgeInputBufferLayout.createView(h.dataBuffer),indices:"Uint32Array"===h.indicesType?new Uint32Array(h.indices):"Uint16Array"===h.indicesType?new Uint16Array(h.indices):h.indices,indicesLength:h.indicesLength,writerSettings:h.writerSettings,skipDeduplicate:h.skipDeduplicate}}class p{async extract(h){var r=e(h);h=b.extract(r);r=[r.data.buffer];r.push(h.regular.lodInfo.lengths.buffer);
r.push(h.silhouette.lodInfo.lengths.buffer);return{result:{regular:{instancesData:f.packInterleavedBuffer(h.regular.instancesData,r),lodInfo:{lengths:h.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:f.packInterleavedBuffer(h.silhouette.instancesData,r),lodInfo:{lengths:h.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:h.averageEdgeLength},transferList:r}}async extractComponentsEdgeLocations(h){h=e(h);h=b.extractEdgeInformation(h.data,h.skipDeduplicate,h.indices,h.indicesLength);
h=q.extractEdges(h,c,k);const r=[];return{result:f.packInterleavedBuffer(h.regular.instancesData,r),transferList:r}}async extractEdgeLocations(h){h=e(h);h=b.extractEdgeInformation(h.data,h.skipDeduplicate,h.indices,h.indicesLength);h=q.extractEdges(h,v,k);const r=[];return{result:f.packInterleavedBuffer(h.regular.instancesData,r),transferList:r}}}class t{allocate(h){return b.extractEdgeLocationsLayout.createBuffer(h)}trim(h,r){return h.slice(0,r)}write(h,r,y){h.position0.setVec(r,y.position0);h.position1.setVec(r,
y.position1)}}class m{allocate(h){return b.extractComponentsEdgeLocationsLayout.createBuffer(h)}trim(h,r){return h.slice(0,r)}write(h,r,y){h.position0.setVec(r,y.position0);h.position1.setVec(r,y.position1);h.componentIndex.set(r,y.componentIndex)}}const v=new t,c=new m,k={allocate:()=>null,write:()=>{},trim:()=>null};return p});