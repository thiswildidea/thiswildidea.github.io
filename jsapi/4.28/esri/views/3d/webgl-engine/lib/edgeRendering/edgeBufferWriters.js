// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../../../../../core/RandomLCG ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../support/buffer/glUtil ./bufferLayouts".split(" "),function(h,w,u,x,v,f){function y(a){const b=n;b[0]=a.position0[0];b[1]=a.position0[1];b[2]=a.position0[2];b[3]=a.position1[0];b[4]=a.position1[1];b[5]=a.position1[2];d[0]=5381;for(a=0;a<k.length;a++)d[0]=31*d[0]+k[a];return d[0]}function z(a){const b=n;b[0]=g(a.position0[0]);b[1]=g(a.position0[1]);b[2]=g(a.position0[2]);b[3]=g(a.position1[0]);
b[4]=g(a.position1[1]);b[5]=g(a.position1[2]);d[0]=5381;for(a=0;a<k.length;a++)d[0]=31*d[0]+k[a];return d[0]}function g(a){return Math.round(1E4*a)/1E4}class p{updateSettings(a){this.settings=a;this._edgeHashFunction=a.reducedPrecision?z:y}write(a,b,c){var q=this._edgeHashFunction(c);l.seed=q;q=l.getIntRange(0,255);const A=l.getIntRange(0,this.settings.variants-1);var e=l.getFloat();e=-(1-Math.min(e/.7,1))+Math.max(0,e-.7)/(1-.7);e=255*(Math.abs(e)**1.2*(0>e?-1:1)*.5+.5);a.position0.setVec(b,c.position0);
a.position1.setVec(b,c.position1);a.componentIndex.set(b,c.componentIndex);a.variantOffset.set(b,q);a.variantStroke.set(b,A);a.variantExtension.set(b,e)}trim(a,b){return a.slice(0,b)}}const n=new Float32Array(6),k=new Uint32Array(n.buffer),d=new Uint32Array(1);class r{constructor(){this._commonWriter=new p}updateSettings(a){this._commonWriter.updateSettings(a)}allocate(a){return f.RegularEdgeInstancesLayout.createBuffer(a)}write(a,b,c){this._commonWriter.write(a,b,c);u.add(m,c.faceNormal0,c.faceNormal1);
u.normalize(m,m);a.normal.setVec(b,m)}trim(a,b){return this._commonWriter.trim(a,b)}}r.Layout=f.RegularEdgeInstancesLayout;r.glLayout=v.glLayout(f.RegularEdgeInstancesLayout,1);class t{constructor(){this._commonWriter=new p}updateSettings(a){this._commonWriter.updateSettings(a)}allocate(a){return f.SilhouetteEdgeInstancesLayout.createBuffer(a)}write(a,b,c){this._commonWriter.write(a,b,c);a.normalA.setVec(b,c.faceNormal0);a.normalB.setVec(b,c.faceNormal1)}trim(a,b){return this._commonWriter.trim(a,
b)}}t.Layout=f.SilhouetteEdgeInstancesLayout;t.glLayout=v.glLayout(f.SilhouetteEdgeInstancesLayout,1);const m=x.create(),l=new w;h.CommonBufferWriter=p;h.RegularEdgeBufferWriter=r;h.SilhouetteEdgeBufferWriter=t;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});