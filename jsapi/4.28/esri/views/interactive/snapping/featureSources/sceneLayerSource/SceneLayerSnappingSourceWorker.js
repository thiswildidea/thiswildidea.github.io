// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(c,q,n,d,l,z){function y(F){return F?{origin:l.clone(F.origin),vector:l.clone(F.vector)}:{origin:l.create(),vector:l.create()}}function t(F,v){const K=G.get();K.origin=F;K.vector=v;return K}function A(F,v,K=y()){d.copy(K.origin,F);d.copy(K.vector,v);return K}function e(F,v){v=d.subtract(z.sv3d.get(),v,F.origin);
var K=d.dot(F.vector,v);const r=d.dot(F.vector,F.vector);K=q.clamp(K/r,0,1);F=d.subtract(z.sv3d.get(),d.scale(z.sv3d.get(),F.vector,K),v);return d.dot(F,F)}function k(F,v,K,r,B){const {vector:Q,origin:O}=F;v=d.subtract(z.sv3d.get(),v,O);v=d.dot(Q,v)/d.squaredLength(Q);d.scale(B,Q,q.clamp(v,K,r));return d.add(B,B,F.origin)}function m(F,v,K,r){const B=F.origin;var Q=d.add(z.sv3d.get(),B,F.vector);F=v.origin;var O=d.add(z.sv3d.get(),F,v.vector),Y=z.sv3d.get();v=z.sv3d.get();Y[0]=B[0]-F[0];Y[1]=B[1]-
F[1];Y[2]=B[2]-F[2];v[0]=O[0]-F[0];v[1]=O[1]-F[1];v[2]=O[2]-F[2];if(1E-6>Math.abs(v[0])&&1E-6>Math.abs(v[1])&&1E-6>Math.abs(v[2]))return!1;O=z.sv3d.get();O[0]=Q[0]-B[0];O[1]=Q[1]-B[1];O[2]=Q[2]-B[2];if(1E-6>Math.abs(O[0])&&1E-6>Math.abs(O[1])&&1E-6>Math.abs(O[2]))return!1;Q=Y[0]*v[0]+Y[1]*v[1]+Y[2]*v[2];var Z=v[0]*O[0]+v[1]*O[1]+v[2]*O[2];const da=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],ja=(O[0]*O[0]+O[1]*O[1]+O[2]*O[2])*da-Z*Z;if(1E-6>Math.abs(ja))return!1;Y=(Q*Z-(Y[0]*O[0]+Y[1]*O[1]+Y[2]*O[2])*da)/ja;Q=(Q+
Z*Y)/da;K&&(Y=q.clamp(Y,0,1),Q=q.clamp(Q,0,1));K=z.sv3d.get();Z=z.sv3d.get();K[0]=B[0]+Y*O[0];K[1]=B[1]+Y*O[1];K[2]=B[2]+Y*O[2];Z[0]=F[0]+Q*v[0];Z[1]=F[1]+Q*v[1];Z[2]=F[2]+Q*v[2];r.tA=Y;r.tB=Q;r.pA=K;r.pB=Z;r.distance2=d.squaredDistance(K,Z);return!0}const C={tA:0,tB:0,pA:l.create(),pB:l.create(),distance2:0},G=new n.ObjectStack(()=>y());c.closestLineSegmentDistance2=function(F,v){return m(F,v,!0,C)?C.distance2:null};c.closestLineSegmentPoint=function(F,v,K){return m(F,v,!0,C)?(d.copy(K,C.pA),!0):
!1};c.closestRayDistance2=function(F,v){if(m(F,t(v.origin,v.direction),!1,C)){const {tA:K,pB:r,distance2:B}=C;if(0<=K&&1>=K)return B;if(0>K)return d.squaredDistance(F.origin,r);if(1<K)return d.squaredDistance(d.add(z.sv3d.get(),F.origin,F.vector),r)}return null};c.copy=function(F,v=y()){return A(F.origin,F.vector,v)};c.create=y;c.distance=function(F,v){return Math.sqrt(e(F,v))};c.distance2=e;c.fromPoints=function(F,v,K=y()){d.copy(K.origin,F);d.subtract(K.vector,v,F);return K};c.fromValues=A;c.pointAt=
function(F,v,K){return d.add(K,F.origin,d.scale(K,F.vector,v))};c.projectPoint=function(F,v,K){return k(F,v,0,1,K)};c.projectPointClamp=k;c.wrap=t;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(c,q){class n{constructor(d){this._allocator=d;this._items=[];this._itemsPtr=0;this._grow()}get(){0===this._itemsPtr&&q.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]}_reset(){this._items.length=
Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0}_grow(){for(let d=0;d<Math.max(8,Math.min(this._items.length,1024));d++)this._items.push(this._allocator())}}c.ObjectStack=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(c,q){const n=q.VectorStack.createVec2f64(),d=q.VectorStack.createVec3f64(),l=q.VectorStack.createVec4f64(),
z=q.VectorStack.createMat3f64(),y=q.VectorStack.createMat4f64();q=q.VectorStack.createQuatf64();c.sm3d=z;c.sm4d=y;c.sq4d=q;c.sv2d=n;c.sv3d=d;c.sv4d=l;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/VectorStack":function(){define("exports ./ByteSizeUnit ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),function(c,q,n,d,l,z,y,t,A){class e{constructor(m,C,G){this._itemByteSize=m;this._itemCreate=
C;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(G/this._itemByteSize)}get(){0===this._itemsPtr&&n.nextTick(()=>this._reset());const m=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=m;){const C=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let G=0;G<this._itemsPerBuffer;++G)this._items.push(this._itemCreate(C,G*this._itemByteSize));this._buffers.push(C)}return this._items[this._itemsPtr++]}_reset(){const m=2*(Math.floor(this._itemsPtr/
this._itemsPerBuffer)+1);for(;this._buffers.length>m;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(m=k){return new e(16,y.createView,m)}static createVec3f64(m=k){return new e(24,t.createView,m)}static createVec4f64(m=k){return new e(32,A.createView,m)}static createMat3f64(m=k){return new e(72,d.createView,m)}static createMat4f64(m=k){return new e(128,l.createView,m)}static createQuatf64(m=k){return new e(32,z.createView,m)}get test(){return{size:this._buffers.length*
this._itemsPerBuffer*this._itemByteSize}}}const k=4*q.ByteSizeUnit.KILOBYTES;c.VectorStack=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(c){c.ByteSizeUnit=void 0;var q=c.ByteSizeUnit||(c.ByteSizeUnit={});q[q.KILOBYTES=1024]="KILOBYTES";q[q.MEGABYTES=1048576]="MEGABYTES";q[q.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat3f64":function(){define(["exports"],
function(c){function q(){return[1,0,0,0,1,0,0,0,1]}function n(y){return[y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8]]}function d(y,t,A,e,k,m,C,G,F){return[y,t,A,e,k,m,C,G,F]}function l(y,t){return new Float64Array(y,t,9)}const z=Object.freeze(Object.defineProperty({__proto__:null,clone:n,create:q,createView:l,fromValues:d},Symbol.toStringTag,{value:"Module"}));c.clone=n;c.create=q;c.createView=l;c.fromValues=d;c.mat3f64=z})},"esri/chunks/mat4f64":function(){define(["exports"],function(c){function q(){return[1,
0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function n(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function d(t,A,e,k,m,C,G,F,v,K,r,B,Q,O,Y,Z){return[t,A,e,k,m,C,G,F,v,K,r,B,Q,O,Y,Z]}function l(t,A){return new Float64Array(t,A,16)}const z=q(),y=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:z,clone:n,create:q,createView:l,fromValues:d},Symbol.toStringTag,{value:"Module"}));c.IDENTITY=z;c.clone=n;c.create=q;c.createView=l;c.fromValues=d;c.mat4f64=
y})},"esri/chunks/quatf64":function(){define(["exports"],function(c){function q(){return[0,0,0,1]}function n(t){return[t[0],t[1],t[2],t[3]]}function d(t,A,e,k){return[t,A,e,k]}function l(t,A){return new Float64Array(t,A,4)}const z=q(),y=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:z,clone:n,create:q,createView:l,fromValues:d},Symbol.toStringTag,{value:"Module"}));c.IDENTITY=z;c.clone=n;c.create=q;c.createView=l;c.fromValues=d;c.quatf64=y})},"esri/chunks/vec2f64":function(){define(["exports"],
function(c){function q(){return[0,0]}function n(v){return[v[0],v[1]]}function d(v,K){return[v,K]}function l(v,K=[0,0]){const r=Math.min(2,v.length);for(let B=0;B<r;++B)K[B]=v[B];return K}function z(v,K){return new Float64Array(v,K,2)}function y(){return[0,0]}function t(){return[1,1]}function A(){return[1,0]}function e(){return[0,1]}const k=[0,0],m=[1,1],C=[1,0],G=[0,1],F=Object.freeze(Object.defineProperty({__proto__:null,ONES:m,UNIT_X:C,UNIT_Y:G,ZEROS:k,clone:n,create:q,createView:z,fromArray:l,
fromValues:d,ones:t,unitX:A,unitY:e,zeros:y},Symbol.toStringTag,{value:"Module"}));c.ONES=m;c.UNIT_X=C;c.UNIT_Y=G;c.ZEROS=k;c.clone=n;c.create=q;c.createView=z;c.fromArray=l;c.fromValues=d;c.ones=t;c.unitX=A;c.unitY=e;c.vec2f64=F;c.zeros=y})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ./common ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(c,q,n,d,l,z,y,t,A,e,k,m,C,G){function F(){return A.create()}function v(U,a=F()){return t.copy(a,U)}function K(U,a){return A.fromValues(U[0],U[1],U[2],a)}function r(U){return U}function B(U){U[0]=U[1]=U[2]=U[3]=0}function Q(U,a){U[0]=U[1]=U[2]=0;U[3]=a;return U}function O(U){return U[3]}function Y(U){return U}function Z(U,a,b,h){return A.fromValues(U,a,b,h)}function da(U,a,b){U!==b&&z.copy(b,U);b[3]=U[3]+a;return b}function ja(U,a,b){n.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported");
return U===b?b:v(U,b)}function oa(U,a,b){if(null==a||!pa(U,a,la))return!1;let {t0:h,t1:p}=la;if(0>h||p<h&&0<p)h=p;if(0>h)return!1;if(b){const {origin:D,direction:J}=a;b[0]=D[0]+J[0]*h;b[1]=D[1]+J[1]*h;b[2]=D[2]+J[2]*h}return!0}function ka(U,a,b){a=m.fromPoints(a,b);if(!pa(U,a,la))return[];const {origin:h,direction:p}=a,{t0:D,t1:J}=la;a=P=>{const R=y.create();z.scaleAndAdd(R,h,p,P);return g(U,R,R)};return Math.abs(D-J)<e.getEpsilon()?[a(D)]:[a(D),a(J)]}function pa(U,a,b){const {origin:h,direction:p}=
a,D=f;D[0]=h[0]-U[0];D[1]=h[1]-U[1];D[2]=h[2]-U[2];a=p[0]*p[0]+p[1]*p[1]+p[2]*p[2];if(0===a)return!1;const J=2*(p[0]*D[0]+p[1]*D[1]+p[2]*D[2]);U=J*J-4*a*(D[0]*D[0]+D[1]*D[1]+D[2]*D[2]-U[3]*U[3]);if(0>U)return!1;U=Math.sqrt(U);b.t0=(-J-U)/(2*a);b.t1=(-J+U)/(2*a);return!0}function va(U,a){return oa(U,a,null)}function ua(U,a,b){if(oa(U,a,b))return b;U=I(U,a,G.sv3d.get());z.add(b,a.origin,z.scale(G.sv3d.get(),a.direction,z.distance(a.origin,U)/z.length(a.direction)));return b}function I(U,a,b){const h=
G.sv3d.get(),p=G.sm4d.get();z.cross(h,a.origin,a.direction);const D=U[3];z.cross(b,h,a.origin);z.scale(b,b,1/z.length(b)*D);U=H(U,a.origin);a=C.angle(a.origin,b);l.fromRotation(p,a+U,h);z.transformMat4(b,b,p);return b}function N(U,a,b){if(oa(U,a,b))return b;m.closestPoint(a,U,b);return g(U,b,b)}function g(U,a,b){a=z.subtract(G.sv3d.get(),a,U);a=z.scale(G.sv3d.get(),a,U[3]/z.length(a));return z.add(b,a,U)}function x(U,a){a=z.subtract(G.sv3d.get(),a,U);a=z.squaredLength(a);return Math.sqrt(Math.abs(a-
U[3]*U[3]))}function H(U,a){a=z.subtract(G.sv3d.get(),a,U);a=z.length(a);U=U[3];return d.acosClamped(U/(U+Math.abs(U-a)))}function T(U,a,b,h){U=z.subtract(w,a,U);switch(b){case k.Axis.X:return b=d.cartesianToSpherical(U,w)[2],z.set(h,-Math.sin(b),Math.cos(b),0);case k.Axis.Y:return U=d.cartesianToSpherical(U,w),b=U[1],U=U[2],a=Math.sin(b),z.set(h,-a*Math.cos(U),-a*Math.sin(U),Math.cos(b));case k.Axis.Z:return z.normalize(h,U)}}function X(U,a){a=z.subtract(aa,a,U);return z.length(a)-U[3]}function u(U,
a,b,h){const p=X(U,a);U=T(U,a,k.Axis.Z,aa);b=z.scale(aa,U,b-p);return z.add(h,a,b)}function E(U,a){a=z.squaredDistance(U,a);U=U[3];return a<=U*U}function L(U,a,b=F()){const h=z.distance(U,a),p=U[3],D=a[3];if(h+D<p)return t.copy(b,U),b;if(h+p<D)return t.copy(b,a),b;z.lerp(b,U,a,(h+D-p)/(2*h));b[3]=(h+p+D)/2;return b}q=F();const ca=t.equals,ha=t.equals,la={t0:0,t1:0},f=y.create(),w=y.create(),aa=y.create(),W=F(),Ga=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:q,altitudeAt:X,angleToSilhouette:H,
axisAt:T,clear:B,closestPoint:N,closestPointOnSilhouette:I,containsPoint:E,copy:v,create:F,distanceToSilhouette:x,elevate:da,equals:ha,exactEquals:ca,fromCenterAndRadius:K,fromRadius:Q,fromValues:Z,getCenter:Y,getRadius:O,intersectLine:ka,intersectRay:oa,intersectRayClosestSilhouette:ua,intersectsRay:va,projectPoint:g,setAltitudeAt:u,setExtent:ja,tmpSphere:W,union:L,wrap:r},Symbol.toStringTag,{value:"Module"}));c.NullSphere=q;c.altitudeAt=X;c.angleToSilhouette=H;c.axisAt=T;c.clear=B;c.closestPoint=
N;c.closestPointOnSilhouette=I;c.containsPoint=E;c.copy=v;c.create=F;c.distanceToSilhouette=x;c.elevate=da;c.equals=ha;c.exactEquals=ca;c.fromCenterAndRadius=K;c.fromRadius=Q;c.fromValues=Z;c.getCenter=Y;c.getRadius=O;c.intersectLine=ka;c.intersectRay=oa;c.intersectRayClosestSilhouette=ua;c.intersectsRay=va;c.projectPoint=g;c.setAltitudeAt=u;c.setExtent=ja;c.sphere=Ga;c.tmpSphere=W;c.union=L;c.wrap=r})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(c,q,n){function d(a,
b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function l(a,b,h,p,D,J,P,R,M,S,V,ba,fa,ea,na,ma,ia){a[0]=b;a[1]=h;a[2]=p;a[3]=D;a[4]=J;a[5]=P;a[6]=R;a[7]=M;a[8]=S;a[9]=V;a[10]=ba;a[11]=fa;a[12]=ea;a[13]=na;a[14]=ma;a[15]=ia;return a}function z(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;
return a}function y(a,b){if(a===b){const h=b[1],p=b[2],D=b[3],J=b[6],P=b[7],R=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=h;a[6]=b[9];a[7]=b[13];a[8]=p;a[9]=J;a[11]=b[14];a[12]=D;a[13]=P;a[14]=R}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}function t(a,b){A(a,b)||z(a);return a}function A(a,b){const h=b[0],p=b[1],D=b[2],J=b[3],P=b[4],R=b[5],M=b[6],S=b[7],V=b[8],
ba=b[9],fa=b[10],ea=b[11],na=b[12],ma=b[13],ia=b[14];b=b[15];const wa=h*R-p*P,qa=h*M-D*P,ra=h*S-J*P,sa=p*M-D*R,ta=p*S-J*R,za=D*S-J*M,Aa=V*ma-ba*na,Ba=V*ia-fa*na,Ca=V*b-ea*na,Da=ba*ia-fa*ma,Ea=ba*b-ea*ma,Fa=fa*b-ea*ia;let xa=wa*Fa-qa*Ea+ra*Da+sa*Ca-ta*Ba+za*Aa;if(!xa)return null;xa=1/xa;a[0]=(R*Fa-M*Ea+S*Da)*xa;a[1]=(D*Ea-p*Fa-J*Da)*xa;a[2]=(ma*za-ia*ta+b*sa)*xa;a[3]=(fa*ta-ba*za-ea*sa)*xa;a[4]=(M*Ca-P*Fa-S*Ba)*xa;a[5]=(h*Fa-D*Ca+J*Ba)*xa;a[6]=(ia*ra-na*za-b*qa)*xa;a[7]=(V*za-fa*ra+ea*qa)*xa;a[8]=
(P*Ea-R*Ca+S*Aa)*xa;a[9]=(p*Ca-h*Ea-J*Aa)*xa;a[10]=(na*ta-ma*ra+b*wa)*xa;a[11]=(ba*ra-V*ta-ea*wa)*xa;a[12]=(R*Ba-P*Da-M*Aa)*xa;a[13]=(h*Da-p*Ba+D*Aa)*xa;a[14]=(ma*qa-na*sa-ia*wa)*xa;a[15]=(V*sa-ba*qa+fa*wa)*xa;return a}function e(a,b){const h=b[0],p=b[1],D=b[2],J=b[3],P=b[4],R=b[5],M=b[6],S=b[7],V=b[8],ba=b[9],fa=b[10],ea=b[11],na=b[12],ma=b[13],ia=b[14];b=b[15];a[0]=R*(fa*b-ea*ia)-ba*(M*b-S*ia)+ma*(M*ea-S*fa);a[1]=-(p*(fa*b-ea*ia)-ba*(D*b-J*ia)+ma*(D*ea-J*fa));a[2]=p*(M*b-S*ia)-R*(D*b-J*ia)+ma*(D*
S-J*M);a[3]=-(p*(M*ea-S*fa)-R*(D*ea-J*fa)+ba*(D*S-J*M));a[4]=-(P*(fa*b-ea*ia)-V*(M*b-S*ia)+na*(M*ea-S*fa));a[5]=h*(fa*b-ea*ia)-V*(D*b-J*ia)+na*(D*ea-J*fa);a[6]=-(h*(M*b-S*ia)-P*(D*b-J*ia)+na*(D*S-J*M));a[7]=h*(M*ea-S*fa)-P*(D*ea-J*fa)+V*(D*S-J*M);a[8]=P*(ba*b-ea*ma)-V*(R*b-S*ma)+na*(R*ea-S*ba);a[9]=-(h*(ba*b-ea*ma)-V*(p*b-J*ma)+na*(p*ea-J*ba));a[10]=h*(R*b-S*ma)-P*(p*b-J*ma)+na*(p*S-J*R);a[11]=-(h*(R*ea-S*ba)-P*(p*ea-J*ba)+V*(p*S-J*R));a[12]=-(P*(ba*ia-fa*ma)-V*(R*ia-M*ma)+na*(R*fa-M*ba));a[13]=h*
(ba*ia-fa*ma)-V*(p*ia-D*ma)+na*(p*fa-D*ba);a[14]=-(h*(R*ia-M*ma)-P*(p*ia-D*ma)+na*(p*M-D*R));a[15]=h*(R*fa-M*ba)-P*(p*fa-D*ba)+V*(p*M-D*R);return a}function k(a){const b=a[0],h=a[1],p=a[2],D=a[3],J=a[4],P=a[5],R=a[6],M=a[7],S=a[8],V=a[9],ba=a[10],fa=a[11],ea=a[12],na=a[13],ma=a[14];a=a[15];return(b*P-h*J)*(ba*a-fa*ma)-(b*R-p*J)*(V*a-fa*na)+(b*M-D*J)*(V*ma-ba*na)+(h*R-p*P)*(S*a-fa*ea)-(h*M-D*P)*(S*ma-ba*ea)+(p*M-D*R)*(S*na-V*ea)}function m(a,b,h){const p=b[0],D=b[1],J=b[2],P=b[3],R=b[4],M=b[5],S=b[6],
V=b[7],ba=b[8],fa=b[9],ea=b[10],na=b[11],ma=b[12],ia=b[13],wa=b[14];b=b[15];let qa=h[0],ra=h[1],sa=h[2],ta=h[3];a[0]=qa*p+ra*R+sa*ba+ta*ma;a[1]=qa*D+ra*M+sa*fa+ta*ia;a[2]=qa*J+ra*S+sa*ea+ta*wa;a[3]=qa*P+ra*V+sa*na+ta*b;qa=h[4];ra=h[5];sa=h[6];ta=h[7];a[4]=qa*p+ra*R+sa*ba+ta*ma;a[5]=qa*D+ra*M+sa*fa+ta*ia;a[6]=qa*J+ra*S+sa*ea+ta*wa;a[7]=qa*P+ra*V+sa*na+ta*b;qa=h[8];ra=h[9];sa=h[10];ta=h[11];a[8]=qa*p+ra*R+sa*ba+ta*ma;a[9]=qa*D+ra*M+sa*fa+ta*ia;a[10]=qa*J+ra*S+sa*ea+ta*wa;a[11]=qa*P+ra*V+sa*na+ta*b;
qa=h[12];ra=h[13];sa=h[14];ta=h[15];a[12]=qa*p+ra*R+sa*ba+ta*ma;a[13]=qa*D+ra*M+sa*fa+ta*ia;a[14]=qa*J+ra*S+sa*ea+ta*wa;a[15]=qa*P+ra*V+sa*na+ta*b;return a}function C(a,b,h){const p=h[0],D=h[1];h=h[2];if(b===a)a[12]=b[0]*p+b[4]*D+b[8]*h+b[12],a[13]=b[1]*p+b[5]*D+b[9]*h+b[13],a[14]=b[2]*p+b[6]*D+b[10]*h+b[14],a[15]=b[3]*p+b[7]*D+b[11]*h+b[15];else{const J=b[0],P=b[1],R=b[2],M=b[3],S=b[4],V=b[5],ba=b[6],fa=b[7],ea=b[8],na=b[9],ma=b[10],ia=b[11];a[0]=J;a[1]=P;a[2]=R;a[3]=M;a[4]=S;a[5]=V;a[6]=ba;a[7]=
fa;a[8]=ea;a[9]=na;a[10]=ma;a[11]=ia;a[12]=J*p+S*D+ea*h+b[12];a[13]=P*p+V*D+na*h+b[13];a[14]=R*p+ba*D+ma*h+b[14];a[15]=M*p+fa*D+ia*h+b[15]}return a}function G(a,b,h){const p=h[0],D=h[1];h=h[2];a[0]=b[0]*p;a[1]=b[1]*p;a[2]=b[2]*p;a[3]=b[3]*p;a[4]=b[4]*D;a[5]=b[5]*D;a[6]=b[6]*D;a[7]=b[7]*D;a[8]=b[8]*h;a[9]=b[9]*h;a[10]=b[10]*h;a[11]=b[11]*h;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function F(a,b,h,p){let D=p[0],J=p[1];p=p[2];let P=Math.sqrt(D*D+J*J+p*p);var R=void 0,M=void 0;let S=void 0,
V=void 0,ba=void 0,fa=void 0,ea=void 0,na=void 0,ma=void 0,ia=void 0,wa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0;M=R=void 0;if(P<n.getEpsilon())return null;P=1/P;D*=P;J*=P;p*=P;R=Math.sin(h);M=Math.cos(h);S=1-M;V=b[0];ba=b[1];fa=b[2];ea=b[3];na=b[4];ma=b[5];ia=b[6];wa=b[7];qa=b[8];ra=b[9];sa=b[10];ta=b[11];za=D*D*S+M;Aa=J*D*S+p*R;Ba=p*D*S-J*R;Ca=D*J*S-p*R;Da=J*J*S+M;Ea=p*J*S+D*R;Fa=D*p*S+J*R;R=J*p*S-D*R;M=p*p*S+M;a[0]=V*za+
na*Aa+qa*Ba;a[1]=ba*za+ma*Aa+ra*Ba;a[2]=fa*za+ia*Aa+sa*Ba;a[3]=ea*za+wa*Aa+ta*Ba;a[4]=V*Ca+na*Da+qa*Ea;a[5]=ba*Ca+ma*Da+ra*Ea;a[6]=fa*Ca+ia*Da+sa*Ea;a[7]=ea*Ca+wa*Da+ta*Ea;a[8]=V*Fa+na*R+qa*M;a[9]=ba*Fa+ma*R+ra*M;a[10]=fa*Fa+ia*R+sa*M;a[11]=ea*Fa+wa*R+ta*M;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}function v(a,b,h){const p=Math.sin(h);h=Math.cos(h);const D=b[4],J=b[5],P=b[6],R=b[7],M=b[8],S=b[9],V=b[10],ba=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=
b[13],a[14]=b[14],a[15]=b[15]);a[4]=D*h+M*p;a[5]=J*h+S*p;a[6]=P*h+V*p;a[7]=R*h+ba*p;a[8]=M*h-D*p;a[9]=S*h-J*p;a[10]=V*h-P*p;a[11]=ba*h-R*p;return a}function K(a,b,h){const p=Math.sin(h);h=Math.cos(h);const D=b[0],J=b[1],P=b[2],R=b[3],M=b[8],S=b[9],V=b[10],ba=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=D*h-M*p;a[1]=J*h-S*p;a[2]=P*h-V*p;a[3]=R*h-ba*p;a[8]=D*p+M*h;a[9]=J*p+S*h;a[10]=P*p+V*h;a[11]=R*p+ba*h;return a}function r(a,b,h){const p=
Math.sin(h);h=Math.cos(h);const D=b[0],J=b[1],P=b[2],R=b[3],M=b[4],S=b[5],V=b[6],ba=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=D*h+M*p;a[1]=J*h+S*p;a[2]=P*h+V*p;a[3]=R*h+ba*p;a[4]=M*h-D*p;a[5]=S*h-J*p;a[6]=V*h-P*p;a[7]=ba*h-R*p;return a}function B(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}function Q(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=
0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function O(a,b,h){if(0===b)return z(a);let p=h[0],D=h[1];h=h[2];let J=Math.sqrt(p*p+D*D+h*h),P=void 0,R=void 0,M=void 0;if(J<n.getEpsilon())return null;J=1/J;p*=J;D*=J;h*=J;P=Math.sin(b);R=Math.cos(b);M=1-R;a[0]=p*p*M+R;a[1]=D*p*M+h*P;a[2]=h*p*M-D*P;a[3]=0;a[4]=p*D*M-h*P;a[5]=D*D*M+R;a[6]=h*D*M+p*P;a[7]=0;a[8]=p*h*M+D*P;a[9]=D*h*M-p*P;a[10]=h*h*M+R;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}
function Y(a,b){const h=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=h;a[7]=0;a[8]=0;a[9]=-h;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function Z(a,b){const h=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-h;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=h;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function da(a,b){const h=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=h;a[2]=0;a[3]=0;a[4]=-h;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;
a[13]=0;a[14]=0;a[15]=1;return a}function ja(a,b,h){var p=b[0],D=b[1],J=b[2],P=b[3],R=p+p,M=D+D;const S=J+J;b=p*R;const V=p*M;p*=S;const ba=D*M;D*=S;J*=S;R*=P;M*=P;P*=S;a[0]=1-(ba+J);a[1]=V+P;a[2]=p-M;a[3]=0;a[4]=V-P;a[5]=1-(b+J);a[6]=D+R;a[7]=0;a[8]=p+M;a[9]=D-R;a[10]=1-(b+ba);a[11]=0;a[12]=h[0];a[13]=h[1];a[14]=h[2];a[15]=1;return a}function oa(a,b){const h=U,p=-b[0],D=-b[1],J=-b[2],P=b[3],R=b[4],M=b[5],S=b[6],V=b[7],ba=p*p+D*D+J*J+P*P;0<ba?(h[0]=2*(R*P+V*p+M*J-S*D)/ba,h[1]=2*(M*P+V*D+S*p-R*J)/
ba,h[2]=2*(S*P+V*J+R*D-M*p)/ba):(h[0]=2*(R*P+V*p+M*J-S*D),h[1]=2*(M*P+V*D+S*p-R*J),h[2]=2*(S*P+V*J+R*D-M*p));ja(a,b,h);return a}function ka(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a}function pa(a,b){const h=b[0],p=b[1],D=b[2],J=b[4],P=b[5],R=b[6],M=b[8],S=b[9];b=b[10];a[0]=Math.sqrt(h*h+p*p+D*D);a[1]=Math.sqrt(J*J+P*P+R*R);a[2]=Math.sqrt(M*M+S*S+b*b);return a}function va(a,b){const h=b[0]+b[5]+b[10];let p=0;0<h?(p=2*Math.sqrt(h+1),a[3]=.25*p,a[0]=(b[6]-b[9])/p,a[1]=(b[8]-b[2])/p,a[2]=(b[1]-b[4])/
p):b[0]>b[5]&&b[0]>b[10]?(p=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/p,a[0]=.25*p,a[1]=(b[1]+b[4])/p,a[2]=(b[8]+b[2])/p):b[5]>b[10]?(p=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/p,a[0]=(b[1]+b[4])/p,a[1]=.25*p,a[2]=(b[6]+b[9])/p):(p=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/p,a[0]=(b[8]+b[2])/p,a[1]=(b[6]+b[9])/p,a[2]=.25*p);return a}function ua(a,b,h,p){var D=b[0],J=b[1],P=b[2],R=b[3],M=D+D,S=J+J,V=P+P;b=D*M;const ba=D*S;D*=V;const fa=J*S;J*=V;P*=V;M*=R;S*=R;R*=V;V=p[0];const ea=
p[1];p=p[2];a[0]=(1-(fa+P))*V;a[1]=(ba+R)*V;a[2]=(D-S)*V;a[3]=0;a[4]=(ba-R)*ea;a[5]=(1-(b+P))*ea;a[6]=(J+M)*ea;a[7]=0;a[8]=(D+S)*p;a[9]=(J-M)*p;a[10]=(1-(b+fa))*p;a[11]=0;a[12]=h[0];a[13]=h[1];a[14]=h[2];a[15]=1;return a}function I(a,b,h,p,D){var J=b[0],P=b[1],R=b[2],M=b[3],S=J+J,V=P+P,ba=R+R;b=J*S;var fa=J*V,ea=J*ba;J=P*V;P*=ba;var na=R*ba;R=M*S;V*=M;const ma=M*ba;var ia=p[0],wa=p[1];ba=p[2];p=D[0];M=D[1];D=D[2];S=(1-(J+na))*ia;const qa=(fa+ma)*ia;ia*=ea-V;fa=(fa-ma)*wa;na=(1-(b+na))*wa;wa*=P+R;
ea=(ea+V)*ba;P=(P-R)*ba;b=(1-(b+J))*ba;a[0]=S;a[1]=qa;a[2]=ia;a[3]=0;a[4]=fa;a[5]=na;a[6]=wa;a[7]=0;a[8]=ea;a[9]=P;a[10]=b;a[11]=0;a[12]=h[0]+p-(S*p+fa*M+ea*D);a[13]=h[1]+M-(qa*p+na*M+P*D);a[14]=h[2]+D-(ia*p+wa*M+b*D);a[15]=1;return a}function N(a,b){var h=b[0],p=b[1],D=b[2];b=b[3];var J=h+h,P=p+p;const R=D+D;h*=J;const M=p*J;p*=P;const S=D*J,V=D*P;D*=R;J*=b;P*=b;b*=R;a[0]=1-p-D;a[1]=M+b;a[2]=S-P;a[3]=0;a[4]=M-b;a[5]=1-h-D;a[6]=V+J;a[7]=0;a[8]=S+P;a[9]=V-J;a[10]=1-h-p;a[11]=0;a[12]=0;a[13]=0;a[14]=
0;a[15]=1;return a}function g(a,b,h,p,D,J,P){const R=1/(h-b),M=1/(D-p),S=1/(J-P);a[0]=2*J*R;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*J*M;a[6]=0;a[7]=0;a[8]=(h+b)*R;a[9]=(D+p)*M;a[10]=(P+J)*S;a[11]=-1;a[12]=0;a[13]=0;a[14]=P*J*2*S;a[15]=0;return a}function x(a,b,h,p,D){b=1/Math.tan(b/2);let J=void 0;a[0]=b/h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=D&&Infinity!==D?(J=1/(p-D),a[10]=(D+p)*J,a[14]=2*D*p*J):(a[10]=-1,a[14]=-2*p);return a}function H(a,
b,h,p){const D=Math.tan(b.upDegrees*Math.PI/180),J=Math.tan(b.downDegrees*Math.PI/180),P=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);const R=2/(P+b),M=2/(D+J);a[0]=R;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=M;a[6]=0;a[7]=0;a[8]=-((P-b)*R*.5);a[9]=(D-J)*M*.5;a[10]=p/(h-p);a[11]=-1;a[12]=0;a[13]=0;a[14]=p*h/(h-p);a[15]=0;return a}function T(a,b,h,p,D,J,P){const R=1/(b-h),M=1/(p-D),S=1/(J-P);a[0]=-2*R;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*M;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*S;
a[11]=0;a[12]=(b+h)*R;a[13]=(D+p)*M;a[14]=(P+J)*S;a[15]=1;return a}function X(a,b,h,p){const D=b[0],J=b[1];b=b[2];let P=D-h[0],R=J-h[1];h=b-h[2];var M=n.getEpsilon();if(Math.abs(P)<M&&Math.abs(R)<M&&Math.abs(h)<M)z(a);else{var S=1/Math.sqrt(P*P+R*R+h*h);P*=S;R*=S;h*=S;S=p[0];var V=p[1];M=p[2];p=V*h-M*R;M=M*P-S*h;V=S*R-V*P;(S=Math.sqrt(p*p+M*M+V*V))?(S=1/S,p*=S,M*=S,V*=S):V=M=p=0;var ba=R*V-h*M,fa=h*p-P*V,ea=P*M-R*p;(S=Math.sqrt(ba*ba+fa*fa+ea*ea))?(S=1/S,ba*=S,fa*=S,ea*=S):ea=fa=ba=0;a[0]=p;a[1]=
ba;a[2]=P;a[3]=0;a[4]=M;a[5]=fa;a[6]=R;a[7]=0;a[8]=V;a[9]=ea;a[10]=h;a[11]=0;a[12]=-(p*D+M*J+V*b);a[13]=-(ba*D+fa*J+ea*b);a[14]=-(P*D+R*J+h*b);a[15]=1}}function u(a,b,h,p){const D=b[0],J=b[1];b=b[2];var P=p[0];const R=p[1];var M=p[2];p=D-h[0];let S=J-h[1];h=b-h[2];let V=p*p+S*S+h*h;0<V&&(V=1/Math.sqrt(V),p*=V,S*=V,h*=V);let ba=R*h-M*S;M=M*p-P*h;P=P*S-R*p;V=ba*ba+M*M+P*P;0<V&&(V=1/Math.sqrt(V),ba*=V,M*=V,P*=V);a[0]=ba;a[1]=M;a[2]=P;a[3]=0;a[4]=S*P-h*M;a[5]=h*ba-p*P;a[6]=p*M-S*ba;a[7]=0;a[8]=p;a[9]=
S;a[10]=h;a[11]=0;a[12]=D;a[13]=J;a[14]=b;a[15]=1;return a}function E(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function L(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function ca(a,b,h){a[0]=b[0]+h[0];a[1]=b[1]+h[1];a[2]=b[2]+h[2];a[3]=b[3]+h[3];a[4]=
b[4]+h[4];a[5]=b[5]+h[5];a[6]=b[6]+h[6];a[7]=b[7]+h[7];a[8]=b[8]+h[8];a[9]=b[9]+h[9];a[10]=b[10]+h[10];a[11]=b[11]+h[11];a[12]=b[12]+h[12];a[13]=b[13]+h[13];a[14]=b[14]+h[14];a[15]=b[15]+h[15];return a}function ha(a,b,h){a[0]=b[0]-h[0];a[1]=b[1]-h[1];a[2]=b[2]-h[2];a[3]=b[3]-h[3];a[4]=b[4]-h[4];a[5]=b[5]-h[5];a[6]=b[6]-h[6];a[7]=b[7]-h[7];a[8]=b[8]-h[8];a[9]=b[9]-h[9];a[10]=b[10]-h[10];a[11]=b[11]-h[11];a[12]=b[12]-h[12];a[13]=b[13]-h[13];a[14]=b[14]-h[14];a[15]=b[15]-h[15];return a}function la(a,
b,h){a[0]=b[0]*h;a[1]=b[1]*h;a[2]=b[2]*h;a[3]=b[3]*h;a[4]=b[4]*h;a[5]=b[5]*h;a[6]=b[6]*h;a[7]=b[7]*h;a[8]=b[8]*h;a[9]=b[9]*h;a[10]=b[10]*h;a[11]=b[11]*h;a[12]=b[12]*h;a[13]=b[13]*h;a[14]=b[14]*h;a[15]=b[15]*h;return a}function f(a,b,h,p){a[0]=b[0]+h[0]*p;a[1]=b[1]+h[1]*p;a[2]=b[2]+h[2]*p;a[3]=b[3]+h[3]*p;a[4]=b[4]+h[4]*p;a[5]=b[5]+h[5]*p;a[6]=b[6]+h[6]*p;a[7]=b[7]+h[7]*p;a[8]=b[8]+h[8]*p;a[9]=b[9]+h[9]*p;a[10]=b[10]+h[10]*p;a[11]=b[11]+h[11]*p;a[12]=b[12]+h[12]*p;a[13]=b[13]+h[13]*p;a[14]=b[14]+h[14]*
p;a[15]=b[15]+h[15]*p;return a}function w(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function aa(a,b){if(a===b)return!0;const h=a[0],p=a[1],D=a[2],J=a[3],P=a[4],R=a[5],M=a[6],S=a[7],V=a[8],ba=a[9],fa=a[10],ea=a[11],na=a[12],ma=a[13],ia=a[14];a=a[15];const wa=b[0],qa=b[1],ra=b[2],sa=b[3],ta=b[4],za=b[5],Aa=b[6],Ba=
b[7],Ca=b[8],Da=b[9],Ea=b[10],Fa=b[11],xa=b[12],Ha=b[13],Ia=b[14];b=b[15];const ya=n.getEpsilon();return Math.abs(h-wa)<=ya*Math.max(1,Math.abs(h),Math.abs(wa))&&Math.abs(p-qa)<=ya*Math.max(1,Math.abs(p),Math.abs(qa))&&Math.abs(D-ra)<=ya*Math.max(1,Math.abs(D),Math.abs(ra))&&Math.abs(J-sa)<=ya*Math.max(1,Math.abs(J),Math.abs(sa))&&Math.abs(P-ta)<=ya*Math.max(1,Math.abs(P),Math.abs(ta))&&Math.abs(R-za)<=ya*Math.max(1,Math.abs(R),Math.abs(za))&&Math.abs(M-Aa)<=ya*Math.max(1,Math.abs(M),Math.abs(Aa))&&
Math.abs(S-Ba)<=ya*Math.max(1,Math.abs(S),Math.abs(Ba))&&Math.abs(V-Ca)<=ya*Math.max(1,Math.abs(V),Math.abs(Ca))&&Math.abs(ba-Da)<=ya*Math.max(1,Math.abs(ba),Math.abs(Da))&&Math.abs(fa-Ea)<=ya*Math.max(1,Math.abs(fa),Math.abs(Ea))&&Math.abs(ea-Fa)<=ya*Math.max(1,Math.abs(ea),Math.abs(Fa))&&Math.abs(na-xa)<=ya*Math.max(1,Math.abs(na),Math.abs(xa))&&Math.abs(ma-Ha)<=ya*Math.max(1,Math.abs(ma),Math.abs(Ha))&&Math.abs(ia-Ia)<=ya*Math.max(1,Math.abs(ia),Math.abs(Ia))&&Math.abs(a-b)<=ya*Math.max(1,Math.abs(a),
Math.abs(b))}function W(a){const b=n.getEpsilon(),h=a[0],p=a[1],D=a[2],J=a[4],P=a[5],R=a[6],M=a[8],S=a[9];a=a[10];return Math.abs(1-(h*h+J*J+M*M))<=b&&Math.abs(1-(p*p+P*P+S*S))<=b&&Math.abs(1-(D*D+R*R+a*a))<=b}function Ga(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[8]&&0===a[9]&&1===a[10]}const U=q.create();q=Object.freeze(Object.defineProperty({__proto__:null,add:ca,adjoint:e,copy:d,determinant:k,equals:aa,exactEquals:w,frob:L,fromQuat:N,fromQuat2:oa,fromRotation:O,
fromRotationTranslation:ja,fromRotationTranslationScale:ua,fromRotationTranslationScaleOrigin:I,fromScaling:Q,fromTranslation:B,fromXRotation:Y,fromYRotation:Z,fromZRotation:da,frustum:g,getRotation:va,getScaling:pa,getTranslation:ka,hasIdentityRotation:Ga,identity:z,invert:A,invertOrIdentity:t,isOrthoNormal:W,lookAt:X,mul:m,multiply:m,multiplyScalar:la,multiplyScalarAndAdd:f,ortho:T,perspective:x,perspectiveFromFieldOfView:H,rotate:F,rotateX:v,rotateY:K,rotateZ:r,scale:G,set:l,str:E,sub:ha,subtract:ha,
targetTo:u,translate:C,transpose:y},Symbol.toStringTag,{value:"Module"}));c.add=ca;c.adjoint=e;c.copy=d;c.determinant=k;c.equals=aa;c.exactEquals=w;c.frob=L;c.fromQuat=N;c.fromQuat2=oa;c.fromRotation=O;c.fromRotationTranslation=ja;c.fromRotationTranslationScale=ua;c.fromRotationTranslationScaleOrigin=I;c.fromScaling=Q;c.fromTranslation=B;c.fromXRotation=Y;c.fromYRotation=Z;c.fromZRotation=da;c.frustum=g;c.getRotation=va;c.getScaling=pa;c.getTranslation=ka;c.hasIdentityRotation=Ga;c.identity=z;c.invert=
A;c.invertOrIdentity=t;c.isOrthoNormal=W;c.lookAt=X;c.mat4=q;c.mul=m;c.multiply=m;c.multiplyScalar=la;c.multiplyScalarAndAdd=f;c.ortho=T;c.perspective=x;c.perspectiveFromFieldOfView=H;c.rotate=F;c.rotateX=v;c.rotateY=K;c.rotateZ=r;c.scale=G;c.set=l;c.str=E;c.sub=ha;c.subtract=ha;c.targetTo=u;c.translate=C;c.transpose=y})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(c,
q,n,d,l,z){function y(m){return m?t(l.clone(m.origin),l.clone(m.direction)):t(l.create(),l.create())}function t(m,C){return{origin:m,direction:C}}function A(m,C,G=y()){d.copy(G.origin,m);d.copy(G.direction,C);return G}function e(m,C){m=d.cross(z.sv3d.get(),d.normalize(z.sv3d.get(),m.direction),d.subtract(z.sv3d.get(),C,m.origin));return d.dot(m,m)}const k=new n.ObjectStack(()=>y());c.closestPoint=function(m,C,G){C=d.dot(m.direction,d.subtract(G,C,m.origin));d.add(G,m.origin,d.scale(G,m.direction,
C));return G};c.copy=function(m,C=y()){return A(m.origin,m.direction,C)};c.create=y;c.distance=function(m,C){return Math.sqrt(e(m,C))};c.distance2=e;c.equals=function(m,C){return q.equals(m.origin,C.origin)&&q.equals(m.direction,C.direction)};c.fromPoints=function(m,C,G=y()){d.copy(G.origin,m);d.subtract(G.direction,C,m);return G};c.fromValues=A;c.wrap=function(m,C){const G=k.get();G.origin=m;G.direction=C;return G};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vector":function(){define(["exports",
"../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(c,q,n,d){const l=d.create(),z=d.create();c.angle=function(y,t){y=n.dot(y,t)/(n.length(y)*n.length(t));return-q.acosClamped(y)};c.angleAroundAxis=function(y,t,A){n.normalize(l,y);n.normalize(z,t);y=n.dot(l,z);y=q.acosClamped(y);t=n.cross(l,l,z);return 0>n.dot(t,A)?2*Math.PI-y:y};c.projectPoint=function(y,t,A){t=n.dot(y,t)/n.dot(y,y);return n.scale(A,y,t)};c.projectPointSignedLength=function(y,t){return n.dot(y,t)/n.length(y)};
Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("../../../../core/ObjectPool ../../../../core/PooledArray ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../chunks/sphere ./Util".split(" "),function(c,q,n,d,l,z,y,t){function A(g,x,H){H[0]=g[0]+x;H[1]=g[1]+x;H[2]=g[2]+x}function e(g,x,H,T){if(1===x)g=H(g[0]),y.copy(g,T);else{Z[0]=Infinity;Z[1]=
Infinity;Z[2]=Infinity;da[0]=-Infinity;da[1]=-Infinity;da[2]=-Infinity;for(let L=0;L<x;L++){var X=H(g[L]);if(G(X[3])){var u=Z,E=X;u[0]=Math.min(u[0],E[0]-E[3]);u[1]=Math.min(u[1],E[1]-E[3]);u[2]=Math.min(u[2],E[2]-E[3]);u=da;u[0]=Math.max(u[0],X[0]+X[3]);u[1]=Math.max(u[1],X[1]+X[3]);u[2]=Math.max(u[2],X[2]+X[3])}}n.lerp(T,Z,da,.5);T[3]=Math.max(da[0]-Z[0],da[1]-Z[1],da[2]-Z[2])/2}}function k(g,x,H){if(!I.length)for(var T=0;8>T;++T)I.push({index:0,distance:0});for(T=0;8>T;++T){const X=K[T];I.data[T].index=
T;I.data[T].distance=C(g,x,X)}I.sort((X,u)=>X.distance-u.distance);for(g=0;8>g;++g)H[g]=I.data[g].index}function m(g,x){let H=Infinity,T;for(let X=0;8>X;++X){const u=C(g,x,r[X]);u<H&&(H=u,T=r[X])}return T}function C(g,x,H){return x*(g[0]*H[0]+g[1]*H[1]+g[2]*H[2])}function G(g){return!isNaN(g)&&-Infinity!==g&&Infinity!==g&&0<g}class F{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(g,
x){this.objectToBoundingSphere=g;this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._root=new v;this._objectCount=0;x&&(void 0!==x.maximumObjectsPerNode&&(this._maximumObjectsPerNode=x.maximumObjectsPerNode),void 0!==x.maximumDepth&&(this._maximumDepth=x.maximumDepth))}destroy(){this._degenerateObjects.clear();v.clearPool();Q[0]=null;ja.prune();I.prune()}add(g,x=g.length){this._objectCount+=x;this._grow(g,x);const H=v.acquire();for(let T=0;T<x;T++){const X=g[T];
this._isDegenerate(X)?this._degenerateObjects.add(X):(H.init(this._root),this._add(X,H))}v.release(H)}remove(g,x=null){this._objectCount-=g.length;const H=v.acquire();for(const T of g)g=null!=x?x:y.copy(this.objectToBoundingSphere(T),oa),G(g[3])?(H.init(this._root),this._remove(T,g,H)):this._degenerateObjects.delete(T);v.release(H);this._shrink()}update(g,x){if(G(x[3])||!this._isDegenerate(g))Q[0]=g,g=Q,this.remove(g,x),this.add(g)}forEachAlongRay(g,x,H){const T=z.wrap(g,x);this._forEachNode(this._root,
X=>{if(!this._intersectsNode(T,X))return!1;X=X.node;X.terminals.forAll(u=>{this._intersectsObject(T,u)&&H(u)});null!==X.residents&&X.residents.forAll(u=>{this._intersectsObject(T,u)&&H(u)});return!0})}forEachAlongRayWithVerticalOffset(g,x,H,T){const X=z.wrap(g,x);this._forEachNode(this._root,u=>{if(!this._intersectsNodeWithOffset(X,u,T))return!1;u=u.node;u.terminals.forAll(E=>{this._intersectsObjectWithOffset(X,E,T)&&H(E)});null!==u.residents&&u.residents.forAll(E=>{this._intersectsObjectWithOffset(X,
E,T)&&H(E)});return!0})}forEach(g){this._forEachNode(this._root,x=>{x=x.node;x.terminals.forAll(g);null!==x.residents&&x.residents.forAll(g);return!0});this._degenerateObjects.forEach(g)}forEachDegenerateObject(g){this._degenerateObjects.forEach(g)}findClosest(g,x,H,T=()=>!0,X=Infinity){let u=Infinity,E=Infinity,L=null;const ca=m(g,x),ha=la=>{--X;if(T(la)){var f=this.objectToBoundingSphere(la);if(l.intersectsSphere(H,f)){var w=C(g,x,y.getCenter(f)),aa=w-f[3];f=w+f[3];aa<u&&(u=aa,E=f,L=la)}}};this._forEachNodeDepthOrdered(this._root,
la=>{if(0>=X||!l.intersectsSphere(H,la.bounds))return!1;n.scale(Y,ca,la.halfSize);n.add(Y,Y,la.bounds);if(C(g,x,Y)>E)return!1;la=la.node;la.terminals.forAll(f=>ha(f));null!==la.residents&&la.residents.forAll(f=>ha(f));return!0},g,x);return L}forEachInDepthRange(g,x,H,T,X,u,E){let L=-Infinity,ca=Infinity;const ha={setRange:W=>{H===F.DepthOrder.FRONT_TO_BACK?(L=Math.max(L,W.near),ca=Math.min(ca,W.far)):(L=Math.max(L,-W.far),ca=Math.min(ca,-W.near))}};ha.setRange(T);const la=C(x,H,g),f=m(x,H),w=m(x,
-H),aa=W=>{if(E(W)){var Ga=this.objectToBoundingSphere(W),U=y.getCenter(Ga);U=C(x,H,U)-la;var a=U+Ga[3];U-Ga[3]>ca||a<L||!l.intersectsSphere(u,Ga)||X(W,ha)}};this._forEachNodeDepthOrdered(this._root,W=>{if(!l.intersectsSphere(u,W.bounds))return!1;n.scale(Y,f,W.halfSize);n.add(Y,Y,W.bounds);if(C(x,H,Y)-la>ca)return!1;n.scale(Y,w,W.halfSize);n.add(Y,Y,W.bounds);if(C(x,H,Y)-la<L)return!1;W=W.node;W.terminals.forAll(Ga=>aa(Ga));null!==W.residents&&W.residents.forAll(Ga=>aa(Ga));return!0},x,H)}forEachNode(g){this._forEachNode(this._root,
x=>g(x.node,x.bounds,x.halfSize,x.depth))}forEachNeighbor(g,x){const H=y.getRadius(x),T=y.getCenter(x),X=L=>{const ca=this.objectToBoundingSphere(L);var ha=y.getRadius(ca);ha=H+ha;return 0>=n.squaredDistance(y.getCenter(ca),T)-ha*ha?g(L):!0};let u=!0;const E=L=>{u&&(u=X(L))};this._forEachNode(this._root,L=>{var ca=y.getRadius(L.bounds);ca=H+ca;if(0<n.squaredDistance(y.getCenter(L.bounds),T)-ca*ca)return!1;L=L.node;L.terminals.forAll(E);u&&null!==L.residents&&L.residents.forAll(E);return u});u&&this.forEachDegenerateObject(E)}_intersectsNode(g,
x){A(x.bounds,2*-x.halfSize,Z);A(x.bounds,2*x.halfSize,da);return t.rayBoxTest(g.origin,g.direction,Z,da)}_intersectsNodeWithOffset(g,x,H){A(x.bounds,2*-x.halfSize,Z);A(x.bounds,2*x.halfSize,da);H.applyToMinMax(Z,da);return t.rayBoxTest(g.origin,g.direction,Z,da)}_intersectsObject(g,x){x=this.objectToBoundingSphere(x);return 0<x[3]?y.intersectsRay(x,g):!0}_intersectsObjectWithOffset(g,x,H){x=this.objectToBoundingSphere(x);return 0<x[3]?y.intersectsRay(H.applyToBoundingSphere(x),g):!0}_forEachNode(g,
x){g=v.acquire().init(g);const H=[g];for(;0!==H.length;){g=H.pop();if(x(g)&&!g.isLeaf())for(let T=0;T<g.node.children.length;T++)g.node.children[T]&&H.push(v.acquire().init(g).advance(T));v.release(g)}}_forEachNodeDepthOrdered(g,x,H,T=F.DepthOrder.FRONT_TO_BACK){g=v.acquire().init(g);const X=[g];for(k(H,T,N);0!==X.length;){g=X.pop();if(x(g)&&!g.isLeaf())for(H=7;0<=H;--H)T=N[H],g.node.children[T]&&X.push(v.acquire().init(g).advance(T));v.release(g)}}_remove(g,x,H){ja.clear();x=H.advanceTo(x,(T,X)=>
{ja.push(T.node);ja.push(X)})?H.node.terminals:H.node.residents;x.removeUnordered(g);if(0===x.length)for(g=ja.length-2;0<=g&&this._purge(ja.data[g],ja.data[g+1]);g-=2);}_nodeIsEmpty(g){if(0!==g.terminals.length)return!1;if(null!==g.residents)return 0===g.residents.length;for(let x=0;x<g.children.length;x++)if(g.children[x])return!1;return!0}_purge(g,x){0<=x&&(g.children[x]=null);return this._nodeIsEmpty(g)?(null===g.residents&&(g.residents=new q({shrink:!0})),!0):!1}_add(g,x){x.advanceTo(this.objectToBoundingSphere(g))?
x.node.terminals.push(g):(x.node.residents.push(g),x.node.residents.length>this._maximumObjectsPerNode&&x.depth<this._maximumDepth&&this._split(x))}_split(g){const x=g.node.residents;g.node.residents=null;for(let H=0;H<x.length;H++){const T=v.acquire().init(g);this._add(x.at(H),T);v.release(T)}}_grow(g,x){0!==x&&(e(g,x,H=>this.objectToBoundingSphere(H),ka),G(ka[3])&&!this._fitsInsideTree(ka)&&(this._nodeIsEmpty(this._root.node)?(y.copy(ka,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],
this._root.updateBoundsRadiusFromHalfSize()):(g=this._rootBoundsForRootAsSubNode(ka),this._placingRootViolatesMaxDepth(g)?this._rebuildTree(ka,g):this._growRootAsSubNode(g),v.release(g))))}_rebuildTree(g,x){n.copy(pa,x.bounds);pa[3]=x.halfSize;e([g,pa],2,H=>H,va);g=v.acquire().init(this._root);this._root.initFrom(null,va,va[3]);this._root.increaseHalfSize(1.25);this._forEachNode(g,H=>{this.add(H.node.terminals.data,H.node.terminals.length);null!==H.node.residents&&this.add(H.node.residents.data,H.node.residents.length);
return!0});v.release(g)}_placingRootViolatesMaxDepth(g){const x=Math.log(g.halfSize/this._root.halfSize)*Math.LOG2E;let H=0;this._forEachNode(this._root,T=>{H=Math.max(H,T.depth);return H+x<=this._maximumDepth});return H+x>this._maximumDepth}_rootBoundsForRootAsSubNode(g){var x=g[3],H=-Infinity;const T=this._root.bounds,X=this._root.halfSize;for(var u=0;3>u;u++){var E=Math.max(0,Math.ceil((T[u]-X-(g[u]-x))/(2*X)));const L=Math.max(0,Math.ceil((g[u]+x-(T[u]+X))/(2*X)))+1;H=Math.max(H,2**Math.ceil(Math.log(E+
L)*Math.LOG2E));ua[u].min=E;ua[u].max=L}for(g=0;3>g;g++)x=ua[g].min,u=ua[g].max,E=(H-(x+u))/2,x+=Math.ceil(E),u+=Math.floor(E),O[g]=T[g]-X-x*X*2+(u+x)*X;H*=X;O[3]=H*B;return v.acquire().initFrom(null,O,H,0)}_growRootAsSubNode(g){const x=this._root.node;n.copy(ka,this._root.bounds);ka[3]=this._root.halfSize;this._root.init(g);g.advanceTo(ka,null,!0);g.node.children=x.children;g.node.residents=x.residents;g.node.terminals=x.terminals}_shrink(){for(;;){const g=this._findShrinkIndex();if(-1===g)break;
this._root.advance(g);this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let g=null;const x=this._root.node.children;let H=0,T=0;for(;T<x.length&&null==g;)H=T++,g=x[H];for(;T<x.length;)if(x[T++])return-1;return H}_isDegenerate(g){g=this.objectToBoundingSphere(g)[3];return!G(g)}_fitsInsideTree(g){const x=this._root.bounds,H=this._root.halfSize;return g[3]<=H&&g[0]>=x[0]-H&&g[0]<=x[0]+H&&g[1]>=x[1]-H&&g[1]<=x[1]+H&&g[2]>=x[2]-H&&g[2]<=x[2]+H}toJSON(){const {maximumDepth:g,
maximumObjectsPerNode:x,_objectCount:H}=this,T=this._nodeToJSON(this._root.node);return{maximumDepth:g,maximumObjectsPerNode:x,objectCount:H,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:T}}}_nodeToJSON(g){const x=g.children.map(T=>T?this._nodeToJSON(T):null),H=g.residents?.map(T=>this.objectToBoundingSphere(T));g=g.terminals?.map(T=>this.objectToBoundingSphere(T));return{children:x,residents:H,terminals:g}}static fromJSON(g){const x=new F(H=>H,{maximumDepth:g.maximumDepth,
maximumObjectsPerNode:g.maximumObjectsPerNode});x._objectCount=g.objectCount;x._root.initFrom(g.root.node,g.root.bounds,g.root.halfSize,g.root.depth);return x}}class v{constructor(){this.bounds=y.create();this.halfSize=0;this.initFrom(null,null,0,0)}init(g){return this.initFrom(g.node,g.bounds,g.halfSize,g.depth)}initFrom(g,x,H,T=this.depth){this.node=null!=g?g:v.createEmptyNode();null!=x&&y.copy(x,this.bounds);this.halfSize=H;this.depth=T;return this}increaseHalfSize(g){this.halfSize*=g;this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=
this.halfSize*B}advance(g){let x=this.node.children[g];x||(x=v.createEmptyNode(),this.node.children[g]=x);this.node=x;this.halfSize/=2;this.depth++;g=K[g];this.bounds[0]+=g[0]*this.halfSize;this.bounds[1]+=g[1]*this.halfSize;this.bounds[2]+=g[2]*this.halfSize;this.updateBoundsRadiusFromHalfSize();return this}advanceTo(g,x,H=!1){for(;;){if(this.isTerminalFor(g))return x&&x(this,-1),!0;if(this.isLeaf()){if(!H)return x&&x(this,-1),!1;this.node.residents=null}const T=this._childIndex(g);x&&x(this,T);
this.advance(T)}}isLeaf(){return null!=this.node.residents}isTerminalFor(g){return g[3]>this.halfSize/2}_childIndex(g){const x=this.bounds;return(x[0]<g[0]?1:0)+(x[1]<g[1]?2:0)+(x[2]<g[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new q({shrink:!0}),residents:new q({shrink:!0})}}static acquire(){return v._pool.acquire()}static release(g){v._pool.release(g)}static clearPool(){v._pool.prune()}}v._pool=new c(v);(function(g){g=g.DepthOrder||(g.DepthOrder=
{});g[g.FRONT_TO_BACK=1]="FRONT_TO_BACK";g[g.BACK_TO_FRONT=-1]="BACK_TO_FRONT"})(F||(F={}));const K=[d.fromValues(-1,-1,-1),d.fromValues(1,-1,-1),d.fromValues(-1,1,-1),d.fromValues(1,1,-1),d.fromValues(-1,-1,1),d.fromValues(1,-1,1),d.fromValues(-1,1,1),d.fromValues(1,1,1)],r=[d.fromValues(-1,-1,-1),d.fromValues(-1,-1,1),d.fromValues(-1,1,-1),d.fromValues(-1,1,1),d.fromValues(1,-1,-1),d.fromValues(1,-1,1),d.fromValues(1,1,-1),d.fromValues(1,1,1)],B=Math.sqrt(3),Q=[null],O=y.create(),Y=d.create(),Z=
d.create(),da=d.create(),ja=new q,oa=y.create(),ka=y.create(),pa=y.create(),va=y.create(),ua=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],I=new q,N=[0,0,0,0,0,0,0,0];return F})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(c,q,n,d,l,z,y,t,A,e){function k(){return[l.create(),l.create(),l.create(),l.create(),l.create(),
l.create(),l.create(),l.create()]}function m(r,B){A.fromPoints(B[c.PointIndex.FAR_BOTTOM_LEFT],B[c.PointIndex.NEAR_BOTTOM_LEFT],B[c.PointIndex.NEAR_TOP_LEFT],r[c.PlaneIndex.LEFT]);A.fromPoints(B[c.PointIndex.NEAR_BOTTOM_RIGHT],B[c.PointIndex.FAR_BOTTOM_RIGHT],B[c.PointIndex.FAR_TOP_RIGHT],r[c.PlaneIndex.RIGHT]);A.fromPoints(B[c.PointIndex.FAR_BOTTOM_LEFT],B[c.PointIndex.FAR_BOTTOM_RIGHT],B[c.PointIndex.NEAR_BOTTOM_RIGHT],r[c.PlaneIndex.BOTTOM]);A.fromPoints(B[c.PointIndex.NEAR_TOP_LEFT],B[c.PointIndex.NEAR_TOP_RIGHT],
B[c.PointIndex.FAR_TOP_RIGHT],r[c.PlaneIndex.TOP]);A.fromPoints(B[c.PointIndex.NEAR_BOTTOM_LEFT],B[c.PointIndex.NEAR_BOTTOM_RIGHT],B[c.PointIndex.NEAR_TOP_RIGHT],r[c.PlaneIndex.NEAR]);A.fromPoints(B[c.PointIndex.FAR_BOTTOM_RIGHT],B[c.PointIndex.FAR_BOTTOM_LEFT],B[c.PointIndex.FAR_TOP_LEFT],r[c.PlaneIndex.FAR])}function C(r,B){for(let Q=0;6>Q;Q++)if(!A.clip(r[Q],B))return!1;return!0}c.PlaneIndex=void 0;(function(r){r[r.LEFT=0]="LEFT";r[r.RIGHT=1]="RIGHT";r[r.BOTTOM=2]="BOTTOM";r[r.TOP=3]="TOP";r[r.NEAR=
4]="NEAR";r[r.FAR=5]="FAR"})(c.PlaneIndex||(c.PlaneIndex={}));c.PointIndex=void 0;(function(r){r[r.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";r[r.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT";r[r.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";r[r.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";r[r.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";r[r.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";r[r.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";r[r.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"})(c.PointIndex||(c.PointIndex={}));const G={bottom:[c.PointIndex.FAR_BOTTOM_RIGHT,c.PointIndex.NEAR_BOTTOM_RIGHT,
c.PointIndex.NEAR_BOTTOM_LEFT,c.PointIndex.FAR_BOTTOM_LEFT],near:[c.PointIndex.NEAR_BOTTOM_LEFT,c.PointIndex.NEAR_BOTTOM_RIGHT,c.PointIndex.NEAR_TOP_RIGHT,c.PointIndex.NEAR_TOP_LEFT],far:[c.PointIndex.FAR_BOTTOM_RIGHT,c.PointIndex.FAR_BOTTOM_LEFT,c.PointIndex.FAR_TOP_LEFT,c.PointIndex.FAR_TOP_RIGHT],right:[c.PointIndex.NEAR_BOTTOM_RIGHT,c.PointIndex.FAR_BOTTOM_RIGHT,c.PointIndex.FAR_TOP_RIGHT,c.PointIndex.NEAR_TOP_RIGHT],left:[c.PointIndex.FAR_BOTTOM_LEFT,c.PointIndex.NEAR_BOTTOM_LEFT,c.PointIndex.NEAR_TOP_LEFT,
c.PointIndex.FAR_TOP_LEFT],top:[c.PointIndex.FAR_TOP_LEFT,c.PointIndex.NEAR_TOP_LEFT,c.PointIndex.NEAR_TOP_RIGHT,c.PointIndex.FAR_TOP_RIGHT]},F=[y.fromValues(-1,-1,-1,1),y.fromValues(1,-1,-1,1),y.fromValues(1,1,-1,1),y.fromValues(-1,1,-1,1),y.fromValues(-1,-1,1,1),y.fromValues(1,-1,1,1),y.fromValues(1,1,1,1),y.fromValues(-1,1,1,1)],v=new q.ObjectStack(t.create),K=k();c.NumPlanes=6;c.NumPoints=8;c.computePlanes=m;c.copy=function(r,B){for(let Q=0;6>Q;Q++)A.copy(r[Q],B[Q]);return r};c.create=function(r){return r?
[A.create(r[0]),A.create(r[1]),A.create(r[2]),A.create(r[3]),A.create(r[4]),A.create(r[5])]:[A.create(),A.create(),A.create(),A.create(),A.create(),A.create()]};c.createPoints=k;c.fromMatrix=function(r,B,Q,O=K){r=n.multiply(e.sm4d.get(),B,r);n.invert(r,r);for(B=0;8>B;++B){const Y=z.transformMat4(e.sv4d.get(),F[B],r);d.set(O[B],Y[0]/Y[3],Y[1]/Y[3],Y[2]/Y[3])}m(Q,O)};c.intersectClipRay=function(r,B){for(let Q=0;6>Q;Q++)if(!A.clipInfinite(r[Q],B))return!1;return!0};c.intersectsLineSegment=function(r,
B,Q){return C(r,t.fromLineSegmentAndDirection(B,Q,v.get()))};c.intersectsPoint=function(r,B){for(let Q=0;6>Q;Q++)if(0<A.signedDistance(r[Q],B))return!1;return!0};c.intersectsRay=function(r,B){return C(r,t.fromRay(B,v.get()))};c.intersectsSphere=function(r,B){for(let Q=0;6>Q;Q++){const O=r[Q];if(O[0]*B[0]+O[1]*B[1]+O[2]*B[2]+O[3]>=B[3])return!1}return!0};c.planePointIndices=G;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/clipRay":function(){define(["exports",
"../../core/ObjectStack","../../chunks/vec3","./ray"],function(c,q,n,d){function l(A){return A?{ray:d.create(A.ray),c0:A.c0,c1:A.c1}:{ray:d.create(),c0:0,c1:Number.MAX_VALUE}}function z(A,e,k,m=l()){d.copy(A,m.ray);m.c0=e;m.c1=k;return m}function y(A,e,k){return n.add(k,A.ray.origin,n.scale(k,A.ray.direction,e))}const t=new q.ObjectStack(()=>l());c.copy=function(A,e=l()){return z(A.ray,A.c0,A.c1,e)};c.create=l;c.fromLineSegmentAndDirection=function(A,e,k=l()){const m=n.length(A.vector);d.fromValues(A.origin,
e,k.ray);k.c0=0;k.c1=m;return k};c.fromRay=function(A,e=l()){d.copy(A,e.ray);e.c0=0;e.c1=Number.MAX_VALUE;return e};c.fromValues=z;c.getAt=y;c.getEnd=function(A,e){return y(A,A.c1,e)};c.getStart=function(A,e){return y(A,A.c0,e)};c.wrap=function(A,e,k){const m=t.get();m.ray=A;m.c0=e;m.c1=k;return m};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/common ../../chunks/sphere ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),
function(c,q,n,d,l,z,y,t,A,e){function k(I=ka){return[I[0],I[1],I[2],I[3]]}function m(I,N){return C(N[0],N[1],N[2],N[3],I)}function C(I,N,g,x,H=k()){H[0]=I;H[1]=N;H[2]=g;H[3]=x;return H}function G(I,N,g){var x=N[0]*N[0]+N[1]*N[1]+N[2]*N[2];x=1E-5<Math.abs(x-1)&&1E-12<x?1/Math.sqrt(x):1;g[0]=N[0]*x;g[1]=N[1]*x;g[2]=N[2]*x;g[3]=-(g[0]*I[0]+g[1]*I[1]+g[2]*I[2]);return g}function F(I,N,g,x=k()){var H=g[0]-N[0],T=g[1]-N[1],X=g[2]-N[2];g=I[0]-N[0];const u=I[1]-N[1],E=I[2]-N[2];N=T*E-X*u;X=X*g-H*E;H=H*u-
T*g;T=N*N+X*X+H*H;T=1E-5<Math.abs(T-1)&&1E-12<T?1/Math.sqrt(T):1;x[0]=N*T;x[1]=X*T;x[2]=H*T;x[3]=-(x[0]*I[0]+x[1]*I[1]+x[2]*I[2]);return x}function v(I,N,g,x=0,H=Math.floor(1/3*g),T=Math.floor(2/3*g)){if(3>g)return!1;N(O,x);let X=H,u=!1;for(;X<g-1&&!u;)N(Y,X),X++,u=!n.exactEquals(O,Y);if(!u)return!1;X=Math.max(X,T);for(u=!1;X<g&&!u;)N(Z,X),X++,n.subtract(da,O,Y),n.normalize(da,da),n.subtract(ja,Y,Z),n.normalize(ja,ja),u=!n.exactEquals(O,Z)&&!n.exactEquals(Y,Z)&&.99619469809>Math.abs(n.dot(da,ja));
if(!u)return 0===x&&1===H&&2===T?!1:v(I,N,g,0,1,2);F(O,Y,Z,I);return!0}function K(I,N,g){I=n.scale(A.sv3d.get(),I,n.dot(I,N));n.subtract(g,N,I);return g}function r(I,N){return n.dot(I,N)+I[3]}function B(I,N,g,x,H){const T=n.dot(I,g);if(0===T)return!1;I=-(n.dot(I,N)+I[3])/T;x&pa.CLAMP&&(I=q.clamp(I,0,1));if(!(x&pa.INFINITE_MIN)&&0>I||!(x&pa.INFINITE_MAX)&&1<I)return!1;n.add(H,N,n.scale(H,g,I));return!0}const Q=l.exactEquals;l=l.equals;const O=d.create(),Y=d.create(),Z=d.create(),da=d.create(),ja=d.create(),
oa=(()=>{const I=d.create();return(N,g,x)=>{n.cross(I,N,g);if(n.squaredLength(I)<z.getEpsilon())return!1;n.normalize(I,I);const [H,T,X]=I,u=x.origin,E=Math.abs(H),L=Math.abs(T),ca=Math.abs(X),[ha,la,f]=N,[w,aa,W]=g;N=N[3];g=g[3];E>L&&E>ca?(u[1]=(g*f-N*W)/H,u[2]=(N*aa-g*la)/H):L>ca?(u[0]=(N*W-g*f)/T,u[2]=(g*ha-N*w)/T):(u[0]=(g*la-N*aa)/X,u[1]=(N*w-g*ha)/X);n.copy(x.direction,I);return!0}})(),ka=[0,0,1,0];var pa;(function(I){I[I.NONE=0]="NONE";I[I.CLAMP=1]="CLAMP";I[I.INFINITE_MIN=4]="INFINITE_MIN";
I[I.INFINITE_MAX=8]="INFINITE_MAX"})(pa||(pa={}));const va=pa.INFINITE_MIN|pa.INFINITE_MAX,ua=pa.INFINITE_MAX;c.clip=function(I,N){const g=n.dot(I,N.ray.direction);I=-r(I,N.ray.origin);if(0>I&&0<=g)return!1;if(-1E-6<g&&1E-6>g)return 0<I;if((0>I||0>g)&&!(0>I&&0>g))return!0;I/=g;0<g?I<N.c1&&(N.c1=I):I>N.c0&&(N.c0=I);return N.c0<=N.c1};c.clipInfinite=function(I,N){const g=n.dot(I,N.ray.direction);I=-r(I,N.ray.origin);if(-1E-6<g&&1E-6>g)return 0<I;I/=g;0<g?I<N.c1&&(N.c1=I):I>N.c0&&(N.c0=I);return N.c0<=
N.c1};c.copy=m;c.create=k;c.distance=function(I,N){return Math.abs(r(I,N))};c.equals=l;c.exactEquals=Q;c.fromArray=function(I,N,g=!0){const x=N.length/3;return v(I,(H,T)=>n.set(H,N[3*T],N[3*T+1],N[3*T+2]),g?x-1:x)};c.fromManyPoints=v;c.fromNormalAndOffset=function(I,N,g){n.copy(g,I);g[3]=N;return g};c.fromPoints=F;c.fromPositionAndNormal=G;c.fromValues=C;c.fromVectorsAndPoint=function(I,N,g,x){n.cross(Z,N,I);return G(g,Z,x)};c.intersectLine=function(I,N,g,x){g=n.subtract(A.sv3d.get(),g,N);return B(I,
N,g,va,x)};c.intersectLineSegment=function(I,N,g){return B(I,N.origin,N.vector,pa.NONE,g)};c.intersectLineSegmentClamp=function(I,N,g){return B(I,N.origin,N.vector,pa.CLAMP,g)};c.intersectPlanes=oa;c.intersectRay=function(I,N,g){return null!=N?B(I,N.origin,N.direction,ua,g):!1};c.isPointInside=function(I,N){return 0<=r(I,N)};c.isPointOutside=function(I,N){return 0>r(I,N)};c.isSphereFullyInside=function(I,N){return 0<=r(I,y.getCenter(N))-N[3]};c.isSphereFullyOutside=function(I,N){return 0>r(I,y.getCenter(N))+
N[3]};c.isVertical=function(I){return Math.abs(I[2])<z.getEpsilon()};c.negate=function(I,N){N[0]=-I[0];N[1]=-I[1];N[2]=-I[2];N[3]=-I[3];return N};c.normal=function(I){return I};c.projectPoint=function(I,N,g){const x=n.scale(A.sv3d.get(),I,-I[3]);N=n.subtract(A.sv3d.get(),N,x);I=K(I,N,A.sv3d.get());n.add(g,I,x);return g};c.projectPointLocal=function(I,N,g,x){var H=A.sv3d.get(),T=A.sv3d.get();e.tangentFrame(I,H,T);N=n.subtract(A.sv3d.get(),g,N);H=t.projectPointSignedLength(H,N);T=t.projectPointSignedLength(T,
N);I=t.projectPointSignedLength(I,N);return n.set(x,H,T,I)};c.projectVector=K;c.setOffsetFromPoint=function(I,N,g){N!==I&&m(I,N);I[3]=-n.dot(I,g);return I};c.signedDistance=r;c.up=ka;c.wrap=function(I=ka[0],N=ka[1],g=ka[2],x=ka[3]){return C(I,N,g,x,A.sv4d.get())};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(c,q,n,d){const l=d.create(),
z=d.create(),y=d.create(),t=d.create(),A=d.create();c.angle=function(e,k,m){e=n.normalize(t,e);k=n.normalize(A,k);const C=q.acosClamped(n.dot(e,k));return m&&(e=n.cross(y,e,k),0>n.dot(e,m))?-C:C};c.bilerp=function(e,k,m,C,G,F){e+=(k-e)*G;return e+(m+(C-m)*G-e)*F};c.cosCapped=function(e,k){return e>k?Math.cos(k):Math.cos(e)};c.fovx2fovy=function(e,k,m){return 2*Math.atan(m*Math.tan(.5*e)/k)};c.fovy2fovx=function(e,k,m){return 2*Math.atan(k*Math.tan(.5*e)/m)};c.makeOrthonormal=function(e,k,m){m=m||
e;const C=n.dot(e,k);n.set(m,e[0]-C*k[0],e[1]-C*k[1],e[2]-C*k[2]);n.normalize(m,m)};c.makePiecewiseLinearFunction=function(e){const k=e.length;return m=>{if(m<=e[0][0])return e[0][1];if(m>=e[k-1][0])return e[k-1][1];let C=1;for(;m>e[C][0];)C++;const G=e[C][0];m=(G-m)/(G-e[C-1][0]);return m*e[C-1][1]+(1-m)*e[C][1]}};c.maxScale=function(e){return Math.sqrt(Math.max(e[0]*e[0]+e[4]*e[4]+e[8]*e[8],e[1]*e[1]+e[5]*e[5]+e[9]*e[9],e[2]*e[2]+e[6]*e[6]+e[10]*e[10]))};c.planeFromPoints=function(e,k,m,C){n.subtract(l,
k,e);n.subtract(z,m,e);n.cross(C,l,z);n.normalize(C,C);C[3]=-n.dot(e,C)};c.scaleFromMatrix=function(e,k){n.set(e,Math.sqrt(k[0]*k[0]+k[4]*k[4]+k[8]*k[8]),Math.sqrt(k[1]*k[1]+k[5]*k[5]+k[9]*k[9]),Math.sqrt(k[2]*k[2]+k[6]*k[6]+k[10]*k[10]));return e};c.slerp=function(e,k,m,C=d.create()){const G=n.length(e);var F=n.length(k),v=n.dot(e,k)/(G*F);if(.9999999999999999>v){v=Math.acos(v);const K=((1-m)*G+m*F)/Math.sin(v);F=K/F*Math.sin(m*v);n.scale(t,e,K/G*Math.sin((1-m)*v));n.scale(A,k,F);return n.add(C,
t,A)}return n.lerp(C,e,k,m)};c.slerpTangent=function(e,k,m,C=d.create(),G=d.create()){const F=n.length(e),v=n.length(k);var K=n.dot(e,k)/(F*v);if(.9999999999999999>K){K=Math.acos(K);const r=Math.sin(K),B=Math.sin(m*K),Q=Math.sin((1-m)*K),O=(1-m)*F+m*v,Y=O/r,Z=Y/v*B;n.scale(t,e,Y/F*Q);n.scale(A,k,Z);n.add(C,t,A);n.scale(t,e,1/F*(-Math.cos((1-m)*K)*K*O+Q*(-F+v)));n.scale(A,k,1/v*(Math.cos(m*K)*K*O+B*(-F+v)));n.add(G,t,A);n.scale(G,G,1/r);return G}n.lerp(C,e,k,m);n.subtract(G,k,e);n.normalize(G,G);return G};
c.tangentFrame=function(e,k,m){Math.abs(e[0])>Math.abs(e[1])?n.set(k,0,1,0):n.set(k,1,0,0);n.cross(m,e,k);n.normalize(k,k);n.cross(k,m,e);n.normalize(m,m)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../chunks/vec2f64","../../../../chunks/vec4","../../../../chunks/vec4f64"],function(c,q,n,d){function l(t,A){if(!t)throw A=A||"Assertion",new y(`${A} at ${Error(A).stack}`);}const z=d.create();class y{constructor(t){this.message=
t}toString(){return`AssertException: ${this.message}`}}c.assert=l;c.isTranslationMatrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]};c.logWithBase=function(t,A){return Math.log(t)/Math.log(A)};c.project=function(t,A,e,k,m){z[0]=t[0];z[1]=t[1];z[2]=t[2];z[3]=1;n.transformMat4(z,z,A);2<m.length&&(m[2]=-z[2]);n.transformMat4(z,z,e);l(0!==z[3]);m[0]=z[0]/z[3];m[1]=z[1]/z[3];m[2]=z[2]/z[3];m[0]=(.5*
m[0]+.5)*k[2]+k[0];m[1]=(.5*m[1]+.5)*k[3]+k[1]};c.rayBoxTest=function(t,A,e,k){let m,C=(e[0]-t[0])/A[0],G=(k[0]-t[0])/A[0];C>G&&(m=C,C=G,G=m);let F=(e[1]-t[1])/A[1],v=(k[1]-t[1])/A[1];F>v&&(m=F,F=v,v=m);if(C>v||F>G)return!1;F>C&&(C=F);v<G&&(G=v);e=(e[2]-t[2])/A[2];t=(k[2]-t[2])/A[2];e>t&&(m=e,e=t,t=m);if(C>t||e>G)return!1;t<G&&(G=t);return 0>G?!1:!0};c.rayRay2D=function(t,A,e,k,m,C=q.create()){const G=(k[m]-e[m])*(A[0]-t[0])-(k[0]-e[0])*(A[m]-t[m]);if(0===G)return!1;e=((k[0]-e[0])*(t[m]-e[m])-(k[m]-
e[m])*(t[0]-e[0]))/G;C[0]=t[0]+e*(A[0]-t[0]);C[1]=t[m]+e*(A[m]-t[m]);return!0};c.setMatrixTranslation3=function(t,A,e,k){t[12]=A;t[13]=e;t[14]=k};c.verify=function(t,A){t||console.warn("Verify failed: "+(A||"")+"\n"+Error("verify").stack)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeProcessing":function(){define("exports ../../../../../geometry/support/meshUtils/deduplicate ../../../support/meshProcessing ../../../support/buffer/InterleavedLayout ../VertexAttribute ./bufferLayouts ./edgeBufferWriters ./edgePreprocessing".split(" "),
function(c,q,n,d,l,z,y,t){function A(C,G,F,v){if(G)return G=n.computeNeighbors(F,v,C.count),new e(F,v,G,C);C=q.deduplicate(C.buffer,C.stride/4,{originalIndices:F,originalIndicesLength:v});v=n.computeNeighbors(C.indices,v,C.uniqueCount);return{faces:C.indices,facesLength:C.indices.length,neighbors:v,vertices:z.EdgeInputBufferLayout.createView(C.buffer)}}class e{constructor(C,G,F,v){this.faces=C;this.facesLength=G;this.neighbors=F;this.vertices=v}}const k=new y.RegularEdgeBufferWriter,m=new y.SilhouetteEdgeBufferWriter;
y=d.newLayout().vec3f(l.VertexAttribute.POSITION0).vec3f(l.VertexAttribute.POSITION1);d=d.newLayout().vec3f(l.VertexAttribute.POSITION0).vec3f(l.VertexAttribute.POSITION1).u16(l.VertexAttribute.COMPONENTINDEX);c.extract=function(C){const G=A(C.data,C.skipDeduplicate,C.indices,C.indicesLength);k.updateSettings(C.writerSettings);m.updateSettings(C.writerSettings);return t.extractEdges(G,k,m)};c.extractComponentsEdgeLocationsLayout=d;c.extractEdgeInformation=A;c.extractEdgeLocationsLayout=y;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/meshUtils/deduplicate":function(){define(["exports","../../../core/mathUtils","../Indices"],function(c,q,n){let d=null;c.deduplicate=function(l,z,y){var t=Array.isArray(l),A=t?l.length/z:l.byteLength/(4*z),e=t?l:new Uint32Array(l,0,A*z),k=y?.minReduction??0;const m=(l=y?.originalIndices||null)?l.length:0;var C=y?.componentOffsets||null;y=0;if(C)for(var G=0;G<C.length-1;G++){var F=C[G+1]-C[G];F>y&&(y=F)}else y=A;var v=Math.floor(1.1*y)+
1;if(null==d||d.length<2*v)d=new Uint32Array(q.nextHighestPowerOfTwo(2*v));for(y=0;y<2*v;y++)d[y]=0;y=0;const K=(F=!!C&&!!l)?m:A;G=n.newIndexArray(A);var r=new Uint32Array(m),B=0!==k?Math.ceil(7.84*1.96/(k*k)*k*(1-k)):K,Q=1,O=C?C[1]:K;for(let oa=0;oa<K;oa++){if(oa===B){var Y=1-y/oa;if(Y+1.96*Math.sqrt(Y*(1-Y)/oa)<k)return null;B*=2}if(oa===O){for(O=0;O<2*v;O++)d[O]=0;if(l)for(O=C[Q-1];O<C[Q];O++)r[O]=G[l[O]];O=C[++Q]}Y=F?l[oa]:oa;const ka=Y*z;var Z=0;for(var da=0;da<z;da++)Z=e[ka+da]+Z|0,Z=Z+(Z<<
11)+(Z>>>2)|0;Z>>>=0;da=Z%v;let pa=y;for(;0!==d[2*da+1];){if(d[2*da]===Z){const va=d[2*da+1]-1;var ja=va*z;a:{for(let ua=0;ua<z;ua++)if(e[ka+ua]!==e[ja+ua]){ja=!1;break a}ja=!0}if(ja){pa=G[va];break}}da++;da>=v&&(da-=v)}pa===y&&(d[2*da]=Z,d[2*da+1]=Y+1,y++);G[Y]=pa}if(0!==k&&1-y/A<k)return null;if(F){for(A=C[Q-1];A<r.length;A++)r[A]=G[l[A]];G=n.compactIndices(r)}t=t?Array(y):new Uint32Array(y*z);y=0;for(B=0;B<K;B++)if(G[B]===y){A=e;k=(F?l[B]:B)*z;C=t;v=y*z;r=z;for(Q=0;Q<r;Q++)C[v+Q]=A[k+Q];y++}if(l&&
!F){z=new Uint32Array(m);for(e=0;e<z.length;e++)z[e]=G[l[e]];G=n.compactIndices(z)}return{buffer:Array.isArray(t)?t:t.buffer,indices:G,uniqueCount:y}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/Indices":function(){define(["exports","../../core/typedArrayUtil"],function(c,q){function n(e){let k=!0;for(const m of e){if(65536<=m)return q.isArray(e)?new Uint32Array(e):e;256<=m&&(k=!1)}return k?new Uint8Array(e):new Uint16Array(e)}function d(e){if(1===e)return y;
if(e<q.nativeArrayMaxSize)return Array.from(new Uint16Array(t.buffer,0,e));if(e<t.length)return new Uint16Array(t.buffer,0,e);if(e>z.length){z=new Uint32Array(Math.max(2*z.length,e));for(let k=0;k<z.length;k++)z[k]=k}return new Uint32Array(z.buffer,0,e)}function l(e){if(1===e)return y;if(e<q.nativeArrayMaxSize)return Array(e).fill(0);e>A.length&&(A=new Uint8Array(Math.max(2*A.length,e)));return new Uint8Array(A.buffer,0,e)}let z=(()=>{const e=new Uint32Array(131072);for(let k=0;k<e.length;++k)e[k]=
k;return e})();const y=[0],t=(()=>{const e=new Uint16Array(65536);for(let k=0;k<e.length;++k)e[k]=k;return e})();let A=new Uint8Array(65536);c.compactIndices=function(e){if(q.isArray(e)){if(e.length<q.nativeArrayMaxSize)return e}else if(e.length<q.nativeArrayMaxSize)return Array.from(e);let k=!0,m=!0;e.some((C,G)=>{k=k&&0===C;m=m&&C===G;return!k&&!m});return k?l(e.length):m?d(e.length):q.isArray(e)||e.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?n(e):e};c.getContinuousIndexArray=d;c.getZeroIndexArray=
l;c.newIndexArray=function(e){return e<=q.nativeArrayMaxSize?Array(e):65536>=e?new Uint16Array(e):new Uint32Array(e)};c.newIntArray=function(e){return e<=q.nativeArrayMaxSize?Array(e):new Uint32Array(e)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/meshProcessing":function(){define(["exports"],function(c){c.computeNeighbors=function(q,n,d){n/=3;const l=new Uint32Array(d+1),z=new Uint32Array(d+1);var y=(v,K)=>{v<K?l[v+1]++:z[K+1]++};for(var t=0;t<n;t++){var A=
q[3*t],e=q[3*t+1],k=q[3*t+2];y(A,e);y(e,k);y(k,A)}t=y=0;for(A=0;A<d;A++)e=l[A+1],k=z[A+1],l[A+1]=y,z[A+1]=t,y+=e,t+=k;const m=new Uint32Array(6*n),C=l[d];y=(v,K,r)=>{v<K?(v=l[v+1]++,m[2*v]=K,m[2*v+1]=r):(K=z[K+1]++,m[2*C+2*K]=v,m[2*C+2*K+1]=r)};for(t=0;t<n;t++)A=q[3*t],e=q[3*t+1],k=q[3*t+2],y(A,e,t),y(e,k,t),y(k,A,t);y=(v,K)=>{const r=2*v;v=K-v;for(K=1;K<v;K++){const B=m[r+2*K],Q=m[r+2*K+1];let O=K-1;for(O;0<=O&&m[r+2*O]>B;O--)m[r+2*O+2]=m[r+2*O],m[r+2*O+3]=m[r+2*O+1];m[r+2*O+2]=B;m[r+2*O+3]=Q}};
for(t=0;t<d;t++)y(l[t],l[t+1]),y(C+z[t],C+z[t+1]);const G=new Int32Array(3*n),F=(v,K)=>v===q[3*K]?0:v===q[3*K+1]?1:v===q[3*K+2]?2:-1;n=(v,K)=>{v=F(v,K);G[3*K+v]=-1};y=(v,K,r,B)=>{v=F(v,K);G[3*K+v]=B;r=F(r,B);G[3*B+r]=K};for(t=0;t<d;t++){A=l[t];e=l[t+1];k=z[t];const v=z[t+1];for(;A<e&&k<v;){const K=m[2*A],r=m[2*C+2*k];K===r?(y(t,m[2*A+1],r,m[2*C+2*k+1]),A++,k++):K<r?(n(t,m[2*A+1]),A++):(n(r,m[2*C+2*k+1]),k++)}for(;A<e;)n(t,m[2*A+1]),A++;for(;k<v;)n(m[2*C+2*k],m[2*C+2*k+1]),k++}return G};Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports","../../../../geometry/support/buffer/BufferView","../../../../geometry/support/buffer/types","../../webgl-engine/lib/Util"],function(c,q,n,d){class l{constructor(e,k){this.layout=e;this.buffer="number"===typeof k?new ArrayBuffer(k*e.stride):k;for(const m of e.fields.keys())k=e.fields.get(m),this[m]=new k.constructor(this.buffer,k.offset,this.stride)}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/
this.stride}get byteLength(){return this.buffer.byteLength}getField(e,k){return(e=this[e])&&e.elementCount===k.ElementCount&&e.elementType===k.ElementType?e:null}slice(e,k){return new l(this.layout,this.buffer.slice(e*this.stride,k*this.stride))}copyFrom(e,k=0,m=0,C=e.count){const G=this.stride;0===G%4?(e=new Uint32Array(e.buffer,k*G,C*G/4),(new Uint32Array(this.buffer,m*G,C*G/4)).set(e)):(e=new Uint8Array(e.buffer,k*G,C*G),(new Uint8Array(this.buffer,m*G,C*G)).set(e));return this}get usedMemory(){return this.byteLength}dispose(){}}
class z{constructor(e=null){this._lastAligned=this._stride=0;this._fields=new Map;e&&(this._stride=e.stride,e.fields.forEach(k=>this._fields.set(k[0],{...k[1],constructor:A.get(k[1].constructor)})))}vec2f(e,k){this._appendField(e,q.BufferViewVec2f,k);return this}vec2f64(e,k){this._appendField(e,q.BufferViewVec2f64,k);return this}vec3f(e,k){this._appendField(e,q.BufferViewVec3f,k);return this}vec3f64(e,k){this._appendField(e,q.BufferViewVec3f64,k);return this}vec4f(e,k){this._appendField(e,q.BufferViewVec4f,
k);return this}vec4f64(e,k){this._appendField(e,q.BufferViewVec4f64,k);return this}mat3f(e,k){this._appendField(e,q.BufferViewMat3f,k);return this}mat3f64(e,k){this._appendField(e,q.BufferViewMat3f64,k);return this}mat4f(e,k){this._appendField(e,q.BufferViewMat4f,k);return this}mat4f64(e,k){this._appendField(e,q.BufferViewMat4f64,k);return this}vec4u8(e,k){this._appendField(e,q.BufferViewVec4u8,k);return this}f32(e,k){this._appendField(e,q.BufferViewFloat,k);return this}f64(e,k){this._appendField(e,
q.BufferViewFloat64,k);return this}u8(e,k){this._appendField(e,q.BufferViewUint8,k);return this}u16(e,k){this._appendField(e,q.BufferViewUint16,k);return this}i8(e,k){this._appendField(e,q.BufferViewInt8,k);return this}vec2i8(e,k){this._appendField(e,q.BufferViewVec2i8,k);return this}vec2i16(e,k){this._appendField(e,q.BufferViewVec2i16,k);return this}vec2u8(e,k){this._appendField(e,q.BufferViewVec2u8,k);return this}vec4u16(e,k){this._appendField(e,q.BufferViewVec4u16,k);return this}u32(e,k){this._appendField(e,
q.BufferViewUint32,k);return this}_appendField(e,k,m){if(this._fields.has(e))d.assert(!1,`${e} already added to vertex buffer layout`);else{var C=k.ElementCount*n.elementTypeSize(k.ElementType),G=this._stride;this._stride+=C;this._fields.set(e,{size:C,constructor:k,offset:G,optional:m})}}createBuffer(e){return new l(this,e)}createView(e){return new l(this,e)}clone(){const e=new z;e._stride=this._stride;e._fields=new Map;this._fields.forEach((k,m)=>e._fields.set(m,k));e.BufferType=this.BufferType;
return e}get stride(){if(this._lastAligned!==this._fields.size){let e=1;this._fields.forEach(k=>e=Math.max(e,n.elementTypeSize(k.constructor.ElementType)));this._stride=Math.floor((this._stride+e-1)/e)*e;this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}}class y{constructor(e){this.fields=[];e.fields.forEach((k,m)=>{var C=k.constructor;this.fields.push([m,{...k,constructor:`${C.ElementType}_${C.ElementCount}`}])});this.stride=e.stride}}const t=[q.BufferViewFloat,
q.BufferViewVec2f,q.BufferViewVec3f,q.BufferViewVec4f,q.BufferViewMat3f,q.BufferViewMat4f,q.BufferViewFloat64,q.BufferViewVec2f64,q.BufferViewVec3f64,q.BufferViewVec4f64,q.BufferViewMat3f64,q.BufferViewMat4f64,q.BufferViewUint8,q.BufferViewVec2u8,q.BufferViewVec3u8,q.BufferViewVec4u8,q.BufferViewUint16,q.BufferViewVec2u16,q.BufferViewVec3u16,q.BufferViewVec4u16,q.BufferViewUint32,q.BufferViewVec2u32,q.BufferViewVec3u32,q.BufferViewVec4u32,q.BufferViewInt8,q.BufferViewVec2i8,q.BufferViewVec3i8,q.BufferViewVec4i8,
q.BufferViewInt16,q.BufferViewVec2i16,q.BufferViewVec3i16,q.BufferViewVec4i16,q.BufferViewInt32,q.BufferViewVec2i32,q.BufferViewVec3i32,q.BufferViewVec4i32],A=new Map;t.forEach(e=>A.set(`${e.ElementType}_${e.ElementCount}`,e));c.InterleavedBuffer=l;c.InterleavedLayout=z;c.PackedLayout=y;c.newLayout=function(){return new z};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/BufferView":function(){define("exports ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),
function(c,q,n,d,l,z,y){class t extends d.BufferViewScalarImpl{constructor(f,w=0,aa,W){super(Float32Array,f,w,aa,W);this.elementType="f32"}static fromTypedArray(f,w){return new t(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}t.ElementType="f32";class A extends l.BufferViewVec2Impl{constructor(f,w=0,aa,W){super(Float32Array,f,w,aa,W);this.elementType="f32"}slice(f,w){return this.sliceBuffer(A,f,w)}static fromTypedArray(f,w){return new A(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}A.ElementType=
"f32";class e extends z.BufferViewVec3Impl{constructor(f,w=0,aa,W){super(Float32Array,f,w,aa,W);this.elementType="f32"}slice(f,w){return this.sliceBuffer(e,f,w)}static fromTypedArray(f,w){return new e(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}e.ElementType="f32";class k extends y.BufferViewVec4Impl{constructor(f,w=0,aa,W){super(Float32Array,f,w,aa,W);this.elementType="f32"}slice(f,w){return this.sliceBuffer(k,f,w)}static fromTypedArray(f,w){return new k(f.buffer,f.byteOffset,w,f.byteOffset+
f.byteLength)}}k.ElementType="f32";class m extends q.BufferViewMat3Impl{constructor(f,w=0,aa,W){super(Float32Array,f,w,aa,W);this.elementType="f32"}slice(f,w){return this.sliceBuffer(m,f,w)}static fromTypedArray(f,w){return new m(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}m.ElementType="f32";class C extends q.BufferViewMat3Impl{constructor(f,w=0,aa,W){super(Float64Array,f,w,aa,W);this.elementType="f64"}slice(f,w){return this.sliceBuffer(C,f,w)}static fromTypedArray(f,w){return new C(f.buffer,
f.byteOffset,w,f.byteOffset+f.byteLength)}}C.ElementType="f64";class G extends n.BufferViewMat4Impl{constructor(f,w=0,aa,W){super(Float32Array,f,w,aa,W);this.elementType="f32"}slice(f,w){return this.sliceBuffer(G,f,w)}static fromTypedArray(f,w){return new G(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}G.ElementType="f32";class F extends n.BufferViewMat4Impl{constructor(f,w=0,aa,W){super(Float64Array,f,w,aa,W);this.elementType="f64"}slice(f,w){return this.sliceBuffer(F,f,w)}static fromTypedArray(f,
w){return new F(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}F.ElementType="f64";class v extends d.BufferViewScalarImpl{constructor(f,w=0,aa,W){super(Float64Array,f,w,aa,W);this.elementType="f64"}slice(f,w){return this.sliceBuffer(v,f,w)}static fromTypedArray(f,w){return new v(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}v.ElementType="f64";class K extends l.BufferViewVec2Impl{constructor(f,w=0,aa,W){super(Float64Array,f,w,aa,W);this.elementType="f64"}slice(f,w){return this.sliceBuffer(K,
f,w)}static fromTypedArray(f,w){return new K(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}K.ElementType="f64";class r extends z.BufferViewVec3Impl{constructor(f,w=0,aa,W){super(Float64Array,f,w,aa,W);this.elementType="f64"}slice(f,w){return this.sliceBuffer(r,f,w)}static fromTypedArray(f,w){return new r(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}r.ElementType="f64";class B extends y.BufferViewVec4Impl{constructor(f,w=0,aa,W){super(Float64Array,f,w,aa,W);this.elementType="f64"}slice(f,
w){return this.sliceBuffer(B,f,w)}static fromTypedArray(f,w){return new B(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}B.ElementType="f64";class Q extends d.BufferViewScalarImpl{constructor(f,w=0,aa,W){super(Uint8Array,f,w,aa,W);this.elementType="u8"}slice(f,w){return this.sliceBuffer(Q,f,w)}static fromTypedArray(f,w){return new Q(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}Q.ElementType="u8";class O extends l.BufferViewVec2Impl{constructor(f,w=0,aa,W){super(Uint8Array,f,w,aa,W);this.elementType=
"u8"}slice(f,w){return this.sliceBuffer(O,f,w)}static fromTypedArray(f,w){return new O(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}O.ElementType="u8";class Y extends z.BufferViewVec3Impl{constructor(f,w=0,aa,W){super(Uint8Array,f,w,aa,W);this.elementType="u8"}slice(f,w){return this.sliceBuffer(Y,f,w)}static fromTypedArray(f,w){return new Y(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}Y.ElementType="u8";class Z extends y.BufferViewVec4Impl{constructor(f,w=0,aa,W){super(Uint8Array,f,
w,aa,W);this.elementType="u8"}slice(f,w){return this.sliceBuffer(Z,f,w)}static fromTypedArray(f,w){return new Z(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}Z.ElementType="u8";class da extends d.BufferViewScalarImpl{constructor(f,w=0,aa,W){super(Uint16Array,f,w,aa,W);this.elementType="u16"}slice(f,w){return this.sliceBuffer(da,f,w)}static fromTypedArray(f,w){return new da(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}da.ElementType="u16";class ja extends l.BufferViewVec2Impl{constructor(f,
w=0,aa,W){super(Uint16Array,f,w,aa,W);this.elementType="u16"}slice(f,w){return this.sliceBuffer(ja,f,w)}static fromTypedArray(f,w){return new ja(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}ja.ElementType="u16";class oa extends z.BufferViewVec3Impl{constructor(f,w=0,aa,W){super(Uint16Array,f,w,aa,W);this.elementType="u16"}slice(f,w){return this.sliceBuffer(oa,f,w)}static fromTypedArray(f,w){return new oa(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}oa.ElementType="u16";class ka extends y.BufferViewVec4Impl{constructor(f,
w=0,aa,W){super(Uint16Array,f,w,aa,W);this.elementType="u16"}slice(f,w){return this.sliceBuffer(ka,f,w)}static fromTypedArray(f,w){return new ka(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}ka.ElementType="u16";class pa extends d.BufferViewScalarImpl{constructor(f,w=0,aa,W){super(Uint32Array,f,w,aa,W);this.elementType="u32"}slice(f,w){return this.sliceBuffer(pa,f,w)}static fromTypedArray(f,w){return new pa(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}pa.ElementType="u32";class va extends l.BufferViewVec2Impl{constructor(f,
w=0,aa,W){super(Uint32Array,f,w,aa,W);this.elementType="u32"}slice(f,w){return this.sliceBuffer(va,f,w)}static fromTypedArray(f,w){return new va(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}va.ElementType="u32";class ua extends z.BufferViewVec3Impl{constructor(f,w=0,aa,W){super(Uint32Array,f,w,aa,W);this.elementType="u32"}slice(f,w){return this.sliceBuffer(ua,f,w)}static fromTypedArray(f,w){return new ua(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}ua.ElementType="u32";class I extends y.BufferViewVec4Impl{constructor(f,
w=0,aa,W){super(Uint32Array,f,w,aa,W);this.elementType="u32"}slice(f,w){return this.sliceBuffer(I,f,w)}static fromTypedArray(f,w){return new I(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}I.ElementType="u32";class N extends d.BufferViewScalarImpl{constructor(f,w=0,aa,W){super(Int8Array,f,w,aa,W);this.elementType="i8"}slice(f,w){return this.sliceBuffer(N,f,w)}static fromTypedArray(f,w){return new N(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}N.ElementType="i8";class g extends l.BufferViewVec2Impl{constructor(f,
w=0,aa,W){super(Int8Array,f,w,aa,W);this.elementType="i8"}slice(f,w){return this.sliceBuffer(g,f,w)}static fromTypedArray(f,w){return new g(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}g.ElementType="i8";class x extends z.BufferViewVec3Impl{constructor(f,w=0,aa,W){super(Int8Array,f,w,aa,W);this.elementType="i8"}slice(f,w){return this.sliceBuffer(x,f,w)}static fromTypedArray(f,w){return new x(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}x.ElementType="i8";class H extends y.BufferViewVec4Impl{constructor(f,
w=0,aa,W){super(Int8Array,f,w,aa,W);this.elementType="i8"}slice(f,w){return this.sliceBuffer(H,f,w)}static fromTypedArray(f,w){return new H(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}H.ElementType="i8";class T extends d.BufferViewScalarImpl{constructor(f,w=0,aa,W){super(Int16Array,f,w,aa,W);this.elementType="i16"}slice(f,w){return this.sliceBuffer(T,f,w)}static fromTypedArray(f,w){return new T(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}T.ElementType="i16";class X extends l.BufferViewVec2Impl{constructor(f,
w=0,aa,W){super(Int16Array,f,w,aa,W);this.elementType="i16"}slice(f,w){return this.sliceBuffer(X,f,w)}static fromTypedArray(f,w){return new X(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}X.ElementType="i16";class u extends z.BufferViewVec3Impl{constructor(f,w=0,aa,W){super(Int16Array,f,w,aa,W);this.elementType="i16"}slice(f,w){return this.sliceBuffer(u,f,w)}static fromTypedArray(f,w){return new u(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}u.ElementType="i16";class E extends y.BufferViewVec4Impl{constructor(f,
w=0,aa,W){super(Int16Array,f,w,aa,W);this.elementType="i16"}slice(f,w){return this.sliceBuffer(E,f,w)}static fromTypedArray(f,w){return new E(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}E.ElementType="i16";class L extends d.BufferViewScalarImpl{constructor(f,w=0,aa,W){super(Int32Array,f,w,aa,W);this.elementType="i32"}slice(f,w){return this.sliceBuffer(L,f,w)}static fromTypedArray(f,w){return new L(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}L.ElementType="i32";class ca extends l.BufferViewVec2Impl{constructor(f,
w=0,aa,W){super(Int32Array,f,w,aa,W);this.elementType="i32"}slice(f,w){return this.sliceBuffer(ca,f,w)}static fromTypedArray(f,w){return new ca(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}ca.ElementType="i32";class ha extends z.BufferViewVec3Impl{constructor(f,w=0,aa,W){super(Int32Array,f,w,aa,W);this.elementType="i32"}slice(f,w){return this.sliceBuffer(ha,f,w)}static fromTypedArray(f,w){return new ha(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}ha.ElementType="i32";class la extends y.BufferViewVec4Impl{constructor(f,
w=0,aa,W){super(Int32Array,f,w,aa,W);this.elementType="i32"}slice(f,w){return this.sliceBuffer(la,f,w)}static fromTypedArray(f,w){return new la(f.buffer,f.byteOffset,w,f.byteOffset+f.byteLength)}}la.ElementType="i32";c.BufferViewFloat=t;c.BufferViewFloat64=v;c.BufferViewInt16=T;c.BufferViewInt32=L;c.BufferViewInt8=N;c.BufferViewMat3f=m;c.BufferViewMat3f64=C;c.BufferViewMat4f=G;c.BufferViewMat4f64=F;c.BufferViewUint16=da;c.BufferViewUint32=pa;c.BufferViewUint8=Q;c.BufferViewVec2f=A;c.BufferViewVec2f64=
K;c.BufferViewVec2i16=X;c.BufferViewVec2i32=ca;c.BufferViewVec2i8=g;c.BufferViewVec2u16=ja;c.BufferViewVec2u32=va;c.BufferViewVec2u8=O;c.BufferViewVec3f=e;c.BufferViewVec3f64=r;c.BufferViewVec3i16=u;c.BufferViewVec3i32=ha;c.BufferViewVec3i8=x;c.BufferViewVec3u16=oa;c.BufferViewVec3u32=ua;c.BufferViewVec3u8=Y;c.BufferViewVec4f=k;c.BufferViewVec4f64=B;c.BufferViewVec4i16=E;c.BufferViewVec4i32=la;c.BufferViewVec4i8=H;c.BufferViewVec4u16=ka;c.BufferViewVec4u32=I;c.BufferViewVec4u8=Z;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports"],function(c){class q{constructor(n,d,l=0,z,y){this.TypedArrayConstructor=n;this.elementCount=9;n=this.TypedArrayConstructor;void 0===z&&(z=9*n.BYTES_PER_ELEMENT);const t=0===d.byteLength?0:l;this.typedBuffer=null==y?new n(d,t):new n(d,t,(y-l)/n.BYTES_PER_ELEMENT);this.typedBufferStride=z/n.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=
this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(n,d,l=this.count-d){d=this.typedBuffer.byteOffset+d*this.stride;return new n(this.buffer,d,this.stride,d+l*this.stride)}getMat(n,d){n*=this.typedBufferStride;for(let l=0;9>l;l++)d[l]=this.typedBuffer[n++];return d}setMat(n,d){n*=this.typedBufferStride;for(let l=0;9>l;l++)this.typedBuffer[n++]=d[l]}get(n,d){return this.typedBuffer[n*this.typedBufferStride+d]}set(n,d,l){this.typedBuffer[n*this.typedBufferStride+d]=l}copyFrom(n,
d,l){const z=this.typedBuffer,y=d.typedBuffer;n*=this.typedBufferStride;d=l*d.typedBufferStride;for(l=0;9>l;++l)z[n++]=y[d++]}get buffer(){return this.typedBuffer.buffer}}q.ElementCount=9;c.BufferViewMat3Impl=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports"],function(c){class q{constructor(n,d,l=0,z,y){this.TypedArrayConstructor=n;this.elementCount=16;n=this.TypedArrayConstructor;void 0===z&&(z=16*n.BYTES_PER_ELEMENT);
const t=0===d.byteLength?0:l;this.typedBuffer=null==y?new n(d,t):new n(d,t,(y-l)/n.BYTES_PER_ELEMENT);this.typedBufferStride=z/n.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(n,d,l=this.count-d){d=this.typedBuffer.byteOffset+d*this.stride;return new n(this.buffer,d,this.stride,d+l*this.stride)}getMat(n,d){n*=this.typedBufferStride;for(let l=0;16>l;l++)d[l]=this.typedBuffer[n++];
return d}setMat(n,d){n*=this.typedBufferStride;for(let l=0;16>l;l++)this.typedBuffer[n++]=d[l]}get(n,d){return this.typedBuffer[n*this.typedBufferStride+d]}set(n,d,l){this.typedBuffer[n*this.typedBufferStride+d]=l}copyFrom(n,d,l){const z=this.typedBuffer,y=d.typedBuffer;n*=this.typedBufferStride;d=l*d.typedBufferStride;for(l=0;16>l;++l)z[n++]=y[d++]}get buffer(){return this.typedBuffer.buffer}}q.ElementCount=16;c.BufferViewMat4Impl=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports"],function(c){class q{constructor(n,d,l=0,z,y){this.TypedArrayConstructor=n;this.elementCount=1;n=this.TypedArrayConstructor;void 0===z&&(z=n.BYTES_PER_ELEMENT);const t=0===d.byteLength?0:l;this.typedBuffer=null==y?new n(d,t):new n(d,t,(y-l)/n.BYTES_PER_ELEMENT);this.stride=z;this.typedBufferStride=z/n.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(n,d,l=this.count-d){d=
this.typedBuffer.byteOffset+d*this.stride;return new n(this.buffer,d,this.stride,d+l*this.stride)}get(n){return this.typedBuffer[n*this.typedBufferStride]}set(n,d){this.typedBuffer[n*this.typedBufferStride]=d}get buffer(){return this.typedBuffer.buffer}}q.ElementCount=1;c.BufferViewScalarImpl=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports","../../../../chunks/vec2"],function(c,q){class n{constructor(d,l,z=
0,y,t){this.TypedArrayConstructor=d;this.elementCount=2;d=this.TypedArrayConstructor;void 0===y&&(y=2*d.BYTES_PER_ELEMENT);const A=0===l.byteLength?0:z;this.typedBuffer=null==t?new d(l,A):new d(l,A,(t-z)/d.BYTES_PER_ELEMENT);this.typedBufferStride=y/d.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(d,l,z=this.count-l){l=this.typedBuffer.byteOffset+l*this.stride;return new d(this.buffer,
l,this.stride,l+z*this.stride)}getVec(d,l){d*=this.typedBufferStride;return q.set(l,this.typedBuffer[d],this.typedBuffer[d+1])}setVec(d,l){d*=this.typedBufferStride;this.typedBuffer[d++]=l[0];this.typedBuffer[d]=l[1]}get(d,l){return this.typedBuffer[d*this.typedBufferStride+l]}set(d,l,z){this.typedBuffer[d*this.typedBufferStride+l]=z}setValues(d,l,z){d*=this.typedBufferStride;this.typedBuffer[d++]=l;this.typedBuffer[d]=z}copyFrom(d,l,z){const y=this.typedBuffer,t=l.typedBuffer;d*=this.typedBufferStride;
l=z*l.typedBufferStride;y[d++]=t[l++];y[d]=t[l]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=2;c.BufferViewVec2Impl=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(c,q){function n(u,E){u[0]=E[0];u[1]=E[1];return u}function d(u,E,L){u[0]=E;u[1]=L;return u}function l(u,E,L){u[0]=E[0]+L[0];u[1]=E[1]+L[1];return u}function z(u,E,L){u[0]=E[0]-L[0];u[1]=E[1]-L[1];return u}function y(u,E,L){u[0]=E[0]*L[0];
u[1]=E[1]*L[1];return u}function t(u,E,L){u[0]=E[0]/L[0];u[1]=E[1]/L[1];return u}function A(u,E){u[0]=Math.ceil(E[0]);u[1]=Math.ceil(E[1]);return u}function e(u,E){u[0]=Math.floor(E[0]);u[1]=Math.floor(E[1]);return u}function k(u,E,L){u[0]=Math.min(E[0],L[0]);u[1]=Math.min(E[1],L[1]);return u}function m(u,E,L){u[0]=Math.max(E[0],L[0]);u[1]=Math.max(E[1],L[1]);return u}function C(u,E){u[0]=Math.round(E[0]);u[1]=Math.round(E[1]);return u}function G(u,E,L){u[0]=E[0]*L;u[1]=E[1]*L;return u}function F(u,
E,L,ca){u[0]=E[0]+L[0]*ca;u[1]=E[1]+L[1]*ca;return u}function v(u,E){const L=E[0]-u[0];u=E[1]-u[1];return Math.sqrt(L*L+u*u)}function K(u,E){const L=E[0]-u[0];u=E[1]-u[1];return L*L+u*u}function r(u){const E=u[0];u=u[1];return Math.sqrt(E*E+u*u)}function B(u){const E=u[0];u=u[1];return E*E+u*u}function Q(u,E){u[0]=-E[0];u[1]=-E[1];return u}function O(u,E){u[0]=1/E[0];u[1]=1/E[1];return u}function Y(u,E){var L=E[0];const ca=E[1];L=L*L+ca*ca;0<L&&(L=1/Math.sqrt(L),u[0]=E[0]*L,u[1]=E[1]*L);return u}
function Z(u,E){return u[0]*E[0]+u[1]*E[1]}function da(u,E,L){E=E[0]*L[1]-E[1]*L[0];u[0]=u[1]=0;u[2]=E;return u}function ja(u,E,L,ca){const ha=E[0];E=E[1];u[0]=ha+ca*(L[0]-ha);u[1]=E+ca*(L[1]-E);return u}function oa(u,E){E=E||1;const L=2*q.RANDOM()*Math.PI;u[0]=Math.cos(L)*E;u[1]=Math.sin(L)*E;return u}function ka(u,E,L){const ca=E[0];E=E[1];u[0]=L[0]*ca+L[2]*E;u[1]=L[1]*ca+L[3]*E;return u}function pa(u,E,L){const ca=E[0];E=E[1];u[0]=L[0]*ca+L[2]*E+L[4];u[1]=L[1]*ca+L[3]*E+L[5];return u}function va(u,
E,L){const ca=E[0];E=E[1];u[0]=L[0]*ca+L[3]*E+L[6];u[1]=L[1]*ca+L[4]*E+L[7];return u}function ua(u,E,L){const ca=E[0];E=E[1];u[0]=L[0]*ca+L[4]*E+L[12];u[1]=L[1]*ca+L[5]*E+L[13];return u}function I(u,E,L,ca){const ha=E[0]-L[0];E=E[1]-L[1];const la=Math.sin(ca);ca=Math.cos(ca);u[0]=ha*ca-E*la+L[0];u[1]=ha*la+E*ca+L[1];return u}function N(u,E){var L=u[0];u=u[1];const ca=E[0];E=E[1];let ha=L*L+u*u;0<ha&&(ha=1/Math.sqrt(ha));let la=ca*ca+E*E;0<la&&(la=1/Math.sqrt(la));L=(L*ca+u*E)*ha*la;return 1<L?0:-1>
L?Math.PI:Math.acos(L)}function g(u){return"vec2("+u[0]+", "+u[1]+")"}function x(u,E){return u[0]===E[0]&&u[1]===E[1]}function H(u,E){const L=u[0];u=u[1];const ca=E[0];E=E[1];const ha=q.getEpsilon();return Math.abs(L-ca)<=ha*Math.max(1,Math.abs(L),Math.abs(ca))&&Math.abs(u-E)<=ha*Math.max(1,Math.abs(u),Math.abs(E))}function T(u,E,L,ca,ha){let la=E[0]-L[0];L=E[1]-L[1];ha=(ca[0]*la+ca[1]*L)*(ha-1);la=ca[0]*ha;L=ca[1]*ha;u[0]=E[0]+la;u[1]=E[1]+L;return u}const X=Object.freeze(Object.defineProperty({__proto__:null,
add:l,angle:N,ceil:A,copy:n,cross:da,dist:v,distance:v,div:t,divide:t,dot:Z,equals:H,exactEquals:x,floor:e,inverse:O,len:r,length:r,lerp:ja,max:m,min:k,mul:y,multiply:y,negate:Q,normalize:Y,projectAndScale:T,random:oa,rotate:I,round:C,scale:G,scaleAndAdd:F,set:d,sqrDist:K,sqrLen:B,squaredDistance:K,squaredLength:B,str:g,sub:z,subtract:z,transformMat2:ka,transformMat2d:pa,transformMat3:va,transformMat4:ua},Symbol.toStringTag,{value:"Module"}));c.add=l;c.angle=N;c.ceil=A;c.copy=n;c.cross=da;c.dist=
v;c.distance=v;c.div=t;c.divide=t;c.dot=Z;c.equals=H;c.exactEquals=x;c.floor=e;c.inverse=O;c.len=r;c.length=r;c.lerp=ja;c.max=m;c.min=k;c.mul=y;c.multiply=y;c.negate=Q;c.normalize=Y;c.projectAndScale=T;c.random=oa;c.rotate=I;c.round=C;c.scale=G;c.scaleAndAdd=F;c.set=d;c.sqrDist=K;c.sqrLen=B;c.squaredDistance=K;c.squaredLength=B;c.str=g;c.sub=z;c.subtract=z;c.transformMat2=ka;c.transformMat2d=pa;c.transformMat3=va;c.transformMat4=ua;c.vec2=X})},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports",
"../../../../chunks/vec3"],function(c,q){class n{constructor(d,l,z=0,y,t){this.TypedArrayConstructor=d;this.elementCount=3;d=this.TypedArrayConstructor;void 0===y&&(y=3*d.BYTES_PER_ELEMENT);const A=0===l.byteLength?0:z;this.typedBuffer=null==t?new d(l,A):new d(l,A,(t-z)/d.BYTES_PER_ELEMENT);this.typedBufferStride=y/d.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(d,l,
z=this.count-l){l=this.typedBuffer.byteOffset+l*this.stride;return new d(this.buffer,l,this.stride,l+z*this.stride)}getVec(d,l){d*=this.typedBufferStride;return q.set(l,this.typedBuffer[d],this.typedBuffer[d+1],this.typedBuffer[d+2])}setVec(d,l){d*=this.typedBufferStride;this.typedBuffer[d++]=l[0];this.typedBuffer[d++]=l[1];this.typedBuffer[d]=l[2]}get(d,l){return this.typedBuffer[d*this.typedBufferStride+l]}set(d,l,z){this.typedBuffer[d*this.typedBufferStride+l]=z}setValues(d,l,z,y){d*=this.typedBufferStride;
this.typedBuffer[d++]=l;this.typedBuffer[d++]=z;this.typedBuffer[d]=y}copyFrom(d,l,z){const y=this.typedBuffer,t=l.typedBuffer;d*=this.typedBufferStride;l=z*l.typedBufferStride;y[d++]=t[l++];y[d++]=t[l++];y[d]=t[l]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=3;c.BufferViewVec3Impl=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports","../../../../chunks/vec4"],function(c,q){class n{constructor(d,
l,z=0,y,t){this.TypedArrayConstructor=d;this.start=z;this.elementCount=4;d=this.TypedArrayConstructor;void 0===y&&(y=4*d.BYTES_PER_ELEMENT);const A=0===l.byteLength?0:z;this.typedBuffer=null==t?new d(l,A):new d(l,A,(t-z)/d.BYTES_PER_ELEMENT);this.typedBufferStride=y/d.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(d,l,z=this.count-l){l=this.typedBuffer.byteOffset+l*this.stride;
return new d(this.buffer,l,this.stride,l+z*this.stride)}getVec(d,l){d*=this.typedBufferStride;return q.set(l,this.typedBuffer[d++],this.typedBuffer[d++],this.typedBuffer[d++],this.typedBuffer[d])}setVec(d,l){d*=this.typedBufferStride;this.typedBuffer[d++]=l[0];this.typedBuffer[d++]=l[1];this.typedBuffer[d++]=l[2];this.typedBuffer[d]=l[3]}get(d,l){return this.typedBuffer[d*this.typedBufferStride+l]}set(d,l,z){this.typedBuffer[d*this.typedBufferStride+l]=z}setValues(d,l,z,y,t){d*=this.typedBufferStride;
this.typedBuffer[d++]=l;this.typedBuffer[d++]=z;this.typedBuffer[d++]=y;this.typedBuffer[d]=t}copyFrom(d,l,z){const y=this.typedBuffer,t=l.typedBuffer;d*=this.typedBufferStride;l=z*l.typedBufferStride;y[d++]=t[l++];y[d++]=t[l++];y[d++]=t[l++];y[d]=t[l]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=4;c.BufferViewVec4Impl=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/types":function(){define(["exports"],function(c){c.elementTypeSize=function(q){switch(q){case "u8":return 1;
case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};c.isInteger=function(q){switch(q){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1}};c.isSigned=function(q){switch(q){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};c.maximumValue=function(q){switch(q){case "u8":return 255;case "u16":return 65535;
case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],function(c){c.VertexAttribute=void 0;(function(q){q.POSITION="position";q.NORMAL="normal";q.NORMALCOMPRESSED="normalCompressed";q.UV0="uv0";q.AUXPOS1="auxpos1";q.AUXPOS2="auxpos2";q.COLOR="color";
q.SYMBOLCOLOR="symbolColor";q.SIZE="size";q.TANGENT="tangent";q.OFFSET="offset";q.PERSPECTIVEDIVIDE="perspectiveDivide";q.SUBDIVISIONFACTOR="subdivisionFactor";q.COLORFEATUREATTRIBUTE="colorFeatureAttribute";q.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";q.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";q.DISTANCETOSTART="distanceToStart";q.UVMAPSPACE="uvMapSpace";q.BOUNDINGRECT="boundingRect";q.UVREGION="uvRegion";q.PROFILERIGHT="profileRight";q.PROFILEUP="profileUp";q.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";
q.FEATUREVALUE="featureValue";q.INSTANCEMODELORIGINHI="instanceModelOriginHi";q.INSTANCEMODELORIGINLO="instanceModelOriginLo";q.INSTANCEMODEL="instanceModel";q.INSTANCEMODELNORMAL="instanceModelNormal";q.INSTANCECOLOR="instanceColor";q.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute";q.LOCALTRANSFORM="localTransform";q.GLOBALTRANSFORM="globalTransform";q.BOUNDINGSPHERE="boundingSphere";q.MODELORIGIN="modelOrigin";q.MODELSCALEFACTORS="modelScaleFactors";q.FEATUREATTRIBUTE="featureAttribute";q.STATE=
"state";q.LODLEVEL="lodLevel";q.POSITION0="position0";q.POSITION1="position1";q.NORMALA="normalA";q.NORMALB="normalB";q.COMPONENTINDEX="componentIndex";q.VARIANTOFFSET="variantOffset";q.VARIANTSTROKE="variantStroke";q.VARIANTEXTENSION="variantExtension";q.SIDENESS="sideness";q.START="start";q.END="end";q.UP="up";q.EXTRUDE="extrude";q.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor";q.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})(c.VertexAttribute||(c.VertexAttribute={}));c.affectsGeometry=
function(q){return q===c.VertexAttribute.POSITION};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout","../VertexAttribute"],function(c,q,n,d){const l=n.newLayout().vec3f(d.VertexAttribute.POSITION).u16(d.VertexAttribute.COMPONENTINDEX),z=n.newLayout().vec2u8(d.VertexAttribute.SIDENESS);q=q.glLayout(z);const y=n.newLayout().vec3f(d.VertexAttribute.POSITION0).vec3f(d.VertexAttribute.POSITION1).vec3f(d.VertexAttribute.NORMAL).u16(d.VertexAttribute.COMPONENTINDEX).u8(d.VertexAttribute.VARIANTOFFSET,
{glNormalized:!0}).u8(d.VertexAttribute.VARIANTSTROKE).u8(d.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0});n=n.newLayout().vec3f(d.VertexAttribute.POSITION0).vec3f(d.VertexAttribute.POSITION1).vec3f(d.VertexAttribute.NORMALA).vec3f(d.VertexAttribute.NORMALB).u16(d.VertexAttribute.COMPONENTINDEX).u8(d.VertexAttribute.VARIANTOFFSET,{glNormalized:!0}).u8(d.VertexAttribute.VARIANTSTROKE).u8(d.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0});d=new Map([[d.VertexAttribute.POSITION0,0],[d.VertexAttribute.POSITION1,
1],[d.VertexAttribute.COMPONENTINDEX,2],[d.VertexAttribute.VARIANTOFFSET,3],[d.VertexAttribute.VARIANTSTROKE,4],[d.VertexAttribute.VARIANTEXTENSION,5],[d.VertexAttribute.NORMAL,6],[d.VertexAttribute.NORMALA,6],[d.VertexAttribute.NORMALB,7],[d.VertexAttribute.SIDENESS,8]]);c.EdgeInputBufferLayout=l;c.EdgeShaderAttributeLocations=d;c.RegularEdgeInstancesLayout=y;c.SilhouetteEdgeInstancesLayout=n;c.VertexLayout=z;c.glVertexLayout=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/buffer/glUtil":function(){define(["exports",
"../../../webgl/enums","../../../webgl/VertexElementDescriptor"],function(c,q,n){const d={u8:q.DataType.UNSIGNED_BYTE,u16:q.DataType.UNSIGNED_SHORT,u32:q.DataType.UNSIGNED_INT,i8:q.DataType.BYTE,i16:q.DataType.SHORT,i32:q.DataType.INT,f32:q.DataType.FLOAT};c.glLayout=function(l,z=0){const y=l.stride;return Array.from(l.fields.keys()).map(t=>{const A=l.fields.get(t),e=A.constructor.ElementCount;var k=d[A.constructor.ElementType];if(!k)throw Error("BufferType not supported in WebGL");return new n.VertexElementDescriptor(t,
e,k,A.offset,y,!(!A.optional||!A.optional.glNormalized),z)})};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define("exports ../../../../../core/RandomLCG ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../support/buffer/glUtil ./bufferLayouts".split(" "),function(c,q,n,d,l,z){function y(r){const B=k;B[0]=r.position0[0];B[1]=r.position0[1];B[2]=r.position0[2];B[3]=r.position1[0];B[4]=r.position1[1];
B[5]=r.position1[2];C[0]=5381;for(r=0;r<m.length;r++)C[0]=31*C[0]+m[r];return C[0]}function t(r){const B=k;B[0]=A(r.position0[0]);B[1]=A(r.position0[1]);B[2]=A(r.position0[2]);B[3]=A(r.position1[0]);B[4]=A(r.position1[1]);B[5]=A(r.position1[2]);C[0]=5381;for(r=0;r<m.length;r++)C[0]=31*C[0]+m[r];return C[0]}function A(r){return Math.round(1E4*r)/1E4}class e{updateSettings(r){this.settings=r;this._edgeHashFunction=r.reducedPrecision?t:y}write(r,B,Q){var O=this._edgeHashFunction(Q);K.seed=O;O=K.getIntRange(0,
255);const Y=K.getIntRange(0,this.settings.variants-1);var Z=K.getFloat();Z=-(1-Math.min(Z/.7,1))+Math.max(0,Z-.7)/(1-.7);Z=255*(Math.abs(Z)**1.2*(0>Z?-1:1)*.5+.5);r.position0.setVec(B,Q.position0);r.position1.setVec(B,Q.position1);r.componentIndex.set(B,Q.componentIndex);r.variantOffset.set(B,O);r.variantStroke.set(B,Y);r.variantExtension.set(B,Z)}trim(r,B){return r.slice(0,B)}}const k=new Float32Array(6),m=new Uint32Array(k.buffer),C=new Uint32Array(1);class G{constructor(){this._commonWriter=new e}updateSettings(r){this._commonWriter.updateSettings(r)}allocate(r){return z.RegularEdgeInstancesLayout.createBuffer(r)}write(r,
B,Q){this._commonWriter.write(r,B,Q);n.add(v,Q.faceNormal0,Q.faceNormal1);n.normalize(v,v);r.normal.setVec(B,v)}trim(r,B){return this._commonWriter.trim(r,B)}}G.Layout=z.RegularEdgeInstancesLayout;G.glLayout=l.glLayout(z.RegularEdgeInstancesLayout,1);class F{constructor(){this._commonWriter=new e}updateSettings(r){this._commonWriter.updateSettings(r)}allocate(r){return z.SilhouetteEdgeInstancesLayout.createBuffer(r)}write(r,B,Q){this._commonWriter.write(r,B,Q);r.normalA.setVec(B,Q.faceNormal0);r.normalB.setVec(B,
Q.faceNormal1)}trim(r,B){return this._commonWriter.trim(r,B)}}F.Layout=z.SilhouetteEdgeInstancesLayout;F.glLayout=l.glLayout(z.SilhouetteEdgeInstancesLayout,1);const v=d.create(),K=new q;c.CommonBufferWriter=e;c.RegularEdgeBufferWriter=G;c.SilhouetteEdgeBufferWriter=F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define(["exports","../../../../../core/arrayUtils","../../../../../core/mathUtils","../../../../../chunks/vec3",
"../../../../../chunks/vec3f64"],function(c,q,n,d,l){function z(m,C){const G=n.acosClamped(m.cosAngle),F=A.fwd,v=A.ortho;d.direction(F,m.position1,m.position0);m=0<d.dot(d.cross(v,m.faceNormal0,m.faceNormal1),F)?-1:1;return G*m>C}function y(m){const C=m.faces.length/3,G=m.faces;m=m.neighbors;var F=0;for(var v=0;v<C;v++){var K=m[3*v+1],r=m[3*v+2],B=G[3*v],Q=G[3*v+1],O=G[3*v+2];F+=-1===m[3*v]||B<Q?1:0;F+=-1===K||Q<O?1:0;F+=-1===r||O<B?1:0}F=new Int32Array(4*F);v=0;for(K=0;K<C;K++){r=m[3*K];B=m[3*K+
1];Q=m[3*K+2];O=G[3*K];const Y=G[3*K+1],Z=G[3*K+2];if(-1===r||O<Y)F[v++]=O,F[v++]=Y,F[v++]=K,F[v++]=r;if(-1===B||Y<Z)F[v++]=Y,F[v++]=Z,F[v++]=K,F[v++]=B;if(-1===Q||Z<O)F[v++]=Z,F[v++]=O,F[v++]=K,F[v++]=Q}return F}function t(m){const C=m.faces.length/3,G=m.vertices.position;m=m.faces;const F=e.v0,v=e.v1,K=e.v2,r=new Float32Array(3*C);for(let B=0;B<C;B++){const Q=m[3*B+1],O=m[3*B+2];G.getVec(m[3*B],F);G.getVec(Q,v);G.getVec(O,K);d.subtract(v,v,F);d.subtract(K,K,F);d.cross(F,v,K);d.normalize(F,F);r[3*
B]=F[0];r[3*B+1]=F[1];r[3*B+2]=F[2]}return r}c.EdgeType=void 0;(function(m){m[m.SOLID=0]="SOLID";m[m.SKETCH=1]="SKETCH"})(c.EdgeType||(c.EdgeType={}));const A={edge:{position0:l.create(),position1:l.create(),faceNormal0:l.create(),faceNormal1:l.create(),componentIndex:0,cosAngle:0},ortho:l.create(),fwd:l.create()},e={v0:l.create(),v1:l.create(),v2:l.create()},k={anglePlanar:4,angleSignificantEdge:35};c.extractEdges=function(m,C,G,F=k){const v=m.vertices.position;var K=m.vertices.componentIndex,r=
n.deg2rad(F.anglePlanar);F=n.deg2rad(F.angleSignificantEdge);const B=Math.cos(F),Q=Math.cos(r),O=A.edge,Y=O.position0,Z=O.position1,da=O.faceNormal0,ja=O.faceNormal1,oa=t(m),ka=y(m),pa=ka.length/4;m=C.allocate(pa);F=0;const va=G.allocate(pa);let ua=0,I=0,N=0;const g=q.range(0,pa),x=new Float32Array(pa);x.forEach((u,E,L)=>{v.getVec(ka[4*E],Y);v.getVec(ka[4*E+1],Z);L[E]=d.distance(Y,Z)});g.sort((u,E)=>x[E]-x[u]);const H=[],T=[];for(let u=0;u<pa;u++){var X=g[u];const E=x[X],L=ka[4*X],ca=ka[4*X+1],ha=
ka[4*X+2];X=ka[4*X+3];const la=-1===X;v.getVec(L,Y);v.getVec(ca,Z);if(la)d.set(da,oa[3*ha],oa[3*ha+1],oa[3*ha+2]),d.copy(ja,da),O.componentIndex=K.get(L),O.cosAngle=d.dot(da,ja);else{d.set(da,oa[3*ha],oa[3*ha+1],oa[3*ha+2]);d.set(ja,oa[3*X],oa[3*X+1],oa[3*X+2]);O.componentIndex=K.get(L);O.cosAngle=d.dot(da,ja);if(O.cosAngle>Q)continue;-.9999>O.cosAngle&&d.copy(ja,da)}I+=E;N++;la||O.cosAngle<B?(C.write(m,F++,O),H.push(E)):z(O,r)&&(G.write(va,ua++,O),T.push(E))}K=new Float32Array(H.reverse());r=new Float32Array(T.reverse());
return{regular:{instancesData:C.trim(m,F),lodInfo:{lengths:K}},silhouette:{instancesData:G.trim(va,ua),lodInfo:{lengths:r}},averageEdgeLength:I/N}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils":function(){define(["exports","../../../../../chunks/vec3","../../../../../chunks/sphere"],function(c,q,n){c.boundsFromEdge=function(d,l,z){const y=n.create(),t=n.getCenter(y);q.scaleAndAdd(t,t,d,.5);
q.scaleAndAdd(t,t,l,.5);y[3]=q.distance(t,d);q.add(t,t,z);return y};c.maxCandidateCount=1E3;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../../chunks/tslib.es6 ../../../../../core/promiseUtils ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/Error ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/lineSegment ../../../../../chunks/sphere ../../../../3d/webgl-engine/lib/Octree ../../../../3d/webgl-engine/lib/edgeRendering/edgeProcessing ./sceneLayerSnappingUtils".split(" "),function(c,
q,n,d,l,z,y,t,A,e,k,m,C,G,F){n=class{constructor(){this._idToComponent=new Map;this._components=new C(r=>r.bounds);this._edges=new C(r=>r.bounds);this._tmpLineSegment=k.create();this._tmpP1=e.create();this._tmpP2=e.create();this._tmpP3=e.create();this.remoteClient=null}async fetchCandidates(r,B){await Promise.resolve();q.throwIfAborted(B);await this._ensureEdgeLocations(r,B);const Q=[];this._edges.forEachNeighbor(O=>{this._addCandidates(r,O,Q);return Q.length<F.maxCandidateCount},r.bounds);return{result:{candidates:Q}}}async _ensureEdgeLocations(r,
B){const Q=[];this._components.forEachNeighbor(O=>{if(null==O.info){const {id:Y,uid:Z}=O;Q.push({id:Y,uid:Z})}return!0},r.bounds);if(Q.length){r=await this.remoteClient.invoke("fetchAllEdgeLocations",{components:Q},B??{});for(const O of r.components)this._setFetchEdgeLocations(O)}}async add(r){r=new v(r.id,r.bounds);this._idToComponent.set(r.id,r);this._components.add([r]);return{result:{}}}async remove(r){const B=this._idToComponent.get(r.id);if(B){const Q=[];this._edges.forEachNeighbor(O=>{O.component===
B&&Q.push(O);return!0},B.bounds);this._edges.remove(Q);this._components.remove([B]);this._idToComponent.delete(B.id)}return{result:{}}}_setFetchEdgeLocations(r){const B=this._idToComponent.get(r.id);if(null!=B&&r.uid===B.uid){var Q=G.extractComponentsEdgeLocationsLayout.createView(r.locations),O=Array(Q.count),Y=e.create(),Z=e.create();for(let ka=0;ka<Q.count;ka++){Q.position0.getVec(ka,Y);Q.position1.getVec(ka,Z);var da=F.boundsFromEdge(Y,Z,r.origin);da=new K(B,ka,da);O[ka]=da}this._edges.add(O);
var {objectIds:ja,origin:oa}=r;B.info={locations:Q,objectIds:ja,origin:oa}}}_addCandidates(r,B,Q){var {info:O}=B.component;const {origin:Y,objectIds:Z}=O,da=O.locations;O=da.position0.getVec(B.index,this._tmpP1);const ja=da.position1.getVec(B.index,this._tmpP2);A.add(O,O,Y);A.add(ja,ja,Y);B=Z[da.componentIndex.get(B.index)];this._addEdgeCandidate(r,B,O,ja,Q);this._addVertexCandidate(r,B,O,Q);this._addVertexCandidate(r,B,ja,Q)}_addEdgeCandidate(r,B,Q,O,Y){if(r.returnEdge){var Z=m.getCenter(r.bounds),
da=k.fromPoints(Q,O,this._tmpLineSegment);da=k.projectPoint(da,Z,this._tmpP3);m.containsPoint(r.bounds,da)&&Y.push({type:"edge",objectId:B,target:e.clone(da),distance:A.distance(Z,da),start:e.clone(Q),end:e.clone(O)})}}_addVertexCandidate(r,B,Q,O){if(r.returnVertex){var Y=m.getCenter(r.bounds);m.containsPoint(r.bounds,Q)&&O.push({type:"vertex",objectId:B,target:e.clone(Q),distance:A.distance(Y,Q)})}}};n=c.__decorate([t.subclass("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],
n);class v{constructor(r,B){this.id=r;this.bounds=B;this.info=null;this.uid=++v.uid}}v.uid=0;class K{constructor(r,B,Q){this.component=r;this.index=B;this.bounds=Q}}return n});