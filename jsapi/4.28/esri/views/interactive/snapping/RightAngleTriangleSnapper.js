// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/vec2 ../../../chunks/vec2f64 ../../../chunks/vec3f64 ../../../support/elevationInfoUtils ../sketch/normalizedPoint ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),function(k,l,q,r,m,g,t,u,v,n,w){class x extends t.SnappingAlgorithm{snapNewVertex(f,a){var b=a.editGeometryOperations.data.components[0];const c=[];var e=b.vertices.length;if("polygon"!==a.editGeometryOperations.data.type||
2>e)return c;var {view:d}=this;e=b.vertices[e-1];b=g.fromAnyMapPoint(b.vertices[0].pos,d,a);d=g.fromAnyMapPoint(e.pos,d,a);this._processCandidateProposal(b,d,f,a,c);return c}snapExistingVertex(f,a){const b=[];var c=a.vertexHandle,e=c.component;if(2>e.edges.length||"polyline"===a.editGeometryOperations.data.type&&(0===c.index||c.index===e.vertices.length-1))return b;const {view:d}=this;e=g.fromAnyMapPoint(c.leftEdge.leftVertex.pos,d,a);c=g.fromAnyMapPoint(c.rightEdge.rightVertex.pos,d,a);this._processCandidateProposal(e,
c,f,a,b);return b}_processCandidateProposal(f,a,b,c,e){if(this.exceedsShortLineThreshold(f,a,c)){var d=l.lerp(y,f,a,.5),z=.5*l.distance(f,a),h=r.create();w.projectPointToCircle(h,b,d,z);h[2]=b[2];d=g.fromVec3(h);var {spatialReference:p,pointer:A}=c;b=n.vectorToScreenPoint(b,p,m.absoluteHeightElevationInfo,this.view);u.squaredScreenDistance(b,n.vectorToScreenPoint(d,p,m.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(A)&&!this.isVertical(f,d)&&!this.isVertical(d,a)&&e.push(new v.RightAngleTriangleSnappingCandidate({targetPoint:d,
point1:f,point2:a,isDraped:"on-the-ground"===c.elevationInfo?.mode}))}}}const y=q.create();k.RightAngleTriangleSnapper=x;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});