// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/has ../../core/Logger ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./engine/webgl/collisions/CollisionEngine".split(" "),function(a,c,h,p,k,q,l,d,r,t,m,n){a.LabelManager=class extends h{constructor(b){super(b);this.collisionEngine=new n.CollisionEngine;this.lastUpdateId=-1;this.updateRequested=
!1;this.view=null;this._applyVisibilityPass=l.throttle(f=>{const e=this.view;if(e)try{const g=e.featuresTilingScheme.getClosestInfoForScale(f.state.scale).level;this.collisionEngine.run(e.allLayerViews.items,f,g)}catch(g){}},32,this);this.addHandles(this._applyVisibilityPass)}get updating(){k("esri-2d-log-updating")&&console.log(`Updating LabelManager ${this.updateRequested}:\n-> updateRequested: ${this.updateRequested}`);return this.updateRequested}update(b){this._applyVisibilityPass(b)}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||
(this.updateRequested=!0,this.view?.requestUpdate())}processUpdate(b){this.updateRequested&&(this.updateRequested=!1,this.update(b))}};c.__decorate([d.property()],a.LabelManager.prototype,"updateRequested",void 0);c.__decorate([d.property()],a.LabelManager.prototype,"updating",null);c.__decorate([d.property()],a.LabelManager.prototype,"view",void 0);a.LabelManager=c.__decorate([m.subclass("esri.views.2d.LabelManager")],a.LabelManager);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});