// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/tslib.es6 ../../../../../geometry ../../../../../Graphic ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../SnappingVisualizer2D ./symbols ../../../../draw/DrawGraphicTool ../../../../draw/DrawOperation ../../../../draw/drawSurfaces ../../../../../geometry/Point ../../../../../geometry/Multipoint".split(" "),
function(d,e,x,g,c,h,n,k,y,z,A,q,r,l,p,t,u,v,w){function m(a,b){return(a.attributes?.displayOrder??-Infinity)-(b.attributes?.displayOrder??-Infinity)}d.DrawGraphicTool2D=class extends p.DrawGraphicTool{constructor(a){super(a);this._visualElementGraphics={outline:null,regularVertices:null,activeVertex:null};this.activeFillSymbol=null;this.type="draw-2d";this._visualElementSymbols={outline:a.activeLineSymbol??l.outline,regularVertices:a.regularVerticesSymbol??l.regularVertices,activeVertex:a.activeVertexSymbol??
l.activeVertex,fill:a.activeFillSymbol};a.activeVertexSymbol||this.addHandles(n.watch(()=>this.view?.effectiveTheme?.accentColor,b=>{b&&(b=this._visualElementSymbols.activeVertex.clone().set({color:b}),this._visualElementGraphics.activeVertex?.set("symbol",b),this._visualElementSymbols={...this._visualElementSymbols,activeVertex:b})},n.initial))}normalizeCtorArgs(a){a={...a};delete a.activeFillSymbol;delete a.activeVertexSymbol;delete a.regularVerticesSymbol;delete a.activeLineSymbol;return a}initializeGraphic(a){null!=
this._visualElementSymbols.fill&&(a.symbol=this._visualElementSymbols.fill);return c.makeHandle()}makeDrawOperation(){const {defaultZ:a,hasZ:b,view:f}=this;this._createOrUpdateGraphic(null);return new t.DrawOperation({view:f,manipulators:this.manipulators,geometryType:p.geometryTypeToDrawOperationGeometryType(this.geometryType),drawingMode:this.mode,hasZ:b,defaultZ:a,snapToSceneEnabled:this.snapToScene,drawSurface:new u.MapDrawSurface(f,b,a),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new r.SnappingVisualizer2D(this.internalGraphicsLayer),
tooltipOptions:this.tooltipOptions,graphic:this.graphic,cursor:this.cursor})}onActiveVertexChanged(a){if("point"===this.geometryType)return c.makeHandle();const [b,f]=a;a=new v({x:b,y:f,spatialReference:this.view.spatialReference});if(null!=this._visualElementGraphics.activeVertex)return this._visualElementGraphics.activeVertex.geometry=a,c.makeHandle();this._visualElementGraphics.activeVertex=new g({geometry:a,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}});this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex);
this.internalGraphicsLayer.graphics.sort(m);return c.makeHandle(()=>{null!=this._visualElementGraphics.activeVertex&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=h.destroyMaybe(this._visualElementGraphics.activeVertex))})}onOutlineChanged(a){a=a.clone();if("polyline"===a.type){const b=a.paths[a.paths.length-1];b.splice(0,b.length-2)}if(null!=this._visualElementGraphics.outline)return this._visualElementGraphics.outline.geometry=
a,c.makeHandle();this._visualElementGraphics.outline=new g({geometry:a,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}});this.internalGraphicsLayer.add(this._visualElementGraphics.outline);this.internalGraphicsLayer.graphics.sort(m);return c.makeHandle(()=>{null!=this._visualElementGraphics.outline&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.outline),this._visualElementGraphics.outline=h.destroyMaybe(this._visualElementGraphics.outline))})}onRegularVerticesChanged(a){a=
new w({points:a,spatialReference:this.view.spatialReference});if(null!=this._visualElementGraphics.regularVertices)return this._visualElementGraphics.regularVertices.geometry=a,c.makeHandle();this._visualElementGraphics.regularVertices=new g({geometry:a,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}});this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices);this.internalGraphicsLayer.graphics.sort(m);return c.makeHandle(()=>{null!=this._visualElementGraphics.regularVertices&&
(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=h.destroyMaybe(this._visualElementGraphics.regularVertices))})}};e.__decorate([k.property()],d.DrawGraphicTool2D.prototype,"activeFillSymbol",void 0);e.__decorate([k.property({readOnly:!0})],d.DrawGraphicTool2D.prototype,"type",void 0);e.__decorate([k.property({constructOnly:!0,nonNullable:!0})],d.DrawGraphicTool2D.prototype,"view",void 0);d.DrawGraphicTool2D=e.__decorate([q.subclass("esri.views.2d.interactive.draw.DrawGraphicTool2D")],
d.DrawGraphicTool2D);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});