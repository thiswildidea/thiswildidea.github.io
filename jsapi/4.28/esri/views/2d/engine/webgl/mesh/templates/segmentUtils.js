// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define(["exports","./util"],function(u,y){function F(a){return a.length-1}function G(a){let c=0;for(let b=0;b<F(a);b++)c+=K(a,b);return c}function K(a,c,b=1){const [d,e]=a[c+1];return Math.sqrt(d*d+e*e)*b}function H(a,c,b,d,e){if(!(b<c)){var m=d.clone().seek(b/2);null!=m&&(a(m.clone(),b,e),b=(b-c)/2,m=m.seek(c/2),H(a,c,b,d,e+1),H(a,c,b,m,e+1))}}class z{constructor(a,c,b,d,e){this._segments=a;this._index=c;this._distance=b;this._xStart=d;this._yStart=e;this._done=!1}static create(a){return new z(a,
0,0,a[0][0],a[0][1])}clone(){return new z(this._segments,this._index,this._distance,this.xStart,this.yStart)}equals(a){return this._index===a._index||a._index===this._index-1&&(0===this._distance||1===a._distance)||a._index===this._index+1&&(1===this._distance||0===a._distance)}leq(a){return this._index<a._index||this._index===a._index&&this._distance<=a._distance}geq(a){return this._index>a._index||this._index===a._index&&this._distance>=a._distance}get _segment(){return this._segments[this._index+
1]}get angle(){const a=this.dy;let c=Math.acos((0*a+-1*-this.dx)/(1*this.length));0<a&&(c=2*Math.PI-c);return c}get xStart(){return this._xStart}get yStart(){return this._yStart}get x(){return this.xStart+this.distance*this.dx}get y(){return this.yStart+this.distance*this.dy}get dx(){return this._segment[0]}get dy(){return this._segment[1]}get xMidpoint(){return this.xStart+.5*this.dx}get yMidpoint(){return this.yStart+.5*this.dy}get xEnd(){return this.xStart+this.dx}get yEnd(){return this.yStart+
this.dy}get length(){const {dx:a,dy:c}=this;return Math.sqrt(a*a+c*c)}get remainingLength(){return this.length*(1-this._distance)}get backwardLength(){return this.length*this._distance}get distance(){return this._distance}get done(){return this._done}hasPrev(){return 0<=this._index-1}hasNext(){return this._index+1<F(this._segments)}next(){if(!this.hasNext())return null;this._xStart+=this.dx;this._yStart+=this.dy;this._distance=0;this._index+=1;return this}prev(){if(!this.hasPrev())return this._done=
!0,null;--this._index;this._xStart-=this.dx;this._yStart-=this.dy;this._distance=1;return this}_seekBackwards(a,c){var b=this.backwardLength;if(a<=b)return this._distance=(b-a)/this.length,this;for(b=this.backwardLength;this.prev();){if(b+this.length>a)return this._seekBackwards(a-b);b+=this.length}this._distance=0;return c?this:null}seek(a,c=!1){if(0>a)return this._seekBackwards(Math.abs(a),c);if(a<=this.remainingLength)return this._distance=(this.backwardLength+a)/this.length,this;let b=this.remainingLength;
for(;this.next();){if(b+this.length>a)return this.seek(a-b,c);b+=this.length}this._distance=1;return c?this:null}}u.SegmentCursor=z;u.pathDivide=function(a,c,b,d=!0){const e=G(a);a=z.create(a);const m=e/2;if(d){d=Math.floor(Math.max((e-c)/2,0)/c);a.seek(m-d*c);for(let f=-d;f<=d;f++)512>a.x&&0<=a.x&&512>a.y&&0<=a.y&&b(a.clone(),f,m+f*c,e),a.seek(c)}else a.seek(m),b(a.clone(),0,m+0*c,e)};u.pathLength=G;u.pathSubdivide=function(a,c,b){H(b,c,G(a),z.create(a),0)};u.segmentAt=function(a,c){return a[c+1]};
u.segmentCount=F;u.segmentLength=K;u.smoothPaths=function(a,c){for(let D=0;D<a.length;D++){let w=a[D];a:{var b=w,d=c;if(0>=d)break a;const l=b.length;if(3>l)break a;const g=[];var e=0;g.push(0);for(var m=1;m<l;m++)e+=y.dist(b[m],b[m-1]),g.push(e);d=Math.min(d,.2*e);e=[];e.push(b[0][0]);e.push(b[0][1]);m=b[l-1][0];const I=b[l-1][1];var f=y.sub([0,0],b[0],b[1]);y.normalize(f);b[0][0]+=d*f[0];b[0][1]+=d*f[1];y.sub(f,b[l-1],b[l-2]);y.normalize(f);b[l-1][0]+=d*f[0];b[l-1][1]+=d*f[1];for(f=1;f<l;f++)g[f]+=
d;g[l-1]+=d;f=.5*d;for(let n=1;n<l-1;n++){let x=0,J=0,E=0;for(var h=n-1;0<=h&&!(g[h+1]<g[n]-f);h--){var q=f+g[h+1]-g[n],p=g[h+1]-g[h],k=g[n]-g[h]<f?1:q/p;if(1E-6>Math.abs(k))break;var t=k*k,A=k*q-.5*t*p,v=k*p/d,r=b[h+1],B=b[h][0]-r[0],C=b[h][1]-r[1];x+=v/A*(r[0]*k*q+.5*t*(q*B-p*r[0])-t*k*p*B/3);J+=v/A*(r[1]*k*q+.5*t*(q*C-p*r[1])-t*k*p*C/3);E+=v}for(h=n+1;h<l&&!(g[h-1]>g[n]+f);h++){q=f-g[h-1]+g[n];p=g[h]-g[h-1];k=g[h]-g[n]<f?1:q/p;if(1E-6>Math.abs(k))break;t=k*k;A=k*q-.5*t*p;v=k*p/d;r=b[h-1];B=b[h][0]-
r[0];C=b[h][1]-r[1];x+=v/A*(r[0]*k*q+.5*t*(q*B-p*r[0])-t*k*p*B/3);J+=v/A*(r[1]*k*q+.5*t*(q*C-p*r[1])-t*k*p*C/3);E+=v}e.push(x/E);e.push(J/E)}e.push(m);e.push(I);for(let n=0,x=0;n<l;n++)b[n][0]=e[x++],b[n][1]=e[x++]}b=[];b.push(w[0]);for(d=1;d<w.length;d++){const [l,g]=w[d-1],[I,n]=w[d];b.push([Math.round(I-l),Math.round(n-g)])}w=a[D]=b}return a};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});