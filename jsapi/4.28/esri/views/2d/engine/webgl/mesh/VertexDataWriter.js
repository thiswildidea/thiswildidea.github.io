// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define(["exports","../definitions","./heuristics","../util/Writer"],function(n,p,q,k){class r{constructor(a,d,c){this._start={index:0,vertex:0};c=q.getMeshSizeHint(a,d,c);d/=4;this.geometryType=a;this._records=new k(Int32Array,c.recordBytes);this._indices=new k(Uint32Array,c.indexBytes);this._vertices=new k(Uint32Array,c.vertexBytes);this._metrics=new k(Float32Array,0);this._strideInt=d}serialize(a){const d=this._records.buffer(),c=this._indices.buffer(),b=this._vertices.buffer(),e=this._metrics.length?
this._metrics.buffer():null,f=4*this._strideInt;a.push(d,c,b);return{stride:f,records:d,indices:c,vertices:b,metrics:e}}get strideInt(){return this._strideInt}get recordCount(){return this._records.length/p.displayRecordIntPerElement}get vertexCount(){return this._vertices.length/this._strideInt}get indexCount(){return this._indices.length}get indexWriter(){return this._indices}get vertexWriter(){return this._vertices}get metricWriter(){return this._metrics}vertexEnsureSize(a){this._vertices.ensureSize(a)}indexEnsureSize(a){this._indices.ensureSize(a)}recordStart(){this._start.index=
this._indices.length;this._start.vertex=this._vertices.length}recordEnd(a,d,c,b,e,f,l,m){this._records.push(a);this._records.push(d??0);this._records.push(c);this._records.push(b);this._records.push(e);this._records.push(f);this._records.push(l);this._records.writeF32(m)}writeIndex(a){this._indices.push(a)}writeVertex(a){this._vertices.push(a)}writeVertexF32(a){this._vertices.writeF32(a)}copyLastFrom(a,d,c){var b=a._records.length-p.displayRecordIntPerElement;const e=a._records.getValue(b),f=a._records.getValue(b+
1),l=a._records.getValue(b+2),m=a._records.getValue(b+4),t=a._records.getValue(b+6);b=a._records.getValue(b+7);const u=this._vertices.length;var g=(a._start.vertex-this._vertices.length)/this._strideInt;const v=this._indices.length,w=this.vertexCount;for(var h=a._start.index;h!==a._indices.length;h++){const x=a._indices.getValue(h);this._indices.push(x-g)}for(g=a._start.vertex;g!==a._vertices.length;g++)h=a._vertices.getValue(g),this._vertices.push(h);for(a=u;a<=this._vertices.length;a+=this._strideInt)this._vertices.i1616Add(a,
d,c);this._records.push(e);this._records.push(f);this._records.push(l);this._records.push(v);this._records.push(m);this._records.push(w);this._records.push(t);this._records.push(b)}}n.VertexDataWriter=r;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});