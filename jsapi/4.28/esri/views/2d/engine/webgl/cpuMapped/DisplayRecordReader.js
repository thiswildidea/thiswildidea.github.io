// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define(["exports","../definitions","../FeatureDisplayList"],function(f,g,h){class e{constructor(a){this._cursor=this._head=a}static from(a,b=0,d=a.byteLength/c.BYTES_PER_RECORD-b){a=new c(new Int32Array(a,b*c.BYTES_PER_RECORD,d*c.ELEMENTS_PER_RECORD));return new e(a)}size(){let a=this._cursor,b=0;for(;a;)b+=a.size(),a=a._link;return b}get id(){return this._cursor.id}set id(a){this._cursor.id=a}get materialKey(){return this._cursor.materialKey}set materialKey(a){this._cursor.materialKey=a}get insertAfter(){return this._cursor.insertAfter}get indexFrom(){return this._cursor.indexFrom}set indexFrom(a){this._cursor.indexFrom=
a}get indexCount(){return this._cursor.indexCount}set indexCount(a){this._cursor.indexCount=a}get vertexFrom(){return this._cursor.vertexFrom}set vertexFrom(a){this._cursor.vertexFrom=a}get vertexCount(){return this._cursor.vertexCount}set vertexCount(a){this._cursor.vertexCount=a}get sortKey(){return this._cursor.sortKey}set sortKey(a){this._cursor.sortKey=a}get index(){return this._cursor._indexStart+this._cursor._index}seekIndex(a){for(this._cursor=this._head;this._cursor;){const b=this._cursor.size();
if(a<b)return this._cursor._index=a,!0;a-=b;this._cursor=this._cursor._link}return!1}forEach(a){const b=this.getCursor();for(;b.next();)a(b)}link(a){if(this._head){for(var b=this._head;b._link;)b=b._link;b._link=a._head;b._link._indexStart=b._indexStart+b.size()}else this._head=a._head}getCursor(){return this.copy()}getDrawInfo(a,b){return new h.FeatureDisplayListInfo(a,b,this.materialKey,this.indexFrom,this.indexCount)}lookup(a){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(a);){if(!this._cursor._link)return!1;
this._cursor=this._cursor._link}return!!this._cursor}copy(){const a=new e(this._head?.copy());if(!a._head)return a;let b=a._head,d=a._head._link;for(;d;)b._link=d.copy(),b=d,d=b._link;return a}next(){if(!this._cursor)return!1;if(!this._cursor.next()){if(!this._cursor._link)return!1;this._cursor=this._cursor._link;return this.next()}return!0}peekId(){return this._cursor.peekId()??this._cursor._link.peekId()}delete(a){let b=this._head,d=null;for(;b;){if(b.delete(a))return b.isEmpty()&&(null!=d&&(d._link=
b._link),b===this._head&&(this._head=b._link),b===this._cursor&&(this._cursor=b._link)),!0;d=b;b=b._link}return!1}}e.ELEMENTS_PER_RECORD=g.displayRecordIntPerElement;e.BYTES_PER_RECORD=e.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;class c{constructor(a){this._link=null;this._index=-1;this._indexStart=0;this._packedRecordsF32=null;this._deletedCount=0;this._offsets={instance:null};this._packedRecords=a}static from(a,b=0,d=a.byteLength/this.BYTES_PER_RECORD-b){return new c(new Int32Array(a,b*this.BYTES_PER_RECORD,
d*this.ELEMENTS_PER_RECORD))}delete(a){const b=this._index,d=this.lookup(a);if(d)for(this.id=2147483647,++this._deletedCount;this.next()&&this.id===a;)this.id=2147483647,++this._deletedCount;this._index=b;return d}isEmpty(){return this._deletedCount===this.size()}link(a){this._link?this._link.link(a):this._link=a}lookup(a){if(null==this._offsets.instance){this._offsets.instance=new Map;var b=this.copy();b._index=-1;let d=0;for(;b.next();)b.id!==d&&(this._offsets.instance.set(b.id,b._index),d=b.id)}if(!this._offsets.instance.has(a))return!1;
b=this._index;this._index=this._offsets.instance.get(a);return 2147483647===this.id?(this._index=b,!1):!0}get id(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD]}set id(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD]=a}get materialKey(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+1]}set materialKey(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+1]=a}get insertAfter(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+2]}get indexFrom(){return this._packedRecords[this._index*
c.ELEMENTS_PER_RECORD+3]}set indexFrom(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+3]=a}get indexCount(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+4]}set indexCount(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+4]=a}get vertexFrom(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+5]}set vertexFrom(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+5]=a}get vertexCount(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+6]}set vertexCount(a){this._packedRecords[this._index*
c.ELEMENTS_PER_RECORD+6]=a}get sortKey(){this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer));return this._packedRecordsF32[this._index*c.ELEMENTS_PER_RECORD+7]}set sortKey(a){this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer));this._packedRecordsF32[this._index*c.ELEMENTS_PER_RECORD+7]=a}get index(){return this._index}size(){return this._packedRecords.length/c.ELEMENTS_PER_RECORD}next(){for(;++this._index<this.size()&&
2147483647===this.id;);return this._index<this.size()}peekId(){const a=(this._index+1)*c.ELEMENTS_PER_RECORD;return a>=this._packedRecords.length?0:this._packedRecords[a]}getCursor(){return this.copy()}copy(){const a=new c(this._packedRecords);a._indexStart=this._indexStart;a._link=this._link;a._index=this._index;a._offsets=this._offsets;a._deletedCount=this._deletedCount;return a}}c.ELEMENTS_PER_RECORD=g.displayRecordIntPerElement;c.BYTES_PER_RECORD=c.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;
f.DisplayRecordReader=e;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});