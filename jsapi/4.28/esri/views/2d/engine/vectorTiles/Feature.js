// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define(["../../../../geometry/support/TileClipper"],function(m){var h;(function(a){a[a.moveTo=1]="moveTo";a[a.lineTo=2]="lineTo";a[a.close=7]="close"})(h||(h={}));class n{constructor(a,c){this.values={};this._geometry=void 0;this._pbfGeometry=null;const e=c.keys;c=c.values;for(a=a.asUnsafe();a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:const b=a.getMessage().asUnsafe(),k=this.values;for(;!b.empty();){const f=b.getUInt32(),d=b.getUInt32();k[e[f]]=c[d]}b.release();break;case 3:this.type=
a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}getGeometry(a){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const c=this._pbfGeometry.asUnsafe();this._pbfGeometry=null;let e,b;a?a.reset(this.type):e=[];let k=h.moveTo;var f=0;let d=0,g=0;for(;!c.empty();)switch(0===f&&(f=c.getUInt32(),k=f&7,f>>=3),f--,k){case h.moveTo:d+=c.getSInt32();g+=c.getSInt32();a?a.moveTo(d,g):e&&(b&&e.push(b),b=[],b.push(new m.Point(d,g)));break;case h.lineTo:d+=
c.getSInt32();g+=c.getSInt32();a?a.lineTo(d,g):b&&b.push(new m.Point(d,g));break;case h.close:a?a.close():b&&!b[0].equals(d,g)&&b.push(b[0].clone());break;default:throw c.release(),Error("Invalid path operation");}let l;a?l=a.result():e&&(b&&e.push(b),l=e);c.release();return this._geometry=l}}return n});