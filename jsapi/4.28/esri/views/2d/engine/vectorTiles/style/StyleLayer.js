// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),function(f,k,p,q,g,r,l,v,e,t,w){f.CapType=void 0;(function(a){a[a.BUTT=0]="BUTT";a[a.ROUND=1]="ROUND";a[a.SQUARE=2]="SQUARE";a[a.UNKNOWN=4]="UNKNOWN"})(f.CapType||(f.CapType={}));class m{constructor(a,b,c,d){this.type=a;this.typeName=b.type;this.id=b.id;
this.source=b.source;this.sourceLayer=b["source-layer"];this.minzoom=b.minzoom;this.maxzoom=b.maxzoom;this.filter=b.filter;this.layout=b.layout;this.paint=b.paint;this.z=c;this.uid=d;switch(a){case e.StyleLayerType.BACKGROUND:this._layoutDefinition=e.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=e.StyleDefinition.backgroundPaintDefinition;break;case e.StyleLayerType.FILL:this._layoutDefinition=e.StyleDefinition.fillLayoutDefinition;this._paintDefinition=e.StyleDefinition.fillPaintDefinition;
break;case e.StyleLayerType.LINE:this._layoutDefinition=e.StyleDefinition.lineLayoutDefinition;this._paintDefinition=e.StyleDefinition.linePaintDefinition;break;case e.StyleLayerType.SYMBOL:this._layoutDefinition=e.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=e.StyleDefinition.symbolPaintDefinition;break;case e.StyleLayerType.CIRCLE:this._layoutDefinition=e.StyleDefinition.circleLayoutDefinition,this._paintDefinition=e.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=v.createFilter(this.filter)}getLayoutProperty(a){return this._layoutProperties[a]}getPaintProperty(a){return this._paintProperties[a]}getLayoutValue(a,b,c){let d;const h=this._layoutProperties[a];h&&(d=h.getValue(b,c));void 0===d&&(d=this._layoutDefinition[a]["default"]);return d}getPaintValue(a,b,c){let d;const h=this._paintProperties[a];h&&(d=h.getValue(b,
c));void 0===d&&(d=this._paintDefinition[a]["default"]);return d}isPainterDataDriven(){const a=this._paintProperties;if(a)for(const b in a)if(a[b].isDataDriven)return!0;return!1}_parseLayout(a){const b={};for(const c in a){const d=this._layoutDefinition[c];d&&(b[c]=new t(d,a[c]))}return b}_parsePaint(a){const b={};for(const c in a){const d=this._paintDefinition[c];d&&(b[c]=new t(d,a[c]))}return b}computeAttributesKey(a,b,c,d){let h=0,u=0;for(const n of b){b=3;if(!n||n!==d){const {isLayout:x,isOptional:y}=
c[n];b=x?this.getLayoutProperty(n):this.getPaintProperty(n);b=b?.interpolator?2:b?.isDataDriven?1:y&&!b?3:0}u|=b<<h;h+=2}return u<<3|a}}class z extends m{constructor(a,b,c,d){super(a,b,c,d);this.backgroundMaterial=new p.VTLBackgroundMaterial(this.computeAttributesKey(k.ShaderProgramType.BACKGROUND,p.VTLBackgroundMaterial.ATTRIBUTES,p.VTLBackgroundMaterial.ATTRIBUTES_INFO))}}class A extends m{constructor(a,b,c,d){super(a,b,c,d);a=this.getPaintProperty("fill-color");b=this.getPaintProperty("fill-opacity");
c=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=a?.isDataDriven;this.hasDataDrivenOpacity=b?.isDataDriven;this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||c?.isDataDriven;b=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!b;this.hasDataDrivenOutlineColor=b?.isDataDriven;this.hasDataDrivenOutline=b?b.isDataDriven:a?a.isDataDriven:!1;this.hasDataDrivenOutline=(b?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity;
this.fillMaterial=new g.VTLFillMaterial(this.computeAttributesKey(k.ShaderProgramType.FILL,g.VTLFillMaterial.ATTRIBUTES,g.VTLFillMaterial.ATTRIBUTES_INFO));this.outlineMaterial=new g.VTLOutlineMaterial(this.computeAttributesKey(k.ShaderProgramType.OUTLINE,this.outlineUsesFillColor?g.VTLOutlineMaterial.ATTRIBUTES_FILL:g.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?g.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:g.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}}
class B extends m{constructor(a,b,c,d){super(a,b,c,d);a=this.getPaintProperty("line-pattern");this.lineMaterial=new r.VTLLineMaterial(this.computeAttributesKey(k.ShaderProgramType.LINE,r.VTLLineMaterial.ATTRIBUTES,r.VTLLineMaterial.ATTRIBUTES_INFO,a?"line-dasharray":""));this.hasDataDrivenLine=this.getPaintProperty("line-blur")?.isDataDriven||this.getPaintProperty("line-color")?.isDataDriven||this.getPaintProperty("line-gap-width")?.isDataDriven||this.getPaintProperty("line-offset")?.isDataDriven||
this.getPaintProperty("line-opacity")?.isDataDriven||this.getPaintProperty("line-pattern")?.isDataDriven||this.getPaintProperty("line-dasharray")?.isDataDriven||this.getLayoutProperty("line-cap")?.isDataDriven||this.getPaintProperty("line-width")?.isDataDriven;this.canUseThinTessellation=!1;!this.hasDataDrivenLine&&(a=this.getPaintProperty("line-width"),!a||"number"===typeof a&&.5*a<w.thinLineHalfWidthThreshold)&&(a=this.getPaintProperty("line-offset"),!a||"number"===typeof a&&0===a)&&(this.canUseThinTessellation=
!0)}getDashKey(a,b){switch(b){case f.CapType.BUTT:b="Butt";break;case f.CapType.ROUND:b="Round";break;case f.CapType.SQUARE:b="Square";break;default:b="Butt"}return`dasharray-[${a.toString()}]-${b}`}}class C extends m{constructor(a,b,c,d){super(a,b,c,d);this.iconMaterial=new l.VTLIconMaterial(this.computeAttributesKey(k.ShaderProgramType.ICON,l.VTLIconMaterial.ATTRIBUTES,l.VTLIconMaterial.ATTRIBUTES_INFO));this.textMaterial=new l.VTLTextMaterial(this.computeAttributesKey(k.ShaderProgramType.TEXT,
l.VTLTextMaterial.ATTRIBUTES,l.VTLTextMaterial.ATTRIBUTES_INFO));this.hasDataDrivenIcon=this.getPaintProperty("icon-color")?.isDataDriven||this.getPaintProperty("icon-halo-blur")?.isDataDriven||this.getPaintProperty("icon-halo-color")?.isDataDriven||this.getPaintProperty("icon-halo-width")?.isDataDriven||this.getPaintProperty("icon-opacity")?.isDataDriven||this.getLayoutProperty("icon-size")?.isDataDriven;this.hasDataDrivenText=this.getPaintProperty("text-color")?.isDataDriven||this.getPaintProperty("text-halo-blur")?.isDataDriven||
this.getPaintProperty("text-halo-color")?.isDataDriven||this.getPaintProperty("text-halo-width")?.isDataDriven||this.getPaintProperty("text-opacity")?.isDataDriven||this.getLayoutProperty("text-size")?.isDataDriven}}class D extends m{constructor(a,b,c,d){super(a,b,c,d);this.circleMaterial=new q.VTLCircleMaterial(this.computeAttributesKey(k.ShaderProgramType.CIRCLE,q.VTLCircleMaterial.ATTRIBUTES,q.VTLCircleMaterial.ATTRIBUTES_INFO))}}class E{constructor(a,b,c){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",
b);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b);this.keepUpright=a.getLayoutValue("icon-keep-upright",b);this.optional=a.getLayoutValue("icon-optional",b);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b);this.rotationAlignment===e.RotationAlignment.AUTO&&(this.rotationAlignment=c?e.RotationAlignment.MAP:e.RotationAlignment.VIEWPORT);c=a.getLayoutProperty("icon-anchor");c?.isDataDriven?this._anchorProp=c:this.anchor=a.getLayoutValue("icon-anchor",b);c=a.getLayoutProperty("icon-offset");
c?.isDataDriven?this._offsetProp=c:this.offset=a.getLayoutValue("icon-offset",b);c=a.getLayoutProperty("icon-padding");c?.isDataDriven?this._paddingProp=c:this.padding=a.getLayoutValue("icon-padding",b);c=a.getLayoutProperty("icon-rotate");c?.isDataDriven?this._rotateProp=c:this.rotate=a.getLayoutValue("icon-rotate",b);c=a.getLayoutProperty("icon-size");c?.isDataDriven?this._sizeProp=c:this.size=a.getLayoutValue("icon-size",b)}update(a,b){this._anchorProp&&(this.anchor=this._anchorProp.getValue(a,
b));this._offsetProp&&(this.offset=this._offsetProp.getValue(a,b));this._paddingProp&&(this.padding=this._paddingProp.getValue(a,b));this._rotateProp&&(this.rotate=this._rotateProp.getValue(a,b));this._sizeProp&&(this.size=this._sizeProp.getValue(a,b))}}class F{constructor(a,b,c){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b);this.keepUpright=a.getLayoutValue("text-keep-upright",b);this.optional=a.getLayoutValue("text-optional",
b);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b);this.rotationAlignment===e.RotationAlignment.AUTO&&(this.rotationAlignment=c?e.RotationAlignment.MAP:e.RotationAlignment.VIEWPORT);c=a.getLayoutProperty("text-anchor");c?.isDataDriven?this._anchorProp=c:this.anchor=a.getLayoutValue("text-anchor",b);c=a.getLayoutProperty("text-justify");c?.isDataDriven?this._justifyProp=c:this.justify=a.getLayoutValue("text-justify",b);c=a.getLayoutProperty("text-letter-spacing");c?.isDataDriven?
this._letterSpacingProp=c:this.letterSpacing=a.getLayoutValue("text-letter-spacing",b);c=a.getLayoutProperty("text-line-height");c?.isDataDriven?this._lineHeightProp=c:this.lineHeight=a.getLayoutValue("text-line-height",b);c=a.getLayoutProperty("text-max-angle");c?.isDataDriven?this._maxAngleProp=c:this.maxAngle=a.getLayoutValue("text-max-angle",b);c=a.getLayoutProperty("text-max-width");c?.isDataDriven?this._maxWidthProp=c:this.maxWidth=a.getLayoutValue("text-max-width",b);c=a.getLayoutProperty("text-offset");
c?.isDataDriven?this._offsetProp=c:this.offset=a.getLayoutValue("text-offset",b);c=a.getLayoutProperty("text-padding");c?.isDataDriven?this._paddingProp=c:this.padding=a.getLayoutValue("text-padding",b);c=a.getLayoutProperty("text-rotate");c?.isDataDriven?this._rotateProp=c:this.rotate=a.getLayoutValue("text-rotate",b);c=a.getLayoutProperty("text-size");c?.isDataDriven?this._sizeProp=c:this.size=a.getLayoutValue("text-size",b);c=a.getLayoutProperty("text-writing-mode");c?.isDataDriven?this._writingModeProp=
c:this.writingMode=a.getLayoutValue("text-writing-mode",b)}update(a,b){this._anchorProp&&(this.anchor=this._anchorProp.getValue(a,b));this._justifyProp&&(this.justify=this._justifyProp.getValue(a,b));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(a,b));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(a,b));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(a,b));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(a,b));this._offsetProp&&
(this.offset=this._offsetProp.getValue(a,b));this._paddingProp&&(this.padding=this._paddingProp.getValue(a,b));this._rotateProp&&(this.rotate=this._rotateProp.getValue(a,b));this._sizeProp&&(this.size=this._sizeProp.getValue(a,b));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(a,b))}}f.BackgroundStyleLayer=z;f.CircleStyleLayer=D;f.FillStyleLayer=A;f.IconLayout=E;f.LineStyleLayer=B;f.StyleLayer=m;f.SymbolStyleLayer=C;f.TextLayout=F;Object.defineProperty(f,Symbol.toStringTag,
{value:"Module"})});