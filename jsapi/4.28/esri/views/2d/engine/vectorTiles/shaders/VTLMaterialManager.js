// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define(["../enums","./Programs"],function(b,d){class h{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach(c=>c.dispose());this._programByKey.clear()}getMaterialProgram(c,a,e){const g=a.key<<3|this._getMaterialOptionsValue(a.type,e);if(this._programByKey.has(g))return this._programByKey.get(g);var f=this._getProgramTemplate(a.type);({shaders:f}=f);const {vertexShader:k,fragmentShader:l}=f(e);e=a.getShaderHeader();f=a.getShaderMain();e=k.replace("#pragma header",e).replace("#pragma main",
f);c=c.programCache.acquire(e,l,a.getAttributeLocations());this._programByKey.set(g,c);return c}_getMaterialOptionsValue(c,a){switch(c){case b.ShaderProgramType.BACKGROUND:return(a.pattern?1:0)<<1|(a.id?1:0);case b.ShaderProgramType.FILL:return(a.pattern?1:0)<<1|(a.id?1:0);case b.ShaderProgramType.OUTLINE:return a.id?1:0;case b.ShaderProgramType.LINE:return(a.sdf?1:0)<<2|(a.pattern?1:0)<<1|(a.id?1:0);case b.ShaderProgramType.ICON:return(a.sdf?1:0)<<1|(a.id?1:0);case b.ShaderProgramType.CIRCLE:return a.id?
1:0;case b.ShaderProgramType.TEXT:return a.id?1:0;default:return 0}}_getProgramTemplate(c){switch(c){case b.ShaderProgramType.BACKGROUND:return d.background;case b.ShaderProgramType.CIRCLE:return d.circle;case b.ShaderProgramType.FILL:return d.fill;case b.ShaderProgramType.ICON:return d.icon;case b.ShaderProgramType.LINE:return d.line;case b.ShaderProgramType.OUTLINE:return d.outline;case b.ShaderProgramType.TEXT:return d.text;default:return null}}}return h});