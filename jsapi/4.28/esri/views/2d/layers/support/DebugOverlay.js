// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f32 ../../../webgl/BufferObject ../../../webgl/FramebufferObject ../../../../core/arrayUtils ../../../../core/has ../../../webgl/checkWebGLError ../../../webgl/contextUtils ../../../webgl/enums ../../../../chunks/builtins ../../../webgl/GLObjectType ../../../webgl/Texture ../../../webgl/VertexArrayObject ../../engine/DisplayObject ../../../webgl/VertexElementDescriptor".split(" "),function(h,d,k,f,u,v,w,x,y,c,z,A,B,l,m,
n){const p={geometry:[new n.VertexElementDescriptor("a_PositionAndFlags",3,c.DataType.SHORT,0,6)]},e=new Map;e.set("a_PositionAndFlags",0);const q={vsPath:"debug/overlay",fsPath:"debug/overlay",attributes:e};class r extends m.DisplayObject{constructor(a){super();this._conf=a}static makeFlags(a,b){return a|b<<2}_createTransforms(){return{dvs:k.create()}}doRender(a){this._updateTransforms(a);this._ensureResources(a);const {context:b}=a;b.useProgram(this._program);this._program.setUniformMatrix3fv("u_dvsMat3",
this.transforms.dvs);this._program.setUniform4fv("u_colors",this._conf.getColors(a));this._program.setUniform1fv("u_opacities",this._conf.getOpacities(a));const {vertexData:t,indexData:g}=this._conf.getMesh(a);this._vertexBuffer.setData(t);this._indexBuffer.setData(g);b.bindVAO(this._vertexArray);b.setBlendingEnabled(!0);b.setBlendFunction(c.BlendFactor.ONE,c.BlendFactor.ONE_MINUS_SRC_ALPHA);b.setDepthTestEnabled(!1);b.setStencilTestEnabled(!1);b.setColorMask(!0,!0,!0,!0);b.drawElements(c.PrimitiveType.TRIANGLES,
g.length,c.DataType.UNSIGNED_INT,0)}onDetach(){this._vertexArray=h.disposeMaybe(this._vertexArray)}_updateTransforms(a){d.identity(this.transforms.dvs);d.translate(this.transforms.dvs,this.transforms.dvs,[-1,1]);d.scale(this.transforms.dvs,this.transforms.dvs,[2/a.state.size[0],-2/a.state.size[1],1])}_ensureResources(a){const {context:b}=a;this._program||(this._program=a.painter.materialManager.getProgram(q));this._vertexBuffer||(this._vertexBuffer=f.BufferObject.createVertex(b,c.Usage.STREAM_DRAW));
this._indexBuffer||(this._indexBuffer=f.BufferObject.createIndex(b,c.Usage.STREAM_DRAW));this._vertexArray||(this._vertexArray=new l.VertexArrayObject(b,e,p,{geometry:this._vertexBuffer},this._indexBuffer))}}return r});