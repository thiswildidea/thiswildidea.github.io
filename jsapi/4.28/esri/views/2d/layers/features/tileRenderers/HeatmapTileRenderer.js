// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/tslib.es6 ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/Error ../../../../../core/accessorSupport/decorators/subclass ../../../../../renderers/support/heatmapUtils ../../../engine/BitmapTileContainer ./BaseTileRenderer ./support/HeatmapSource".split(" "),function(d,h,q,r,t,u,v,k,l,m,n,p){d.HeatmapTileRenderer=class extends n{constructor(a){super(a);this._intensityInfo=
{minDensity:0,maxDensity:0};this.type="heatmap";this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}};this._container=new m.BitmapTileContainer(a.tileInfoView)}createTile(a){const b=this._container.createTile(a);this.tileInfoView.getTileCoords(b.bitmap,a);b.bitmap.resolution=this.tileInfoView.getTileResolution(a);return b}onConfigUpdate(){const a=this.layer.renderer;if("heatmap"===a.type){const {minDensity:b,maxDensity:e,colorStops:g}=a;this._intensityInfo.minDensity=
b;this._intensityInfo.maxDensity=e;this._gradient=l.generateGradient(g);this.tiles.forEach(c=>{const f=c.bitmap.source;f&&(f.minDensity=b,f.maxDensity=e,f.gradient=this._gradient,c.bitmap.invalidateTexture(),c.bitmap.requestRender())})}}hitTest(){return Promise.resolve([])}install(a){a.addChild(this._container)}uninstall(a){this._container.removeAllChildren();a.removeChild(this._container)}disposeTile(a){this._container.removeChild(a);a.destroy()}supportsRenderer(a){return a&&"heatmap"===a.type}onTileData(a){const b=
this.tiles.get(a.tileKey);if(b){a=a.intensityInfo;var {minDensity:e,maxDensity:g}=this._intensityInfo,c=b.bitmap.source||new p.HeatmapSource;c.intensities=a?.matrix||null;c.minDensity=e;c.maxDensity=g;c.gradient=this._gradient;b.bitmap.source=c;this._container.addChild(b);this._container.requestRender();this.requestUpdate()}}onTileError(a){console.error(a)}lockGPUUploads(){}unlockGPUUploads(){}fetchResource(a,b){console.error(a);return Promise.reject()}};d.HeatmapTileRenderer=h.__decorate([k.subclass("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],
d.HeatmapTileRenderer);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});