// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../chunks/tslib.es6 ./Accessor ./Logger ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleTrackingTarget".split(" "),function(f,g,n,p,q,k,l,r){function t(b,a){const c=()=>{if(!d||h)return a();d.clear();h=!0;const u=q.runTracked(d,a);h=!1;return u};let d=new r.SimpleTrackingTarget(()=>{d&&!h&&b(c)}),h=!1;b(c);return{remove:()=>{d&&(d.destroy(),d=null)}}}const m=b=>{b=class extends b{constructor(){super(...arguments);
this._numUpdating=0;this._asyncUpdateState=new Map}get updating(){return 0<this._numUpdating}autoUpdateAsync(a,c){return t(d=>this._updateAsync(a,d),c)}async _updateAsync(a,c){if(!this._startAsyncUpdate(a)){try{const d=await c();this._set(a,d)}catch(d){p.getLogger(this).warn(`Async update of "${String(a)}" failed. Async update functions should not throw exceptions.`)}this._endAsyncUpdate(a)&&this._updateAsync(a,c)}}_startAsyncUpdate(a){const c=this._asyncUpdateState.get(a)??e.None;if(c&e.Updating)return this._asyncUpdateState.set(a,
c|e.Invalidated),!0;++this._numUpdating;this._asyncUpdateState.set(a,c|e.Updating);return!1}_endAsyncUpdate(a){--this._numUpdating;const c=(this._asyncUpdateState.get(a)??e.None)&~e.Updating;if(c&e.Invalidated)return this._asyncUpdateState.set(a,c&~e.Invalidated),!0;this._asyncUpdateState.set(a,c);return!1}};g.__decorate([k.property({readOnly:!0})],b.prototype,"updating",null);g.__decorate([k.property()],b.prototype,"_numUpdating",void 0);return b=g.__decorate([l.subclass("esri.core.AsyncUpdate")],
b)};var e;(function(b){b[b.None=0]="None";b[b.Updating=1]="Updating";b[b.Invalidated=2]="Invalidated"})(e||(e={}));f.AsyncUpdate=class extends m(n){};f.AsyncUpdate=g.__decorate([l.subclass("esri.core.AsyncUpdate")],f.AsyncUpdate);f.AsyncUpdateMixin=m;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});