// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../../intl ../../core/has ../../core/Error ../../core/mathUtils ../../intl/date ../../time/timeZoneUtils ./dataUtils ../../chunks/datetime ../../intl/locale".split(" "),function(d,H,I,O,P,l,J,r,g,Q){function n(a){return{locale:Q.getLocale(),numberingSystem:"latn",zone:a??R}}function z(a,b){return null===a?null:g.DateTime.fromMillis(a,n(b))}function K(a){if(null==a||!r.isString(a)||""===a)return A;a=g.DateTime.fromISO(a,{setZone:!0});return{date:a.toFormat("yyyy-MM-dd",n()),time:a.toFormat(d.TimeStampOffsetPattern.HMS_MS,
n()),timeZoneOffset:a.offset.toString()}}function w(a,b){if(!a||null==a.value||Array.isArray(a.value))return null;let c=null;c="valueAsDate"in a?g.DateTime.fromFormat(a.value,"yyyy-MM-dd",n(b)):t(a.value);return c?.isValid?c:null}function L(a){const {max:b,min:c,value:e}=a;return isNaN(e)||null!=b&&e>b||null!=c&&e<c?!1:!0}function B(a){const {max:b,min:c,value:e}=a;return null!=b&&null!=c?P.clamp(e,c,b):null!=b&&e>b?b:null!=c&&e<c?c:e}function M(a){if(!a)return"";var b=a.split(".").at(0);if(!b||1>
b.length)throw new O("invalid time-only field",`Cannot parse valid time-only field value from ${a}`);a=b.split(":");b=Array(3);for(let c=0;3>c;c++){const e=a.at(c)??"";b[c]=e.padStart(2,"0")}return b.join(":")}function x(a){return g.DateTime.fromFormat(a,"yyyy-MM-dd")}function t(a){let b=null;N.find(c=>{b=g.DateTime.fromFormat(a,c);return b.isValid});return b}function y(a){return g.DateTime.fromISO(a)}const R=J.utc,A={date:null,time:null,timeZoneOffset:null};H=new Map([["hours",3600],["minutes",60],
["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]);d.TimeStampOffsetPattern=void 0;(function(a){a.HM="HH:mm";a.HMS="HH:mm:ss";a.HMS_MS="HH:mm:ss.SSS"})(d.TimeStampOffsetPattern||(d.TimeStampOffsetPattern={}));const N=[d.TimeStampOffsetPattern.HMS_MS,d.TimeStampOffsetPattern.HMS,d.TimeStampOffsetPattern.HM,"TT"];I=new Set(["date-only","time-only","timestamp-offset"]);d.arcadeDateToFieldValue=function(a,b){switch(b){case "date":return a.getTime();case "date-only":return a.toISODate();
case "time-only":return M(a.toISOTime(!0,!1));case "timestamp-offset":return a.toISOString(!1);default:return null}};d.clampValueToRange=B;d.createDateTimeFromFieldValue=z;d.dateFieldsWithStringFieldValue=I;d.dateOnlyToDateTime=x;d.dateTimeIsInRange=function(a){const {type:b,range:c,value:e}=a;if(null==e||!c)return!0;if("date"===b)return L({value:e,min:c.min,max:c.max});const {rawMax:h,rawMin:m}=c;if(!r.isString(h)||!r.isString(m)||!r.isString(e))return!0;let k=a=null,f=null;switch(b){case "date-only":a=
x(h);k=x(m);f=x(e);break;case "time-only":a=t(h);k=t(m);f=t(e);break;case "timestamp-offset":a=y(h),k=y(m),f=y(e)}return a?.isValid&&k?.isValid&&f?.isValid?g.Interval.fromDateTimes(k,a).contains(f)||k.valueOf()===f.valueOf()||a.valueOf()===f.valueOf():!0};d.dateTimeToFieldValue=function(a){return a?.isValid?a.toMillis():null};d.defaultDatePattern="yyyy-MM-dd";d.defaultTimePattern="TT";d.getDefaultLocaleOptions=n;d.getISOFieldValueFromDateComponents=function(a){const {dateComponent:b,timeComponent:c,
timeZoneComponent:e,oldValue:h}=a;if(!b?.value||!c?.value)return null;const {year:m,month:k,day:f}=g.DateTime.fromFormat(b.value,"yyyy-MM-dd"),{hour:p,minute:q,second:u,millisecond:v}=w(c,J.utc)??g.DateTime.now();a=K(h);a=null!=e?.value?parseInt(e.value,10):null!=a.timeZoneOffset?parseInt(a.timeZoneOffset,10):(new Date).getTimezoneOffset();a=g.FixedOffsetZone.instance(a);a=g.DateTime.fromObject({year:m,month:k,day:f,hour:p,minute:q,second:u,millisecond:v},{zone:a});return a.isValid?a.toISO({includeOffset:!0}):
null};d.getIntlOptionsForField=function(a){switch(a.type){case "date":return l.convertDateFormatToIntlOptions("short-date-short-time");case "date-only":return l.convertDateFormatToIntlOptions("short-date");case "time-only":return l.convertDateFormatToIntlOptions("short-time");case "timestamp-offset":return{...l.convertDateFormatToIntlOptions("short-date-short-time"),timeZone:void 0,timeZoneName:"short"};default:return l.convertDateFormatToIntlOptions("short-date-short-time")}};d.getLabelForDateFieldValue=
function(a,b,c){if(!a||null==b)return null;switch(a.type){case "date":return l.formatDate(b,c);case "date-only":return l.formatDateOnly(b,c);case "time-only":return l.formatTimeOnly(b,c);case "timestamp-offset":return l.formatTimestamp(b,c);default:return null}};d.getLocalDateTimeFromComponent=w;d.getUnixFieldValueFromDateComponents=function(a){const {dateComponent:b,timeComponent:c,timeZone:e,max:h,min:m,oldValue:k}=a;var f=w(b,e);a=!!a.applyRange;if(!f)return null;var p=null;if(null!=c?.value){p=
w(c,e);var q=Date.now();q=g.DateTime.fromMillis(null!=h&&h<q?h:q,n(e));f=f||q;const {year:u,month:v,day:C}=f,{hour:D,minute:E,second:F,millisecond:G}=p||q;p=f.set({year:u,month:v,day:C,hour:D,minute:E,second:F,millisecond:G})}else{a=B({value:k??Date.now(),max:h,min:m});a=z(a,e);const {year:u,month:v,day:C}=f,{hour:D,minute:E,second:F,millisecond:G}=a;a=!0;p=f.set({year:u,month:v,day:C,hour:D,minute:E,second:F,millisecond:G})}if(!p.isValid)return null;f=p.toMillis();return a?B({value:f,max:h,min:m}):
f};d.isArcadeDate=function(a){return!!a&&"object"===typeof a&&"getTime"in a&&"toISOString"in a&&"timeZone"in a};d.isCalciteDateComponent=a=>"valueAsDate"in a;d.normalizeTimeOnlyString=M;d.numberingSystem="latn";d.prepareISOFieldValueForDateComponents=K;d.prepareUnixFieldValueForDateComponents=function(a,b){return null==a||!r.isNumber(a)||isNaN(a)?A:(a=z(a,b))?{date:a.toFormat("yyyy-MM-dd",n(b)),time:a.toFormat("TT",n(b))}:A};d.supportedTimeFormats=N;d.timeOnlyToDateTime=t;d.timeResolutionToStepMap=
H;d.timestampOffsetToDateTime=y;d.valueIsInRange=L;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});