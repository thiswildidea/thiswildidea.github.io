// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/Evented ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./support/ButtonMenu ../../support/legacyIcon ../../support/widgetUtils".split(" "),function(b,a,l,c,q,r,t,n,p,k,m){a=class extends a.EventedAccessor{constructor(e){super(e);this._menuContainer=document.createElement("div");this.activeRowIndex=
null;this.autoWidth=!1;this.cellValueFormatFunction=({value:d})=>m.renderingSanitizer.sanitize(d);this.flexGrow=1;this.footerRenderFunction=null;this.frozen=!1;this.header=this.grid=null;this.headerRenderFunction=d=>{const {root:f}=d;this.removeCellContent(f);f.classList.add("esri-column__header-content");if(this.sortable)this.headerSorterRenderFunction(d);else{const h=document.createElement("div");h.classList.add("esri-column__header-label");h.textContent=this.label;f.appendChild(h)}this.headerMenuEnabled&&
this.headerMenuRenderFunction(d)};this.headerMenuRenderFunction=({root:d})=>{this.menu?.items?.length&&d.appendChild(this._menuContainer)};this.headerSorterRenderFunction=({root:d})=>{const {label:f,sortElement:h}=this;h?(h.textContent!==f&&h.setAttribute("textContent",f),d.appendChild(h),(d=this.grid?.getSlotElementByName(d.slot)?.parentElement)&&!d.onkeydown&&(d.onkeydown=({key:g})=>{"Enter"!==g&&"Spacebar"!==g||h.click()})):d.textContent=f};this.hidden=!1;this.headerMenuEnabled=!0;this.path=this.messagesURIUtils=
this.messagesCommon=this.messages=this.menuConfig=this.menu=this.initialSortPriority=null;this.renderFunction=({root:d,column:f,rowData:h})=>{const g=this.getCellValue(f,h);f=this.cellValueFormatFunction({column:f,rowData:h,value:g});d.innerHTML!==f&&(d.innerHTML=f)};this.sortable=this.resizable=!0;this.textAlign="start";this.timeZoneName=this.timeZone=null;this.width=200}initialize(){const {messages:e,path:d}=this;this._set("sortElement",this.createSortElement());this.sortElement.setAttribute("path",
d??"");this._menuContainer.classList.add("esri-column__menu-container");this.menu=new p({label:e?.options,iconClass:k.legacyIcon.handleHorizontal,...this.menuConfig});this.menu.container=this._menuContainer;this.menu.set("items",this.getMenuItems());this.addHandles([l.watch(()=>this.hidden,()=>this.menu?.set("open",!1)),l.watch(()=>this.path,f=>{this.sortElement&&this.sortElement.path!==f&&this.sortElement.setAttribute("path",f??"")})])}destroy(){this.menu?.destroy()}set direction(e){this.sortable&&
(this.sortElement&&(e?this.sortElement.direction!==e&&this.sortElement.setAttribute("direction",e):this.sortElement.removeAttribute("direction")),this._set("direction",e))}get direction(){return this._get("direction")||null}get label(){return m.renderingSanitizer.sanitize(this.header??this.path??"")}getMenuItems(){const {menuConfig:e,sortable:d}=this,f=e?.items,h=this.getSortMenuItems(),g=[];d&&g.push(...h);f?.length&&g.push(...f);return g.length?g:null}getSortMenuItems(){const {messages:e}=this;
return[{selected:"asc"===this.direction,iconClass:k.legacyIcon.arrowUp,label:e?.sortAsc,autoCloseMenu:!0,clickFunction:()=>this.set("direction","asc"!==this.direction?"asc":null)},{selected:"desc"===this.direction,iconClass:k.legacyIcon.arrowDown,label:e?.sortDesc,autoCloseMenu:!0,clickFunction:()=>this.set("direction","desc"!==this.direction?"desc":null)}]}getCellValue(e,d){return d?.item[e?.path]??""}createSortElement(){const {direction:e,label:d,path:f,initialSortPriority:h}=this,g=document.createElement("vaadin-grid-sorter");
g.classList.add("esri-column__sorter");g.setAttribute("path",f??"");g.setAttribute("title",d);g.textContent=d;e&&g.setAttribute("direction",e);null!=h&&(g._initialOrder=h);g.addEventListener("direction-changed",()=>{this.direction!==g.direction&&this._set("direction",g.direction)});return g}removeCellContent(e){if(e)for(;e.firstChild;)try{e.removeChild(e.firstChild)}catch(d){}}};b.__decorate([c.property()],a.prototype,"activeRowIndex",void 0);b.__decorate([c.property()],a.prototype,"autoWidth",void 0);
b.__decorate([c.property()],a.prototype,"cellValueFormatFunction",void 0);b.__decorate([c.property()],a.prototype,"direction",null);b.__decorate([c.property()],a.prototype,"flexGrow",void 0);b.__decorate([c.property()],a.prototype,"footerRenderFunction",void 0);b.__decorate([c.property()],a.prototype,"frozen",void 0);b.__decorate([c.property()],a.prototype,"grid",void 0);b.__decorate([c.property()],a.prototype,"header",void 0);b.__decorate([c.property()],a.prototype,"headerRenderFunction",void 0);
b.__decorate([c.property()],a.prototype,"headerMenuRenderFunction",void 0);b.__decorate([c.property()],a.prototype,"headerSorterRenderFunction",void 0);b.__decorate([c.property()],a.prototype,"hidden",void 0);b.__decorate([c.property()],a.prototype,"headerMenuEnabled",void 0);b.__decorate([c.property({constructOnly:!0})],a.prototype,"initialSortPriority",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"label",null);b.__decorate([c.property()],a.prototype,"menu",void 0);b.__decorate([c.property()],
a.prototype,"menuConfig",void 0);b.__decorate([c.property()],a.prototype,"messages",void 0);b.__decorate([c.property()],a.prototype,"messagesCommon",void 0);b.__decorate([c.property()],a.prototype,"messagesURIUtils",void 0);b.__decorate([c.property()],a.prototype,"path",void 0);b.__decorate([c.property()],a.prototype,"renderFunction",void 0);b.__decorate([c.property()],a.prototype,"resizable",void 0);b.__decorate([c.property()],a.prototype,"sortable",void 0);b.__decorate([c.property({readOnly:!0})],
a.prototype,"sortElement",void 0);b.__decorate([c.property()],a.prototype,"textAlign",void 0);b.__decorate([c.property()],a.prototype,"timeZone",void 0);b.__decorate([c.property()],a.prototype,"timeZoneName",void 0);b.__decorate([c.property()],a.prototype,"width",void 0);return a=b.__decorate([n.subclass("esri.widgets.FeatureTable.Grid.Column")],a)});