// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(z,q,x,U,O,E,L,M,K,n,F){const G=q.ofType(n);q=class extends x.EventedAccessor{constructor(m){super(m);this.checkPublishStatusEnabled=
!1;this.listItemCreatedFunction=null;this.operationalItems=new G;this.view=null}initialize(){this.addHandles([U.watch(()=>[this.view,this.view?.ready],()=>this._viewHandles(),U.initial),U.watch(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],"view")}destroy(){this.view=null;this.operationalItems.removeAll()}get state(){const {view:m}=this;return m?.ready?"ready":m?"loading":"disabled"}triggerAction(m,H){m&&!m.disabled&&this.emit("trigger-action",{action:m,
item:H})}moveListItem(m,H,r,B){const C=m?.layer;if(C){var V=this.view?.map?.layers,ca=H?F.getItemLayers(H):V;V=r?F.getItemLayers(r):V;if(ca&&V){var {operationalItems:t}=this;H=H?.children||t;t=r?.children||t;B=V.length-B;m.parent=r||null;H.includes(m)&&H.remove(m);ca.includes(C)&&ca.remove(C);t.includes(m)||t.add(m,B);V.includes(C)||V.add(C,B)}}}_createLayerViewHandles(m){this.removeHandles("layer-views");this._compileList();m&&this.addHandles(m.on("change",()=>this._compileList()),"layer-views")}_createMapLayerHandles(m){this.removeHandles("map-layers");
this._compileList();m&&this.addHandles(m.on("change",()=>this._compileList()),"map-layers")}_createListItem(m){const {view:H,listItemCreatedFunction:r,checkPublishStatusEnabled:B}=this;return new n({checkPublishStatusEnabled:B,layer:m,listItemCreatedFunction:r,view:H})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(m){if(m)return m.filter(H=>"hide"!==F.findLayerListMode(H))}_watchLayersListMode(m){this.removeHandles("layer-list-mode");m&&m.forEach(H=>{"listMode"in H&&this.addHandles(U.watch(()=>
H.listMode,()=>this._compileList()),"layer-list-mode")})}_compileList(){var m=this.view?.map?.layers;this._watchLayersListMode(m);m=this._getViewableLayers(m);m?.length?(this._createNewItems(m),this._removeItems(m),this._sortItems(m)):this._removeAllItems()}_createNewItems(m){const {operationalItems:H}=this;m.forEach(r=>{H.find(B=>B.layer===r)||H.add(this._createListItem(r))})}_removeItems(m){const {operationalItems:H}=this,r=[];H.forEach(B=>{B&&m&&m.includes(B.layer)||r.push(B)});H.removeMany(r)}_sortItems(m){const {operationalItems:H}=
this;H.sort((r,B)=>{r=m.indexOf(r.layer);B=m.indexOf(B.layer);return r>B?-1:r<B?1:0})}_recompileList(){this._removeAllItems();this._compileList()}_viewHandles(){const {view:m}=this;this.removeHandles(["map-layers","layer-views","view-layers"]);this._recompileList();m&&m.ready&&this.addHandles([U.watch(()=>this.view?.map?.allLayers,H=>this._createMapLayerHandles(H),U.initial),U.watch(()=>this.view?.allLayerViews,H=>this._createLayerViewHandles(H),U.initial)],"view-layers")}};z.__decorate([O.property()],
q.prototype,"checkPublishStatusEnabled",void 0);z.__decorate([O.property()],q.prototype,"listItemCreatedFunction",void 0);z.__decorate([O.property({type:G})],q.prototype,"operationalItems",void 0);z.__decorate([O.property({readOnly:!0})],q.prototype,"state",null);z.__decorate([O.property()],q.prototype,"view",void 0);return q=z.__decorate([K.subclass("esri.widgets.LayerList.LayerListViewModel")],q)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/arrayUtils ../../core/Collection ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/get ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(z,q,x,U,O,E,L,M,K,n,F,G,m,H,r,B,C){var V;K=U.ofType({key:"type",defaultKeyValue:"button",base:G,typeMap:{button:m,toggle:r,slider:H}});const ca=U.ofType(K);q=V=class extends O.IdentifiableMixin(q){constructor(t){super(t);this.actionsSections=new ca;this.checkPublishStatusEnabled=this.actionsOpen=!1;this.children=new (U.ofType(V));this.childrenSortable=!0;this.hidden=!1;this.listItemCreatedFunction=this.layerView=this.layer=null;this.open=!1;this.parent=this.panel=null;this.sortable=!0;this.view=
null}initialize(){this.addHandles([E.watch(()=>this.layer,t=>this._watchLayerProperties(t),E.initial),E.watch(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),E.initial),E.watch(()=>this.view,t=>this._updateChildrenView(t),E.initial),E.watch(()=>this.panel,t=>this._setListItemOnPanel(t),E.initial),E.watch(()=>[this.layer,this.view],()=>this._getLayerView(),E.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:this})}destroy(){this.view=
null}get connectionStatus(){const {layerView:t,publishing:w}=this;if(!w&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const {layerView:t}=this;return t&&"spatialReferenceSupported"in t?!t.spatialReferenceSupported:!1}castPanel(t){this.panel?.open&&!t.hasOwnProperty("open")&&(t.open=!0);return t?new B(t):null}get title(){const t=F.get(this,"layer.layer");return(!t||t&&F.get(this,"layer.layer.loaded"))&&F.get(this,"layer.title")||F.get(this,
"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){const {layer:t,checkPublishStatusEnabled:w}=this;return w&&t&&"publishingInfo"in t&&"publishing"===t.publishingInfo?.status}get updating(){const {layerView:t,connectionStatus:w,layer:da,publishing:qa}=this;return qa||w?!1:t?t.updating:"loading"===da?.loadStatus||!1}get visible(){return this.layer?.visible}set visible(t){const w=this.layer;w&&(w.visible=t)}get visibleAtCurrentScale(){return!C.isLayerOutsideScaleRange(this.layer,
this.view?.scale)}get visibilityMode(){return C.findLayerVisibilityMode(this.layer)}clone(){return new V({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const w=
this.children;w&&w.forEach(da=>da.checkPublishStatusEnabled=t)}_updateChildrenView(t){const w=this.children;w&&w.forEach(da=>da.view=t)}_addChildren(t){this.removeHandles("child-list-mode");this.children.removeAll();if(t){t.forEach(da=>{this.addHandles(E.watch(()=>da.listMode,()=>this._addChildren(t)),"child-list-mode")});var w=t.filter(da=>"hide"!==C.findLayerListMode(da));this.children.addMany(this._makeChildren(w))}}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>{this._addChildren(t)}),
"layer")}_initializeChildLayers(t){this._addChildren(t);this._watchSublayerChanges(t)}_makeChildren(t){return t.map(w=>C.canDisplayLayer(w)?new V({layer:w,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(x.isSome).reverse()}_watchLayerProperties(t){this.removeHandles("layer");this.removeHandles("child-list-mode");if(t)if(this.addHandles(E.watch(()=>t.listMode,()=>this._watchLayerProperties(t)),"layer"),
"hide-children"===C.findLayerListMode(t))this.children.removeAll();else{var w=C.getNormalizedChildLayerProperty(t);w&&this.addHandles(E.watch(()=>t[w],da=>{t.hasOwnProperty(w)&&this._initializeChildLayers(da)},E.initial),"layer")}}async _getLayerView(){const {layer:t,view:w}=this;if(t&&w)try{const da=await w.whenLayerView(t);da.layer===this.layer&&this._set("layerView",da)}catch{}}};z.__decorate([L.property({type:ca})],q.prototype,"actionsSections",void 0);z.__decorate([L.property()],q.prototype,
"actionsOpen",void 0);z.__decorate([L.property()],q.prototype,"checkPublishStatusEnabled",void 0);z.__decorate([L.property({type:U})],q.prototype,"children",void 0);z.__decorate([L.property()],q.prototype,"childrenSortable",void 0);z.__decorate([L.property({readOnly:!0})],q.prototype,"connectionStatus",null);z.__decorate([L.property({readOnly:!0})],q.prototype,"error",null);z.__decorate([L.property()],q.prototype,"hidden",void 0);z.__decorate([L.property({readOnly:!0})],q.prototype,"incompatible",
null);z.__decorate([L.property()],q.prototype,"layer",void 0);z.__decorate([L.property({readOnly:!0})],q.prototype,"layerView",void 0);z.__decorate([L.property()],q.prototype,"listItemCreatedFunction",void 0);z.__decorate([L.property()],q.prototype,"open",void 0);z.__decorate([L.property({type:B})],q.prototype,"panel",void 0);z.__decorate([M.cast("panel")],q.prototype,"castPanel",null);z.__decorate([L.property()],q.prototype,"parent",void 0);z.__decorate([L.property()],q.prototype,"sortable",void 0);
z.__decorate([L.property()],q.prototype,"title",null);z.__decorate([L.property({readOnly:!0})],q.prototype,"publishing",null);z.__decorate([L.property({readOnly:!0})],q.prototype,"updating",null);z.__decorate([L.property()],q.prototype,"view",void 0);z.__decorate([L.property()],q.prototype,"visible",null);z.__decorate([L.property({readOnly:!0})],q.prototype,"visibleAtCurrentScale",null);z.__decorate([L.property({readOnly:!0})],q.prototype,"visibilityMode",null);return q=V=z.__decorate([n.subclass("esri.widgets.LayerList.ListItem")],
q)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),function(z,q,x,U,O,E,L){var M;x=M=class extends L{constructor(K){super(K);this.displayValueEnabled=!1;this.max=1;this.min=0;this.step=.1;this.type="slider";this.value=null}clone(){return new M({active:this.active,className:this.className,
disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};z.__decorate([q.property()],x.prototype,"displayValueEnabled",void 0);z.__decorate([q.property()],x.prototype,"max",void 0);z.__decorate([q.property()],x.prototype,"min",void 0);z.__decorate([q.property()],x.prototype,"step",void 0);z.__decorate([q.property()],x.prototype,"value",void 0);return x=
M=z.__decorate([E.subclass("esri.support.Action.ActionSlider")],x)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/tslib.es6 ../../core/Identifiable ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),function(z,q,x,U,O,E,
L,M,K,n,F,G,m,H){x=class extends x.IdentifiableMixin(F){constructor(r,B){super(r,B);this.listItem=this.image=this.content=this._legend=null;this.open=!1;this.visible=!0}initialize(){this.addHandles(O.watch(()=>this.content,r=>this._createLegend(r),O.initial))}destroy(){this._legend=U.destroyMaybe(this._legend)}get className(){const {image:r}=this,B=this._getFirstWidget();return this._get("className")||(!r&&B?B.iconClass??"":"")}set className(r){this._override("className",r)}get disabled(){const {listItem:r,
_legend:B,content:C}=this;return r?Array.isArray(C)&&1<C.length?!1:B?!B.activeLayerInfos?.length||!r.visibleAtCurrentScale||!r.visible:!1:!0}set disabled(r){this._overrideIfSome("disabled",r)}get title(){const r=this._getFirstWidget();return this._get("title")||(r?.label??"")}set title(r){this._override("title",r)}render(){return H.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())}_renderContent(r){const {_legend:B,disabled:C}=this;return!r||C?null:"legend"===r&&B?H.tsx("div",{class:this.classes("esri-layer-list-panel__content",
"esri-layer-list-panel__content--legend"),key:B},B.render()):"string"===typeof r?H.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),innerHTML:r,key:r}):m.isWidget(r)?H.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:r},r.render()):r instanceof HTMLElement?H.tsx("div",{afterCreate:this._attachToNode,bind:r,class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),
key:r}):null}_renderContents(){const {content:r}=this;return Array.isArray(r)?r.map(B=>this._renderContent(B)):this._renderContent(r)}_getLegendOptions(){const {listItem:r}=this;if(!r)return{};const {layer:B,view:C}=r;return B&&C?{view:C,layerInfos:[G.getLegendLayerInfo(B)]}:{}}async _createLegend(r){if(this._hasLegend(r)&&!this._legend){({default:r}=await new Promise((V,ca)=>z(["../Legend"],t=>V(Object.freeze(Object.defineProperty({__proto__:null,default:t},Symbol.toStringTag,{value:"Module"}))),
ca)));var {listItem:B}=this,C=new r(this._getLegendOptions());this._legend=C;this.notifyChange("className");this.notifyChange("title");r=O.watch(()=>[B?.view,B?.layer,B?.layer?.source,B?.layer?.parent],()=>this._updateLegend(C),O.initial);this.addHandles(r,"legends");this.scheduleRender()}}_hasLegend(r){return"legend"===r?!0:null!=r&&(Array.isArray(r)?r.includes("legend"):!1)}_attachToNode(r){r.appendChild(this)}_updateLegend(r){r.set(this._getLegendOptions());this.scheduleRender()}_getWidget(r){return"legend"===
r?this._legend:m.isWidget(r)?r:null}_getFirstWidget(){const {content:r}=this;if(Array.isArray(r)){let B=null;r.some(C=>{(C=this._getWidget(C))&&(B=C);return!!C});return B}return this._getWidget(r)}};q.__decorate([E.property()],x.prototype,"_legend",void 0);q.__decorate([E.property()],x.prototype,"className",null);q.__decorate([E.property()],x.prototype,"content",void 0);q.__decorate([E.property()],x.prototype,"disabled",null);q.__decorate([E.property()],x.prototype,"image",void 0);q.__decorate([E.property()],
x.prototype,"listItem",void 0);q.__decorate([E.property()],x.prototype,"title",null);q.__decorate([E.property()],x.prototype,"open",void 0);q.__decorate([E.property()],x.prototype,"visible",void 0);return x=q.__decorate([n.subclass("esri.widgets.LayerList.ListItemPanel")],x)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(z){function q(n){if(n)return null!=n.listMode?n.listMode:void 0}function x(n){return null!=n&&"minScale"in n&&null!=n.minScale?n.minScale:
void 0}function U(n){return null!=n&&"maxScale"in n&&null!=n.maxScale?n.maxScale:void 0}function O(n){if(n&&!("type"in n&&"wmts"===n.type)&&n.listMode!==K.hideChildren)return"sublayers"in n?"sublayers":"layers"in n?"layers":void 0}function E(n,F){n?.sort((G,m)=>{G="uid"in G?F.indexOf(G.uid):-1;m="uid"in m?F.indexOf(m.uid):-1;return G>m?-1:G<m?1:0})}function L(n){return null!=n&&"layer"in n&&null!=n.layer}function M(n){return n&&"capabilities"in n&&null!=n.capabilities&&"exportMap"in n.capabilities?
n.capabilities.exportMap:void 0}const K={hide:"hide",hideChildren:"hide-children"};z.canDisplayLayer=function(n){return q(n)!==K.hide};z.canSortSublayers=function(n){n=(n?.layer&&L(n.layer)?n.layer.layer:void 0)??n?.layer;if(!n)return!1;n=M(n);return(null!=n&&"supportsDynamicLayers"in n?n.supportsDynamicLayers:void 0)??!0};z.findLayerListMode=q;z.findLayerMaxScale=U;z.findLayerMinScale=x;z.findLayerVisibilityMode=function(n){if(!n)return"inherited";var F=L(n)?n.layer:n;F=M(F);F=null!=F&&"supportsSublayerVisibility"in
F?F.supportsSublayerVisibility:void 0;return null!=F?F?"independent":"inherited":"visibilityMode"in n&&null!=n.visibilityMode?n.visibilityMode:"independent"};z.findSelectedItem=function(n,F){const G=n.layer?.uid;return null!=G?F.find(m=>m.layer?.uid===G):null};z.getItemLayers=function(n){return(n=n?.layer)&&"layers"in n?n.layers:null};z.getLegendLayerInfo=function(n){var F=L(n)?n:null;const G=n?.parent;return(F=null!=G&&"type"in G&&"map-image"===G.type?F?.source:null)&&G?{layer:G,title:"",sublayerIds:[F.mapLayerId]}:
{layer:n,title:""}};z.getNormalizedChildLayerProperty=O;z.isLayerOutsideScaleRange=function(n,F){if(!n||null==F||isNaN(F))return!1;var G=x(n);n=U(n);G=null!=G&&!isNaN(G)&&0<G&&F>G;F=null!=n&&!isNaN(n)&&0<n&&F<n;return G||F};z.isSublayer=L;z.sortChildLayersToIds=function(n,F){if(n=n?.layer){var G=O(n);if(G){if("layers"===G&&"layers"in n)var m=n.layers;else"sublayers"===G&&"sublayers"in n&&(m=n.sublayers);E(m,F)}}};z.sortLayersToIds=E;Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})})},
"esri/widgets/support/globalCss":function(){define(["exports"],function(z){z.globalCss={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",
emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",
panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sortable.esm":function(){define(["exports"],
function(z){function q(a,b){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable}));d.push.apply(d,e)}return d}function x(a){for(var b=1;b<arguments.length;b++){var d=null!=arguments[b]?arguments[b]:{};b%2?q(Object(d),!0).forEach(function(e){var g=d[e];e in a?Object.defineProperty(a,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[e]=g}):Object.getOwnPropertyDescriptors?
Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):q(Object(d)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(d,e))})}return a}function U(a){"@babel/helpers - typeof";U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return U(a)}function O(){O=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var d=
arguments[b],e;for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=d[e])}return a};return O.apply(this,arguments)}function E(a,b){if(null==a)return{};if(null==a)var d={};else{d={};var e=Object.keys(a),g;for(g=0;g<e.length;g++){var h=e[g];0<=b.indexOf(h)||(d[h]=a[h])}}if(Object.getOwnPropertySymbols)for(g=Object.getOwnPropertySymbols(a),h=0;h<g.length;h++)e=g[h],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(d[e]=a[e]);return d}function L(a){if("undefined"!==typeof window&&
window.navigator)return!!navigator.userAgent.match(a)}function M(a,b,d){a.addEventListener(b,d,!ra&&ub)}function K(a,b,d){a.removeEventListener(b,d,!ra&&ub)}function n(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(d){}return!1}}function F(a,b,d,e){if(a){d=d||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===d&&n(a,b):n(a,b))||e&&a===d)return a;
if(a===d)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function G(a,b,d){if(a&&b)if(a.classList)a.classList[d?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(vb," ").replace(" "+b+" "," ");a.className=(e+(d?" "+b:"")).replace(vb," ")}}function m(a,b,d){var e=a&&a.style;if(e){if(void 0===d)return document.defaultView&&document.defaultView.getComputedStyle?d=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(d=a.currentStyle),void 0===b?d:
d[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=d+("string"===typeof d?"":"px")}}function H(a,b){var d="";if("string"===typeof a)d=a;else{do{var e=m(a,"transform");e&&"none"!==e&&(d=e+" "+d)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(d)}function r(a,b,d){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(d)for(;b<e;b++)d(a[b],b);return a}return[]}function B(){var a=document.scrollingElement;return a?
a:document.documentElement}function C(a,b,d,e,g){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==B()){var h=a.getBoundingClientRect();var l=h.top;var v=h.left;var y=h.bottom;var D=h.right;var I=h.height;var P=h.width}else v=l=0,y=window.innerHeight,D=window.innerWidth,I=window.innerHeight,P=window.innerWidth;if((b||d)&&a!==window&&(g=g||a.parentNode,!ra)){do if(g&&g.getBoundingClientRect&&("none"!==m(g,"transform")||d&&"static"!==m(g,"position"))){y=g.getBoundingClientRect();
l-=y.top+parseInt(m(g,"border-top-width"));v-=y.left+parseInt(m(g,"border-left-width"));y=l+h.height;D=v+h.width;break}while(g=g.parentNode)}e&&a!==window&&(e=(a=H(g||a))&&a.a,g=a&&a.d,a&&(l/=g,v/=e,P/=e,I/=g,y=l+I,D=v+P));return{top:l,left:v,bottom:y,right:D,width:P,height:I}}}function V(a,b,d){var e=qa(a,!0);for(a=C(a)[b];e;){b=C(e)[d];var g=void 0;g="top"===d||"left"===d?a>=b:a<=b;if(!g)return e;if(e===B())break;e=qa(e,!1)}return!1}function ca(a,b,d,e){for(var g=0,h=0,l=a.children;h<l.length;){if("none"!==
l[h].style.display&&l[h]!==c.ghost&&(e||l[h]!==c.dragged)&&F(l[h],d.draggable,a,!1)){if(g===b)return l[h];g++}h++}return null}function t(a,b){for(a=a.lastElementChild;a&&(a===c.ghost||"none"===m(a,"display")||b&&!n(a,b));)a=a.previousElementSibling;return a||null}function w(a,b){var d=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===c.clone||b&&!n(a,b)||d++;return d}function da(a){var b=0,d=0,e=B();if(a){do{var g=H(a),h=g.d;b+=a.scrollLeft*
g.a;d+=a.scrollTop*h}while(a!==e&&(a=a.parentNode))}return[b,d]}function qa(a,b){if(!a||!a.getBoundingClientRect)return B();var d=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=m(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(d||b)return a;d=!0}}while(a=a.parentNode);return B()}function Ia(a,b){return Math.round(a.top)===
Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function Z(a,b){return function(){if(!Oa){var d=arguments;1===d.length?a.call(this,d[0]):a.apply(this,d);Oa=setTimeout(function(){Oa=void 0},b)}}}function Ya(a,b,d){a.scrollLeft+=b;a.scrollTop+=d}function Za(a){var b=window.Polymer,d=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):d?d(a).clone(!0)[0]:a.cloneNode(!0)}function Ea(){var a=
[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(d){if("none"!==m(d,"display")&&d!==c.ghost){a.push({target:d,rect:C(d)});var e=x({},a[a.length-1].rect);if(d.thisAnimationDuration){var g=H(d,!0);g&&(e.top-=g.f,e.left-=g.e)}d.fromRect=e}})},addAnimationState:function(d){a.push(d)},removeAnimationState:function(d){var e=a,g=e.splice;a:{var h=a;d={target:d};for(var l in h)if(h.hasOwnProperty(l))for(var v in d)if(d.hasOwnProperty(v)&&
d[v]===h[l][v]){h=Number(l);break a}h=-1}g.call(e,h,1)},animateAll:function(d){var e=this;if(this.options.animation){var g=!1,h=0;a.forEach(function(l){var v=0,y=l.target,D=y.fromRect,I=C(y),P=y.prevFromRect,ea=y.prevToRect;l=l.rect;var aa=H(y,!0);aa&&(I.top-=aa.f,I.left-=aa.e);y.toRect=I;y.thisAnimationDuration&&Ia(P,I)&&!Ia(D,I)&&(l.top-I.top)/(l.left-I.left)===(D.top-I.top)/(D.left-I.left)&&(v=Math.sqrt(Math.pow(P.top-l.top,2)+Math.pow(P.left-l.left,2))/Math.sqrt(Math.pow(P.top-ea.top,2)+Math.pow(P.left-
ea.left,2))*e.options.animation);Ia(I,D)||(y.prevFromRect=D,y.prevToRect=I,v||(v=e.options.animation),e.animate(y,l,I,v));v&&(g=!0,h=Math.max(h,v),clearTimeout(y.animationResetTimer),y.animationResetTimer=setTimeout(function(){y.animationTime=0;y.prevFromRect=null;y.fromRect=null;y.prevToRect=null;y.thisAnimationDuration=null},v),y.thisAnimationDuration=v)});clearTimeout(b);g?b=setTimeout(function(){"function"===typeof d&&d()},h):"function"===typeof d&&d();a=[]}else clearTimeout(b),"function"===typeof d&&
d()},animate:function(d,e,g,h){if(h){m(d,"transition","");m(d,"transform","");var l=H(this.el),v=(e.left-g.left)/(l&&l.a||1);e=(e.top-g.top)/(l&&l.d||1);d.animatingX=!!v;d.animatingY=!!e;m(d,"transform","translate3d("+v+"px,"+e+"px,0)");this.forRepaintDummy=d.offsetWidth;m(d,"transition","transform "+h+"ms"+(this.options.easing?" "+this.options.easing:""));m(d,"transform","translate3d(0,0,0)");"number"===typeof d.animated&&clearTimeout(d.animated);d.animated=setTimeout(function(){m(d,"transition",
"");m(d,"transform","");d.animated=!1;d.animatingX=!1;d.animatingY=!1},h)}}}}function fa(a){var b=x({putSortable:ia,cloneEl:X,targetEl:u,rootEl:W,oldIndex:Ja,oldDraggableIndex:Pa,newIndex:na,newDraggableIndex:Aa},a);a=b.sortable;var d=b.rootEl,e=b.name,g=b.targetEl,h=b.cloneEl,l=b.toEl,v=b.fromEl,y=b.oldIndex,D=b.newIndex,I=b.oldDraggableIndex,P=b.newDraggableIndex,ea=b.originalEvent,aa=b.putSortable,ja=b.extraEventProperties;if(a=a||d&&d[oa]){var T=a.options,sa="on"+e.charAt(0).toUpperCase()+e.substr(1);
!window.CustomEvent||ra||Qa?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=l||d;b.from=v||d;b.item=g||d;b.clone=h;b.oldIndex=y;b.newIndex=D;b.oldDraggableIndex=I;b.newDraggableIndex=P;b.originalEvent=ea;b.pullMode=aa?aa.lastPutMode:void 0;e=x(x({},ja),Ra.getEventProperties(e,a));for(var ta in e)b[ta]=e[ta];d&&d.dispatchEvent(b);T[sa]&&T[sa].call(a,b)}}function c(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));
this.el=a;this.options=b=O({},b);a[oa]=this;var d={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(h,l){h.setData("Text",l.textContent)},dropBubble:!1,
dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==c.supportPointer&&"PointerEvent"in window&&!Sa,emptyInsertThreshold:5};Ra.initializePlugins(this,a,d);for(var e in d)e in b||(b[e]=d[e]);xb(b);for(var g in this)"_"===g.charAt(0)&&"function"===typeof this[g]&&
(this[g]=this[g].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Ib)this.options.touchStartThreshold=1;b.supportPointer?M(a,"pointerdown",this._onTapStart):(M(a,"mousedown",this._onTapStart),M(a,"touchstart",this._onTapStart));this.nativeDraggable&&(M(a,"dragover",this),M(a,"dragenter",this));$a.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);O(this,Ea())}function f(a,b,d,e,g,h,l,v){var y=a[oa],D=y.options.onMove,I;if(!window.CustomEvent||ra||Qa){var P=document.createEvent("Event");
P.initEvent("move",!0,!0)}else P=new CustomEvent("move",{bubbles:!0,cancelable:!0});P.to=b;P.from=a;P.dragged=d;P.draggedRect=e;P.related=g||b;P.relatedRect=h||C(b);P.willInsertAfter=v;P.originalEvent=l;a.dispatchEvent(P);D&&(I=D.call(y,P,l));return I}function k(a){a.draggable=!1}function p(){kb=!1}function A(a,b,d){d=C(ca(d.el,0,d.options,!0));return b?a.clientX<d.left-10||a.clientY<d.top&&a.clientX<d.right:a.clientY<d.top-10||a.clientY<d.bottom&&a.clientX<d.left}function J(a,b,d){d=C(t(d.el,d.options.draggable));
return b?a.clientX>d.right+10||a.clientX<=d.right&&a.clientY>d.bottom&&a.clientX>=d.left:a.clientX>d.right&&a.clientY>d.top||a.clientX<=d.right&&a.clientY>d.bottom+10}function Q(a,b,d,e,g,h,l,v){a=e?a.clientY:a.clientX;var y=e?d.height:d.width,D=e?d.top:d.left;d=e?d.bottom:d.right;e=!1;if(!l)if(v&&ab<y*g)if(!Ta&&(1===Ua?a>D+y*h/2:a<d-y*h/2)&&(Ta=!0),Ta)e=!0;else{if(1===Ua?a<D+ab:a>d-ab)return-Ua}else if(a>D+y*(1-g)/2&&a<d-y*(1-g)/2)return b=w(u)<w(b)?1:-1,b;if(e||l)if(a<D+y*h/2||a>d-y*h/2)return a>
D+y/2?1:-1;return 0}function R(a){bb.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var d=a[b];d.checked&&bb.push(d)}}function ha(a){return setTimeout(a,0)}function pa(){ba.forEach(function(a){clearInterval(a.pid)});ba=[]}function ua(){}function Ba(){}var ra=L(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Qa=L(/Edge/i),yb=L(/firefox/i),Sa=L(/safari/i)&&!L(/chrome/i)&&!L(/android/i),Va=L(/iP(ad|od|hone)/i),zb=L(/chrome/i)&&L(/android/i),ub={capture:!1,passive:!1},vb=
/\s+/g,Oa,oa="Sortable"+(new Date).getTime(),Ka=[],lb={initializeByDefault:!0},Ra={mount:function(a){for(var b in lb)!lb.hasOwnProperty(b)||b in a||(a[b]=lb[b]);Ka.forEach(function(d){if(d.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once");});Ka.push(a)},pluginEvent:function(a,b,d){var e=this;this.eventCanceled=!1;d.cancel=function(){e.eventCanceled=!0};var g=a+"Global";Ka.forEach(function(h){if(b[h.pluginName]){if(b[h.pluginName][g])b[h.pluginName][g](x({sortable:b},
d));if(b.options[h.pluginName]&&b[h.pluginName][a])b[h.pluginName][a](x({sortable:b},d))}})},initializePlugins:function(a,b,d,e){Ka.forEach(function(h){var l=h.pluginName;if(a.options[l]||h.initializeByDefault)h=new h(a,b,a.options),h.sortable=a,h.options=a.options,a[l]=h,O(d,h.defaults)});for(var g in a.options)a.options.hasOwnProperty(g)&&(e=this.modifyOption(a,g,a.options[g]),"undefined"!==typeof e&&(a.options[g]=e))},getEventProperties:function(a,b){var d={};Ka.forEach(function(e){"function"===
typeof e.eventProperties&&O(d,e.eventProperties.call(b[e.pluginName],a))});return d},modifyOption:function(a,b,d){var e;Ka.forEach(function(g){a[g.pluginName]&&g.optionListeners&&"function"===typeof g.optionListeners[b]&&(e=g.optionListeners[b].call(a[g.pluginName],d))});return e}},Jb=["evt"],ma=function(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=d.evt;d=E(d,Jb);Ra.pluginEvent.bind(c)(a,b,x({dragEl:u,parentEl:Y,ghostEl:N,rootEl:W,nextEl:Fa,lastDownEl:cb,cloneEl:X,cloneHidden:Ca,
dragStarted:Wa,putSortable:ia,activeSortable:c.active,originalEvent:e,oldIndex:Ja,oldDraggableIndex:Pa,newIndex:na,newDraggableIndex:Aa,hideGhostForTarget:Ab,unhideGhostForTarget:Bb,cloneNowHidden:function(){Ca=!0},cloneNowShown:function(){Ca=!1},dispatchSortableEvent:function(g){fa({sortable:b,name:g,originalEvent:e})}},d))},u,Y,N,W,Fa,cb,X,Ca,Ja,na,Pa,Aa,db,ia,La=!1,eb=!1,$a=[],Ga,va,mb,nb,Cb,Db,Wa,Ma,Ua,Ta=!1,fb=!1,ab,ka,ob=[],kb=!1,bb=[],gb="undefined"!==typeof document,Eb=Qa||ra?"cssFloat":"float",
Ib=gb&&!zb&&!Va&&"draggable"in document.createElement("div"),Fb=function(){if(gb){if(ra)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),wb=function(a,b){var d=m(a),e=parseInt(d.width)-parseInt(d.paddingLeft)-parseInt(d.paddingRight)-parseInt(d.borderLeftWidth)-parseInt(d.borderRightWidth),g=ca(a,0,b);a=ca(a,1,b);var h=g&&m(g);b=a&&m(a);var l=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+C(g).width,v=b&&parseInt(b.marginLeft)+
parseInt(b.marginRight)+C(a).width;return"flex"===d.display?"column"===d.flexDirection||"column-reverse"===d.flexDirection?"vertical":"horizontal":"grid"===d.display?1>=d.gridTemplateColumns.split(" ").length?"vertical":"horizontal":g&&h["float"]&&"none"!==h["float"]?(d="left"===h["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==d?"horizontal":"vertical"):g&&("block"===h.display||"flex"===h.display||"table"===h.display||"grid"===h.display||l>=e&&"none"===d[Eb]||a&&"none"===d[Eb]&&l+v>e)?"vertical":
"horizontal"},Kb=function(a,b,d){var e=d?a.left:a.top,g=d?a.right:a.bottom;a=d?a.width:a.height;var h=d?b.left:b.top,l=d?b.right:b.bottom;b=d?b.width:b.height;return e===h||g===l||e+a/2===h+b/2},Lb=function(a,b){var d;$a.some(function(e){var g=e[oa].options.emptyInsertThreshold;if(g&&!t(e)){var h=C(e),l=b>=h.top-g&&b<=h.bottom+g;if(a>=h.left-g&&a<=h.right+g&&l)return d=e}});return d},xb=function(a){function b(g,h){return function(l,v,y,D){var I=l.options.group.name&&v.options.group.name&&l.options.group.name===
v.options.group.name;if(null==g&&(h||I))return!0;if(null==g||!1===g)return!1;if(h&&"clone"===g)return g;if("function"===typeof g)return b(g(l,v,y,D),h)(l,v,y,D);l=(h?l:v).options.group.name;return!0===g||"string"===typeof g&&g===l||g.join&&-1<g.indexOf(l)}}var d={},e=a.group;e&&"object"==U(e)||(e={name:e});d.name=e.name;d.checkPull=b(e.pull,!0);d.checkPut=b(e.put);d.revertClone=e.revertClone;a.group=d},Ab=function(){!Fb&&N&&m(N,"display","none")},Bb=function(){!Fb&&N&&m(N,"display","")};gb&&!zb&&
document.addEventListener("click",function(a){if(eb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),eb=!1},!0);var Ha=function(a){if(u){a=a.touches?a.touches[0]:a;var b=Lb(a.clientX,a.clientY);if(b){var d={},e;for(e in a)a.hasOwnProperty(e)&&(d[e]=a[e]);d.target=d.rootEl=b;d.preventDefault=void 0;d.stopPropagation=void 0;b[oa]._onDragOver(d)}}},Mb=function(a){u&&u.parentNode[oa]._isOutsideThisEl(a.target)};c.prototype={constructor:c,
_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Ma=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,u):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,d=this.el,e=this.options,g=e.preventOnFilter,h=a.type,l=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,v=(l||a).target,y=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||v,D=e.filter;R(d);
if(!(u||/mousedown|pointerdown/.test(h)&&0!==a.button||e.disabled||y.isContentEditable||!this.nativeDraggable&&Sa&&v&&"SELECT"===v.tagName.toUpperCase()||(v=F(v,e.draggable,d,!1),v&&v.animated||cb===v))){Ja=w(v);Pa=w(v,e.draggable);if("function"===typeof D){if(D.call(this,a,v,this)){fa({sortable:b,rootEl:y,name:"filter",targetEl:v,toEl:d,fromEl:d});ma("filter",b,{evt:a});g&&a.cancelable&&a.preventDefault();return}}else if(D&&(D=D.split(",").some(function(I){if(I=F(y,I.trim(),d,!1))return fa({sortable:b,
rootEl:I,name:"filter",targetEl:v,fromEl:d,toEl:d}),ma("filter",b,{evt:a}),!0}))){g&&a.cancelable&&a.preventDefault();return}e.handle&&!F(y,e.handle,d,!1)||this._prepareDragStart(a,l,v)}}},_prepareDragStart:function(a,b,d){var e=this,g=e.el,h=e.options,l=g.ownerDocument;if(d&&!u&&d.parentNode===g){var v=C(d);W=g;u=d;Y=u.parentNode;Fa=u.nextSibling;cb=d;db=h.group;c.dragged=u;Ga={target:u,clientX:(b||a).clientX,clientY:(b||a).clientY};Cb=Ga.clientX-v.left;Db=Ga.clientY-v.top;this._lastX=(b||a).clientX;
this._lastY=(b||a).clientY;u.style["will-change"]="all";d=function(){ma("delayEnded",e,{evt:a});c.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!yb&&e.nativeDraggable&&(u.draggable=!0),e._triggerDragStart(a,b),fa({sortable:e,name:"choose",originalEvent:a}),G(u,h.chosenClass,!0))};h.ignore.split(",").forEach(function(y){r(u,y.trim(),k)});M(l,"dragover",Ha);M(l,"mousemove",Ha);M(l,"touchmove",Ha);M(l,"mouseup",e._onDrop);M(l,"touchend",e._onDrop);M(l,"touchcancel",e._onDrop);yb&&this.nativeDraggable&&
(this.options.touchStartThreshold=4,u.draggable=!0);ma("delayStart",this,{evt:a});!h.delay||h.delayOnTouchOnly&&!b||this.nativeDraggable&&(Qa||ra)?d():c.eventCanceled?this._onDrop():(M(l,"mouseup",e._disableDelayedDrag),M(l,"touchend",e._disableDelayedDrag),M(l,"touchcancel",e._disableDelayedDrag),M(l,"mousemove",e._delayedDragTouchMoveHandler),M(l,"touchmove",e._delayedDragTouchMoveHandler),h.supportPointer&&M(l,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(d,h.delay))}},
_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){u&&k(u);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;K(a,"mouseup",this._disableDelayedDrag);K(a,"touchend",this._disableDelayedDrag);
K(a,"touchcancel",this._disableDelayedDrag);K(a,"mousemove",this._delayedDragTouchMoveHandler);K(a,"touchmove",this._delayedDragTouchMoveHandler);K(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?M(document,"pointermove",this._onTouchMove):b?M(document,"touchmove",this._onTouchMove):M(document,"mousemove",this._onTouchMove):(M(u,"dragend",this),M(W,"dragstart",this._onDragStart));
try{document.selection?ha(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(d){}},_dragStarted:function(a,b){La=!1;if(W&&u){ma("dragStarted",this,{evt:b});this.nativeDraggable&&M(document,"dragover",Mb);var d=this.options;!a&&G(u,d.dragClass,!1);G(u,d.ghostClass,!0);c.active=this;a&&this._appendGhost();fa({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(va){this._lastX=va.clientX;this._lastY=va.clientY;Ab();for(var a=
document.elementFromPoint(va.clientX,va.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(va.clientX,va.clientY);if(a===b)break;b=a}u.parentNode[oa]._isOutsideThisEl(a);if(b){do{if(b[oa]){var d=void 0;if((d=b[oa]._onDragOver({clientX:va.clientX,clientY:va.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=b}while(b=b.parentNode)}Bb()}},_onTouchMove:function(a){if(Ga){var b=this.options,d=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var g=N&&H(N,!0),
h=N&&g&&g.a,l=N&&g&&g.d,v=Va&&ka&&da(ka);h=(b.clientX-Ga.clientX+e.x)/(h||1)+(v?v[0]-ob[0]:0)/(h||1);e=(b.clientY-Ga.clientY+e.y)/(l||1)+(v?v[1]-ob[1]:0)/(l||1);if(!c.active&&!La){if(d&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<d)return;this._onDragStart(a,!0)}N&&(g?(g.e+=h-(mb||0),g.f+=e-(nb||0)):g={a:1,b:0,c:0,d:1,e:h,f:e},d="matrix(".concat(g.a,",").concat(g.b,",").concat(g.c,",").concat(g.d,",").concat(g.e,",").concat(g.f,")"),m(N,"webkitTransform",d),m(N,"mozTransform",
d),m(N,"msTransform",d),m(N,"transform",d),mb=h,nb=e,va=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!N){var a=this.options.fallbackOnBody?document.body:W,b=C(u,!0,Va,!0,a),d=this.options;if(Va){for(ka=a;"static"===m(ka,"position")&&"none"===m(ka,"transform")&&ka!==document;)ka=ka.parentNode;ka!==document.body&&ka!==document.documentElement?(ka===document&&(ka=B()),b.top+=ka.scrollTop,b.left+=ka.scrollLeft):ka=B();ob=da(ka)}N=u.cloneNode(!0);G(N,d.ghostClass,!1);G(N,d.fallbackClass,
!0);G(N,d.dragClass,!0);m(N,"transition","");m(N,"transform","");m(N,"box-sizing","border-box");m(N,"margin",0);m(N,"top",b.top);m(N,"left",b.left);m(N,"width",b.width);m(N,"height",b.height);m(N,"opacity","0.8");m(N,"position",Va?"absolute":"fixed");m(N,"zIndex","100000");m(N,"pointerEvents","none");c.ghost=N;a.appendChild(N);m(N,"transform-origin",Cb/parseInt(N.style.width)*100+"% "+Db/parseInt(N.style.height)*100+"%")}},_onDragStart:function(a,b){var d=this,e=a.dataTransfer,g=d.options;ma("dragStart",
this,{evt:a});c.eventCanceled?this._onDrop():(ma("setupClone",this),c.eventCanceled||(X=Za(u),X.removeAttribute("id"),X.draggable=!1,X.style["will-change"]="",this._hideClone(),G(X,this.options.chosenClass,!1),c.clone=X),d.cloneId=ha(function(){ma("clone",d);c.eventCanceled||(d.options.removeCloneOnHide||W.insertBefore(X,u),d._hideClone(),fa({sortable:d,name:"clone"}))}),!b&&G(u,g.dragClass,!0),b?(eb=!0,d._loopId=setInterval(d._emulateDragOver,50)):(K(document,"mouseup",d._onDrop),K(document,"touchend",
d._onDrop),K(document,"touchcancel",d._onDrop),e&&(e.effectAllowed="move",g.setData&&g.setData.call(d,e,u)),M(document,"drop",d),m(u,"transform","translateZ(0)")),La=!0,d._dragStartId=ha(d._dragStarted.bind(d,b,a)),M(document,"selectstart",d),Wa=!0,Sa&&m(document.body,"user-select","none"))},_onDragOver:function(a){function b(Da,hb){ma(Da,T,x({evt:a,isOwner:ea,axis:ta?"vertical":"horizontal",revert:y,dragRect:wa,targetRect:v,canSort:aa,fromSortable:ja,target:l,completed:e,onMove:function(Gb,Nb){return f(W,
h,u,wa,Gb,C(Gb),a,Nb)},changed:g},hb))}function d(){b("dragOverAnimationCapture");T.captureAnimationState();T!==ja&&ja.captureAnimationState()}function e(Da){b("dragOverCompleted",{insertion:Da});Da&&(ea?P._hideClone():P._showClone(T),T!==ja&&(G(u,ia?ia.options.ghostClass:P.options.ghostClass,!1),G(u,D.ghostClass,!0)),ia!==T&&T!==c.active?ia=T:T===c.active&&ia&&(ia=null),ja===T&&(T._ignoreWhileAnimating=l),T.animateAll(function(){b("dragOverAnimationComplete");T._ignoreWhileAnimating=null}),T!==ja&&
(ja.animateAll(),ja._ignoreWhileAnimating=null));if(l===u&&!u.animated||l===h&&!l.animated)Ma=null;D.dragoverBubble||a.rootEl||l===document||(u.parentNode[oa]._isOutsideThisEl(a.target),!Da&&Ha(a));!D.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return sa=!0}function g(){na=w(u);Aa=w(u,D.draggable);fa({sortable:T,name:"change",toEl:h,newIndex:na,newDraggableIndex:Aa,originalEvent:a})}var h=this.el,l=a.target,v,y,D=this.options,I=D.group,P=c.active,ea=db===I,aa=D.sort,ja=ia||P,T=this,sa=
!1;if(!kb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();l=F(l,D.draggable,h,!0);b("dragOver");if(c.eventCanceled)return sa;if(u.contains(a.target)||l.animated&&l.animatingX&&l.animatingY||T._ignoreWhileAnimating===l)return e(!1);eb=!1;if(P&&!D.disabled&&(ea?aa||(y=Y!==W):ia===this||(this.lastPutMode=db.checkPull(this,P,u,a))&&I.checkPut(this,P,u,a))){var ta="vertical"===this._getDirection(a,l);var wa=C(u);b("dragOverValid");if(c.eventCanceled)return sa;if(y)return Y=W,d(),this._hideClone(),
b("revert"),c.eventCanceled||(Fa?W.insertBefore(u,Fa):W.appendChild(u)),e(!0);I=t(h,D.draggable);if(!I||J(a,ta,this)&&!I.animated){if(I===u)return e(!1);I&&h===a.target&&(l=I);l&&(v=C(l));if(!1!==f(W,h,u,wa,l,v,a,!!l))return d(),I&&I.nextSibling?h.insertBefore(u,I.nextSibling):h.appendChild(u),Y=h,g(),e(!0)}else if(I&&A(a,ta,this)){var xa=ca(h,0,D,!0);if(xa===u)return e(!1);l=xa;v=C(l);if(!1!==f(W,h,u,wa,l,v,a,!1))return d(),h.insertBefore(u,xa),Y=h,g(),e(!0)}else if(l.parentNode===h){v=C(l);var S=
0;S=u.parentNode!==h;var la=!Kb(u.animated&&u.toRect||wa,l.animated&&l.toRect||v,ta);I=ta?"top":"left";var za=V(l,"top","top")||V(u,"top","top"),ib=za?za.scrollTop:void 0;Ma!==l&&(xa=v[I],Ta=!1,fb=!la&&D.invertSwap||S);S=Q(a,l,v,ta,la?1:D.swapThreshold,null==D.invertedSwapThreshold?D.swapThreshold:D.invertedSwapThreshold,fb,Ma===l);if(0!==S){la=w(u);do{la-=S;var ya=Y.children[la]}while(ya&&("none"===m(ya,"display")||ya===N))}if(0===S||ya===l)return e(!1);Ma=l;Ua=S;ya=l.nextElementSibling;la=!1;la=
1===S;S=f(W,h,u,wa,l,v,a,la);if(!1!==S){if(1===S||-1===S)la=1===S;kb=!0;setTimeout(p,30);d();la&&!ya?h.appendChild(u):l.parentNode.insertBefore(u,la?ya:l);za&&Ya(za,0,ib-za.scrollTop);Y=u.parentNode;void 0===xa||fb||(ab=Math.abs(xa-C(l)[I]));g();return e(!0)}}if(h.contains(u))return e(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){K(document,"mousemove",this._onTouchMove);K(document,"touchmove",this._onTouchMove);K(document,"pointermove",this._onTouchMove);K(document,"dragover",
Ha);K(document,"mousemove",Ha);K(document,"touchmove",Ha)},_offUpEvents:function(){var a=this.el.ownerDocument;K(a,"mouseup",this._onDrop);K(a,"touchend",this._onDrop);K(a,"pointerup",this._onDrop);K(a,"touchcancel",this._onDrop);K(document,"selectstart",this)},_onDrop:function(a){var b=this.el,d=this.options;na=w(u);Aa=w(u,d.draggable);ma("drop",this,{evt:a});Y=u&&u.parentNode;na=w(u);Aa=w(u,d.draggable);if(!c.eventCanceled&&(Ta=fb=La=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),
clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(K(document,"drop",this),K(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Sa&&m(document.body,"user-select",""),m(u,"transform",""),a&&(Wa&&(a.cancelable&&a.preventDefault(),!d.dropBubble&&a.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(W===Y||ia&&"clone"!==ia.lastPutMode)&&X&&X.parentNode&&X.parentNode.removeChild(X),u&&(this.nativeDraggable&&K(u,"dragend",this),k(u),u.style["will-change"]=
"",Wa&&!La&&G(u,ia?ia.options.ghostClass:this.options.ghostClass,!1),G(u,this.options.chosenClass,!1),fa({sortable:this,name:"unchoose",toEl:Y,newIndex:null,newDraggableIndex:null,originalEvent:a}),W!==Y?(0<=na&&(fa({rootEl:Y,name:"add",toEl:Y,fromEl:W,originalEvent:a}),fa({sortable:this,name:"remove",toEl:Y,originalEvent:a}),fa({rootEl:Y,name:"sort",toEl:Y,fromEl:W,originalEvent:a}),fa({sortable:this,name:"sort",toEl:Y,originalEvent:a})),ia&&ia.save()):na!==Ja&&0<=na&&(fa({sortable:this,name:"update",
toEl:Y,originalEvent:a}),fa({sortable:this,name:"sort",toEl:Y,originalEvent:a})),c.active)))){if(null==na||-1===na)na=Ja,Aa=Pa;fa({sortable:this,name:"end",toEl:Y,originalEvent:a});this.save()}this._nulling()},_nulling:function(){ma("nulling",this);W=u=Y=N=Fa=X=cb=Ca=Ga=va=Wa=na=Aa=Ja=Pa=Ma=Ua=ia=db=c.dragged=c.ghost=c.clone=c.active=null;bb.forEach(function(a){a.checked=!0});bb.length=mb=nb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":u&&
(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,d=this.el.children,e=0,g=d.length,h=this.options;e<g;e++)if(b=d[e],F(b,h.draggable,this.el,!1)){var l=a,v=l.push,y;if(!(y=b.getAttribute(h.dataIdAttr))){b=b.tagName+b.className+b.src+b.href+b.textContent;y=b.length;for(var D=0;y--;)D+=b.charCodeAt(y);y=D.toString(36)}v.call(l,y)}return a},sort:function(a,b){var d=
{},e=this.el;this.toArray().forEach(function(g,h){h=e.children[h];F(h,this.options.draggable,e,!1)&&(d[g]=h)},this);b&&this.captureAnimationState();a.forEach(function(g){d[g]&&(e.removeChild(d[g]),e.appendChild(d[g]))});b&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return F(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var d=this.options;if(void 0===b)return d[a];var e=Ra.modifyOption(this,a,b);d[a]="undefined"!==typeof e?
e:b;"group"===a&&xb(d)},destroy:function(){ma("destroy",this);var a=this.el;a[oa]=null;K(a,"mousedown",this._onTapStart);K(a,"touchstart",this._onTapStart);K(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(K(a,"dragover",this),K(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();$a.splice($a.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Ca||(ma("hideClone",
this),c.eventCanceled||(m(X,"display","none"),this.options.removeCloneOnHide&&X.parentNode&&X.parentNode.removeChild(X),Ca=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Ca&&(ma("showClone",this),c.eventCanceled||(u.parentNode!=W||this.options.group.revertClone?Fa?W.insertBefore(X,Fa):W.appendChild(X):W.insertBefore(X,u),this.options.group.revertClone&&this.animate(u,X),m(X,"display",""),Ca=!1))}};gb&&M(document,"touchmove",function(a){(c.active||La)&&a.cancelable&&a.preventDefault()});
c.utils={on:M,off:K,css:m,find:r,is:function(a,b){return!!F(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a},throttle:Z,closest:F,toggleClass:G,clone:Za,index:w,nextTick:ha,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:wb,getChild:ca};c.get=function(a){return a[oa]};c.mount=function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));
e.utils&&(c.utils=x(x({},c.utils),e.utils));Ra.mount(e)})};c.create=function(a,b){return new c(a,b)};c.version="1.15.0";var ba=[],Xa,pb,qb=!1,rb,sb,jb,Na,tb=Z(function(a,b,d,e){if(b.scroll){var g=(a.touches?a.touches[0]:a).clientX,h=(a.touches?a.touches[0]:a).clientY,l=b.scrollSensitivity,v=b.scrollSpeed,y=B(),D=!1;if(pb!==d){pb=d;pa();Xa=b.scroll;var I=b.scrollFn;!0===Xa&&(Xa=qa(d,!0))}d=0;var P=Xa;do{var ea=P,aa=C(ea),ja=aa.top,T=aa.bottom,sa=aa.left,ta=aa.right,wa=aa.width;aa=aa.height;var xa=
void 0,S=void 0,la=ea.scrollWidth,za=ea.scrollHeight;S=m(ea);var ib=ea.scrollLeft,ya=ea.scrollTop;ea===y?(xa=wa<la&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),S=aa<za&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(xa=wa<la&&("auto"===S.overflowX||"scroll"===S.overflowX),S=aa<za&&("auto"===S.overflowY||"scroll"===S.overflowY));sa=xa&&(Math.abs(ta-g)<=l&&ib+wa<la)-(Math.abs(sa-g)<=l&&!!ib);ja=S&&(Math.abs(T-h)<=l&&ya+aa<za)-(Math.abs(ja-h)<=l&&
!!ya);if(!ba[d])for(T=0;T<=d;T++)ba[T]||(ba[T]={});if(ba[d].vx!=sa||ba[d].vy!=ja||ba[d].el!==ea)if(ba[d].el=ea,ba[d].vx=sa,ba[d].vy=ja,clearInterval(ba[d].pid),0!=sa||0!=ja)D=!0,ba[d].pid=setInterval(function(){e&&0===this.layer&&c.active._onTouchMove(jb);var Da=ba[this.layer].vy?ba[this.layer].vy*v:0,hb=ba[this.layer].vx?ba[this.layer].vx*v:0;"function"===typeof I&&"continue"!==I.call(c.dragged.parentNode[oa],hb,Da,a,jb,ba[this.layer].el)||Ya(ba[this.layer].el,hb,Da)}.bind({layer:d}),24);d++}while(b.bubbleScroll&&
P!==y&&(P=qa(P,!1)));qb=D}},30),Hb=function(a){var b=a.originalEvent,d=a.putSortable,e=a.dragEl,g=a.activeSortable,h=a.dispatchSortableEvent,l=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(g=d||g,l(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),g&&!g.el.contains(b)&&(h("spill"),this.onSpill({dragEl:e,putSortable:d})))};ua.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=
a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var d=ca(this.sortable.el,this.startIndex,this.options);d?this.sortable.el.insertBefore(b,d):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Hb};O(ua,{pluginName:"revertOnSpill"});Ba.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Hb};O(Ba,{pluginName:"removeOnSpill"});
c.mount(new function(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?M(document,"dragover",this._handleAutoScroll):this.options.supportPointer?M(document,"pointermove",this._handleFallbackAutoScroll):b.touches?M(document,"touchmove",this._handleFallbackAutoScroll):
M(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):(K(document,"pointermove",this._handleFallbackAutoScroll),K(document,"touchmove",this._handleFallbackAutoScroll),K(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Na);pa();clearTimeout(Oa);Oa=void 0},nulling:function(){jb=
pb=Xa=qb=Na=rb=sb=null;ba.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,d){var e=this,g=(b.touches?b.touches[0]:b).clientX,h=(b.touches?b.touches[0]:b).clientY,l=document.elementFromPoint(g,h);jb=b;if(d||this.options.forceAutoScrollFallback||Qa||ra||Sa){tb(b,this.options,l,d);var v=qa(l,!0);!qb||Na&&g===rb&&h===sb||(Na&&clearInterval(Na),Na=setInterval(function(){var y=qa(document.elementFromPoint(g,h),!0);y!==v&&(v=y,pa());tb(b,e.options,
y,d)},10),rb=g,sb=h)}else this.options.bubbleScroll&&qa(l,!0)!==B()?tb(b,this.options,qa(l,!1),!1):pa()}};return O(a,{pluginName:"scroll",initializeByDefault:!0})});c.mount(Ba,ua);z.Sortable=c})},"*noref":1}});
define("require ../chunks/tslib.es6 ../core/Collection ../core/events ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/componentsUtils ./support/globalCss ./support/legacyIcon ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(z,
q,x,U,O,E,L,M,K,n,F,G,m,H,r,B,C,V,ca,t,w,da,qa){function Ia(c){const {actionsOpen:f,children:k}=c;f&&(c.actionsOpen=!1);k.forEach(p=>Ia(p))}function Z(c){return c?.["data-item"]}const Ya=x.ofType(m);var Za=C.legacyIcon.layers;const Ea={exclusive:"exclusive",inherited:"inherited",independent:"independent"},fa={statusIndicators:!0,errors:!1};x=class extends F{constructor(c,f){super(c,f);this._sortableNodes=new Map;this._sortableMap=new Map;this._focusSortUid=null;this._tooltipReferenceMap=new Map;this.visibleItems=
null;this.iconClass=Za;this.messagesCommon=this.messages=this.listItemCanReceiveFunction=this.listItemCanGiveFunction=this.icon=null;this.selectionEnabled=this.multipleSelectionEnabled=!1;this.selectedItems=new Ya;this.style="classic";this.viewModel=new G;this.visibleElements={...fa};this._onSortableSort=({to:k,from:p,item:A,newIndex:J})=>{p&&k&&(p===k?this._sortLayers(this._sortableMap.get(p.dataset.group)):this._moveLayerFromChildList({to:k,from:p,item:A,newIndex:J}))};this._sortableCanSort=(k,
p)=>!(!k.el.dataset.group||!p.el.dataset.group);this._sortableCanPull=(k,p,A)=>{const {listItemCanGiveFunction:J}=this;A=Z(A);const Q=Z(p.el),R=Z(k.el);A={selected:A,from:Q,to:R};return this._sortableCanSort(k,p)&&"function"===typeof J?J.call(null,A):!0};this._sortableCanPut=(k,p,A)=>{const {listItemCanReceiveFunction:J}=this;A=Z(A);const Q=Z(p.el),R=Z(k.el);A={selected:A,from:Q,to:R};return this._sortableCanSort(k,p)&&"function"===typeof J?J.call(null,A):!0};this._onSortableEnd=({oldIndex:k,from:p,
to:A,item:J})=>{p!==A&&p.insertBefore(J,p.children[k])}}initialize(){const c=this.operationalItems;this._setVisibleItems(c);this.addHandles([O.on(()=>this.operationalItems,"change",()=>this._itemsChanged(c)),O.watch(()=>this.visibleElements,()=>this._itemsChanged(c)),O.watch(()=>this.selectionEnabled,()=>this._toggleAllSorting(),O.initial)])}loadDependencies(){return r.loadCalciteComponents({icon:()=>new Promise((c,f)=>z(["../chunks/calcite-icon"],c,f)),tooltip:()=>new Promise((c,f)=>z(["../chunks/calcite-tooltip"],
c,f))})}destroy(){this._destroySortables();this._tooltipReferenceMap.clear()}get label(){return this.messages?.widgetLabel??""}set label(c){this._overrideIfSome("label",c)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(c){this.viewModel.listItemCreatedFunction=c}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(c){this.viewModel.operationalItems=c}get view(){return this.viewModel.view}set view(c){this.viewModel.view=
c}castVisibleElements(c){return{...fa,...c}}triggerAction(c,f){return this.viewModel.triggerAction(c,f)}render(){const {visibleItems:c,style:f}=this;var k=this.viewModel?.state;k={["esri-layer-list--new-ui"]:"modern"===f,[B.globalCss.hidden]:"loading"===k,[B.globalCss.disabled]:"disabled"===k};const p=this._renderItemTooltips(),A=this._renderItems();return w.tsx("div",{class:this.classes("esri-layer-list",B.globalCss.widget,B.globalCss.panel,k)},c.length?[p,A]:this._renderNoItems())}_renderItemTooltip(c){const {_tooltipReferenceMap:f,
messages:k}=this;return c?w.tsx("calcite-tooltip",{referenceElement:f.get(c.uid)},k.layerIncompatibleTooltip):null}_renderItemTooltipNodes(c){const {incompatible:f,children:k}=c;return[f?this._renderItemTooltip(c):null,...(!f&&k?k.toArray().map(p=>this._renderItemTooltipNodes(p)):[])]}_renderItemTooltips(){return this.visibleItems.toArray().map(c=>this._renderItemTooltipNodes(c))??[]}_renderNoItems(){return w.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)}_renderItems(){const {visibleItems:c,
selectionEnabled:f,messages:k}=this;return w.tsx("ul",{afterCreate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,afterUpdate:this._sortNodeCreated,"aria-label":k.widgetLabel,bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent"),"data-group":"root",role:f?"listbox":void 0},c.map(p=>this._renderItem(p,null)).toArray())}_renderActionsMenuIcon(c,f){const {messagesCommon:k}=this;return w.tsx("div",{"aria-controls":f,"aria-label":k.options,
bind:this,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:c.actionsOpen}),"data-item":c,key:"actions-menu-toggle",onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,role:"button",tabIndex:0,title:k.options},w.tsx("span",{"aria-hidden":"true",class:C.legacyIcon.handleHorizontal}))}_renderActionsMenu(c,f,k,p){var {panel:A}=c;A=A&&A.visible?this._renderPanelButton(A):null;const J=(f=1===k&&this._getSingleActionButton(f))?
this._renderAction({item:c,action:f,singleAction:!0}):null;return(c=!f&&k?this._renderActionsMenuIcon(c,p):null)||A||f?w.tsx("div",{class:"esri-layer-list__item-actions-menu",key:"actions-menu"},A,J,c):null}_renderChildList(c,f){const {selectionEnabled:k}=this,{visibilityMode:p,children:A}=c,J=this._hasChildren(c),Q=!J&&k&&"group"===c.layer?.type,{exclusive:R,inherited:ha}=Ea,pa={["esri-layer-list__list--empty"]:!J,["esri-layer-list__list--exclusive"]:p===R,["esri-layer-list__list--inherited"]:p===
ha,["esri-layer-list__list--independent"]:p!==ha&&p!==R},ua={["esri-layer-list__list-empty-state"]:!0,["esri-layer-list__list-empty-state--drag-enabled"]:k};return J||Q?J?w.tsx("ul",{afterCreate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,afterUpdate:this._sortNodeCreated,"aria-expanded":c.open?"true":"false",bind:this,class:this.classes("esri-layer-list__list",pa),"data-group":c.uid,"data-item":c,hidden:c.open||Q?null:!0,id:f,key:"list-items",role:k?"listbox":p===R?"radiogroup":"group"},
A?.map(Ba=>this._renderItem(Ba,c)).toArray()):w.tsx("div",{afterCreate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,afterUpdate:this._sortNodeCreated,bind:this,class:this.classes(ua),"data-group":c.uid,"data-item":c,id:f,key:"list-items"},this.messages.noItemsToDisplay):null}_renderChildrenToggle(c,f){var {messagesCommon:k}=this;const p=this._hasChildren(c),A={["esri-layer-list__child-toggle--open"]:c.open};k=c.open?k.collapse:k.expand;return p?w.tsx("span",{"aria-controls":f,"aria-label":k,
class:this.classes("esri-layer-list__child-toggle",A),"data-item":c,key:"toggle-children",onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,role:"button",tabIndex:0,title:k},w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed",C.legacyIcon.rightTriangleArrow)}),w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened",C.legacyIcon.downArrow)}),w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl",
C.legacyIcon.leftTriangleArrow)})):null}_renderItemMessage(c){return c.error?w.tsx("div",{class:"esri-layer-list__item-message",key:"esri-layer-list__error",role:"alert"},w.tsx("span",{"aria-hidden":"true",class:C.legacyIcon.noticeTriangle}),this.messages.layerError):c.incompatible?w.tsx("div",{class:"esri-layer-list__item-message",key:"esri-layer-list__incompatible",role:"alert"},w.tsx("span",{afterCreate:f=>this._setTooltipReference(f,c),"aria-hidden":"true",bind:this,class:C.legacyIcon.noticeTriangle,
tabIndex:0}),this.messages.layerIncompatible):null}_renderItemContent(c,f,k){var {id:p}=this,A=`${p}_${c.uid}`;p=`${A}_actions`;A=`${A}__list`;const {panel:J}=c,Q=this._filterActions(c.actionsSections),R=this._countActions(Q);return[w.tsx("div",{class:"esri-layer-list__item-container",key:"list-item-container"},this._renderChildrenToggle(c,A),this._renderLabel(c,f,k),this._renderActionsMenu(c,Q,R,p)),this._renderItemMessage(c),R?this._renderActionsSections(c,Q,p):null,J&&J.open&&!J.disabled?J.render():
null,this._renderChildList(c,A)]}_renderItem(c,f){const {style:k,id:p,selectionEnabled:A,selectedItems:J}=this,Q=`${`${p}_${c.uid}`}__title`;var R=this._hasMessage(c);R={["esri-layer-list__item--has-children"]:this._hasChildren(c),["esri-layer-list__item--has-message"]:!!R,["esri-layer-list__item--invisible"]:"modern"===k&&!c.visible,["esri-layer-list__item--invisible-at-scale"]:!c.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:A};if(A){const ha={["data-layer-uid"]:c.layer?.uid,["data-sort-filter"]:(!c.sortable).toString()};
return w.tsx("li",{afterCreate:this._focusListItem,afterUpdate:this._focusListItem,"aria-labelledby":Q,"aria-selected":H.findSelectedItem(c,J)?"true":"false",bind:this,class:this.classes("esri-layer-list__item",R),"data-group":f?f.uid:"root","data-item":c,key:`item-with-selection-${c.uid}`,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,role:"option",tabIndex:0,...ha},this._renderItemContent(c,f,Q))}return w.tsx("li",{afterCreate:this._focusListItem,afterUpdate:this._focusListItem,
"aria-labelledby":Q,bind:this,class:this.classes("esri-layer-list__item",R),key:`item-no-selection-${c.uid}`},this._renderItemContent(c,f,Q))}_renderConnectionIcon(c){({connectionStatus:c}=c);return null!=c?w.tsx("calcite-icon",{icon:"connected"===c?"beacon":"offline",scale:"s"}):null}_renderItemStatus(c,f){var {visibleElements:k}=this;if(!k.statusIndicators)return null;const {connectionStatus:p,publishing:A,updating:J}=c;k=!!p;return w.tsx("span",{class:this.classes({["esri-layer-list__status-indicator"]:!0,
["esri-layer-list__publishing"]:A,["esri-layer-list__updating"]:J&&!f,["esri-layer-list__connection-status"]:k,["esri-layer-list__connection-status--connected"]:k&&"connected"===p}),key:"layer-item-status"},this._renderConnectionIcon(c))}_renderItemTitle(c,f){const {messages:k}=this;if(!c)return null;const p=c.title||k.untitledLayer;c=c.visibleAtCurrentScale?p:`${p} (${k.layerInvisibleAtScale})`;return w.tsx("span",{"aria-label":c,class:"esri-layer-list__item-title",id:f,key:"layer-title-container",
title:c},p)}_renderItemToggleIcon({visible:c},f){var {style:k}=this;const {exclusive:p}=Ea;k="modern"===k;f=f?.visibilityMode===p;return w.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-layer-list__item-toggle-icon"]:k,["esri-layer-list__item-toggle-icon"]:k&&!f,["esri-layer-list__item-radio-icon"]:k&&f,[C.legacyIcon.radioChecked]:f&&c,[C.legacyIcon.radioUnchecked]:f&&!c,[C.legacyIcon.visible]:!f&&c,[C.legacyIcon.nonVisible]:!f&&!c}),key:"item-toggle-icon"})}_renderItemToggle(c,f,k){const {selectionEnabled:p,
messages:A}=this,{exclusive:J}=Ea,Q=f?.visibilityMode;return p?w.tsx("span",{"aria-checked":c.visible?"true":"false","aria-labelledby":k,bind:this,class:"esri-layer-list__item-toggle","data-item":c,"data-parent-visibility":Q,key:"item-toggle-selection-enabled",onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,role:Q===J?"radio":"switch",tabIndex:0,title:A.layerVisibility},this._renderItemToggleIcon(c,f)):w.tsx("span",{class:"esri-layer-list__item-toggle",key:"item-toggle"},this._renderItemToggleIcon(c,
f))}_renderLabel(c,f,k){const {selectionEnabled:p,style:A,messages:J}=this,{inherited:Q,exclusive:R}=Ea,ha=f?.visibilityMode;var pa=ha===R?"radio":"switch",ua=this._renderItemTitle(c,k);const Ba=this._renderItemStatus(c,f),ra=this._renderItemToggle(c,f,k);ua="modern"===A?[ua,Ba,ra]:[ra,ua,Ba];pa=p?w.tsx("div",{class:"esri-layer-list__item-label",key:`item-label-no-selection-${c.uid}`},ua):w.tsx("div",{"aria-checked":c.visible?"true":"false","aria-labelledby":k,bind:this,class:"esri-layer-list__item-label",
"data-item":c,"data-parent-visibility":ha,key:`item-label-with-selection-${c.uid}`,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,role:pa,tabIndex:0,title:J.layerVisibility},ua);return ha===Q||c.error?w.tsx("div",{class:"esri-layer-list__item-label",key:`item-label-container-${c.uid}`},this._renderItemTitle(c,k),this._renderItemStatus(c,f)):pa}_renderPanelButton(c){const {className:f,open:k,title:p,image:A,disabled:J}=c,Q=A||f?f:C.legacyIcon.defaultAction,R=this._getIconImageStyles(c),
ha={["esri-layer-list__item-actions-menu-item--active"]:k&&!J},pa={["esri-layer-list__item-action-image"]:!!R["background-image"],[B.globalCss.disabledElement]:c.disabled};Q&&(pa[Q]=!!Q);return w.tsx("div",{"aria-disabled":c.disabled.toString(),"aria-label":p,bind:this,class:this.classes("esri-layer-list__item-actions-menu-item",ha),"data-panel":c,key:`panel-${c.uid}`,onclick:this._triggerPanel,onkeydown:this._triggerPanel,role:"button",tabIndex:c.disabled?void 0:0,title:p},w.tsx("span",{class:this.classes(pa),
styles:R}))}_renderActionsSections(c,f,k){f=f.toArray().map((p,A)=>w.tsx("ul",{class:"esri-layer-list__item-actions-list",key:`${c}-action-section-${A}`},this._renderActionSection(c,p)));return w.tsx("div",{"aria-expanded":c.actionsOpen?"true":"false",class:"esri-layer-list__item-actions",hidden:c.actionsOpen?null:!0,id:k,key:"actions-section",role:"group"},f)}_renderActionSection(c,f){return(f&&f.toArray()).map(k=>this._renderAction({item:c,action:k}))}_renderActionIcon(c){const {active:f,className:k}=
c,p=this._getIconImageStyles(c);c="button"!==c.type||c.image||k?k:C.legacyIcon.defaultAction;const A={["esri-layer-list__item-action-image"]:!f&&!!p["background-image"],[C.legacyIcon.loadingIndicator]:f,[B.globalCss.rotating]:f};c&&!f&&(A[c]=!0);return w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",A),key:"action-icon",styles:p})}_renderActionTitle(c,f){return f?null:w.tsx("span",{class:"esri-layer-list__item-action-title",key:"action-title"},c)}_renderAction(c){const {item:f,
action:k,singleAction:p}=c,{active:A,disabled:J,title:Q}=k;c={["esri-layer-list__item-actions-menu-item"]:p&&"button"===k.type,["esri-layer-list__item-action"]:A||!p&&"toggle"!==k.type,["esri-layer-list__action-toggle"]:!A&&"toggle"===k.type,["esri-layer-list__action-toggle--on"]:!A&&"toggle"===k.type&&k.value,[B.globalCss.disabledElement]:J};const R=[this._renderActionIcon(k),this._renderActionTitle(Q,p)];return p?w.tsx("div",{"aria-label":Q??void 0,bind:this,classes:c,"data-action":k,"data-item":f,
key:`single-action-${k.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:0,title:Q??void 0},R):w.tsx("li",{"aria-label":Q??void 0,bind:this,classes:c,"data-action":k,"data-item":f,key:`action-${k.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:0,title:Q??void 0},R)}_setTooltipReference(c,f){this._tooltipReferenceMap.set(f.uid,c);this.scheduleRender()}_hasMessage(c){return!!c.error||c.incompatible}_hasChildren(c){return!!c.children.length&&
!this._hasMessage(c)}_sortNodeRemoved(c){const {_sortableMap:f}=this;c=c.dataset.group;const k=f.get(c);k&&k.destroy();f.delete(c)}_destroySortables(){const {_sortableMap:c,_sortableNodes:f}=this;c.forEach(k=>k&&k.destroy());c.clear();f.clear()}_moveLayerFromChildList({to:c,from:f,item:k,newIndex:p}){k=Z(k);c=Z(c);f=Z(f);this.viewModel.moveListItem(k,f,c,p)}_sortLayers(c){if(c){var f=Z(c.el);c=c.toArray();f?H.sortChildLayersToIds(f,c):H.sortLayersToIds(this.view?.map?.layers,c)}}_toggleSorting(c,
f){const {_sortableMap:k,selectionEnabled:p}=this,A=k.get(f);var J=Z(c);J=("root"===f||J?.childrenSortable&&H.canSortSublayers(J))&&p;A?A.option("disabled",!J):J&&(c=qa.Sortable.create(c,{dataIdAttr:"data-layer-uid",group:{name:f,pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!J,chosenClass:"esri-layer-list--chosen"}),k.set(f,c))}_toggleAllSorting(){this._sortableNodes.forEach((c,
f)=>this._toggleSorting(c,f))}_sortNodeCreated(c){const f=c.dataset.group;f&&(this._sortableNodes.set(f,c),this._toggleSorting(c,f))}_setVisibleItems(c){this.visibleItems=c.filter(f=>!f.hidden&&(this.visibleElements.errors||!f.error))}_getSingleActionButton(c){return c.reduce(f=>f).filter(f=>f&&"button"===f.type).at(0)}_focusListItem(c){const {_focusSortUid:f}=this;c&&f&&Z(c)?.layer?.uid===f&&(c.focus(),this._focusSortUid=null)}_watchActionSectionChanges(c){this.addHandles(c.on("change",this.scheduleRender.bind(this)),
"action-section");c.forEach(f=>this._renderOnActionChanges(f))}_renderOnActionChanges(c){"toggle"===c.type?this.addHandles(O.watch(()=>[c?.className,c?.image,c?.id,c?.title,c?.visible,c?.value],()=>this.scheduleRender(),O.initial),"actions"):"slider"===c.type?this.addHandles(O.watch(()=>[c?.className,c?.id,c?.title,c?.visible,c?.value,c?.displayValueEnabled,c?.max,c?.min,c?.step],()=>this.scheduleRender(),O.initial),"actions"):this.addHandles(O.watch(()=>[c?.className,c?.image,c?.id,c?.title,c?.visible],
()=>this.scheduleRender(),O.initial),"actions")}_renderOnItemChanges(c){this.addHandles([O.watch(()=>[c?.actionsOpen,c?.visible,c?.open,c?.updating,c?.connectionStatus,c?.publishing,c?.title,c?.visibleAtCurrentScale,c?.error,c?.visibilityMode,c?.panel,c?.panel?.title,c?.panel?.content,c?.panel?.className,c?.sortable,c?.childrenSortable],()=>this.scheduleRender(),O.syncAndInitial),O.watch(()=>[c?.hidden,c?.error],()=>this._setVisibleItems(this.operationalItems)),c.actionsSections.on("change",()=>this.scheduleRender()),
c.children.on("change",()=>this.scheduleRender())],"items");c.children.forEach(f=>this._renderOnItemChanges(f));c.actionsSections.forEach(f=>this._watchActionSectionChanges(f))}_itemsChanged(c){this.removeHandles("items");this.removeHandles("actions");this.removeHandles("action-section");c.forEach(f=>this._renderOnItemChanges(f));this._tooltipReferenceMap.clear();this._setVisibleItems(c);this.scheduleRender()}_filterActions(c){return c.map(f=>f.filter(k=>k.visible))}_countActions(c){return c.reduce((f,
k)=>f+k.length,0)}_getIconImageStyles(c){c="esri.widgets.LayerList.ListItemPanel"===c.declaredClass||"esri.support.Action.ActionButton"===c.declaredClass||"esri.support.Action.ActionToggle"===c.declaredClass?c.image:null;return{"background-image":c?`url("${c}")`:void 0}}_selectionKeydown(c){var f=U.eventKey(c);if(["ArrowDown","ArrowUp"].includes(f)){c.stopPropagation();var k=c.currentTarget,p=Z(k),{_sortableMap:A,selectedItems:J}=this;if((k=A.get(k.dataset.group))&&p){var Q=H.findSelectedItem(p,J),
R=k.toArray();c=R.indexOf(c.target.dataset.layerUid);if(-1!==c){if("ArrowDown"===f){const ha=c+1;if(ha>=R.length)return;Q?(R.splice(ha,0,R.splice(c,1)[0]),k.sort(R),this._sortLayers(k),this._focusSortUid=p.layer?.uid):(this._focusSortUid=p.layer?.uid,this.scheduleRender())}"ArrowUp"===f&&(f=c-1,-1>=f||(Q?(R.splice(f,0,R.splice(c,1)[0]),k.sort(R),this._sortLayers(k),this._focusSortUid=p.layer?.uid):(this._focusSortUid=p.layer?.uid,this.scheduleRender())))}}}else this._toggleSelection(c)}_toggleActionsOpen(c){const f=
Z(c.currentTarget);if(f){var {actionsOpen:k}=f;(k=!k)&&this.operationalItems.forEach(p=>Ia(p));f.actionsOpen=k;c.stopPropagation()}}_triggerPanel(c){const f=c.currentTarget?.["data-panel"];c.stopPropagation();f&&!f.disabled&&(f.open=!f.open)}_triggerAction(c){var f=c.currentTarget;const k=f?.["data-action"];f=Z(f);k&&f&&("toggle"===k.type&&(k.value=!k.value),this.triggerAction(k,f),c.stopPropagation())}_toggleVisibility(c){var f=c.currentTarget;const k=f.getAttribute("data-parent-visibility");if(f=
Z(f))k===Ea.exclusive&&f.visible||(f.visible=!f.visible),c.stopPropagation()}_toggleChildrenClick(c){const f=Z(c.currentTarget);f&&(f.open=!f.open,c.stopPropagation())}_toggleSelection(c){c.stopPropagation();const {multipleSelectionEnabled:f,selectedItems:k}=this;if(c=Z(c.currentTarget)){var p=H.findSelectedItem(c,k),{length:A}=k,J=p&&1===A;f?p?k.remove?.(p):k.add(c):A&&!J?(k.removeAll(),k.add(c)):p?k.remove?.(p):k.add(c)}}get test(){return{visibleItems:this.visibleItems}}};q.__decorate([E.property()],
x.prototype,"visibleItems",void 0);q.__decorate([E.property()],x.prototype,"iconClass",void 0);q.__decorate([E.property()],x.prototype,"icon",void 0);q.__decorate([E.property()],x.prototype,"label",null);q.__decorate([E.property()],x.prototype,"listItemCanGiveFunction",void 0);q.__decorate([E.property()],x.prototype,"listItemCanReceiveFunction",void 0);q.__decorate([E.property()],x.prototype,"listItemCreatedFunction",null);q.__decorate([E.property(),ca.messageBundle("esri/widgets/LayerList/t9n/LayerList")],
x.prototype,"messages",void 0);q.__decorate([E.property(),ca.messageBundle("esri/t9n/common")],x.prototype,"messagesCommon",void 0);q.__decorate([E.property()],x.prototype,"multipleSelectionEnabled",void 0);q.__decorate([E.property()],x.prototype,"operationalItems",null);q.__decorate([E.property()],x.prototype,"selectionEnabled",void 0);q.__decorate([E.property()],x.prototype,"selectedItems",void 0);q.__decorate([E.property()],x.prototype,"style",void 0);q.__decorate([E.property()],x.prototype,"view",
null);q.__decorate([t.vmEvent("trigger-action"),E.property({type:G})],x.prototype,"viewModel",void 0);q.__decorate([E.property()],x.prototype,"visibleElements",void 0);q.__decorate([L.cast("visibleElements")],x.prototype,"castVisibleElements",null);q.__decorate([V.accessibleHandler()],x.prototype,"_toggleActionsOpen",null);q.__decorate([V.accessibleHandler()],x.prototype,"_triggerPanel",null);q.__decorate([V.accessibleHandler()],x.prototype,"_triggerAction",null);q.__decorate([V.accessibleHandler()],
x.prototype,"_toggleVisibility",null);q.__decorate([V.accessibleHandler()],x.prototype,"_toggleChildrenClick",null);q.__decorate([V.accessibleHandler()],x.prototype,"_toggleSelection",null);return x=q.__decorate([n.subclass("esri.widgets.LayerList")],x)});