/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{r as n,c as l,d as C,a as E}from"./mathUtils.js";import{g as e,k as _,i as S,b as t,r as A,s as a,S as u,t as R,u as r,v as P,w as s,f as O}from"./unitUtils.js";import{e as L,a as M,m as c}from"./Ellipsoid.js";import{e as N}from"./geodesicConstants.js";var o;!function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",n[n.WGS84=2]="WGS84",n[n.WEB_MERCATOR=3]="WEB_MERCATOR",n[n.WGS84_ECEF=4]="WGS84_ECEF",n[n.CGCS2000=5]="CGCS2000",n[n.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",n[n.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",n[n.GCSMARS2000=8]="GCSMARS2000",n[n.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",n[n.GCSMOON2000=10]="GCSMOON2000",n[n.LON_LAT=11]="LON_LAT",n[n.PLATE_CARREE=12]="PLATE_CARREE"}(o||(o={}));const i={[o.WGS84]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:f,[o.SPHERICAL_ECEF]:q,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:h,[o.PLATE_CARREE]:K,[o.WGS84]:f,[o.WGS84_ECEF]:J},[o.CGCS2000]:{[o.CGCS2000]:f,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:f,[o.SPHERICAL_ECEF]:q,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:K,[o.WGS84]:null,[o.WGS84_ECEF]:J},[o.GCSMARS2000]:{[o.CGCS2000]:null,[o.GCSMARS2000]:f,[o.GCSMOON2000]:null,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:g,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.GCSMOON2000]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:f,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:b,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.WEB_MERCATOR]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:I,[o.WGS84_COMPARABLE_LON_LAT]:I,[o.SPHERICAL_ECEF]:p,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:f,[o.PLATE_CARREE]:m,[o.WGS84]:I,[o.WGS84_ECEF]:H},[o.WGS84_ECEF]:{[o.CGCS2000]:Q,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:Q,[o.WGS84_COMPARABLE_LON_LAT]:Q,[o.SPHERICAL_ECEF]:V,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:X,[o.PLATE_CARREE]:function(n,l,C,E){Q(n,l,C,E),K(C,E,C,E)},[o.WGS84]:Q,[o.WGS84_ECEF]:f},[o.SPHERICAL_ECEF]:{[o.CGCS2000]:x,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:x,[o.WGS84_COMPARABLE_LON_LAT]:x,[o.SPHERICAL_ECEF]:f,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:z,[o.PLATE_CARREE]:function(n,l,C,E){x(n,l,C,E),K(C,E,C,E)},[o.WGS84]:x,[o.WGS84_ECEF]:D},[o.SPHERICAL_MARS_PCPF]:{[o.CGCS2000]:null,[o.GCSMARS2000]:v,[o.GCSMOON2000]:null,[o.LON_LAT]:v,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:f,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.SPHERICAL_MOON_PCPF]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:y,[o.LON_LAT]:y,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:f,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.UNKNOWN]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:null,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:f,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.LON_LAT]:{[o.CGCS2000]:f,[o.GCSMARS2000]:f,[o.GCSMOON2000]:f,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:f,[o.SPHERICAL_ECEF]:q,[o.SPHERICAL_MARS_PCPF]:g,[o.SPHERICAL_MOON_PCPF]:b,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:h,[o.PLATE_CARREE]:K,[o.WGS84]:f,[o.WGS84_ECEF]:J},[o.WGS84_COMPARABLE_LON_LAT]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:f,[o.SPHERICAL_ECEF]:q,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:K,[o.WGS84]:f,[o.WGS84_ECEF]:J},[o.PLATE_CARREE]:{[o.CGCS2000]:w,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:w,[o.WGS84_COMPARABLE_LON_LAT]:w,[o.SPHERICAL_ECEF]:function(n,l,C,E){w(n,l,C,E),q(C,E,C,E)},[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:function(n,l,C,E){w(n,l,C,E),h(C,E,C,E)},[o.PLATE_CARREE]:f,[o.WGS84]:w,[o.WGS84_ECEF]:function(n,l,C,E){w(n,l,C,E),J(C,E,C,E)}}};function G(n){const l=F(n,$);return i[l][o.WGS84_COMPARABLE_LON_LAT]}function W(n,l,C=Z()){return null==n||null==l?null:Y(n,l,C).projector}function T(n,l){switch(W(n,l,ln)){case f:return"copy3";case q:return"wgs84ToSphericalECEF";case h:return"wgs84ToWebMercator";case K:return"wgs84ToPlateCarree";case J:return"wgs84ToWGS84ECEF";case I:return"webMercatorToWGS84";case p:return"webMercatorToSphericalECEF";case H:return"webMercatorToWGS84ECEF";case m:return"webMercatorToPlateCarree";case Q:return"wgs84ECEFToWGS84";case V:return"wgs84ECEFToSphericalECEF";case X:return"wgs84ECEFToWebMercator";case x:return"sphericalECEFToWGS84";case z:return"sphericalECEFToWebMercator";case v:return"sphericalMarsPCPFToMars2000";case y:return"sphericalMoonPCPFToMoon2000";case D:return"sphericalECEFToWGS84ECEF";case g:return"mars2000ToSphericalPCPF";case b:return"moon2000ToSphericalPCPF";default:return null}}function F(n,l){return n?l.spatialReference===n?l.spatialReferenceId:(l.spatialReference=n,"metersPerUnit"in l&&(l.metersPerUnit=e(n,1)),_(n)?l.spatialReferenceId=o.SPHERICAL_ECEF:S(n)?l.spatialReferenceId=o.WGS84:t(n)?l.spatialReferenceId=o.WEB_MERCATOR:A(n)?l.spatialReferenceId=o.PLATE_CARREE:n.wkt===a.wkt?l.spatialReferenceId=o.WGS84_ECEF:n.wkid===u.CGCS2000?l.spatialReferenceId=o.CGCS2000:n.wkt===R.wkt?l.spatialReferenceId=o.SPHERICAL_MARS_PCPF:n.wkt===r.wkt?l.spatialReferenceId=o.SPHERICAL_MOON_PCPF:P(n)?l.spatialReferenceId=o.GCSMARS2000:s(n)?l.spatialReferenceId=o.GCSMOON2000:l.spatialReferenceId=o.UNKNOWN):o.UNKNOWN}function f(n,l,C,E){n!==C&&(C[E++]=n[l++],C[E++]=n[l++],C[E]=n[l])}function I(n,l,C,E){C[E++]=En*(n[l++]/L.radius),C[E++]=En*(Math.PI/2-2*Math.atan(Math.exp(-n[l++]/L.radius))),C[E]=n[l]}function p(n,l,C,E){I(n,l,C,E),q(C,E,C,E)}function H(n,l,C,E){I(n,l,C,E),J(C,E,C,E)}function d(n,C,E,e,_){const S=.4999999*Math.PI,t=l(Cn*n[C+1],-S,S),A=Math.sin(t);E[e++]=Cn*n[C]*_.radius,E[e++]=_.halfSemiMajorAxis*Math.log((1+A)/(1-A)),E[e]=n[C+2]}function h(n,l,C,E){d(n,l,C,E,L)}const B=L.radius*Math.PI/180,U=180/(L.radius*Math.PI);function K(n,l,C,E){C[E]=n[l]*B,C[E+1]=n[l+1]*B,C[E+2]=n[l+2]}function w(n,l,C,E){C[E]=n[l]*U,C[E+1]=n[l+1]*U,C[E+2]=n[l+2]}function m(n,l,C,E){I(n,l,C,E),K(C,E,C,E)}function j(n,l,C,E,e){const _=e+n[l+2],S=Cn*n[l+1],t=Cn*n[l],A=Math.cos(S);C[E++]=Math.cos(t)*A*_,C[E++]=Math.sin(t)*A*_,C[E]=Math.sin(S)*_}function b(n,l,C,E){j(n,l,C,E,M.radius)}function g(n,l,C,E){j(n,l,C,E,c.radius)}function q(n,l,C,E){j(n,l,C,E,L.radius)}function k(n,l,C,e,_){const S=n[l],t=n[l+1],A=n[l+2],a=Math.sqrt(S*S+t*t+A*A),u=E(A/(0===a?1:a)),R=Math.atan2(t,S);C[e++]=En*R,C[e++]=En*u,C[e]=a-_}function y(n,l,C,E){k(n,l,C,E,M.radius)}function v(n,l,C,E){k(n,l,C,E,c.radius)}function x(n,l,C,E){k(n,l,C,E,L.radius)}function z(n,l,C,E){x(n,l,C,E),h(C,E,C,E)}function D(n,l,C,E){x(n,l,C,E),J(C,E,C,E)}function J(n,l,C,E){!function(n,l,C,E,e){const _=Cn*n[l],S=Cn*n[l+1],t=n[l+2],A=Math.sin(S),a=Math.cos(S),u=e.radius/Math.sqrt(1-e.eccentricitySquared*A*A);C[E++]=(u+t)*a*Math.cos(_),C[E++]=(u+t)*a*Math.sin(_),C[E++]=(u*(1-e.eccentricitySquared)+t)*A}(n,l,C,E,L)}function Q(n,l,C,E){const e=N,_=n[l],S=n[l+1],t=n[l+2];let A,a,u,R,r,P,s,O,M,c,o,i,G,W,T,F,f,I,p,H,d;A=Math.abs(t),a=_*_+S*S,u=Math.sqrt(a),R=a+t*t,r=Math.sqrt(R),H=Math.atan2(S,_),P=t*t/R,s=a/R,W=e.a2/r,T=e.a3-e.a4/r,s>.3?(O=A/r*(1+s*(e.a1+W+P*T)/r),p=Math.asin(O),c=O*O,M=Math.sqrt(1-c)):(M=u/r*(1-P*(e.a5-W-s*T)/r),p=Math.acos(M),c=1-M*M,O=Math.sqrt(c)),o=1-L.eccentricitySquared*c,i=L.radius/Math.sqrt(o),G=e.a6*i,W=u-i*M,T=A-G*O,f=M*W+O*T,F=M*T-O*W,I=F/(G/o+f),p+=I,d=f+F*I/2,t<0&&(p=-p),C[E++]=En*H,C[E++]=En*p,C[E]=d}function V(n,l,C,E){Q(n,l,C,E),q(C,E,C,E)}function X(n,l,C,E){Q(n,l,C,E),h(C,E,C,E)}function Y(n,l,C){if(null==n||null==l||C.source.spatialReference===n&&C.dest.spatialReference===l)return C;const E=F(n,C.source),e=F(l,C.dest);return E===o.UNKNOWN&&e===o.UNKNOWN?O(n,l)?C.projector=f:C.projector=null:C.projector=i[E][e],C}function Z(){return{source:{spatialReference:null,spatialReferenceId:o.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:o.UNKNOWN,metersPerUnit:1},projector:f}}const $={spatialReference:null,spatialReferenceId:o.UNKNOWN},nn={spatialReference:null,spatialReferenceId:o.UNKNOWN},ln=Z(),Cn=C(1),En=n(1);function en(n,l,C,E,e,_,S=1){const t=W(l,e,ln);if(null==t)return!1;if(t===f){if(n===E&&C===_)return!0;const l=C+3*S;for(let e=C,S=_;e<l;e++,S++)E[S]=n[e];return!0}const A=C+3*S;for(let l=C,e=_;l<A;l+=3,e+=3)t(n,l,E,e);return!0}const _n=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:en},Symbol.toStringTag,{value:"Module"}));export{o as P,G as a,ln as b,F as c,nn as d,i as e,k as f,W as g,T as h,U as i,Z as j,Y as k,d as l,f as m,_n as n,en as p,$ as s,h as w};
