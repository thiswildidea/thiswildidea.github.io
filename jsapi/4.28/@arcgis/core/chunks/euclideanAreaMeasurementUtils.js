/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{a as o}from"./unitFormatUtils.js";import{a9 as t}from"./unitUtils.js";import{e as r}from"./earcut.js";import{s as n,f as s,n as e}from"./vec3.js";import{c as i}from"./vec3f64.js";import{p as a}from"./projectVectorToVector.js";import{g as f,w as l,n as c,k as u}from"./plane.js";import{b as m}from"./triangle.js";import{c as p}from"./measurementUtils2.js";function j(o,t={positionsWorldCoords:[]}){return d(o,t)}function g(o,t={positionsWorldCoords:[]}){return d(o,t,!1)}function d(r,j,g=r.hasZ){const d=p(r.spatialReference),W=t(d);if(null==W)return null;let U=0;for(const o of r.rings){const t=o.length;if(t<3)continue;const{positionsWorldCoords:p}=j;for(;p.length<t;)p.push(i());const W=h,R=n(C,0,0,0),V=1/t;for(let e=0;e<t;e++){if(w=W,(F=o[e]).length<2||(n(w,F[0],F[1],g&&F[2]||0),0))return null;if(!a(W,r.spatialReference,p[e],d))return null;s(R,R,p[e],V)}const b=f(p[0],p[1],R,l());if(0===e(c(b)))continue;for(let o=0;o<t;o++)u(b,R,p[o],p[o]);const k=v(p);for(let o=0;o<k.length;o+=3)U+=m(p[k[o]],p[k[o+1]],p[k[o+2]])}var w,F;return o(U,W)}const h=i(),C=i();function W(){return{positionsWorldCoords:[]}}function v(o){return r(function(o){const t=new Float64Array(2*o.length);for(let r=0;r<o.length;++r){const n=o[r],s=2*r;t[s]=n[0],t[s+1]=n[1]}return t}(o),[],2)}export{j as a,W as c,g as e,v as t};
