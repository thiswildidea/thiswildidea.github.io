/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function t(t){return e[t]??[-34028234663852886e22,34028234663852886e22]}function n(e,n,s){if(e.depthCount&&e.depthCount>1)return;const{pixels:u,statistics:a,pixelType:i}=e,l=u[0].length,o=e.bandMasks??[],c=e.mask??new Uint8Array(l).fill(255),r="f32"===i||"f64"===i,f=t(i);let b=!1;for(let e=0;e<u.length;e++){const t="number"==typeof n?n:n[e];if(null==t)continue;const l=a?.[e]?.minValue??f[0],m=a?.[e]?.maxValue??f[1];if(l>t+Number.EPSILON||m<t-Number.EPSILON)continue;const d=o[e]||c.slice(),h=u[e],p=s?.customFloatTolerance;if(r&&0!==p){let e=p;e||(e=Math.abs(t)>=9999999e31?2e-7*Math.abs(t):"f32"===i?2**-23:Number.EPSILON);for(let n=0;n<h.length;n++)d[n]&&Math.abs(h[n]-t)<e&&(h[n]=0,d[n]=0,c[n]=0,b=!0)}else for(let e=0;e<h.length;e++)d[e]&&h[e]===t&&(h[e]=0,d[e]=0,c[e]=0,b=!0);o[e]=d}b&&(e.bandMasks=e.bandMasks||e.pixels.length>1?o:null,e.mask=c),b&&"updateStatistics"in e&&e.updateStatistics()}export{n as c,t as g};
