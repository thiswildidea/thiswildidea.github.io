/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{g as t}from"./unitUtils.js";import{r as n,n as e,o as r}from"./mat4.js";import{a as i}from"./mat4f64.js";import{g as o,O as s}from"./vec3f64.js";import{s as a}from"./vec4.js";import{d as l,O as u}from"./vec4f64.js";import{projectPoint as m}from"../geometry/projection.js";import{w as c,r as f,u as p}from"./aaBoundingBox.js";import{c as h}from"./aaBoundingRect.js";import{d as g,b as y,r as d}from"../geometry/Polygon.js";import{m as x}from"./dehydratedPoint.js";import{i as j,c as b}from"./hydratedFeatures.js";import{V as v}from"./VertexAttribute.js";function P(t,n){if("point"===t.type)return A(t,n,!1);if(j(t))switch(t.type){case"extent":return A(t.center,n,!1);case"polygon":return A(t.centroid,n,!1);case"polyline":return A(w(t),n,!0);case"mesh":return A(t.origin,n,!1)}else switch(t.type){case"extent":return A(function(t){return x(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}(t),n,!0);case"polygon":return A(function(t){const n=t.rings[0];if(!n||0===n.length)return null;const e=d(t.rings,!!t.hasZ);return x(e[0],e[1],e[2],t.spatialReference)}(t),n,!0);case"polyline":return A(w(t),n,!0)}}function w(t){const n=t.paths[0];if(!n||0===n.length)return null;const e=g(n,y(n)/2);return x(e[0],e[1],e[2],t.spatialReference)}function A(t,n,e){const r=e?t:b(t);return n&&t?m(t,r,n)?r:null:r}function z(t,n,e,r=0){if(t){n||(n=h());const i=t;let o=.5*i.width*(e-1),s=.5*i.height*(e-1);return i.width<1e-7*i.height?o+=s/20:i.height<1e-7*i.width&&(s+=o/20),a(n,i.xmin-o-r,i.ymin-s-r,i.xmax+o+r,i.ymax+s+r),n}return null}function M(t,n){for(let e=0;e<t.geometries.length;++e){const r=t.geometries[e].getMutableAttribute(v.AUXPOS1);r&&r.data[3]!==n&&(r.data[3]=n,t.geometryVertexAttributeUpdated(t.geometries[e],v.AUXPOS1))}}function R(t,n,e=null){const r=l(u);return null!=t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),null!=n?r[3]=n:null!=t&&t.length>3&&(r[3]=t[3]),e&&(r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=e),r}function F(t,n,e,r,i,o=[0,0,0,0]){for(let n=0;n<3;++n)o[n]=null!=t?.[n]?t[n]:null!=e?.[n]?e[n]:i[n];return o[3]=null!=n?n:null!=r?r:i[3],o}function O(t=s,n,e,r=1){const i=new Array(3);if(null==n||null==e)i[0]=1,i[1]=1,i[2]=1;else{let r,o=0;for(let s=2;s>=0;s--){const a=t[s];let l;const u=null!=a,m=0===s&&!r&&!u,c=e[s];"symbol-value"===a||m?l=0!==c?n[s]/c:1:u&&"proportional"!==a&&isFinite(a)&&(l=0!==c?a/c:1),null!=l&&(i[s]=l,r=l,o=Math.max(o,Math.abs(l)))}for(let t=2;t>=0;t--)null==i[t]?i[t]=r:0===i[t]&&(i[t]=.001*o)}for(let t=2;t>=0;t--)i[t]/=r;return o(i)}function U(t){return B(null!=t.isPrimitive?[t.width,t.depth,t.height]:t)?null:"Symbol sizes may not be negative values"}function B(t){const n=t=>null==t||t>=0;return Array.isArray(t)?t.every(n):n(t)}function D(t,o,s,a=i()){return t&&n(a,a,-t/180*Math.PI),o&&e(a,a,o/180*Math.PI),s&&r(a,a,s/180*Math.PI),a}function I(n,e,r){if(null!=r.minDemResolution)return r.minDemResolution;const i=t(e),o=c(n)*i,s=f(n)*i,a=p(n)*(e.isGeographic?1:i);return 0===o&&0===s&&0===a?r.minDemResolutionForPoints:.01*Math.max(o,s,a)}export{O as a,D as b,P as c,I as d,z as e,B as i,R as m,F as o,M as u,U as v};
