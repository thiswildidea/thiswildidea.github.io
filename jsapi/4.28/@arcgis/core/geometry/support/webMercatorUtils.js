/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{clone as t}from"../../core/lang.js";import s from"../SpatialReference.js";import{e as n}from"../../chunks/Ellipsoid.js";import{f as r,b as i,i as e}from"../../chunks/unitUtils.js";import"../../chunks/typedArrayUtil.js";import"../../chunks/tslib.es6.js";import"../../core/JSONSupport.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/maybe.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../chunks/metadata.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../chunks/tracking.js";import"../../chunks/ensureType.js";import"../../core/Error.js";import"../../core/accessorSupport/decorators/property.js";import"../../chunks/ObjectPool.js";import"../../chunks/ObservableBase.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../chunks/PooledArray.js";import"../../core/promiseUtils.js";import"../../chunks/time.js";import"../../chunks/writer.js";import"../../chunks/jsonMap.js";import"../../chunks/assets.js";import"../../request.js";import"../../kernel.js";import"../../core/urlUtils.js";const o=57.29577951308232,p=.017453292519943;function c(t){return t*o}function u(t){return t*p}function a(t){return t/n.radius}function l(t){return Math.PI/2-2*Math.atan(Math.exp(-t/n.radius))}function m(t){return null!=t.wkid||null!=t.wkt}const h=[0,0];function j(t,s,n,r,i){const e=t,o=i;if(o.spatialReference=n,"x"in e&&"x"in o)[o.x,o.y]=s(e.x,e.y,h,r);else if("xmin"in e&&"xmin"in o)[o.xmin,o.ymin]=s(e.xmin,e.ymin,h,r),[o.xmax,o.ymax]=s(e.xmax,e.ymax,h,r);else if("paths"in e&&"paths"in o||"rings"in e&&"rings"in o){const t="paths"in e?e.paths:e.rings,n=[];let i;for(let e=0;e<t.length;e++){const o=t[e];i=[],n.push(i);for(let t=0;t<o.length;t++)i.push(s(o[t][0],o[t][1],[0,0],r)),o[t].length>2&&i[t].push(o[t][2]),o[t].length>3&&i[t].push(o[t][3])}"paths"in o?o.paths=n:o.rings=n}else if("points"in e&&"points"in o){const t=e.points,n=[];for(let i=0;i<t.length;i++)n[i]=s(t[i][0],t[i][1],[0,0],r),t[i].length>2&&n[i].push(t[i][2]),t[i].length>3&&n[i].push(t[i][3]);o.points=n}return i}function f(t,s){const n=t&&(m(t)?t:t.spatialReference),o=s&&(m(s)?s:s.spatialReference);return!(t&&"type"in t&&"mesh"===t.type||s&&"type"in s&&"mesh"===s.type||!n||!o)&&(!!r(o,n)||i(o)&&e(n)||i(n)&&e(o))}function k(n,o){if(null==n)return null;const p=n.spatialReference,c=o&&(m(o)?o:o.spatialReference);return f(p,c)?r(p,c)?t(n):i(c)?j(n,x,s.WebMercator,!1,t(n)):e(c)?j(n,g,s.WGS84,!1,t(n)):null:null}function x(t,s,r=[0,0]){s>89.99999?s=89.99999:s<-89.99999&&(s=-89.99999);const i=u(s);return r[0]=u(t)*n.radius,r[1]=n.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function g(t,s,r=[0,0],i=!1){const e=c(t/n.radius);return r[0]=i?e:e-360*Math.floor((e+180)/360),r[1]=c(Math.PI/2-2*Math.atan(Math.exp(-s/n.radius))),r}function y(n,r=!1,i=t(n)){return j(n,x,s.WebMercator,r,i)}function d(n,r=!1,i=t(n)){return j(n,g,s.WGS84,r,i)}export{f as canProject,y as geographicToWebMercator,x as lngLatToXY,k as project,d as webMercatorToGeographic,a as x2lon,g as xyToLngLat,l as y2lat};
