/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{_ as t}from"../../chunks/tslib.es6.js";import{JSONSupport as e}from"../../core/JSONSupport.js";import{clone as o}from"../../core/lang.js";import{property as n}from"../../core/accessorSupport/decorators/property.js";import{I as r}from"../../chunks/ensureType.js";import{e as i}from"../../chunks/enumeration.js";import{r as s}from"../../chunks/reader.js";import{subclass as p}from"../../core/accessorSupport/decorators/subclass.js";import{w as a}from"../../chunks/writer.js";import{s as u,J as c}from"../../chunks/jsonMap.js";import"../../chunks/typedArrayUtil.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/maybe.js";import"../../chunks/metadata.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../chunks/ObjectPool.js";import"../../chunks/ObservableBase.js";import"../../chunks/tracking.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../chunks/PooledArray.js";import"../../core/promiseUtils.js";import"../../core/Error.js";import"../../chunks/time.js";const y=u()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),m=u()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),l=u()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});let j=class extends e{constructor(){super(...arguments),this.pixelType="unknown"}};t([n({type:String,json:{write:!0}})],j.prototype,"name",void 0),t([n({type:String,json:{write:!0}})],j.prototype,"description",void 0),t([n({type:r,json:{type:r,write:!0,name:"_object_id"}})],j.prototype,"id",void 0),t([n({type:String,json:{type:l.jsonValues,read:l.read,write:l.write}})],j.prototype,"pixelType",void 0),t([n({type:String,json:{write:!0}})],j.prototype,"type",void 0),j=t([p("esri.layers.support.RasterFunctionInfo")],j);const d=j;let f=class extends e{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type="RasterFunctionVariable"}};t([n({type:String,json:{write:!0}})],f.prototype,"name",void 0),t([n({type:Number,json:{type:r,write:!0,name:"_object_id"}})],f.prototype,"id",void 0),t([n({type:Boolean,json:{write:!0}})],f.prototype,"isDataset",void 0),t([n({type:Boolean,json:{write:!0}})],f.prototype,"isPublic",void 0),t([n({json:{write:!0}})],f.prototype,"value",void 0),t([n({type:String,json:{write:!0}})],f.prototype,"type",void 0),f=t([p("esri.layers.support.RasterFunctionVariable")],f);const w={key:"type",base:null,typeMap:{RasterFunctionVariable:f}};let h=class extends e{};t([n({types:w,json:{types:w,name:"MatchVariable"}})],h.prototype,"matchVariable",void 0),t([n({types:w,json:{types:w,name:"UnionDimension"}})],h.prototype,"unionDimension",void 0),t([n({type:Number,json:{type:r,write:!0,name:"_object_id"}})],h.prototype,"id",void 0),t([n({type:String,json:{write:!0}})],h.prototype,"type",void 0),h=t([p("esri.layers.support.RasterFunctionProperties")],h);const g=h,v=new c({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});let S=class extends e{constructor(){super(...arguments),this.functionType="mosaic",this.type="RasterFunctionTemplate"}};t([n({type:[String],json:{write:!0}})],S.prototype,"aliases",void 0),t([n({type:Object,json:{write:!0}})],S.prototype,"arguments",void 0),t([n({type:String,json:{write:!0}})],S.prototype,"description",void 0),t([n({type:d,json:{write:!0,name:"function"}})],S.prototype,"functionInfo",void 0),t([n({type:v.apiValues,json:{type:[0,1,2],read:v.read,write:v.write}})],S.prototype,"functionType",void 0),t([n({type:String,json:{write:!0}})],S.prototype,"group",void 0),t([n({type:String,json:{write:!0}})],S.prototype,"help",void 0),t([n({type:Number,json:{type:r,write:!0,name:"_object_id"}})],S.prototype,"id",void 0),t([n({type:String,json:{write:!0}})],S.prototype,"name",void 0),t([n({type:String,json:{write:!0,name:"definition"}})],S.prototype,"queryDefinition",void 0),t([n({type:String,json:{write:!0}})],S.prototype,"tag",void 0),t([n({type:g,json:{write:!0}})],S.prototype,"properties",void 0),t([n({type:String,json:{write:!0}})],S.prototype,"thumbnail",void 0),t([n({type:String,json:{write:!0}})],S.prototype,"thumbnailEx",void 0),t([n({json:{type:["RasterFunctionTemplate"],write:!0}})],S.prototype,"type",void 0),S=t([p("esri.layers.support.RasterFunctionTemplate")],S);const b=S;var F;const N=new Set(["raster","raster2","dem","fillraster"]),k=new Set(["rasters"]),A=t=>t?.rasterFunction?O.fromJSON(t):t,D=t=>t&&t instanceof O?t.toJSON():t,U=t=>t?.functionName&&!t.declaredClass,C=t=>U(t)?new O(t):t,x={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:b}},json:{write:!0,name:"rasterFunctionDefinition"}};let O=F=class extends e{constructor(t){super(t),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.functionDefinition=null}set functionArguments(t){if(t){const e=Object.keys(t);if(e.some((e=>N.has(e.toLowerCase())&&U(t[e])))||e.some((e=>k.has(e.toLowerCase())&&Array.isArray(t[e])&&t[e].some((t=>U(t)))))){t=o(t);for(const o of e)N.has(o.toLowerCase())?t[o]=C(t[o]):k.has(o.toLowerCase())&&Array.isArray(t[o])&&(t[o]=t[o].map((t=>C(t))))}}this._set("functionArguments",t)}readFunctionArguments(t){return(t=>{if(null==t)return null;t=o(t);const e={};for(const o of Object.keys(t))N.has(o.toLowerCase())?e[o]=A(t[o]):k.has(o.toLowerCase())&&Array.isArray(t[o])?e[o]=t[o].map(A):e[o]=t[o];return e})(t)}writeFunctionArguments(t,e,o){const n={};for(const e of Object.keys(t))N.has(e.toLowerCase())?n[e]=D(t[e]):k.has(e.toLowerCase())&&Array.isArray(t[e])?n[e]=t[e].map(D):n[e]=D(t[e]);e[o]=n}readFunctionName(t,e){const o=e.rasterFunctionInfos;return e.name||(o?.length&&"None"!==o[0].name?o[0].name:e.rasterFunctionDefinition?e.rasterFunctionDefinition.name:e.rasterFunction)}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(t){this.functionDefinition=t?b.fromJSON(t):null}clone(){return new F({functionName:this.functionName,functionArguments:o(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:o(this.rasterFunctionDefinition)})}};t([n({json:{type:Object,name:"rasterFunctionArguments"}})],O.prototype,"functionArguments",null),t([s("functionArguments")],O.prototype,"readFunctionArguments",null),t([a("functionArguments")],O.prototype,"writeFunctionArguments",null),t([n({json:{type:String,write:{target:"rasterFunction"}}})],O.prototype,"functionName",void 0),t([s("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],O.prototype,"readFunctionName",null),t([i({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),n({json:{default:"unknown"}})],O.prototype,"outputPixelType",void 0),t([n({type:String,json:{read:!0,write:!0}})],O.prototype,"variableName",void 0),t([n()],O.prototype,"rasterFunctionDefinition",null),t([n(x)],O.prototype,"functionDefinition",void 0),O=F=t([p("esri.layers.support.RasterFunction")],O);const R=O;export{R as default,y as i,m as n,l as p};
