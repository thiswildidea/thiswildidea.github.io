/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import t from"../../Color.js";import{g as o}from"../../chunks/colorUtils2.js";import"../../chunks/colorUtils.js";import"../../chunks/mathUtils.js";import"../../chunks/vec3.js";import"../../chunks/vec3f64.js";import"../../chunks/common.js";import"../../chunks/ensureType.js";import"../../chunks/typedArrayUtil.js";import"../../chunks/Logger.js";import"../../config.js";import"../../core/lang.js";import"../../chunks/vec4.js";import"../../chunks/vec4f64.js";async function r(o){await o.whenReady();const r=o.basemapView?.baseLayerViews.map((t=>t.layer)).toArray()??[];if(!r.length){const r=getComputedStyle(o.container).backgroundColor,n=r?new t(r):void 0;return("background"in o?o.background?.color:void 0)||(0!==n?.a?n:null)||null}const n=(await o.takeScreenshot({format:"png",layers:r})).data.data,s=n.length;let a=0,e=0,c=0,i=0,u=0,l=0;for(let t=0;t<s;t+=4){const o=n[t],r=n[t+1],s=n[t+2],m=n[t+3],h=m/255;a+=o*o*h,e+=r*r*h,c+=s*s*h,u+=h,m&&(i+=m,l++)}return a=Math.round(Math.sqrt(a/u)),e=Math.round(Math.sqrt(e/u)),c=Math.round(Math.sqrt(c/u)),new t([a,e,c,i/l/255])}async function n(t){if(!t)return null;const n=await r(t);return null!=n?o(n):null}export{r as getBackgroundColor,n as getBackgroundColorTheme};
