"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6078],{76078:(e,n,r)=>{r.d(n,{createLabelFunction:()=>w});var t=r(60991),l=r(92143),a=r(52991),s=r(8925),u=r(66284),o=r(14249),i=r(50203),c=r(60217);r(76506),r(48578),r(31450),r(57251),r(3482),r(22723),r(76131),r(36097),r(87239),r(50406),r(82058),r(88762),r(32101),r(12047),r(29768),r(21972),r(17533),r(86656),r(66396),r(6540),r(91306),r(34250),r(379),r(62062),r(6906),r(79456),r(73173),r(82426),r(72836),r(66106),r(29794),r(74569),r(21801),r(73796),r(97714),r(60947),r(53785),r(89623),r(2906),r(91597),r(86787),r(35132),r(84069),r(44567),r(89034),r(98380),r(92482),r(92896),r(22781),r(32422);const p=l.L.getLogger("esri.layers.support.labelFormatUtils"),f={type:"simple",evaluate:()=>null},x={getAttribute:(e,n)=>e.field(n)};async function w(e,n,r){if(!e||!e.symbol||!n)return f;const l=e.where,w=(0,i.a)(e);let d;if("arcade"===w.type){const e=await(0,c.b)(w.expression,r,n);if(null==e)return f;d={type:"arcade",evaluate(n,r){try{const t="attributes"in n?e.repurposeFeature(n):n;t.contextTimeZone=r??null;const l=e.evaluate({$view:{timeZone:r},$feature:t},e.services);if(null!=l)return l.toString()}catch(e){p.error(new t.Z("arcade-expression-error","Encountered an error when evaluating label expression for feature",{error:e,feature:n,expression:w}))}return null},needsHydrationToEvaluate:()=>null==(0,i.g)(w.expression)}}else d={type:"simple",evaluate:e=>w.expression.replaceAll(/{[^}]*}/g,(r=>{const t=r.slice(1,-1),l=n.get(t);if(!l)return r;let a=null;return"attributes"in e?e&&e.attributes&&(a=e.attributes[l.name]):a=e.field(l.name),null==a?"":function(e,n){if(null==e)return"";const r=n.domain;if(r)if("codedValue"===r.type||"coded-value"===r.type){const n=e;for(const e of r.codedValues)if(e.code===n)return e.name}else if("range"===r.type){const{max:t,min:l}=(0,o.g)(n),a=+e;if(null!=l&&null!=t&&l<=a&&a<=t)return r.name}let t=e;return(0,o.y2)(n)?t=(0,s.f)(t,(0,s.c)("short-date")):(0,o.H7)(n)&&(t=(0,u.uf)(+t)),t||""}(a,l)}))};if(l){let r;try{r=await(0,a.E)(l,n)}catch(e){return p.error(new t.Z("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:l,error:e})),f}const s=d.evaluate;d.evaluate=(e,n)=>{const a="attributes"in e?void 0:x;try{if(r.testFeature(e,a))return s(e,n)}catch(n){p.error(new t.Z("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:l,feature:e,error:n}))}return null}}return d}},50203:(e,n,r)=>{r.d(n,{a:()=>w,b:()=>d,c:()=>b,d:()=>g,g:()=>E,t:()=>x});var t=r(92143);const l="__begin__",a="__end__",s=new RegExp(l,"ig"),u=new RegExp(a,"ig"),o=new RegExp("^"+l,"i"),i=new RegExp(a+"$","i"),c='"',p=c+" + ",f=" + "+c;function x(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function w(e){const n={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(n.expression=e.labelExpressionInfo.value,n.type="conventional"):e.labelExpressionInfo.expression&&(n.expression=e.labelExpressionInfo.expression,n.type="arcade"):null!=e.labelExpression&&(n.expression=e.labelExpression.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}"),n.type="conventional"),n}function d(e){const n=w(e);if(!n)return null;switch(n.type){case"conventional":return b(n.expression);case"arcade":return n.expression}return null}function g(e){const n=w(e);if(!n)return null;switch(n.type){case"conventional":return function(e){const n=e?.match(h);return n?.[1].trim()||null}(n.expression);case"arcade":return E(n.expression)}return null}function b(e){let n;return e?(n=(0,t.r)(e,(e=>l+'$feature["'+e+'"]'+a)),n=o.test(n)?n.replace(o,""):c+n,n=i.test(n)?n.replace(i,""):n+c,n=n.replaceAll(s,p).replaceAll(u,f)):n='""',n}const h=/^\s*\{([^}]+)\}\s*$/i,m=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,v=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,y=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function E(e){if(!e)return null;let n=m.exec(e)||v.exec(e);return n?n[1]||n[3]:(n=y.exec(e),n?n[2]:null)}},52991:(e,n,r)=>{async function t(e,n){const{WhereClause:t}=await Promise.all([r.e(2274),r.e(8675)]).then(r.bind(r,72274)).then((e=>e.W));return t.create(e,n)}function l(e,n){return null!=e?null!=n?`(${e}) AND (${n})`:e:n}r.d(n,{E:()=>t,_:()=>l})}}]);