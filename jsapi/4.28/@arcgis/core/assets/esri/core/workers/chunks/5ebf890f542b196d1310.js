"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2432],{62432:(e,t,n)=>{n.r(t),n.d(t,{loadGLTFMesh:()=>C});var r=n(48027),o=n(82058),s=n(91306),l=n(82426),a=n(26923),u=n(16912),i=n(66106),c=n(68681),f=n(81773),m=n(71337),p=n(68225),d=n(88324),g=n(40167),x=n(79641),T=n(90779),h=n(27726),v=(n(48578),n(84017)),w=n(89212),b=n(51006);function y(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,h.e)(e.ElementType)))}async function C(e,t,n){const a={...n,useTransform:n?.useTransform??!0},u=new T.D(function(e){const t=e?.resolveFile,n=e?.requestFile;return t||n?{busy:!1,request:async(e,r,s)=>{const l=t?.(e)??e;if(n){const e=await n(l,r,s?.signal);if(void 0!==e)return e}const a="image"===r?"image":"binary"===r?"array-buffer":"json";return(await(0,o.Z)(l,{responseType:a,signal:null!=s?s.signal:null})).data}}:null}(a)),x=(await(0,T.l)(u,t,a,!0)).model,h=x.lods.shift(),b=new Map,C=new Map;x.textures.forEach(((e,t)=>{return b.set(t,new p.Z({data:((0,w.i)((r=e).data),r.data),wrap:(n=r.parameters.wrap,{horizontal:B(n.s),vertical:B(n.t)})}));var n,r})),x.materials.forEach(((e,t)=>C.set(t,function(e,t){const n=new r.Z((u=e.color,f=e.opacity,(0,c.f)(M(u[0]),M(u[1]),M(u[2]),f))),o=e.emissiveFactor?new r.Z((a=e.emissiveFactor,(0,i.f)(M(a[0]),M(a[1]),M(a[2])))):null,s=e=>e?new d.Z({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:(0,l.r)(e.rotation??0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;var a,u,f;return new m.Z({color:n,colorTexture:t.get(e.textureColor),normalTexture:t.get(e.textureNormal),emissiveColor:o,emissiveTexture:t.get(e.textureEmissive),occlusionTexture:t.get(e.textureOcclusion),alphaMode:R(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:t.get(e.textureMetallicRoughness),colorTextureTransform:s(e.colorTextureTransform),normalTextureTransform:s(e.normalTextureTransform),occlusionTextureTransform:s(e.occlusionTextureTransform),emissiveTextureTransform:s(e.emissiveTextureTransform),metallicRoughnessTextureTransform:s(e.metallicRoughnessTextureTransform)})}(e,b))));const $=function(e){let t=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,o=new Map,l=[];for(const u of e.parts){const{attributes:{position:e,normal:i,color:c,tangent:f,texCoord0:m}}=u,p=`\n      ${A(e,r)}/\n      ${A(i,r)}/\n      ${A(c,r)}/\n      ${A(f,r)}/\n      ${A(m,r)}/\n      ${a=u.transform,null!=a?a.toString():"-"}\n    `;let d=!1;const g=(0,s.o)(o,p,(()=>(d=!0,{start:t,length:e.count})));d&&(t+=e.count),i&&(n.normal=!0),c&&(n.color=!0),f&&(n.tangent=!0),m&&(n.texCoord0=!0),l.push({gltf:u,writeVertices:d,region:g})}var a;return{vertexAttributes:{position:y(g.a,t),normal:n.normal?y(g.B,t):null,tangent:n.tangent?y(g.c,t):null,color:n.color?y(g.b,t):null,texCoord0:n.texCoord0?y(g.e,t):null},parts:l,components:[]}}(h);for(const e of $.parts)E($,e,C);const{position:S,normal:k,tangent:F,color:Z,texCoord0:O}=$.vertexAttributes,D={position:S.typedBuffer,normal:null!=k?k.typedBuffer:null,tangent:null!=F?F.typedBuffer:null,uv:null!=O?O.typedBuffer:null,color:null!=Z?Z.typedBuffer:null},I=(0,v.h)(D,e,a);return{transform:I.transform,vertexSpace:I.vertexSpace,components:$.components,spatialReference:e.spatialReference,vertexAttributes:new f.M({position:I.vertexAttributes.position,normal:I.vertexAttributes.normal,tangent:I.vertexAttributes.tangent,color:D.color,uv:D.uv})}}function A(e,t){if(null==e)return"-";const n=e.typedBuffer;return`${(0,s.o)(t,n.buffer,(()=>t.size))}/${n.byteOffset}/${n.byteLength}`}function E(e,t,n){t.writeVertices&&function(e,t){const{position:n,normal:r,tangent:o,color:s,texCoord0:i}=e.vertexAttributes,c=t.region.start,{attributes:f,transform:m}=t.gltf,p=f.position.count;if((0,x.c)(n.slice(c,p),f.position,m),null!=f.normal&&null!=r){const e=(0,a.n)((0,u.a)(),m),t=r.slice(c,p);(0,x.b)(t,f.normal,e),(0,l.u)(e)&&(0,x.d)(t,t)}else null!=r&&(0,T.f)(r,0,0,1,{dstIndex:c,count:p});if(null!=f.tangent&&null!=o){const e=(0,a.n)((0,u.a)(),m),t=o.slice(c,p);(0,T.e)(t,f.tangent,e),(0,l.u)(e)&&(0,T.g)(t,t)}else null!=o&&(0,T.h)(o,0,0,1,1,{dstIndex:c,count:p});if(null!=f.texCoord0&&null!=i?(0,T.i)(i.slice(c,p),f.texCoord0):null!=i&&(0,T.j)(i,0,0,{dstIndex:c,count:p}),null!=f.color&&null!=s){const e=f.color,t=s.slice(c,p);if(4===e.elementCount)e instanceof g.c?(0,T.k)(t,e,255):e instanceof g.b?(0,T.m)(t,e):e instanceof g.t&&(0,T.k)(t,e,1/256);else{(0,T.h)(t,255,255,255,255);const n=g.p.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof g.B?(0,x.e)(n,e,255):e instanceof g.p?(0,T.o)(n,e):e instanceof g.s&&(0,x.e)(n,e,1/256)}}else null!=s&&(0,T.h)(s.slice(c,p),255,255,255,255)}(e,t);const{indices:r,attributes:o,primitiveType:s,material:i}=t.gltf;let c=(0,T.b)(r||o.position.count,s);const m=t.region.start;if(m){const e=new Uint32Array(c);for(let t=0;t<c.length;t++)e[t]+=m;c=e}e.components.push(new f.Z({name:t.gltf.name,faces:c,material:n.get(i),shading:o.normal?"source":"flat",trustSourceNormals:!0}))}function R(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function B(e){switch(e){case b.T.CLAMP_TO_EDGE:return"clamp";case b.T.MIRRORED_REPEAT:return"mirror";case b.T.REPEAT:return"repeat"}}function M(e){return e**(1/T.a)*255}n(54174),n(72836),n(29794),n(92143),n(31450),n(76506),n(88762),n(32101),n(60991),n(12047),n(29768),n(21972),n(17533),n(86656),n(66396),n(22723),n(6540),n(34250),n(379),n(62062),n(6906),n(79456),n(50406),n(86787),n(44265),n(55636),n(97714),n(2906),n(38742),n(66122),n(47880),n(7200),n(41864),n(10738),n(65775),n(35861),n(48190),n(92457),n(53785),n(57251),n(89623),n(73173),n(1623),n(89914),n(21801),n(73796),n(60947),n(91597),n(35132),n(84069),n(44567),n(89034),n(98380),n(92482),n(92896),n(50626),n(92624),n(92847),n(57257),n(13814),n(97987),n(66705),n(59465),n(46961),n(45274),n(45003),n(34987),n(33417)}}]);