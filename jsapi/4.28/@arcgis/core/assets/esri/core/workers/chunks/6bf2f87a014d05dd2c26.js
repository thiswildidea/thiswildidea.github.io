"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[732],{13457:(t,e,n)=>{var r;n.d(e,{B:()=>r}),function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(r||(r={}))},87583:(t,e,n)=>{n.d(e,{C:()=>r,a:()=>s});var r,i,o=n(21972);(i=r||(r={}))[i.Layer=0]="Layer",i[i.Object=1]="Object",i[i.Mesh=2]="Mesh",i[i.Line=3]="Line",i[i.Point=4]="Point",i[i.Material=5]="Material",i[i.Texture=6]="Texture",i[i.COUNT=7]="COUNT";class s{constructor(){this.id=(0,o.g)()}}},97987:(t,e,n)=>{n.d(e,{a:()=>o,c:()=>a,d:()=>s,n:()=>i,t:()=>l});var r=n(48578);function i(t,e=!1){return t<=r.p?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function o(t){return((0,r.q)(t)?t.length:t.byteLength/8)<=r.p?Array.from(t):new Float64Array(t)}function s(t,e,n){return Array.isArray(t)?t.slice(e,e+n):t.subarray(e,e+n)}function a(t,e){for(let n=0;n<e.length;++n)t[n]=e[n];return t}function l(t){return Array.isArray(t)?new Float64Array(t):t}},20114:(t,e,n)=>{n.d(e,{S:()=>l,a:()=>g,b:()=>v,c:()=>a,d:()=>y,e:()=>d,f:()=>x,i:()=>c});var r=n(82058),i=n(48578),o=n(50406),s=n(13235);class a{constructor(t,e,n){this.assetName=t,this.assetMimeType=e,this.parts=n}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&(0,i.l)(this.parts,t.parts,((t,e)=>t.equals(e)))}isOnService(t){return this.parts.every((e=>e.isOnService(t)))}makeHash(){let t="";for(const e of this.parts)t+=e.partHash;return t}async toBlob(t){const{parts:e}=this;if(1===e.length)return e[0].toBlob(t);const n=await Promise.all(e.map((e=>e.toBlob(t))));return(0,o.k_)(t),new Blob(n)}}class l{constructor(t,e){this.partUrl=t,this.partHash=e}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:e}=await(0,r.Z)(this.partUrl,{responseType:"blob"});return(0,o.k_)(t),e}}function c(t){return e=t?.source,!!e&&(Array.isArray(e)?e.some(p):p(e));var e}function u(t){return!!Array.isArray(t)&&t.every((t=>t instanceof a))}const f=/^(model\/gltf\+json)|(model\/gltf-binary)$/,h=/\.(gltf|glb)/i;function p(t){if(t instanceof File){const{type:e,name:n}=t;return f.test(e)||h.test(n)}return f.test(t.assetMimeType)||h.test(t.assetName)}function g(t,e){if(!t)return!1;const{source:n}=t;return function(t,e){if(Array.isArray(t)){const n=t;return n.length>0&&n.every((t=>m(t,e)))}return m(t,e)}(n,e)}function d(t,e){if(t===e)return!0;const{source:n}=t,{source:r}=e;if(n===r)return!0;if(u(n)&&u(r)){if(n.length!==r.length)return!1;const t=(t,e)=>t.assetName<e.assetName?-1:t.assetName>e.assetName?1:0,e=[...n].sort(t),i=[...r].sort(t);for(let t=0;t<e.length;++t)if(!e[t].equals(i[t]))return!1;return!0}return!1}function m(t,e){return t instanceof a&&t.isOnService(e)}function y(t,e){return t instanceof File?(0,s.g)(t,e):(0,s.b)(t.assetMimeType,e)??(0,s.c)(t.assetName,e)}function x(t){return Array.isArray(t)?t:[t]}function v(t){return!!t.original}},90532:(t,e,n)=>{n.d(e,{G:()=>_});var r=n(57532),i=n(72836),o=n(92457),s=n(48578),a=n(33417),l=n(79456),c=n(66106),u=n(62348),f=n(87583),h=n(50766),p=n(21972),g=n(99520);function d(t){if(t.length<s.p)return Array.from(t);if((0,s.q)(t))return Float64Array.from(t);if(!("BYTES_PER_ELEMENT"in t))return Array.from(t);switch(t.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(t);case 2:return(0,s.e)(t)?Uint16Array.from(t):Int16Array.from(t);case 4:return Float32Array.from(t);default:return Float64Array.from(t)}}n(46283);class m{constructor(t,e,n){this.primitiveIndices=t,this._numIndexPerPrimitive=e,this.position=n,this._children=void 0,(0,u.a)(t.length>=1),(0,u.a)(3===n.size||4===n.size);const{data:r,size:o,indices:s}=n;(0,u.a)(s.length%this._numIndexPerPrimitive==0),(0,u.a)(s.length>=t.length*this._numIndexPerPrimitive);const a=t.length;let l=o*s[this._numIndexPerPrimitive*t[0]];y.clear(),y.push(l);const f=(0,c.f)(r[l],r[l+1],r[l+2]),h=(0,c.a)(f);for(let e=0;e<a;++e){const n=this._numIndexPerPrimitive*t[e];for(let t=0;t<this._numIndexPerPrimitive;++t){l=o*s[n+t],y.push(l);let e=r[l];f[0]=Math.min(e,f[0]),h[0]=Math.max(e,h[0]),e=r[l+1],f[1]=Math.min(e,f[1]),h[1]=Math.max(e,h[1]),e=r[l+2],f[2]=Math.min(e,f[2]),h[2]=Math.max(e,h[2])}}this.bbMin=f,this.bbMax=h;const p=(0,i.g)((0,c.c)(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(h[0]-f[0],h[1]-f[1]),h[2]-f[2]);let g=this.radius*this.radius;for(let t=0;t<y.length;++t){l=y.at(t);const e=r[l]-p[0],n=r[l+1]-p[1],i=r[l+2]-p[2],o=e*e+n*n+i*i;if(o<=g)continue;const s=Math.sqrt(o),a=.5*(s-this.radius);this.radius=this.radius+a,g=this.radius*this.radius;const c=a/s;p[0]+=e*c,p[1]+=n*c,p[2]+=i*c}this.center=p,y.clear()}getChildren(){if(this._children||(0,i.a)(this.bbMin,this.bbMax)<=1)return this._children;const t=(0,i.g)((0,c.c)(),this.bbMin,this.bbMax,.5),e=this.primitiveIndices.length,n=new Uint8Array(e),r=new Array(8);for(let t=0;t<8;++t)r[t]=0;const{data:o,size:s,indices:a}=this.position;for(let i=0;i<e;++i){let e=0;const l=this._numIndexPerPrimitive*this.primitiveIndices[i];let c=s*a[l],u=o[c],f=o[c+1],h=o[c+2];for(let t=1;t<this._numIndexPerPrimitive;++t){c=s*a[l+t];const e=o[c],n=o[c+1],r=o[c+2];e<u&&(u=e),n<f&&(f=n),r<h&&(h=r)}u<t[0]&&(e|=1),f<t[1]&&(e|=2),h<t[2]&&(e|=4),n[i]=e,++r[e]}let l=0;for(let t=0;t<8;++t)r[t]>0&&++l;if(l<2)return;const u=new Array(8);for(let t=0;t<8;++t)u[t]=r[t]>0?new Uint32Array(r[t]):void 0;for(let t=0;t<8;++t)r[t]=0;for(let t=0;t<e;++t){const e=n[t];u[e][r[e]++]=this.primitiveIndices[t]}this._children=new Array;for(let t=0;t<8;++t)void 0!==u[t]&&this._children.push(new m(u[t],this._numIndexPerPrimitive,this.position));return this._children}static prune(){y.prune()}}const y=new l.P({deallocator:null}),x=(0,c.c)(),v=(0,c.c)(),w=(0,c.c)(),b=(0,c.c)();class A{constructor(t){this.channel=t,this.id=(0,p.g)()}}(0,c.c)(),new Float32Array(6);class _ extends f.a{constructor(t,e,n=null,r=f.C.Mesh,i=null,s=-1){super(),this.material=t,this.mapPositions=n,this.type=r,this.objectAndLayerIdColor=i,this.edgeIndicesLength=s,this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[t,n]of e)this._attributes.set(t,{...n,indices:(0,o.c)(n.indices)}),t===g.V.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(t).indices.length:this.edgeIndicesLength)}instantiate(t={}){const e=new _(t.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach(((t,n)=>{t.exclusive=!1,e._attributes.set(n,t)})),e._boundingInfo=this._boundingInfo,e.transformation=t.transformation||this.transformation,e}get attributes(){return this._attributes}getMutableAttribute(t){let e=this._attributes.get(t);return e&&!e.exclusive&&(e={...e,exclusive:!0,data:d(e.data)},this._attributes.set(t,e)),e}setAttributeData(t,e){const n=this._attributes.get(t);n&&this._attributes.set(t,{...n,exclusive:!0,data:e})}get indexCount(){const t=this._attributes.values().next().value.indices;return t?.length??0}get faceCount(){return this.indexCount/3}get boundingInfo(){return null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return!!(this.type===f.C.Mesh?this._computeAttachmentOriginTriangles(t):this.type===f.C.Line?this._computeAttachmentOriginLines(t):this._computeAttachmentOriginPoints(t))&&(null!=this._transformation&&(0,i.t)(t,t,this._transformation),!0)}_computeAttachmentOriginTriangles(t){return function(t,e){if(!t)return!1;const{size:n,data:r,indices:o}=t;(0,i.s)(e,0,0,0),(0,i.s)(b,0,0,0);let s=0,a=0;for(let t=0;t<o.length-2;t+=3){const l=o[t]*n,c=o[t+1]*n,u=o[t+2]*n;(0,i.s)(x,r[l],r[l+1],r[l+2]),(0,i.s)(v,r[c],r[c+1],r[c+2]),(0,i.s)(w,r[u],r[u+1],r[u+2]);const f=(0,h.a)(x,v,w);f?((0,i.d)(x,x,v),(0,i.d)(x,x,w),(0,i.q)(x,x,1/3*f),(0,i.d)(e,e,x),s+=f):((0,i.d)(b,b,x),(0,i.d)(b,b,v),(0,i.d)(b,b,w),a+=3)}return!(0===a&&0===s||(0!==s?((0,i.q)(e,e,1/s),0):0===a||((0,i.q)(e,b,1/a),0)))}(this.attributes.get(g.V.POSITION),t)}_computeAttachmentOriginLines(t){const e=this.attributes.get(g.V.POSITION);return function(t,e,n){if(!t)return!1;(0,i.s)(n,0,0,0),(0,i.s)(b,0,0,0);let r=0,o=0;const{size:s,data:a,indices:l}=t,c=l.length-1,u=c+(e?2:0);for(let t=0;t<u;t+=2){const e=t<c?t+1:0,u=l[t<c?t:c]*s,f=l[e]*s;x[0]=a[u],x[1]=a[u+1],x[2]=a[u+2],v[0]=a[f],v[1]=a[f+1],v[2]=a[f+2],(0,i.q)(x,(0,i.d)(x,x,v),.5);const h=(0,i.w)(x,v);h>0?((0,i.d)(n,n,(0,i.q)(x,x,h)),r+=h):0===r&&((0,i.d)(b,b,x),o++)}return 0!==r?((0,i.q)(n,n,1/r),!0):0!==o&&((0,i.q)(n,b,1/o),!0)}(e,function(t,e){return!(!("isClosed"in t)||!t.isClosed)&&e.indices.length>2}(this.material.parameters,e),t)}_computeAttachmentOriginPoints(t){return function(t,e){if(!t)return!1;const{size:n,data:r,indices:o}=t;(0,i.s)(e,0,0,0);let s=-1,a=0;for(let t=0;t<o.length;t++){const i=o[t]*n;s!==i&&(e[0]+=r[i],e[1]+=r[i+1],e[2]+=r[i+2],a++),s=i}return a>1&&(0,i.q)(e,e,1/a),a>0}(this.attributes.get(g.V.POSITION),t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.attributes.get(g.V.POSITION);if(!t||0===t.indices.length)return null;const e=this.type===f.C.Mesh?3:1;(0,u.a)(t.indices.length%e==0,"Indexing error: "+t.indices.length+" not divisible by "+e);const n=(0,o.a)(t.indices.length/e);return new m(n,e,t)}get transformation(){return this._transformation??r.I}set transformation(t){this._transformation=t&&t!==r.I?(0,r.b)(t):null}addHighlight(){const t=new A(a.O.Highlight);return this.highlights=function(t,e){return null==t&&(t=[]),t.push(e),t}(this.highlights,t),t}removeHighlight(t){this.highlights=function(t,e){if(null==t)return null;const n=t.filter((t=>t!==e));return 0===n.length?null:n}(this.highlights,t)}}},34987:(t,e,n)=>{n.d(e,{a:()=>u,b:()=>g,c:()=>l,d:()=>h,e:()=>f,f:()=>c,g:()=>p,u:()=>d});var r=n(82426),i=n(35861),o=n(45087),s=n(72836),a=n(66106);function l(t=d){return[t[0],t[1],t[2],t[3]]}function c(t,e,n=l()){return(0,s.c)(n,t),n[3]=e,n}function u(t,e,n=l()){return(0,i.s)(m,t,g(t)),(0,i.s)(y,e,g(e)),(0,i.m)(m,y,m),o=n,s=(0,r.r)((0,i.g)(n,m)),o[3]=s,o;var o,s}function f(t,e,n,r=l()){return c(a.d,t,x),c(a.e,e,v),c(a.U,n,w),u(x,v,x),u(x,w,r),r}function h(t){return t}function p(t){return t[3]}function g(t){return(0,r.d)(t[3])}const d=[0,0,1,0],m=(0,o.a)(),y=(0,o.a)();l();const x=l(),v=l(),w=l()},33417:(t,e,n)=>{var r,i,o,s,a,l,c,u,f;n.d(e,{A:()=>c,C:()=>r,D:()=>u,O:()=>l,R:()=>s,S:()=>a,T:()=>f,b:()=>i}),function(t){t[t.None=0]="None",t[t.Front=1]="Front",t[t.Back=2]="Back",t[t.COUNT=3]="COUNT"}(r||(r={})),function(t){t[t.Less=0]="Less",t[t.Lequal=1]="Lequal",t[t.COUNT=2]="COUNT"}(i||(i={})),function(t){t[t.BACKGROUND=0]="BACKGROUND",t[t.UPDATE=1]="UPDATE"}(o||(o={})),function(t){t[t.NOT_LOADED=0]="NOT_LOADED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"}(s||(s={})),function(t){t[t.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",t[t.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(a||(a={})),function(t){t[t.Highlight=0]="Highlight",t[t.MaskOccludee=1]="MaskOccludee",t[t.COUNT=2]="COUNT"}(l||(l={})),function(t){t[t.Blend=0]="Blend",t[t.Opaque=1]="Opaque",t[t.Mask=2]="Mask",t[t.MaskBlend=3]="MaskBlend",t[t.COUNT=4]="COUNT"}(c||(c={})),function(t){t[t.OFF=0]="OFF",t[t.ON=1]="ON"}(u||(u={})),function(t){t.DDS_ENCODING="image/vnd-ms.dds",t.KTX2_ENCODING="image/ktx2",t.BASIS_ENCODING="image/x.basis"}(f||(f={}))},13814:(t,e,n)=>{n.d(e,{c:()=>c});var r=n(82426),i=n(65775),o=n(66106),s=n(50626),a=n(53785);function l(t,e,n){const r=Math.sin(t),i=Math.cos(t),o=Math.sin(e),s=Math.cos(e),a=n;return a[0]=-r,a[4]=-o*i,a[8]=s*i,a[12]=0,a[1]=i,a[5]=-o*r,a[9]=s*r,a[13]=0,a[2]=0,a[6]=s,a[10]=o,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function c(t,e,n,r){if(null==t||null==r)return!1;const o=(0,s.c)(t,s.s),c=(0,s.c)(r,s.d);if(o===c&&!u(c)&&(o!==s.P.UNKNOWN||(0,a.f)(t,r)))return(0,i.d)(n,e),!0;if(u(c)){const t=s.e[o][s.P.LON_LAT],r=s.e[s.P.LON_LAT][c];return null!=t&&null!=r&&(t(e,0,h,0),r(h,0,p,0),l(f*h[0],f*h[1],n),n[12]=p[0],n[13]=p[1],n[14]=p[2],!0)}if((c===s.P.WEB_MERCATOR||c===s.P.PLATE_CARREE)&&(o===s.P.WGS84||o===s.P.CGCS2000&&c===s.P.PLATE_CARREE||o===s.P.SPHERICAL_ECEF||o===s.P.WEB_MERCATOR)){const t=s.e[o][s.P.LON_LAT],r=s.e[s.P.LON_LAT][c];return null!=t&&null!=r&&(t(e,0,h,0),r(h,0,p,0),o===s.P.SPHERICAL_ECEF?function(t,e,n){l(t,e,n),(0,i.t)(n,n)}(f*h[0],f*h[1],n):(0,i.g)(n),n[12]=p[0],n[13]=p[1],n[14]=p[2],!0)}return!1}function u(t){return t===s.P.SPHERICAL_ECEF||t===s.P.SPHERICAL_MARS_PCPF||t===s.P.SPHERICAL_MOON_PCPF}const f=(0,r.d)(1),h=(0,o.c)(),p=(0,o.c)()},8358:(t,e,n)=>{n.d(e,{d:()=>o});var r=n(82426),i=n(92457);function o(t,e,n){const o=Array.isArray(t),u=o?t.length/e:t.byteLength/(4*e),f=o?t:new Uint32Array(t,0,u*e),h=n?.minReduction??0,p=n?.originalIndices||null,g=p?p.length:0,d=n?.componentOffsets||null;let m=0;if(d)for(let t=0;t<d.length-1;t++){const e=d[t+1]-d[t];e>m&&(m=e)}else m=u;const y=Math.floor(1.1*m)+1;(null==c||c.length<2*y)&&(c=new Uint32Array((0,r.n)(2*y)));for(let t=0;t<2*y;t++)c[t]=0;let x=0;const v=!!d&&!!p,w=v?g:u;let b=(0,i.n)(u);const A=new Uint32Array(g),_=1.96;let M=0!==h?Math.ceil(4*_*_/(h*h)*h*(1-h)):w,T=1,C=d?d[1]:w;for(let t=0;t<w;t++){if(t===M){const e=1-x/t;if(e+_*Math.sqrt(e*(1-e)/t)<h)return null;M*=2}if(t===C){for(let t=0;t<2*y;t++)c[t]=0;if(p)for(let t=d[T-1];t<d[T];t++)A[t]=b[p[t]];C=d[++T]}const n=v?p[t]:t,r=n*e,i=l(f,r,e);let o=i%y,a=x;for(;0!==c[2*o+1];){if(c[2*o]===i){const t=c[2*o+1]-1;if(s(f,r,t*e,e)){a=b[t];break}}o++,o>=y&&(o-=y)}a===x&&(c[2*o]=i,c[2*o+1]=n+1,x++),b[n]=a}if(0!==h&&1-x/u<h)return null;if(v){for(let t=d[T-1];t<A.length;t++)A[t]=b[p[t]];b=(0,i.c)(A)}const P=o?new Array(x):new Uint32Array(x*e);x=0;for(let t=0;t<w;t++)b[t]===x&&(a(f,(v?p[t]:t)*e,P,x*e,e),x++);if(p&&!v){const t=new Uint32Array(g);for(let e=0;e<t.length;e++)t[e]=b[p[e]];b=(0,i.c)(t)}return{buffer:Array.isArray(P)?P:P.buffer,indices:b,uniqueCount:x}}function s(t,e,n,r){for(let i=0;i<r;i++)if(t[e+i]!==t[n+i])return!1;return!0}function a(t,e,n,r,i){for(let o=0;o<i;o++)n[r+o]=t[e+o]}function l(t,e,n){let r=0;for(let i=0;i<n;i++)r=t[e+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let c=null},46283:(t,e,n)=>{function r(t,e){const n=t.length;for(let r=0;r<n;++r)o[0]=t[r],e[r]=o[0];return e}function i(t,e){const n=t.length;for(let r=0;r<n;++r)o[0]=t[r],o[1]=t[r]-o[0],e[r]=o[1];return e}n.d(e,{a:()=>r,b:()=>i});const o=new Float32Array(2)},11545:(t,e,n)=>{n.d(e,{e:()=>a});var r,i,o=n(5777),s={exports:{}};r=s,i=function(){function t(t,i,o){o=o||2;var s,a,c,f,h,g,d,m=i&&i.length,y=m?i[0]*o:t.length,x=e(t,0,y,o,!0),v=[];if(!x||x.next===x.prev)return v;if(m&&(x=function(t,r,i,o){var s,a,c,f=[];for(s=0,a=r.length;s<a;s++)(c=e(t,r[s]*o,s<a-1?r[s+1]*o:t.length,o,!1))===c.next&&(c.steiner=!0),f.push(p(c));for(f.sort(l),s=0;s<f.length;s++)i=n(i=u(f[s],i),i.next);return i}(t,i,x,o)),t.length>80*o){s=c=t[0],a=f=t[1];for(var w=o;w<y;w+=o)(h=t[w])<s&&(s=h),(g=t[w+1])<a&&(a=g),h>c&&(c=h),g>f&&(f=g);d=0!==(d=Math.max(c-s,f-a))?1/d:0}return r(x,v,o,s,a,d),v}function e(t,e,n,r,i){var o,s;if(i===C(t,e,n,r)>0)for(o=e;o<n;o+=r)s=_(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=_(o,t[o],t[o+1],s);if(s&&y(s,s.next)){var a=s.next;M(s),s=a}return s}function n(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{var i=r.prev;if(M(r),(r=e=i)===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,l,c,u,f,p){if(t){!p&&f&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=h(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(t,c,u,f);for(var g,d,m=t;t.prev!==t.next;)if(g=t.prev,d=t.next,f?o(t,c,u,f):i(t))e.push(g.i/l),e.push(t.i/l),e.push(d.i/l),M(t),t=d.next,m=d.next;else if((t=d)===m){p?1===p?r(t=s(n(t),e,l),e,l,c,u,f,2):2===p&&a(t,e,l,c,u,f):r(n(t),e,l,c,u,f,1);break}}}function i(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(g(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function o(t,e,n,r){var i=t.prev,o=t,s=t.next;if(m(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,u=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,f=h(a,l,e,n,r),p=h(c,u,e,n,r),d=t.prevZ,y=t.nextZ;d&&d.z>=f&&y&&y.z<=p;){if(d!==t.prev&&d!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,y!==t.prev&&y!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;y&&y.z<=p;){if(y!==t.prev&&y!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function s(t,e,r){var i=t;do{var o=i.prev,s=i.next.next;!y(o,s)&&x(o,i,i.next,s)&&b(o,s)&&b(s,o)&&(e.push(o.i/r),e.push(i.i/r),e.push(s.i/r),M(i),M(i.next),i=t=s),i=i.next}while(i!==t);return n(i)}function a(t,e,i,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&d(l,c)){var u=A(l,c);return l=n(l,l.next),u=n(u,u.next),r(l,e,i,o,s,a),void r(u,e,i,o,s,a)}c=c.next}l=l.next}while(l!==t)}function l(t,e){return t.x-e.x}function c(t){if(t.next.prev===t)return t;let e=t;for(;;){const n=e.next;if(n.prev===e||n===e||n===t)break;e=n}return e}function u(t,e){var r=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n;var l,c=n,u=n.x,h=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&g(o<h?i:s,o,u,h,o<h?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),b(r,t)&&(l<p||l===p&&(r.x>n.x||r.x===n.x&&f(n,r)))&&(n=r,p=l)),r=r.next}while(r!==c);return n}(t,e);if(!r)return e;var i=A(r,t),o=n(r,r.next);let s=c(i);return n(s,s.next),o=c(o),c(e===r?o:e)}function f(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function h(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function g(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function d(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&x(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||y(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,n,r){var i=w(m(t,e,n)),o=w(m(t,e,r)),s=w(m(n,r,t)),a=w(m(n,r,e));return i!==o&&s!==a||!(0!==i||!v(t,n,e))||!(0!==o||!v(t,r,e))||!(0!==s||!v(n,t,r))||!(0!==a||!v(n,e,r))}function v(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w(t){return t>0?1:t<0?-1:0}function b(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function A(t,e){var n=new T(t.i,t.x,t.y),r=new T(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function _(t,e,n,r){var i=new T(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}return t.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(C(t,0,o,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;s-=Math.abs(C(t,c,u,n))}var f=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,p=r[a+1]*n,g=r[a+2]*n;f+=Math.abs((t[h]-t[g])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[g+1]-t[h+1]))}return 0===s&&0===f?0:Math.abs((f-s)/s)},t.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},t}(),void 0!==i&&(r.exports=i);const a=(0,o.g)(s.exports)},84017:(t,e,n)=>{n.r(e),n.d(e,{a:()=>S,b:()=>C,c:()=>I,d:()=>L,e:()=>P,f:()=>R,g:()=>W,h:()=>H,i:()=>_,j:()=>G,k:()=>O,l:()=>$,m:()=>q,n:()=>nt,p:()=>Y,t:()=>F,u:()=>V,v:()=>M});var r=n(53785),i=n(16912),o=n(65775),s=n(57532),a=n(72836),l=n(66106),c=n(26923),u=n(1623),f=n(57257),h=n(13814),p=n(50626),g=n(97987),d=n(66705),m=n(46961),y=n(45274),x=n(45003),v=n(79641),w=n(92143),b=n(35132),A=n(40167);function _(t,e){return t.isGeographic||t.isWebMercator&&(e?.geographic??!0)}function M(t,e,n){const r=!t.isGeoreferenced;null!=n?.geographic&&n.geographic!==r&&w.L.getLogger(e).warnOnce(`Specifying the 'geographic' parameter (${n.geographic}) for a Mesh vertex space of type "${t.type}" is not supported. This parameter will be ignored.`)}const T=w.L.getLogger("esri.geometry.support.meshUtils.normalProjection");function C(t,e,n,r,i){return Z(r)?(E(j.TO_PCPF,A.B.fromTypedArray(t),A.a.fromTypedArray(e),A.a.fromTypedArray(n),r,A.B.fromTypedArray(i)),i):(T.error("Cannot convert spatial reference to PCPF"),i)}function P(t,e,n,r,i){return Z(r)?(E(j.FROM_PCPF,A.B.fromTypedArray(t),A.a.fromTypedArray(e),A.a.fromTypedArray(n),r,A.B.fromTypedArray(i)),i):(T.error("Cannot convert to spatial reference from PCPF"),i)}function S(t,e,n){return(0,p.p)(t,e,0,n,(0,f.g)(e),0,t.length/3),n}function L(t,e,n){return(0,p.p)(t,(0,f.g)(n),0,e,n,0,t.length/3),e}function F(t,e,n){return(0,c.n)(k,n),(0,v.t)(e,t,k),(0,c.i)(k)||(0,v.n)(e,e),e}function O(t,e,n){if((0,c.n)(k,n),(0,v.t)(e,t,k,4),(0,c.i)(k)||(0,v.n)(e,e,4),t!==e)for(let n=3;n<t.length;n+=4)e[n]=t[n];return e}function I(t,e,n,r,i){if(!Z(r))return T.error("Cannot convert spatial reference to PCPF"),i;E(j.TO_PCPF,A.B.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),A.a.fromTypedArray(e),A.a.fromTypedArray(n),r,A.B.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT));for(let e=3;e<t.length;e+=4)i[e]=t[e];return i}function R(t,e,n,r,i){if(!Z(r))return T.error("Cannot convert to spatial reference from PCPF"),i;E(j.FROM_PCPF,A.B.fromTypedArray(t,16),A.a.fromTypedArray(e),A.a.fromTypedArray(n),r,A.B.fromTypedArray(i,16));for(let e=3;e<t.length;e+=4)i[e]=t[e];return i}function E(t,e,n,r,i,o){if(!e)return;const s=n.count,l=(0,f.g)(i);if(N(i))for(let n=0;n<s;n++)r.getVec(n,B),e.getVec(n,U),(0,h.c)(l,B,z,l),(0,c.f)(k,z),t===j.FROM_PCPF&&(0,c.t)(k,k),(0,a.r)(U,U,k),o.setVec(n,U);else for(let i=0;i<s;i++){r.getVec(i,B),e.getVec(i,U),(0,h.c)(l,B,z,l),(0,c.f)(k,z);const s=(0,b.mZ)(n.get(i,1));let u=Math.cos(s);t===j.TO_PCPF&&(u=1/u),k[0]*=u,k[1]*=u,k[2]*=u,k[3]*=u,k[4]*=u,k[5]*=u,t===j.FROM_PCPF&&(0,c.t)(k,k),(0,a.r)(U,U,k),(0,a.p)(U,U),o.setVec(i,U)}return o}function Z(t){return N(t)||function(t){return t.isWebMercator}(t)}function N(t){return t.isWGS84||(0,r.Q)(t)||(0,r.v)(t)||(0,r.w)(t)}var j,D;(D=j||(j={}))[D.TO_PCPF=0]="TO_PCPF",D[D.FROM_PCPF=1]="FROM_PCPF";const B=(0,l.c)(),U=(0,l.c)(),z=(0,s.a)(),k=(0,i.a)();function W(t,e,n){return _(e.spatialReference,n)?function(t,e,n){const r=e.spatialReference,i=J(e,n,Q),o=new Float64Array(t.position.length),s=function(t,e,n,r){return(0,v.a)(r,t,e),L(r,new Float64Array(t.length),n)}(t.position,i,r,o),a=(0,c.n)(et,i),l=function(t,e,n,r,i){if(null==n)return null;const o=new Float32Array(n.length);return(0,v.t)(o,n,r),P(o,t,e,i,o),o}(s,o,t.normal,a,r),u=function(t,e,n,r,i){if(null==n)return null;const o=new Float32Array(n.length);(0,v.t)(o,n,r,4);for(let t=3;t<o.length;t+=4)o[t]=n[t];return R(o,t,e,i,o),o}(s,o,t.tangent,a,r);return{position:s,normal:l,tangent:u}}(t,e,n):function(t,e,n){const r=new Float64Array(t.position.length),i=t.position,o=e.x,s=e.y,a=e.z??0,l=K(n?n.unit:null,e.spatialReference);for(let t=0;t<i.length;t+=3)r[t]=i[t]*l+o,r[t+1]=i[t+1]*l+s,r[t+2]=i[t+2]*l+a;return{position:r,normal:t.normal,tangent:t.tangent}}(t,e,n)}function q(t,e=s.I){const{position:n,normal:r,tangent:i}=t;return{position:(0,v.a)(new Float64Array(n.length),n,e),normal:null!=r?F(r,new Float32Array(r.length),e):null,tangent:null!=i?O(i,new Float32Array(i.length),e):null}}function G(t,e,n,r){const{position:i,normal:o,tangent:s}=t;return e.isRelative?W(q(t,n?.localMatrix),e.getOriginPoint(r),{geographic:!e.isGeoreferenced}):{position:i,normal:o,tangent:s}}function H(t,e,n){if(n?.useTransform){const{position:r,normal:i,tangent:o}=t,{x:s,y:a,z:c}=e,u=(0,l.f)(s,a,c??0);return{vertexAttributes:{position:r,normal:i,tangent:o},vertexSpace:n.geographic??1?new y.Z({origin:u}):new d.Z({origin:u}),transform:new x.Z}}return{vertexAttributes:W(t,e,n),vertexSpace:new m.Z,transform:null}}function V(t,e,n){return _(e.spatialReference,n)?function(t,e,n){const r=e.spatialReference;J(e,n,Q);const i=(0,o.i)(tt,Q),s=new Float64Array(t.position.length),a=function(t,e,n,r){const i=S(t,e,r),o=new Float64Array(i.length);return(0,v.a)(o,i,n),o}(t.position,r,i,s),l=(0,c.n)(et,i),u=function(t,e,n,r,i){if(null==t)return null;const o=C(t,e,n,r,new Float32Array(t.length));return(0,v.t)(o,o,i),o}(t.normal,t.position,s,r,l),f=function(t,e,n,r,i){if(null==t)return null;const o=I(t,e,n,r,new Float32Array(t.length));return(0,v.t)(o,o,i,4),o}(t.tangent,t.position,s,r,l);return{position:a,normal:u,tangent:f}}(t,e,n):X(t,e,n)}function $(t,e,n,r,i){if(!e.isRelative)return V(t,r,i);const{spatialReference:o}=r,s=G(t,e,n,o);return r.equals(e.getOriginPoint(o))?X(s,r,i):V(s,r,i)}function Y({positions:t,transform:e,vertexSpace:n,inSpatialReference:r,outSpatialReference:i,outPositions:c,localMode:d}){const m=n.isRelative?n.origin:l.Z,y=n.isRelative?e?.localMatrix??s.I:s.I;if(n.isGeoreferenced){const e=c??(0,g.n)(t.length);if((0,o.b)(y,s.I)?(0,g.c)(e,t):(0,v.a)(e,t,y),!(0,a.e)(m,l.Z)){const[t,n,r]=m;for(let i=0;i<e.length;i+=3)e[i]+=t,e[i+1]+=n,e[i+2]+=r}return(0,p.p)(e,r,0,e,i,0,e.length/3),e}let x=r;const w=(0,f.g)(r);x=i.isWebMercator&&d||!(0,u.canProjectWithoutEngine)(r,w)?x:w,(0,h.c)(r,m,Q,x),(0,o.m)(Q,Q,y);const b=c??(0,g.n)(t.length);return(0,v.a)(b,t,Q),(0,p.p)(b,x,0,b,i,0,b.length/3),b}function X(t,e,n){const r=new Float64Array(t.position.length),i=t.position,o=e.x,s=e.y,a=e.z??0,l=K(n?n.unit:null,e.spatialReference);for(let t=0;t<i.length;t+=3)r[t]=(i[t]-o)/l,r[t+1]=(i[t+1]-s)/l,r[t+2]=(i[t+2]-a)/l;return{position:r,normal:t.normal,tangent:t.tangent}}function J(t,e,n){(0,h.c)(t.spatialReference,[t.x,t.y,t.z??0],n,(0,f.g)(t.spatialReference));const r=K(e?e.unit:null,t.spatialReference);return(0,o.c)(n,n,[r,r,r]),n}function K(t,e){if(null==t)return 1;const n=(0,r.R)(e);return 1/(0,r.x)(n,"meters",t)}const Q=(0,s.a)(),tt=(0,s.a)(),et=(0,i.a)(),nt=Object.freeze(Object.defineProperty({__proto__:null,applyTransform:q,georeference:W,georeferenceApplyTransform:G,georeferenceByTransform:H,project:Y,ungeoreference:V,ungeoreferenceByTransform:$},Symbol.toStringTag,{value:"Module"}))},55636:(t,e,n)=>{n.d(e,{g:()=>u,w:()=>c});var r=n(82058),i=n(60991),o=n(50406),s=n(32101);let a=null,l=!0;function c(t,e,n,r){if(!e||!n)throw new Error("Cannot construct image data without dimensions");if(l)try{return new ImageData(t,e,n)}catch(t){l=!1}const i=function(t,e,n){return n||(a||(a=document.createElement("canvas"),a.width=1,a.height=1),n=a),n.getContext("2d").createImageData(t,e)}(e,n,r);return i.data.set(t,0),i}async function u(t,e){const{arrayBuffer:a,mediaType:l}=await async function(t,e){const n=(0,s.sJ)(t);if(n?.isBase64)return{arrayBuffer:(0,s.b)(n.data),mediaType:n.mediaType};const i=await(0,r.Z)(t,{responseType:"array-buffer",...e});return{arrayBuffer:i.data,mediaType:i.getHeader("Content-Type")}}(t,e),c="image/png"===l;if("image/gif"===l){const{isAnimatedGIF:t,parseGif:r}=await n.e(4466).then(n.bind(n,84466));if(t(a))return r(a,e)}if(c){const{isAnimatedPNG:t,parseApng:r}=await n.e(4169).then(n.bind(n,84169));if(t(a))return r(a,e)}return async function(t,e){const n=window.URL.createObjectURL(t);try{const{data:t}=await(0,r.Z)(n,{...e,responseType:"image"});return t}catch(t){if(!(0,o.D_)(t))throw new i.Z("invalid-image",`Could not fetch requested image at ${n}`);throw t}finally{window.URL.revokeObjectURL(n)}}(new Blob([a],{type:l}),e)}},94446:(t,e,n)=>{n.d(e,{c:()=>a,f:()=>l,i:()=>c});var r=n(82426),i=n(40961),o=n(72836),s=n(66106);function a(t){return t?{origin:(0,s.a)(t.origin),vector:(0,s.a)(t.vector)}:{origin:(0,s.c)(),vector:(0,s.c)()}}function l(t,e,n=a()){return(0,o.c)(n.origin,t),(0,o.b)(n.vector,e,t),n}function c(t,e,n){return function(t,e,n,s,a){const{vector:l,origin:c}=t,u=(0,o.b)(i.s.get(),e,c),f=(0,o.i)(l,u)/(0,o.n)(l);return(0,o.q)(a,l,(0,r.c)(f,0,1)),(0,o.d)(a,a,t.origin)}(t,e,0,0,n)}(0,s.c)(),(0,s.c)(),new i.O((()=>a()))},26923:(t,e,n)=>{n.d(e,{b:()=>a,c:()=>l,f:()=>i,i:()=>f,m:()=>c,n:()=>u,s:()=>o,t:()=>s});var r=n(29794);function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function o(t,e,n,r,i,o,s,a,l,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=l,t[8]=c,t}function s(t,e){if(t===e){const n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function a(t,e){const n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*s-a*c,h=-u*o+a*l,p=c*o-s*l;let g=n*f+r*h+i*p;return g?(g=1/g,t[0]=f*g,t[1]=(-u*r+i*c)*g,t[2]=(a*r-i*s)*g,t[3]=h*g,t[4]=(u*n-i*l)*g,t[5]=(-a*n+i*o)*g,t[6]=p*g,t[7]=(-c*n+r*l)*g,t[8]=(s*n-r*o)*g,t):null}function l(t,e){const n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t[0]=s*u-a*c,t[1]=i*c-r*u,t[2]=r*a-i*s,t[3]=a*l-o*u,t[4]=n*u-i*l,t[5]=i*o-n*a,t[6]=o*c-s*l,t[7]=r*l-n*c,t[8]=n*s-r*o,t}function c(t,e,n){const r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=n[0],p=n[1],g=n[2],d=n[3],m=n[4],y=n[5],x=n[6],v=n[7],w=n[8];return t[0]=h*r+p*s+g*c,t[1]=h*i+p*a+g*u,t[2]=h*o+p*l+g*f,t[3]=d*r+m*s+y*c,t[4]=d*i+m*a+y*u,t[5]=d*o+m*l+y*f,t[6]=x*r+v*s+w*c,t[7]=x*i+v*a+w*u,t[8]=x*o+v*l+w*f,t}function u(t,e){const n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],p=e[11],g=e[12],d=e[13],m=e[14],y=e[15],x=n*a-r*s,v=n*l-i*s,w=n*c-o*s,b=r*l-i*a,A=r*c-o*a,_=i*c-o*l,M=u*d-f*g,T=u*m-h*g,C=u*y-p*g,P=f*m-h*d,S=f*y-p*d,L=h*y-p*m;let F=x*L-v*S+w*P+b*C-A*T+_*M;return F?(F=1/F,t[0]=(a*L-l*S+c*P)*F,t[1]=(l*C-s*L-c*T)*F,t[2]=(s*S-a*C+c*M)*F,t[3]=(i*S-r*L-o*P)*F,t[4]=(n*L-i*C+o*T)*F,t[5]=(r*C-n*S-o*M)*F,t[6]=(d*_-m*A+y*b)*F,t[7]=(m*w-g*_-y*v)*F,t[8]=(g*A-d*w+y*x)*F,t):null}function f(t){const e=(0,r.g)(),n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],f=t[8];return Math.abs(1-(n*n+s*s+c*c))<=e&&Math.abs(1-(i*i+a*a+u*u))<=e&&Math.abs(1-(o*o+l*l+f*f))<=e}},16912:(t,e,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function i(t,e,n,r,i,o,s,a,l){return[t,e,n,r,i,o,s,a,l]}function o(t,e){return new Float64Array(t,e,9)}n.d(e,{a:()=>r,c:()=>o,f:()=>i})},57532:(t,e,n)=>{function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function o(t,e){return new Float64Array(t,e,16)}n.d(e,{I:()=>s,a:()=>r,b:()=>i,c:()=>o});const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},99045:(t,e,n)=>{n(82426),n(72836);var r=n(66106);(0,r.c)(),(0,r.c)(),(0,r.c)(),(0,r.c)(),(0,r.c)()},30732:(t,e,n)=>{n.r(e),n.d(e,{assetMapFromAssetMapsJSON:()=>se,extractMesh:()=>ie,meshFeatureSetFromJSON:()=>re});var r=n(23761),i=n(92143),o=n(91306),s=n(66106),a=n(21801),l=n(29768),c=n(60991),u=n(81184),f=n(33101),h=n(50406),p=n(58085),g=n(34250),d=(n(48578),n(17533)),m=n(73796),y=n(91597),x=n(44567),v=n(34987),w=n(81773);class b extends c.Z{constructor(){super("mesh-not-loaded","Mesh must be loaded before applying operations")}}class A extends c.Z{constructor(){super("component-not-found","Provided component is not part of the list of components")}}class _ extends c.Z{constructor(){super("invalid-polygon","expected polygon to be a Polygon instance")}}class M extends c.Z{constructor(){super("invalid-input:location","Expected location to be a Point instance")}}class T extends c.Z{constructor(){super("invalid-input:no-layer","A layer is needed to convert the files")}}class C extends c.Z{constructor(){super("invalid-input:no-model","No supported model found")}}class P extends c.Z{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}var S=n(66705),L=n(46961),F=n(45274),O=n(45003),I=n(11545),R=n(89034),E=n(97987),Z=n(92457),N=n(8358),j=(n(74569),n(82426)),D=n(53785),B=n(72836),U=n(55633);n(87583),n(90532),n(99520);const z=(0,U.c)();function k(t,e,n,r,i,o,s){i*=3;for(let a=0;a<o;++a){const o=t[e];r[i++]=o[0],r[i++]=o[1],r[i++]=s?o[2]:0,e+=n}return i/3}function W(t,e,n){if(e){const e=function(t,e,n){const r=function(t,e,n,r){const i=(o=e,Array.isArray(o[0])?(t,n)=>e[t][n]:(t,n)=>e[3*t+n]);var o;const s=r?(0,D.g)(r)/(0,D.q)(r):1;return(0,U.h)(t,((t,e)=>(0,B.s)(t,i(e,0)*s,i(e,1)*s,i(e,2))),n)}(z,t,e,n)?(0,U.n)(z):[0,0,1];return Math.abs(r[2])>Math.cos((0,j.d)(80))?R.A.Z:Math.abs(r[1])>Math.abs(r[0])?R.A.Y:R.A.X}(t,t.length-1,n);if(e===R.A.X)return!(0,x.i)(t,R.A.Y,R.A.Z);if(e===R.A.Y)return!(0,x.i)(t,R.A.X,R.A.Z)}return!(0,x.i)(t,R.A.X,R.A.Y)}var q,G;(G=q||(q={}))[G.NONE=0]="NONE",G[G.CCW_IS_HOLE=1]="CCW_IS_HOLE";var H=n(84017),V=n(50626);function $(t,e,n,r=0){Y[0]=t.x,Y[1]=t.y;const i=t.z;return Y[2]=void 0!==i?i:r,(0,V.p)(Y,t.spatialReference,0,e,n,0,1)}const Y=(0,s.c)();n(73173),n(82058);var X=n(32101),J=(n(33417),n(66122)),K=n(15324),Q=n(20114),tt=n(26923),et=n(16912),nt=n(57532),rt=n(57257),it=n(13814),ot=n(65775),st=n(13235),at=(n(76506),n(31450),n(21972),n(86656),n(66396),n(22723),n(379),n(62062),n(6540),n(6906),n(79456),n(41864),n(75067),n(89914),n(60947));n(12047),n(57251),n(89623),n(2906),n(88762),n(35132),n(97714),n(86787),n(98380),n(92482),n(29794),n(35861),n(7200),n(44265),n(48027),n(54174),n(68225),n(55636),n(38742),n(88324),n(71337),n(59465),n(5777),n(84069),n(92896),n(22781),n(32422),n(40961),n(13457),n(32191),n(68681),n(99045),n(62348),n(50766),n(94446),n(46283),n(1623),n(92624),n(92847),n(79641),n(40167),n(47880);let lt=null;function ct(t,e){let n=1/0,r=1/0,i=1/0,o=-1/0,s=-1/0,l=-1/0;const c=t.length;let u=0;for(;u<c;){const e=t[u++],a=t[u++],c=t[u++];n=Math.min(n,e),r=Math.min(r,a),i=Math.min(i,c),o=Math.max(o,e),s=Math.max(s,a),l=Math.max(l,c)}return new a.Z({xmin:n,ymin:r,zmin:i,xmax:o,ymax:s,zmax:l,spatialReference:e})}const ut="esri.geometry.support.meshUtils.centerAt",ft=(0,s.c)(),ht=(0,s.c)(),pt=(0,s.c)();function gt(t){const e=(0,X.Yd)(t.url);return n=>{const r=(0,X.PF)(n,e,e),i=r?r.replace(/^ *\.\//,""):null;return(i?t.files.get(i):null)??n}}function dt(t){return bt.fromBlob(t,At(t.name,t.type))}const mt=/^model\/gltf\+json$/,yt=/^model\/gltf-binary$/,xt=/\.gltf$/i,vt=/\.glb$/i;function wt(t){const e=new Map;let n,r=null;for(const{name:i,mimeType:o,source:s}of t)null===r&&(mt.test(o)||xt.test(i)?(r=s.url,n="gltf"):(yt.test(o)||vt.test(i))&&(r=s.url,n="glb")),e.set(i,s.url),s.files.forEach(((t,n)=>e.set(n,t)));if(null==r)throw new c.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new bt(r,(()=>t.forEach((({source:t})=>t.dispose()))),e,n)}class bt{constructor(t,e=(()=>{}),n=new Map,r){this.url=t,this.dispose=e,this.files=n,this.type=r}static fromBlob(t,e){const n=URL.createObjectURL(t);return new bt(n,(()=>URL.revokeObjectURL(n)),void 0,e)}}function At(t,e){return mt.test(e)||xt.test(t)?"gltf":yt.test(e)||xt.test(t)?"glb":void 0}let _t=class extends J.j{constructor(){super(),this.externalSources=new K.Z,this._explicitDisplaySource=null,this.addHandles((0,p.on)((()=>this.externalSources),"after-remove",(({item:t})=>{t===this._explicitDisplaySource&&(this._explicitDisplaySource=null)}),{sync:!0,onListenerRemove:()=>this._explicitDisplaySource=null}))}get displaySource(){return this._explicitDisplaySource??this._implicitDisplaySource}set displaySource(t){if(null!=t&&!(0,Q.i)(t))throw new Error("Cannot use this source for display: it is not in a supported format.");this._explicitDisplaySource=t,t&&this.externalSources.every((e=>!(0,Q.e)(e,t)))&&this.externalSources.add(t)}clearSources(){this.externalSources.removeAll()}getExternalSourcesOnService(t){return this.externalSources.items.filter((e=>(0,Q.a)(e,t)))}get _implicitDisplaySource(){return this.externalSources.find(Q.i)}};function Mt(t,e){if(t)for(let n=0;n<t.length;n+=3)for(let r=0;r<3;r++)t[n+r]+=e[r]}(0,l._)([(0,g.Cb)()],_t.prototype,"externalSources",void 0),(0,l._)([(0,g.Cb)()],_t.prototype,"displaySource",null),(0,l._)([(0,g.Cb)()],_t.prototype,"_implicitDisplaySource",null),(0,l._)([(0,g.Cb)()],_t.prototype,"_explicitDisplaySource",void 0),_t=(0,l._)([(0,d.j)("esri.geometry.support.meshUtils.Metadata")],_t);const Tt=(0,s.c)(),Ct=(0,nt.a)(),Pt=(0,et.a)(),St={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function Lt(t,e,n){t.isPlane||function(t){for(let e=0;e<t.position.length;e+=3)t.position[e+2]+=.5}(t),function(t,e){if(null==e)return;const n="number"==typeof e?[e,e,e]:[null!=e.width?e.width:1,null!=e.depth?e.depth:1,null!=e.height?e.height:1];Rt[0]=n[0],Rt[4]=n[1],Rt[8]=n[2];for(let e=0;e<t.position.length;e+=3){for(let n=0;n<3;n++)It[n]=t.position[e+n];(0,B.r)(It,It,Rt);for(let n=0;n<3;n++)t.position[e+n]=It[n]}if(n[0]!==n[1]||n[1]!==n[2]){Rt[0]=1/n[0],Rt[4]=1/n[1],Rt[8]=1/n[2];for(let e=0;e<t.normal.length;e+=3){for(let n=0;n<3;n++)It[n]=t.normal[e+n];(0,B.r)(It,It,Rt),(0,B.p)(It,It);for(let n=0;n<3;n++)t.normal[e+n]=It[n]}}}(t,n?.size);const{vertexAttributes:r,vertexSpace:i,transform:o}=(0,H.h)(t,e,n);return{vertexAttributes:new w.M({...r,uv:t.uv}),vertexSpace:i,transform:o,components:[new w.Z({faces:t.faces,material:n?.material||null})],spatialReference:e.spatialReference}}const Ft={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},Ot={south:0,east:1,north:2,west:3,up:4,down:5},It=(0,s.c)(),Rt=(0,et.a)(),Et="esri.geometry.support.meshUtils.rotate";function Zt(t,e,n,r=s.Z){if(null!=t){(0,ot.f)(Bt,(0,v.b)(e),(0,v.d)(e));for(let e=0;e<t.length;e+=n){for(let n=0;n<3;n++)Nt[n]=t[e+n]-r[n];(0,B.t)(Nt,Nt,Bt);for(let n=0;n<3;n++)t[e+n]=Nt[n]+r[n]}}}const Nt=(0,s.c)(),jt=(0,s.c)(),Dt=(0,v.c)(),Bt=(0,nt.a)(),Ut=(0,et.a)(),zt=(0,s.c)(),kt="esri.geometry.support.meshUtils.scale";function Wt(t,e,n=s.Z){if(t)for(let r=0;r<t.length;r+=3){for(let e=0;e<3;e++)qt[e]=t[r+e]-n[e];(0,B.q)(qt,qt,e);for(let e=0;e<3;e++)t[r+e]=qt[e]+n[e]}}const qt=(0,s.c)(),Gt=(0,s.c)(),Ht=(0,s.c)();async function Vt(t){const{BlobReader:e,ZipReader:r,BlobWriter:i}=await n.e(9995).then(n.bind(n,79995)),o=[],s=new r(new e(t));return(await s.getEntries()).forEach((t=>{if(t.directory||/^__MACOS/i.test(t.filename))return;const e=new i,n=t.getData?.(e).then((e=>new File([e],t.filename)));n&&o.push(n)})),Promise.all(o)}var $t;const Yt="esri.geometry.Mesh",Xt={base:null,key:"type",defaultKeyValue:"georeferenced",typeMap:{georeferenced:L.Z,"georeferenced-relative":S.Z,local:F.Z}};let Jt=$t=class extends(u.Z.LoadableMixin((0,f.v)(m.Z))){constructor(t){super(t),this.components=null,this.vertexSpace=new L.Z,this.transform=null,this.metadata=new _t,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new w.M,this.type="mesh"}initialize(){(0===this.metadata.externalSources.length||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when((()=>{this.addHandles((0,p.YP)((()=>({vertexAttributes:this.vertexAttributes,components:this.components?.map((t=>t.clone()))})),(()=>this._clearSources()),{once:!0,sync:!0}))}))}get hasExtent(){return this.loaded?this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0):null!=this.metadata.displaySource?.extent}get _transformedExtent(){const{components:t,spatialReference:e,vertexAttributes:n,vertexSpace:r}=this,i=n.position;if(0===i.length||t&&0===t.length)return new a.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:e});if("local"===r.type){const{_untransformedExtent:t,transform:n}=this;return function({xmin:t,xmax:e,ymin:n,ymax:r,zmin:i,zmax:o},s,a,l){i??=0,o??=0,lt??=new Float64Array(24);const c=lt;return c[0]=t,c[1]=n,c[2]=i,c[3]=t,c[4]=r,c[5]=i,c[6]=e,c[7]=r,c[8]=i,c[9]=e,c[10]=n,c[11]=i,c[12]=t,c[13]=n,c[14]=o,c[15]=t,c[16]=r,c[17]=o,c[18]=e,c[19]=r,c[20]=o,c[21]=e,c[22]=n,c[23]=o,(0,H.p)({positions:c,transform:s,vertexSpace:a,inSpatialReference:l,outSpatialReference:l,outPositions:c}),ct(c,l)}(t,n,r,e)}if("georeferenced-relative"===r.type){const{transform:t}=this;return ct((0,H.p)({positions:i,transform:t,vertexSpace:r,inSpatialReference:e,outSpatialReference:e}),e)}return ct(i,e)}get _untransformedExtent(){return ct(this.vertexAttributes.position,this.spatialReference)}get anchor(){const{vertexSpace:t}=this;if(t.isRelative)return t.getOriginPoint(this.spatialReference);const{center:e,zmin:n}=this._transformedExtent;return new y.Z({x:e.x,y:e.y,z:n,spatialReference:this.spatialReference})}get origin(){const{vertexSpace:t}=this;return t.isRelative?t.getOriginPoint(this.spatialReference):this._transformedExtent.center}get extent(){return this.loaded||null==this.metadata?.displaySource?.extent?this._transformedExtent:this.metadata.displaySource.extent.clone()}addComponent(t){if(!this.loaded)return i.L.getLogger(this).error("addComponent()",(new b).message);this.components||(this.components=[]),this.components.push(w.Z.from(t)),this.notifyChange("components")}removeComponent(t){if(!this.loaded)return i.L.getLogger(this).error("removeComponent()",(new b).message);if(this.components){const e=this.components.indexOf(t);if(-1!==e)return this.components.splice(e,1),void this.notifyChange("components")}i.L.getLogger(this).error("removeComponent()",(new A).message)}rotate(t,e,n,r){return(0,v.e)(t,e,n,Qt),function(t,e,n){if(!t.vertexAttributes?.position||0===e[3])return;const{spatialReference:r,vertexSpace:o}=t;if(o.isRelative){(0,H.v)(o,Et,n);const r=n?.origin??t.origin;t.transform??=new O.Z,function(t,e,n,r){const i=e.origin,o=(0,B.s)(Nt,r.x,r.y,r.z??0),a=(0,B.b)(Nt,o,i);t.applyLocalInverse(a,jt),t.rotation=(0,v.a)(t.rotation,n,(0,v.c)()),t.applyLocalInverse(a,a),(0,B.b)(a,a,jt),t.translation=(0,B.d)((0,s.c)(),t.translation,a)}(t.transform,o,e,r)}else{const o=n?.origin??t.origin;(0,H.i)(r,n)?function(t,e,n){const r=t.spatialReference,i=(0,rt.g)(r),o=zt;$(n,o,i)||$(t.origin,o,i);const s=t.vertexAttributes.position,a=t.vertexAttributes.normal,l=t.vertexAttributes.tangent,c=new Float64Array(s.length),u=null!=a?new Float32Array(a.length):null,f=null!=l?new Float32Array(l.length):null;(0,it.c)(i,o,Bt,i),(0,tt.f)(Ut,Bt);const h=Dt;(0,B.r)((0,v.d)(Dt),(0,v.d)(e),Ut),h[3]=e[3],(0,H.a)(s,r,c),null!=a&&null!=u&&(0,H.b)(a,s,c,r,u),null!=l&&null!=f&&(0,H.c)(l,s,c,r,f),Zt(c,h,3,o),(0,H.d)(c,s,r),null!=a&&null!=u&&(Zt(u,h,3),(0,H.e)(u,s,c,r,a)),null!=l&&null!=f&&(Zt(f,h,4),(0,H.f)(f,s,c,r,l)),t.vertexAttributesChanged()}(t,e,o):function(t,e,n){const r=zt;if(!$(n,r,t.spatialReference)){const e=t.origin;r[0]=e.x,r[1]=e.y,r[2]=e.z,i.L.getLogger(Et).error(`Failed to project specified origin (wkid:${n.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}Zt(t.vertexAttributes.position,e,3,r),Zt(t.vertexAttributes.normal,e,3),Zt(t.vertexAttributes.tangent,e,4),t.vertexAttributesChanged()}(t,e,o)}}(this,Qt,r),this}offset(t,e,n,r){return this.loaded?(Kt[0]=t,Kt[1]=e,Kt[2]=n,function(t,e,n){if(!t.vertexAttributes?.position)return;const{vertexSpace:r}=t;r.isRelative?((0,H.v)(r,"esri.geometry.support.meshUtils.offset",n),function(t,e){const n=t.origin;t.origin=(0,B.d)((0,s.c)(),n,e)}(r,e)):(0,H.i)(t.spatialReference,n)?function(t,e){const n=t.spatialReference,r=t.vertexAttributes.position,i=t.vertexAttributes.normal,o=t.vertexAttributes.tangent,s=new Float64Array(r.length),a=null!=i?new Float32Array(i.length):null,l=null!=o?new Float32Array(o.length):null,c=t.extent.center,u=Tt;(0,it.c)(n,[c.x,c.y,c.z],Ct,(0,rt.g)(n)),(0,tt.f)(Pt,Ct),(0,B.r)(u,e,Pt),(0,H.a)(r,n,s),null!=i&&null!=a&&(0,H.b)(i,r,s,n,a),null!=o&&null!=l&&(0,H.c)(o,r,s,n,l),Mt(s,u),(0,H.d)(s,r,n),null!=i&&null!=a&&(0,H.e)(a,r,s,n,i),null!=o&&null!=l&&(0,H.f)(l,r,s,n,o),t.vertexAttributesChanged()}(t,e):function(t,e){Mt(t.vertexAttributes.position,e),t.vertexAttributesChanged()}(t,e)}(this,Kt,r),this):(i.L.getLogger(this).error("offset()",(new b).message),this)}scale(t,e){return this.loaded?(function(t,e,n){if(!t.vertexAttributes?.position)return;const{spatialReference:r,vertexSpace:o}=t;if(o.isRelative){(0,H.v)(o,kt,n);const r=n?.origin??t.origin;t.transform??=new O.Z,function(t,e,n,r){const i=e.origin,o=(0,B.s)(qt,r.x,r.y,r.z),a=(0,B.b)(qt,o,i);t.applyLocalInverse(a,Gt);const l=(0,B.q)((0,s.c)(),t.scale,n);t.scale=l,t.applyLocalInverse(a,a),(0,B.b)(a,a,Gt),t.translation=(0,B.d)((0,s.c)(),t.translation,a)}(t.transform,o,e,r)}else{const o=(0,H.i)(r,n),s=n?.origin??t.origin;o?function(t,e,n){const r=t.spatialReference,i=(0,rt.g)(r),o=Ht;$(n,o,i)||$(t.origin,o,i);const s=t.vertexAttributes.position,a=t.vertexAttributes.normal,l=t.vertexAttributes.tangent,c=new Float64Array(s.length),u=null!=a?new Float32Array(a.length):null,f=null!=l?new Float32Array(l.length):null;(0,H.a)(s,r,c),null!=a&&null!=u&&(0,H.b)(a,s,c,r,u),null!=l&&null!=f&&(0,H.c)(l,s,c,r,f),Wt(c,e,o),(0,H.d)(c,s,r),null!=a&&null!=u&&(0,H.e)(u,s,c,r,a),null!=l&&null!=f&&(0,H.f)(f,s,c,r,l),t.vertexAttributesChanged()}(t,e,s):function(t,e,n){const r=Ht;if(!$(n,r,t.spatialReference)){const e=t.origin;r[0]=e.x,r[1]=e.y,r[2]=e.z,i.L.getLogger(kt).error(`Failed to project specified origin (wkid:${n.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}Wt(t.vertexAttributes.position,e,r),t.vertexAttributesChanged()}(t,e,s)}}(this,t,e),this):(i.L.getLogger(this).error("scale()",(new b).message),this)}centerAt(t,e){return this.loaded?(function(t,e,n){if(!t.vertexAttributes?.position)return;const{vertexSpace:r}=t,o=n?.origin??t.origin;r.isRelative?((0,H.v)(r,ut,n),function(t,e,n){const{vertexSpace:r}=t;if(!r.isRelative)return;const o=ht,a=ft;if(!$(e,a,t.spatialReference))return void i.L.getLogger(ut).error(`Failed to project centerAt location (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`);if(!$(n,o,t.spatialReference)){const e=t.origin;o[0]=e.x,o[1]=e.y,o[2]=e.z,i.L.getLogger(ut).error(`Failed to project specified origin (wkid:${n.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}const l=(0,B.b)(pt,a,o),c=r.origin;r.origin=(0,B.d)((0,s.c)(),c,l)}(t,e,o)):(0,H.i)(t.spatialReference,n)?function(t,e,n){const r=(0,H.u)(t.vertexAttributes,n,{geographic:!0}),{position:i,normal:o,tangent:s}=(0,H.g)(r,e,{geographic:!0});t.vertexAttributes.position=i,t.vertexAttributes.normal=o,t.vertexAttributes.tangent=s,t.vertexAttributesChanged()}(t,e,o):function(t,e,n){const r=ht,o=ft;if($(e,o,t.spatialReference)){if(!$(n,r,t.spatialReference)){const e=t.origin;r[0]=e.x,r[1]=e.y,r[2]=e.z,i.L.getLogger(ut).error(`Failed to project specified origin (wkid:${n.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(function(t,e,n){if(t)for(let r=0;r<t.length;r+=3)for(let i=0;i<3;i++)t[r+i]+=e[i]-n[i]})(t.vertexAttributes.position,o,r),t.vertexAttributesChanged()}else i.L.getLogger(ut).error(`Failed to project centerAt location (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(t,e,o)}(this,t,e),this):(i.L.getLogger(this).error("centerAt()",(new b).message),this)}load(t){const{metadata:{displaySource:e}}=this;return e&&this.addResolvingPromise(async function(t,e,r){const{source:i}=e,{loadGLTFMesh:o}=await(0,h.Hl)(Promise.all([n.e(1360),n.e(2432)]).then(n.bind(n,62432)),r),s=await async function(t,e){if(Array.isArray(t)){if(!t.length)throw new c.Z("mesh-load-external:missing-assets","There must be at least one file to load");return t[0]instanceof File?wt(t.map((t=>({name:t.name,mimeType:t.type,source:dt(t)})))):async function(t,e){const n=await(0,h.OT)(t.map((async t=>{const n=await async function(t,e){const{parts:n,assetMimeType:r,assetName:i}=t;if(1===n.length)return new bt(n[0].partUrl);const o=await t.toBlob(e);return(0,h.k_)(e),bt.fromBlob(o,At(i,r))}(t);return(0,h.k_)(e),{name:t.assetName,mimeType:t.assetMimeType,source:n}})));if((0,h.Hc)(e))throw n.forEach((t=>t.source.dispose())),(0,h.zE)();return wt(n)}(t,e)}return dt(t)}(i,r);(0,h.k_)(r);const a=o(new y.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),s.url,{resolveFile:gt(s),requestFile:void 0,useTransform:!0,signal:r?.signal,expectedType:s.type});a.then((()=>s.dispose()),(()=>s.dispose()));const{vertexAttributes:l,components:u}=await a;t.vertexAttributes=l,t.components=u}(this,e,t)),Promise.resolve(this)}addExternalSources(t){this.metadata.externalSources.addMany(t)}updateDisplaySource(t){this.metadata.displaySource=t}clone(){return this.cloneWithVertexSpace(this.vertexSpace.clone())}cloneWithVertexSpace(t){let e=null;if(this.components){const t=new Map,n=new Map;e=this.components.map((e=>e.cloneWithDeduplication(t,n)))}const n={components:e,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),vertexSpace:t,transform:this.transform?.clone()??null,metadata:this.metadata.clone()};return new $t(n)}cloneShallow(){return new $t({components:this.components,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes,vertexSpace:this.vertexSpace.clone(),transform:this.transform,metadata:this.metadata})}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}async toBinaryGLTF(t){const e=n.e(4074).then(n.bind(n,94074)),r=this.load(),i=await Promise.all([e,r]),{toBinaryGLTF:o}=i[0];return o(this,t)}get memoryUsage(){let t=0;if(t+=this.vertexAttributes.memoryUsage,null!=this.components)for(const e of this.components)t+=e.memoryUsage;return t}_clearSources(){this.metadata.clearSources()}static createBox(t,e){if(!(t instanceof y.Z))return i.L.getLogger(Yt).error(".createBox()",(new M).message),null;const n=new $t(Lt(function(){const{faceDescriptions:t,faceVertexOffsets:e,uvScales:n}=Ft,r=4*t.length,i=new Float64Array(3*r),o=new Float32Array(3*r),s=new Float32Array(2*r),a=new Uint32Array(2*t.length*3);let l=0,c=0,u=0,f=0;for(let r=0;r<t.length;r++){const h=t[r],p=l/3;for(const t of e)a[f++]=p+t;const g=h.corners;for(let t=0;t<4;t++){const e=g[t];let r=0;s[u++]=.25*n[t][0]+h.uvOrigin[0],s[u++]=h.uvOrigin[1]-.25*n[t][1];for(let t=0;t<3;t++)0!==h.axis[t]?(i[l++]=.5*h.axis[t],o[c++]=h.axis[t]):(i[l++]=.5*e[r++],o[c++]=0)}}return{position:i,normal:o,uv:s,faces:a}}(),t,e));return e?.imageFace&&"all"!==e.imageFace?function(t,e){const n=t.components[0],r=n.faces,i=Ot[e],o=6*i,s=new Array(6),a=new Array(r.length-6);let l=0,c=0;for(let t=0;t<r.length;t++)t>=o&&t<o+6?s[l++]=r[t]:a[c++]=r[t];if(null!=t.vertexAttributes.uv){const e=new Float32Array(t.vertexAttributes.uv),n=4*i*2,r=[0,1,1,1,1,0,0,0];for(let t=0;t<r.length;t++)e[n+t]=r[t];t.vertexAttributes.uv=e}return t.components=[new w.Z({faces:s,material:n.material}),new w.Z({faces:a})],t}(n,e.imageFace):n}static createSphere(t,e){return t instanceof y.Z?new $t(Lt(function(t=0){const e=Math.round(8*2**t),n=2*e,r=(e-1)*(n+1)+2*n,i=new Float64Array(3*r),o=new Float32Array(3*r),s=new Float32Array(2*r),a=new Uint32Array((e-1)*n*2*3);let l=0,c=0,u=0,f=0;for(let t=0;t<=e;t++){const r=t/e*Math.PI+.5*Math.PI,h=Math.cos(r),p=Math.sin(r);It[2]=p;const g=0===t||t===e,d=g?n-1:n;for(let r=0;r<=d;r++){const p=r/d*2*Math.PI;It[0]=-Math.sin(p)*h,It[1]=Math.cos(p)*h;for(let t=0;t<3;t++)i[l]=.5*It[t],o[l]=It[t],++l;s[c++]=(r+(g?.5:0))/n,s[c++]=t/e,0!==t&&r!==n&&(t!==e&&(a[u++]=f,a[u++]=f+1,a[u++]=f-n),1!==t&&(a[u++]=f,a[u++]=f-n,a[u++]=f-n-1)),f++}}return{position:i,normal:o,uv:s,faces:a}}(e?.densificationFactor||0),t,e)):(i.L.getLogger(Yt).error(".createSphere()",(new M).message),null)}static createCylinder(t,e){return t instanceof y.Z?new $t(Lt(function(t=0){const e=Math.round(16*2**t),n=4*(e+1)+2*e,r=new Float64Array(3*n),i=new Float32Array(3*n),o=new Float32Array(2*n),s=new Uint32Array(4*e*3);let a=0,l=0,c=0,u=0,f=0;for(let t=0;t<=5;t++){const n=0===t||5===t,h=t<=1||t>=4,p=2===t||4===t,g=n?e-1:e;for(let d=0;d<=g;d++){const m=d/g*2*Math.PI,y=n?0:.5;It[0]=y*Math.sin(m),It[1]=y*-Math.cos(m),It[2]=t<=2?.5:-.5;for(let e=0;e<3;e++)r[a++]=It[e],i[l++]=h?2===e?t<=1?1:-1:0:2===e?0:It[e]/y;o[c++]=(d+(n?.5:0))/e,o[c++]=t<=1?1*t/3:t<=3?1*(t-2)/3+1/3:1*(t-4)/3+2/3,p||0===t||d===e||(5!==t&&(s[u++]=f,s[u++]=f+1,s[u++]=f-e),1!==t&&(s[u++]=f,s[u++]=f-e,s[u++]=f-e-1)),f++}}return{position:r,normal:i,uv:o,faces:s}}(e?.densificationFactor||0),t,e)):(i.L.getLogger(Yt).error(".createCylinder()",(new M).message),null)}static createPlane(t,e){if(!(t instanceof y.Z))return i.L.getLogger(Yt).error(".createPlane()",(new M).message),null;const n=e?.facing??"up",r=function(t,e){const n="number"==typeof e?e:null!=e?e.width:1,r="number"==typeof e?e:null!=e?e.height:1;switch(t){case"up":case"down":return{width:n,depth:r};case"north":case"south":return{width:n,height:r};case"east":case"west":return{depth:n,height:r}}}(n,e?.size);return new $t(Lt(function(t){const e=St.facingAxisOrderSwap[t],n=St.position,r=St.normal,i=new Float64Array(n.length),o=new Float32Array(r.length);let s=0;for(let t=0;t<4;t++){const t=s;for(let a=0;a<3;a++){const l=e[a],c=Math.abs(l)-1,u=l>=0?1:-1;i[s]=n[t+c]*u,o[s]=r[t+c]*u,s++}}return{position:i,normal:o,uv:new Float32Array(St.uv),faces:new Uint32Array(St.faces),isPlane:!0}}(n),t,{...e,size:r}))}static createFromPolygon(t,e){if(!(t instanceof x.Z))return i.L.getLogger(Yt).error(".createFromPolygon()",(new _).message),null;const n=function(t){const e=function(t,e,n,r){const i=t.length,o=new Array(i),s=new Array(i),a=new Array(i);let l=0,c=0,u=0,f=0;for(let e=0;e<i;++e)f+=t[e].length;const h=(0,E.n)(3*f);let p=0;for(let f=i-1;f>=0;f--){const g=t[f],d=n===q.CCW_IS_HOLE&&W(g,e,r);if(d&&1!==i)o[l++]=g;else{let t=g.length;for(let e=0;e<l;++e)t+=o[e].length;const n={index:p,pathLengths:new Array(l+1),count:t,holeIndices:new Array(l)};n.pathLengths[0]=g.length,g.length>0&&(a[u++]={index:p,count:g.length}),p=d?k(g,g.length-1,-1,h,p,g.length,e):k(g,0,1,h,p,g.length,e);for(let t=0;t<l;++t){const r=o[t];n.holeIndices[t]=p,n.pathLengths[t+1]=r.length,r.length>0&&(a[u++]={index:p,count:r.length}),p=k(r,0,1,h,p,r.length,e)}l=0,n.count>0&&(s[c++]=n)}}for(let t=0;t<l;++t){const n=o[t];n.length>0&&(a[u++]={index:p,count:n.length}),p=k(n,0,1,h,p,n.length,e)}return s.length=c,a.length=u,{position:h,polygons:s,outlines:a}}(t.rings,t.hasZ,q.CCW_IS_HOLE,t.spatialReference),n=new Array;let r=0,i=0;for(const t of e.polygons){const o=t.count,s=t.index,a=(0,E.d)(e.position,3*s,3*o),l=t.holeIndices.map((t=>t-s)),c=(0,Z.c)((0,I.e)(a,l,3));n.push({position:a,faces:c}),r+=a.length,i+=c.length}const o=function(t,e,n){if(1===t.length)return t[0];const r=(0,E.n)(e),i=new Array(n);let o=0,s=0,a=0;for(const e of t){for(let t=0;t<e.position.length;t++)r[o++]=e.position[t];for(const t of e.faces)i[s++]=t+a;a=o/3}return{position:r,faces:(0,Z.c)(i)}}(n,r,i),s=Array.isArray(o.position)?(0,N.d)(o.position,3,{originalIndices:o.faces}):(0,N.d)(o.position.buffer,6,{originalIndices:o.faces});return o.position=(0,E.a)(new Float64Array(s.buffer)),o.faces=s.indices,o}(t);return new $t({vertexAttributes:new w.M({position:n.position}),components:[new w.Z({faces:n.faces,shading:"flat",material:e?.material??null})],spatialReference:t.spatialReference,vertexSpace:new L.Z})}static async createFromGLTF(t,e,r){if(!(t instanceof y.Z)){const t=new M;throw i.L.getLogger(Yt).error(".createfromGLTF()",t.message),t}const{loadGLTFMesh:o}=await(0,h.Hl)(Promise.all([n.e(1360),n.e(2432)]).then(n.bind(n,62432)),r);return new $t(await o(t,e,r))}static async createFromFiles(t,e,n){const r=t=>i.L.getLogger(Yt).error(".createFromFiles()",t.message);if(!(t instanceof y.Z)){const t=new M;throw r(t),t}const o=n?.layer;if(!o){const t=new T;throw r(t),t}const s=await $t.extractAndFilterFiles(e,o),a=s.reduce(((t,e)=>(0,st.i)(o.infoFor3D,e)?t+1:t),0);if(0===a){const t=new C;throw r(t),t}if(a>1){const t=new P;throw r(t),t}const l=$t.createWithExternalSource(t,s),[c]=await o.uploadAssets([l],n);return c}static async extractAndFilterFiles(t,e){const n=e?.infoFor3D;if(!n)return t;const r=await async function(t){const e=[];for(const n of t)n.name.toLowerCase().endsWith(".zip")?e.push(Vt(n)):e.push(Promise.resolve(n));return(await Promise.all(e)).flat()}(t);return r.filter((t=>(0,st.a)(n,t)))}static createWithExternalSource(t,e,n){const r=n?.extent??null,{x:i,y:o,z:s,spatialReference:a}=t,l=n?.transform?.clone()??new O.Z,c=n?.vertexSpace??new F.Z({origin:[i,o,s??0]}),u={source:e,extent:r},f=new _t;return f.externalSources.push(u),new $t({metadata:f,transform:l,vertexSpace:c,spatialReference:a})}static createIncomplete(t,e){const{x:n,y:r,z:i,spatialReference:o}=t,s=e?.transform?.clone()??new O.Z,a=e?.vertexSpace??new F.Z({origin:[n,r,i??0]}),l=new $t({transform:s,vertexSpace:a,spatialReference:o});return l.addResolvingPromise(Promise.reject(new c.Z("mesh-incomplete","Mesh resources are not complete"))),l}};(0,l._)([(0,g.Cb)({type:[w.Z],json:{write:!0}})],Jt.prototype,"components",void 0),(0,l._)([(0,g.Cb)({nonNullable:!0,types:Xt,constructOnly:!0,json:{write:!0}})],Jt.prototype,"vertexSpace",void 0),(0,l._)([(0,g.Cb)({type:O.Z,json:{write:!0}})],Jt.prototype,"transform",void 0),(0,l._)([(0,g.Cb)({constructOnly:!0})],Jt.prototype,"metadata",void 0),(0,l._)([(0,g.Cb)()],Jt.prototype,"hasExtent",null),(0,l._)([(0,g.Cb)()],Jt.prototype,"_transformedExtent",null),(0,l._)([(0,g.Cb)()],Jt.prototype,"_untransformedExtent",null),(0,l._)([(0,g.Cb)()],Jt.prototype,"anchor",null),(0,l._)([(0,g.Cb)()],Jt.prototype,"origin",null),(0,l._)([(0,g.Cb)({readOnly:!0,json:{read:!1}})],Jt.prototype,"extent",null),(0,l._)([(0,g.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],Jt.prototype,"hasZ",void 0),(0,l._)([(0,g.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],Jt.prototype,"hasM",void 0),(0,l._)([(0,g.Cb)({type:w.M,nonNullable:!0,json:{write:!0}})],Jt.prototype,"vertexAttributes",void 0),Jt=$t=(0,l._)([(0,d.j)(Yt)],Jt);const Kt=(0,s.c)(),Qt=(0,v.c)(),te=Jt;var ee=n(87258);n(86748),n(14249),n(66284),n(8925),n(3482),n(76131),n(36097),n(87239),n(60217),n(29107),n(30574),n(2157),n(25977),n(58076),n(98242),n(7471),n(54414),n(1648),n(45154),n(16769),n(93603),n(15438),n(593),n(85699),n(55531),n(96055),n(47776),n(18033),n(6331),n(62048),n(56890),n(30493),n(4292),n(75626),n(72652),n(29641),n(70821),n(3296),n(34229),n(37029),n(96467),n(63571),n(30776),n(63130),n(25696),n(94216),n(42775),n(95834),n(34394),n(57150),n(76726),n(20444),n(76393),n(78548),n(2497),n(49906),n(46527),n(11799),n(48649),n(81731),n(9960),n(30823),n(53326),n(5853),n(39141),n(52461),n(48243),n(34635),n(10401),n(49900),n(58943),n(67477),n(78533),n(74653),n(91091),n(70737),n(36834),n(8487),n(17817),n(90814),n(15459),n(97189),n(61847),n(28212),n(16955),n(22401),n(48699),n(77894),n(55187),n(8586),n(44509),n(69814),n(11305),n(62259),n(44790),n(5909),n(60669),n(48208),n(51589),n(97546),n(9801),n(53523),n(42911),n(46826),n(45433),n(54732);const ne=()=>i.L.getLogger("esri.rest.support.meshFeatureSet");function re(t,e,n){const i=n.features;n.features=[],delete n.geometryType;const o=ee.Z.fromJSON(n);if(o.geometryType="mesh",!n.assetMaps)return o;const s=se(e,n.assetMaps),a=t.sourceSpatialReference??at.Z.WGS84,l=n.globalIdFieldName,{outFields:c}=t,u=null!=c&&c.length>0?(f=c.includes("*")?null:new Set(c),({attributes:t})=>{if(!t)return{};if(!f)return t;for(const e in t)f.has(e)||delete t[e];return t}):()=>({});var f;for(const t of i){const n=ie(t,l,a,e,s);null!=n&&o.features.push(new r.Z({geometry:n,attributes:u(t)}))}return o}function ie(t,e,n,r,i){const o=t.attributes[e],l=i.get(o);if(null==l)return ne().error("mesh-feature-set:asset-not-found","Service returned a feature which was not found in the asset map",t),null;if(!t.geometry)return ne().error("mesh-feature-set:no-geometry","Service returned a feature without geometry",t),null;const{originPoint:c,originVector:u}=function({attributes:t},e,{transformFieldRoles:n}){const r=t[n.originX],i=t[n.originY],o=t[n.originZ];return{originPoint:new y.Z({x:r,y:i,z:o,spatialReference:e}),originVector:(0,s.f)(r,i,o)}}(t,n,r),f=a.Z.fromJSON(t.geometry);f.spatialReference=n;const h=function(t,{transformFieldRoles:e}){return new O.Z({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}(t.attributes,r),p=l.projectVertices?new S.Z({origin:u}):new F.Z({origin:u}),g=function(t){const e=Array.from(t.files.values()),n=new Array;for(const t of e){if(t.status!==oe.COMPLETED)return null;const e=new Array;for(const n of t.parts){if(!n)return null;e.push(new Q.S(n.url,n.hash))}n.push(new Q.c(t.name,t.mimeType,e))}return n}(l);return g?te.createWithExternalSource(c,g,{extent:f,transform:h,vertexSpace:p}):te.createIncomplete(c,{extent:f,transform:h,vertexSpace:p})}var oe;function se(t,e){const n=new Map;for(const r of e){const e=r.parentGlobalId;if(null==e)continue;const i=r.assetName,s=r.assetType,a=r.assetHash,l=r.assetURL,c=r.conversionStatus,u=r.seqNo,f=(0,st.e)(s,t.supportedFormats);if(!f){ne().error("mesh-feature-set:unknown-format",`Service returned an asset of type ${s}, but it does not list it as a supported type`);continue}const h=(0,o.o)(n,e,(()=>{return{projectVertices:(t=r.flags,{projectVertices:t.includes("PROJECT_VERTICES")}).projectVertices,files:new Map};var t}));(0,o.o)(h.files,i,(()=>({name:i,type:s,mimeType:f,status:ae(c),parts:[]}))).parts[u]={hash:a,url:l}}return n}function ae(t){switch(t){case"COMPLETED":case"SUBMITTED":return oe.COMPLETED;case"INPROGRESS":return oe.PENDING;default:return oe.FAILED}}!function(t){t[t.FAILED=0]="FAILED",t[t.PENDING=1]="PENDING",t[t.COMPLETED=2]="COMPLETED"}(oe||(oe={}))},55633:(t,e,n)=>{n.d(e,{c:()=>o,h:()=>s,n:()=>p}),n(82426);var r=n(72836),i=n(66106);n(29794);function o(t=g){return[t[0],t[1],t[2],t[3]]}function s(t,e,n,i=0,p=Math.floor(n*(1/3)),g=Math.floor(n*(2/3))){if(n<3)return!1;e(l,i);let d=p,m=!1;for(;d<n-1&&!m;)e(c,d),d++,m=!(0,r.e)(l,c);if(!m)return!1;for(d=Math.max(d,g),m=!1;d<n&&!m;)e(u,d),d++,(0,r.b)(f,l,c),(0,r.p)(f,f),(0,r.b)(h,c,u),(0,r.p)(h,h),m=!(0,r.e)(l,u)&&!(0,r.e)(c,u)&&Math.abs((0,r.i)(f,h))<a;return m?(function(t,e,n,r=o()){const i=n[0]-e[0],s=n[1]-e[1],a=n[2]-e[2],l=t[0]-e[0],c=t[1]-e[1],u=t[2]-e[2],f=s*u-a*c,h=a*l-i*u,p=i*c-s*l,g=f*f+h*h+p*p,d=Math.abs(g-1)>1e-5&&g>1e-12?1/Math.sqrt(g):1;r[0]=f*d,r[1]=h*d,r[2]=p*d,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2])}(l,c,u,t),!0):(0!==i||1!==p||2!==g)&&s(t,e,n,0,1,2)}n(48578),n(92143),n(89034),n(40961),n(99045);const a=.99619469809,l=(0,i.c)(),c=(0,i.c)(),u=(0,i.c)(),f=(0,i.c)(),h=(0,i.c)();function p(t){return t}(0,i.c)();const g=[0,0,1,0];var d,m;(m=d||(d={}))[m.NONE=0]="NONE",m[m.CLAMP=1]="CLAMP",m[m.INFINITE_MIN=4]="INFINITE_MIN",m[m.INFINITE_MAX=8]="INFINITE_MAX",d.INFINITE_MIN,d.INFINITE_MAX,d.INFINITE_MAX},35861:(t,e,n)=>{n.d(e,{a:()=>c,c:()=>f,e:()=>h,f:()=>u,g:()=>a,m:()=>l,s:()=>s});var r=n(66106),i=n(29794),o=(n(72836),n(7200));function s(t,e,n){n*=.5;const r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function a(t,e){const n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>(0,i.g)()?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function l(t,e,n){const r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+s*a+i*c-o*l,t[1]=i*u+s*l+o*a-r*c,t[2]=o*u+s*c+r*l-i*a,t[3]=s*u-r*a-i*l-o*c,t}function c(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function u(t,e,n,r){const i=.5*Math.PI/180;e*=i,n*=i,r*=i;const o=Math.sin(e),s=Math.cos(e),a=Math.sin(n),l=Math.cos(n),c=Math.sin(r),u=Math.cos(r);return t[0]=o*l*u-s*a*c,t[1]=s*a*u+o*l*c,t[2]=s*l*c-o*a*u,t[3]=s*l*u+o*a*c,t}const f=o.c,h=o.a;(0,r.c)(),(0,r.f)(1,0,0),(0,r.f)(0,1,0)},45087:(t,e,n)=>{function r(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}function o(t,e){return new Float64Array(t,e,4)}n.d(e,{I:()=>s,a:()=>r,b:()=>i,c:()=>o});const s=[0,0,0,1]},57257:(t,e,n)=>{n.d(e,{g:()=>l});var r=n(53785),i=n(60947);const o=new i.Z(r.T),s=new i.Z(r.t),a=new i.Z(r.u);function l(t){return t&&((0,r.v)(t)||(0,r.f)(t,s))?s:t&&((0,r.w)(t)||(0,r.f)(t,a))?a:o}new i.Z(r.s)},50766:(t,e,n)=>{n.d(e,{a:()=>a});var r=n(40961),i=n(72836),o=n(66106),s=n(94446);function a(t,e,n){return(0,i.b)(l,e,t),(0,i.b)(c,n,t),(0,i.l)((0,i.k)(l,l,c))/2}new r.O(s.c),new r.O((()=>({p0:(0,o.c)(),p1:(0,o.c)(),p2:(0,o.c)()})));const l=(0,o.c)(),c=(0,o.c)()},79641:(t,e,n)=>{n.d(e,{a:()=>o,b:()=>s,c:()=>i,d:()=>u,e:()=>l,m:()=>r,n:()=>f,s:()=>c,t:()=>a});const r=n(92143).L.getLogger("esri.views.3d.support.buffer.math");function i(t,e,n){o(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)}function o(t,e,n,i=3,o=i){if(t.length/i!==Math.ceil(e.length/o))return r.error("source and destination buffers need to have the same number of elements"),t;const s=t.length/i,a=n[0],l=n[1],c=n[2],u=n[4],f=n[5],h=n[6],p=n[8],g=n[9],d=n[10],m=n[12],y=n[13],x=n[14];let v=0,w=0;for(let n=0;n<s;n++){const n=e[v],r=e[v+1],s=e[v+2];t[w]=a*n+u*r+p*s+m,t[w+1]=l*n+f*r+g*s+y,t[w+2]=c*n+h*r+d*s+x,v+=o,w+=i}return t}function s(t,e,n){a(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)}function a(t,e,n,i=3,o=i){if(t.length/i!==Math.ceil(e.length/o))return void r.error("source and destination buffers need to have the same number of elements");const s=t.length/i,a=n[0],l=n[1],c=n[2],u=n[3],f=n[4],h=n[5],p=n[6],g=n[7],d=n[8];let m=0,y=0;for(let n=0;n<s;n++){const n=e[m],r=e[m+1],s=e[m+2];t[y]=a*n+u*r+p*s,t[y+1]=l*n+f*r+g*s,t[y+2]=c*n+h*r+d*s,m+=o,y+=i}}function l(t,e,n){c(t.typedBuffer,e,n,t.typedBufferStride)}function c(t,e,n,r=3){const i=Math.min(t.length/r,e.count),o=e.typedBuffer,s=e.typedBufferStride;let a=0,l=0;for(let e=0;e<i;e++)t[l]=n*o[a],t[l+1]=n*o[a+1],t[l+2]=n*o[a+2],a+=s,l+=r}function u(t,e){f(t.typedBuffer,e.typedBuffer,t.typedBufferStride,e.typedBufferStride)}function f(t,e,n=3,r=n){const i=Math.min(t.length/n,e.length/r);let o=0,s=0;for(let a=0;a<i;a++){const i=e[o],a=e[o+1],l=e[o+2],c=i*i+a*a+l*l;if(c>0){const e=1/Math.sqrt(c);t[s]=e*i,t[s+1]=e*a,t[s+2]=e*l}o+=r,s+=n}}},40961:(t,e,n)=>{n.d(e,{O:()=>p,b:()=>x,c:()=>v,d:()=>T,e:()=>_,f:()=>A,s:()=>y,w:()=>b}),n(48578);var r=n(30773),i=n(72836),o=n(66106),s=n(13457),a=n(16912),l=n(57532),c=n(45087),u=n(32191),f=n(68681),h=n(82426);class p{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.n)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*g);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,g));t++)this._items.push(this._allocator())}}const g=1024;class d{constructor(t,e,n){this._itemByteSize=t,this._itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this._itemByteSize)}get(){0===this._itemsPtr&&(0,r.n)((()=>this._reset()));const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this._itemCreate(t,e*this._itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=m){return new d(16,u.b,t)}static createVec3f64(t=m){return new d(24,o.b,t)}static createVec4f64(t=m){return new d(32,f.c,t)}static createMat3f64(t=m){return new d(72,a.c,t)}static createMat4f64(t=m){return new d(128,l.c,t)}static createQuatf64(t=m){return new d(32,c.c,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const m=4*s.B.KILOBYTES,y=(d.createVec2f64(),d.createVec3f64());d.createVec4f64(),d.createMat3f64();const x=d.createMat4f64();function v(t){return t?w((0,o.a)(t.origin),(0,o.a)(t.direction)):w((0,o.c)(),(0,o.c)())}function w(t,e){return{origin:t,direction:e}}function b(t,e){const n=M.get();return n.origin=t,n.direction=e,n}function A(t,e,n=v()){return(0,i.c)(n.origin,t),(0,i.b)(n.direction,e,t),n}function _(t,e,n){const r=(0,i.i)(t.direction,(0,i.b)(n,e,t.origin));return(0,i.d)(n,t.origin,(0,i.q)(n,t.direction,r)),n}d.createQuatf64();const M=new p((()=>v()));function T(t,e){const n=(0,i.i)(t,e)/((0,i.l)(t)*(0,i.l)(e));return-(0,h.b)(n)}(0,o.c)(),(0,o.c)()},81773:(t,e,n)=>{n.d(e,{M:()=>m,Z:()=>M});var r,i=n(29768),o=n(12047),s=n(76506),a=n(92143),l=n(34250),c=n(86787),u=n(17533),f=n(91306),h=n(44265),p=n(71337);n(21972),n(48578),n(86656),n(66396),n(22723),n(379),n(62062),n(6540),n(6906),n(79456),n(50406),n(60991),n(31450),n(48027),n(54174),n(82426),n(72836),n(66106),n(29794),n(68225),n(55636),n(82058),n(88762),n(32101),n(97714),n(2906),n(38742),n(88324),n(66122);const g="esri.geometry.support.MeshVertexAttributes",d=a.L.getLogger(g);let m=r=class extends o.wq{constructor(t){super(t),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(t){return x(t,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},d)}castPosition(t){return t&&t instanceof Float32Array&&d.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),x(t,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},d)}castUv(t){return x(t,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},d)}castNormal(t){return x(t,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},d)}castTangent(t){return x(t,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},d)}clone(){const t={position:(0,s.d9)(this.position),uv:(0,s.d9)(this.uv),normal:(0,s.d9)(this.normal),tangent:(0,s.d9)(this.tangent),color:(0,s.d9)(this.color)};return new r(t)}clonePositional(){const t={position:(0,s.d9)(this.position),normal:(0,s.d9)(this.normal),tangent:(0,s.d9)(this.tangent),uv:this.uv,color:this.color};return new r(t)}get memoryUsage(){let t=0;return t+=this.position.byteLength,null!=this.uv&&(t+=this.uv.byteLength),null!=this.normal&&(t+=this.normal.byteLength),null!=this.tangent&&(t+=this.tangent.byteLength),null!=this.color&&(t+=this.color.byteLength),t}};function y(t,e,n,r){const{loggerTag:i,stride:o}=e;return t.length%o!=0?(r.error(i,`Invalid array length, expected a multiple of ${o}`),new n([])):t}function x(t,e,n,r,i){if(!t)return t;if(t instanceof e)return y(t,r,e,i);for(const o of n)if(t instanceof o)return y(new e(t),r,e,i);if(Array.isArray(t))return y(new e(t),r,e,i);{const r=n.map((t=>`'${t.name}'`));return i.error(`Failed to set property, expected one of ${r}, but got ${t.constructor.name}`),new e([])}}function v(t,e,n){e[n]=function(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=t[n];return e}(t)}var w;(0,i._)([(0,l.Cb)({json:{write:v}})],m.prototype,"color",void 0),(0,i._)([(0,c.p)("color")],m.prototype,"castColor",null),(0,i._)([(0,l.Cb)({nonNullable:!0,json:{write:v}})],m.prototype,"position",void 0),(0,i._)([(0,c.p)("position")],m.prototype,"castPosition",null),(0,i._)([(0,l.Cb)({json:{write:v}})],m.prototype,"uv",void 0),(0,i._)([(0,c.p)("uv")],m.prototype,"castUv",null),(0,i._)([(0,l.Cb)({json:{write:v}})],m.prototype,"normal",void 0),(0,i._)([(0,c.p)("normal")],m.prototype,"castNormal",null),(0,i._)([(0,l.Cb)({json:{write:v}})],m.prototype,"tangent",void 0),(0,i._)([(0,c.p)("tangent")],m.prototype,"castTangent",null),m=r=(0,i._)([(0,u.j)(g)],m);const b="esri.geometry.support.MeshComponent",A=a.L.getLogger(b);let _=w=class extends o.wq{static from(t){return(0,f.l)(w,t)}constructor(t){super(t),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1}castFaces(t){return x(t,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},A)}castMaterial(t){return(0,f.l)(t&&"object"==typeof t&&("metallic"in t||"roughness"in t||"metallicRoughnessTexture"in t)?p.Z:h.Z,t)}clone(){return new w({faces:(0,s.d9)(this.faces),shading:this.shading,material:(0,s.d9)(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(t,e){const n={faces:(0,s.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(t,e):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new w(n)}get memoryUsage(){let t=0;return null!=this.faces&&(t+=this.faces.byteLength),null!=this.material&&(t+=this.material.memoryUsage),t}};(0,i._)([(0,l.Cb)({json:{write:!0}})],_.prototype,"faces",void 0),(0,i._)([(0,c.p)("faces")],_.prototype,"castFaces",null),(0,i._)([(0,l.Cb)({type:h.Z,json:{write:!0}})],_.prototype,"material",void 0),(0,i._)([(0,c.p)("material")],_.prototype,"castMaterial",null),(0,i._)([(0,l.Cb)()],_.prototype,"name",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],_.prototype,"shading",void 0),(0,i._)([(0,l.Cb)({type:Boolean})],_.prototype,"trustSourceNormals",void 0),_=w=(0,i._)([(0,u.j)(b)],_);const M=_},66705:(t,e,n)=>{n.d(e,{Z:()=>h});var r=n(29768),i=n(66122),o=n(12047),s=n(34250),a=(n(91306),n(48578),n(59465)),l=n(17533),c=n(66106),u=n(91597);n(21972),n(92143),n(31450),n(76506),n(86656),n(66396),n(22723),n(379),n(62062),n(6540),n(6906),n(79456),n(50406),n(60991),n(57251),n(86787),n(97714),n(2906),n(73796),n(60947),n(53785),n(89623),n(73173),n(82058),n(88762),n(32101),n(35132);let f=class extends((0,i.J)(o.wq)){constructor(t){super(t),this.type="georeferenced-relative",this.isRelative=!0,this.isGeoreferenced=!0,this.origin=(0,c.c)()}getOriginPoint(t){const[e,n,r]=this.origin;return new u.Z({x:e,y:n,z:r,spatialReference:t})}setOriginFromPoint({x:t,y:e,z:n}){this.origin=(0,c.f)(t,e,n??0)}};(0,r._)([(0,a.e)({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],f.prototype,"type",void 0),(0,r._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"origin",void 0),f=(0,r._)([(0,l.j)("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],f);const h=f},46961:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(29768),i=n(66122),o=n(12047),s=(n(92143),n(91306),n(48578),n(60991),n(59465)),a=n(17533);n(21972),n(34250),n(66396),n(22723),n(76506),n(86656),n(31450),n(379),n(62062),n(6540),n(6906),n(79456),n(50406),n(57251);let l=class extends((0,i.J)(o.wq)){constructor(){super({}),this.type="georeferenced",this.isRelative=!1,this.isGeoreferenced=!0}};(0,r._)([(0,s.e)({georeferenced:"georeferenced"},{readOnly:!0})],l.prototype,"type",void 0),l=(0,r._)([(0,a.j)("esri.geometry.support.MeshGeoreferencedVertexSpace")],l);const c=l},45274:(t,e,n)=>{n.d(e,{Z:()=>h});var r=n(29768),i=n(66122),o=n(12047),s=n(34250),a=(n(91306),n(48578),n(59465)),l=n(17533),c=n(66106),u=n(91597);n(21972),n(92143),n(31450),n(76506),n(86656),n(66396),n(22723),n(379),n(62062),n(6540),n(6906),n(79456),n(50406),n(60991),n(57251),n(86787),n(97714),n(2906),n(73796),n(60947),n(53785),n(89623),n(73173),n(82058),n(88762),n(32101),n(35132);let f=class extends((0,i.J)(o.wq)){constructor(t){super(t),this.type="local",this.isRelative=!0,this.isGeoreferenced=!1,this.origin=(0,c.c)()}getOriginPoint(t){const[e,n,r]=this.origin;return new u.Z({x:e,y:n,z:r,spatialReference:t})}setOriginFromPoint({x:t,y:e,z:n}){this.origin=(0,c.f)(t,e,n??0)}};(0,r._)([(0,a.e)({local:"local"},{readOnly:!0})],f.prototype,"type",void 0),(0,r._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"origin",void 0),f=(0,r._)([(0,l.j)("esri.geometry.support.MeshLocalVertexSpace")],f);const h=f},44265:(t,e,n)=>{n.d(e,{Z:()=>h});var r,i=n(29768),o=n(48027),s=n(12047),a=n(34250),l=(n(91306),n(48578),n(17533)),c=n(68225),u=n(88324);n(54174),n(82426),n(72836),n(66106),n(29794),n(92143),n(31450),n(76506),n(21972),n(86656),n(66396),n(22723),n(379),n(62062),n(6540),n(6906),n(79456),n(50406),n(60991),n(55636),n(82058),n(88762),n(32101),n(97714),n(2906),n(38742),n(66122);let f=r=class extends s.wq{constructor(t){super(t),this.color=null,this.colorTexture=null,this.colorTextureTransform=null,this.normalTexture=void 0,this.normalTextureTransform=void 0,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(t,e){const n=null!=t?t.get(this):null;if(n)return n;const i=new r(this.clonePropertiesWithDeduplication(e));return null!=t&&t.set(this,i),i}clonePropertiesWithDeduplication(t){return{color:null!=this.color?this.color.clone():null,colorTexture:this.colorTexture?.cloneWithDeduplication(t),normalTexture:this.normalTexture?.cloneWithDeduplication(t),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:this.colorTextureTransform?.clone(),normalTextureTransform:this.normalTextureTransform?.clone()}}get memoryUsage(){return this.getMemoryUsage()}getMemoryUsage(){let t=0;return t+=null!=this.color?16:0,null!=this.colorTexture&&(t+=this.colorTexture.memoryUsage),t+=null!=this.colorTextureTransform?20:0,null!=this.normalTexture&&(t+=this.normalTexture.memoryUsage),t+=null!=this.normalTextureTransform?20:0,t}};(0,i._)([(0,a.Cb)({type:o.Z,json:{write:!0}})],f.prototype,"color",void 0),(0,i._)([(0,a.Cb)({type:c.Z,json:{write:!0}})],f.prototype,"colorTexture",void 0),(0,i._)([(0,a.Cb)({type:u.Z,json:{write:!0}})],f.prototype,"colorTextureTransform",void 0),(0,i._)([(0,a.Cb)({type:c.Z,json:{write:!0}})],f.prototype,"normalTexture",void 0),(0,i._)([(0,a.Cb)({type:u.Z,json:{write:!0}})],f.prototype,"normalTextureTransform",void 0),(0,i._)([(0,a.Cb)({nonNullable:!0,json:{write:!0}})],f.prototype,"alphaMode",void 0),(0,i._)([(0,a.Cb)({nonNullable:!0,json:{write:!0}})],f.prototype,"alphaCutoff",void 0),(0,i._)([(0,a.Cb)({nonNullable:!0,json:{write:!0}})],f.prototype,"doubleSided",void 0),f=r=(0,i._)([(0,l.j)("esri.geometry.support.MeshMaterial")],f);const h=f},71337:(t,e,n)=>{n.d(e,{Z:()=>h});var r,i=n(29768),o=n(48027),s=n(34250),a=(n(91306),n(48578),n(17533)),l=n(44265),c=n(68225),u=n(88324);n(54174),n(82426),n(72836),n(66106),n(29794),n(92143),n(31450),n(76506),n(66396),n(22723),n(86656),n(60991),n(6540),n(12047),n(21972),n(379),n(62062),n(6906),n(79456),n(50406),n(55636),n(82058),n(88762),n(32101),n(97714),n(2906),n(38742),n(66122);let f=r=class extends l.Z{constructor(t){super(t),this.emissiveColor=null,this.emissiveTexture=null,this.emissiveTextureTransform=void 0,this.occlusionTexture=null,this.occlusionTextureTransform=void 0,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null,this.metallicRoughnessTextureTransform=void 0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(t,e){const n=null!=t?t.get(this):null;if(n)return n;const i=new r(this.clonePropertiesWithDeduplication(e));return null!=t&&t.set(this,i),i}getMemoryUsage(){let t=super.getMemoryUsage();return t+=null!=this.emissiveColor?16:0,null!=this.emissiveTexture&&(t+=this.emissiveTexture.memoryUsage),t+=null!=this.emissiveTextureTransform?20:0,null!=this.occlusionTexture&&(t+=this.occlusionTexture.memoryUsage),t+=null!=this.occlusionTextureTransform?20:0,null!=this.metallicRoughnessTexture&&(t+=this.metallicRoughnessTexture.memoryUsage),t+=null!=this.metallicRoughnessTextureTransform?20:0,t}clonePropertiesWithDeduplication(t){return{...super.clonePropertiesWithDeduplication(t),emissiveColor:this.emissiveColor?.clone(),emissiveTexture:this.emissiveTexture?.cloneWithDeduplication(t),emissiveTextureTransform:this.emissiveTextureTransform?.clone(),occlusionTexture:this.occlusionTexture?.cloneWithDeduplication(t),occlusionTextureTransform:this.occlusionTextureTransform?.clone(),metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:this.metallicRoughnessTexture?.cloneWithDeduplication(t),metallicRoughnessTextureTransform:this.metallicRoughnessTextureTransform?.clone()}}};(0,i._)([(0,s.Cb)({type:o.Z,json:{write:!0}})],f.prototype,"emissiveColor",void 0),(0,i._)([(0,s.Cb)({type:c.Z,json:{write:!0}})],f.prototype,"emissiveTexture",void 0),(0,i._)([(0,s.Cb)({type:u.Z,json:{write:!0}})],f.prototype,"emissiveTextureTransform",void 0),(0,i._)([(0,s.Cb)({type:c.Z,json:{write:!0}})],f.prototype,"occlusionTexture",void 0),(0,i._)([(0,s.Cb)({type:u.Z,json:{write:!0}})],f.prototype,"occlusionTextureTransform",void 0),(0,i._)([(0,s.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],f.prototype,"metallic",void 0),(0,i._)([(0,s.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],f.prototype,"roughness",void 0),(0,i._)([(0,s.Cb)({type:c.Z,json:{write:!0}})],f.prototype,"metallicRoughnessTexture",void 0),(0,i._)([(0,s.Cb)({type:u.Z,json:{write:!0}})],f.prototype,"metallicRoughnessTextureTransform",void 0),f=r=(0,i._)([(0,a.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],f);const h=f},68225:(t,e,n)=>{n.d(e,{Z:()=>m});var r,i=n(29768),o=(n(48578),n(55636)),s=n(12047),a=n(34250),l=n(91306),c=n(97714),u=n(17533),f=n(2906),h=n(38742);n(82058),n(31450),n(76506),n(88762),n(32101),n(60991),n(92143),n(21972),n(86656),n(66396),n(22723),n(379),n(62062),n(6540),n(6906),n(79456),n(50406);const p=new WeakMap;let g=0,d=r=class extends s.wq{constructor(t){super(t),this.wrap="repeat"}get url(){return this._get("url")||null}set url(t){this._set("url",t),t&&this._set("data",null)}get data(){return this._get("data")||null}set data(t){this._set("data",t),t&&this._set("url",null)}writeData(t,e,n,r){if(t instanceof HTMLImageElement){const i={type:"image-element",src:(0,h.t)(t.src,r),crossOrigin:t.crossOrigin};e[n]=i}else if(t instanceof HTMLCanvasElement){const r=t.getContext("2d").getImageData(0,0,t.width,t.height),i={type:"canvas-element",imageData:this._encodeImageData(r)};e[n]=i}else if(t instanceof HTMLVideoElement){const i={type:"video-element",src:(0,h.t)(t.src,r),autoplay:t.autoplay,loop:t.loop,muted:t.muted,crossOrigin:t.crossOrigin,preload:t.preload};e[n]=i}else if(t instanceof ImageData){const r={type:"image-data",imageData:this._encodeImageData(t)};e[n]=r}}readData(t){switch(t.type){case"image-element":{const e=new Image;return e.src=t.src,e.crossOrigin=t.crossOrigin,e}case"canvas-element":{const e=this._decodeImageData(t.imageData),n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").putImageData(e,0,0),n}case"image-data":return this._decodeImageData(t.imageData);case"video-element":{const e=document.createElement("video");return e.src=t.src,e.crossOrigin=t.crossOrigin,e.autoplay=t.autoplay,e.loop=t.loop,e.muted=t.muted,e.preload=t.preload,e}default:return}}get transparent(){const t=this.data,e=this.url;if(t instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(t.getContext("2d").getImageData(0,0,t.width,t.height));if(t instanceof ImageData)return this._imageDataContainsTransparent(t);if(e){const t=e.substr(e.length-4,4).toLowerCase(),n=e.substr(0,15).toLocaleLowerCase();if(".png"===t||"data:image/png;"===n)return!0}return!1}set transparent(t){this._overrideIfSome("transparent",t)}get contentHash(){const t="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",e=(e="")=>`d:${e},t:${this.transparent},w:${t}`;return null!=this.url?e(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?e(this.data.src):(p.has(this.data)||p.set(this.data,++g),e(p.get(this.data))):e()}get memoryUsage(){let t=0;if(t+=null!=this.url?this.url.length:0,null!=this.data){const e=this.data;"data"in e?t+=e.data.byteLength:e instanceof HTMLImageElement?t+=e.naturalWidth*e.naturalHeight*3:e instanceof HTMLCanvasElement&&(t+=e.width*e.height*3)}return t}clone(){const t={url:this.url,data:this.data,wrap:this._cloneWrap()};return new r(t)}cloneWithDeduplication(t){const e=t.get(this);if(e)return e;const n=this.clone();return t.set(this,n),n}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(t){let e="";for(let n=0;n<t.data.length;n++)e+=String.fromCharCode(t.data[n]);return{data:btoa(e),width:t.width,height:t.height}}_decodeImageData(t){const e=atob(t.data),n=new Uint8ClampedArray(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return(0,o.w)(n,t.width,t.height)}_imageDataContainsTransparent(t){for(let e=3;e<t.data.length;e+=4)if(255!==t.data[e])return!0;return!1}static from(t){return"string"==typeof t?new r({url:t}):t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData||t instanceof HTMLVideoElement?new r({data:t}):(0,l.l)(r,t)}};(0,i._)([(0,a.Cb)({type:String,json:{write:h.w}})],d.prototype,"url",null),(0,i._)([(0,a.Cb)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,a.Cb)()],d.prototype,"data",null),(0,i._)([(0,f.w)("data")],d.prototype,"writeData",null),(0,i._)([(0,c.r)("data")],d.prototype,"readData",null),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],d.prototype,"transparent",null),(0,i._)([(0,a.Cb)({json:{write:!0}})],d.prototype,"wrap",void 0),(0,i._)([(0,a.Cb)({readOnly:!0})],d.prototype,"contentHash",null),d=r=(0,i._)([(0,u.j)("esri.geometry.support.MeshTexture")],d);const m=d},88324:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(29768),i=n(66122),o=n(12047),s=n(34250),a=(n(91306),n(48578),n(17533));n(21972),n(92143),n(31450),n(76506),n(86656),n(66396),n(22723),n(379),n(62062),n(6540),n(6906),n(79456),n(50406),n(60991);let l=class extends((0,i.J)(o.wq)){constructor(t){super(t),this.offset=[0,0],this.rotation=0,this.scale=[1,1]}};(0,r._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],l.prototype,"offset",void 0),(0,r._)([(0,s.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],l.prototype,"rotation",void 0),(0,r._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],l.prototype,"scale",void 0),l=(0,r._)([(0,a.j)("esri.geometry.support.MeshTextureTransform")],l);const c=l},45003:(t,e,n)=>{n.d(e,{Z:()=>y});var r,i=n(29768),o=n(12047),s=n(34250),a=(n(91306),n(48578),n(17533)),l=n(65775),c=n(57532),u=n(35861),f=n(45087),h=n(72836),p=n(66106),g=n(34987);n(21972),n(92143),n(31450),n(76506),n(86656),n(66396),n(22723),n(379),n(62062),n(6540),n(6906),n(79456),n(50406),n(60991),n(29794),n(7200),n(82426);let d=r=class extends o.wq{constructor(t){super(t),this.translation=(0,p.c)(),this.rotationAxis=(0,p.g)(g.u),this.rotationAngle=0,this.scale=(0,p.f)(1,1,1)}get rotation(){return(0,g.f)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,p.a)((0,g.d)(t)),this.rotationAngle=(0,g.g)(t)}get localMatrix(){const t=(0,c.a)();return(0,u.s)(m,(0,g.d)(this.rotation),(0,g.b)(this.rotation)),(0,l.a)(t,m,this.translation,this.scale),t}get localMatrixInverse(){return(0,l.i)((0,c.a)(),this.localMatrix)}applyLocal(t,e){return(0,h.t)(e,t,this.localMatrix)}applyLocalInverse(t,e){return(0,h.t)(e,t,this.localMatrixInverse)}equals(t){return this===t||null!=t&&(0,l.e)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,p.a)(this.translation),rotationAxis:(0,p.a)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,p.a)(this.scale)};return new r(t)}};(0,i._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],d.prototype,"translation",void 0),(0,i._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],d.prototype,"rotationAxis",void 0),(0,i._)([(0,s.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],d.prototype,"rotationAngle",void 0),(0,i._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],d.prototype,"scale",void 0),(0,i._)([(0,s.Cb)()],d.prototype,"rotation",null),(0,i._)([(0,s.Cb)()],d.prototype,"localMatrix",null),(0,i._)([(0,s.Cb)()],d.prototype,"localMatrixInverse",null),d=r=(0,i._)([(0,a.j)("esri.geometry.support.MeshTransform")],d);const m=(0,f.a)(),y=d}}]);